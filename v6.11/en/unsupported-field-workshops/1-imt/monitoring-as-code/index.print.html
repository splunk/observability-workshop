<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.0.0+97777ec5111409397e83f44eca496eea97697836"><meta name=description content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards. 1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Monitoring as Code :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards. 1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/monitoring-as-code/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Monitoring as Code :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards. 1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Monitoring as Code :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards. 1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused."><meta itemprop=dateModified content="2024-09-19T16:47:03+01:00"><meta itemprop=wordCount content="874"><title>Monitoring as Code :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/monitoring-as-code/index.html rel=canonical type=text/html title="Monitoring as Code :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v6.11/images/favicon.ico?1761092775 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v6.11/css/auto-complete/auto-complete.min.css?1761092775 rel=stylesheet><script src=/observability-workshop/v6.11/js/auto-complete/auto-complete.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/search-lunr.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/search.min.js?1761092775 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/v6.11/searchindex.en.js?1761092775"</script><script src=/observability-workshop/v6.11/js/lunr/lunr.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/lunr/lunr.stemmer.support.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/lunr/lunr.multi.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/lunr/lunr.en.min.js?1761092775 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/v6.11/fonts/fontawesome/css/fontawesome-all.min.css?1761092775 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v6.11/fonts/fontawesome/css/fontawesome-all.min.css?1761092775 rel=stylesheet></noscript><link href=/observability-workshop/v6.11/css/perfect-scrollbar/perfect-scrollbar.min.css?1761092775 rel=stylesheet><link href=/observability-workshop/v6.11/css/theme.min.css?1761092775 rel=stylesheet><link href=/observability-workshop/v6.11/css/format-print.min.css?1761092775 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/unsupported-field-workshops/1-imt/monitoring-as-code/index.html",window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v6.11",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/monitoring-as-code/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#1-initial-setup>1. Initial setup</a></li><li><a href=#2-create-execution-plan>2. Create execution plan</a></li><li><a href=#3-apply-execution-plan>3. Apply execution plan</a></li><li><a href=#3-destroy-all-your-hard-work>3. Destroy all your hard work</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.11/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.11/en/unsupported-field-workshops/index.html><span itemprop=name>Unsupported Field Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/index.html><span itemprop=name>Splunk IM</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>5. Monitoring as Code</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/monitoring-as-code/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/detectors/muting/index.html title="Working with Muting Rules (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.11/en/unsupported-field-workshops/1-imt/servicebureau/index.html title="Service Bureau (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable unsupported-field-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=monitoring-as-code>Monitoring as Code</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>Use Terraform<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to manage Observability Cloud Dashboards and Detectors</li><li>Initialize the Terraform Splunk Provider<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</li><li>Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider.</li><li>See how Terraform can also delete detectors and dashboards.</li></ul><hr><h2 id=1-initial-setup>1. Initial setup</h2><p>Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.</p><p>You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused.</p><p>Full documentation for the Splunk Terraform Provider is available <a href=https://registry.terraform.io/providers/splunk-terraform/signalfx/latest/docs rel=external target=_blank><strong>here</strong></a>.</p><p>Remaining in your AWS/EC2 instance, change into the <code>o11y-cloud-jumpstart</code> directory</p><div class=tab-panel data-tab-group=R-tabs-85bd36e2ffd38bc723e8fc638ff6a632><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-1eef9e6169c323d3af5f7aa5c6bee45a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-85bd36e2ffd38bc723e8fc638ff6a632","R-tab-1eef9e6169c323d3af5f7aa5c6bee45a")'>
<span class=tab-nav-text>Change directory</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-1eef9e6169c323d3af5f7aa5c6bee45a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/observability-content-contrib/integration-examples/terraform-jumpstart</span></span></code></pre></div></div></div></div></div><p>Initialize Terraform and upgrade to the latest version of the Splunk Terraform Provider.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note: Upgrading the SignalFx Terraform Provider</summary><div class=box-content><p>You will need to run the command below each time a new version of the Splunk Terraform Provider is released. You can track the releases on <a href=https://github.com/splunk-terraform/terraform-provider-signalfx/releases rel=external target=_blank>GitHub.</a></p></div></details><div class=tab-panel data-tab-group=R-tabs-70f8fc20f14350c192b825d6e797c174><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-e03cc7a7d4991da1b8957f06db510f2a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-70f8fc20f14350c192b825d6e797c174","R-tab-e03cc7a7d4991da1b8957f06db510f2a")'>
<span class=tab-nav-text>Initialise Terraform</span>
</button>
<button data-tab-item=R-tab-e72082b192227e12bf3e9fa81472ba79 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-70f8fc20f14350c192b825d6e797c174","R-tab-e72082b192227e12bf3e9fa81472ba79")'>
<span class=tab-nav-text>Initialise Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-e03cc7a7d4991da1b8957f06db510f2a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init -upgrade</span></span></code></pre></div></div></div><div data-tab-item=R-tab-e72082b192227e12bf3e9fa81472ba79 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    Upgrading modules...
</span></span><span class=line><span class=cl>    - aws in modules/aws
</span></span><span class=line><span class=cl>    - azure in modules/azure
</span></span><span class=line><span class=cl>    - docker in modules/docker
</span></span><span class=line><span class=cl>    - gcp in modules/gcp
</span></span><span class=line><span class=cl>    - host in modules/host
</span></span><span class=line><span class=cl>    - kafka in modules/kafka
</span></span><span class=line><span class=cl>    - kubernetes in modules/kubernetes
</span></span><span class=line><span class=cl>    - parent_child_dashboard in modules/dashboards/parent
</span></span><span class=line><span class=cl>    - pivotal in modules/pivotal
</span></span><span class=line><span class=cl>    - rum_and_synthetics_dashboard in modules/dashboards/rum_and_synthetics
</span></span><span class=line><span class=cl>    - usage_dashboard in modules/dashboards/usage
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing the backend...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing provider plugins...
</span></span><span class=line><span class=cl>    - Finding latest version of splunk-terraform/signalfx...
</span></span><span class=line><span class=cl>    - Installing splunk-terraform/signalfx v6.20.0...
</span></span><span class=line><span class=cl>    - Installed splunk-terraform/signalfx v6.20.0 (self-signed, key ID CE97B6074989F138)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Partner and community providers are signed by their developers.
</span></span><span class=line><span class=cl>    If you&#39;d like to know more about provider signing, you can read about it here:
</span></span><span class=line><span class=cl>    https://www.terraform.io/docs/cli/plugins/signing.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has created a lock file .terraform.lock.hcl to record the provider
</span></span><span class=line><span class=cl>    selections it made above. Include this file in your version control repository
</span></span><span class=line><span class=cl>    so that Terraform can guarantee to make the same selections by default when
</span></span><span class=line><span class=cl>    you run &#34;terraform init&#34; in the future.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has been successfully initialized!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    You may now begin working with Terraform. Try running &#34;terraform plan&#34; to see
</span></span><span class=line><span class=cl>    any changes that are required for your infrastructure. All Terraform commands
</span></span><span class=line><span class=cl>    should now work.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    If you ever set or change modules or backend configuration for Terraform,
</span></span><span class=line><span class=cl>    rerun this command to reinitialize your working directory. If you forget, other
</span></span><span class=line><span class=cl>    commands will detect it and remind you to do so if necessary.</span></span></code></pre></div></div></div></div></div><h2 id=2-create-execution-plan>2. Create execution plan</h2><p>The <code>terraform plan</code> command creates an execution plan. By default, creating a plan consists of:</p><ul><li>Reading the current state of any already-existing remote objects to make sure that the Terraform state is up-to-date.</li><li>Comparing the current configuration to the prior state and noting any differences.</li><li>Proposing a set of change actions that should, if applied, make the remote objects match the configuration.</li></ul><p>The plan command alone will not actually carry out the proposed changes, and so you can use this command to check whether the proposed changes match what you expected before you apply the changes</p><div class=tab-panel data-tab-group=R-tabs-fc1cab56b26fb7c83e017883bc747d64><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-21ae8d4caea374965ea90cf6437260d3 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fc1cab56b26fb7c83e017883bc747d64","R-tab-21ae8d4caea374965ea90cf6437260d3")'>
<span class=tab-nav-text>Execution Plan</span>
</button>
<button data-tab-item=R-tab-652375c28b3b941b74d96a43213463ce class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-fc1cab56b26fb7c83e017883bc747d64","R-tab-652375c28b3b941b74d96a43213463ce")'>
<span class=tab-nav-text>Execution Plan Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-21ae8d4caea374965ea90cf6437260d3 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform plan -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-652375c28b3b941b74d96a43213463ce class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Plan: 146 to add, 0 to change, 0 to destroy.</span></span></code></pre></div></div></div></div></div><p>If the plan executes successfully, we can go ahead and apply:</p><hr><h2 id=3-apply-execution-plan>3. Apply execution plan</h2><p>The <code>terraform apply</code> command executes the actions proposed in the Terraform plan above.</p><p>The most straightforward way to use <code>terraform apply</code> is to run it without any arguments at all, in which case it will automatically create a new execution plan (as if you had run terraform plan) and then prompt you to provide the API Token, Realm (the prefix defaults to <code>Splunk</code>) and approve the plan, before taking the indicated actions.</p><p>Due to this being a workshop it is required that the prefix is to be unique so you need to run the <code>terraform apply</code> below.</p><div class=tab-panel data-tab-group=R-tabs-d672c7ddb4c2363a03d13791cadc7cf4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-9f08c24c624a2271959fcb369e2231cf class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d672c7ddb4c2363a03d13791cadc7cf4","R-tab-9f08c24c624a2271959fcb369e2231cf")'>
<span class=tab-nav-text>Apply Plan</span>
</button>
<button data-tab-item=R-tab-4b1feafd24685453b75376ec61506347 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d672c7ddb4c2363a03d13791cadc7cf4","R-tab-4b1feafd24685453b75376ec61506347")'>
<span class=tab-nav-text>Apply Plan Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-9f08c24c624a2271959fcb369e2231cf class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-4b1feafd24685453b75376ec61506347 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Apply complete! Resources: 146 added, 0 changed, 0 destroyed.</span></span></code></pre></div></div></div></div></div><p>Once the apply has been completed, validate that the detectors were created, under the <strong>Alerts & Detectors</strong> and click on the <strong>Detectors</strong> tab. They will be prefixed by the instance name. To check the prefix value run:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span></span></span></code></pre></div><p>You will see a list of the new detectors and you can search for the prefix that was output from above.</p><p><a href=#R-image-1e5b97e3dad2b469053d326183e22798 class=lightbox-link><img alt=Detectors class="lazy lightbox figure-image" loading=lazy src=../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1e5b97e3dad2b469053d326183e22798><img alt=Detectors class="lazy lightbox lightbox-image" loading=lazy src=../images/detectors.png></a></p><h2 id=3-destroy-all-your-hard-work>3. Destroy all your hard work</h2><p>The <code>terraform destroy</code> command is a convenient way to destroy all remote objects managed by your Terraform configuration.</p><p>While you will typically not want to destroy long-lived objects in a production environment, Terraform is sometimes used to manage ephemeral infrastructure for development purposes, in which case you can use <code>terraform destroy</code> to conveniently clean up all of those temporary objects once you are finished with your work.</p><p>Now go and destroy all the Detectors and Dashboards that were previously applied!</p><div class=tab-panel data-tab-group=R-tabs-2709918fdf15db5120cad90e33fc032b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-0e181f89f47654b86f3beb42f5cc08b8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2709918fdf15db5120cad90e33fc032b","R-tab-0e181f89f47654b86f3beb42f5cc08b8")'>
<span class=tab-nav-text>Destroy</span>
</button>
<button data-tab-item=R-tab-ab310097b36e3dd9ad3ac195c42fce73 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-2709918fdf15db5120cad90e33fc032b","R-tab-ab310097b36e3dd9ad3ac195c42fce73")'>
<span class=tab-nav-text>Destroy Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-0e181f89f47654b86f3beb42f5cc08b8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-ab310097b36e3dd9ad3ac195c42fce73 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Destroy complete! Resources: 146 destroyed.</span></span></code></pre></div></div></div></div></div><p>Validate all the detectors have been removed by navigating to <em><strong>Alerts â†’ Detectors</strong></em></p><p><a href=#R-image-ec362c5e2deda2bc6a49e10615f19424 class=lightbox-link><img alt=Destroyed class="lazy lightbox figure-image" loading=lazy src=../images/destroy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec362c5e2deda2bc6a49e10615f19424><img alt=Destroyed class="lazy lightbox lightbox-image" loading=lazy src=../images/destroy.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Terraform is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>A provider is responsible for understanding API interactions and exposing resources. Providers generally are an IaaS (e.g. Alibaba Cloud, AWS, GCP, Microsoft Azure, OpenStack), PaaS (e.g. Heroku), or SaaS services (e.g. Splunk, Terraform Cloud, DNSimple, Cloudflare).&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></div></main></div><script src=/observability-workshop/v6.11/js/clipboard/clipboard.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/perfect-scrollbar/perfect-scrollbar.min.js?1761092775 defer></script><script src=/observability-workshop/v6.11/js/theme.min.js?1761092775 defer></script></body></html>