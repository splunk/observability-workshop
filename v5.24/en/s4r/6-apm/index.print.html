<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=generator content="Relearn 5.23.2+tip"><meta name=description content="Splunk Observability Workshops"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Splunk APM :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Splunk Observability Workshops"><meta property="og:title" content="Splunk APM :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Splunk Observability Workshops"><meta property="og:type" content="website"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.24/en/s4r/6-apm/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><title>Splunk APM :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v5.24/en/s4r/6-apm/index.html rel=canonical type=text/html title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../en/s4r/6-apm/index.xml rel=alternate type=application/rss+xml title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1701364212 rel=icon type=image/x-icon sizes=any><link href=../../../css/fontawesome-all.min.css?1701364216 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1701364216 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1701364216 rel=stylesheet><link href=../../../css/auto-complete.css?1701364216 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1701364216 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1701364216 rel=stylesheet><link href=../../../css/fonts.css?1701364216 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1701364216 rel=stylesheet></noscript><link href=../../../css/theme.css?1701364216 rel=stylesheet><link href=../../../css/theme-auto.css?1701364216 rel=stylesheet id=R-variant-style><link href=../../../css/variant.css?1701364216 rel=stylesheet><link href=../../../css/print.css?1701364216 rel=stylesheet media=print><link href=../../../css/format-print.css?1701364216 rel=stylesheet><link href=../../../css/ie.css?1701364216 rel=stylesheet><script src=../../../js/url.js?1701364216></script>
<script src=../../../js/variant.js?1701364216></script>
<script>window.index_js_url="../../../en/index.search.js";var root_url="../../../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://splunk.github.io/observability-workshop/v5.24/",window.variants&&variants.init(["auto","splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script>
<script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script>
<script>SplunkRum.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rum",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g",app:"observability-workshop",version:"1",environment:"observability-workshop-env"}),SplunkSessionRecorder.init({beaconUrl:"https://rum-ingest.eu0.signalfx.com/v1/rumreplay",rumAuth:"EDIbCJR4LlxWdXMLjkYX1g"})</script><style>@media screen and (min-width:1000px){#R-body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1000px;width:100%}}:root{--MENU-WIDTH-L:19.75rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../en/s4r/6-apm/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)">
<i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../en/s4r/index.html><span itemprop=name>Splunk4Rookies - Observability</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Splunk APM</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 6</div><h1 id=splunk-apm>Splunk APM</h1><span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content style=background-color:#ed0090>20 minutes</span></span><div class="box notices cstyle orange"><div class=box-label><i class="fa-fw fas fa-user"></i> Persona</div><div class=box-content><p>You are a <strong>back-end developer</strong> and you have been called in to help investigate an issue found by the SRE. The SRE has identified a poor user experience and has asked you to investigate the issue.</p></div></div><p>Discover the power of full end-to-end visibility by jumping from a RUM trace (front-end) to an APM trace (back-end). All the services are sending telemetry (traces and spans) that Splunk Observability Cloud can visualize, analyze and use to detect anomalies and errors.</p><p>RUM and APM are two sides of the same coin. RUM is the client-side view of the application and APM is the server-side view. In this section, we will use APM to drill down and identify where the problem is.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Splunk APM</h1><article class=default><header class=headline></header><h1 id=1-apm-explore>1. APM Explore</h1><p>The APM Service Map displays the dependencies and connections among your instrumented and inferred services in APM. The map is dynamically generated based on your selections in the time range, environment, workflow, service, and tag filters.</p><p>When we clicked on the APM link in the RUM waterfall, filters were automatically added to the service map view to show the services that were involved in that <strong>WorkFlow Name</strong> (<code>frontend:/cart/checkout</code>).</p><p>You can see the services involved in the workflow in the <strong>Service Map</strong>. In the side pane, under <strong>Business Workflow</strong>, charts for the selected workflow are displayed. The <strong>Service Map</strong> and <strong>Business Workflow</strong> charts are synchronized. When you select a service in the <strong>Service Map</strong>, the charts in the <strong>Business Workflow</strong> pane are updated to show metrics for the selected service.</p><p><a href=#R-image-c9af2bc5f296022cf1f6c224dfb70706 class=lightbox-link><img src=../../../en/s4r/6-apm/1-apm-explore/../images/apm-business-workflow.png alt="APM Business Workflow" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c9af2bc5f296022cf1f6c224dfb70706><img src=../../../en/s4r/6-apm/1-apm-explore/../images/apm-business-workflow.png alt="APM Business Workflow" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click on the <strong>paymentservice</strong> in the Service Map.</li></ul></div></div><p><a href=#R-image-4dcfaf2a23ad880ba7592c561041f24e class=lightbox-link><img src=../../../en/s4r/6-apm/1-apm-explore/../images/apm-explore.png alt="APM Explore" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4dcfaf2a23ad880ba7592c561041f24e><img src=../../../en/s4r/6-apm/1-apm-explore/../images/apm-explore.png alt="APM Explore" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Splunk APM also provides a set of built-in dashboards that present charts and visualized metrics to help you see problems occurring in real time and quickly determine whether the problem is associated with a service, a specific endpoint, or the underlying infrastructure. Let&rsquo;s have a closer look.</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click on <strong>View Dashboard</strong> top right of the <strong>paymentservice</strong> pane.</li></ul></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=2-apm-service-dashboard>2. APM Service Dashboard</h1><p>APM dashboards present request, error, and duration (RED) metrics based on Monitoring MetricSets created from endpoint spans for your services, endpoints, and Business Workflows. They also present related host and Kubernetes metrics to help you determine whether problems are related to the underlying infrastructure.</p><p><a href=#R-image-7568611e4ff44a0216a03f9eb9d4f1fd class=lightbox-link><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-service-dashboard.png alt="Service Dashboard" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7568611e4ff44a0216a03f9eb9d4f1fd><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-service-dashboard.png alt="Service Dashboard" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Note: <em>Need to explain some of the charts in the dashboard, and include using it the exercise</em></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>In the <strong>Request rate</strong> text chart, click the <strong>&mldr;</strong> and select <strong>Copy</strong>. Note that you now have a <strong>1</strong> before the <strong>+</strong> at the top right of the page, indicating you have a copied chart to the clipboard.</li><li>Click the <strong>&mldr;</strong> in the <strong>Error rate</strong> text chart and select <strong>Add to clipboard</strong>. Note that you now have <strong>2</strong> before the <strong>+</strong> on the top right of the page.</li></ul></div></div><p>We will be using these charts later on in the workshop. Click the back button in your browser to return to the Service Map.</p><p><a href=#R-image-0fa392460888984f2437e872984b91b0 class=lightbox-link><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-explore.png alt="APM Explore" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0fa392460888984f2437e872984b91b0><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-explore.png alt="APM Explore" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><div class=tab-panel data-tab-group=44b622e64ad040b3ca3a4a099a5f16d4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=question class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("44b622e64ad040b3ca3a4a099a5f16d4","question")'>
<span class=tab-nav-text>Question</span></button>
<button data-tab-item=answer class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("44b622e64ad040b3ca3a4a099a5f16d4","answer")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div data-tab-item=question class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>In the Service Map hover over the <strong>paymentservice</strong>. What can you conclude from the popup service chart?</strong></p></div></div><div data-tab-item=answer class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The error percentage is very high.</strong></p></div></div></div></div></div></div><p><a href=#R-image-130aab3ad566bac401766391e332c246 class=lightbox-link><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-service-popup-chart.png alt="APM Service Chart" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-130aab3ad566bac401766391e332c246><img src=../../../en/s4r/6-apm/2-apm-service-dashboard/../images/apm-service-popup-chart.png alt="APM Service Chart" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>We need to understand if there is a pattern to this error rate. We have a handy tool for that, <strong>Tag Spotlight</strong>.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=3-apm-tag-spotlight>3. APM Tag Spotlight</h1><p>To view the tags for the <strong>paymentservice</strong> click on the <strong>paymentservice</strong> and then click on <strong>Tag Spotlight</strong> in the right-hand side functions pane. Once in <strong>Tag Spotlight</strong> ensure the toggle <strong>Show tags with no values</strong> is off.</p><p><a href=#R-image-efc66d37b12ca295c3a895e5c2ec8f48 class=lightbox-link><img src=../../../en/s4r/6-apm/3-apm-tag-spotlight/../images/apm-tag-spotlight.png alt="APM Tag Spotlight" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-efc66d37b12ca295c3a895e5c2ec8f48><img src=../../../en/s4r/6-apm/3-apm-tag-spotlight/../images/apm-tag-spotlight.png alt="APM Tag Spotlight" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>There are two views available in <strong>Tag Spotlight</strong>. The default is <strong>Request/Errors</strong> and the other is <strong>Latency</strong>.</p><p>Request/Error charts display the total number of requests, errors, and root cause errors. The Latency charts display p50, p90, and p99 latency. These values are based on Troubleshooting MetricSets (TMS), which Splunk APM generates for every indexed span tag. These are known as RED metrics (request, error, and duration).</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><div class=tab-panel data-tab-group=cae7e59cf5fd8b102ca51fb45a95caa8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=question class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("cae7e59cf5fd8b102ca51fb45a95caa8","question")'>
<span class=tab-nav-text>Question</span></button>
<button data-tab-item=answer class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("cae7e59cf5fd8b102ca51fb45a95caa8","answer")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div data-tab-item=question class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Which chart exposes the tag that identifies what the problem is?</strong></p></div></div><div data-tab-item=answer class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The <em>version</em> chart. The number of requests against <code>v350.10</code> matches the number of errors.</strong></p></div></div></div></div></div></div><p>Now that we have identified the version of the <strong>paymentservice</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. Click on <strong>‚Üê Tag Spotlight</strong> at the top of the page to get back to the Service Map.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=4-apm-service-breakdown>4. APM Service Breakdown</h1><p>From the service map view, click on <strong>paymentservice</strong> to select it. You can use the Breakdown selector to break the service down by any indexed span tag.</p><p>More story here &mldr;</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>In the right-hand pane there is a button
<span class="btn cstyle grey"><button type=button>
Breakdown</button>
</span>. Click on this button to view the tags the service can be broken down by.</li><li>Select <code>tenant.level</code>.</li><li>What can you conclude from what you are seeing?</li><li>Click on <strong>gold</strong> to select it.</li><li>Click on
<span class="btn cstyle grey"><button type=button>
Breakdown</button></span> and select <code>version</code>.</li><li>Repeat this for <strong>silver</strong> and <strong>bronze</strong>.</li></ul><div class=tab-panel data-tab-group=b6fa42794ebb49796f6ef4231c70d0d5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=question class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("b6fa42794ebb49796f6ef4231c70d0d5","question")'>
<span class=tab-nav-text>Question</span></button>
<button data-tab-item=answer class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("b6fa42794ebb49796f6ef4231c70d0d5","answer")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div data-tab-item=question class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What can you conclude from what you are seeing?</strong></p></div></div><div data-tab-item=answer class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>Every tenant is being impacted by <code>v350.10</code></strong></p></div></div></div></div></div></div><p>You will now see the <strong>paymentservice</strong> broken down by <code>tenant.level</code> and each tenant broken down by <code>version</code>. You can see that the <strong>paymentservice</strong> is broken down into three services <strong>gold</strong>, <strong>silver</strong> and <strong>bronze</strong>. Each tenant is broken down into two services, one for each version (<code>v350.10</code> and <code>v350.9</code>).</p><p><a href=#R-image-a11d59e94717a8d5011242b4e0781475 class=lightbox-link><img src=../../../en/s4r/6-apm/4-apm-service-breakdown/../images/apm-service-breakdown.png alt="APM Service Breakdown" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a11d59e94717a8d5011242b4e0781475><img src=../../../en/s4r/6-apm/4-apm-service-breakdown/../images/apm-service-breakdown.png alt="APM Service Breakdown" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click on any one of the red dotted lines coming from the <strong>checkoutservice</strong> to <code>v350.10</code>.</li><li>Repeat the same for <code>v350.9</code> and notice the difference in the error rate.</li></ul></div></div><p>Using span tags to break down services is a very powerful feature. It allows you to see how your services are performing for different customers, different versions, different regions, etc. In this exercise, we have determined that <code>v350.10</code> of the <strong>paymentservice</strong> is causing problems for our customers.</p><p>Next, we need to drill down into a trace to see what is going on.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=5-apm-trace-analyzer>5. APM Trace Analyzer</h1><p>In the right-hand pane, click on <strong>Traces</strong>. To ensure we are using <strong>Trace Analyzer</strong> make sure the button
<span class="btn cstyle transparent"><button type=button>
Switch to Classic View</button></span> is showing. If it is not, click on
<span class="btn cstyle blue"><button type=button>
Switch to Trace Analyzer</button>
</span>.</p><p>Splunk Observability Cloud provides several tools for exploring application monitoring data. <strong>Trace Analyzer</strong> is suited to scenarios where you have high-cardinality, high-granularity searches and explorations to research unknown or new issues.</p><p><a href=#R-image-b47f8bd9558243aea9747ddd63ec9939 class=lightbox-link><img src=../../../en/s4r/6-apm/5-apm-trace-analyzer/../images/apm-trace-analyzer.png alt="APM Trace Analyzer" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b47f8bd9558243aea9747ddd63ec9939><img src=../../../en/s4r/6-apm/5-apm-trace-analyzer/../images/apm-trace-analyzer.png alt="APM Trace Analyzer" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>In <strong>Trace Analyzer</strong> you can filter traces by any indexed/unindexed span tag. In this case, we want to filter the traces by <code>version</code> as we know from the previous exercise that <code>v350.10</code> is causing problems.</p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>In the time picker select <strong>Last 1 hour</strong>.</li><li>Make sure <strong>Sample Ratio</strong> is set to <code>1:1</code> and <strong>not</strong> <code>1:10</code>.</li><li>Click on <strong>Group traces by</strong> and select <code>version</code>.</li><li>Click on the ellipsis next to <code>v350.10</code> and click <strong>Add to filter</strong>.</li><li>Click <strong>Add filters</strong>, type in <strong>orderId</strong> and select <strong>orderId</strong> from the <strong>Unindexed Tags</strong> list.</li><li>Paste in your <strong>Order Confirmation ID</strong> from when you went shopping earlier in the workshop and hit enter.</li></ul><p><a href=#R-image-bc69babf0f8b6a16b7cc336b996fee02 class=lightbox-link><img src=../../../en/s4r/6-apm/5-apm-trace-analyzer/../images/apm-trace-by-duration.png alt="Traces by Duration" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bc69babf0f8b6a16b7cc336b996fee02><img src=../../../en/s4r/6-apm/5-apm-trace-analyzer/../images/apm-trace-by-duration.png alt="Traces by Duration" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p></div></div><p>We have now filtered down to the exact trace where you encountered a poor user experience with a very long checkout wait. Click on the trace in the list.</p><p>Next, we will walk through the trace waterfall.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=6-apm-waterfall>6. APM Waterfall</h1><p>We have arrived at the <strong>Trace Waterfall</strong> from the <strong>Trace Analyzer</strong>. A trace is a collection of spans that share the same trace ID, representing a unique transaction handled by your application and its constituent services.</p><p>Each span in Splunk APM captures a single operation. Splunk APM considers a span to be an error span if the operation that the span captures results in an error.</p><p><a href=#R-image-21bc3f96b1804e85e00b96efca0ac65c class=lightbox-link><img src=../../../en/s4r/6-apm/6-apm-waterfall/../images/apm-trace-waterfall.png alt="Trace Waterfall" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-21bc3f96b1804e85e00b96efca0ac65c><img src=../../../en/s4r/6-apm/6-apm-waterfall/../images/apm-trace-waterfall.png alt="Trace Waterfall" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><div class="box notices cstyle green"><div class=box-label><i class="fa-fw fas fa-running"></i> Exercise</div><div class=box-content><ul><li>Click on the
<span class="btn cstyle red"><button type=button>
!</button></span> next to the <strong>paymentservice</strong> span in the waterfall.</li></ul><div class=tab-panel data-tab-group=c954b1001a8b290af7f8ff0b0d3c8383><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=question class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("c954b1001a8b290af7f8ff0b0d3c8383","question")'>
<span class=tab-nav-text>Question</span></button>
<button data-tab-item=answer class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("c954b1001a8b290af7f8ff0b0d3c8383","answer")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div data-tab-item=question class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What is the error message being reported in the span metadata?</strong></p></div></div><div data-tab-item=answer class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>Invalid request</strong></p></div></div></div></div></div></div><p>At the very bottom of the <strong>Trace Waterfall</strong> click on the word <strong>Logs(1)</strong>. This highlights that there are <strong>Related Logs</strong> for this trace.</p><p><a href=#R-image-21ffb71f7440ae051fde4a5669443090 class=lightbox-link><img src=../../../en/s4r/6-apm/6-apm-waterfall/../images/apm-related-logs.png alt="Related Logs" class="figure-image noborder lightbox noshadow" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-21ffb71f7440ae051fde4a5669443090><img src=../../../en/s4r/6-apm/6-apm-waterfall/../images/apm-related-logs.png alt="Related Logs" class="lightbox-image noborder lightbox noshadow" loading=lazy></a></p><p>Related Content relies on specific metadata that allow APM, Infrastructure Monitoring, and Log Observer to pass filters around Observability Cloud. For related logs to work, you need to have the following metadata in your logs:</p><ul><li><code>service.name</code></li><li><code>deployment.environment</code></li><li><code>host.name</code></li><li><code>trace_id</code></li><li><code>span_id</code></li></ul><p>Click on the <strong>Related Logs</strong> link to view the logs for this trace. This will open the <strong>Log Observer</strong> in a new tab.</p><footer class=footline></footer></article></section></div></main></div><script src=../../../js/clipboard.min.js?1701364216 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1701364216 defer></script>
<script src=../../../js/theme.js?1701364216 defer></script></body></html>