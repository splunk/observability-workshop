<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.0.0+97777ec5111409397e83f44eca496eea97697836"><meta name=description content="This hands-on workshop demonstrates how to monitor Cisco AI Pods with Splunk Observability Cloud. Learn to deploy the OpenTelemetry Collector in Red Hat OpenShift, ingest infrastructure metrics using Prometheus receivers, and configure APM to monitor Python services that interact with Large Language Models (LLMs)."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Monitoring Cisco AI Pods with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="This hands-on workshop demonstrates how to monitor Cisco AI Pods with Splunk Observability Cloud. Learn to deploy the OpenTelemetry Collector in Red Hat OpenShift, ingest infrastructure metrics using Prometheus receivers, and configure APM to monitor Python services that interact with Large Language Models (LLMs)."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v6.12/en/ninja-workshops/14-cisco-ai-pods/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Monitoring Cisco AI Pods with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta property="og:description" content="This hands-on workshop demonstrates how to monitor Cisco AI Pods with Splunk Observability Cloud. Learn to deploy the OpenTelemetry Collector in Red Hat OpenShift, ingest infrastructure metrics using Prometheus receivers, and configure APM to monitor Python services that interact with Large Language Models (LLMs)."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Monitoring Cisco AI Pods with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta itemprop=description content="This hands-on workshop demonstrates how to monitor Cisco AI Pods with Splunk Observability Cloud. Learn to deploy the OpenTelemetry Collector in Red Hat OpenShift, ingest infrastructure metrics using Prometheus receivers, and configure APM to monitor Python services that interact with Large Language Models (LLMs)."><meta itemprop=dateModified content="2025-10-12T11:04:05+01:00"><meta itemprop=wordCount content="283"><title>Monitoring Cisco AI Pods with Splunk Observability Cloud :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v6.12/en/ninja-workshops/14-cisco-ai-pods/index.html rel=canonical type=text/html title="Monitoring Cisco AI Pods with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v6.12/images/favicon.ico?1761175652 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v6.12/css/auto-complete/auto-complete.min.css?1761175652 rel=stylesheet><script src=/observability-workshop/v6.12/js/auto-complete/auto-complete.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/search-lunr.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/search.min.js?1761175652 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/v6.12/searchindex.en.js?1761175652"</script><script src=/observability-workshop/v6.12/js/lunr/lunr.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/lunr/lunr.stemmer.support.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/lunr/lunr.multi.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/lunr/lunr.en.min.js?1761175652 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/v6.12/fonts/fontawesome/css/fontawesome-all.min.css?1761175652 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v6.12/fonts/fontawesome/css/fontawesome-all.min.css?1761175652 rel=stylesheet></noscript><link href=/observability-workshop/v6.12/css/perfect-scrollbar/perfect-scrollbar.min.css?1761175652 rel=stylesheet><link href=/observability-workshop/v6.12/css/theme.min.css?1761175652 rel=stylesheet><link href=/observability-workshop/v6.12/css/format-print.min.css?1761175652 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/14-cisco-ai-pods/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v6.12",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/v6.12/en/ninja-workshops/14-cisco-ai-pods/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.12/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.12/en/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Monitoring Cisco AI Pods with Splunk Observability Cloud</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.12/en/ninja-workshops/14-cisco-ai-pods/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.12/en/ninja-workshops/11-ingest-processor-for-observability-cloud/5-workshop-conclusion/index.html title="Conclusion (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.12/en/ninja-workshops/14-cisco-ai-pods/1-aws-setup/index.html title="AWS Setup (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=monitoring-cisco-ai-pods-with-splunk-observability-cloud>Monitoring Cisco AI Pods with Splunk Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p><strong>Cisco’s AI-ready PODs</strong> combine the best of hardware and software technologies to create a robust, scalable, and efficient AI-ready infrastructure tailored to diverse needs.</p><p><strong>Splunk Observability Cloud</strong> provides comprehensive visibility into all of this infrastructure along with all the application components that are running on this stack.</p><p>The steps to configure Splunk Observability Cloud for a Cisco AI POD environment are fully documented (see <a href=https://github.com/signalfx/splunk-opentelemetry-examples/tree/main/collector/cisco-ai-ready-pods rel=external target=_blank>here</a> for details).</p><p>However, it&rsquo;s not always possible to get access to a Cisco AI POD environment to practice the installation steps.</p><p>This workshop provides hands-on experience deploying and working with several of the technologies that are used to monitor Cisco AI PODs with Splunk Observability Cloud, without requiring access to an actual Cisco AI POD. This includes:</p><ul><li>Practice deploying a <strong>RedHat OpenShift</strong> cluster with GPU-based worker nodes.</li><li>Practice deploying the <strong>NVIDIA NIM Operator</strong> and <strong>NVIDIA GPU Operator</strong>.</li><li>Practice deploying <strong>Large Language Models (LLMs)</strong> using NVIDIA NIM to the cluster.</li><li>Practice deploying the <strong>OpenTelemetry Collector</strong> in the Red Hat OpenShift cluster.</li><li>Practice adding <strong>Prometheus</strong> receivers to the collector to ingest infrastructure metrics.</li><li>Practice deploying the <strong>Weaviate</strong> vector database to the cluster.</li><li>Practice instrumenting Python services that interact with Large Language Models (LLMs) with <strong>OpenTelemetry</strong>.</li><li>Understanding which details which OpenTelemetry captures in the trace from applications that interact with LLMs.</li></ul><blockquote><p>Please note: Red Hat OpenShift and NVIDIA AI Enterprise components
are typically pre-installed with an actual AI POD. However, because we’re using AWS for this workshop,
it’s necessary to perform these setup steps manually.</p></blockquote><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (◀️) and right (▶️) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Monitoring Cisco AI Pods with Splunk Observability Cloud</h1><article class=default><header class=headline></header><h1 id=aws-setup>AWS Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=enable-the-red-hat-openshift-service-in-aws>Enable the Red Hat OpenShift Service in AWS</h2><p>To deploy OpenShift in your AWS account, we&rsquo;ll need to first enable the
Red Hat OpenShift service using the <a href="https://us-east-1.console.aws.amazon.com/rosa/home?region=us-east-1#/" rel=external target=_blank>AWS console</a>.</p><p>Next, follow the instructions to connect your AWS account with your Red Hat account.</p><h2 id=provision-an-ec2-instance>Provision an EC2 Instance</h2><p>Let&rsquo;s provision an EC2 instance that we&rsquo;ll use to deploy the Red Hat cluster. This avoids
the limitations running the ROSA command-line interface on Mac OS.</p><p>We used a t3.xlarge instance type using Ubuntu 24.04 LTS while creating the workshop,
but a smaller instance type can also be used.</p><p>ssh into the instance once it&rsquo;s up and running.</p><h2 id=clone-the-github-repository>Clone the GitHub Repository</h2><p>Clone the GitHub repository to your EC2 instance:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/splunk/observability-workshop.git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>cd</span> observability-workshop/workshop/cisco-ai-pods </span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=openshift-prerequisites>OpenShift Prerequisites</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>The steps below are required before deploying the OpenShift cluster in AWS.</p><h2 id=create-a-red-hat-login>Create a Red Hat Login</h2><p>The first thing we&rsquo;ll need to do is create an account with Red Hat, which we can do by
filling out the form
<a href="https://www.redhat.com/wapps/ugc/register.html?_flowId=register-flow&_flowExecutionKey=e1s1" rel=external target=_blank>here</a>.</p><h2 id=install-the-aws-cli>Install the AWS CLI</h2><p>To install the AWS CLI on the EC2 instance provisioned previously, run the following commands:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&#34;</span> -o <span class=s2>&#34;awscliv2.zip&#34;</span>
</span></span><span class=line><span class=cl>sudo apt install unzip
</span></span><span class=line><span class=cl>unzip awscliv2.zip
</span></span><span class=line><span class=cl>sudo ./aws/install</span></span></code></pre></div><p>Use the following command to ensure it was installed successfully:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws --version</span></span></code></pre></div><p>It should return something like the following:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>aws-cli/2.30.5 Python/3.13.7 Linux/6.14.0-1011-aws exe/x86_64.ubuntu.24</code></pre></div><p>Login to your AWS account using your preferred method. Refer to the
<a href=https://docs.aws.amazon.com/signin/latest/userguide/command-line-sign-in.html rel=external target=_blank>documentation</a>
for guidance. For example, you can login by running the <code>aws configure</code> command.</p><p>Confirm you&rsquo;re logged in successfully by running a command such as <code>aws ec2 describe-instances</code>.</p><p>Then, verify your account identity with:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws sts get-caller-identity</span></span></code></pre></div><p>Check whether the service role for ELB (Elastic Load Balancing) exists:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws iam get-role --role-name <span class=s2>&#34;AWSServiceRoleForElasticLoadBalancing&#34;</span></span></span></code></pre></div><p>If the role does not exist, create it by running the following command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws iam create-service-linked-role --aws-service-name <span class=s2>&#34;elasticloadbalancing.amazonaws.com&#34;</span></span></span></code></pre></div><h2 id=install-the-rosa-cli>Install the ROSA CLI</h2><p>We&rsquo;ll use the ROSA command-line interface (CLI) for the deployment. The instructions are
based on <a href=https://docs.redhat.com/en/documentation/red_hat_openshift_service_on_aws_classic_architecture/4/html-single/install_rosa_classic_clusters/index#rosa-installing-and-configuring-the-rosa-cli_rosa-installing-cli rel=external target=_blank>Red Hat documentation</a>.</p><p>You can download the latest release of the ROSA CLI for your operating system
<a href=https://console.redhat.com/openshift/downloads rel=external target=_blank>here</a>.</p><p>Alternatively, we can use the following command to download the CLI binary directly
to our EC2 instance:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>curl -L -O https://mirror.openshift.com/pub/cgw/rosa/latest/rosa-linux.tar.gz</code></pre></div><p>Extract the contents:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>tar -xvzf rosa-linux.tar.gz</code></pre></div><p>Move the resulting file (<code>rosa</code>) to a location that&rsquo;s included as part of your path. For example:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mv rosa /usr/local/bin/rosa</span></span></code></pre></div><p>Log in to your Red Hat account by running the command below, then follow the instructions
in the command output:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>rosa login --use-device-code</code></pre></div><h2 id=install-the-openshift-cli-oc>Install the OpenShift CLI (oc)</h2><p>We can use the following command to download the OpenShift CLI binary directly
to our EC2 instance:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>curl -L -O https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-client-linux.tar.gz</code></pre></div><p>Extract the contents:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>tar -xvzf openshift-client-linux.tar.gz</code></pre></div><p>Move the resulting files (<code>oc</code> and <code>kubectl</code>) to a location that&rsquo;s included as part of your path. For example:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mv oc /usr/local/bin/oc
</span></span><span class=line><span class=cl>sudo mv kubectl /usr/local/bin/kubectl</span></span></code></pre></div><h2 id=create-account-wide-roles-and-policies>Create Account-Wide Roles and Policies</h2><p>Use the following command to create the necessary account-wide roles and policies:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create account-roles --mode auto</span></span></code></pre></div><h2 id=create-an-aws-vpc-for-rosa-hcp>Create an AWS VPC for ROSA HCP</h2><p>We&rsquo;re going to use the Hosted Control Plane (HCP) deployment option to
deploy our OpenShift cluster. To do this, we&rsquo;ll need to
create a new VPC in our AWS account using the following command:</p><blockquote><p>Note: update the region as appropriate for your environment.</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create network --param <span class=nv>Region</span><span class=o>=</span>us-east-2</span></span></code></pre></div><blockquote><p>Important: make note of the subnet ids created as a result of this command
as you&rsquo;ll need them when creating the cluster.</p></blockquote><blockquote><p>Note: by default, each AWS region is limited to 5 elastic IP addresses.<br>If you receive the following error:
&ldquo;The maximum number of addresses has been reached.&rdquo;
then you&rsquo;ll need to contact AWS to request an increase to this limit,
or choose another AWS region to create the VPC for ROSA.</p></blockquote><h2 id=create-an-openid-connect-configuration>Create an OpenID Connect configuration</h2><p>Before creating a Red Hat OpenShift Service on AWS cluster, let&rsquo;s create the OpenID Connect (OIDC)
configuration with the following command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create oidc-config --mode<span class=o>=</span>auto --yes</span></span></code></pre></div><blockquote><p>Important: make note of the oidc-provider id that is created.</p></blockquote><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 25, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-openshift-cluster-in-aws>Deploy OpenShift Cluster in AWS</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>25 minutes</span>
</span>&nbsp;<h2 id=deploy-an-openshift-cluster>Deploy an OpenShift Cluster</h2><p>We&rsquo;ll use the ROSA CLI to deploy an OpenShift Cluster.</p><p>First, we&rsquo;ll need to set a few environment variables:</p><blockquote><p>Note: be sure to fill in the Subnet IDs and OIDC ID before running the EXPORT commands</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CLUSTER_NAME</span><span class=o>=</span>rosa-test
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>AWS_REGION</span><span class=o>=</span>us-east-2
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>AWS_INSTANCE_TYPE</span><span class=o>=</span>g5.2xlarge
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SUBNET_IDS</span><span class=o>=</span>&lt;comma separated list of subnet IDs from earlier rosa create network command&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OIDC_ID</span><span class=o>=</span>&lt;the oidc-provider id returned from the rosa create oidc-config command&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OPERATOR_ROLES_PREFIX</span><span class=o>=</span>rosa-test-a6x9</span></span></code></pre></div><p>Create operator roles for the OIDC configuration using the following command:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create operator-roles --hosted-cp --prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span> --oidc-config-id <span class=nv>$OIDC_ID</span></span></span></code></pre></div><p>Then we can create the cluster as follows:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create cluster <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cluster-name <span class=nv>$CLUSTER_NAME</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --mode auto <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --hosted-cp <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --sts <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --create-admin-user <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --operator-roles-prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --oidc-config-id <span class=nv>$OIDC_ID</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --subnet-ids <span class=nv>$SUBNET_IDS</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --compute-machine-type <span class=nv>$AWS_INSTANCE_TYPE</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --replicas <span class=m>2</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --region <span class=nv>$AWS_REGION</span> </span></span></code></pre></div><blockquote><p>Note that we&rsquo;ve specified the <code>g5.2xlarge</code> instance type, which includes NVIDIA
GPUs that we&rsquo;ll be using later in the workshop. This instance type is relatively expensive,
about $1.21 per hour at the time of writing, and we&rsquo;ve requested 2 replicas,
so be mindful of how long your cluster is running for, as costs will accumulate quickly.</p></blockquote><p>To determine when your cluster is Ready, run:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa describe cluster -c <span class=nv>$CLUSTER_NAME</span></span></span></code></pre></div><p>To watch your cluster installation logs, run:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa logs install -c <span class=nv>$CLUSTER_NAME</span> --watch</span></span></code></pre></div><h2 id=connect-to-the-openshift-cluster>Connect to the OpenShift Cluster</h2><p>Use the command below to connect the oc CLI to your OpenShift cluster:</p><blockquote><p>Note: Run the <code>rosa describe cluster -c $CLUSTER_NAME</code> command and substitute the
resulting API Server URL into the command below before running it. For example,
the server name might be something like <code>https://api.rosa-test.aaa.bb.openshiftapps.com:443</code>.</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> oc login &lt;API Server URL&gt; -u cluster-admin</span></span></code></pre></div><p>Once connected to your cluster, confirm that the nodes are up and running:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                       STATUS   ROLES    AGE   VERSION
</span></span><span class=line><span class=cl>ip-10-0-1-184.us-east-2.compute.internal   Ready    worker   14m   v1.31.11
</span></span><span class=line><span class=cl>ip-10-0-1-50.us-east-2.compute.internal    Ready    worker   20m   v1.31.11</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 2, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Now that our OpenShift cluster is up and running, let&rsquo;s deploy the
OpenTelemetry Collector, which gathers metrics, logs, and traces
from the infrastructure and applications running in the cluster, and
sends the resulting data to Splunk Observability Cloud.</p><h2 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector</h2><p>First, we&rsquo;ll create a new project for the collector and switch to that project:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc new-project otel </span></span></code></pre></div><p>Ensure Helm is installed:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install curl gpg apt-transport-https --yes
</span></span><span class=line><span class=cl>curl -fsSL https://packages.buildkite.com/helm-linux/helm-debian/gpgkey <span class=p>|</span> gpg --dearmor <span class=p>|</span> sudo tee /usr/share/keyrings/helm.gpg &gt; /dev/null
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [signed-by=/usr/share/keyrings/helm.gpg] https://packages.buildkite.com/helm-linux/helm-debian/any/ any main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install helm</span></span></code></pre></div><p>Add the Splunk OpenTelemetry Collector for Kubernetes&rsquo; Helm chart repository:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart</span></span></code></pre></div><p>Ensure the repository is up-to-date:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update</span></span></code></pre></div><p>Review the file named <code>./otel-collector/otel-collector-values.yaml</code> as we&rsquo;ll be using it
to install the OpenTelemetry collector.</p><p>Set environment variables to configure the Splunk environment you&rsquo;d like
the collector to send data to:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENVIRONMENT_NAME</span><span class=o>=</span>&lt;which environment to send data to <span class=k>for</span> Splunk Observability Cloud&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_ACCESS_TOKEN</span><span class=o>=</span>&lt;your access token <span class=k>for</span> Splunk Observability Cloud&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_REALM</span><span class=o>=</span>&lt;your realm <span class=k>for</span> Splunk Observability Cloud i.e. us0, us1, eu0, etc.&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_HEC_URL</span><span class=o>=</span>&lt;HEC endpoint to send logs to Splunk platform i.e. https://&lt;hostname&gt;:443/services/collector/event&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_HEC_TOKEN</span><span class=o>=</span>&lt;HEC token to send logs to Splunk platform&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_INDEX</span><span class=o>=</span>&lt;name of index to send logs to in Splunk platform&gt;</span></span></code></pre></div><p>Then install the collector using the following command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$SPLUNK_ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$SPLUNK_REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$SPLUNK_HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$SPLUNK_HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./otel-collector/otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n otel <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><p>Run the following command to confirm that all of the collector pods are running:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>oc get pods

NAME                                                          READY   STATUS    RESTARTS   AGE
splunk-otel-collector-agent-58rwm                             1/1     Running   0          6m40s
splunk-otel-collector-agent-8dndr                             1/1     Running   0          6m40s
splunk-otel-collector-k8s-cluster-receiver-7b7f5cdc5b-rhxsj   1/1     Running   0          6m40s</code></pre></div><p>Confirm that you can see the cluster in Splunk Observability Cloud by navigating to
Infrastructure Monitoring -> Kubernetes -> Kubernetes Pods and then filtering on your
cluster name:</p><p><a href=#R-image-212f84f3372bbf9949b94493395170f0 class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../images/KubernetesPods.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-212f84f3372bbf9949b94493395170f0><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../images/KubernetesPods.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-nvidia-nim-operator>Deploy the NVIDIA NIM Operator</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>The <strong>NVIDIA GPU Operator</strong> is a Kubernetes Operator that automates the deployment, configuration,
and management of all necessary NVIDIA software components to provision GPUs within a Kubernetes cluster.</p><p>The <strong>NVIDIA NIM Operator</strong> is used to deploy LLMs in Kubernetes environments, such
as the OpenShift cluster we created earlier in this workshop.</p><p>This section of the workshop walks through the steps necessary to deploy both the
NVIDIA GPU and NIM operators in our OpenShift cluster.</p><h2 id=create-a-nvidia-ngc-account>Create a NVIDIA NGC Account</h2><p>An NVIDIA GPU CLOUD (NGC) account is required to download LLMs and deploy them
using the NVIDIA NIM operator. You can register <a href=https://ngc.nvidia.com/signin rel=external target=_blank>here</a>
to create an account.</p><h2 id=register-with-the-nvidia-developer-program>Register with the NVIDIA Developer Program</h2><p>Registering with the <a href=https://developer.nvidia.com/ rel=external target=_blank>NVIDIA Developer Program</a> allows us
to get access to NVIDIA NIM, which we&rsquo;ll use later in the workshop to deploy LLMs.</p><p>Ensure that <code>NVIDIA Developer Program</code> appears on your list of NVIDIA subscriptions in NGC:</p><p><a href=#R-image-b01f86af5946205c9762691b52c5e2bd class=lightbox-link><img alt="NVIDIA Subscriptions" class="lazy lightbox figure-image" loading=lazy src=../images/NVIDIA-Subscriptions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b01f86af5946205c9762691b52c5e2bd><img alt="NVIDIA Subscriptions" class="lazy lightbox lightbox-image" loading=lazy src=../images/NVIDIA-Subscriptions.png></a></p><h2 id=generate-an-ngc-api-key>Generate an NGC API Key</h2><p>Once you&rsquo;re logged in to the NGC website, click on your user account icon on the
top-right corner of the screen and select <strong>Setup</strong>.</p><p>Then click <strong>Generate API Key</strong> and follow the instructions. Ensure the key is associated
with the <strong>NGC Catalog</strong> and <strong>Secrets Manager</strong> services.</p><p>Save the generated key in a safe place as we&rsquo;ll use it later in the workshop.</p><p>Refer to <a href=https://docs.nvidia.com/ngc/gpu-cloud/ngc-user-guide/index.html#generating-api-key rel=external target=_blank>NVIDIA Documentation</a>
for further details on generating an NGC API key.</p><h2 id=install-the-node-feature-discovery-operator>Install the Node Feature Discovery Operator</h2><p>The steps in this section are based on <a href=https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/specialized_hardware_and_driver_enablement/psap-node-feature-discovery-operator#install-operator-cli_psap-node-feature-discovery-operator rel=external target=_blank>Installing the NFD Operator using the CLI </a>.</p><p>Run the following script to install the Node Feature Discovery Operator:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> nvidia
</span></span><span class=line><span class=cl>./install-nfd-operator.sh</span></span></code></pre></div><p>To verify that the Operator deployment is successful, run:</p><div class=tab-panel data-tab-group=R-tabs-f376751068a690556690d491dc37db81><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f376751068a690556690d491dc37db81","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f376751068a690556690d491dc37db81","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>nfd-controller-manager-7f86ccfb58-vgr4x   2/2     Running   <span class=m>0</span>          10m</span></span></code></pre></div></div></div></div></div><h2 id=create-a-nodefeaturediscovery-cr>Create a NodeFeatureDiscovery CR</h2><p>The steps in this section are based on <a href=https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/specialized_hardware_and_driver_enablement/psap-node-feature-discovery-operator#creating-nfd-cr-cli_psap-node-feature-discovery-operator rel=external target=_blank>Creating a NodeFeatureDiscovery CR by using the CLI </a>.</p><p>Run the following script to create the Node Feature Discovery CR:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./create-nfd-cr.sh</span></span></code></pre></div><h2 id=install-the-nvidia-gpu-operator>Install the NVIDIA GPU Operator</h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/datacenter/cloud-native/openshift/latest/install-gpu-ocp.html#installing-the-nvidia-gpu-operator-on-openshift rel=external target=_blank>Installing the NVIDIA GPU Operator on OpenShift</a>.</p><p>Run the following script to install the NVIDIA GPU Operator:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-nvidia-gpu-operator.sh</span></span></code></pre></div><p>Wait until the install plan has been created:</p><div class=tab-panel data-tab-group=R-tabs-12462a7894c3a6fce4feb457967d23f8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-12462a7894c3a6fce4feb457967d23f8","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-12462a7894c3a6fce4feb457967d23f8","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get installplan -n nvidia-gpu-operator</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME            CSV                              APPROVAL   APPROVED
</span></span><span class=line><span class=cl>install-mmlxq   gpu-operator-certified.v25.3.4   Manual     false</span></span></code></pre></div></div></div></div></div><p>Approve the install plan with the following commands:</p><div class=tab-panel data-tab-group=R-tabs-c439ba389fc6735707212c6b21ee5dcf><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c439ba389fc6735707212c6b21ee5dcf","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c439ba389fc6735707212c6b21ee5dcf","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>INSTALL_PLAN</span><span class=o>=</span><span class=k>$(</span>oc get installplan -n nvidia-gpu-operator -oname<span class=k>)</span>
</span></span><span class=line><span class=cl>oc patch <span class=nv>$INSTALL_PLAN</span> -n nvidia-gpu-operator --type merge --patch <span class=s1>&#39;{&#34;spec&#34;:{&#34;approved&#34;:true }}&#39;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>installplan.operators.coreos.com/install-rc9xq patched</span></span></code></pre></div></div></div></div></div><h2 id=create-the-cluster-policy>Create the Cluster Policy</h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/datacenter/cloud-native/openshift/latest/install-gpu-ocp.html#create-the-cluster-policy-using-the-cli rel=external target=_blank>Create the cluster policy using the CLI</a>.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./create-cluster-policy.sh</span></span></code></pre></div><h2 id=verify-the-nvidia-gpu-operator-installation>Verify the NVIDIA GPU Operator Installation</h2><p>Verify the successful installation of the NVIDIA GPU Operator using the following command:</p><div class=tab-panel data-tab-group=R-tabs-90937d4d96d659a32e47c0155c26376c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-90937d4d96d659a32e47c0155c26376c","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-90937d4d96d659a32e47c0155c26376c","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods,daemonset -n nvidia-gpu-operator</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                      READY   STATUS      RESTARTS      AGE
</span></span><span class=line><span class=cl>pod/gpu-feature-discovery-sblkn                           1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/gpu-feature-discovery-zpt94                           1/1     Running     <span class=m>0</span>             4m58s
</span></span><span class=line><span class=cl>pod/gpu-operator-6579bc6fdc-cp28l                         1/1     Running     <span class=m>0</span>             23m
</span></span><span class=line><span class=cl>pod/nvidia-container-toolkit-daemonset-qfcl9              1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-container-toolkit-daemonset-zbwb6              1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-cuda-validator-f7tl2                           0/1     Completed   <span class=m>0</span>             78s
</span></span><span class=line><span class=cl>pod/nvidia-cuda-validator-t7n9g                           0/1     Completed   <span class=m>0</span>             71s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-exporter-gk66x                            1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-exporter-w8kr8                            1/1     Running     <span class=m>2</span> <span class=o>(</span>52s ago<span class=o>)</span>   5m5s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-lrnzr                                     1/1     Running     <span class=m>0</span>             4m58s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-tvrdm                                     1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-device-plugin-daemonset-d62nk                  1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-device-plugin-daemonset-fnv4j                  1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-driver-daemonset-418.94.202509100653-0-5xbvq   2/2     Running     <span class=m>0</span>             5m48s
</span></span><span class=line><span class=cl>pod/nvidia-driver-daemonset-418.94.202509100653-0-hmkdl   2/2     Running     <span class=m>0</span>             5m48s
</span></span><span class=line><span class=cl>pod/nvidia-node-status-exporter-2kqwr                     1/1     Running     <span class=m>0</span>             5m44s
</span></span><span class=line><span class=cl>pod/nvidia-node-status-exporter-n8d9s                     1/1     Running     <span class=m>0</span>             5m44s
</span></span><span class=line><span class=cl>pod/nvidia-operator-validator-r2nm2                       1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-operator-validator-w2fpn                       1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                                           DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                                                                                                         AGE
</span></span><span class=line><span class=cl>daemonset.apps/gpu-feature-discovery                           <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.gpu-feature-discovery<span class=o>=</span><span class=nb>true</span>                                                                      5m45s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-container-toolkit-daemonset              <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.container-toolkit<span class=o>=</span><span class=nb>true</span>                                                                          5m48s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-dcgm                                     <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.dcgm<span class=o>=</span><span class=nb>true</span>                                                                                       5m46s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-dcgm-exporter                            <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.dcgm-exporter<span class=o>=</span><span class=nb>true</span>                                                                              5m46s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-device-plugin-daemonset                  <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.device-plugin<span class=o>=</span><span class=nb>true</span>                                                                              5m47s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-device-plugin-mps-control-daemon         <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       <span class=m>0</span>            <span class=m>0</span>           nvidia.com/gpu.deploy.device-plugin<span class=o>=</span>true,nvidia.com/mps.capable<span class=o>=</span><span class=nb>true</span>                                                  5m47s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-driver-daemonset-418.94.202509100653-0   <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           feature.node.kubernetes.io/system-os_release.OSTREE_VERSION<span class=o>=</span>418.94.202509100653-0,nvidia.com/gpu.deploy.driver<span class=o>=</span><span class=nb>true</span>   5m48s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-mig-manager                              <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       <span class=m>0</span>            <span class=m>0</span>           nvidia.com/gpu.deploy.mig-manager<span class=o>=</span><span class=nb>true</span>                                                                                5m45s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-node-status-exporter                     <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.node-status-exporter<span class=o>=</span><span class=nb>true</span>                                                                       5m44s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-operator-validator                       <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.operator-validator<span class=o>=</span><span class=nb>true</span>                                                                         5m48s</span></span></code></pre></div></div></div></div></div><h2 id=install-the-operator-sdk>Install the Operator SDK</h2><p>The steps in this section are based on <a href=https://sdk.operatorframework.io/docs/installation/#install-from-github-release rel=external target=_blank>Install from GitHub release</a>.</p><h3 id=download-the-release-binary>Download the release binary</h3><p>Set platform information:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ARCH</span><span class=o>=</span><span class=k>$(case</span> <span class=k>$(</span>uname -m<span class=k>)</span> in x86_64<span class=k>)</span> <span class=nb>echo</span> -n amd64 <span class=p>;;</span> aarch64<span class=o>)</span> <span class=nb>echo</span> -n arm64 <span class=p>;;</span> *<span class=o>)</span> <span class=nb>echo</span> -n <span class=k>$(</span>uname -m<span class=k>)</span> <span class=p>;;</span> <span class=k>esac</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OS</span><span class=o>=</span><span class=k>$(</span>uname <span class=p>|</span> awk <span class=s1>&#39;{print tolower($0)}&#39;</span><span class=k>)</span></span></span></code></pre></div><p>Download the binary for your platform:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OPERATOR_SDK_DL_URL</span><span class=o>=</span>https://github.com/operator-framework/operator-sdk/releases/download/v1.41.1
</span></span><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span></span></span></code></pre></div><h3 id=verify-the-downloaded-binary>Verify the downloaded binary</h3><p>Import the operator-sdk release GPG key from keyserver.ubuntu.com:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --keyserver keyserver.ubuntu.com --recv-keys 052996E2A20B5C7E</span></span></code></pre></div><p>Download the checksums file and its signature, then verify the signature:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/checksums.txt
</span></span><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/checksums.txt.asc
</span></span><span class=line><span class=cl>gpg -u <span class=s2>&#34;Operator SDK (release) &lt;cncf-operator-sdk@cncf.io&gt;&#34;</span> --verify checksums.txt.asc</span></span></code></pre></div><p>You should see something similar to the following:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg: assuming signed data in <span class=s1>&#39;checksums.txt&#39;</span>
</span></span><span class=line><span class=cl>gpg: Signature made Fri <span class=m>30</span> Oct <span class=m>2020</span> 12:15:15 PM PDT
</span></span><span class=line><span class=cl>gpg:                using RSA key ADE83605E945FA5A1BD8639C59E5B47624962185
</span></span><span class=line><span class=cl>gpg: Good signature from <span class=s2>&#34;Operator SDK (release) &lt;cncf-operator-sdk@cncf.io&gt;&#34;</span> <span class=o>[</span>ultimate<span class=o>]</span></span></span></code></pre></div><p>Make sure the checksums match:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> checksums.txt <span class=p>|</span> sha256sum -c -</span></span></code></pre></div><p>You should see something similar to the following:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>operator-sdk_linux_amd64: OK</span></span></code></pre></div><h3 id=install-the-release-binary-in-your-path>Install the release binary in your PATH</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> <span class=o>&amp;&amp;</span> sudo mv operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> /usr/local/bin/operator-sdk</span></span></code></pre></div><h2 id=install-the-ngc-cli>Install the NGC CLI</h2><p>The steps in this section are based on <a href=https://org.ngc.nvidia.com/setup/installers/cli rel=external target=_blank>NGC CLI Install</a>.</p><p>Click Download CLI to download the zip file that contains the binary, then transfer the zip file to a directory where you have permissions and then unzip and execute the binary. You can also download, unzip, and install from the command line by moving to a directory where you have execute permissions and then running the following command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget --content-disposition https://api.ngc.nvidia.com/v2/resources/nvidia/ngc-apps/ngc_cli/versions/4.3.0/files/ngccli_linux.zip -O ngccli_linux.zip <span class=o>&amp;&amp;</span> unzip ngccli_linux.zip</span></span></code></pre></div><p>Check the binary&rsquo;s md5 hash to ensure the file wasn&rsquo;t corrupted during download:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find ngc-cli/ -type f -exec md5sum <span class=o>{}</span> + <span class=p>|</span> <span class=nv>LC_ALL</span><span class=o>=</span>C sort <span class=p>|</span> md5sum -c ngc-cli.md5</span></span></code></pre></div><p>Check the binary&rsquo;s SHA256 hash to ensure the file wasn&rsquo;t corrupted during download. Run the following command</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sha256sum ngccli_linux.zip</span></span></code></pre></div><p>Compare with the following value, which can also be found in the Release Notes of the Resource:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>5f01eff85a66c895002f3c87db2933c462f3b86e461e60d515370f647b4ffc21</span></span></code></pre></div><p>After verifying value, make the NGC CLI binary executable and add your current directory to path:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod u+x ngc-cli/ngc
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;export PATH=\&#34;\$PATH:</span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span><span class=s2>/ngc-cli\&#34;&#34;</span> &gt;&gt; ~/.bash_profile <span class=o>&amp;&amp;</span> <span class=nb>source</span> ~/.bash_profile</span></span></code></pre></div><p>You must configure NGC CLI for your use so that you can run the commands.</p><p>Enter the following command, including your API key when prompted:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ngc config set</span></span></code></pre></div><p>Define an environment variable with your NGC API key:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>NGC_API_KEY</span><span class=o>=</span>&lt;your NGC API key&gt; </span></span></code></pre></div><h2 id=install-the-nvidia-nim-operator>Install the NVIDIA NIM Operator</h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/nim-operator/latest/install.html#installing-nim-operator-on-red-hat-openshift-using-operator-sdk-for-development-only rel=external target=_blank>Installing NIM Operator on Red Hat OpenShift Using operator-sdk (for Development-Only)</a>.</p><p>Run the following script to install the NIM operator:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-nim-operator.sh</span></span></code></pre></div><p>Confirm the controller pod is running:</p><div class=tab-panel data-tab-group=R-tabs-f61ac985f6d581d3fe746fa5b1aa981c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f61ac985f6d581d3fe746fa5b1aa981c","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f61ac985f6d581d3fe746fa5b1aa981c","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods -n nvidia-nim-operator</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                              READY   STATUS      RESTARTS   AGE
</span></span><span class=line><span class=cl>ec60a4439c710b89fc2582f5384382b4241f9aee62bb3182b8d128e69dx54dc   0/1     Completed   <span class=m>0</span>          61s
</span></span><span class=line><span class=cl>ghcr-io-nvidia-k8s-nim-operator-bundle-latest-main                1/1     Running     <span class=m>0</span>          71s
</span></span><span class=line><span class=cl>k8s-nim-operator-86d478b55c-w5cf5                                 1/1     Running     <span class=m>0</span>          50s</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-an-llm>Deploy an LLM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll use the NVIDIA NIM Operator to deploy two Large Language Models
to our OpenShift Cluster.</p><h2 id=create-a-namespace>Create a Namespace</h2><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace nim-service</span></span></code></pre></div><h2 id=add-secrets-with-ngc-api-key>Add Secrets with NGC API Key</h2><p>Add a Docker registry secret for downloading container images from NVIDIA NGC:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create secret -n nim-service docker-registry ngc-secret <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-server<span class=o>=</span>nvcr.io <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-username<span class=o>=</span><span class=s1>&#39;$oauthtoken&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-password<span class=o>=</span><span class=nv>$NGC_API_KEY</span></span></span></code></pre></div><p>Add a generic secret that model puller containers use to download the model from NVIDIA NGC:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create secret -n nim-service generic ngc-api-secret <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --from-literal<span class=o>=</span><span class=nv>NGC_API_KEY</span><span class=o>=</span><span class=nv>$NGC_API_KEY</span></span></span></code></pre></div><h2 id=deploy-an-llm>Deploy an LLM</h2><p>Run the following command to create the NIMCache and NIMService:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -n nim-service -f nvidia-llm.yaml</span></span></code></pre></div><p>Confirm that the Persistent Volume was created and the Persistent Volume Claim
was bound to is successfully:</p><blockquote><p>Note: this can take several minutes to occur</p></blockquote><div class=tab-panel data-tab-group=R-tabs-a77c49682de4e28dec5150624ba1ec12><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a77c49682de4e28dec5150624ba1ec12","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-a77c49682de4e28dec5150624ba1ec12","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pv,pvc -n nim-service</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                                   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
</span></span><span class=line><span class=cl>persistentvolume/pvc-1af12c04-29ad-497f-b018-7d9a3aea3019   100Gi      RWO            Delete           Bound    openshift-monitoring/prometheus-data-prometheus-k8s-1   gp3-csi        &lt;unset&gt;                          4h15m
</span></span><span class=line><span class=cl>persistentvolume/pvc-9c389d79-13fb-4169-9d99-a77efd6e7919   100Gi      RWO            Delete           Bound    openshift-monitoring/prometheus-data-prometheus-k8s-0   gp3-csi        &lt;unset&gt;                          4h15m
</span></span><span class=line><span class=cl>persistentvolume/pvc-a603b8a7-1445-4b03-945a-3ed68338834c   50Gi       RWO            Delete           Bound    nim-service/meta-llama-3-2-1b-instruct-pvc              gp3-csi        &lt;unset&gt;                          114s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
</span></span><span class=line><span class=cl>persistentvolumeclaim/meta-llama-3-2-1b-instruct-pvc   Bound    pvc-a603b8a7-1445-4b03-945a-3ed68338834c   50Gi       RWO            gp3-csi        &lt;unset&gt;                 7m8s</span></span></code></pre></div></div></div></div></div><p>Confirm that the NIMCache is Ready:</p><div class=tab-panel data-tab-group=R-tabs-6f72d57fcb5ee012a93449ed8bfaebe1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6f72d57fcb5ee012a93449ed8bfaebe1","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-6f72d57fcb5ee012a93449ed8bfaebe1","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimcache.apps.nvidia.com -n nim-service</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                         STATUS   PVC                              AGE
</span></span><span class=line><span class=cl>meta-llama-3-2-1b-instruct   Ready    meta-llama-3-2-1b-instruct-pvc   9m50s</span></span></code></pre></div></div></div></div></div><p>Confirm that the NIMService is Ready:</p><div class=tab-panel data-tab-group=R-tabs-26a900ca40ea58be269905b5730489ea><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-26a900ca40ea58be269905b5730489ea","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-26a900ca40ea58be269905b5730489ea","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimservices.apps.nvidia.com -n nim-service</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                         STATUS   AGE
</span></span><span class=line><span class=cl>meta-llama-3-2-1b-instruct   Ready    11m</span></span></code></pre></div></div></div></div></div><h2 id=test-the-llm>Test the LLM</h2><p>Let&rsquo;s ensure the LLM is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a prompt to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-5e027f6a4746f05fb22624b815f11b7a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5e027f6a4746f05fb22624b815f11b7a","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5e027f6a4746f05fb22624b815f11b7a","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X <span class=s2>&#34;POST&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> <span class=s1>&#39;http://meta-llama-3-2-1b-instruct.nim-service:8000/v1/chat/completions&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;model&#34;: &#34;meta/llama-3.2-1b-instruct&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;messages&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>        {
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;content&#34;:&#34;What is the capital of Canada?&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;role&#34;: &#34;user&#34;
</span></span></span><span class=line><span class=cl><span class=s1>        }],
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;top_p&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;n&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;max_tokens&#34;: 1024,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stream&#34;: false,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;frequency_penalty&#34;: 0.0,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stop&#34;: [&#34;STOP&#34;]
</span></span></span><span class=line><span class=cl><span class=s1>      }&#39;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;chatcmpl-2ccfcd75a0214518aab0ef0375f8ca21&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;object&#34;</span>: <span class=s2>&#34;chat.completion&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;created&#34;</span>: 1758919002,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;model&#34;</span>: <span class=s2>&#34;meta/llama-3.2-1b-instruct&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;choices&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;index&#34;</span>: 0,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;message&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;role&#34;</span>: <span class=s2>&#34;assistant&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reasoning_content&#34;</span>: null,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;content&#34;</span>: <span class=s2>&#34;The capital of Canada is Ottawa.&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;tool_calls&#34;</span>: <span class=o>[]</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;logprobs&#34;</span>: null,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;finish_reason&#34;</span>: <span class=s2>&#34;stop&#34;</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;stop_reason&#34;</span>: null
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>]</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;usage&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens&#34;</span>: 42,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;total_tokens&#34;</span>: 50,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;completion_tokens&#34;</span>: 8,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens_details&#34;</span>: null
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;prompt_logprobs&#34;</span>: null
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div></div><h2 id=deploy-an-embeddings-model>Deploy an Embeddings Model</h2><p>We&rsquo;re also going to deploy an <a href=https://build.nvidia.com/nvidia/llama-3_2-nv-embedqa-1b-v2/deploy rel=external target=_blank>embeddings model</a>
in our cluster, which will be used later in the workshop to implement Retrieval Augmented Generation (RAG).</p><p>Run the following command to deploy the embeddings model:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -n nim-service -f nvidia-embeddings.yaml</span></span></code></pre></div><p>Confirm that the NIMService is Ready:</p><div class=tab-panel data-tab-group=R-tabs-7c87883b3e9f09fff232a3fff73d58df><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7c87883b3e9f09fff232a3fff73d58df","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7c87883b3e9f09fff232a3fff73d58df","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimservices.apps.nvidia.com llama-32-nv-embedqa-1b-v2 -n nim-service</span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                        STATUS   AGE
</span></span><span class=line><span class=cl>llama-32-nv-embedqa-1b-v2   Ready    82s</span></span></code></pre></div></div></div></div></div><h2 id=test-the-embeddings-model>Test the Embeddings Model</h2><p>Let&rsquo;s ensure the embeddings is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a prompt to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-3e56e7aafb7ee18d1755df2e1e11eb99><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3e56e7aafb7ee18d1755df2e1e11eb99","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3e56e7aafb7ee18d1755df2e1e11eb99","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  curl -X POST http://llama-32-nv-embedqa-1b-v2.nim-service:8000/v1/embeddings <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;input&#34;: [&#34;What is the capital of France?&#34;],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;model&#34;: &#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;input_type&#34;: &#34;query&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;encoding_format&#34;: &#34;float&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;truncate&#34;: &#34;NONE&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;object&#34;</span>:<span class=s2>&#34;list&#34;</span>,<span class=s2>&#34;data&#34;</span>:<span class=o>[{</span><span class=s2>&#34;index&#34;</span>:0,<span class=s2>&#34;embedding&#34;</span>:<span class=o>[</span>-0.016632080078125,0.041259765625,-0.0156707763671875,0.032379150390625,0.045074462890625,0.0169830322265625,-0.03546142578125,-0.0003402233123779297,-0.038909912109375,-0.0023651123046875,-0.0001741647720336914,-0.01377105712890625,-0.01200103759765625,-0.00659942626953125,0.002536773681640625,0.0185394287109375,0.01546478271484375,0.0216827392578125,0.0139923095703125,-0.0121612548828125,-0.015869140625,0.005313873291015625,-0.020599365234375,0.02984619140625,-0.031982421875,0.0005679130554199219,-0.021697998046875,-0.0305938720703125,0.027618408203125,0.005340576171875,0.011993408203125,0.0135345458984375,-0.015625,0.036651611328125,-0.0210113525390625,0.0033321380615234375,0.033172607421875,-0.009552001953125,0.0226287841796875,0.01448822021484375,-0.05474853515625,-0.00861358642578125,-0.01513671875,-0.028656005859375,-0.0095977783203125,-0.025146484375,-0.0352783203125,0.03106689453125,-0.00726318359375,0.0157623291015625,0.01319122314453125,-0.005218505859375,-0.0013561248779296875,0.01277923583984375,-0.007328033447265625,0.01486968994140625,-0.05413818359375,-0.022125244140625,-0.015869140625,-0.00917816162109375,0.0186309814453125,-0.00814056396484375,-0.04730224609375,0.01406097412109375,-0.0248260498046875,0.0094757080078125,0.0309600830078125,0.0196533203125,-0.0270843505859375,-0.01113128662109375,-0.0056915283203125,-0.01154327392578125,0.037750244140625,-0.0028896331787109375,-0.00376129150390625,0.03692626953125,0.020416259765625,0.00200653076171875,0.0396728515625,0.004985809326171875,-0.04425048828125,-0.034820556640625,-0.0102386474609375,0.0218505859375,0.003604888916015625,0.00940704345703125,0.01468658447265625,0.0089111328125,-0.0032196044921875,-0.043243408203125,0.015411376953125,-0.00653839111328125,-0.01128387451171875,-0.052734375,0.032684326171875,-0.0101470947265625,-0.018218994140625,-0.003955841064453125,0.007648468017578125,-0.02044677734375,-0.0285186767578125,0.0153350830078125,0.03692626953125,0.0147247314453125,0.01043701171875,0.0007462501525878906,0.0261077880859375,0.024169921875,-0.040283203125,-0.005828857421875,0.00736236572265625,-0.00909423828125,0.00920867919921875,-0.00243377685546875,-0.03204345703125,-0.0232696533203125,0.01131439208984375,-0.0192413330078125,-0.025482177734375,-0.0267333984375,-0.03350830078125,-0.0008440017700195312,-0.040496826171875,0.0281982421875,-0.03533935546875,-0.0005216598510742188,0.061859130859375,0.0439453125,-0.00656890869140625,0.004627227783203125,-0.05615234375,0.027801513671875,-0.0027790069580078125,-0.011322021484375,-0.00841522216796875,0.027191162109375,-0.0018453598022460938,-0.00560760498046875,0.020263671875,-0.0295867919921875,0.03759765625,-0.00951385498046875,0.014190673828125,-0.039764404296875,-0.0199127197265625,-0.007427215576171875,-0.021392822265625,0.00946807861328125,0.03955078125,0.0015478134155273438,0.0227203369140625,0.020843505859375,-0.00531768798828125,0.0087432861328125,-0.01617431640625,0.002574920654296875,0.0104217529296875,0.01215362548828125,0.00970458984375,0.003803253173828125,0.005451202392578125,-0.001972198486328125,-0.01171875,-0.0216217041015625,0.033355712890625,-0.007137298583984375,0.00890350341796875,-0.01293182373046875,0.0189666748046875,-0.0168609619140625,-0.0153350830078125,0.0113525390625,-0.0123443603515625,0.046905517578125,0.0082244873046875,-0.019500732421875,0.004482269287109375,0.01007080078125,0.0037708282470703125,0.053619384765625,0.0171051025390625,-0.0305023193359375,-0.0240478515625,0.007648468017578125,-0.03973388671875,0.00847625732421875,-0.0207061767578125,-0.025115966796875,0.0168914794921875,0.03619384765625,0.00720977783203125,0.00803375244140625,0.022064208984375,-0.01111602783203125,-0.0024890899658203125,0.0047760009765625,-0.02374267578125,-0.0197296142578125,0.0203704833984375,0.00572967529296875,0.0254058837890625,0.0186920166015625,-0.022796630859375,-0.02191162109375,-0.0182952880859375,-0.00365447998046875,-0.01262664794921875,-0.0128326416015625,0.0157318115234375,-0.004596710205078125,0.033843994140625,0.01313018798828125,0.00656890869140625,0.0004596710205078125,-0.020355224609375,0.03411865234375,0.00034546852111816406,0.0205230712890625,0.02960205078125,-0.0157318115234375,-0.051483154296875,-0.0255584716796875,0.039825439453125,0.0258636474609375,0.038238525390625,-0.03424072265625,0.0188140869140625,0.03216552734375,-0.048126220703125,-0.0227203369140625,0.0032215118408203125,-0.0156097412109375,-0.003170013427734375,0.01444244384765625,-0.0232086181640625,0.002437591552734375,0.012451171875,-0.0066680908203125,0.01158905029296875,0.026397705078125,-0.00373077392578125,0.008087158203125,-0.00798797607421875,-0.0173187255859375,-0.013580322265625,0.033660888671875,-0.0028629302978515625,0.046295166015625,0.0299530029296875,-0.0159759521484375,-0.005580902099609375,0.0015277862548828125,0.01123046875,0.0031585693359375,-0.01151275634765625,0.00814056396484375,-0.0369873046875,0.0267181396484375,0.0013856887817382812,0.028656005859375,0.01409149169921875,0.035614013671875,-0.01189422607421875,-0.01190185546875,-0.053619384765625,0.037139892578125,-0.02288818359375,-0.024139404296875,0.01678466796875,-0.01020050048828125,-0.0222930908203125,-0.01059722900390625,0.044525146484375,0.006526947021484375,0.006084442138671875,-0.0015411376953125,-0.040618896484375,0.027801513671875,-0.00839996337890625,-0.01126861572265625,-0.01000213623046875,0.01197052001953125,-0.01062774658203125,-0.0155487060546875,0.011688232421875,0.01044464111328125,-0.0528564453125,0.031005859375,-0.0007734298706054688,8.52346420288086e-6,-0.00894927978515625,-0.005870819091796875,0.04254150390625,-0.03216552734375,0.0215911865234375,-0.01029205322265625,-0.01015472412109375,-0.036285400390625,0.0111083984375,0.0018520355224609375,-0.01177215576171875,0.01256561279296875,-0.004901885986328125,-0.006866455078125,-0.0084381103515625,-0.01160430908203125,-0.044891357421875,0.00632476806640625,0.0015001296997070312,-0.0016727447509765625,-0.013031005859375,-0.01404571533203125,-0.035888671875,-0.013397216796875,-0.0006346702575683594,0.00981903076171875,-0.0134735107421875,-0.022705078125,-0.02606201171875,-0.018402099609375,-0.046966552734375,-0.012542724609375,0.0183563232421875,0.0179901123046875,-0.0225067138671875,0.02801513671875,-0.032379150390625,-0.0079803466796875,0.0070953369140625,0.017333984375,0.026611328125,-0.03778076171875,-0.023590087890625,-0.005245208740234375,0.024383544921875,-0.02105712890625,0.020843505859375,0.033905029296875,0.0225372314453125,0.00942230224609375,0.0005245208740234375,-0.0284881591796875,0.01499176025390625,-0.0124664306640625,-0.0267333984375,0.023040771484375,0.01265716552734375,-0.0026264190673828125,0.00955963134765625,-0.0036773681640625,-0.0394287109375,0.015716552734375,-0.01300048828125,0.0187225341796875,-0.01275634765625,-0.0273590087890625,0.045562744140625,-0.00913238525390625,-0.004268646240234375,-0.005107879638671875,-0.026702880859375,0.0015077590942382812,-0.02862548828125,0.0003228187561035156,0.0099334716796875,-0.0305328369140625,-0.0362548828125,0.0114898681640625,-0.00025653839111328125,-0.0022735595703125,0.0106201171875,0.01090240478515625,0.00992584228515625,0.00998687744140625,-0.00634002685546875,0.00711822509765625,-0.02337646484375,-0.01367950439453125,-0.006389617919921875,-0.006000518798828125,0.01027679443359375,-0.00838470458984375,0.004673004150390625,0.002841949462890625,0.014404296875,-0.02838134765625,0.023834228515625,-0.00823974609375,-0.038970947265625,0.003002166748046875,-0.04510498046875,-0.0265655517578125,-0.0036182403564453125,-0.046661376953125,-0.01062774658203125,-0.05804443359375,-0.02117919921875,-0.029815673828125,0.036712646484375,-0.0069122314453125,0.0079345703125,0.0164794921875,-0.007534027099609375,-0.01111602783203125,0.0135650634765625,-0.0017242431640625,0.009490966796875,-0.0222320556640625,0.043853759765625,0.054718017578125,-0.003208160400390625,-0.004199981689453125,0.01529693603515625,-0.007190704345703125,0.00637054443359375,-0.004749298095703125,-0.0217132568359375,-0.0093841552734375,-0.0335693359375,-0.0017490386962890625,0.0081939697265625,0.0247802734375,0.0148468017578125,0.026763916015625,0.002079010009765625,0.0292816162109375,0.04705810546875,0.02166748046875,-0.0120697021484375,0.01050567626953125,0.0131988525390625,0.0169525146484375,0.0291595458984375,-0.00270843505859375,-0.0095062255859375,-0.0211944580078125,-0.035980224609375,0.006805419921875,0.002735137939453125,0.043731689453125,-0.01515960693359375,0.0010576248168945312,-0.00913238525390625,0.001293182373046875,-0.00027489662170410156,-0.00868988037109375,0.007389068603515625,0.0023212432861328125,-0.01528167724609375,0.017852783203125,-0.03643798828125,0.045623779296875,-0.0030364990234375,-0.0271453857421875,0.0268402099609375,-0.0033473968505859375,0.0186920166015625,-0.0225067138671875,0.0125732421875,-0.01386260986328125,-0.0218658447265625,0.01248931884765625,0.025848388671875,0.021453857421875,0.008056640625,0.025421142578125,0.01224517822265625,0.0208740234375,-0.003856658935546875,-0.021209716796875,-0.00545501708984375,-0.0254058837890625,0.04388427734375,0.0204315185546875,-0.0072174072265625,-0.0110626220703125,0.0007481575012207031,-0.0022411346435546875,-0.046905517578125,-0.028472900390625,0.0196533203125,0.014129638671875,0.0130615234375,-0.01288604736328125,-0.03607177734375,-0.01568603515625,-0.00814056396484375,-0.01499176025390625,0.0112152099609375,-0.00360870361328125,0.024688720703125,-0.0189361572265625,-0.007122039794921875,0.00634002685546875,-0.00626373291015625,-0.000766754150390625,0.0193939208984375,-0.002841949462890625,0.041717529296875,-0.00016701221466064453,-0.043365478515625,-0.023773193359375,0.0283660888671875,0.0245208740234375,-0.055450439453125,0.01096343994140625,-0.0180511474609375,0.0189056396484375,0.0164947509765625,-0.033111572265625,0.0262603759765625,0.0294189453125,0.00084686279296875,0.0279388427734375,-0.003910064697265625,0.002910614013671875,0.00890350341796875,-0.033843994140625,0.004856109619140625,0.00033974647521972656,-0.056549072265625,-0.0110626220703125,-0.0178375244140625,0.006381988525390625,0.018798828125,0.0205230712890625,-0.05609130859375,-0.01023101806640625,-0.001201629638671875,-0.02227783203125,0.01910400390625,0.006931304931640625,0.0017032623291015625,-0.01849365234375,-0.0249786376953125,-0.0176849365234375,0.007389068603515625,-0.01025390625,0.036407470703125,-0.0275421142578125,0.021514892578125,-0.0198822021484375,-0.0189056396484375,-0.0156402587890625,0.01025390625,0.02197265625,-0.007740020751953125,-0.034515380859375,0.0011262893676757812,0.024566650390625,0.0229339599609375,0.004810333251953125,-0.01171875,-0.0238189697265625,0.021392822265625,0.0008301734924316406,0.019378662109375,-0.00894927978515625,-0.01496124267578125,0.01558685302734375,-0.0229339599609375,0.00020587444305419922,-0.0202178955078125,0.0298919677734375,0.00969696044921875,-0.0011949539184570312,-0.007144927978515625,-0.0198211669921875,0.0030422210693359375,-0.037811279296875,-0.039306640625,-0.027587890625,-0.0274810791015625,0.025390625,-0.0333251953125,-0.0062103271484375,-0.016876220703125,0.002651214599609375,-0.0020275115966796875,0.042144775390625,0.013092041015625,0.01690673828125,0.0268707275390625,0.0082244873046875,0.066650390625,0.0053253173828125,0.08526611328125,-0.0146331787109375,-0.0261688232421875,-0.04266357421875,0.004474639892578125,-0.005229949951171875,-0.01806640625,0.00479888916015625,0.00183868408203125,-0.01030731201171875,0.0028285980224609375,-0.0239410400390625,0.0166778564453125,0.0006723403930664062,-0.00923919677734375,-0.00504302978515625,0.0159759521484375,-0.0248260498046875,0.03179931640625,-0.01517486572265625,-0.0006771087646484375,-0.0117645263671875,0.016510009765625,0.00168609619140625,-0.016387939453125,0.0421142578125,-0.00951385498046875,-0.00388336181640625,-0.04559326171875,-0.0194091796875,0.043853759765625,-0.007541656494140625,0.0275421142578125,-0.005645751953125,0.003803253173828125,-0.01438140869140625,0.018218994140625,-0.006381988525390625,-0.012664794921875,-0.011962890625,0.035186767578125,0.0225067138671875,-0.005321502685546875,-0.007659912109375,0.0022792816162109375,-0.00830078125,-0.0092926025390625,-0.0278778076171875,-0.00011402368545532227,0.0027523040771484375,0.0082855224609375,0.0175933837890625,0.0029430389404296875,0.0721435546875,0.01525115966796875,-0.059967041015625,-0.0626220703125,0.0222625732421875,-0.05810546875,-0.01192474365234375,-0.0056610107421875,0.0173492431640625,-0.0008497238159179688,-0.01050567626953125,-0.01558685302734375,0.0032196044921875,0.00745391845703125,-0.05029296875,0.00310516357421875,0.0333251953125,-0.01166534423828125,-0.0347900390625,-0.00830078125,0.01305389404296875,0.01030731201171875,0.017730712890625,-0.007415771484375,-0.00287628173828125,0.01197052001953125,-0.004016876220703125,-0.038421630859375,0.000743865966796875,-0.006237030029296875,0.0511474609375,-0.003826141357421875,-0.00838470458984375,-0.007572174072265625,0.00522613525390625,0.01514434814453125,0.00557708740234375,-0.035186767578125,0.0077056884765625,-0.0330810546875,-0.0043487548828125,-0.0307464599609375,-0.00670623779296875,0.01395416259765625,-0.0247039794921875,-0.03399658203125,0.0176849365234375,-0.00827789306640625,-0.0132293701171875,0.011016845703125,0.00740814208984375,-0.022735595703125,0.01110076904296875,-0.0127105712890625,-0.01074981689453125,-0.04150390625,-0.05438232421875,-0.0014743804931640625,-0.00507354736328125,-0.05291748046875,-0.0126800537109375,0.032135009765625,0.0266571044921875,-0.0240020751953125,-0.0033702850341796875,0.0021076202392578125,0.0206756591796875,0.01454925537109375,-0.00954437255859375,0.0178680419921875,0.004734039306640625,-0.0014028549194335938,0.0109710693359375,-0.0200042724609375,-0.030029296875,0.04022216796875,-0.0190887451171875,0.028594970703125,0.0205841064453125,-0.0028095245361328125,0.0024242401123046875,-0.0151214599609375,0.0025386810302734375,-0.006633758544921875,0.01265716552734375,-0.019073486328125,0.0030384063720703125,-0.024871826171875,-0.01148223876953125,0.00914764404296875,-0.004367828369140625,-0.0186920166015625,0.021514892578125,-0.027435302734375,0.00736236572265625,0.037872314453125,-0.00222015380859375,0.0041351318359375,-0.0224151611328125,-0.0255279541015625,0.03271484375,-0.0242919921875,0.0097198486328125,-0.02008056640625,-0.01003265380859375,-0.0215606689453125,-0.00974273681640625,-0.0428466796875,-0.0343017578125,-0.0006017684936523438,-0.0230865478515625,0.020782470703125,0.01134490966796875,0.0107421875,-0.0165863037109375,-0.0043487548828125,0.0165252685546875,0.0276947021484375,0.0051116943359375,0.03497314453125,0.0288848876953125,0.0205230712890625,-0.0099029541015625,0.0014505386352539062,-0.045074462890625,-0.0226898193359375,0.002422332763671875,0.0013151168823242188,-0.0031642913818359375,-0.0247344970703125,0.013885498046875,-0.002410888671875,0.046051025390625,0.0328369140625,0.04193115234375,0.006710052490234375,-0.004138946533203125,-0.031768798828125,0.024658203125,0.00417327880859375,-0.01116943359375,0.0097198486328125,-0.021270751953125,0.0285491943359375,0.02581787109375,0.0167083740234375,0.0206298828125,0.009185791015625,0.00794219970703125,-0.0022792816162109375,0.004337310791015625,-0.01166534423828125,-0.01227569580078125,0.00905609130859375,0.0156707763671875,-0.04217529296875,0.025054931640625,-0.01058197021484375,0.0171356201171875,0.001369476318359375,0.003917694091796875,-0.00817108154296875,0.026123046875,0.0200042724609375,-0.0294189453125,0.032440185546875,-0.0297393798828125,-0.0109100341796875,-0.00856781005859375,0.0034465789794921875,0.0186920166015625,0.0199737548828125,-0.03558349609375,-0.025146484375,-0.009307861328125,0.0081024169921875,0.0131378173828125,0.0117340087890625,0.0063018798828125,0.0000546574592590332,0.01898193359375,-0.0167694091796875,0.01666259765625,0.0374755859375,0.02374267578125,-0.0103912353515625,0.01207733154296875,-0.032989501953125,-0.004108428955078125,-0.0026798248291015625,0.01166534423828125,0.0257568359375,-0.056732177734375,0.0282745361328125,-0.0034351348876953125,-0.007415771484375,0.0081634521484375,0.029998779296875,0.0019369125366210938,-0.0014734268188476562,0.004573822021484375,0.04296875,0.025665283203125,-0.0121307373046875,0.029266357421875,0.016815185546875,-0.002536773681640625,-0.015045166015625,-0.0211334228515625,0.0020351409912109375,0.008087158203125,-0.004528045654296875,-0.0172882080078125,0.023712158203125,0.0305633544921875,0.0213470458984375,-0.0154266357421875,-0.035675048828125,0.0002543926239013672,0.01149749755859375,0.00833892822265625,0.01506805419921875,0.019500732421875,-0.01265716552734375,0.01947021484375,0.0242767333984375,-0.017486572265625,-0.01294708251953125,-0.012603759765625,-0.0093994140625,-0.00226593017578125,0.020355224609375,-0.0369873046875,0.0166168212890625,0.034332275390625,-0.0240631103515625,-0.03558349609375,0.036376953125,-0.009246826171875,0.0041656494140625,0.0439453125,-0.023284912109375,0.004749298095703125,-0.0232391357421875,-0.0105743408203125,-0.01030731201171875,-0.01318359375,0.0220184326171875,0.005840301513671875,0.0217437744140625,-0.01007080078125,0.01398468017578125,0.0019063949584960938,-0.011383056640625,-0.00424957275390625,-0.0208282470703125,0.012237548828125,0.01526641845703125,0.00959014892578125,0.027191162109375,0.001735687255859375,0.0177154541015625,-0.01139068603515625,0.0218963623046875,0.03814697265625,-0.018951416015625,0.011016845703125,-0.01287078857421875,0.046875,-0.007415771484375,0.01198577880859375,-0.02532958984375,0.00311279296875,0.018524169921875,0.005390167236328125,-0.01435089111328125,0.0018949508666992188,0.0421142578125,0.0045928955078125,-0.006099700927734375,0.007049560546875,0.00502777099609375,-0.00963592529296875,0.00894927978515625,-0.034515380859375,-0.0035114288330078125,-0.0142974853515625,-0.034515380859375,-0.02142333984375,0.017608642578125,-0.014892578125,-0.01244354248046875,-0.017486572265625,0.00013899803161621094,0.00011283159255981445,-0.00756072998046875,-0.0132293701171875,0.0108489990234375,0.0305328369140625,-0.001163482666015625,-0.002880096435546875,-0.0007386207580566406,0.00370025634765625,0.00797271728515625,-0.010528564453125,-0.0073089599609375,-0.0279693603515625,-0.01343536376953125,-0.005908966064453125,-0.0003764629364013672,0.053955078125,0.0237884521484375,-0.053497314453125,-0.01165771484375,-0.037628173828125,0.0099639892578125,-0.02386474609375,0.032958984375,0.0239715576171875,0.0016231536865234375,-0.033111572265625,0.0007448196411132812,0.0245819091796875,-0.0094757080078125,-0.03131103515625,-0.02459716796875,0.021453857421875,0.01398468017578125,-0.0017442703247070312,0.054107666015625,0.0193328857421875,0.0057373046875,0.03485107421875,0.0258636474609375,0.004131317138671875,-0.02239990234375,-0.002368927001953125,0.01102447509765625,-0.017181396484375,0.01454925537109375,-0.0119781494140625,-0.0017871856689453125,-0.0166778564453125,0.008544921875,-0.0135345458984375,-0.03192138671875,0.0030956268310546875,-0.0279083251953125,0.0235595703125,-0.017974853515625,0.0108184814453125,0.0031032562255859375,-0.003093719482421875,-0.014129638671875,0.01361083984375,-0.03619384765625,-0.00826263427734375,0.033477783203125,-0.004150390625,0.0157012939453125,0.0011501312255859375,0.059844970703125,-0.01555633544921875,0.031219482421875,0.0177001953125,-0.0307464599609375,0.01264190673828125,0.0291290283203125,0.01045989990234375,-0.0097503662109375,0.01226806640625,0.00598907470703125,0.01849365234375,-0.02801513671875,-0.0112152099609375,-0.006011962890625,-0.006664276123046875,0.00928497314453125,0.0002186298370361328,-0.0012874603271484375,-0.0233001708984375,-0.0065155029296875,-0.0220947265625,-0.00310516357421875,0.049041748046875,-0.04925537109375,0.0262451171875,-0.0028095245361328125,-0.0091400146484375,0.0240631103515625,-0.002864837646484375,0.0120391845703125,-0.021942138671875,0.0347900390625,0.023834228515625,-0.0134429931640625,0.00028228759765625,0.0277557373046875,0.03082275390625,0.006237030029296875,-0.015350341796875,-0.005039215087890625,0.0145416259765625,0.01226806640625,-0.01474761962890625,-0.004917144775390625,-0.005733489990234375,-0.010986328125,0.0223236083984375,0.0224609375,-0.035736083984375,-0.008544921875,-0.0009150505065917969,-0.0119476318359375,0.0178070068359375,-0.005352020263671875,-0.01558685302734375,-0.0208740234375,-0.0160675048828125,0.0069122314453125,-0.0357666015625,0.01319122314453125,-0.00457000732421875,0.00502777099609375,-0.0006170272827148438,0.0032196044921875,-0.008209228515625,0.0026721954345703125,-0.022705078125,0.01666259765625,-0.0217132568359375,-0.024017333984375,-0.00527191162109375,0.0005908012390136719,0.0028228759765625,-0.0205841064453125,-0.05108642578125,0.02947998046875,-0.00861358642578125,-0.035552978515625,-0.0090484619140625,-0.044464111328125,-0.0284881591796875,0.004901885986328125,0.00669097900390625,0.020538330078125,0.01218414306640625,0.01477813720703125,0.0011930465698242188,0.027587890625,-0.037811279296875,0.0273284912109375,-0.0006680488586425781,0.0179901123046875,0.047393798828125,0.033355712890625,-0.018646240234375,-0.031585693359375,-0.0190887451171875,0.0059051513671875,-0.005916595458984375,0.0247802734375,0.00881195068359375,-0.004108428955078125,-0.0091552734375,0.021697998046875,-0.0207061767578125,0.0207977294921875,-0.048095703125,-0.01544189453125,0.015533447265625,0.0228424072265625,0.0255126953125,-0.0172119140625,-0.0450439453125,0.0005936622619628906,0.0027103424072265625,0.03704833984375,-0.018218994140625,-0.00972747802734375,0.0067901611328125,-0.000598907470703125,-0.00482940673828125,-0.00786590576171875,0.0011510848999023438,0.0364990234375,-0.0128631591796875,-0.0198822021484375,0.0000896453857421875,-0.022735595703125,0.01479339599609375,-0.0034351348876953125,0.0120086669921875,0.0070037841796875,-0.01971435546875,0.04010009765625,0.0034389495849609375,-0.0109100341796875,0.01395416259765625,0.03509521484375,0.01096343994140625,-0.0209808349609375,-0.0009293556213378906,-0.00043487548828125,0.005519866943359375,-0.016448974609375,0.032470703125,0.0284881591796875,0.0144195556640625,-0.0307464599609375,0.0217437744140625,-0.0303497314453125,-0.05926513671875,0.01444244384765625,-0.01264190673828125,0.040313720703125,-0.012603759765625,-0.0178375244140625,-0.04339599609375,0.01222991943359375,-0.0025005340576171875,-0.010406494140625,-0.003086090087890625,-0.0214385986328125,0.01045989990234375,0.005886077880859375,-0.0175933837890625,0.04840087890625,-0.0168914794921875,0.01800537109375,-0.01354217529296875,-0.01383209228515625,0.04083251953125,0.034271240234375,0.021514892578125,0.04022216796875,0.0231781005859375,-0.01110076904296875,-0.0224151611328125,0.0021991729736328125,-0.01206207275390625,-0.01557159423828125,0.0548095703125,0.02618408203125,0.023956298828125,-0.00994110107421875,-0.004299163818359375,0.007030487060546875,-0.0113372802734375,0.0140228271484375,-0.01084136962890625,0.010711669921875,-0.0236358642578125,0.01776123046875,0.04461669921875,-0.0460205078125,-0.012969970703125,0.0078277587890625,-0.040313720703125,-0.004344940185546875,-0.00681304931640625,-0.00937652587890625,0.00601959228515625,-0.0086669921875,0.038238525390625,-0.00726318359375,-0.00667572021484375,-0.0282745361328125,-0.01448822021484375,-0.004566192626953125,0.002193450927734375,0.0408935546875,-0.018951416015625,-0.0347900390625,-0.0038661956787109375,0.0011167526245117188,0.00603485107421875,0.004985809326171875,0.004299163818359375,0.009552001953125,-0.04736328125,0.018310546875,0.004238128662109375,0.028839111328125,-0.02349853515625,0.00798797607421875,0.021270751953125,-0.01384735107421875,-0.02392578125,0.03662109375,0.0032825469970703125,0.056182861328125,-0.007129669189453125,-0.0014019012451171875,0.030426025390625,-0.017974853515625,-0.0118560791015625,0.0104827880859375,-0.0132293701171875,0.01959228515625,-0.0006871223449707031,-0.038055419921875,0.03125,0.01332855224609375,0.0675048828125,0.0005002021789550781,0.0117950439453125,0.0179901123046875,-0.0034618377685546875,-0.029205322265625,0.0136871337890625,-0.01409149169921875,-0.020111083984375,-0.06976318359375,-0.03985595703125,-0.020965576171875,0.002532958984375,-0.000797271728515625,0.00029206275939941406,-0.04278564453125,0.01293182373046875,-0.0178375244140625,-0.01496124267578125,-0.0289154052734375,-0.00551605224609375,-0.0135498046875,-0.0019350051879882812,-0.0008111000061035156,0.032958984375,0.005794525146484375,-0.00988006591796875,0.0147247314453125,0.0008878707885742188,-0.0347900390625,0.04827880859375,0.03656005859375,0.0005245208740234375,0.0078887939453125,0.0218048095703125,0.0177764892578125,0.02093505859375,-0.028656005859375,0.0273284912109375,-0.038818359375,0.01300811767578125,0.0174102783203125,0.01216888427734375,-0.0258941650390625,0.028778076171875,-0.024658203125,0.00337982177734375,-0.00594329833984375,-0.00948333740234375,0.036773681640625,-0.006595611572265625,-0.01033782958984375,0.001506805419921875,-0.03656005859375,-0.0239105224609375,0.041229248046875,-0.04071044921875,-0.0152435302734375,0.0151214599609375,0.037994384765625,-0.01058197021484375,-0.01062774658203125,0.002964019775390625,0.0294189453125,0.01041412353515625,0.038299560546875,-0.036163330078125,-0.036346435546875,-0.00850677490234375,-0.0098876953125,-0.051788330078125,0.02398681640625,-0.0219268798828125,0.023406982421875,0.008941650390625,0.010772705078125,-0.0265960693359375,-0.0099639892578125,-0.00727081298828125,0.0234222412109375,0.0023441314697265625,-0.01409912109375,0.01169586181640625,0.0023250579833984375,-0.0189208984375,-0.01013946533203125,-0.01739501953125,-0.0309295654296875,-0.00823974609375,0.029205322265625,0.01111602783203125,-0.01509857177734375,-0.01160430908203125,0.0173187255859375,0.0169830322265625,-0.00464630126953125,0.0253448486328125,0.0095062255859375,-0.0179443359375,0.0223846435546875,-0.0219879150390625,-0.0004260540008544922,-0.025421142578125,-0.007659912109375,-0.01485443115234375,-0.0166168212890625,0.011444091796875,0.0185394287109375,-0.02984619140625,0.061767578125,0.0189971923828125,-0.016693115234375,0.002613067626953125,-0.01242828369140625,0.0262298583984375,0.029388427734375,-0.0711669921875,-0.0263519287109375,0.01184844970703125,0.00977325439453125,-0.0232696533203125,-0.0131072998046875,0.00910186767578125,0.0251617431640625,0.04644775390625,-0.00033926963806152344,0.00894927978515625,0.01216888427734375,-0.00942230224609375,0.01220703125,0.002918243408203125,0.0167694091796875,0.0286865234375,0.01436614990234375,-0.02581787109375,-0.0123138427734375,-0.0143890380859375,0.0200042724609375,-0.020660400390625,-0.017791748046875,-0.006740570068359375,0.02484130859375,-0.028472900390625,-0.0142364501953125,-0.007534027099609375,0.021697998046875,-0.013580322265625,-0.003910064697265625,0.01214599609375,-0.01267242431640625,-0.005466461181640625,0.0239410400390625,0.01348876953125,0.0171661376953125,-0.00982666015625,-0.009613037109375,0.0189208984375,-0.01146697998046875,-0.01364898681640625,-0.021820068359375,-0.017181396484375,0.0097503662109375,-0.0240478515625,0.031829833984375,0.0172271728515625,0.01308441162109375,0.006938934326171875,0.0212249755859375,-0.007843017578125,-0.041839599609375,0.003757476806640625,-0.01332855224609375,-0.0081024169921875,-0.0252227783203125,0.0125732421875,0.00164794921875,-0.009490966796875,-0.0182647705078125,-0.03497314453125,-0.0187225341796875,-0.001026153564453125,-0.06793212890625,-0.05291748046875,-0.0297393798828125,-0.005031585693359375,-0.026519775390625,-0.00891876220703125,0.0096893310546875,-0.0189056396484375,0.01444244384765625,-0.0270233154296875,-0.0010528564453125,0.006771087646484375,-0.00942230224609375,0.03399658203125,-0.0203094482421875,-0.004795074462890625,0.0025959014892578125,0.01538848876953125,-0.00620269775390625,-0.035675048828125,-0.01142120361328125,0.0011234283447265625,-0.0278778076171875,0.00807952880859375,-0.017547607421875,0.0211639404296875,0.037139892578125,-0.0108642578125,-0.0287017822265625,-0.0008664131164550781,-0.00862884521484375,-0.006320953369140625,-0.00901031494140625,-0.012451171875,0.017913818359375,0.005092620849609375,-0.04345703125,-0.027801513671875,0.023040771484375,0.007328033447265625,-0.013916015625,-0.007678985595703125,-0.0031185150146484375,0.01546478271484375,0.02020263671875,-0.01259613037109375,0.0040130615234375,0.005023956298828125,0.00421142578125,-0.0018835067749023438,0.0369873046875,-0.0006284713745117188,0.007049560546875,-0.0213165283203125,-0.02215576171875,-0.05023193359375,-0.006420135498046875,0.001811981201171875,0.01995849609375,0.007694244384765625,-0.0081329345703125,-0.0347900390625,0.01042938232421875,-0.03131103515625,0.0312042236328125,-0.00971221923828125,-0.0352783203125,0.021209716796875,-0.009490966796875,0.00710296630859375,-0.004848480224609375,-0.01030731201171875,0.0037136077880859375,0.0234222412109375,0.004337310791015625,-0.03436279296875,0.0008835792541503906,-0.036712646484375,0.007740020751953125,0.003978729248046875,-0.0178985595703125,-0.0027065277099609375,0.035491943359375,0.01148223876953125,0.01496124267578125,-0.0025386810302734375,0.014404296875,0.007572174072265625,0.016876220703125,-0.0023212432861328125,0.002727508544921875,-0.005374908447265625,0.01690673828125,-0.020599365234375,-0.00002384185791015625,0.0305328369140625,-0.052734375,0.01496124267578125,0.0039215087890625,-0.00762176513671875,0.031585693359375,-0.01617431640625,-0.01222991943359375,0.00873565673828125,-0.033966064453125,0.01061248779296875,-0.0209197998046875,-0.0198516845703125,0.035247802734375,0.0244598388671875,0.0082550048828125,-0.00787353515625,-0.01544952392578125,0.01302337646484375,-0.0166168212890625,-0.0147247314453125,0.02618408203125,-0.0158233642578125,-0.0394287109375,0.0151214599609375,-0.004146575927734375,-0.035369873046875,0.045928955078125,0.04241943359375,0.01354217529296875,0.0343017578125,-0.007183074951171875,0.0129241943359375,-0.004955291748046875,0.025299072265625,0.01538848876953125,-0.0054779052734375,-0.00630950927734375,-0.010711669921875,0.043914794921875,-0.004856109619140625,0.05169677734375,-0.020111083984375,0.023406982421875,-0.0021114349365234375,-0.039215087890625,-0.01314544677734375,-0.0036773681640625,0.01031494140625,-0.00981903076171875,0.01366424560546875,0.0101776123046875,0.0274658203125,-0.0386962890625,0.0194244384765625,-0.04803466796875,0.033172607421875,0.0269775390625,-0.0176849365234375,-0.0016927719116210938,-0.02783203125,0.0015516281127929688,0.01325225830078125,-0.028472900390625,0.01470947265625,0.036773681640625,-0.038482666015625,-0.0009303092956542969,0.0236053466796875,-0.00498199462890625,0.0165557861328125,0.00003445148468017578,-0.03741455078125,-0.0517578125,-0.0090179443359375,-0.033966064453125,-0.0170440673828125,0.0013637542724609375,-0.04473876953125,-0.059478759765625,-0.0165557861328125,-0.047119140625,-0.033721923828125,0.018890380859375,0.00160980224609375,0.050811767578125,-0.0221099853515625,0.0306396484375,-0.01096343994140625,-0.007175445556640625,0.01580810546875,-0.00650787353515625,-0.00467681884765625,0.0256500244140625,0.006931304931640625,0.00316619873046875,-0.0170745849609375,-0.003265380859375,0.00554656982421875,-0.0166473388671875,0.0006661415100097656,0.0297393798828125,-0.00568389892578125,0.01043701171875,-0.03863525390625,0.01531982421875,0.021087646484375,0.002185821533203125,0.00977325439453125,-0.028594970703125,-0.0166473388671875,-0.00018537044525146484,-0.0014066696166992188,0.014312744140625,0.025299072265625,-0.0149383544921875,0.001495361328125,0.03692626953125,0.00438690185546875,0.05572509765625,-0.00350189208984375,0.0156402587890625,0.005992889404296875,-0.005748748779296875,-0.01739501953125,0.017059326171875,0.0006203651428222656,-0.0163726806640625,-0.0203704833984375,-0.005962371826171875,0.006130218505859375,-0.00022983551025390625,-0.014007568359375,-0.0025844573974609375,-0.0171356201171875,0.0130157470703125,-0.005809783935546875,0.0174560546875,-0.0196075439453125,-0.017486572265625,-0.035369873046875,0.0016012191772460938,-0.02008056640625,-0.0213775634765625,0.04119873046875,-0.0125732421875,-0.00983428955078125,0.01010894775390625,-0.01099395751953125,-0.009613037109375,-0.01091766357421875,0.0032520294189453125,-0.004924774169921875,-0.041656494140625,0.01227569580078125,0.011077880859375,-0.040740966796875,0.002017974853515625,-0.0193023681640625,0.014739990234375,-0.0018491744995117188,0.008636474609375,0.017791748046875,-0.0012598037719726562,-0.004123687744140625,-0.006511688232421875,-0.0179443359375,-0.03619384765625,-0.0009822845458984375,0.0066680908203125,-0.0012950897216796875,0.0031185150146484375,-0.05401611328125,0.0266876220703125,-0.035308837890625,-0.0234375,0.0234222412109375,-0.037384033203125,0.002349853515625,0.01290130615234375,-0.0321044921875,0.019622802734375,-0.052337646484375,-0.00556182861328125,0.005496978759765625,0.0078125,0.010101318359375,-0.0055084228515625,0.021087646484375,0.016754150390625,0.0192413330078125,-0.024261474609375,0.0457763671875,-0.0185394287109375,0.0007729530334472656,0.0173187255859375,0.0224456787109375,0.0283355712890625,0.00576019287109375,0.04150390625,-0.005279541015625,0.01000213623046875,0.01496124267578125,0.003604888916015625,-0.033447265625,0.013824462890625,-0.0014410018920898438,-0.0225067138671875,-0.0017547607421875,0.0235443115234375,0.0171966552734375,0.0234375,-0.00482177734375,-0.0062103271484375,0.01885986328125,-0.003917694091796875,0.0172119140625,0.0240478515625,-0.006069183349609375,-0.0166015625,-0.00955963134765625,-0.01861572265625,0.0198822021484375,-0.046875,-0.0011920928955078125,-0.00972747802734375,0.01349639892578125,-0.00629425048828125,-0.0087738037109375,0.01393890380859375,0.0006022453308105469,-0.007038116455078125,-0.017181396484375,-0.00965118408203125,0.0133514404296875,-0.0025787353515625,0.017547607421875,-0.0276641845703125,0.018890380859375,0.01517486572265625,-0.0311737060546875,-0.016815185546875,0.00264739990234375,-0.0214080810546875,0.0181884765625,-0.01145172119140625,-0.0011072158813476562,0.02880859375,0.00782012939453125,-0.0238037109375,0.039031982421875,-0.00690460205078125,0.0018301010131835938,0.0305023193359375,0.005344390869140625,-0.003803253173828125,-0.033782958984375,0.01241302490234375,0.0206146240234375,0.00766754150390625,0.0177459716796875,-0.002201080322265625,-0.01444244384765625,0.031402587890625,-0.04498291015625,-0.02203369140625,-0.017486572265625,0.031341552734375,0.032562255859375,-0.031951904296875,0.0182037353515625,-0.01207733154296875,0.0235748291015625,0.0391845703125,0.00971221923828125,0.029388427734375,-0.038360595703125,0.025726318359375,-0.0040435791015625,0.020233154296875,0.0009427070617675781,0.0347900390625,-0.0226287841796875,0.01318359375,0.01505279541015625,0.01042938232421875,-0.011749267578125,-0.022705078125,-0.006938934326171875,0.008087158203125,-0.00205230712890625,-0.018463134765625,0.02960205078125,-0.0309600830078125,-0.024749755859375,0.004817962646484375,-0.01258087158203125,0.00850677490234375,-0.00560760498046875,-0.021881103515625,-0.004638671875,0.0244903564453125,-0.020416259765625,0.02655029296875,-0.0226287841796875,0.030029296875,0.024139404296875,0.03497314453125,0.0161285400390625,0.0206756591796875,-0.040924072265625,0.01042938232421875,0.048126220703125,0.006565093994140625,-0.00260162353515625,0.037139892578125,0.0006361007690429688,-0.01007843017578125,0.0282745361328125,-0.013702392578125,0.044525146484375,-0.006237030029296875,0.034637451171875,0.0285186767578125,0.0124053955078125,-0.034423828125,0.0007100105285644531,-0.045501708984375,-0.0219268798828125,-0.00836181640625,-0.03704833984375,-0.07000732421875,0.006748199462890625,-0.0036602020263671875,0.00751495361328125,-0.0162353515625,-0.0137176513671875,0.0227203369140625,0.001644134521484375,-0.028656005859375,-0.00397491455078125,-0.0088043212890625,-0.0007772445678710938,0.035797119140625,0.0389404296875,0.0380859375,-0.005031585693359375,0.0059967041015625,-0.016815185546875,-0.0027980804443359375,0.0127410888671875,0.03399658203125,-0.0003867149353027344,0.00679779052734375,-0.0079193115234375,-0.02294921875,0.023101806640625,0.0009560585021972656,0.042694091796875,-0.031768798828125,-0.00247955322265625,0.0197296142578125,0.0196075439453125,-0.0229339599609375,-0.0250396728515625,-0.0006723403930664062,0.011871337890625,0.0308990478515625,0.002803802490234375,0.003803253173828125,-0.0112762451171875,0.0016689300537109375,-0.040985107421875,0.0175933837890625,0.029083251953125,-0.00962066650390625,-0.0384521484375,-0.006683349609375,0.00439453125,0.0269012451171875,0.02252197265625,-0.027587890625,0.003749847412109375,-0.004119873046875,-0.015228271484375,-0.031036376953125,-0.0042724609375,-0.043853759765625,-0.0016918182373046875,-0.015411376953125,0.03643798828125,-0.03814697265625,0.020599365234375,-0.007030487060546875,-0.02532958984375,-0.0216522216796875,0.0016412734985351562,0.00982666015625,0.0205230712890625,0.02484130859375,0.0078887939453125,-0.0261077880859375,0.0247039794921875,-0.01251983642578125,0.0090789794921875,0.013092041015625,0.0082550048828125,0.006603240966796875,-0.00423431396484375,0.01424407958984375,0.01349639892578125,-0.02264404296875,0.0236358642578125,-0.001506805419921875,0.007030487060546875,-0.01727294921875,-0.0249481201171875,-0.00611114501953125,0.0177459716796875,-0.0077056884765625,0.023773193359375,0.01357269287109375,0.012237548828125,0.0338134765625,-0.029022216796875,0.02880859375,-0.0018472671508789062,-0.024139404296875,-0.032989501953125,0.055084228515625,0.02984619140625,0.040618896484375,0.0006160736083984375,0.03814697265625,0.022552490234375,-0.01071929931640625,0.0250091552734375,0.033782958984375,0.00806427001953125,-0.005443572998046875,-0.00899505615234375,-0.00969696044921875,0.01045989990234375,0.037384033203125,0.01308441162109375,-0.01435089111328125,-0.0032367706298828125,0.0186004638671875,-0.0330810546875,-0.014617919921875,0.01088714599609375,-0.00847625732421875,0.02984619140625,-0.0283355712890625,0.023162841796875,0.019134521484375,-0.01218414306640625,-0.033966064453125,-0.028839111328125,-0.022552490234375,-0.02001953125,0.005214691162109375,-0.01418304443359375,0.0035915374755859375,-0.011993408203125,0.0076751708984375,-0.0098876953125,-0.002002716064453125,-0.0008831024169921875,-0.01294708251953125,-0.05120849609375,0.0008082389831542969,0.0205535888671875,-0.0017843246459960938,0.006366729736328125,0.0137939453125,0.060699462890625,-0.0177459716796875,-0.005641937255859375,0.0170440673828125,0.0026397705078125,0.009857177734375,-0.024658203125,0.006175994873046875,0.04205322265625,0.0253143310546875,0.00972747802734375,0.0031375885009765625,-0.022064208984375,0.0006480216979980469,-0.004180908203125,-0.00794219970703125,-0.015106201171875,-0.00901031494140625,-0.00812530517578125,-0.01406097412109375,-0.0247039794921875,-0.0221405029296875,0.025543212890625,0.037353515625,-0.01702880859375,-0.0021762847900390625,0.0237274169921875,0.016632080078125,-0.0335693359375,0.002178192138671875,-0.022705078125,-0.011810302734375,0.01666259765625,0.0287628173828125,-0.02313232421875,-0.011199951171875,0.026702880859375,-0.0195770263671875,0.0278778076171875,0.0106658935546875,-0.0199432373046875,-0.035919189453125,0.028656005859375,0.0009784698486328125,-0.004291534423828125,-0.0309906005859375,0.03277587890625,0.011260986328125,0.0112457275390625,-0.034698486328125,-0.01111602783203125,0.0309906005859375,0.042236328125<span class=o>]</span>,<span class=s2>&#34;object&#34;</span>:<span class=s2>&#34;embedding&#34;</span><span class=o>}]</span>,<span class=s2>&#34;model&#34;</span>:<span class=s2>&#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;</span>,<span class=s2>&#34;usage&#34;</span>:<span class=o>{</span><span class=s2>&#34;prompt_tokens&#34;</span>:10,<span class=s2>&#34;total_tokens&#34;</span>:10<span class=o>}}</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-the-prometheus-receiver>Configure the Prometheus Receiver</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Now that our LLM is up and running, we&rsquo;ll add the Prometheus receiver to our
OpenTelemetry collector to gather metrics from it.</p><h2 id=capture-the-nvidia-dcgm-exporter-metrics>Capture the NVIDIA DCGM Exporter metrics</h2><p>The NVIDIA DCGM exporter is running in our OpenShift cluster. It
exposes GPU metrics that we can send to Splunk.</p><p>To do this, let&rsquo;s customize the configuration of the collector by editing the
<code>otel-collector-values.yaml</code> file that we used earlier when deploying the collector.</p><p>Add the following content, just below the <code>kubeletstats</code> section:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator/nvidia</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Name of the extensions to watch for endpoints to start and stop.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>k8s_observer ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/dcgm</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>gpu-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:9400&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;nvidia-dcgm-exporter&#34;</span></span></span></code></pre></div><p>This tells the collector to look for pods with a label of <code>app=nvidia-dcgm-exporter</code>.
And when it finds a pod with this label, scrape the <code>/v1/metrics</code> endpoint using port 9400.</p><p>To ensure the receiver is used, we&rsquo;ll need to add a new pipeline to the <code>otel-collector-values.yaml</code> file
as well.</p><p>Add the following code to the bottom of the file:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics/nvidia-metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>receiver_creator/nvidia</span></span></span></code></pre></div><p>Before applying the changes, let&rsquo;s add one more Prometheus receiver in the next section.</p><h2 id=capture-the-nvidia-nim-metrics>Capture the NVIDIA NIM metrics</h2><p>The <code>meta-llama-3-2-1b-instruct</code> LLM that we just deployed with NVIDIA NIM also
includes a Prometheus endpoint that we can scrape with the collector. Let&rsquo;s add the
following to the <code>otel-collector-values.yaml</code> file, just below the receiver we added earlier:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/nim-llm</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>nim-for-llm-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/v1/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:8000&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;meta-llama-3-2-1b-instruct&#34;</span></span></span></code></pre></div><p>This tells the collector to look for pods with a label of <code>app=meta-llama-3-2-1b-instruct</code>.
And when it finds a pod with this label, scrape the <code>/v1/metrics</code> endpoint using port 8000.</p><p>There&rsquo;s no need to make changes to the pipeline, as this receiver will already be picked up
as part of the <code>receiver_creator/nvidia</code> receiver.</p><h2 id=add-a-filter-processor>Add a Filter Processor</h2><p>Prometheus endpoints can expose a large number of metrics, sometimes with high cardinality.</p><p>Let&rsquo;s add a filter processor that defines exactly what metrics we want to send to Splunk.
Specifically, we&rsquo;ll send only the metrics that are utilized by a dashboard chart or an
alert detector.</p><p>Add the following code to the <code>otel-collector-values.yaml</code> file, after the exporters section
but before the receivers section:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/metrics_to_be_included</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Include only metrics used in charts and detectors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_FREE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_USED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_GPU_TEMP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_GPU_UTIL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEM_CLOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEM_COPY_UTIL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEMORY_TEMP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_POWER_USAGE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_SM_CLOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_DRAM_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_GR_ENGINE_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PCIE_RX_BYTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PCIE_TX_BYTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PIPE_TENSOR_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>generation_tokens_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_alloc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_alloc_bytes_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_buck_hash_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_frees_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_gc_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_alloc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_idle_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_objects</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_released_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_last_gc_time_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_lookups_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mallocs_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mcache_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mcache_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mspan_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mspan_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_next_gc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_other_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_stack_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_stack_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_sched_gomaxprocs_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>gpu_cache_usage_perc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>gpu_total_energy_consumption_joules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>http.server.active_requests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_request_max</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_requests_running</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_requests_waiting</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_cpu_seconds_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_max_fds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_open_fds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_resident_memory_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_start_time_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_virtual_memory_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_virtual_memory_max_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>promhttp_metric_handler_requests_in_flight</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>promhttp_metric_handler_requests_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>prompt_tokens_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_collections_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_objects_collected_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_objects_uncollectable_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_finish_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_success_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>system.cpu.time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>e2e_request_latency_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>time_to_first_token_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>time_per_output_token_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_prompt_tokens</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_generation_tokens</span></span></span></code></pre></div><p>Ensure this processor is included in the pipeline we added earlier to the
bottom of the file:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    service:
</span></span><span class=line><span class=cl>      pipelines:
</span></span><span class=line><span class=cl>        metrics/nvidia-metrics:
</span></span><span class=line><span class=cl>          exporters:
</span></span><span class=line><span class=cl>            - signalfx
</span></span><span class=line><span class=cl>          processors:
</span></span><span class=line><span class=cl>            - memory_limiter
</span></span><span class=line><span class=cl>            - filter/metrics_to_be_included
</span></span><span class=line><span class=cl>            - batch
</span></span><span class=line><span class=cl>            - resourcedetection
</span></span><span class=line><span class=cl>            - resource
</span></span><span class=line><span class=cl>          receivers:
</span></span><span class=line><span class=cl>            - receiver_creator/nvidia</span></span></code></pre></div><h2 id=verify-changes>Verify Changes</h2><p>Before applying the configuration changes to the collector, take a moment to compare the
contents of your modified <code>otel-collector-values.yaml</code> file with the <code>otel-collector-values-with-nvidia.yaml</code> file.
Update your file as needed to ensure the contents match. Remember that indentation is important
for <code>yaml</code> files, and needs to be precise.</p><h2 id=update-the-opentelemetry-collector-config>Update the OpenTelemetry Collector Config</h2><p>Now we can update the OpenTelemetry collector configuration by running the
following Helm command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$SPLUNK_ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$SPLUNK_REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$SPLUNK_HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$SPLUNK_HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./otel-collector/otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n otel <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><h2 id=confirm-metrics-are-sent-to-splunk>Confirm Metrics are Sent to Splunk</h2><p>Navigate to the <a href="https://app.us1.signalfx.com/#/dashboard/GvmWJyPA4Ak?startTime=-15m&endTime=Now&variables%5B%5D=K8s%20cluster%3Dk8s.cluster.name:%5B%22rosa-test%22%5D&groupId=GvmVcarA4AA&configId=GuzVkWWA4BE" rel=external target=_blank>Cisco AI Pod</a>
dashboard in Splunk Observability Cloud. Ensure it&rsquo;s filtered on your OpenShift cluster name, and that
the charts are populated as in the following example:</p><p><a href=#R-image-ee5b31377160589b9ae0a7ef940d225d class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../images/Cisco-AI-Pod-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ee5b31377160589b9ae0a7ef940d225d><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../images/Cisco-AI-Pod-dashboard.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-vector-database>Deploy the Vector Database</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this step, we&rsquo;ll deploy a vector database to the OpenShift cluster and populate it with
test data.</p><h2 id=what-is-a-vector-database>What is a Vector Database?</h2><p>A <strong>vector database</strong> stores and indexes data as numerical &ldquo;vector embeddings,&rdquo; which capture
the <strong>semantic meaning</strong> of information like text or images. Unlike traditional databases,
they excel at <strong>similarity searches</strong>, finding conceptually related data points rather
than exact matches.</p><h2 id=how-is-a-vector-database-used>How is a Vector Database Used?</h2><p>Vector databases play a key role in a pattern called
<strong>Retrieval Augmented Generation (RAG)</strong>, which is widely used by
applications that leverage Large Language Models (LLMs).</p><p>The pattern is as follows:</p><ul><li>The end-user asks a question to the application</li><li>The application takes the question and calculates a vector embedding for it</li><li>The app then performs a similarity search, looking for related documents in the vector database</li><li>The app then takes the original question and the related documents, and sends it to the LLM as context</li><li>The LLM reviews the context and returns a response to the application</li></ul><h2 id=deploy-a-vector-database>Deploy a Vector Database</h2><p>For the workshop, we&rsquo;ll deploy an open-source vector database named
<a href=https://weaviate.io/ rel=external target=_blank>Weaviate</a>.</p><p>First, add the Weaviate helm repo that contains the Weaviate helm chart:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add weaviate https://weaviate.github.io/weaviate-helm
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><p>The <code>weaviate/weaviate-values.yaml</code> file includes the configuration we&rsquo;ll use to deploy
the Weviate vector database.</p><p>We&rsquo;ve set the following environment variables to <code>TRUE</code>, to ensure Weaviate exposes
metrics that we can scrape later with the Prometheus receiver:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>  PROMETHEUS_MONITORING_ENABLED: true
  PROMETHEUS_MONITORING_GROUP: true</code></pre></div><p>Review <a href=https://docs.weaviate.io/deploy/installation-guides/k8s-installation rel=external target=_blank>Weaviate documentation</a>
to explore additional customization options available.</p><p>Let&rsquo;s create a new namespace:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace weaviate</span></span></code></pre></div><p>Run the following command to allow Weaviate to run a privileged container:</p><blockquote><p>Note: this approach is not recommended for production environments</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc adm policy add-scc-to-user privileged -z default -n weaviate</span></span></code></pre></div><p>Then deploy Weaviate:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade --install <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;weaviate&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  weaviate/weaviate <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace <span class=s2>&#34;weaviate&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --values ./weaviate/weaviate-values.yaml</span></span></code></pre></div><h2 id=capture-weaviate-metrics-with-prometheus>Capture Weaviate Metrics with Prometheus</h2><p>Now that Weaviate is installed in our OpenShift cluster, let&rsquo;s modify the
OpenTelemetry collector configuration to scrape Weaviate&rsquo;s Prometheus
metrics.</p><p>To do so, let&rsquo;s add an additional Prometheus receiver creator section
to the <code>otel-collector-values.yaml</code> file:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Name of the extensions to watch for endpoints to start and stop.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>k8s_observer ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>weaviate-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:2112&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;weaviate&#34;</span></span></span></code></pre></div><p>We&rsquo;ll need to ensure that Weaviate&rsquo;s metrics are added to the <code>filter/metrics_to_be_included</code> filter
processor configuration as well:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/metrics_to_be_included</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Include only metrics used in charts and detectors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_FREE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>object_count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstones</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstone_cleanup_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstone_cleanup_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>requests_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>objects_durations_ms_sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>objects_durations_ms_count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>batch_delete_durations_ms_sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>batch_delete_durations_ms_count</span></span></span></code></pre></div><p>We also want to add a Resource processor to the configuration file, with the following configuration:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>resource/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>weaviate.instance.id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>from_attribute</span><span class=p>:</span><span class=w> </span><span class=l>service.instance.id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span></span></span></code></pre></div><p>This processor takes the <code>service.instance.id</code> property on the Weaviate metrics
and copies it into a new property called <code>weaviate.instance.id</code>. This is done so
that we can more easily distinguish Weaviate metrics from other metrics that use
<code>service.instance.id</code>, which is a standard OpenTelemetry property used in
Splunk Observability Cloud.</p><p>We&rsquo;ll need to add a new metrics pipeline for Weaviate metrics as well (we
need to use a separate pipeline since we don&rsquo;t want the <code>weaviate.instance.id</code>
metric to be added to non-Weaviate metrics):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>filter/metrics_to_be_included</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource/weaviate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>receiver_creator/weaviate</span></span></span></code></pre></div><p>Before applying the configuration changes to the collector, take a moment to compare the
contents of your modified <code>otel-collector-values.yaml</code> file with the
<code>otel-collector-values-with-weaviate.yaml</code> file.
Update your file as needed to ensure the contents match. Remember that indentation is important
for <code>yaml</code> files, and needs to be precise.</p><p>Now we can update the OpenTelemetry collector configuration by running the
following Helm command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$SPLUNK_ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$SPLUNK_REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$SPLUNK_HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$SPLUNK_HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./otel-collector/otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n otel <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><p>In Splunk Observability Cloud, navigate to <code>Infrastructure</code> -> <code>AI Frameworks</code> -> <code>Weaviate</code>.
Filter on the <code>k8s.cluster.name</code> of interest, and ensure the navigator is populated as in the
following example:</p><p><a href=#R-image-9b0b370ee22fdb3398401a5a5843f0a5 class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../images/WeaviateNavigator.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9b0b370ee22fdb3398401a5a5843f0a5><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../images/WeaviateNavigator.png></a></p><h2 id=populate-the-vector-database>Populate the Vector Database</h2><p>Now that Weaviate is up and running, and we&rsquo;re capturing metrics from it,
let&rsquo;s add some data to it that we&rsquo;ll use in the next part
of the workshop with a custom application.</p><p>The application used to do this is based on
<a href=https://docs.nvidia.com/nim/nemo-retriever/text-embedding/latest/playbook.html#generate-embeddings-with-text-embedding-nim rel=external target=_blank>LangChain Playbook for NeMo Retriever Text Embedding NIM</a>.</p><p>Per the configuration in <code>./load-embeddings/k8s-job.yaml</code>, we&rsquo;re going to load
a <a href=https://nvdam.widen.net/content/udc6mzrk7a/original/hpc-datasheet-sc23-h200-datasheet-3002446.pdf rel=external target=_blank>datasheet for the NVIDIA H200 Tensor Core GPU</a>
into our vector database.</p><p>This document includes information about NVIDIA&rsquo;s H200 GPUs that our large language model
isn&rsquo;t trained on. And in the next part of the workshop, we&rsquo;ll build an application that
uses an LLM to answer questions using the context from this document, which will be loaded
into the vector database.</p><p>We&rsquo;ll deploy a Kubernetes Job to our OpenShift cluster to load the embeddings.
A Kubernetes Job is used rather than a Pod to ensure that this process runs only once:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace llm-app
</span></span><span class=line><span class=cl>oc apply -f ./load-embeddings/k8s-job.yaml</span></span></code></pre></div><blockquote><p>Note: to build a Docker image for the Python application that loads the embeddings
into Weaviate, we executed the following commands:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/cisco-ai-pods/load-embeddings
</span></span><span class=line><span class=cl>docker build --platform linux/amd64 -t derekmitchell399/load-embeddings:1.0 .
</span></span><span class=line><span class=cl>docker push derekmitchell399/load-embeddings:1.0</span></span></code></pre></div></blockquote><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-llm-application>Deploy the LLM Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In the final step of the workshop, we&rsquo;ll deploy an application to our OpenShift cluster
that uses the instruct and embeddings models that we deployed earlier using the
NVIDIA NIM operator.</p><h2 id=application-overview>Application Overview</h2><p>Like most applications that interact with LLMs, our application is written in Python.
It also uses <a href=https://www.langchain.com/ rel=external target=_blank>LangChain</a>, which is an open-source orchestration
framework that simplifies the development of applications powered by LLMs.</p><p>Our application starts by connecting to two LLMs that we&rsquo;ll be using:</p><ul><li><code>meta/llama-3.2-1b-instruct</code>: used for responding to user prompts</li><li><code>nvidia/llama-3.2-nv-embedqa-1b-v2</code>: used to calculate embeddings</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># connect to a LLM NIM at the specified endpoint, specifying a specific model</span>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatNVIDIA</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=n>INSTRUCT_MODEL_URL</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;meta/llama-3.2-1b-instruct&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Initialize and connect to a NeMo Retriever Text Embedding NIM (nvidia/llama-3.2-nv-embedqa-1b-v2)</span>
</span></span><span class=line><span class=cl><span class=n>embeddings_model</span> <span class=o>=</span> <span class=n>NVIDIAEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                   <span class=n>base_url</span><span class=o>=</span><span class=n>EMBEDDINGS_MODEL_URL</span><span class=p>)</span></span></span></code></pre></div><p>The URL&rsquo;s used for both LLMs are defined in the <code>k8s-manifest.yaml</code> file:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>INSTRUCT_MODEL_URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://meta-llama-3-2-1b-instruct.nim-service:8000/v1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>EMBEDDINGS_MODEL_URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://llama-32-nv-embedqa-1b-v2.nim-service:8000/v1&#34;</span></span></span></code></pre></div><p>The application then defines a prompt template that will be used in interactions
with the LLM:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_messages</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;You are a helpful and friendly AI!&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Your responses should be concise and no longer than two sentences.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Do not hallucinate. Say you don&#39;t know if you don&#39;t have this information.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Answer the question using only the context&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>Question: </span><span class=si>{question}</span><span class=se>\n\n</span><span class=s2>Context: </span><span class=si>{context}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>{question}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>])</span></span></span></code></pre></div><blockquote><p>Note how we&rsquo;re explicitly instructing the LLM to just say it doesn&rsquo;t know the answer if
it doesn&rsquo;t know, which helps minimize hallucinations. There&rsquo;s also a placeholder for
us to provide context that the LLM can use to answer the question.</p></blockquote><p>The application uses Flask, and defines a single endpoint named <code>/askquestion</code> to
respond to questions from end users. To implement this endpoint, the application
connects to the Weaviate vector database, and then invokes a chain (using LangChain)
that takes the user&rsquo;s question, converts it to an embedding, and then looks up similar
documents in the vector database. It then sends the user&rsquo;s question to the LLM, along
with the related documents, and returns the LLM&rsquo;s response.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>   <span class=c1># connect with the vector store that was populated earlier</span>
</span></span><span class=line><span class=cl>    <span class=n>vector_store</span> <span class=o>=</span> <span class=n>WeaviateVectorStore</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>=</span><span class=n>weaviate_client</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>embedding</span><span class=o>=</span><span class=n>embeddings_model</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>index_name</span><span class=o>=</span><span class=s2>&#34;CustomDocs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>text_key</span><span class=o>=</span><span class=s2>&#34;page_content&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>chain</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;context&#34;</span><span class=p>:</span> <span class=n>vector_store</span><span class=o>.</span><span class=n>as_retriever</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;question&#34;</span><span class=p>:</span> <span class=n>RunnablePassthrough</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>prompt</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>llm</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>StrOutputParser</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>chain</span><span class=o>.</span><span class=n>invoke</span><span class=p>(</span><span class=n>question</span><span class=p>)</span></span></span></code></pre></div><h2 id=instrument-the-application-with-opentelemetry>Instrument the Application with OpenTelemetry</h2><p>To capture metrics, traces, and logs from our application, we&rsquo;ve instrumented it with OpenTelemetry.
This required adding the following package to the <code>requirements.txt</code> file (which ultimately gets
installed with <code>pip install</code>):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>splunk-opentelemetry==2.7.0</code></pre></div><p>We also added the following to the <code>Dockerfile</code> used to build the
container image for this application, to install additional OpenTelemetry
instrumentation packages:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># Add additional OpenTelemetry instrumentation packages</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> opentelemetry-bootstrap --action<span class=o>=</span>install</span></span></code></pre></div><p>Then we modified the <code>ENTRYPOINT</code> in the <code>Dockerfile</code> to call <code>opentelemetry-instrument</code>
when running the application:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;opentelemetry-instrument&#34;</span><span class=p>,</span> <span class=s2>&#34;flask&#34;</span><span class=p>,</span> <span class=s2>&#34;run&#34;</span><span class=p>,</span> <span class=s2>&#34;-p&#34;</span><span class=p>,</span> <span class=s2>&#34;8080&#34;</span><span class=p>,</span> <span class=s2>&#34;--host&#34;</span><span class=p>,</span> <span class=s2>&#34;0.0.0.0&#34;</span><span class=p>]</span></span></span></code></pre></div><p>Finally, to enhance the traces and metrics collected with OpenTelemetry, we added a
package named <a href=https://openlit.io/ rel=external target=_blank>OpenLIT</a> to the <code>requirements.txt</code> file:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>openlit==1.35.4</code></pre></div><p>OpenLIT supports LangChain, and adds additional context to traces at instrumentation time,
such as the number of tokens used to process the request, and what the prompt and
response were.</p><p>To initialize OpenLIT, we added the following to the application code:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>openlit</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>openlit</span><span class=o>.</span><span class=n>init</span><span class=p>(</span><span class=n>environment</span><span class=o>=</span><span class=s2>&#34;llm-app&#34;</span><span class=p>)</span></span></span></code></pre></div><h2 id=deploy-the-llm-application>Deploy the LLM Application</h2><p>Use the following command to deploy this application to the OpenShift cluster:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -f ./llm-app/k8s-manifest.yaml</span></span></code></pre></div><blockquote><p>Note: to build a Docker image for this Python application, we executed the following commands:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/cisco-ai-pods/llm-app
</span></span><span class=line><span class=cl>docker build --platform linux/amd64 -t derekmitchell399/llm-app:1.0 .
</span></span><span class=line><span class=cl>docker push derekmitchell399/llm-app:1.0</span></span></code></pre></div></blockquote><h2 id=test-the-llm-application>Test the LLM Application</h2><p>Let&rsquo;s ensure the application is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a question to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-b88c9e3605f1f3da2f294b42d29af465><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b88c9e3605f1f3da2f294b42d29af465","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b88c9e3605f1f3da2f294b42d29af465","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X <span class=s2>&#34;POST&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> <span class=s1>&#39;http://llm-app.llm-app.svc.cluster.local:8080/askquestion&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;question&#34;: &#34;How much memory does the NVIDIA H200 have?&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div></div></div><div data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>The NVIDIA H200 has 141GB of HBM3e memory, which is twice the capacity of the NVIDIA H100 Tensor Core GPU with 1.4X more memory bandwidth.</span></span></code></pre></div></div></div></div></div><h2 id=view-trace-data-in-splunk-observability-cloud>View Trace Data in Splunk Observability Cloud</h2><p>In Splunk Observability Cloud, navigate to <code>APM</code> and then select <code>Service Map</code>.
Ensure the <code>llm-app</code> environment is selected. You should see a service map
that looks like the following:</p><p><a href=#R-image-d668a52e16781dc23498801d9fa7413a class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/ServiceMap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d668a52e16781dc23498801d9fa7413a><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/ServiceMap.png></a></p><p>Click on <code>Traces</code> on the right-hand side menu. Then select one of the slower running
traces. It should look like the following example:</p><p><a href=#R-image-4690cdc9d6924768c5185121684ab177 class=lightbox-link><img alt=Trace class="lazy lightbox figure-image" loading=lazy src=../images/Trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4690cdc9d6924768c5185121684ab177><img alt=Trace class="lazy lightbox lightbox-image" loading=lazy src=../images/Trace.png></a></p><p>The trace shows all the interactions that our application executed to return an answer
to the users question (i.e. &ldquo;How much memory does the NVIDIA H200 have?&rdquo;)</p><p>For example, we can see where our application performed a similarity search to look
for documents related to the question at hand in the Weaviate vector database:</p><p><a href=#R-image-2ceb80cee57933a0384a815290b3e461 class=lightbox-link><img alt="Document Retrieval" class="lazy lightbox figure-image" loading=lazy src=../images/DocumentRetrieval.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2ceb80cee57933a0384a815290b3e461><img alt="Document Retrieval" class="lazy lightbox lightbox-image" loading=lazy src=../images/DocumentRetrieval.png></a></p><p>We can also see how the application created a prompt to send to the LLM, including the
context that was retrieved from the vector database:</p><p><a href=#R-image-0ba9a407c8c516e521dd9861293b220e class=lightbox-link><img alt="Prompt Template" class="lazy lightbox figure-image" loading=lazy src=../images/PromptTemplate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ba9a407c8c516e521dd9861293b220e><img alt="Prompt Template" class="lazy lightbox lightbox-image" loading=lazy src=../images/PromptTemplate.png></a></p><p>Finally, we can see the response from the LLM, the time it took, and the number of
input and output tokens utilized:</p><p><a href=#R-image-66ff14befc2d2cc86908a9e59e420566 class=lightbox-link><img alt="LLM Response" class="lazy lightbox figure-image" loading=lazy src=../images/LLMResponse.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-66ff14befc2d2cc86908a9e59e420566><img alt="LLM Response" class="lazy lightbox lightbox-image" loading=lazy src=../images/LLMResponse.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=wrap-up>Wrap-Up</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=wrap-up>Wrap-Up</h2><p>We hope you enjoyed this workshop, which provided hands-on experience deploying and working
with several of the technologies that are used to monitor Cisco AI PODs with
Splunk Observability Cloud. Specifically, you had the opportunity to:</p><ul><li>Deploy a RedHat OpenShift cluster with GPU-based worker nodes.</li><li>Deploy the NVIDIA NIM Operator and NVIDIA GPU Operator.</li><li>Deploy Large Language Models (LLMs) using NVIDIA NIM to the cluster.</li><li>Deploy the OpenTelemetry Collector in the Red Hat OpenShift cluster.</li><li>Add Prometheus receivers to the collector to ingest infrastructure metrics.</li><li>Deploy the Weaviate vector database to the cluster.</li><li>Instrument Python services that interact with Large Language Models (LLMs) with OpenTelemetry.</li><li>Understand which details which OpenTelemetry captures in the trace from applications that interact with LLMs.</li></ul><h2 id=clean-up-steps>Clean Up Steps</h2><p>Follow the steps in this section to uninstall the OpenShift cluster.</p><p>Get the cluster ID, the Amazon Resource Names (ARNs) for the cluster-specific Operator roles,
and the endpoint URL for the OIDC provider by running the following command:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa describe cluster --cluster<span class=o>=</span><span class=nv>$CLUSTER_NAME</span></span></span></code></pre></div><p>Delete the cluster using the following command</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete cluster --cluster<span class=o>=</span><span class=nv>$CLUSTER_NAME</span> --watch</span></span></code></pre></div><p>Delete the cluster-specific Operator IAM roles:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete operator-roles --prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span></span></span></code></pre></div><p>Delete the OIDC provider:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete oidc-provider --oidc-config-id <span class=nv>$OIDC_ID</span></span></span></code></pre></div><p>Refer to <a href=https://docs.redhat.com/en/documentation/red_hat_openshift_service_on_aws/4/html/install_clusters/rosa-hcp-deleting-cluster rel=external target=_blank>OpenShift documentation</a>
if you&rsquo;d like to completely remove the Red Hat OpenShift Service from your AWS account.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 3, 2025</span></span></footer></article></section></div></main></div><script src=/observability-workshop/v6.12/js/clipboard/clipboard.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/perfect-scrollbar/perfect-scrollbar.min.js?1761175652 defer></script><script src=/observability-workshop/v6.12/js/theme.min.js?1761175652 defer></script></body></html>