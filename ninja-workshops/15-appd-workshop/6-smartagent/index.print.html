<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.2.0+9cac649a184a2967957ef9bbececf9402192846c"><meta name=description content="Learn multiple approaches to deploy and manage AppDynamics Smart Agent at scale across your infrastructure."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="SmartAgent Deployment :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Learn multiple approaches to deploy and manage AppDynamics Smart Agent at scale across your infrastructure."><meta property="og:url" content="https://splunk.github.io/observability-workshop/ninja-workshops/15-appd-workshop/6-smartagent/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="SmartAgent Deployment :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Learn multiple approaches to deploy and manage AppDynamics Smart Agent at scale across your infrastructure."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="SmartAgent Deployment :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Learn multiple approaches to deploy and manage AppDynamics Smart Agent at scale across your infrastructure."><meta itemprop=dateModified content="2025-11-25T17:59:38-05:00"><meta itemprop=wordCount content="583"><title>SmartAgent Deployment :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/ninja-workshops/15-appd-workshop/6-smartagent/index.html rel=canonical type=text/html title="SmartAgent Deployment :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1769686352 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1769686352 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1769686352 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1769686352 defer></script><script src=/observability-workshop/js/search.min.js?1769686352 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1769686352"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1769686352 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1769686352 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1769686352 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1769686352 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769686352 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769686352 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1769686352 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1769686352 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1769686352 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/15-appd-workshop/6-smartagent/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/ninja-workshops/15-appd-workshop/6-smartagent/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-is-smart-agent>What is Smart Agent?</a></li><li><a href=#deployment-approaches>Deployment Approaches</a><ul><li><a href=#1-remote-installation-smartagentctl>1. Remote Installation (smartagentctl)</a></li><li><a href=#2-jenkins-automation>2. Jenkins Automation</a></li><li><a href=#3-github-actions-automation>3. GitHub Actions Automation</a></li><li><a href=#4-ansible-automation>4. Ansible Automation</a></li></ul></li><li><a href=#choosing-the-right-approach>Choosing the Right Approach</a></li><li><a href=#common-features-across-all-approaches>Common Features Across All Approaches</a></li><li><a href=#workshop-structure>Workshop Structure</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#next-steps>Next Steps</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ninja-workshops/15-appd-workshop/index.html><span itemprop=name>Splunk4Ninjas AppDynamics</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>SmartAgent Deployment</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ninja-workshops/15-appd-workshop/6-smartagent/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.html title="Monitor and Troubleshoot - Part 2 (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ninja-workshops/15-appd-workshop/6-smartagent/1-remote-installation/index.html title="Remote Installation (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=smartagent-deployment>SmartAgent Deployment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction</h2><p>AppDynamics <strong>Smart Agent</strong> is a lightweight, intelligent agent that provides comprehensive monitoring capabilities for your infrastructure. This section covers four different deployment approaches, allowing you to choose the method that best fits your organization&rsquo;s needs and existing tooling.</p><p><a href=#R-image-6603629f2da03f126fe59d8e0ec8c8d1 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6603629f2da03f126fe59d8e0ec8c8d1><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-is-smart-agent>What is Smart Agent?</h2><p>Smart Agent is AppDynamics&rsquo; next-generation monitoring agent that provides:</p><ul><li><strong>Unified Monitoring</strong>: Single agent for infrastructure, applications, and services</li><li><strong>Lightweight Design</strong>: Minimal resource footprint</li><li><strong>Auto-Discovery</strong>: Automatically discovers and monitors applications</li><li><strong>Native Instrumentation</strong>: Deep visibility into application performance</li><li><strong>Flexible Deployment</strong>: Multiple installation and management options</li></ul><h2 id=deployment-approaches>Deployment Approaches</h2><p>This section covers four distinct approaches to deploying Smart Agent at scale:</p><h3 id=1-remote-installation-smartagentctl>1. Remote Installation (smartagentctl)</h3><p>The most direct approach using the <code>smartagentctl</code> CLI tool to deploy via SSH.</p><p><strong>Best for:</strong></p><ul><li>Quick deployments to a moderate number of hosts</li><li>Environments without existing CI/CD infrastructure</li><li>Testing and proof-of-concept scenarios</li><li>Direct control over deployment process</li></ul><p><strong>Key Features:</strong></p><ul><li>Direct SSH-based deployment</li><li>Simple YAML configuration</li><li>No additional tooling required</li><li>Concurrent execution support</li></ul><h3 id=2-jenkins-automation>2. Jenkins Automation</h3><p>Enterprise-grade deployment using Jenkins pipelines for complete lifecycle management.</p><p><strong>Best for:</strong></p><ul><li>Organizations already using Jenkins</li><li>Complex deployment workflows</li><li>Environments requiring approval gates</li><li>Integration with existing CI/CD pipelines</li></ul><p><strong>Key Features:</strong></p><ul><li>Parameterized pipelines</li><li>Batch processing for thousands of hosts</li><li>Complete lifecycle management</li><li>Centralized logging and reporting</li></ul><h3 id=3-github-actions-automation>3. GitHub Actions Automation</h3><p>Modern CI/CD approach using GitHub Actions workflows with self-hosted runners.</p><p><strong>Best for:</strong></p><ul><li>Teams using GitHub for version control</li><li>Cloud-native environments</li><li>GitOps workflows</li><li>Distributed teams preferring web-based management</li></ul><p><strong>Key Features:</strong></p><ul><li>11 specialized workflows</li><li>Self-hosted runner in your VPC</li><li>GitHub secrets integration</li><li>Automatic batching for scalability</li></ul><h3 id=4-ansible-automation>4. Ansible Automation</h3><p>Configuration management approach using Ansible playbooks for infrastructure as code.</p><p><strong>Best for:</strong></p><ul><li>Teams using Ansible for configuration management</li><li>Declarative infrastructure definition</li><li>Consistent state management across fleets</li></ul><p><strong>Key Features:</strong></p><ul><li>Infrastructure as Code (IaC)</li><li>Idempotent playbooks</li><li>Inventory management</li><li>Role-based organization</li></ul><h2 id=choosing-the-right-approach>Choosing the Right Approach</h2><table><thead><tr><th>Factor</th><th>Remote Installation</th><th>Jenkins</th><th>GitHub Actions</th><th>Ansible</th></tr></thead><tbody><tr><td><strong>Setup Complexity</strong></td><td>Low</td><td>Medium</td><td>Medium</td><td>Low</td></tr><tr><td><strong>Scalability</strong></td><td>Good (100s of hosts)</td><td>Excellent (1000s)</td><td>Excellent (1000s)</td><td>Excellent (1000s)</td></tr><tr><td><strong>Prerequisites</strong></td><td>SSH access only</td><td>Jenkins server</td><td>GitHub account</td><td>Ansible Control Node</td></tr><tr><td><strong>Learning Curve</strong></td><td>Minimal</td><td>Moderate</td><td>Moderate</td><td>Low/Moderate</td></tr><tr><td><strong>Automation Level</strong></td><td>Manual execution</td><td>Full automation</td><td>Full automation</td><td>Full automation</td></tr><tr><td><strong>Best Use Case</strong></td><td>Quick deployments</td><td>Enterprise CI/CD</td><td>Modern DevOps</td><td>Infrastructure as Code</td></tr></tbody></table><h2 id=common-features-across-all-approaches>Common Features Across All Approaches</h2><p>Regardless of which deployment method you choose, all approaches provide:</p><ul><li>âœ… <strong>SSH-based deployment</strong> to remote hosts</li><li>âœ… <strong>Concurrent execution</strong> for faster deployment</li><li>âœ… <strong>Complete lifecycle management</strong> (install, start, stop, uninstall)</li><li>âœ… <strong>Configuration management</strong> for controller settings</li><li>âœ… <strong>Error handling</strong> and logging</li><li>âœ… <strong>Scalability</strong> to hundreds or thousands of hosts</li></ul><h2 id=workshop-structure>Workshop Structure</h2><p>Each deployment approach has its own dedicated section:</p><ol><li><strong>Remote Installation</strong> - Direct CLI-based deployment</li><li><strong>Jenkins Automation</strong> - Pipeline-based enterprise deployment</li><li><strong>GitHub Actions</strong> - Modern workflow-based deployment</li><li><strong>Ansible Automation</strong> - Infrastructure as Code deployment</li></ol><p>You can follow one or all approaches depending on your needs.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you&rsquo;re new to Smart Agent deployment, we recommend starting with the <strong>Remote Installation</strong> approach to understand the basics before moving to more automated solutions.</p></div></details><h2 id=prerequisites>Prerequisites</h2><p>Before proceeding with any deployment approach, ensure you have:</p><ul><li>AppDynamics account with controller access</li><li>Account name and access key</li><li>Target hosts with SSH access</li><li>Network connectivity from hosts to AppDynamics Controller</li><li>Appropriate permissions on target hosts</li></ul><h2 id=next-steps>Next Steps</h2><p>Choose your preferred deployment approach and proceed to that section:</p><ul><li><strong>Start Simple</strong>: Begin with Remote Installation to learn the fundamentals</li><li><strong>Scale with Jenkins</strong>: Move to Jenkins for enterprise-grade automation</li><li><strong>Modernize with GitHub</strong>: Adopt GitHub Actions for cloud-native workflows</li><li><strong>Automate with Ansible</strong>: Use Ansible for declarative configuration management</li></ul><p>Each section provides complete, hands-on guidance for deploying Smart Agent at scale!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of SmartAgent Deployment</h1><article class=default><header class=headline></header><h1 id=remote-installation>Remote Installation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction</h2><p>This workshop demonstrates how to use the <strong>smartagentctl</strong> command-line tool to install and manage <strong>AppDynamics Smart Agent</strong> on multiple remote hosts simultaneously. This approach is ideal for quickly deploying Smart Agent to a fleet of servers using SSH-based remote execution, without the need for additional automation tools like Jenkins or GitHub Actions.</p><p><a href=#R-image-0d5cbc5a542c9eb022263da1c5ae8066 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0d5cbc5a542c9eb022263da1c5ae8066><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn</h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Configure remote hosts</strong> using the <code>remote.yaml</code> file</li><li><strong>Configure Smart Agent settings</strong> using <code>config.ini</code></li><li><strong>Deploy Smart Agent</strong> to multiple hosts simultaneously via SSH</li><li><strong>Start and stop agents</strong> remotely across your infrastructure</li><li><strong>Check agent status</strong> on all remote hosts</li><li><strong>Troubleshoot</strong> common installation and connectivity issues</li></ul><h2 id=key-features>Key Features</h2><ul><li>ğŸš€ <strong>Direct SSH Deployment</strong> - No additional automation platform required</li><li>ğŸ”„ <strong>Complete Lifecycle Management</strong> - Install, start, stop, and uninstall agents</li><li>ğŸ—ï¸ <strong>Configuration as Code</strong> - YAML and INI-based configuration files</li><li>ğŸ” <strong>Secure</strong> - SSH key-based authentication</li><li>ğŸ“ˆ <strong>Concurrent Execution</strong> - Configurable concurrency for parallel deployment</li><li>ğŸ›ï¸ <strong>Simple CLI</strong> - Easy-to-use smartagentctl command-line interface</li></ul><h2 id=architecture-overview>Architecture Overview</h2><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Remote Installation Architecture                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Control Node (smartagentctl) â”€â”€â–¶ SSH Connection               â”‚
â”‚                                          â”‚                       â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 1 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 2 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 3 (SSH)      â”‚
â”‚                                          â””â”€â”€â–¶ Host N (SSH)      â”‚
â”‚                                                                  â”‚
â”‚  All hosts send metrics â”€â”€â–¶ AppDynamics Controller             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workshop-components>Workshop Components</h2><p>This workshop includes:</p><ol><li><strong>Prerequisites</strong> - Required access, tools, and permissions</li><li><strong>Configuration</strong> - Setting up <code>config.ini</code> and <code>remote.yaml</code></li><li><strong>Installation & Startup</strong> - Deploying and starting Smart Agent on remote hosts</li><li><strong>Troubleshooting</strong> - Common issues and solutions</li></ol><h2 id=prerequisites>Prerequisites</h2><ul><li>Control node with smartagentctl installed</li><li>SSH access to all remote hosts</li><li>SSH private key configured for authentication</li><li>Sudo privileges on the control node</li><li>Remote hosts with SSH enabled</li><li>AppDynamics account credentials</li></ul><h2 id=available-commands>Available Commands</h2><p>The <code>smartagentctl</code> tool supports the following remote operations:</p><ul><li><code>start --remote</code> - Install and start Smart Agent on remote hosts</li><li><code>stop --remote</code> - Stop Smart Agent on remote hosts</li><li><code>status --remote</code> - Check Smart Agent status on remote hosts</li><li><code>install --remote</code> - Install Smart Agent without starting</li><li><code>uninstall --remote</code> - Remove Smart Agent from remote hosts</li><li><code>--service</code> flag - Install as systemd service</li></ul><p>All commands support the <code>--verbose</code> flag for detailed logging.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (â—€ï¸) and right (â–¶ï¸) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Remote Installation</h1><article class=default><header class=headline></header><h1 id=1-prerequisites>1. Prerequisites</h1><p>Before you begin installing Smart Agent on remote hosts, ensure you have the following prerequisites in place:</p><h2 id=required-access>Required Access</h2><ul><li><strong>SSH Access</strong>: You must have SSH access to all remote hosts where you plan to install Smart Agent</li><li><strong>SSH Private Key</strong>: A configured SSH private key for authentication</li><li><strong>Sudo Privileges</strong>: The control node user needs sudo privileges to run smartagentctl</li><li><strong>Remote SSH</strong>: Remote hosts must have SSH enabled and accessible</li></ul><h2 id=directory-structure>Directory Structure</h2><p>The Smart Agent installation directory should be set up on your control node:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><p>The directory contains:</p><ul><li><code>smartagentctl</code> - Command-line utility to manage SmartAgent</li><li><code>smartagent</code> - The SmartAgent binary</li><li><code>config.ini</code> - Main configuration file</li><li><code>remote.yaml</code> - Remote hosts configuration file</li><li><code>conf/</code> - Additional configuration files</li><li><code>lib/</code> - Required libraries</li></ul><h2 id=appdynamics-account-information>AppDynamics Account Information</h2><p>You&rsquo;ll need the following information from your AppDynamics account:</p><ul><li><strong>Controller URL</strong>: Your AppDynamics SaaS controller endpoint (e.g., <code>fso-tme.saas.appdynamics.com</code>)</li><li><strong>Account Name</strong>: Your AppDynamics account name</li><li><strong>Account Access Key</strong>: Your AppDynamics account access key</li><li><strong>Controller Port</strong>: Usually 443 for HTTPS connections</li></ul><h2 id=target-host-requirements>Target Host Requirements</h2><p>Your remote hosts should meet these requirements:</p><ul><li><strong>Operating System</strong>: Ubuntu/Linux-based systems</li><li><strong>SSH Server</strong>: SSH daemon running and accepting connections</li><li><strong>User Account</strong>: User account with appropriate permissions (typically root)</li><li><strong>Network Access</strong>: Ability to reach the AppDynamics Controller</li><li><strong>Disk Space</strong>: Sufficient space for Smart Agent installation (typically under 100MB)</li></ul><h2 id=security-considerations>Security Considerations</h2><p>Before proceeding, review these security best practices:</p><ol><li><strong>SSH Keys</strong>: Use strong SSH keys (RSA 4096-bit or ED25519)</li><li><strong>Access Keys</strong>: Store AccountAccessKey securely</li><li><strong>Host Key Validation</strong>: For production, plan to validate host keys</li><li><strong>SSL/TLS</strong>: Always use SSL/TLS for controller communication</li><li><strong>Log Files</strong>: Restrict access to log files containing sensitive information</li></ol><h2 id=verifying-prerequisites>Verifying Prerequisites</h2><h3 id=check-ssh-connectivity>Check SSH Connectivity</h3><p>Test SSH connectivity to your remote hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -i /home/ubuntu/.ssh/id_rsa ubuntu@&lt;remote-host-ip&gt;</span></span></code></pre></div><h3 id=verify-ssh-key-permissions>Verify SSH Key Permissions</h3><p>Ensure proper permissions on your SSH key:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> /home/ubuntu/.ssh/id_rsa</span></span></code></pre></div><h3 id=check-network-connectivity>Check Network Connectivity</h3><p>Verify that remote hosts can reach each other and the internet:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping &lt;remote-host-ip&gt;</span></span></code></pre></div><h3 id=verify-sudo-access>Verify Sudo Access</h3><p>Ensure you have sudo privileges:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo -v</span></span></code></pre></div><p>If all prerequisites are met, you&rsquo;re ready to proceed with configuration!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-configuration>2. Configuration</h1><p>Smart Agent remote installation requires two key configuration files: <code>config.ini</code> for Smart Agent settings and <code>remote.yaml</code> for defining remote hosts and connection parameters.</p><h2 id=configuration-files-overview>Configuration Files Overview</h2><p>Both configuration files should be located in the Smart Agent installation directory:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><p>The two files you&rsquo;ll configure:</p><ul><li><code>config.ini</code> - Smart Agent configuration deployed to all remote hosts</li><li><code>remote.yaml</code> - Remote hosts and SSH connection settings</li></ul><h2 id=configini---smart-agent-configuration>config.ini - Smart Agent Configuration</h2><p>The <code>config.ini</code> file contains the main Smart Agent configuration that will be deployed to all remote hosts.</p><p><strong>Location:</strong> <code>/home/ubuntu/appdsm/config.ini</code></p><h3 id=controller-configuration>Controller Configuration</h3><p>Configure your AppDynamics Controller connection:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>ControllerURL</span>    <span class=o>=</span> <span class=s>fso-tme.saas.appdynamics.com</span>
</span></span><span class=line><span class=cl><span class=na>ControllerPort</span>   <span class=o>=</span> <span class=s>443</span>
</span></span><span class=line><span class=cl><span class=na>FMServicePort</span>    <span class=o>=</span> <span class=s>443</span>
</span></span><span class=line><span class=cl><span class=na>AccountAccessKey</span> <span class=o>=</span> <span class=s>your-access-key-here</span>
</span></span><span class=line><span class=cl><span class=na>AccountName</span>      <span class=o>=</span> <span class=s>your-account-name</span>
</span></span><span class=line><span class=cl><span class=na>EnableSSL</span>        <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><p><strong>Key Parameters:</strong></p><ul><li><code>ControllerURL</code>: Your AppDynamics SaaS controller endpoint</li><li><code>ControllerPort</code>: HTTPS port for the controller (default: 443)</li><li><code>FMServicePort</code>: Flow Monitoring service port</li><li><code>AccountAccessKey</code>: Your AppDynamics account access key</li><li><code>AccountName</code>: Your AppDynamics account name</li><li><code>EnableSSL</code>: Enable SSL/TLS encryption (should be <code>true</code> for production)</li></ul><h3 id=common-configuration>Common Configuration</h3><p>Define the agent&rsquo;s identity and polling behavior:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[CommonConfig]</span>
</span></span><span class=line><span class=cl><span class=na>AgentName</span>            <span class=o>=</span> <span class=s>smartagent</span>
</span></span><span class=line><span class=cl><span class=na>PollingIntervalInSec</span> <span class=o>=</span> <span class=s>300</span>
</span></span><span class=line><span class=cl><span class=na>Tags</span>                 <span class=o>=</span> <span class=s>environment:production,region:us-east</span>
</span></span><span class=line><span class=cl><span class=na>ServiceName</span>          <span class=o>=</span> <span class=s>my-application</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>AgentName</code>: Name identifier for the agent</li><li><code>PollingIntervalInSec</code>: How often the agent polls for data (in seconds)</li><li><code>Tags</code>: Custom tags for categorizing agents (comma-separated)</li><li><code>ServiceName</code>: Optional service name for logical grouping</li></ul><h3 id=telemetry-settings>Telemetry Settings</h3><p>Configure logging and profiling:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Telemetry]</span>
</span></span><span class=line><span class=cl><span class=na>LogLevel</span>  <span class=o>=</span> <span class=s>DEBUG</span>
</span></span><span class=line><span class=cl><span class=na>LogFile</span>   <span class=o>=</span> <span class=s>/opt/appdynamics/appdsmartagent/log.log</span>
</span></span><span class=line><span class=cl><span class=na>Profiling</span> <span class=o>=</span> <span class=s>false</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>LogLevel</code>: Logging verbosity (<code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>)</li><li><code>LogFile</code>: Path where logs will be written on remote hosts</li><li><code>Profiling</code>: Enable performance profiling (<code>true</code>/<code>false</code>)</li></ul><h3 id=tls-client-settings>TLS Client Settings</h3><p>Configure proxy and TLS settings:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[TLSClientSetting]</span>
</span></span><span class=line><span class=cl><span class=na>Insecure</span>        <span class=o>=</span> <span class=s>false</span>
</span></span><span class=line><span class=cl><span class=na>AgentHTTPProxy</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AgentHTTPSProxy</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AgentNoProxy</span>    <span class=o>=</span> </span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>Insecure</code>: Skip TLS certificate verification (not recommended for production)</li><li><code>AgentHTTPProxy</code>: HTTP proxy server URL (if required)</li><li><code>AgentHTTPSProxy</code>: HTTPS proxy server URL (if required)</li><li><code>AgentNoProxy</code>: Comma-separated list of hosts to bypass proxy</li></ul><h3 id=auto-discovery>Auto Discovery</h3><p>Configure automatic application discovery:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[AutoDiscovery]</span>
</span></span><span class=line><span class=cl><span class=na>RunAutoDiscovery</span>          <span class=o>=</span> <span class=s>false</span>
</span></span><span class=line><span class=cl><span class=na>ExcludeLabels</span>             <span class=o>=</span> <span class=s>process.cpu.usage,process.memory.usage</span>
</span></span><span class=line><span class=cl><span class=na>ExcludeProcesses</span>          <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>ExcludeUsers</span>              <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AutoDiscoveryTimeInterval</span> <span class=o>=</span> <span class=s>4h</span>
</span></span><span class=line><span class=cl><span class=na>AutoInstall</span>               <span class=o>=</span> <span class=s>false</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>RunAutoDiscovery</code>: Automatically discover applications (<code>true</code>/<code>false</code>)</li><li><code>ExcludeLabels</code>: Metrics to exclude from discovery</li><li><code>ExcludeProcesses</code>: Process names to exclude from monitoring</li><li><code>ExcludeUsers</code>: User accounts to exclude from monitoring</li><li><code>AutoDiscoveryTimeInterval</code>: How often to run discovery (e.g., <code>4h</code>, <code>30m</code>)</li><li><code>AutoInstall</code>: Automatically install discovered applications</li></ul><h3 id=task-configuration>Task Configuration</h3><p>Configure native instrumentation:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[TaskConfig]</span>
</span></span><span class=line><span class=cl><span class=na>NativeEnable</span>        <span class=o>=</span> <span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>UserPortalUserName</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>UserPortalPassword</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>UserPortalAuth</span>      <span class=o>=</span> <span class=s>none</span>
</span></span><span class=line><span class=cl><span class=na>AutoUpdateLdPreload</span> <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>NativeEnable</code>: Enable native instrumentation</li><li><code>AutoUpdateLdPreload</code>: Automatically update LD_PRELOAD settings</li></ul><h2 id=remoteyaml---remote-hosts-configuration>remote.yaml - Remote Hosts Configuration</h2><p>The <code>remote.yaml</code> file defines the remote hosts where Smart Agent will be installed and the connection parameters.</p><p><strong>Location:</strong> <code>/home/ubuntu/appdsm/remote.yaml</code></p><h3 id=example-configuration>Example Configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>remote_dir</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/opt/appdynamics/appdsmartagent&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ssh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>private_key_path</span><span class=p>:</span><span class=w> </span><span class=l>/home/ubuntu/.ssh/id_rsa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ignore_host_key_validation</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>known_hosts_path</span><span class=p>:</span><span class=w> </span><span class=l>/home/ubuntu/.ssh/known_hosts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.243&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.48&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.142&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.5&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span></span></span></code></pre></div><h3 id=global-settings>Global Settings</h3><p><strong>max_concurrency:</strong> Maximum number of hosts to process simultaneously</p><ul><li>Default: <code>4</code></li><li>Increase for faster deployment to many hosts</li><li>Decrease if experiencing network or resource constraints</li></ul><p><strong>remote_dir:</strong> Installation directory on remote hosts</p><ul><li>Default: <code>/opt/appdynamics/appdsmartagent</code></li><li>Must be an absolute path</li><li>User must have write permissions</li></ul><h3 id=protocol-configuration>Protocol Configuration</h3><p><strong>type:</strong> Connection protocol</p><ul><li>Value: <code>ssh</code></li></ul><p><strong>auth.username:</strong> SSH username for authentication</p><ul><li>Example: <code>ubuntu</code>, <code>ec2-user</code>, <code>centos</code></li><li>Must match the user configured on remote hosts</li></ul><p><strong>auth.private_key_path:</strong> Path to SSH private key</p><ul><li>Must be an absolute path</li><li>Key must be accessible and have proper permissions (600)</li></ul><p><strong>auth.privileged:</strong> Run agent with elevated privileges</p><ul><li><code>true</code>: Install as root/systemd service</li><li><code>false</code>: Install as a user process</li><li>Recommended: <code>true</code> for production deployments</li></ul><p><strong>auth.ignore_host_key_validation:</strong> Skip SSH host key verification</p><ul><li><code>true</code>: Skip verification (useful for testing)</li><li><code>false</code>: Validate host keys (recommended for production)</li></ul><p><strong>auth.known_hosts_path:</strong> Path to SSH known_hosts file</p><ul><li>Default: <code>/home/ubuntu/.ssh/known_hosts</code></li><li>Used when host key validation is enabled</li></ul><h3 id=host-definitions>Host Definitions</h3><p>Each host entry requires:</p><p><strong>host:</strong> IP address or hostname of the remote machine</p><ul><li>Can be IPv4, IPv6, or hostname</li><li>Must be reachable from the control node</li></ul><p><strong>port:</strong> SSH port</p><ul><li>Default: <code>22</code></li><li>Change if SSH is running on a non-standard port</li></ul><p><strong>user:</strong> User account that will own the Smart Agent process</p><ul><li>Typically <code>root</code> for system-wide installation</li><li>Can be a regular user for user-specific installation</li></ul><p><strong>group:</strong> Group that will own the Smart Agent process</p><ul><li>Typically matches the user (e.g., <code>root</code>)</li></ul><h3 id=adding-more-hosts>Adding More Hosts</h3><p>To add additional remote hosts, append to the <code>hosts</code> list:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.0.1.10&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.0.1.11&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span></span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Tip</summary><div class=box-content><p>You can add as many hosts as needed. The <code>max_concurrency</code> setting controls how many are processed in parallel.</p></div></details><h2 id=verifying-configuration>Verifying Configuration</h2><p>Before proceeding with installation, verify your configuration files:</p><h3 id=review-remoteyaml>Review remote.yaml</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/remote.yaml</span></span></code></pre></div><p>Check that:</p><ul><li>All host IP addresses are correct</li><li>SSH key path is valid</li><li>Remote directory path is appropriate</li></ul><h3 id=review-configini>Review config.ini</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/config.ini</span></span></code></pre></div><p>Verify that:</p><ul><li>Controller URL and account information are correct</li><li>Log file paths are valid</li><li>Settings match your environment requirements</li></ul><h3 id=validate-yaml-syntax>Validate YAML Syntax</h3><p>Ensure your YAML file is properly formatted:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -c <span class=s2>&#34;import yaml; yaml.safe_load(open(&#39;/home/ubuntu/appdsm/remote.yaml&#39;))&#34;</span></span></span></code></pre></div><p>If the command completes without errors, your YAML syntax is valid.</p><p>Once your configuration files are ready, you can proceed with the installation!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-installation--startup>3. Installation & Startup</h1><p>Now that your configuration files are ready, you can install and start Smart Agent on your remote hosts using the <code>smartagentctl</code> command-line tool.</p><h2 id=installation-process-overview>Installation Process Overview</h2><p>The installation process involves:</p><ol><li><strong>Connection</strong>: Establishes SSH connections to all defined hosts</li><li><strong>Transfer</strong>: Copies Smart Agent binaries and configuration to remote hosts</li><li><strong>Installation</strong>: Installs Smart Agent in <code>/opt/appdynamics/appdsmartagent/</code> on each host</li><li><strong>Startup</strong>: Starts the Smart Agent process on each remote host</li><li><strong>Logging</strong>: Outputs detailed progress to console and log file</li></ol><h2 id=step-1-navigate-to-installation-directory>Step 1: Navigate to Installation Directory</h2><p>Change to the Smart Agent installation directory:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><h2 id=step-2-verify-configuration-files>Step 2: Verify Configuration Files</h2><p>Before starting the installation, verify your configuration files are properly set up:</p><h3 id=review-remote-hosts-configuration>Review remote hosts configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat remote.yaml</span></span></code></pre></div><p>Ensure all host IP addresses, ports, and SSH settings are correct.</p><h3 id=review-agent-configuration>Review agent configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat config.ini</span></span></code></pre></div><p>Verify that controller URL, account credentials, and other settings are accurate.</p><h2 id=step-3-start-smart-agent-on-remote-hosts>Step 3: Start Smart Agent on Remote Hosts</h2><p>Run the following command to start Smart Agent on all remote hosts defined in <code>remote.yaml</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl start --remote --verbose</span></span></code></pre></div><h3 id=command-breakdown>Command Breakdown</h3><ul><li><code>sudo</code>: Required for privileged operations</li><li><code>./smartagentctl</code>: The control utility</li><li><code>start</code>: Command to start the Smart Agent</li><li><code>--remote</code>: Deploy to remote hosts (reads from <code>remote.yaml</code>)</li><li><code>--verbose</code>: Enable detailed debug logging</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-triangle-exclamation"></i>
Note</summary><div class=box-content><p>The <code>--verbose</code> flag is highly recommended as it provides detailed output about the installation progress and helps identify any issues.</p></div></details><h2 id=step-4-monitor-the-installation>Step 4: Monitor the Installation</h2><p>The <code>--verbose</code> flag provides detailed output including:</p><ul><li>SSH connection status</li><li>File transfer progress</li><li>Installation steps on each host</li><li>Agent startup status</li><li>Any errors or warnings</li></ul><h3 id=expected-output>Expected Output</h3><p>You should see output similar to:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Starting Smart Agent deployment to remote hosts...
Connecting to 172.31.1.243:22...
Connection successful: 172.31.1.243
Transferring Smart Agent binaries...
Installing Smart Agent on 172.31.1.243...
Starting Smart Agent on 172.31.1.243...
Smart Agent started successfully on 172.31.1.243

Connecting to 172.31.1.48:22...
...</code></pre></div><h2 id=step-5-verify-installation>Step 5: Verify Installation</h2><p>After the installation completes, verify that Smart Agent is running on the remote hosts.</p><h3 id=check-status-remotely>Check Status Remotely</h3><p>Use the status command to check all remote hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl status --remote --verbose</span></span></code></pre></div><p>This will query each host and report whether Smart Agent is running.</p><h3 id=check-logs-on-control-node>Check Logs on Control Node</h3><p>View logs on the control node:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tail -f /home/ubuntu/appdsm/log.log</span></span></code></pre></div><h3 id=ssh-to-remote-host-and-check>SSH to Remote Host and Check</h3><p>You can also SSH to a remote host and check directly:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -f /opt/appdynamics/appdsmartagent/log.log
</span></span><span class=line><span class=cl>ps aux <span class=p>|</span> grep smartagent</span></span></code></pre></div><h2 id=additional-commands>Additional Commands</h2><h3 id=install-without-starting>Install Without Starting</h3><p>To install Smart Agent without starting it:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl install --remote --verbose</span></span></code></pre></div><p>This copies the binaries and configuration but doesn&rsquo;t start the agent process.</p><h3 id=stop-smart-agent>Stop Smart Agent</h3><p>To stop Smart Agent on all remote hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl stop --remote --verbose</span></span></code></pre></div><h3 id=install-as-system-service>Install as System Service</h3><p>To install Smart Agent as a systemd service (recommended for production):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl start --remote --verbose --service</span></span></code></pre></div><p>When installed as a service:</p><ul><li>Smart Agent will start automatically on system boot</li><li>Can be managed using <code>systemctl</code> commands</li><li>Better integration with system logging</li></ul><h3 id=uninstall-smart-agent>Uninstall Smart Agent</h3><p>To completely remove Smart Agent from remote hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl uninstall --remote --verbose</span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The uninstall command will remove all Smart Agent files from the remote hosts. Make sure you have backups of any important configuration or log files.</p></div></details><h2 id=verifying-in-appdynamics-controller>Verifying in AppDynamics Controller</h2><p>After starting Smart Agent on remote hosts:</p><ol><li><strong>Log into AppDynamics Controller</strong>: Navigate to your controller URL</li><li><strong>Go to Servers</strong>: Check the Servers section in the Controller UI</li><li><strong>Verify Agents</strong>: You should see your Smart Agents appear in the list</li><li><strong>Check Metrics</strong>: Verify that metrics are being collected from each host</li></ol><h3 id=expected-timeline>Expected Timeline</h3><ul><li><strong>Agent Registration</strong>: Agents typically appear in the Controller within 1-2 minutes</li><li><strong>Initial Metrics</strong>: First metrics usually arrive within 5 minutes</li><li><strong>Full Data</strong>: Complete data collection starts after the first polling interval (configured in <code>config.ini</code>)</li></ul><h2 id=log-file-locations>Log File Locations</h2><p>Logs are written to both the control node and remote hosts:</p><table><thead><tr><th>Location</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><strong>Control Node</strong></td><td><code>/home/ubuntu/appdsm/log.log</code></td><td>Installation and deployment logs</td></tr><tr><td><strong>Remote Hosts</strong></td><td><code>/opt/appdynamics/appdsmartagent/log.log</code></td><td>Agent runtime logs</td></tr></tbody></table><h2 id=understanding-concurrency>Understanding Concurrency</h2><p>The <code>max_concurrency</code> setting in <code>remote.yaml</code> controls parallel execution:</p><ul><li><strong>Lower values (1-2)</strong>: Sequential processing, slower but safer</li><li><strong>Default (4)</strong>: Good balance for most environments</li><li><strong>Higher values (8+)</strong>: Faster deployment to many hosts, requires more resources</li></ul><p>Example: With 12 hosts and <code>max_concurrency: 4</code>:</p><ul><li>First batch: Hosts 1-4 processed simultaneously</li><li>Second batch: Hosts 5-8 processed simultaneously</li><li>Third batch: Hosts 9-12 processed simultaneously</li></ul><h2 id=what-happens-on-each-remote-host>What Happens on Each Remote Host</h2><p>When you run the start command, the following occurs on each remote host:</p><ol><li><strong>Directory Creation</strong>: Creates <code>/opt/appdynamics/appdsmartagent/</code></li><li><strong>File Transfer</strong>: Copies <code>smartagent</code> binary, <code>config.ini</code>, and libraries</li><li><strong>Permission Setting</strong>: Sets appropriate file permissions</li><li><strong>Process Start</strong>: Launches the Smart Agent process</li><li><strong>Verification</strong>: Confirms the process is running</li></ol><h2 id=next-steps>Next Steps</h2><p>After successfully installing and starting Smart Agent:</p><ol><li>âœ… Verify agents appear in the AppDynamics Controller UI</li><li>âœ… Check that metrics are being collected</li><li>âœ… Configure application monitoring as needed</li><li>âœ… Set up alerts and dashboards</li><li>âœ… Monitor agent health and performance</li></ol><p>If you encounter any issues, proceed to the Troubleshooting section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-troubleshooting>4. Troubleshooting</h1><p>This section covers common issues you may encounter when deploying Smart Agent to remote hosts and how to resolve them.</p><h2 id=ssh-connection-issues>SSH Connection Issues</h2><h3 id=problem-cannot-connect-to-remote-hosts>Problem: Cannot Connect to Remote Hosts</h3><p><strong>Symptoms:</strong></p><ul><li>Connection timeout errors</li><li>&ldquo;Permission denied&rdquo; messages</li><li>Host key verification failures</li></ul><p><strong>Solutions:</strong></p><h4 id=1-verify-ssh-key-permissions>1. Verify SSH Key Permissions</h4><p>SSH keys must have the correct permissions:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> /home/ubuntu/.ssh/id_rsa
</span></span><span class=line><span class=cl>chmod <span class=m>644</span> /home/ubuntu/.ssh/id_rsa.pub
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> /home/ubuntu/.ssh</span></span></code></pre></div><h4 id=2-test-ssh-connectivity-manually>2. Test SSH Connectivity Manually</h4><p>Test connection to each remote host:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -i /home/ubuntu/.ssh/id_rsa ubuntu@172.31.1.243</span></span></code></pre></div><p>If this fails, the issue is with SSH configuration, not smartagentctl.</p><h4 id=3-check-remote-host-reachability>3. Check Remote Host Reachability</h4><p>Verify network connectivity:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping 172.31.1.243
</span></span><span class=line><span class=cl>telnet 172.31.1.243 <span class=m>22</span></span></span></code></pre></div><h4 id=4-verify-ssh-user>4. Verify SSH User</h4><p>Ensure the username in <code>remote.yaml</code> matches the SSH user:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu </span><span class=w> </span><span class=c># Must match your SSH user</span></span></span></code></pre></div><h4 id=5-check-known-hosts>5. Check Known Hosts</h4><p>If host key validation is enabled, ensure hosts are in known_hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keyscan 172.31.1.243 &gt;&gt; /home/ubuntu/.ssh/known_hosts</span></span></code></pre></div><p>Or temporarily disable host key validation in <code>remote.yaml</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ignore_host_key_validation</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>Disabling host key validation should only be used for testing. Always enable it in production environments.</p></div></details><h2 id=permission-issues>Permission Issues</h2><h3 id=problem-permission-denied-during-installation>Problem: Permission Denied During Installation</h3><p><strong>Symptoms:</strong></p><ul><li>&ldquo;Permission denied&rdquo; when creating directories</li><li>Cannot write to <code>/opt/appdynamics/</code></li><li>Insufficient privileges errors</li></ul><p><strong>Solutions:</strong></p><h4 id=1-verify-sudo-access-on-control-node>1. Verify Sudo Access on Control Node</h4><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo -v</span></span></code></pre></div><h4 id=2-check-privileged-setting>2. Check Privileged Setting</h4><p>Ensure <code>privileged: true</code> is set in <code>remote.yaml</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><h4 id=3-verify-remote-user-permissions>3. Verify Remote User Permissions</h4><p>The remote user must have sudo privileges or be root. Test on remote host:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>sudo mkdir -p /opt/appdynamics/test
</span></span><span class=line><span class=cl>sudo rm -rf /opt/appdynamics/test</span></span></code></pre></div><h4 id=4-check-remote-directory-permissions>4. Check Remote Directory Permissions</h4><p>If using a custom installation directory, ensure it&rsquo;s writable:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ls -la /opt/appdynamics/</span></span></code></pre></div><h2 id=agent-not-starting>Agent Not Starting</h2><h3 id=problem-agent-installation-succeeds-but-agent-doesnt-start>Problem: Agent Installation Succeeds But Agent Doesn&rsquo;t Start</h3><p><strong>Symptoms:</strong></p><ul><li>Installation completes without errors</li><li>Agent process not running on remote hosts</li><li>No errors in control node logs</li></ul><p><strong>Solutions:</strong></p><h4 id=1-check-remote-host-logs>1. Check Remote Host Logs</h4><p>SSH to the remote host and check the agent logs:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -100 /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><p>Look for error messages indicating:</p><ul><li>Configuration errors</li><li>Network connectivity issues</li><li>Missing dependencies</li></ul><h4 id=2-verify-agent-process>2. Verify Agent Process</h4><p>Check if the agent process is running:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ps aux <span class=p>|</span> grep smartagent</span></span></code></pre></div><p>If not running, try starting manually:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagent</span></span></code></pre></div><h4 id=3-check-configuration-files>3. Check Configuration Files</h4><p>Verify that <code>config.ini</code> was properly transferred:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>cat /opt/appdynamics/appdsmartagent/config.ini</span></span></code></pre></div><p>Ensure:</p><ul><li>Controller URL is correct</li><li>Account credentials are valid</li><li>All required fields are populated</li></ul><h4 id=4-test-controller-connectivity>4. Test Controller Connectivity</h4><p>From the remote host, verify connectivity to the AppDynamics Controller:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>curl -I https://fso-tme.saas.appdynamics.com</span></span></code></pre></div><h4 id=5-check-system-resources>5. Check System Resources</h4><p>Ensure the remote host has adequate resources:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>df -h  <span class=c1># Check disk space</span>
</span></span><span class=line><span class=cl>free -m  <span class=c1># Check memory</span></span></span></code></pre></div><h2 id=configuration-errors>Configuration Errors</h2><h3 id=problem-invalid-configuration>Problem: Invalid Configuration</h3><p><strong>Symptoms:</strong></p><ul><li>YAML parsing errors</li><li>Invalid configuration parameter errors</li><li>Agent fails to start with config errors</li></ul><p><strong>Solutions:</strong></p><h4 id=1-validate-yaml-syntax>1. Validate YAML Syntax</h4><p>Check for YAML syntax errors in <code>remote.yaml</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -c <span class=s2>&#34;import yaml; yaml.safe_load(open(&#39;/home/ubuntu/appdsm/remote.yaml&#39;))&#34;</span></span></span></code></pre></div><p>Common YAML issues:</p><ul><li>Incorrect indentation (use spaces, not tabs)</li><li>Missing colons</li><li>Unquoted special characters</li></ul><h4 id=2-verify-ini-file-format>2. Verify INI File Format</h4><p>Check <code>config.ini</code> for syntax errors:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/config.ini</span></span></code></pre></div><p>Common INI issues:</p><ul><li>Missing section headers (e.g., <code>[CommonConfig]</code>)</li><li>Invalid parameter names</li><li>Missing equals signs</li></ul><h4 id=3-validate-controller-credentials>3. Validate Controller Credentials</h4><p>Ensure your AppDynamics credentials are correct:</p><ul><li><strong>ControllerURL</strong>: Should not include <code>https://</code> or <code>/controller</code></li><li><strong>AccountAccessKey</strong>: Should be the full access key</li><li><strong>AccountName</strong>: Should match your account name exactly</li></ul><p>Example correct format:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>ControllerURL</span>    <span class=o>=</span> <span class=s>fso-tme.saas.appdynamics.com</span>
</span></span><span class=line><span class=cl><span class=na>AccountAccessKey</span> <span class=o>=</span> <span class=s>abc123xyz789</span>
</span></span><span class=line><span class=cl><span class=na>AccountName</span>      <span class=o>=</span> <span class=s>fso-tme</span></span></span></code></pre></div><h2 id=agent-not-appearing-in-controller>Agent Not Appearing in Controller</h2><h3 id=problem-agent-starts-but-doesnt-appear-in-controller-ui>Problem: Agent Starts But Doesn&rsquo;t Appear in Controller UI</h3><p><strong>Symptoms:</strong></p><ul><li>Agent process is running on remote hosts</li><li>No errors in agent logs</li><li>Agent doesn&rsquo;t appear in Controller UI</li></ul><p><strong>Solutions:</strong></p><h4 id=1-wait-for-initial-registration>1. Wait for Initial Registration</h4><p>Agents may take 1-5 minutes to appear in the Controller after starting.</p><h4 id=2-verify-controller-configuration>2. Verify Controller Configuration</h4><p>Check that the agent can reach the controller:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ping fso-tme.saas.appdynamics.com
</span></span><span class=line><span class=cl>curl -I https://fso-tme.saas.appdynamics.com</span></span></code></pre></div><h4 id=3-check-agent-logs-for-connection-errors>3. Check Agent Logs for Connection Errors</h4><p>Look for controller connection errors:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>grep -i <span class=s2>&#34;error\|fail\|controller&#34;</span> /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><h4 id=4-verify-ssltls-settings>4. Verify SSL/TLS Settings</h4><p>Ensure SSL is enabled in <code>config.ini</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>EnableSSL</span> <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><h4 id=5-check-firewall-rules>5. Check Firewall Rules</h4><p>Verify that outbound HTTPS (port 443) is allowed from remote hosts to the Controller.</p><h4 id=6-verify-account-credentials>6. Verify Account Credentials</h4><p>Double-check that your AccountAccessKey and AccountName are correct in the Controller UI:</p><ul><li>Log into AppDynamics Controller</li><li>Go to Settings â†’ License</li><li>Verify your account name and access key</li></ul><h2 id=performance-and-scaling-issues>Performance and Scaling Issues</h2><h3 id=problem-slow-deployment-or-timeouts>Problem: Slow Deployment or Timeouts</h3><p><strong>Symptoms:</strong></p><ul><li>Deployment takes too long</li><li>Timeout errors when deploying to many hosts</li><li>System resource exhaustion</li></ul><p><strong>Solutions:</strong></p><h4 id=1-adjust-concurrency>1. Adjust Concurrency</h4><p>Reduce <code>max_concurrency</code> in <code>remote.yaml</code> if experiencing issues:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>  </span><span class=c># Lower value for slower, more stable deployment</span></span></span></code></pre></div><p>Or increase for faster deployment if resources allow:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>8</span><span class=w>  </span><span class=c># Higher value for faster deployment</span></span></span></code></pre></div><h4 id=2-deploy-in-batches>2. Deploy in Batches</h4><p>For very large deployments, split hosts into multiple groups:</p><p><strong>remote-batch1.yaml:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.2&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.3&#34;</span></span></span></code></pre></div><p><strong>remote-batch2.yaml:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.4&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.5&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.6&#34;</span></span></span></code></pre></div><p>Then deploy each batch separately.</p><h4 id=3-check-network-bandwidth>3. Check Network Bandwidth</h4><p>Monitor network usage during deployment:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iftop</span></span></code></pre></div><p>If bandwidth is saturated, reduce concurrency or deploy during off-peak hours.</p><h2 id=log-analysis>Log Analysis</h2><h3 id=checking-control-node-logs>Checking Control Node Logs</h3><p>View detailed deployment logs:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tail -f /home/ubuntu/appdsm/log.log</span></span></code></pre></div><p>Look for:</p><ul><li>SSH connection failures</li><li>File transfer errors</li><li>Permission denied errors</li><li>Timeout messages</li></ul><h3 id=checking-remote-host-logs>Checking Remote Host Logs</h3><p>View agent runtime logs on remote hosts:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -f /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><p>Look for:</p><ul><li>Controller connection errors</li><li>Configuration errors</li><li>Agent startup failures</li><li>Network issues</li></ul><h3 id=increasing-log-verbosity>Increasing Log Verbosity</h3><p>For more detailed logging, set <code>LogLevel</code> to <code>DEBUG</code> in <code>config.ini</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Telemetry]</span>
</span></span><span class=line><span class=cl><span class=na>LogLevel</span> <span class=o>=</span> <span class=s>DEBUG</span></span></span></code></pre></div><h2 id=getting-help>Getting Help</h2><p>If you&rsquo;re still experiencing issues:</p><ol><li><p><strong>Check Documentation</strong>: Review the smartagentctl help:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./smartagentctl --help
</span></span><span class=line><span class=cl>./smartagentctl start --help</span></span></code></pre></div></li><li><p><strong>Review AppDynamics Documentation</strong>: Visit the AppDynamics documentation portal</p></li><li><p><strong>Check Log Files</strong>: Always review both control node and remote host logs</p></li><li><p><strong>Test Components Individually</strong>:</p><ul><li>Test SSH connectivity separately</li><li>Test agent startup on a single host manually</li><li>Verify controller connectivity independently</li></ul></li><li><p><strong>Collect Diagnostic Information</strong>:</p><ul><li>Control node logs</li><li>Remote host logs</li><li>Configuration files (with sensitive data redacted)</li><li>Error messages and stack traces</li></ul></li></ol><h2 id=common-error-messages>Common Error Messages</h2><table><thead><tr><th>Error Message</th><th>Cause</th><th>Solution</th></tr></thead><tbody><tr><td>&ldquo;Permission denied (publickey)&rdquo;</td><td>SSH key authentication failure</td><td>Verify SSH key path and permissions</td></tr><tr><td>&ldquo;Connection refused&rdquo;</td><td>SSH port not accessible</td><td>Check firewall rules and SSH daemon</td></tr><tr><td>&ldquo;No such file or directory&rdquo;</td><td>Missing configuration file</td><td>Verify config files exist and paths are correct</td></tr><tr><td>&ldquo;YAML parse error&rdquo;</td><td>Invalid YAML syntax</td><td>Validate YAML syntax with parser</td></tr><tr><td>&ldquo;Controller unreachable&rdquo;</td><td>Network connectivity issue</td><td>Test controller connectivity from remote host</td></tr><tr><td>&ldquo;Invalid credentials&rdquo;</td><td>Wrong account key or name</td><td>Verify AppDynamics credentials</td></tr></tbody></table><h2 id=best-practices-for-troubleshooting>Best Practices for Troubleshooting</h2><ol><li><strong>Always use &ndash;verbose flag</strong>: Provides detailed output for debugging</li><li><strong>Test with a single host first</strong>: Deploy to one host before scaling</li><li><strong>Check logs immediately</strong>: Review logs right after deployment</li><li><strong>Verify prerequisites</strong>: Ensure all requirements are met before deploying</li><li><strong>Test connectivity separately</strong>: Verify SSH and network connectivity independently</li><li><strong>Use manual commands</strong>: Test manual SSH and agent startup to isolate issues</li></ol><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>When troubleshooting, start with the simplest tests first (e.g., ping, SSH connectivity) before moving to more complex issues.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=jenkins-automation>Jenkins Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction</h2><p>This workshop demonstrates how to use <strong>Jenkins</strong> to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage Jenkins pipelines for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-67904a5cb7e645035f6d6a99bab6f6de class=lightbox-link><img alt="Jenkins and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-67904a5cb7e645035f6d6a99bab6f6de><img alt="Jenkins and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white"></a> <a href=#R-image-4e5dc0aa2679ad38df9ce80cda88d350 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4e5dc0aa2679ad38df9ce80cda88d350><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn</h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts simultaneously using Jenkins</li><li><strong>Configure Jenkins credentials</strong> for secure SSH and AppDynamics access</li><li><strong>Create parameterized pipelines</strong> for flexible deployment scenarios</li><li><strong>Implement batch processing</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, configure, stop, and cleanup</li><li><strong>Handle failures gracefully</strong> with automatic error tracking and reporting</li></ul><h2 id=key-features>Key Features</h2><ul><li>ğŸš€ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>ğŸ”„ <strong>Complete Lifecycle Management</strong> - Install, uninstall, stop, and clean agents</li><li>ğŸ—ï¸ <strong>Infrastructure as Code</strong> - All pipelines version-controlled</li><li>ğŸ” <strong>Secure</strong> - SSH key-based authentication via Jenkins credentials</li><li>ğŸ“ˆ <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>ğŸ›ï¸ <strong>Jenkins Agent</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview</h2><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Jenkins-based Deployment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Developer â”€â”€â–¶ Jenkins Master â”€â”€â–¶ Jenkins Agent (AWS VPC)      â”‚
â”‚                                          â”‚                       â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 1 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 2 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 3 (SSH)      â”‚
â”‚                                          â””â”€â”€â–¶ Host N (SSH)      â”‚
â”‚                                                                  â”‚
â”‚  All hosts send metrics â”€â”€â–¶ AppDynamics Controller             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workshop-components>Workshop Components</h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the system design and network topology</li><li><strong>Jenkins Setup</strong> - Configuring Jenkins, credentials, and agents</li><li><strong>Pipeline Creation</strong> - Creating and configuring deployment pipelines</li><li><strong>Deployment Workflow</strong> - Executing deployments and verifying installations</li></ol><h2 id=prerequisites>Prerequisites</h2><ul><li>Jenkins server (2.300+) with Pipeline plugin</li><li>Jenkins agent in the same VPC as target EC2 instances</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=github-repository>GitHub Repository</h2><p>All pipeline code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/sm-jenkins rel=external>https://github.com/chambear2809/sm-jenkins</a></strong></p><p>The repository includes:</p><ul><li>Complete Jenkinsfile pipeline definitions</li><li>Detailed setup documentation</li><li>Configuration examples</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (â—€ï¸) and right (â–¶ï¸) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Jenkins Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture</h2><p>The Jenkins-based Smart Agent deployment system uses a hub-and-spoke architecture where a Jenkins agent in your AWS VPC orchestrates deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture</h3><pre class="mermaid align-center">graph TB
    subgraph &#34;Jenkins Infrastructure&#34;
        JM[Jenkins Master&lt;br/&gt;Web UI + Orchestration]
        JA[Jenkins Agent&lt;br/&gt;EC2 in VPC&lt;br/&gt;Label: linux]
    end
    
    subgraph &#34;AWS VPC - Private Network&#34;
        subgraph &#34;Target EC2 Instances&#34;
            H1[Host 1&lt;br/&gt;172.31.1.243]
            H2[Host 2&lt;br/&gt;172.31.1.48]
            H3[Host 3&lt;br/&gt;172.31.1.5]
            HN[Host N&lt;br/&gt;172.31.x.x]
        end
    end
    
    DEV[Developer/Operator]
    APPD[AppDynamics&lt;br/&gt;Controller]
    
    DEV --&gt;|1. Triggers Pipeline| JM
    JM --&gt;|2. Assigns Job| JA
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H1
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H2
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H3
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| HN
    
    H1 -.-&gt;|Metrics| APPD
    H2 -.-&gt;|Metrics| APPD
    H3 -.-&gt;|Metrics| APPD
    HN -.-&gt;|Metrics| APPD
    
    style JM fill:#d4e6f1
    style JA fill:#a9cce3
    style H1 fill:#aed6f1
    style H2 fill:#aed6f1
    style H3 fill:#aed6f1
    style HN fill:#aed6f1</pre><h2 id=network-architecture>Network Architecture</h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The Jenkins agent communicates with target hosts via private IPs, eliminating the need for public IP addresses on target hosts.</p><h3 id=vpc-layout>VPC Layout</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AWS VPC (10.0.0.0/16)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Security Group: app-agents-sg                â”‚  â”‚
â”‚  â”‚  Rules:                                                   â”‚  â”‚
â”‚  â”‚  - Inbound: SSH (22) from Jenkins Agent only             â”‚  â”‚
â”‚  â”‚  - Outbound: HTTPS (443) to AppDynamics Controller       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Jenkins Agentâ”‚    â”‚  Target EC2  â”‚    â”‚  Target EC2  â”‚      â”‚
â”‚  â”‚              â”‚    â”‚              â”‚    â”‚              â”‚      â”‚
â”‚  â”‚ Private IP:  â”‚â”€â”€â”€â–¶â”‚ Private IP:  â”‚    â”‚ Private IP:  â”‚      â”‚
â”‚  â”‚ 172.31.50.10 â”‚SSH â”‚ 172.31.1.243 â”‚    â”‚ 172.31.1.48  â”‚      â”‚
â”‚  â”‚              â”‚â”€â”€â”€â–¶â”‚              â”‚    â”‚              â”‚      â”‚
â”‚  â”‚ Label: linux â”‚    â”‚ Ubuntu 20.04 â”‚    â”‚ Ubuntu 20.04 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AppDynamics    â”‚
                    â”‚    Controller    â”‚
                    â”‚  (SaaS/On-Prem)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=deployment-flow>Deployment Flow</h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence</h3><pre class="mermaid align-center">sequenceDiagram
    participant Dev as Developer
    participant JM as Jenkins Master
    participant JA as Jenkins Agent&lt;br/&gt;(VPC)
    participant TH as Target Hosts&lt;br/&gt;(VPC)
    participant AppD as AppDynamics&lt;br/&gt;Controller
    
    Dev-&gt;&gt;JM: 1. Trigger Pipeline
    JM-&gt;&gt;JM: 2. Load Credentials
    JM-&gt;&gt;JA: 3. Schedule Job
    JA-&gt;&gt;JA: 4. Prepare Batches
    
    loop For Each Batch
        JA-&gt;&gt;TH: 5. SSH Copy Files (SCP)
        JA-&gt;&gt;TH: 6. SSH Execute Commands
        TH-&gt;&gt;TH: 7. Install/Config Agent
        TH--&gt;&gt;JA: 8. Return Status
    end
    
    JA-&gt;&gt;JM: 9. Report Results
    JM-&gt;&gt;Dev: 10. Show Build Status
    
    TH-&gt;&gt;AppD: 11. Send Metrics (Post-Install)
    AppD--&gt;&gt;Dev: 12. View Monitoring Data</pre><h2 id=component-details>Component Details</h2><h3 id=jenkins-master>Jenkins Master</h3><p><strong>Responsibilities:</strong></p><ul><li>Web UI for users</li><li>Pipeline orchestration</li><li>Credential management</li><li>Build history & logs</li><li>Job scheduling</li></ul><p><strong>Requirements:</strong></p><ul><li>Jenkins 2.300+</li><li>Plugins: Pipeline, SSH Agent, Credentials, Git</li><li>Network access to agent</li></ul><h3 id=jenkins-agent>Jenkins Agent</h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Execute pipeline stages</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Batching logic</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Label: <code>linux</code></li><li>Java 11+</li><li>SSH client</li><li>Network: SSH to all targets</li><li>Disk: ~20GB for artifacts</li></ul><h3 id=target-hosts>Target Hosts</h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
â””â”€â”€ appdsmartagent/
    â”œâ”€â”€ smartagentctl
    â”œâ”€â”€ config.ini
    â””â”€â”€ agents/
        â”œâ”€â”€ machine/
        â”œâ”€â”€ java/
        â”œâ”€â”€ node/
        â””â”€â”€ db/</code></pre></div><h2 id=security-architecture>Security Architecture</h2><h3 id=security-layers>Security Layers</h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for agents</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>Whitelist Jenkins Agent IP</li><li>Port 22 (SSH) only</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in Jenkins credentials</li><li>Temporary key files (600 perms)</li><li>Keys removed after each build</li></ul></li><li><p><strong>Jenkins RBAC</strong></p><ul><li>Role-based access control</li><li>Pipeline-level permissions</li><li>Credential access restrictions</li><li>Audit logging enabled</li></ul></li><li><p><strong>Secrets Management</strong></p><ul><li>No secrets in code/logs</li><li>Credentials binding only</li><li>Environment variable masking</li><li>Automatic secret rotation (optional)</li></ul></li></ol><h3 id=credential-flow>Credential Flow</h3><pre class="mermaid align-center">flowchart LR
    subgraph &#34;Jenkins Master&#34;
        CS[Credentials Store&lt;br/&gt;Encrypted at Rest]
        JM[Jenkins Master]
    end
    
    subgraph &#34;Jenkins Agent&#34;
        WS[Workspace&lt;br/&gt;Temp Files]
        KEY[SSH Key File&lt;br/&gt;600 permissions]
    end
    
    subgraph &#34;Target Hosts&#34;
        TH[EC2 Instances&lt;br/&gt;Authorized Keys]
    end
    
    CS --&gt;|Binding| JM
    JM --&gt;|Secure Copy| KEY
    KEY --&gt;|SSH Auth| TH
    WS -.-&gt;|Cleanup| X[Deleted]
    KEY -.-&gt;|Cleanup| X
    
    style CS fill:#fdeaa8
    style KEY fill:#fadbd8
    style X fill:#e8e8e8</pre><h2 id=batch-processing>Batch Processing</h2><p>The system uses automatic batching to support deployments at any scale. By default, hosts are processed in batches of 256, with all hosts within a batch deploying in parallel.</p><h3 id=how-batching-works>How Batching Works</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Host 002: 172.31.1.2      â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   BATCH 1        â”‚
    ...                              â”‚   Hosts 1-256    â”‚ â”€â”€â”€â”
Host 256: 172.31.1.256               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 257: 172.31.1.257               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
Host 258: 172.31.1.258   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   BATCH 2        â”‚    â”‚ SEQUENTIAL
    ...                              â”‚   Hosts 257-512  â”‚    â”‚ EXECUTION
Host 512: 172.31.1.512               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 513: 172.31.1.513               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    ...                              â”‚   BATCH 3        â”‚    â”‚
Host 768: 172.31.1.768   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 513-768  â”‚ â”€â”€â”€â”˜
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Host 769: 172.31.1.769               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    ...                              â”‚   BATCH 4        â”‚
Host 1000: 172.31.2.232  â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 769-1000 â”‚
                                     â”‚   (232 hosts)    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WITHIN EACH BATCH:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All hosts deploy in PARALLEL          â”‚
â”‚                                        â”‚
â”‚  Host 1 â”€â”€â”                           â”‚
â”‚  Host 2 â”€â”€â”¤                           â”‚
â”‚  Host 3 â”€â”€â”¼â”€â–¶ Background processes (&amp;)â”‚
â”‚    ...    â”‚                           â”‚
â”‚  Host 256â”€â”˜   â””â”€â–¶ wait command        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h3 id=scaling-characteristics>Scaling Characteristics</h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts â†’ 1 batch â†’ ~2 minutes</li><li>100 hosts â†’ 1 batch â†’ ~3 minutes</li><li>500 hosts â†’ 2 batches â†’ ~6 minutes</li><li>1,000 hosts â†’ 4 batches â†’ ~12 minutes</li><li>5,000 hosts â†’ 20 batches â†’ ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Jenkins agent resources</li></ul><h2 id=next-steps>Next Steps</h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up Jenkins and configuring credentials.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=jenkins-setup>Jenkins Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites</h2><p>Before you begin, ensure you have:</p><ul><li>Jenkins server (version 2.300 or later)</li><li>A Jenkins agent in the same AWS VPC as your target EC2 instances</li><li>SSH key pair for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=required-jenkins-plugins>Required Jenkins Plugins</h2><p>Install these plugins via <strong>Manage Jenkins â†’ Plugins â†’ Available Plugins</strong>:</p><ol><li><strong>Pipeline</strong> (core plugin, usually pre-installed)</li><li><strong>SSH Agent Plugin</strong></li><li><strong>Credentials Plugin</strong> (usually pre-installed)</li><li><strong>Git Plugin</strong> (if using SCM)</li></ol><p>To install:</p><ol><li>Navigate to <strong>Manage Jenkins â†’ Plugins</strong></li><li>Click <strong>Available</strong> tab</li><li>Search for each plugin</li><li>Select and click <strong>Install</strong></li></ol><h2 id=configure-jenkins-agent>Configure Jenkins Agent</h2><p>Your Jenkins agent must be able to reach target EC2 instances via private IPs. There are two main options:</p><h3 id=option-a-ec2-instance-as-agent>Option A: EC2 Instance as Agent</h3><ol><li><p><strong>Launch EC2 instance in same VPC</strong> as your target hosts</p></li><li><p><strong>Install Java</strong> (required by Jenkins):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install -y openjdk-11-jdk</span></span></code></pre></div></li><li><p><strong>Add agent in Jenkins</strong>:</p><ul><li>Go to <strong>Manage Jenkins â†’ Nodes â†’ New Node</strong></li><li>Name: <code>aws-vpc-agent</code> (or your preferred name)</li><li>Type: <strong>Permanent Agent</strong></li><li>Configure:<ul><li><strong>Remote root directory</strong>: <code>/home/ubuntu/jenkins</code></li><li><strong>Labels</strong>: <code>linux</code> (must match pipeline agent label)</li><li><strong>Launch method</strong>: Launch agent via SSH</li><li><strong>Host</strong>: EC2 private IP</li><li><strong>Credentials</strong>: Add SSH credentials for agent</li></ul></li></ul></li></ol><h3 id=option-b-use-existing-linux-agent>Option B: Use Existing Linux Agent</h3><ul><li>Ensure agent has label <code>linux</code></li><li>Verify network connectivity to target hosts</li><li>Confirm SSH client is installed</li></ul><h3 id=configure-agent-labels>Configure Agent Labels</h3><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>All pipelines in this workshop use the <code>linux</code> label. Make sure your agent is configured with this label.</p></div></details><p>To set or modify labels:</p><ol><li>Go to <strong>Manage Jenkins â†’ Nodes</strong></li><li>Click on your agent</li><li>Click <strong>Configure</strong></li><li>Set <strong>Labels</strong> to <code>linux</code></li><li>Click <strong>Save</strong></li></ol><h2 id=credentials-setup>Credentials Setup</h2><p>Navigate to: <strong>Manage Jenkins â†’ Credentials â†’ System â†’ Global credentials (unrestricted)</strong></p><p>You&rsquo;ll need to create three credentials for the pipelines to work.</p><h3 id=1-ssh-private-key-for-target-hosts>1. SSH Private Key for Target Hosts</h3><p>This credential allows Jenkins to SSH into your target EC2 instances.</p><p><strong>Type</strong>: SSH Username with private key</p><ul><li><strong>ID</strong>: <code>ssh-private-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>SSH key for EC2 target hosts</code></li><li><strong>Username</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>Private Key</strong>: Choose one:<ul><li><strong>Enter directly</strong>: Paste your PEM file content</li><li><strong>From file</strong>: Upload PEM file</li><li><strong>From Jenkins master</strong>: Specify path</li></ul></li></ul><p><strong>Example format</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><h3 id=2-deployment-hosts-list>2. Deployment Hosts List</h3><p>This credential contains the list of all target hosts where Smart Agent should be deployed.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>deployment-hosts</code> (must match exactly)</li><li><strong>Description</strong>: <code>List of target EC2 host IPs</code></li><li><strong>Secret</strong>: Enter newline-separated IPs</li></ul><p><strong>Example</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul></div></details><h3 id=3-appdynamics-account-access-key>3. AppDynamics Account Access Key</h3><p>This credential contains your AppDynamics account access key for Smart Agent authentication.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>account-access-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>AppDynamics account access key</code></li><li><strong>Secret</strong>: Your AppDynamics access key</li></ul><p><strong>Example</strong>: <code>abcd1234-ef56-7890-gh12-ijklmnopqrst</code></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can find your AppDynamics access key in the Controller under <strong>Settings â†’ License â†’ Account</strong>.</p></div></details><h2 id=credential-security-best-practices>Credential Security Best Practices</h2><p>Follow these best practices for credential management:</p><ul><li>âœ… Use Jenkins credential encryption (built-in)</li><li>âœ… Restrict access via Jenkins role-based authorization</li><li>âœ… Rotate SSH keys periodically</li><li>âœ… Use least-privilege IAM roles for EC2 instances</li><li>âœ… Enable audit logging for credential access</li><li>âœ… Never commit credentials to version control</li></ul><h2 id=smart-agent-package-setup>Smart Agent Package Setup</h2><p>The Smart Agent ZIP file should be placed in a location accessible to Jenkins. The recommended approach is to store it in the Jenkins home directory.</p><h3 id=download-smart-agent>Download Smart Agent</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Download from AppDynamics</span>
</span></span><span class=line><span class=cl>curl -o appdsmartagent_64_linux.zip <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;https://download.appdynamics.com/download/prox/download-file/smart-agent/latest/appdsmartagent_64_linux.zip&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Verify the download</span>
</span></span><span class=line><span class=cl>ls -lh appdsmartagent_64_linux.zip</span></span></code></pre></div><h3 id=storage-location>Storage Location</h3><p>The pipelines reference the Smart Agent ZIP at: <code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></p><p>You can either:</p><ol><li>Place the ZIP at this exact location</li><li>Modify the <code>SMARTAGENT_ZIP_PATH</code> pipeline parameter to point to your ZIP location</li></ol><h2 id=verify-configuration>Verify Configuration</h2><p>Before proceeding to pipeline creation, verify your setup:</p><h3 id=1-check-agent-status>1. Check Agent Status</h3><ol><li>Go to <strong>Manage Jenkins â†’ Nodes</strong></li><li>Verify your agent shows as &ldquo;online&rdquo;</li><li>Confirm label is set to <code>linux</code></li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity</h3><p>Create a simple test pipeline to verify SSH works:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;Test SSH&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>steps</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>                    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>keyFileVariable:</span> <span class=s1>&#39;SSH_KEY&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>usernameVariable:</span> <span class=s1>&#39;SSH_USER&#39;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>                    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;deployment-hosts&#39;</span><span class=o>,</span> <span class=nl>variable:</span> <span class=s1>&#39;HOSTS&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>sh</span> <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;Testing SSH credentials...&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;$HOSTS&#34; | head -1 | while read HOST; do
</span></span></span><span class=line><span class=cl><span class=s1>                            ssh -i $SSH_KEY \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o StrictHostKeyChecking=no \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o ConnectTimeout=10 \
</span></span></span><span class=line><span class=cl><span class=s1>                                $SSH_USER@$HOST \
</span></span></span><span class=line><span class=cl><span class=s1>                                &#34;echo &#39;Connection successful&#39;&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        done
</span></span></span><span class=line><span class=cl><span class=s1>                    &#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><h3 id=3-verify-credentials-exist>3. Verify Credentials Exist</h3><ol><li>Go to <strong>Manage Jenkins â†’ Credentials</strong></li><li>Confirm all three credentials are listed:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li></ol><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues</h2><h3 id=agent-not-available>Agent Not Available</h3><p><strong>Symptom</strong>: &ldquo;No agent available&rdquo; error when running pipelines</p><p><strong>Solution</strong>:</p><ul><li>Check: <strong>Manage Jenkins â†’ Nodes</strong></li><li>Ensure agent is online</li><li>Verify agent has <code>linux</code> label</li><li>Test agent connectivity</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures</h3><p><strong>Symptom</strong>: Cannot connect to target hosts via SSH</p><p><strong>Solution</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from agent</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on target</span></span></span></code></pre></div><h3 id=credential-not-found>Credential Not Found</h3><p><strong>Symptom</strong>: &ldquo;Credential not found&rdquo; error</p><p><strong>Solution</strong>:</p><ul><li>Verify credential IDs exactly match:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li><li>Check credential scope is set to <strong>Global</strong></li></ul><h3 id=permission-denied-on-target-hosts>Permission Denied on Target Hosts</h3><p><strong>Symptom</strong>: SSH succeeds but commands fail with permission denied</p><p><strong>Solution</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On target host, verify user is in sudoers</span>
</span></span><span class=line><span class=cl>sudo visudo
</span></span><span class=line><span class=cl><span class=c1># Add line:</span>
</span></span><span class=line><span class=cl>ubuntu <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span> NOPASSWD: ALL</span></span></code></pre></div><h2 id=next-steps>Next Steps</h2><p>Now that Jenkins is configured with credentials and agents, you&rsquo;re ready to create the deployment pipelines!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=pipeline-creation>Pipeline Creation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=overview>Overview</h2><p>The GitHub repository contains four main pipelines for managing the Smart Agent lifecycle:</p><ol><li><strong>Deploy Smart Agent</strong> - Installs and starts Smart Agent service</li><li><strong>Install Machine Agent</strong> - Installs Machine Agent via smartagentctl</li><li><strong>Install Database Agent</strong> - Installs Database Agent via smartagentctl</li><li><strong>Cleanup All Agents</strong> - Removes /opt/appdynamics directory</li></ol><p>All pipeline code is available in the <a href=https://github.com/chambear2809/sm-jenkins rel=external>sm-jenkins GitHub repository</a>.</p><h2 id=pipeline-files>Pipeline Files</h2><p>The repository contains these Jenkinsfile pipeline definitions:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>sm-jenkins/
â””â”€â”€ pipelines/
    â”œâ”€â”€ Jenkinsfile.deploy                  # Deploy Smart Agent
    â”œâ”€â”€ Jenkinsfile.install-machine-agent  # Install Machine Agent
    â”œâ”€â”€ Jenkinsfile.install-db-agent       # Install Database Agent
    â””â”€â”€ Jenkinsfile.cleanup                # Cleanup All Agents</code></pre></div><h2 id=creating-pipelines-in-jenkins>Creating Pipelines in Jenkins</h2><p>For each Jenkinsfile you want to use, follow these steps to create a pipeline in Jenkins.</p><h3 id=method-1-pipeline-from-scm-recommended>Method 1: Pipeline from SCM (Recommended)</h3><p>This method keeps your pipeline code in version control and automatically syncs changes.</p><h4 id=step-1-fork-or-clone-the-repository>Step 1: Fork or Clone the Repository</h4><p>First, fork the repository to your own GitHub account or organization, or use the original repository directly.</p><p><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></p><h4 id=step-2-create-pipeline-in-jenkins>Step 2: Create Pipeline in Jenkins</h4><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click <strong>New Item</strong></li><li>Enter item name (e.g., <code>Deploy-Smart-Agent</code>)</li><li>Select <strong>Pipeline</strong></li><li>Click <strong>OK</strong></li></ol><h4 id=step-3-configure-pipeline>Step 3: Configure Pipeline</h4><p>In the pipeline configuration page:</p><p><strong>General Section:</strong></p><ul><li><strong>Description</strong>: <code>Deploys AppDynamics Smart Agent to multiple hosts</code></li><li>Leave <strong>Discard old builds</strong> unchecked (or configure as desired)</li></ul><p><strong>Build Triggers:</strong></p><ul><li>Leave unchecked for manual-only execution</li><li>Or configure webhook/polling if desired</li></ul><p><strong>Pipeline Section:</strong></p><ul><li><strong>Definition</strong>: Select <code>Pipeline script from SCM</code></li><li><strong>SCM</strong>: Select <code>Git</code></li><li><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></li><li><strong>Credentials</strong>: Add if using a private repository</li><li><strong>Branch Specifier</strong>: <code>*/main</code> (or <code>*/master</code>)</li><li><strong>Script Path</strong>: <code>pipelines/Jenkinsfile.deploy</code></li></ul><h4 id=step-4-save>Step 4: Save</h4><p>Click <strong>Save</strong> to create the pipeline.</p><h4 id=step-5-repeat-for-other-pipelines>Step 5: Repeat for Other Pipelines</h4><p>Repeat steps 2-4 for each pipeline you want to create, using the appropriate script path:</p><table><thead><tr><th>Pipeline Name</th><th>Script Path</th></tr></thead><tbody><tr><td>Deploy-Smart-Agent</td><td><code>pipelines/Jenkinsfile.deploy</code></td></tr><tr><td>Install-Machine-Agent</td><td><code>pipelines/Jenkinsfile.install-machine-agent</code></td></tr><tr><td>Install-Database-Agent</td><td><code>pipelines/Jenkinsfile.install-db-agent</code></td></tr><tr><td>Cleanup-All-Agents</td><td><code>pipelines/Jenkinsfile.cleanup</code></td></tr></tbody></table><h3 id=method-2-direct-pipeline-script>Method 2: Direct Pipeline Script</h3><p>Alternatively, you can copy the Jenkinsfile content directly into Jenkins.</p><ol><li><strong>Create New Item</strong> (same as Method 1)</li><li>In <strong>Pipeline</strong> section:<ul><li><strong>Definition</strong>: Select <code>Pipeline script</code></li><li><strong>Script</strong>: Copy/paste the entire Jenkinsfile content from GitHub</li></ul></li><li><strong>Save</strong></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Method 1 (SCM) is recommended because it keeps your pipelines in version control and makes updates easier.</p></div></details><h2 id=pipeline-parameters>Pipeline Parameters</h2><p>Each pipeline accepts configurable parameters. Here are the key parameters for the main deployment pipeline:</p><h3 id=deploy-smart-agent-pipeline-parameters>Deploy Smart Agent Pipeline Parameters</h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>SMARTAGENT_ZIP_PATH</code></td><td><code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></td><td>Path to Smart Agent ZIP on Jenkins server</td></tr><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Installation directory on target hosts</td></tr><tr><td><code>APPD_USER</code></td><td><code>ubuntu</code></td><td>User to run Smart Agent process</td></tr><tr><td><code>APPD_GROUP</code></td><td><code>ubuntu</code></td><td>Group to run Smart Agent process</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>AGENT_NAME</code></td><td><code>smartagent</code></td><td>Smart Agent name</td></tr><tr><td><code>LOG_LEVEL</code></td><td><code>DEBUG</code></td><td>Log level (DEBUG, INFO, WARN, ERROR)</td></tr></tbody></table><h3 id=cleanup-pipeline-parameters>Cleanup Pipeline Parameters</h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Directory to remove</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>CONFIRM_CLEANUP</code></td><td><code>false</code></td><td>Must be checked to proceed with cleanup</td></tr></tbody></table><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The cleanup pipeline includes a confirmation parameter to prevent accidental deletion. You must check <code>CONFIRM_CLEANUP</code> to execute the cleanup.</p></div></details><h2 id=understanding-pipeline-structure>Understanding Pipeline Structure</h2><p>Let&rsquo;s examine the key components of the deployment pipeline:</p><h3 id=1-agent-declaration>1. Agent Declaration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span></span></span></code></pre></div><p>This ensures the pipeline runs on a Jenkins agent with the <code>linux</code> label.</p><h3 id=2-parameters-block>2. Parameters Block</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>parameters</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;SMARTAGENT_ZIP_PATH&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;REMOTE_INSTALL_DIR&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ... more parameters
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Defines configurable parameters that can be set when triggering the build.</p><h3 id=3-stages>3. Stages</h3><p>The deployment pipeline has these stages:</p><ol><li><strong>Preparation</strong> - Loads target hosts from credentials</li><li><strong>Extract Smart Agent</strong> - Extracts ZIP file to staging directory</li><li><strong>Configure Smart Agent</strong> - Creates config.ini template</li><li><strong>Deploy to Remote Hosts</strong> - Copies files and starts Smart Agent on each host</li><li><strong>Verify Installation</strong> - Checks Smart Agent status on all hosts</li></ol><h3 id=4-credentials-binding>4. Credentials Binding</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> <span class=o>...),</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;account-access-key&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Pipeline code with access to credentials
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Securely loads credentials without exposing them in logs.</p><h3 id=5-post-actions>5. Post Actions</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>post</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>success</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>failure</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>always</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Defines actions to run after pipeline completion, regardless of success or failure.</p><h2 id=pipeline-naming-convention>Pipeline Naming Convention</h2><p>For clarity and organization, use a consistent naming convention:</p><p><strong>Recommended names:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>01-Deploy-Smart-Agent
02-Install-Machine-Agent
03-Install-Database-Agent
04-Cleanup-All-Agents</code></pre></div><p>The numeric prefix helps maintain logical ordering in the Jenkins dashboard.</p><h2 id=organizing-pipelines-with-folders>Organizing Pipelines with Folders</h2><p>For better organization, you can use Jenkins folders:</p><ol><li><p><strong>Create Folder</strong>:</p><ul><li>Click <strong>New Item</strong></li><li>Enter name: <code>AppDynamics Smart Agent</code></li><li>Select <strong>Folder</strong></li><li>Click <strong>OK</strong></li></ul></li><li><p><strong>Create Pipelines in Folder</strong>:</p><ul><li>Enter the folder</li><li>Create pipelines as described above</li></ul></li></ol><p><strong>Example structure:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>AppDynamics Smart Agent/
â”œâ”€â”€ Deployment/
â”‚   â””â”€â”€ 01-Deploy-Smart-Agent
â”œâ”€â”€ Agent Installation/
â”‚   â”œâ”€â”€ 02-Install-Machine-Agent
â”‚   â””â”€â”€ 03-Install-Database-Agent
â””â”€â”€ Cleanup/
    â””â”€â”€ 04-Cleanup-All-Agents</code></pre></div><h2 id=viewing-pipeline-code>Viewing Pipeline Code</h2><p>You can view the complete pipeline code in the GitHub repository:</p><p><strong>Main deployment pipeline:</strong>
<a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy rel=external>https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy</a></p><p><strong>Other pipelines:</strong></p><ul><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-machine-agent rel=external>Jenkinsfile.install-machine-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-db-agent rel=external>Jenkinsfile.install-db-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.cleanup rel=external>Jenkinsfile.cleanup</a></li></ul><h2 id=testing-pipeline-configuration>Testing Pipeline Configuration</h2><p>Before running a full deployment, test your pipeline configuration:</p><h3 id=1-dry-run-with-single-host>1. Dry Run with Single Host</h3><ol><li>Create a test credential <code>deployment-hosts-test</code> with only one IP</li><li>Temporarily modify your pipeline to use this credential</li><li>Run the pipeline and verify it works on a single host</li><li>Once verified, update to use the full host list</li></ol><h3 id=2-check-syntax>2. Check Syntax</h3><p>Jenkins provides a built-in syntax validator:</p><ol><li>Go to your pipeline</li><li>Click <strong>Pipeline Syntax</strong> link</li><li>Use the <strong>Declarative Directive Generator</strong> to validate syntax</li></ol><h2 id=next-steps>Next Steps</h2><p>With pipelines created, you&rsquo;re ready to execute your first Smart Agent deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment-workflow>Deployment Workflow</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=first-deployment>First Deployment</h2><p>Now that your pipelines are configured, let&rsquo;s walk through executing your first Smart Agent deployment.</p><h3 id=step-1-navigate-to-pipeline>Step 1: Navigate to Pipeline</h3><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click on your <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><h3 id=step-2-build-with-parameters>Step 2: Build with Parameters</h3><ol><li><p>Click <strong>Build with Parameters</strong> in the left sidebar</p></li><li><p>Review the default parameters:</p><ul><li><strong>SMARTAGENT_ZIP_PATH</strong>: Verify path is correct</li><li><strong>REMOTE_INSTALL_DIR</strong>: <code>/opt/appdynamics/appdsmartagent</code></li><li><strong>APPD_USER</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>APPD_GROUP</strong>: <code>ubuntu</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li><li><strong>AGENT_NAME</strong>: <code>smartagent</code></li><li><strong>LOG_LEVEL</strong>: <code>DEBUG</code></li></ul></li><li><p>Adjust parameters if needed</p></li><li><p>Click <strong>Build</strong></p></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>For your first deployment, consider testing on a single host by creating a separate credential with just one IP address.</p></div></details><h3 id=step-3-monitor-pipeline-execution>Step 3: Monitor Pipeline Execution</h3><p>After clicking <strong>Build</strong>, you&rsquo;ll see:</p><ol><li><strong>Build added to queue</strong> - Build number appears in Build History</li><li><strong>Click build number</strong> (e.g., #1) to view details</li><li><strong>Click Console Output</strong> to view real-time logs</li></ol><h3 id=step-4-understanding-console-output>Step 4: Understanding Console Output</h3><p>The console output shows each stage of the deployment:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Started by user admin
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on aws-vpc-agent in /home/ubuntu/jenkins/workspace/Deploy-Smart-Agent
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Preparation)
[Pipeline] script
[Pipeline] {
Preparing Smart Agent deployment to 3 hosts: 172.31.1.243, 172.31.1.48, 172.31.1.5
...</code></pre></div><p>Key stages you&rsquo;ll see:</p><ol><li>âœ… <strong>Preparation</strong> - Loads and validates host list</li><li>âœ… <strong>Extract Smart Agent</strong> - Extracts ZIP file</li><li>âœ… <strong>Configure Smart Agent</strong> - Creates config.ini</li><li>âœ… <strong>Deploy to Remote Hosts</strong> - Deploys to each host</li><li>âœ… <strong>Verify Installation</strong> - Checks Smart Agent status</li></ol><h3 id=step-5-review-results>Step 5: Review Results</h3><p>After completion, you&rsquo;ll see:</p><p><strong>Success:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Smart Agent successfully deployed to all hosts
Finished: SUCCESS</code></pre></div><p><strong>Partial Success:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Deployment completed with some failures
Failed hosts: 172.31.1.48
Finished: UNSTABLE</code></pre></div><p><strong>Failure:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Smart Agent deployment failed. Check logs for details.
Finished: FAILURE</code></pre></div><h2 id=verifying-installation>Verifying Installation</h2><p>After a successful deployment, verify Smart Agent is running on target hosts.</p><h3 id=check-smart-agent-status>Check Smart Agent Status</h3><p>SSH into a target host and check the status:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target host</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Navigate to installation directory</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=list-installed-agents>List Installed Agents</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>No agents currently installed
(Use install-machine-agent or install-db-agent pipelines to add agents)</code></pre></div><h3 id=check-logs>Check Logs</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>tail -f log.log</span></span></code></pre></div><p>Look for successful connection messages to the AppDynamics controller.</p><h3 id=verify-in-appdynamics-controller>Verify in AppDynamics Controller</h3><ol><li>Log into your AppDynamics Controller</li><li>Navigate to <strong>Servers â†’ Servers</strong></li><li>Look for your newly deployed hosts</li><li>Verify Smart Agent is reporting metrics</li></ol><h2 id=installing-additional-agents>Installing Additional Agents</h2><p>Once Smart Agent is deployed, you can install specific agent types using the other pipelines.</p><h3 id=install-machine-agent>Install Machine Agent</h3><ol><li>Go to <strong>Install-Machine-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Review parameters:<ul><li><strong>AGENT_NAME</strong>: <code>machine-agent</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li></ul></li><li>Click <strong>Build</strong></li></ol><p>The pipeline will SSH to each host and execute:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl install --component machine</span></span></code></pre></div><h3 id=install-database-agent>Install Database Agent</h3><ol><li>Go to <strong>Install-Database-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Configure database connection parameters</li><li>Click <strong>Build</strong></li></ol><p>The pipeline will install and configure the Database Agent on all hosts.</p><h3 id=verify-agent-installation>Verify Agent Installation</h3><p>After installing agents, verify they appear:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Installed agents:
- machine-agent (running)
- db-agent (running)</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios</h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment</h3><p><strong>Workflow:</strong></p><ol><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li><li>Wait for completion and verify</li><li>Run <strong>Install-Machine-Agent</strong> if needed</li><li>Run <strong>Install-Database-Agent</strong> if needed</li></ol><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent</h3><p>To update Smart Agent to a new version:</p><ol><li>Download new Smart Agent ZIP</li><li>Place it in Jenkins at configured path</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline again</li></ol><p>The pipeline automatically:</p><ul><li>Stops existing Smart Agent</li><li>Removes old files</li><li>Installs new version</li><li>Restarts Smart Agent</li></ul><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts</h3><p>To add Smart Agent to new hosts:</p><ol><li>Update the <code>deployment-hosts</code> credential in Jenkins</li><li>Add new IP addresses (one per line)</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><p>The pipeline will:</p><ul><li>Skip already-configured hosts (if idempotent)</li><li>Deploy to new hosts only</li></ul><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal</h3><p>To completely remove Smart Agent from all hosts:</p><ol><li>Go to <strong>Cleanup-All-Agents</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li><strong>Check</strong> the <code>CONFIRM_CLEANUP</code> checkbox</li><li>Click <strong>Build</strong></li></ol><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>This will permanently delete <code>/opt/appdynamics/appdsmartagent</code> directory from all hosts. This action cannot be undone.</p></div></details><h2 id=troubleshooting-deployments>Troubleshooting Deployments</h2><h3 id=build-fails-at-preparation-stage>Build Fails at Preparation Stage</h3><p><strong>Symptom</strong>: Pipeline fails when loading host list</p><p><strong>Cause</strong>: Missing or incorrect <code>deployment-hosts</code> credential</p><p><strong>Solution</strong>:</p><ol><li>Go to <strong>Manage Jenkins â†’ Credentials</strong></li><li>Verify <code>deployment-hosts</code> credential exists</li><li>Check format (one IP per line, no commas)</li><li>Ensure no trailing spaces</li></ol><h3 id=ssh-connection-failures>SSH Connection Failures</h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Check security group:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify Jenkins agent can reach target</span>
</span></span><span class=line><span class=cl>ping 172.31.1.243
</span></span><span class=line><span class=cl>telnet 172.31.1.243 <span class=m>22</span></span></span></code></pre></div><p><strong>Test SSH manually:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Verify SSH key:</strong></p><ol><li>Ensure <code>ssh-private-key</code> credential is correct</li><li>Verify public key is in <code>~/.ssh/authorized_keys</code> on target hosts</li></ol><h3 id=smart-agent-fails-to-start>Smart Agent Fails to Start</h3><p><strong>Symptom</strong>: Deployment completes but Smart Agent not running</p><p><strong>Solution</strong>:</p><p><strong>Check logs on target host:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>cat log.log</span></span></code></pre></div><p><strong>Common issues:</strong></p><ul><li><strong>Invalid access key</strong>: Check <code>account-access-key</code> credential</li><li><strong>Network connectivity</strong>: Verify outbound HTTPS to Controller</li><li><strong>Permission issues</strong>: Ensure APPD_USER has correct permissions</li></ul><h3 id=partial-deployment-success>Partial Deployment Success</h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li><strong>Check Console Output</strong> - Identifies which hosts failed</li><li><strong>Investigate failed hosts</strong> - SSH and test manually</li><li><strong>Re-run pipeline</strong> - Jenkins tracks which hosts need retry</li></ol><h2 id=pipeline-best-practices>Pipeline Best Practices</h2><h3 id=1-test-on-single-host-first>1. Test on Single Host First</h3><p>Always test new configurations on a single host before deploying to production:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>1. Create deployment-hosts-test credential (1 IP)
2. Create test pipeline pointing to this credential
3. Verify success
4. Deploy to full host list</code></pre></div><h3 id=2-use-descriptive-build-descriptions>2. Use Descriptive Build Descriptions</h3><p>After triggering a build, add a description:</p><ol><li>Go to build page</li><li>Click <strong>Edit Build Information</strong></li><li>Add description: &ldquo;Production deployment - Q4 2024&rdquo;</li></ol><h3 id=3-monitor-build-history>3. Monitor Build History</h3><p>Regularly check build history for patterns:</p><ul><li>Failed builds</li><li>Duration trends</li><li>Error messages</li></ul><h3 id=4-schedule-deployments-during-maintenance-windows>4. Schedule Deployments During Maintenance Windows</h3><p>For production systems:</p><ul><li>Use Jenkins scheduled builds</li><li>Deploy during low-traffic periods</li><li>Have rollback plan ready</li></ul><h3 id=5-keep-credentials-updated>5. Keep Credentials Updated</h3><ul><li>Rotate SSH keys quarterly</li><li>Update host lists as infrastructure changes</li><li>Verify AppDynamics access key validity</li></ul><h2 id=next-steps>Next Steps</h2><p>Now let&rsquo;s explore scaling and operational considerations for large deployments.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=github-actions-automation>GitHub Actions Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction</h2><p>This workshop demonstrates how to use <strong>GitHub Actions</strong> with a self-hosted runner to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage GitHub Actions workflows for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-4ee39de7233327f40549c1b5080312d0 class=lightbox-link><img alt="GitHub Actions and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4ee39de7233327f40549c1b5080312d0><img alt="GitHub Actions and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white"></a> <a href=#R-image-19083a07ce392116a88e9f650d11a1d6 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-19083a07ce392116a88e9f650d11a1d6><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn</h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts using GitHub Actions workflows</li><li><strong>Configure GitHub secrets and variables</strong> for secure credentials management</li><li><strong>Set up a self-hosted runner</strong> in your AWS VPC</li><li><strong>Implement automatic batching</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, uninstall, stop, and cleanup</li><li><strong>Monitor workflow execution</strong> and troubleshoot issues</li></ul><h2 id=key-features>Key Features</h2><ul><li>ğŸš€ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>ğŸ”„ <strong>Complete Lifecycle Management</strong> - 11 workflows covering all agent operations</li><li>ğŸ—ï¸ <strong>Infrastructure as Code</strong> - All workflows version-controlled in GitHub</li><li>ğŸ” <strong>Secure</strong> - SSH keys stored as GitHub secrets, private VPC networking</li><li>ğŸ“ˆ <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>ğŸ›ï¸ <strong>Self-hosted Runner</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview</h2><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GitHub Actions-based Deployment                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Developer â”€â”€â–¶ GitHub.com â”€â”€â–¶ Self-hosted Runner (AWS VPC)     â”‚
â”‚                                          â”‚                       â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 1 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 2 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 3 (SSH)      â”‚
â”‚                                          â””â”€â”€â–¶ Host N (SSH)      â”‚
â”‚                                                                  â”‚
â”‚  All hosts send metrics â”€â”€â–¶ AppDynamics Controller             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workshop-components>Workshop Components</h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the GitHub Actions workflow architecture</li><li><strong>GitHub Setup</strong> - Configuring secrets, variables, and self-hosted runners</li><li><strong>Workflow Creation</strong> - Understanding and using the 11 available workflows</li><li><strong>Deployment Execution</strong> - Running workflows and verifying installations</li></ol><h2 id=available-workflows>Available Workflows</h2><p>This solution includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management:</p><table><thead><tr><th>Category</th><th>Workflows</th><th>Description</th></tr></thead><tbody><tr><td><strong>Deployment</strong></td><td>1</td><td>Deploy and start Smart Agent</td></tr><tr><td><strong>Agent Installation</strong></td><td>4</td><td>Install Node, Machine, DB, and Java agents</td></tr><tr><td><strong>Agent Uninstallation</strong></td><td>4</td><td>Uninstall specific agent types</td></tr><tr><td><strong>Agent Management</strong></td><td>2</td><td>Stop/clean and complete cleanup</td></tr></tbody></table><p>All workflows support automatic batching for scalability!</p><h2 id=prerequisites>Prerequisites</h2><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>Self-hosted GitHub Actions runner in the same VPC</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li></ul><h2 id=github-repository>GitHub Repository</h2><p>All workflow code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></strong></p><p>The repository includes:</p><ul><li>11 complete workflow YAML files</li><li>Detailed setup documentation</li><li>Architecture diagrams</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (â—€ï¸) and right (â–¶ï¸) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of GitHub Actions Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture</h2><p>The GitHub Actions-based Smart Agent deployment system uses a self-hosted runner within your AWS VPC to orchestrate deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture</h3><pre class="mermaid align-center">graph TB
    subgraph Internet
        GH[GitHub.com&lt;br/&gt;Repository &amp; Actions]
        User[Developer&lt;br/&gt;Local Machine]
    end

    subgraph AWS[&#34;AWS VPC (172.31.0.0/16)&#34;]
        subgraph SG[&#34;Security Group: smartagent-lab&#34;]
            Runner[Self-hosted Runner&lt;br/&gt;EC2 Instance&lt;br/&gt;172.31.1.x]
            
            subgraph Targets[&#34;Target Hosts&#34;]
                T1[Target Host 1&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.243]
                T2[Target Host 2&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.48]
                T3[Target Host 3&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.5]
            end
        end
    end

    User --&gt;|git push| GH
    GH &lt;--&gt;|HTTPS:443&lt;br/&gt;Poll for jobs| Runner
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T1
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T2
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T3

    style GH fill:#24292e,color:#fff
    style User fill:#0366d6,color:#fff
    style Runner fill:#28a745,color:#fff
    style T1 fill:#ffd33d,color:#000
    style T2 fill:#ffd33d,color:#000
    style T3 fill:#ffd33d,color:#000</pre><h2 id=network-architecture>Network Architecture</h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The self-hosted runner communicates with target hosts via private IPs.</p><h3 id=vpc-layout>VPC Layout</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AWS VPC (172.31.0.0/16)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Security Group: smartagent-lab                   â”‚  â”‚
â”‚  â”‚  Rules:                                                   â”‚  â”‚
â”‚  â”‚  - Inbound: SSH (22) from same security group            â”‚  â”‚
â”‚  â”‚  - Outbound: HTTPS (443) to GitHub                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Self-hosted â”‚    â”‚  Target EC2  â”‚    â”‚  Target EC2  â”‚       â”‚
â”‚  â”‚   Runner    â”‚    â”‚              â”‚    â”‚              â”‚       â”‚
â”‚  â”‚             â”‚â”€â”€â”€â–¶â”‚ Private IP:  â”‚    â”‚ Private IP:  â”‚       â”‚
â”‚  â”‚ 172.31.1.x  â”‚SSH â”‚ 172.31.1.243 â”‚    â”‚ 172.31.1.48  â”‚       â”‚
â”‚  â”‚             â”‚â”€â”€â”€â–¶â”‚              â”‚    â”‚              â”‚       â”‚
â”‚  â”‚ Polls GitHubâ”‚    â”‚ Ubuntu 20.04 â”‚    â”‚ Ubuntu 20.04 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AppDynamics    â”‚
                    â”‚    Controller    â”‚
                    â”‚  (SaaS/On-Prem)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workflow-execution-flow>Workflow Execution Flow</h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence</h3><pre class="mermaid align-center">sequenceDiagram
    participant Dev as Developer
    participant GH as GitHub
    participant Runner as Self-hosted Runner
    participant Target as Target Host(s)

    Dev-&gt;&gt;GH: 1. Push code or trigger workflow
    GH-&gt;&gt;GH: 2. Workflow event triggered
    Runner-&gt;&gt;GH: 3. Poll for jobs (HTTPS:443)
    GH-&gt;&gt;Runner: 4. Assign job to runner
    Runner-&gt;&gt;Runner: 5. Execute prepare job&lt;br/&gt;(load host matrix)
    
    par Parallel Execution
        Runner-&gt;&gt;Target: 6a. SSH to Host 1&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6b. SSH to Host 2&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6c. SSH to Host 3&lt;br/&gt;(port 22)
    end
    
    Target-&gt;&gt;Target: 7. Execute commands&lt;br/&gt;(install/uninstall/stop/clean)
    Target--&gt;&gt;Runner: 8. Return results
    Runner--&gt;&gt;GH: 9. Report job status
    GH--&gt;&gt;Dev: 10. Notify completion</pre><h2 id=component-details>Component Details</h2><h3 id=github-repository>GitHub Repository</h3><p><strong>Stores:</strong></p><ul><li>11 workflow YAML files</li><li>Smart Agent installation package</li><li>Configuration file (config.ini)</li></ul><p><strong>Secrets:</strong></p><ul><li>SSH private key</li></ul><p><strong>Variables:</strong></p><ul><li>Host list (DEPLOYMENT_HOSTS)</li><li>User/group settings (optional)</li></ul><h3 id=self-hosted-runner>Self-hosted Runner</h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Poll GitHub for workflow jobs</li><li>Execute workflow steps</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Parallel execution</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Ubuntu/Amazon Linux 2</li><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>SSH key authentication</li></ul><p><strong>Access:</strong></p><ul><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>Uses SSH key authentication</li></ul><h3 id=target-hosts>Target Hosts</h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
â””â”€â”€ appdsmartagent/
    â”œâ”€â”€ smartagentctl
    â”œâ”€â”€ config.ini
    â””â”€â”€ agents/
        â”œâ”€â”€ machine/
        â”œâ”€â”€ java/
        â”œâ”€â”€ node/
        â””â”€â”€ db/</code></pre></div><h2 id=security-architecture>Security Architecture</h2><h3 id=security-layers>Security Layers</h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for hosts</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>SSH (22) within same security group only</li><li>HTTPS (443) outbound for GitHub access</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in GitHub Secrets</li><li>Temporary key files on runner</li><li>Keys removed after workflow</li></ul></li><li><p><strong>GitHub Security</strong></p><ul><li>Repository access controls</li><li>Branch protection rules</li><li>Secrets never exposed in logs</li><li>Environment variable masking</li></ul></li><li><p><strong>Network Security</strong></p><ul><li>Private IP communication only</li><li>No public IPs required</li><li>Runner in same VPC as targets</li></ul></li></ol><h2 id=workflow-categories>Workflow Categories</h2><p>The system includes 11 workflows organized into 4 categories:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>GitHub Actions Workflows (11 Total)
â”œâ”€â”€ Deployment (1 workflow)
â”‚   â””â”€â”€ Deploy Smart Agent (Batched)
â”œâ”€â”€ Agent Installation (4 workflows)
â”‚   â”œâ”€â”€ Install Node Agent (Batched)
â”‚   â”œâ”€â”€ Install Machine Agent (Batched)
â”‚   â”œâ”€â”€ Install DB Agent (Batched)
â”‚   â””â”€â”€ Install Java Agent (Batched)
â”œâ”€â”€ Agent Uninstallation (4 workflows)
â”‚   â”œâ”€â”€ Uninstall Node Agent (Batched)
â”‚   â”œâ”€â”€ Uninstall Machine Agent (Batched)
â”‚   â”œâ”€â”€ Uninstall DB Agent (Batched)
â”‚   â””â”€â”€ Uninstall Java Agent (Batched)
â””â”€â”€ Smart Agent Management (2 workflows)
    â”œâ”€â”€ Stop and Clean Smart Agent (Batched)
    â””â”€â”€ Cleanup All Agents (Batched)</code></pre></div><h2 id=batching-strategy>Batching Strategy</h2><p>All workflows use automatic batching to support deployments at any scale.</p><h3 id=how-batching-works>How Batching Works</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Host 002: 172.31.1.2      â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   BATCH 1        â”‚
    ...                              â”‚   Hosts 1-256    â”‚ â”€â”€â”€â”
Host 256: 172.31.1.256               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 257: 172.31.1.257               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
Host 258: 172.31.1.258   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   BATCH 2        â”‚    â”‚ SEQUENTIAL
    ...                              â”‚   Hosts 257-512  â”‚    â”‚ EXECUTION
Host 512: 172.31.1.512               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 513: 172.31.1.513               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    ...                              â”‚   BATCH 3        â”‚    â”‚
Host 768: 172.31.1.768   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 513-768  â”‚ â”€â”€â”€â”˜
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Host 769: 172.31.1.769               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    ...                              â”‚   BATCH 4        â”‚
Host 1000: 172.31.2.232  â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 769-1000 â”‚
                                     â”‚   (232 hosts)    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WITHIN EACH BATCH:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All hosts deploy in PARALLEL          â”‚
â”‚                                        â”‚
â”‚  Host 1 â”€â”€â”                           â”‚
â”‚  Host 2 â”€â”€â”¤                           â”‚
â”‚  Host 3 â”€â”€â”¼â”€â–¶ Background processes (&amp;)â”‚
â”‚    ...    â”‚                           â”‚
â”‚  Host 256â”€â”˜   â””â”€â–¶ wait command        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h3 id=why-sequential-batches>Why Sequential Batches?</h3><p><strong>Resource Management:</strong></p><ul><li>Prevents overwhelming the self-hosted runner</li><li>Each batch opens 256 parallel SSH connections</li><li>Sequential processing ensures stable performance</li></ul><p><strong>Configurable:</strong></p><ul><li>Default batch size: 256 (GitHub Actions matrix limit)</li><li>Adjustable via workflow input for smaller batches</li><li>Balance between speed and resource usage</li></ul><h3 id=scaling-characteristics>Scaling Characteristics</h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts â†’ 1 batch â†’ ~2 minutes</li><li>100 hosts â†’ 1 batch â†’ ~3 minutes</li><li>500 hosts â†’ 2 batches â†’ ~6 minutes</li><li>1,000 hosts â†’ 4 batches â†’ ~12 minutes</li><li>5,000 hosts â†’ 20 batches â†’ ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Runner resources (CPU/memory)</li></ul><h2 id=next-steps>Next Steps</h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up GitHub and configuring the self-hosted runner.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=github-setup>GitHub Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites</h2><p>Before you begin, ensure you have:</p><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>SSH key pair (PEM file) for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=fork-or-clone-the-repository>Fork or Clone the Repository</h2><p>First, get access to the GitHub Actions lab repository:</p><p><strong>Repository URL</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Option 1: Fork the repository via GitHub UI</span>
</span></span><span class=line><span class=cl><span class=c1># Go to https://github.com/chambear2809/github-actions-lab</span>
</span></span><span class=line><span class=cl><span class=c1># Click &#34;Fork&#34; button</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Option 2: Clone directly (for testing)</span>
</span></span><span class=line><span class=cl>git clone https://github.com/chambear2809/github-actions-lab.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> github-actions-lab</span></span></code></pre></div><h2 id=configure-self-hosted-runner>Configure Self-hosted Runner</h2><p>Your self-hosted runner must be deployed in the same AWS VPC as your target EC2 instances.</p><h3 id=install-runner-on-ec2-instance>Install Runner on EC2 Instance</h3><ol><li><p><strong>Launch EC2 instance</strong> in your VPC (Ubuntu or Amazon Linux 2)</p></li><li><p><strong>Navigate to runner settings</strong> in your forked repository:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Settings â†’ Actions â†’ Runners â†’ New self-hosted runner</code></pre></div></li><li><p><strong>SSH into the runner instance</strong> and execute installation commands:</p></li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create runner directory</span>
</span></span><span class=line><span class=cl>mkdir actions-runner <span class=o>&amp;&amp;</span> <span class=nb>cd</span> actions-runner
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Download runner (check GitHub for latest version)</span>
</span></span><span class=line><span class=cl>curl -o actions-runner-linux-x64-2.311.0.tar.gz -L <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract</span>
</span></span><span class=line><span class=cl>tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configure (use token from GitHub UI)</span>
</span></span><span class=line><span class=cl>./config.sh --url https://github.com/YOUR_USERNAME/github-actions-lab --token YOUR_TOKEN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install as service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh start</span></span></code></pre></div><h3 id=verify-runner-status>Verify Runner Status</h3><p>Check that the runner appears as <strong>&ldquo;Idle&rdquo;</strong> (green) in:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Settings â†’ Actions â†’ Runners</code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The runner must remain online and idle to pick up workflow jobs. If it shows offline, check the service status: <code>sudo ./svc.sh status</code></p></div></details><h2 id=configure-github-secrets>Configure GitHub Secrets</h2><p>Navigate to: <strong>Settings â†’ Secrets and variables â†’ Actions â†’ Secrets</strong></p><h3 id=ssh-private-key-secret>SSH Private Key Secret</h3><p>This secret contains your SSH private key for accessing target hosts.</p><ol><li>Click <strong>&ldquo;New repository secret&rdquo;</strong></li><li><strong>Name</strong>: <code>SSH_PRIVATE_KEY</code></li><li><strong>Value</strong>: Paste the contents of your PEM file</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View your PEM file</span>
</span></span><span class=line><span class=cl>cat /path/to/your-key.pem</span></span></code></pre></div><p>Example format:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><ol start=4><li>Click <strong>&ldquo;Add secret&rdquo;</strong></li></ol><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Never commit SSH keys to your repository! Always use GitHub Secrets for sensitive credentials.</p></div></details><h2 id=configure-github-variables>Configure GitHub Variables</h2><p>Navigate to: <strong>Settings â†’ Secrets and variables â†’ Actions â†’ Variables</strong></p><h3 id=deployment-hosts-variable-required>Deployment Hosts Variable (Required)</h3><p>This variable contains the list of all target hosts where Smart Agent should be deployed.</p><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>DEPLOYMENT_HOSTS</code></li><li><strong>Value</strong>: Enter your target host IPs (one per line)</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><ol start=4><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h3 id=optional-variables>Optional Variables</h3><p>These variables are optional and used for Smart Agent service user/group configuration:</p><h4 id=smartagent_user>SMARTAGENT_USER</h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_USER</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h4 id=smartagent_group>SMARTAGENT_GROUP</h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_GROUP</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h2 id=network-configuration>Network Configuration</h2><p>For the lab setup with all EC2 instances in the same VPC and security group:</p><h3 id=security-group-rules>Security Group Rules</h3><p><strong>Inbound Rules:</strong></p><ul><li>SSH (port 22) from same security group (source: same SG)</li></ul><p><strong>Outbound Rules:</strong></p><ul><li>HTTPS (port 443) to 0.0.0.0/0 (for GitHub API access)</li><li>SSH (port 22) to same security group (for target access)</li></ul><h3 id=network-best-practices>Network Best Practices</h3><ul><li>âœ… Use private IP addresses (172.31.x.x) for <code>DEPLOYMENT_HOSTS</code></li><li>âœ… Runner and targets in same security group</li><li>âœ… No public IPs needed on target hosts</li><li>âœ… Runner communicates via private network</li><li>âœ… Outbound HTTPS required for GitHub polling</li></ul><h2 id=verify-configuration>Verify Configuration</h2><p>Before running workflows, verify your setup:</p><h3 id=1-check-runner-status>1. Check Runner Status</h3><ol><li>Go to <strong>Settings â†’ Actions â†’ Runners</strong></li><li>Verify runner shows as &ldquo;Idle&rdquo; (green)</li><li>Check &ldquo;Last seen&rdquo; timestamp is recent</li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity</h3><p>SSH from your runner instance to a target host:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/your-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p>If successful, you should get a shell prompt on the target host.</p><h3 id=3-verify-secrets-and-variables>3. Verify Secrets and Variables</h3><ol><li>Go to <strong>Settings â†’ Secrets and variables â†’ Actions</strong></li><li>Confirm secrets tab shows: <code>SSH_PRIVATE_KEY</code></li><li>Confirm variables tab shows: <code>DEPLOYMENT_HOSTS</code></li></ol><h3 id=4-check-repository-access>4. Check Repository Access</h3><p>Ensure the runner can access the repository:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance, as the runner user</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/actions-runner
</span></span><span class=line><span class=cl>./run.sh  <span class=c1># Test run (Ctrl+C to stop)</span></span></span></code></pre></div><p>You should see: &ldquo;Listening for Jobs&rdquo;</p><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues</h2><h3 id=runner-not-picking-up-jobs>Runner Not Picking Up Jobs</h3><p><strong>Symptom</strong>: Workflows stay in &ldquo;queued&rdquo; state</p><p><strong>Solution</strong>:</p><ul><li>Check runner status: <code>sudo systemctl status actions.runner.*</code></li><li>Restart runner: <code>sudo ./svc.sh restart</code></li><li>Verify outbound HTTPS (443) connectivity to GitHub</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures</h3><p><strong>Symptom</strong>: Workflows fail with &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo;</p><p><strong>Solution</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from runner</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from runner</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on targets</span></span></span></code></pre></div><h3 id=invalid-characters-in-hostname>Invalid Characters in Hostname</h3><p><strong>Symptom</strong>: Error: &ldquo;hostname contains invalid characters&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Edit <code>DEPLOYMENT_HOSTS</code> variable</li><li>Ensure no trailing spaces</li><li>Use Unix line endings (LF, not CRLF)</li><li>One IP per line, no extra characters</li></ul><h3 id=secrets-not-found>Secrets Not Found</h3><p><strong>Symptom</strong>: Error: &ldquo;Secret SSH_PRIVATE_KEY not found&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Verify secret name exactly matches: <code>SSH_PRIVATE_KEY</code></li><li>Check secret is in repository secrets (not environment secrets)</li><li>Ensure you have repository admin access</li></ul><h2 id=security-best-practices>Security Best Practices</h2><p>Follow these best practices for secure operations:</p><ul><li>âœ… Use GitHub Secrets for all private keys</li><li>âœ… Rotate SSH keys regularly</li><li>âœ… Keep runner in private VPC subnet</li><li>âœ… Restrict runner security group to minimal access</li><li>âœ… Update runner software regularly</li><li>âœ… Enable branch protection rules</li><li>âœ… Use separate keys for different environments</li><li>âœ… Enable audit logging for repository access</li></ul><h2 id=next-steps>Next Steps</h2><p>With GitHub configured and the runner set up, you&rsquo;re ready to explore the available workflows and execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=understanding-workflows>Understanding Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=available-workflows>Available Workflows</h2><p>The GitHub Actions lab includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management. All workflow files are available in the repository at <code>.github/workflows/</code>.</p><p><strong>Repository</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><h2 id=workflow-categories>Workflow Categories</h2><h3 id=1-deployment-1-workflow>1. Deployment (1 workflow)</h3><h4 id=deploy-smart-agent-batched>Deploy Smart Agent (Batched)</h4><ul><li><strong>File</strong>: <code>deploy-agent-batched.yml</code></li><li><strong>Purpose</strong>: Installs Smart Agent and starts the service</li><li><strong>Features</strong>:<ul><li>Automatic batching (default: 256 hosts per batch)</li><li>Configurable batch size</li><li>Parallel deployment within each batch</li><li>Sequential batch processing</li></ul></li><li><strong>Inputs</strong>:<ul><li><code>batch_size</code>: Number of hosts per batch (default: 256)</li></ul></li><li><strong>Trigger</strong>: Manual only (<code>workflow_dispatch</code>)</li></ul><h3 id=2-agent-installation-4-workflows>2. Agent Installation (4 workflows)</h3><p>All installation workflows use <code>smartagentctl</code> to install specific agent types:</p><h4 id=install-node-agent-batched>Install Node Agent (Batched)</h4><ul><li><strong>File</strong>: <code>install-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-machine-agent-batched>Install Machine Agent (Batched)</h4><ul><li><strong>File</strong>: <code>install-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-db-agent-batched>Install DB Agent (Batched)</h4><ul><li><strong>File</strong>: <code>install-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-java-agent-batched>Install Java Agent (Batched)</h4><ul><li><strong>File</strong>: <code>install-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=3-agent-uninstallation-4-workflows>3. Agent Uninstallation (4 workflows)</h3><p>All uninstallation workflows use <code>smartagentctl</code> to remove specific agent types:</p><h4 id=uninstall-node-agent-batched>Uninstall Node Agent (Batched)</h4><ul><li><strong>File</strong>: <code>uninstall-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-machine-agent-batched>Uninstall Machine Agent (Batched)</h4><ul><li><strong>File</strong>: <code>uninstall-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-db-agent-batched>Uninstall DB Agent (Batched)</h4><ul><li><strong>File</strong>: <code>uninstall-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-java-agent-batched>Uninstall Java Agent (Batched)</h4><ul><li><strong>File</strong>: <code>uninstall-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=4-smart-agent-management-2-workflows>4. Smart Agent Management (2 workflows)</h3><h4 id=stop-and-clean-smart-agent-batched>Stop and Clean Smart Agent (Batched)</h4><ul><li><strong>File</strong>: <code>stop-clean-smartagent-batched.yml</code></li><li><strong>Commands</strong>:<ul><li><code>smartagentctl stop</code></li><li><code>smartagentctl clean</code></li></ul></li><li><strong>Purpose</strong>: Stops the Smart Agent service and purges all data</li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=cleanup-all-agents-batched>Cleanup All Agents (Batched)</h4><ul><li><strong>File</strong>: <code>cleanup-appdynamics.yml</code></li><li><strong>Command</strong>: <code>sudo rm -rf /opt/appdynamics</code></li><li><strong>Purpose</strong>: Completely removes the /opt/appdynamics directory</li><li><strong>Batched</strong>: Yes (configurable)</li><li><strong>Warning</strong>: This permanently deletes all AppDynamics components</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>The &ldquo;Cleanup All Agents&rdquo; workflow permanently deletes <code>/opt/appdynamics</code>. This action cannot be undone. Use with caution!</p></div></details><h2 id=workflow-structure>Workflow Structure</h2><p>All batched workflows follow a consistent two-job structure:</p><h3 id=job-1-prepare>Job 1: Prepare</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>prepare</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>batches</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.create-batches.outputs.batches }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Load hosts and create batches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        # Load DEPLOYMENT_HOSTS variable
</span></span></span><span class=line><span class=cl><span class=sd>        # Split into batches of N hosts
</span></span></span><span class=line><span class=cl><span class=sd>        # Output as JSON array</span></span></span></code></pre></div><p><strong>Purpose</strong>: Loads target hosts from GitHub variables and creates batch matrix</p><h3 id=job-2-deployinstalluninstall>Job 2: Deploy/Install/Uninstall</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>prepare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>batch</span><span class=p>:</span><span class=w> </span><span class=l>${{ fromJson(needs.prepare.outputs.batches) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup SSH key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Execute operation on all hosts in batch (parallel)</span></span></span></code></pre></div><p><strong>Purpose</strong>: Runs in parallel for each batch, executing the specific operation on all hosts within the batch</p><h2 id=batching-behavior>Batching Behavior</h2><h3 id=how-it-works>How It Works</h3><ol><li><strong>Prepare Job</strong> loads <code>DEPLOYMENT_HOSTS</code> and splits into batches</li><li><strong>Deploy Job</strong> creates one matrix entry per batch</li><li><strong>Batches process sequentially</strong> to avoid overwhelming the runner</li><li><strong>Within each batch</strong>, all hosts deploy in parallel using background processes</li></ol><h3 id=configurable-batch-size>Configurable Batch Size</h3><p>All workflows accept a <code>batch_size</code> input (default: 256):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via GitHub CLI</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Via GitHub UI</span>
</span></span><span class=line><span class=cl>Actions â†’ Select workflow â†’ Run workflow â†’ Set batch_size</span></span></code></pre></div><h3 id=examples>Examples</h3><ul><li><strong>100 hosts, batch_size=256</strong>: 1 batch, ~3 minutes</li><li><strong>500 hosts, batch_size=256</strong>: 2 batches, ~6 minutes</li><li><strong>1,000 hosts, batch_size=128</strong>: 8 batches, ~16 minutes</li><li><strong>5,000 hosts, batch_size=256</strong>: 20 batches, ~60 minutes</li></ul><h2 id=workflow-execution-order>Workflow Execution Order</h2><h3 id=typical-deployment-sequence>Typical Deployment Sequence</h3><ol><li><strong>Deploy Smart Agent</strong> - Initial deployment</li><li><strong>Install Machine Agent</strong> - Install specific agents as needed</li><li><strong>Install DB Agent</strong> - Install database monitoring</li><li>(Use other install workflows as needed)</li></ol><h3 id=maintenanceupdate-sequence>Maintenance/Update Sequence</h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services and clean data</li><li><strong>Deploy Smart Agent</strong> - Redeploy with updated version</li><li><strong>Install agents again</strong> - Reinstall required agents</li></ol><h3 id=complete-removal-sequence>Complete Removal Sequence</h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services</li><li><strong>Cleanup All Agents</strong> - Remove /opt/appdynamics directory</li></ol><h2 id=viewing-workflow-code>Viewing Workflow Code</h2><p>You can view the complete workflow YAML files in the repository:</p><p><strong>Main deployment workflow:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml rel=external>https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml</a></p><p><strong>All workflows:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows rel=external>https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows</a></p><h2 id=workflow-features>Workflow Features</h2><h3 id=built-in-error-handling>Built-in Error Handling</h3><ul><li>Per-host error tracking</li><li>Failed host reporting</li><li>Batch-level failure handling</li><li>Always-executed summary</li></ul><h3 id=parallel-execution>Parallel Execution</h3><ul><li>All hosts within a batch deploy simultaneously</li><li>Uses SSH background processes (<code>&</code>)</li><li>Wait command ensures all complete</li><li>Maximum parallelism within resource limits</li></ul><h3 id=security>Security</h3><ul><li>SSH keys never exposed in logs</li><li>Credentials bound as environment variables</li><li>Strict host key checking disabled for automation</li><li>Keys removed after workflow completion</li></ul><h2 id=next-steps>Next Steps</h2><p>Now that you understand the available workflows, let&rsquo;s execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=running-workflows>Running Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=triggering-workflows>Triggering Workflows</h2><p>All workflows are configured with <code>workflow_dispatch</code>, meaning they must be triggered manually. There are two main ways to run workflows:</p><ol><li><strong>GitHub UI</strong> - Visual interface, easiest for most users</li><li><strong>GitHub CLI</strong> - Command-line interface, great for automation</li></ol><h2 id=method-1-github-ui>Method 1: GitHub UI</h2><h3 id=step-1-navigate-to-actions-tab>Step 1: Navigate to Actions Tab</h3><ol><li>Go to your forked repository on GitHub</li><li>Click the <strong>Actions</strong> tab at the top</li></ol><h3 id=step-2-select-workflow>Step 2: Select Workflow</h3><p>On the left sidebar, you&rsquo;ll see all available workflows:</p><ul><li>Deploy Smart Agent</li><li>Install Node Agent (Batched)</li><li>Install Machine Agent (Batched)</li><li>Install DB Agent (Batched)</li><li>Install Java Agent (Batched)</li><li>Uninstall Node Agent (Batched)</li><li>Uninstall Machine Agent (Batched)</li><li>Uninstall DB Agent (Batched)</li><li>Uninstall Java Agent (Batched)</li><li>Stop and Clean Smart Agent (Batched)</li><li>Cleanup All Agents</li></ul><p>Click on the workflow you want to run.</p><h3 id=step-3-run-workflow>Step 3: Run Workflow</h3><ol><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button (top right)</li><li>Select branch: <strong>main</strong></li><li>(Optional) Adjust <strong>batch_size</strong> if desired</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button</li></ol><h3 id=step-4-monitor-execution>Step 4: Monitor Execution</h3><ol><li>The workflow will appear in the list below</li><li>Click on the workflow run to view details</li><li>Watch progress in real-time</li><li>Click on job names to see detailed logs</li></ol><h2 id=method-2-github-cli>Method 2: GitHub CLI</h2><h3 id=install-github-cli>Install GitHub CLI</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># macOS</span>
</span></span><span class=line><span class=cl>brew install gh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Linux</span>
</span></span><span class=line><span class=cl>curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg <span class=p>|</span> sudo dd <span class=nv>of</span><span class=o>=</span>/usr/share/keyrings/githubcli-archive-keyring.gpg
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [arch=</span><span class=k>$(</span>dpkg --print-architecture<span class=k>)</span><span class=s2> signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/github-cli.list &gt; /dev/null
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install gh</span></span></code></pre></div><h3 id=authenticate>Authenticate</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh auth login</span></span></code></pre></div><h3 id=run-workflows>Run Workflows</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Deploy Smart Agent (default batch size)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Deploy with custom batch size</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Uninstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Uninstall Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Complete cleanup</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=monitor-workflows>Monitor Workflows</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List recent workflow runs</span>
</span></span><span class=line><span class=cl>gh run list --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View specific run</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Watch run in progress</span>
</span></span><span class=line><span class=cl>gh run watch RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View failed logs</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --log-failed --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=first-deployment-walkthrough>First Deployment Walkthrough</h2><p>Let&rsquo;s walk through a complete first-time deployment:</p><h3 id=step-1-verify-setup>Step 1: Verify Setup</h3><p>Before running any workflows, ensure:</p><ul><li>âœ… Self-hosted runner shows &ldquo;Idle&rdquo; (green)</li><li>âœ… <code>SSH_PRIVATE_KEY</code> secret is configured</li><li>âœ… <code>DEPLOYMENT_HOSTS</code> variable contains your target IPs</li><li>âœ… Network connectivity verified</li></ul><h3 id=step-2-deploy-smart-agent>Step 2: Deploy Smart Agent</h3><p><strong>Via GitHub UI:</strong></p><ol><li>Go to <strong>Actions</strong> tab</li><li>Select <strong>&ldquo;Deploy Smart Agent&rdquo;</strong></li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li><li>Accept default batch_size (256)</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li></ol><p><strong>Via GitHub CLI:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=step-3-monitor-execution>Step 3: Monitor Execution</h3><p>The workflow will show:</p><ol><li><strong>Prepare</strong> job - Creating batch matrix</li><li><strong>Deploy</strong> job (one per batch) - Deploying to hosts</li></ol><p>Click on each job to view detailed logs.</p><h3 id=step-4-verify-installation>Step 4: Verify Installation</h3><p>SSH into a target host and check:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=step-5-install-additional-agents-optional>Step 5: Install Additional Agents (Optional)</h3><p>If needed, install specific agent types:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Install Machine Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install DB Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=understanding-workflow-output>Understanding Workflow Output</h2><h3 id=prepare-job-output>Prepare Job Output</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Loading deployment hosts...
Total hosts: 1000
Batch size: 256
Creating 4 batches...
Batch 1: Hosts 1-256
Batch 2: Hosts 257-512
Batch 3: Hosts 513-768
Batch 4: Hosts 769-1000</code></pre></div><h3 id=deploy-job-output-per-batch>Deploy Job Output (per batch)</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Processing batch 1 of 4
Deploying to 256 hosts in parallel...
Host 172.31.1.1: SUCCESS
Host 172.31.1.2: SUCCESS
Host 172.31.1.3: SUCCESS
...
Batch 1 complete: 256/256 succeeded</code></pre></div><h3 id=completion-summary>Completion Summary</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Deployment Summary:
Total hosts: 1000
Successful: 998
Failed: 2
Failed hosts:
  - 172.31.1.48
  - 172.31.1.125</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios</h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Deploy Smart Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Verify deployment</span>
</span></span><span class=line><span class=cl><span class=c1># SSH to a host and check status</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Install agents as needed</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean current installation</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Update Smart Agent ZIP in repository</span>
</span></span><span class=line><span class=cl><span class=c1># (Push new version to repository)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Deploy new version</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Reinstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Update DEPLOYMENT_HOSTS variable in GitHub</span>
</span></span><span class=line><span class=cl><span class=c1># Add new IPs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Deploy to all hosts (will skip existing ones with idempotent logic)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span></span></span></code></pre></div><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Complete removal</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span></span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>&ldquo;Cleanup All Agents&rdquo; permanently deletes <code>/opt/appdynamics</code>. This cannot be undone!</p></div></details><h2 id=troubleshooting-workflow-failures>Troubleshooting Workflow Failures</h2><h3 id=workflow-stays-in-queued>Workflow Stays in &ldquo;Queued&rdquo;</h3><p><strong>Symptom</strong>: Workflow doesn&rsquo;t start</p><p><strong>Cause</strong>: Runner not available or offline</p><p><strong>Solution</strong>:</p><ol><li>Check runner status: Settings â†’ Actions â†’ Runners</li><li>Verify runner shows &ldquo;Idle&rdquo; (green)</li><li>Restart runner if needed: <code>sudo ./svc.sh restart</code></li></ol><h3 id=ssh-connection-failures>SSH Connection Failures</h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Test SSH manually:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Check security groups:</strong></p><ul><li>Verify SSH (22) allowed from runner</li><li>Confirm runner and targets in same security group</li></ul><p><strong>Verify SSH key:</strong></p><ul><li>Ensure <code>SSH_PRIVATE_KEY</code> secret matches actual key</li><li>Verify public key is on target hosts</li></ul><h3 id=partial-batch-failures>Partial Batch Failures</h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li>View workflow logs to identify failed hosts</li><li>SSH to failed hosts to investigate</li><li>Re-run workflow (idempotent - skips successful hosts)</li></ol><h3 id=batch-job-errors>Batch Job Errors</h3><p><strong>Symptom</strong>: &ldquo;Error splitting hosts into batches&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Check <code>DEPLOYMENT_HOSTS</code> variable format</li><li>Ensure one IP per line</li><li>No trailing spaces or special characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><h2 id=performance-tuning>Performance Tuning</h2><h3 id=adjusting-batch-size>Adjusting Batch Size</h3><p><strong>Smaller batches</strong> (fewer resources, slower):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span></span></span></code></pre></div><p><strong>Larger batches</strong> (more resources, faster):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>256</span></span></span></code></pre></div><h3 id=runner-resource-recommendations>Runner Resource Recommendations</h3><table><thead><tr><th>Hosts</th><th>CPU</th><th>Memory</th><th>Batch Size</th></tr></thead><tbody><tr><td>1-100</td><td>2 cores</td><td>4 GB</td><td>256</td></tr><tr><td>100-500</td><td>4 cores</td><td>8 GB</td><td>256</td></tr><tr><td>500-2000</td><td>8 cores</td><td>16 GB</td><td>256</td></tr><tr><td>2000+</td><td>16 cores</td><td>32 GB</td><td>256</td></tr></tbody></table><h2 id=best-practices>Best Practices</h2><ol><li><p><strong>Test on single host first</strong></p><ul><li>Create a test variable with 1 IP</li><li>Run workflow to verify</li><li>Then deploy to full list</li></ul></li><li><p><strong>Monitor workflow execution</strong></p><ul><li>Watch logs in real-time</li><li>Check for errors immediately</li><li>Verify on sample hosts</li></ul></li><li><p><strong>Use appropriate batch sizes</strong></p><ul><li>Default (256) works for most cases</li><li>Reduce if runner struggles</li><li>Monitor runner resource usage</li></ul></li><li><p><strong>Keep workflows up to date</strong></p><ul><li>Pull latest changes from repository</li><li>Test updates on non-production first</li><li>Document any customizations</li></ul></li><li><p><strong>Maintain runner health</strong></p><ul><li>Keep runner online and idle</li><li>Update runner software regularly</li><li>Monitor disk space and resources</li></ul></li></ol><h2 id=next-steps>Next Steps</h2><p>Congratulations! You&rsquo;ve successfully learned how to automate AppDynamics Smart Agent deployment using GitHub Actions. For more information, visit the <a href=https://github.com/chambear2809/github-actions-lab rel=external>complete repository</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=monitoring-as-code-with-smart-agent-and-ansible>Monitoring as Code with Smart Agent and Ansible</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction</h2><p>This guide details how to deploy the Cisco AppDynamics Smart Agent across multiple hosts using Ansible. By leveraging automation, you can ensure your monitoring infrastructure is consistent, robust, and easily scalable.</p><h2 id=architecture-overview>Architecture Overview</h2><p>The deployment architecture leverages an Ansible Control Node to orchestrate the installation and configuration of the Smart Agent on target hosts.</p><pre class="mermaid align-center">graph TD
    CN[Ansible Control Node&lt;br/&gt;(macOS/Linux)] --&gt;|SSH| H1[Target Host 1&lt;br/&gt;(Debian/RedHat)]
    CN --&gt;|SSH| H2[Target Host 2&lt;br/&gt;(Debian/RedHat)]
    CN --&gt;|SSH| H3[Target Host N&lt;br/&gt;(Debian/RedHat)]
    
    subgraph &#34;Target Host Configuration&#34;
        SA[Smart Agent Service]
        Config[config.ini]
        Package[Installer .deb/.rpm]
    end
    
    H1 --&gt; SA
    H2 --&gt; SA
    H3 --&gt; SA</pre><h3 id=key-components>Key Components</h3><ul><li><strong>Ansible Control Node</strong>: The machine where you run the playbooks (e.g., your laptop or a jump host).</li><li><strong>Target Hosts</strong>: The servers where the Smart Agent will be installed.</li><li><strong>Inventory</strong>: A list of target hosts and their connection details.</li><li><strong>Playbook</strong>: The YAML file defining the deployment tasks.</li></ul><h2 id=prerequisites>Prerequisites</h2><p>Before beginning, ensure you have:</p><ul><li>Access to the target hosts via SSH.</li><li>Sudo privileges on the target hosts.</li><li>The Smart Agent installation packages (<code>.deb</code> or <code>.rpm</code>) downloaded.</li><li>Account details for your AppDynamics Controller (Access Key, Account Name, URL).</li></ul><h2 id=step-1-install-ansible-on-macos>Step 1: Install Ansible on macOS</h2><p>To start, we need to install Ansible on your control node.</p><ol><li><p><strong>Install Homebrew</strong> (if not already installed):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/bin/bash -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></li><li><p><strong>Install Ansible</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install ansible</span></span></code></pre></div></li><li><p><strong>Verify the Installation</strong>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ansible --version</span></span></code></pre></div><p>You should see output indicating the installed version of Ansible.</p></li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Ansible Automation</h1><article class=default><header class=headline></header><h1 id=setup--configuration>Setup & Configuration</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=step-2-prepare-your-files-and-directory-structure>Step 2: Prepare Your Files and Directory Structure</h2><p>Create a project directory for your Ansible deployment. It should contain the following files:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ appdsmartagent_64_linux_24.6.0.2143.deb  # Debian package
</span></span><span class=line><span class=cl>â”œâ”€â”€ appdsmartagent_64_linux_24.6.0.2143.rpm  # RedHat package
</span></span><span class=line><span class=cl>â”œâ”€â”€ inventory-cloud.yaml                     # Inventory file
</span></span><span class=line><span class=cl>â”œâ”€â”€ smartagent.yaml                          # Playbook
</span></span><span class=line><span class=cl>â””â”€â”€ variables.yaml                           # Variables file</span></span></code></pre></div><p>Ensure you have downloaded the correct Smart Agent packages for your target environments.</p><h2 id=step-3-understanding-the-files>Step 3: Understanding the Files</h2><h3 id=1-inventory-files-inventory-cloudyaml>1. Inventory Files (<code>inventory-cloud.yaml</code>)</h3><p>The inventory file lists the hosts where the Smart Agent will be deployed. Define your hosts and authentication details here.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>all</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>54.173.1.106</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>ec2-user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_ssh_common_args</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;-o StrictHostKeyChecking=no&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>192.168.86.107</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>aleccham</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>54.82.95.69</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span></span></span></code></pre></div><p><strong>Action</strong>: Update the <code>ansible_host</code> IPs and credentials with your actual lab environment details.</p><h3 id=2-variables-file-variablesyaml>2. Variables File (<code>variables.yaml</code>)</h3><p>This file contains the configuration details for the Smart Agent.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>smart_agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>controller_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;CONTROLLER URL HERE, JUST THE BASE URL&#39;</span><span class=w> </span><span class=c># o11y.saas.appdynamics.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>account_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Account Name Here&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>account_access_key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;YOUR ACCESS KEY HERE&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>fm_service_port</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;443&#39;</span><span class=w> </span><span class=c># Use 443 or 8080 depending on your environment.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ssl</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>smart_agent_package_debian</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;appdsmartagent_64_linux_24.6.0.2143.deb&#39;</span><span class=w>  </span><span class=c># or the appropriate package name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>smart_agent_package_redhat</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;appdsmartagent_64_linux_24.6.0.2143.rpm&#39;</span><span class=w>  </span><span class=c># or the appropriate package name</span></span></span></code></pre></div><p><strong>Action</strong>: Update the <code>smart_agent</code> section with your specific controller URL, account name, and access key.</p><h3 id=3-playbook-smartagentyaml>3. Playbook (<code>smartagent.yaml</code>)</h3><p>The playbook orchestrates the deployment of the Cisco AppDynamics Distribution of OpenTelemetry Collector. Here is a concise summary of its tasks:</p><ol><li><strong>Prerequisites</strong>: Installs necessary packages (<code>yum-utils</code> for RedHat, <code>curl</code>/<code>apt-transport-https</code> for Debian).</li><li><strong>Directory Setup</strong>: Ensures the <code>/opt/appdynamics/appdsmartagent</code> directory exists.</li><li><strong>Configuration</strong>:<ul><li>Checks if <code>config.ini</code> exists.</li><li>Creates a default <code>config.ini</code> using values from <code>variables.yaml</code> if missing.</li><li>Updates configuration keys (AccountAccessKey, ControllerURL, etc.) using <code>lineinfile</code> to ensure settings are correct.</li></ul></li><li><strong>Package Management</strong>:<ul><li>Determines the correct package path based on OS family (Debian/RedHat).</li><li>Fails if the package is missing locally.</li><li>Copies the package to the target host&rsquo;s <code>/tmp</code> directory.</li><li>Installs the package using <code>dpkg</code> or <code>yum</code>.</li></ul></li><li><strong>Service Management</strong>: Restarts the <code>smartagent</code> service.</li><li><strong>Cleanup</strong>: Removes the temporary package file.</li></ol><p>The playbook uses <code>when: ansible_os_family == ...</code> conditionals to handle both RedHat and Debian systems within the same workflow.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment>Deployment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=step-4-execute-the-playbook>Step 4: Execute the Playbook</h2><p>To deploy the Smart Agent, run the following command from your project directory:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ansible-playbook -i inventory-cloud.yaml smartagent.yaml</span></span></code></pre></div><p>Replace <code>inventory-cloud.yaml</code> with the appropriate inventory file for your setup if you named it differently.</p><h3 id=verification>Verification</h3><p>After the playbook completes successfully, you can verify the deployment by logging into one of the target hosts and checking the service status:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl status smartagent</span></span></code></pre></div><p>You should see the service is active (running).</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article></section></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1769686352 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1769686352 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1769686352 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/clipboard/clipboard.min.js?1769686352 defer></script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1769686352 defer></script><script src=/observability-workshop/js/theme.min.js?1769686352 defer></script></body></html>