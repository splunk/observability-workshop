<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.0.0+97777ec5111409397e83f44eca496eea97697836"><meta name=description content="In this exercise you will review the queries dashboard, review the details of an expensive query, and troubleshoot an expensive query."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Monitor and Troubleshoot - Part 2 :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="In this exercise you will review the queries dashboard, review the details of an expensive query, and troubleshoot an expensive query."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Monitor and Troubleshoot - Part 2 :: Splunk Observability Cloud Workshops"><meta property="og:description" content="In this exercise you will review the queries dashboard, review the details of an expensive query, and troubleshoot an expensive query."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Monitor and Troubleshoot - Part 2 :: Splunk Observability Cloud Workshops"><meta itemprop=description content="In this exercise you will review the queries dashboard, review the details of an expensive query, and troubleshoot an expensive query."><meta itemprop=dateModified content="2025-10-13T09:48:15+01:00"><meta itemprop=wordCount content="697"><title>Monitor and Troubleshoot - Part 2 :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.html rel=canonical type=text/html title="Monitor and Troubleshoot - Part 2 :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v6.10/images/favicon.ico?1760445094 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v6.10/css/auto-complete/auto-complete.min.css?1760445094 rel=stylesheet><script src=/observability-workshop/v6.10/js/auto-complete/auto-complete.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/search-lunr.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/search.min.js?1760445094 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/v6.10/searchindex.en.js?1760445094"</script><script src=/observability-workshop/v6.10/js/lunr/lunr.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/lunr/lunr.stemmer.support.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/lunr/lunr.multi.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/lunr/lunr.en.min.js?1760445094 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/v6.10/fonts/fontawesome/css/fontawesome-all.min.css?1760445094 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v6.10/fonts/fontawesome/css/fontawesome-all.min.css?1760445094 rel=stylesheet></noscript><link href=/observability-workshop/v6.10/css/perfect-scrollbar/perfect-scrollbar.min.css?1760445094 rel=stylesheet><link href=/observability-workshop/v6.10/css/theme.min.css?1760445094 rel=stylesheet><link href=/observability-workshop/v6.10/css/format-print.min.css?1760445094 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.html",window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v6.10",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#review-the-queries-dashboard>Review the Queries Dashboard</a></li><li><a href=#review-the-details-of-an-expensive-query>Review the details of an expensive query</a></li><li><a href=#troubleshoot-an-expensive-query>Troubleshoot an expensive query</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.10/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.10/en/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Splunk4Ninjas AppDynamics</span><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/index.html><span itemprop=name>Database Monitoring</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Monitor and Troubleshoot - Part 2</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/index.html title="Monitor and Troubleshoot - Part 1 (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class=topbar-control><i class="fa-fw fas fa-chevron-right"></i></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=monitor-and-troubleshoot---part-2>Monitor and Troubleshoot - Part 2</h1><h2 id=review-the-queries-dashboard>Review the Queries Dashboard</h2><p>The Queries window displays the SQL statements and stored procedures that consume the most time in the database. You can compare the query weights to other metrics such as SQL wait times to determine SQL that requires tuning.</p><ol><li><strong>Queries</strong> tab: Displays the queries window.</li><li><strong>Top Queries</strong> dropdown: Displays the top 5, 10, 100 or 200 queries.</li><li><strong>Filter by Wait States</strong>: Enables you to choose wait states to filter the Query list.</li><li><strong>Group Similar</strong>: Groups together queries with the same syntax.</li><li>Click on the query that shows the largest <strong>Weight (%)</strong> used.</li><li><strong>View Query Details</strong>: Drills into the query details.</li></ol><p><a href=#R-image-f9aa09dba79e49cfab1d9927ff693593 class=lightbox-link><img alt="Queries Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9aa09dba79e49cfab1d9927ff693593><img alt="Queries Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-overview.png></a></p><h2 id=review-the-details-of-an-expensive-query>Review the details of an expensive query</h2><p>Once you have identified the statements on the Database Queries window that are spending the most amount of time in the database, you can dig down deeper for details that can help you tune those SQL statements. The database instance Query Details window displays details about the query selected on the Database Queries window.</p><ol><li><strong>Resource consumption over time</strong>: Displays the amount of time the query spent in the database using resources, the number of executions, and the amount of CPU time consumed.</li><li><strong>Wait states</strong>: The activities that contribute to the time it takes the database to service the selected SQL statement. The wait states consuming the most time may point to performance bottlenecks.</li><li><strong>Components Executing Similar Queries</strong>: Displays the Nodes that execute queries similar to this query.</li><li><strong>Business Transactions Executing Similar Queries</strong>: Displays the Java business transactions that execute queries similar to this query.</li></ol><p><a href=#R-image-b0a7dc5ea88b1acd6e0be1799a8ee060 class=lightbox-link><img alt="Expensive Query Details" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b0a7dc5ea88b1acd6e0be1799a8ee060><img alt="Expensive Query Details" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details.png></a></p><ol><li>Use the outer scroll bar on the right to scroll down.</li><li><strong>Clients</strong>: Displays the machines that executed the selected SQL statement and the percentage of the total time required to execute the statement performed by each machine.</li><li><strong>Sessions</strong>: Session of each database instance usage</li><li><strong>Query Active in Database</strong>: Displays the schemas that have been accessed by this SQL.</li><li><strong>Users</strong>: Displays the users that executed this query.</li><li><strong>Query Hashcode</strong>: Displays the unique ID for the query that allows the database server to more quickly locate this SQL statement in the cache.</li><li><strong>Query</strong>: Displays the entire syntax of the selected SQL statement. You can click the pencil icon in the top right corner of the Query card to edit the query name so that it is easy to identify.</li><li><strong>Execution Plan</strong>: Displays the the query execution plan window.</li></ol><p><a href=#R-image-0ac246abd2871382516aa886e0664a1b class=lightbox-link><img alt="Expensive Query Details2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ac246abd2871382516aa886e0664a1b><img alt="Expensive Query Details2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details2.png></a></p><h2 id=troubleshoot-an-expensive-query>Troubleshoot an expensive query</h2><p>The Database Query Execution Plan window can help you to determine the most efficient execution plan for your queries. Once youâ€™ve discovered a potentially problematic query, you can run the EXPLAIN PLAN statement to check the execution plan that the database created.</p><p>A queryâ€™s execution plan reveals whether the query is optimizing its use of indexes and executing efficiently. This information is useful for troubleshooting queries that are executing slowly.</p><ol><li>Click on the <strong>Execution Plan</strong> tab</li><li>Notice that the join type in the <strong>Type</strong> column is ALL for each table.</li><li>Hover over one of the join types to see the description for the join type.</li><li>Examine the entries in the <strong>Extras</strong> column.</li><li>Hover over each of the entries to see the description for the entry.</li></ol><p><a href=#R-image-51ca80831cfbb3119372a00040efb016 class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-execution-plan.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-51ca80831cfbb3119372a00040efb016><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-execution-plan.png></a></p><p>Letâ€™s investigate the indexes on the table using the Obect Browser next.</p><ol start=5><li>Click on the <strong>Object Browser</strong> option to view details of the schema for the tables</li><li>Click the <strong>Database</strong> option.</li><li>Click on the <strong>supercars</strong> schema to expand the list of tables.</li><li>Click on the <strong>CARS</strong> table to see the details of the table.</li><li>You can see that the CAR_ID column is defined as the primary key</li></ol><p><a href=#R-image-c2686bbb25bc5f70029cb153c244630b class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-object-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c2686bbb25bc5f70029cb153c244630b><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-object-browser.png></a></p><ol start=10><li>Use the outer scroll bar to scroll down the page.</li><li>Notice the primary key index defined in the table.</li></ol><p><a href=#R-image-d2e4fb4cf1d70bad7a9d5424307388bc class=lightbox-link><img alt="Troubleshoot Car Index" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-cars-index.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d2e4fb4cf1d70bad7a9d5424307388bc><img alt="Troubleshoot Car Index" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-cars-index.png></a></p><ol start=12><li>Click on the <strong>MANUFACTURER</strong> table to view its details.</li><li>Notice the <strong>MANUFACTURER_ID</strong> column is not defined as a primary key.</li><li>Scroll down the page to see there are no indexes defined for the table.</li></ol><p><a href=#R-image-957b4a278340f6a8cd86409a9a1440e3 class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-man-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-957b4a278340f6a8cd86409a9a1440e3><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/v6.10/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-man-table.png></a></p><p>The MANUFACTURER_ID column needs an index created for it to improve the performance of any queries on the table. If you analyzed a different query the underlying issue may be different but the most common issues shown in this lab come because the queries are either executing a join with the MANUFACTURER table or querying that table directly.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></div></main></div><script src=/observability-workshop/v6.10/js/clipboard/clipboard.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/perfect-scrollbar/perfect-scrollbar.min.js?1760445094 defer></script><script src=/observability-workshop/v6.10/js/theme.min.js?1760445094 defer></script></body></html>