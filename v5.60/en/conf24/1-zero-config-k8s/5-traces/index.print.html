<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.125.5"><meta name=generator content="Relearn 6.0.0+tip"><meta name=description content="As we have seen in the previous section, once you enable automatic discovery and configuration on your services, traces are sent to Splunk Observability Cloud.
With these traces, Splunk will automatically generate Service Maps and RED Metrics. These are the first steps in understanding the behavior of your services and how they interact with each other.
In this next section, we are going to examine the traces themselves and what information they provide to help you understand the behavior of your services all without touching your code."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="APM Features :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="As we have seen in the previous section, once you enable automatic discovery and configuration on your services, traces are sent to Splunk Observability Cloud.
With these traces, Splunk will automatically generate Service Maps and RED Metrics. These are the first steps in understanding the behavior of your services and how they interact with each other.
In this next section, we are going to examine the traces themselves and what information they provide to help you understand the behavior of your services all without touching your code."><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="APM Features :: Splunk Observability Cloud Workshops"><meta property="og:description" content="As we have seen in the previous section, once you enable automatic discovery and configuration on your services, traces are sent to Splunk Observability Cloud.
With these traces, Splunk will automatically generate Service Maps and RED Metrics. These are the first steps in understanding the behavior of your services and how they interact with each other.
In this next section, we are going to examine the traces themselves and what information they provide to help you understand the behavior of your services all without touching your code."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="APM Features :: Splunk Observability Cloud Workshops"><meta itemprop=description content="As we have seen in the previous section, once you enable automatic discovery and configuration on your services, traces are sent to Splunk Observability Cloud.
With these traces, Splunk will automatically generate Service Maps and RED Metrics. These are the first steps in understanding the behavior of your services and how they interact with each other.
In this next section, we are going to examine the traces themselves and what information they provide to help you understand the behavior of your services all without touching your code."><meta itemprop=dateModified content="2024-05-14T11:51:13+01:00"><meta itemprop=wordCount content="87"><title>APM Features :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/index.html rel=canonical type=text/html title="APM Features :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.60/images/favicon.ico?1717509221 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.60/css/fontawesome-all.min.css?1717509233 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.60/css/fontawesome-all.min.css?1717509233 rel=stylesheet></noscript><link href=/observability-workshop/v5.60/css/nucleus.css?1717509233 rel=stylesheet><link href=/observability-workshop/v5.60/css/auto-complete.css?1717509233 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.60/css/auto-complete.css?1717509233 rel=stylesheet></noscript><link href=/observability-workshop/v5.60/css/perfect-scrollbar.min.css?1717509233 rel=stylesheet><link href=/observability-workshop/v5.60/css/fonts.css?1717509233 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.60/css/fonts.css?1717509233 rel=stylesheet></noscript><link href=/observability-workshop/v5.60/css/theme.css?1717509233 rel=stylesheet><link href=/observability-workshop/v5.60/css/theme-splunk-light.css?1717509233 rel=stylesheet id=R-variant-style><link href=/observability-workshop/v5.60/css/chroma-relearn-light.css?1717509233 rel=stylesheet id=R-variant-chroma-style><link href=/observability-workshop/v5.60/css/variant.css?1717509233 rel=stylesheet><link href=/observability-workshop/v5.60/css/print.css?1717509233 rel=stylesheet media=print><link href=/observability-workshop/v5.60/css/format-print.css?1717509233 rel=stylesheet><script src=/observability-workshop/v5.60/js/variant.js?1717509233></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.60",window.index_js_url="/observability-workshop/v5.60/en/index.search.js",window.variants&&variants.init(["splunk-light","splunk-dark"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"eu0",rumAccessToken:"TR9BBfgYo7qJfqrfgqjoqA"})</script></script><style>:root{--MAIN-WIDTH-MAX:1000rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.60/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.60/en/conf24/index.html><span itemprop=name>.conf24 Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/index.html><span itemprop=name>PetClinic Kubernetes Workshop</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>5. APM Features</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/4-apm/3-section-break/index.html title="3. Section Break (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/1-service-map/index.html title="APM Service Map (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><h1 id=apm-features>APM Features</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>As we have seen in the previous section, once you enable <strong>automatic discovery and configuration</strong> on your services, traces are sent to <strong>Splunk Observability Cloud</strong>.</p><p>With these traces, Splunk will automatically generate <strong>Service Maps</strong> and <strong>RED Metrics</strong>. These are the first steps in understanding the behavior of your services and how they interact with each other.</p><p>In this next section, we are going to examine the traces themselves and what information they provide to help you understand the behavior of your services all without touching your code.</p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>rcastley</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 14, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of APM Features</h1><article class=default><header class=headline></header><h1 id=apm-service-map>APM Service Map</h1><p><a href=#R-image-f5a2c5ff4f7759aaf24ca092bfc41381 class=lightbox-link><img alt="apm map" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/1-service-map/../../images/zero-config-first-services-map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5a2c5ff4f7759aaf24ca092bfc41381><img alt="apm map" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/1-service-map/../../images/zero-config-first-services-map.png></a></p><p>The above map shows all the interactions between all of the services. The map may still be in an interim state as it will take the Petclinic Microservice application a few minutes to start up and fully synchronize. Reducing the time filter to a custom time of <strong>2 minutes</strong> will help. The initial startup-related errors (red dots) will eventually disappear.</p><p>Next, let&rsquo;s examine the metrics that are available for each service that is instrumented and visit the request, error, and duration (RED) metrics Dashboard</p><p>For this exercise we are going to use a common scenario you would use if the service operation was showing high latency, or errors for example.</p><p>Select (click) on the <strong>Customer Service</strong> in the Dependency map <strong>(1)</strong>, then make sure the <code>customers-service</code> is selected in the <strong>Services</strong> dropdown box <strong>(2)</strong>. Next, select <code>GET /Owners</code> from the Operations dropdown <strong>(3</strong>)**.</p><p>This should give you the workflow with a filter on <code>GET /owners</code> <strong>(1)</strong> as shown below.</p><p><a href=#R-image-cac580a4dc2b19a121f75c08a9c4b442 class=lightbox-link><img alt="select a trace" class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/1-service-map/../../images/select-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cac580a4dc2b19a121f75c08a9c4b442><img alt="select a trace" class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/1-service-map/../../images/select-workflow.png></a></p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>Pieter Hagen</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 31, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=apm-trace>APM Trace</h1><p>To pick a trace, select a line in the <code>Service Requests & Errors</code> chart <strong>(2)</strong>, when the dot appears click to get a list of sample traces:</p><p>Once you have the list of sample traces, click on the blue <strong>(3)</strong> Trace ID Link (make sure it has the same three services mentioned in the Service Column.)</p><p><a href=#R-image-0b813e8929ebe1f58225c84e6601015f class=lightbox-link><img alt=workflow-trace-pick class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/2-trace/../../images/selecting-a-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0b813e8929ebe1f58225c84e6601015f><img alt=workflow-trace-pick class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/2-trace/../../images/selecting-a-trace.png></a></p><p>This brings us the the Trace selected in the Waterfall view:</p><p>Here we find several sections:</p><ul><li>The actual Waterfall Pane <strong>(1)</strong>, where you see the trace and all the instrumented functions visible as spans, with their duration representation and order/relationship showing.</li><li>The Trace Info Pane <strong>(2)</strong>, by default, shows the selected Span information (highlighted with a box around the Span in the Waterfall Pane).</li><li>The Span Pane <strong>(3)</strong>, here you can find all the Tags that have been sent in the selected Span, You can scroll down to see all of them.</li><li>The process Pane, with tags related to the process that created the Span (scroll down to see as it is not in the screenshot).</li><li>The Trace Properties at the top of the right-hand pane by default is collapsed as shown.</li></ul><p><a href=#R-image-82b839e9f85d59d247872ec34c7644f3 class=lightbox-link><img alt=waterfall class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/2-trace/../../images/waterfall-view.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-82b839e9f85d59d247872ec34c7644f3><img alt=waterfall class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/2-trace/../../images/waterfall-view.png></a></p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>rcastley</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 16, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=apm-span>APM Span</h1><p>While we examine our spans, let&rsquo;s look at several features that you get out of the box without code modifications when using <strong>automatic discovery and configuration</strong> on top of tracing:</p><p>Due to the fact there are several different routes
First, in the Waterfall Pane, make sure the <code>customers-service:SELECT petclinic.owners</code> or similar span is selected as shown in the screenshot below:</p><p><a href=#R-image-cfb5e458f8ab1d92598575afd07fd1b0 class=lightbox-link><img alt=DB-query class="noborder lazy lightbox noshadow figure-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/3-spans/../../images/db-query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cfb5e458f8ab1d92598575afd07fd1b0><img alt=DB-query class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=/observability-workshop/v5.60/en/conf24/1-zero-config-k8s/5-traces/3-spans/../../images/db-query.png></a></p><ul><li>The basic latency information is shown as a bar for the instrumented function or call, in our example, it took 6.3 Milliseconds.</li><li>Several similar Spans <strong>(1)</strong>, are only visible if the span is repeated multiple times. In this case, there are 10 repeats in our example. (You can show/hide them all by clicking on the <code>10x</code> and all spans will show in order)</li><li><strong>Inferred Services</strong>: Calls made to external systems that are not instrumented, show up as a grey &lsquo;inferred&rsquo; span. The Inferred Service or span in our case here is a call to the Mysql Database <code>mysql:petclinic SELECT petclinic</code> <strong>(2)</strong> as shown above our selected span.</li><li><strong>Span Tags</strong>: In the Tag Pane, standard tags produced by the automatic discovery and configuration. In this case, the span is calling a Database, so it includes the <code>db.statement</code> tag <strong>(3)</strong>. This tag will hold the DB query statement and is used by the Database call performed during this span. This will be used by the DB-Query Performance feature. We look at DB-Query Performance in the next section.</li><li><strong>Always-on Profiling</strong>: <strong>IF</strong> the system is configured to and has captured Profiling data during a Span life cycle, it will show the number of Call Stacks captured in the Spans timeline (15 Call Stacks for the <code>customers-service:SELECT petclinic.owners</code> Span shown above).</li></ul><p>We will look at Profiling in the next section.</p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>rcastley</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 16, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=service-centric-view>Service Centric View</h1><p>Splunk APM provide <strong>Service Centric Views</strong> that provide engineers a deep understanding of service performance in one centralized view. Now, across every service, engineers can quickly identify errors or bottlenecks from a serviceâ€™s underlying infrastructure, pinpoint performance degradations from new deployments, and visualize the health of every third party dependency.</p><p>To see this dashboard for the <code>api-gateway</code>, make sure you have the <code>api-gateway</code> service selected in the Service Map, then click on the *<strong>View Service</strong> button in the top of the right-hand pane. This will bring you to the Service Centric View dashboard:</p><p>This view, which is available for each of your instrumented services, offers an overview of <strong>Service metrics</strong>, <strong>Runtime metrics</strong> and <strong>Infrastructure metrics</strong>.</p><p>You can select the *<em>Back</em> function of you browser to go back to the previous view.</p><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>Pieter Hagen</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 31, 2024</span></span></footer></article><article class=chapter><header class=headline></header><h1 id=5-section-break>5. Section Break</h1><footer class=footline><span class="badge cstyle tip badge-with-title"><span class=badge-title class=text-muted>Last Modified By
</span><span class=badge-content>Pieter Hagen</span>
</span>&nbsp;
<span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted><i class="fa-fw fas fa-calendar"></i>
</span><span class=badge-content>May 16, 2024</span></span></footer></article></section></div></main></div><script src=/observability-workshop/v5.60/js/clipboard.min.js?1717509233 defer></script><script src=/observability-workshop/v5.60/js/perfect-scrollbar.min.js?1717509233 defer></script><script src=/observability-workshop/v5.60/js/theme.js?1717509233 defer></script></body></html>