<!doctype html><html id=R-html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="Step 1: Add Helm Repositories Add the required Helm repositories:
# Add Isovalent Helm repository helm repo add isovalent https://helm.isovalent.com # Add Splunk OpenTelemetry Collector Helm repository helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart # Update Helm repositories helm repo update Step 2: Create EKS Cluster Configuration Create a file named cluster.yaml:"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="EKS Setup :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Step 1: Add Helm Repositories Add the required Helm repositories:
# Add Isovalent Helm repository helm repo add isovalent https://helm.isovalent.com # Add Splunk OpenTelemetry Collector Helm repository helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart # Update Helm repositories helm repo update Step 2: Create EKS Cluster Configuration Create a file named cluster.yaml:"><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="EKS Setup :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Step 1: Add Helm Repositories Add the required Helm repositories:
# Add Isovalent Helm repository helm repo add isovalent https://helm.isovalent.com # Add Splunk OpenTelemetry Collector Helm repository helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart # Update Helm repositories helm repo update Step 2: Create EKS Cluster Configuration Create a file named cluster.yaml:"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="EKS Setup :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Step 1: Add Helm Repositories Add the required Helm repositories:
# Add Isovalent Helm repository helm repo add isovalent https://helm.isovalent.com # Add Splunk OpenTelemetry Collector Helm repository helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart # Update Helm repositories helm repo update Step 2: Create EKS Cluster Configuration Create a file named cluster.yaml:"><meta itemprop=dateModified content="2025-11-26T23:39:11-05:00"><meta itemprop=wordCount content="301"><title>EKS Setup :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.html rel=canonical type=text/html title="EKS Setup :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770895853 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770895853 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770895853 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770895853 defer></script><script src=/observability-workshop/js/search.min.js?1770895853 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1770895853"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1770895853 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770895853 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770895853 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770895853 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770895853 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770895853 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/scenarios/isovalent-cilium-integration/3-eks-setup/index.html",window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#step-1-add-helm-repositories>Step 1: Add Helm Repositories</a></li><li><a href=#step-2-create-eks-cluster-configuration>Step 2: Create EKS Cluster Configuration</a></li><li><a href=#step-3-create-the-eks-cluster>Step 3: Create the EKS Cluster</a></li><li><a href=#step-4-get-kubernetes-api-server-endpoint>Step 4: Get Kubernetes API Server Endpoint</a></li><li><a href=#step-5-install-prometheus-crds>Step 5: Install Prometheus CRDs</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/scenarios/index.html><span itemprop=name>Scenarios</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/scenarios/isovalent-cilium-integration/index.html><span itemprop=name>Isovalent Splunk Observability Integration</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>EKS Setup</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/2-prerequisites/index.html title="Prerequisites (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/4-cilium-installation/index.html title="Cilium Installation (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable scenarios" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=eks-setup>EKS Setup</h1><h2 id=step-1-add-helm-repositories>Step 1: Add Helm Repositories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Add the required Helm repositories:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Add Isovalent Helm repository</span>
</span></span><span class=line><span class=cl>helm repo add isovalent https://helm.isovalent.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add Splunk OpenTelemetry Collector Helm repository</span>
</span></span><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update Helm repositories</span>
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><h2 id=step-2-create-eks-cluster-configuration>Step 2: Create EKS Cluster Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>cluster.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>eksctl.io/v1alpha5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterConfig</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>isovalent-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class=l>us-east-1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1.30&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>iam</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>withOIDC</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>addonsConfig</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>disableDefaultAddons</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>addons</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coredns</span></span></span></code></pre></div><p><strong>Key Configuration Details:</strong></p><ul><li><code>disableDefaultAddons: true</code> - Disables AWS VPC CNI and kube-proxy (Cilium will replace both)</li><li><code>withOIDC: true</code> - Enables IAM roles for service accounts (required for Cilium to manage ENIs)</li><li><code>coredns</code> addon is retained as it&rsquo;s needed for DNS resolution</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Why Disable Default Addons?</summary><div class=box-content><p>Cilium provides its own CNI implementation using eBPF, which is more performant than the default AWS VPC CNI. By disabling the defaults, we avoid conflicts and let Cilium handle all networking.</p></div></details><h2 id=step-3-create-the-eks-cluster>Step 3: Create the EKS Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create the cluster (this takes approximately 15-20 minutes):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>eksctl create cluster -f cluster.yaml</span></span></code></pre></div><p>Verify the cluster is created:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Update kubeconfig</span>
</span></span><span class=line><span class=cl>aws eks update-kubeconfig --name isovalent-demo --region us-east-1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check pods</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system</span></span></code></pre></div><p><strong>Expected Output:</strong></p><ul><li>CoreDNS pods will be in <code>Pending</code> state (this is normal - they&rsquo;re waiting for the CNI)</li><li>No worker nodes yet</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Note</summary><div class=box-content><p>Without a CNI plugin, pods cannot get IP addresses or network connectivity. CoreDNS will remain pending until Cilium is installed.</p></div></details><h2 id=step-4-get-kubernetes-api-server-endpoint>Step 4: Get Kubernetes API Server Endpoint<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You&rsquo;ll need this for the Cilium configuration:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws eks describe-cluster --name isovalent-demo --region us-east-1 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --query <span class=s1>&#39;cluster.endpoint&#39;</span> --output text</span></span></code></pre></div><p>Save this endpoint - you&rsquo;ll use it in the Cilium installation step.</p><h2 id=step-5-install-prometheus-crds>Step 5: Install Prometheus CRDs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Cilium uses Prometheus ServiceMonitor CRDs for metrics:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://github.com/prometheus-operator/prometheus-operator/releases/download/v0.68.0/stripped-down-crds.yaml</span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1>Next Steps</summary><div class=box-content><p>With the EKS cluster created, you&rsquo;re ready to install Cilium, Hubble, and Tetragon.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article></div></main></div><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770895853 defer></script><script src=/observability-workshop/js/theme.min.js?1770895853 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>