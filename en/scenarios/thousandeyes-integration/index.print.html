<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.2.0+9cac649a184a2967957ef9bbececf9402192846c"><meta name=description content="Deploy ThousandEyes Enterprise Agent in Kubernetes and integrate synthetic monitoring data with Splunk Observability Cloud for unified visibility across your infrastructure."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="ThousandEyes Integration with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Deploy ThousandEyes Enterprise Agent in Kubernetes and integrate synthetic monitoring data with Splunk Observability Cloud for unified visibility across your infrastructure."><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/scenarios/thousandeyes-integration/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="ThousandEyes Integration with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Deploy ThousandEyes Enterprise Agent in Kubernetes and integrate synthetic monitoring data with Splunk Observability Cloud for unified visibility across your infrastructure."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="ThousandEyes Integration with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Deploy ThousandEyes Enterprise Agent in Kubernetes and integrate synthetic monitoring data with Splunk Observability Cloud for unified visibility across your infrastructure."><meta itemprop=dateModified content="2025-11-12T12:50:30-05:00"><meta itemprop=wordCount content="638"><title>ThousandEyes Integration with Splunk Observability Cloud :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/scenarios/thousandeyes-integration/index.html rel=canonical type=text/html title="ThousandEyes Integration with Splunk Observability Cloud :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1769113953 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1769113953 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1769113953 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1769113953 defer></script><script src=/observability-workshop/js/search.min.js?1769113953 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1769113953"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1769113953 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1769113953 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1769113953 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1769113953 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769113953 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769113953 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1769113953 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1769113953 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1769113953 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/scenarios/thousandeyes-integration/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/en/scenarios/thousandeyes-integration/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#what-youll-learn>What You&rsquo;ll Learn</a></li><li><a href=#sections>Sections</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#benefits-of-integration>Benefits of Integration</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/scenarios/index.html><span itemprop=name>Scenarios</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>ThousandEyes Integration</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/thousandeyes-integration/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/6-summary/index.html title="Summary (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/thousandeyes-integration/1-overview/index.html title="Overview (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable scenarios" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=thousandeyes-integration-with-splunk-observability-cloud>ThousandEyes Integration with Splunk Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>90 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Alec Chamberlain</span></span><p>This workshop demonstrates integrating <strong>ThousandEyes with Splunk Observability Cloud</strong> to provide unified visibility across your synthetic monitoring and observability data.</p><h2 id=what-youll-learn>What You&rsquo;ll Learn</h2><p>By the end of this workshop, you will:</p><ul><li>Deploy a ThousandEyes Enterprise Agent as a containerized workload in Kubernetes</li><li>Integrate ThousandEyes metrics with Splunk Observability Cloud using OpenTelemetry</li><li>Create synthetic tests for internal Kubernetes services and external dependencies</li><li>Monitor test results in Splunk Observability Cloud dashboards</li><li>Correlate synthetic test data with APM traces and infrastructure metrics</li></ul><h2 id=sections>Sections</h2><ul><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/1-overview/index.html>Overview</a> - Understand ThousandEyes agent types and architecture</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/2-deployment/index.html>Deployment</a> - Deploy the Enterprise Agent in Kubernetes</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/3-splunk-integration/index.html>Splunk Integration</a> - Connect ThousandEyes to Splunk Observability Cloud</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html>Kubernetes Testing</a> - Monitor internal services and replicate AppDynamics test recommendations</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/5-troubleshooting/index.html>Troubleshooting</a> - Common issues and solutions</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>This integration enables you to correlate synthetic test results with real user monitoring (RUM), APM traces, and infrastructure metrics for comprehensive root cause analysis.</p></div></details><h2 id=prerequisites>Prerequisites</h2><ul><li>A Kubernetes cluster (v1.16+)</li><li>RBAC permissions to deploy resources in your chosen namespace</li><li>A ThousandEyes account with access to Enterprise Agent tokens</li><li>A Splunk Observability Cloud account with ingest token access</li></ul><h2 id=benefits-of-integration>Benefits of Integration</h2><p>By connecting ThousandEyes to Splunk Observability Cloud, you gain:</p><ul><li>üîó <strong>Unified visibility</strong>: Correlate synthetic test results with RUM, APM traces, and infrastructure metrics</li><li>üìä <strong>Enhanced dashboards</strong>: Visualize ThousandEyes data alongside your existing Splunk observability metrics</li><li>üö® <strong>Centralized alerting</strong>: Configure alerts based on ThousandEyes test results within Splunk</li><li>üîç <strong>Root cause analysis</strong>: Quickly identify if issues are network-related (ThousandEyes) or application-related (APM)</li><li>üìà <strong>Comprehensive analytics</strong>: Analyze synthetic monitoring trends with Splunk&rsquo;s powerful analytics engine</li></ul><div class="children children-type-card children-sort-"><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-e3d29c32e4f58d165f5e4149341fed27><div class=card-content><div class=card-title id=R-card-e3d29c32e4f58d165f5e4149341fed27><a href=/observability-workshop/en/scenarios/thousandeyes-integration/1-overview/index.html><ol><li>Overview</li></ol></a></div><div class=card-content-text>ThousandEyes Agent Types Enterprise Agents Enterprise Agents are software-based monitoring agents that you deploy within your own infrastructure. They provide:
Inside-out visibility: Monitor and test from your internal network to external services Customizable placement: Deploy where your users and applications are Full test capabilities: HTTP, network, DNS, voice, and other test types Persistent monitoring: Continuously running agents that execute scheduled tests In this workshop, we‚Äôre deploying an Enterprise Agent as a containerized workload inside a Kubernetes cluster.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-b0c7590c05aac2c502049bb4ddbb711c><div class=card-content><div class=card-title id=R-card-b0c7590c05aac2c502049bb4ddbb711c><a href=/observability-workshop/en/scenarios/thousandeyes-integration/2-deployment/index.html><ol start=2><li>Deployment</li></ol></a></div><div class=card-content-text><p>This section guides you through deploying the ThousandEyes Enterprise Agent in your Kubernetes cluster.
Components The deployment consists of two files:</p><ol><li>Secrets File (credentialsSecret.yaml) Contains your ThousandEyes agent token (base64 encoded). This secret is referenced by the deployment to authenticate the agent with ThousandEyes Cloud.
apiVersion: v1 kind: Secret metadata: name: te-creds type: Opaque data: TEAGENT_ACCOUNT_TOKEN: &lt;base64-encoded-token> 2. Deployment Manifest (thousandEyesDeploy.yaml) Defines the Enterprise Agent pod configuration with the following key settings:</li></ol></div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-1a36215aa50292792c52dfc2c35d631b><div class=card-content><div class=card-title id=R-card-1a36215aa50292792c52dfc2c35d631b><a href=/observability-workshop/en/scenarios/thousandeyes-integration/3-splunk-integration/index.html><ol start=3><li>Splunk Integration</li></ol></a></div><div class=card-content-text>About Splunk Observability Cloud Splunk Observability Cloud is a real-time observability platform purpose-built for monitoring metrics, traces, and logs at scale. It ingests OpenTelemetry data and provides advanced dashboards and analytics to help teams detect and resolve performance issues quickly. This section explains how to integrate ThousandEyes data with Splunk Observability Cloud using OpenTelemetry.
Step 1: Create a Splunk Observability Cloud Access Token To send data to Splunk Observability Cloud, you need an access token. Follow these steps:</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-8f8010e598196fbbcd28ccd5325a75d4><div class=card-content><div class=card-title id=R-card-8f8010e598196fbbcd28ccd5325a75d4><a href=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html><ol start=4><li>Kubernetes Testing</li></ol></a></div><div class=card-content-text>Replicating AppDynamics Test Recommendations AppDynamics offers a feature called ‚ÄúTest Recommendations‚Äù that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloud‚Äôs unified view.
Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-2a33176d7a5a4b36555586b70c39b6ba><div class=card-content><div class=card-title id=R-card-2a33176d7a5a4b36555586b70c39b6ba><a href=/observability-workshop/en/scenarios/thousandeyes-integration/5-troubleshooting/index.html><ol start=5><li>Troubleshooting</li></ol></a></div><div class=card-content-text><p>This section covers common issues you may encounter when deploying and using the ThousandEyes Enterprise Agent in Kubernetes.
Test Failing with DNS Resolution Error If your tests are failing with DNS resolution errors, verify DNS from within the ThousandEyes pod:</p><h1 id=verify-dns-resolution-from-within-the-pod-kubectl-exec--n-te-demo--it-pod-name--nslookup-api-gatewayproductionsvcclusterlocal--check-coredns-logs-kubectl-logs--n-kube-system--l-k8s-appkube-dns-common-causes>Verify DNS resolution from within the pod kubectl exec -n te-demo -it &lt;pod-name> &ndash; nslookup api-gateway.production.svc.cluster.local # Check CoreDNS logs kubectl logs -n kube-system -l k8s-app=kube-dns Common causes:</h1></div></div></article></li></ul></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of ThousandEyes Integration</h1><article class=default><header class=headline></header><h1 id=overview>Overview</h1><h2 id=thousandeyes-agent-types>ThousandEyes Agent Types</h2><h3 id=enterprise-agents>Enterprise Agents</h3><p>Enterprise Agents are software-based monitoring agents that you deploy within your own infrastructure. They provide:</p><ul><li><strong>Inside-out visibility</strong>: Monitor and test from your internal network to external services</li><li><strong>Customizable placement</strong>: Deploy where your users and applications are</li><li><strong>Full test capabilities</strong>: HTTP, network, DNS, voice, and other test types</li><li><strong>Persistent monitoring</strong>: Continuously running agents that execute scheduled tests</li></ul><p>In this workshop, we&rsquo;re deploying an Enterprise Agent as a containerized workload inside a Kubernetes cluster.</p><h3 id=endpoint-agents>Endpoint Agents</h3><p>Endpoint Agents are lightweight agents installed on end-user devices (laptops, desktops) that provide:</p><ul><li><strong>Real user perspective</strong>: Monitor from actual user endpoints</li><li><strong>Browser-based monitoring</strong>: Capture real user experience metrics</li><li><strong>Session data</strong>: Detailed insights into application performance from the user&rsquo;s viewpoint</li></ul><p>This workshop focuses on <strong>Enterprise Agent</strong> deployment only.</p><h2 id=architecture>Architecture</h2><pre class="mermaid align-center">graph LR
    subgraph k8s[&#34;Kubernetes Cluster&#34;]
        secret[&#34;Secret&lt;br/&gt;te-creds&#34;]
        agent[&#34;ThousandEyes&lt;br/&gt;Enterprise Agent&lt;br/&gt;Pod&#34;]
        
        subgraph apps[&#34;Application Pods&#34;]
            api[&#34;API Gateway&lt;br/&gt;Pod&#34;]
            payment[&#34;Payment Service&lt;br/&gt;Pod&#34;]
            auth[&#34;Auth Service&lt;br/&gt;Pod&#34;]
        end
        
        subgraph svcs[&#34;Services&#34;]
            api_svc[&#34;api-gateway&lt;br/&gt;Service&#34;]
            payment_svc[&#34;payment-svc&lt;br/&gt;Service&#34;]
            auth_svc[&#34;auth-service&lt;br/&gt;Service&#34;]
        end
        
        api_svc --&gt; api
        payment_svc --&gt; payment
        auth_svc --&gt; auth
        
        secret -.-&gt; agent
        agent --&gt;|&#34;HTTP Tests&#34;| api_svc
        agent --&gt;|&#34;HTTP Tests&#34;| payment_svc
        agent --&gt;|&#34;HTTP Tests&#34;| auth_svc
    end
    
    external[&#34;External&lt;br/&gt;Services&#34;]
    
    agent --&gt; external
    
    subgraph te[&#34;ThousandEyes Platform&#34;]
        te_cloud[&#34;ThousandEyes&lt;br/&gt;Cloud&#34;]
        te_api[&#34;API&lt;br/&gt;v7/stream&#34;]
        te_cloud &lt;--&gt; te_api
    end
    
    agent --&gt;|&#34;Test Results&#34;| te_cloud
    
    subgraph splunk[&#34;Splunk Observability Cloud&#34;]
        otel[&#34;OpenTelemetry&lt;br/&gt;Collector&#34;]
        metrics[&#34;Metrics&#34;]
        dashboards[&#34;Dashboards&#34;]
        apm[&#34;APM/RUM&#34;]
        alerts[&#34;Alerts&#34;]
        
        otel --&gt; metrics
        otel --&gt; dashboards
        metrics --&gt; apm
        dashboards --&gt; alerts
    end
    
    te_cloud --&gt;|&#34;OTel/HTTP&#34;| otel
    
    user[&#34;DevOps/SRE&lt;br/&gt;Team&#34;]
    user -.-&gt; te_cloud
    user -.-&gt; dashboards
    user -.-&gt; agent
    
    style k8s fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    style apps fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style svcs fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style agent fill:#ffeb3b,stroke:#f57c00,stroke-width:2px
    style secret fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style api fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style payment fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style auth fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style api_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style payment_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style auth_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style external fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style te fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style te_cloud fill:#ffecb3,stroke:#f57f17,stroke-width:2px
    style te_api fill:#ffe082,stroke:#f57f17,stroke-width:2px
    style splunk fill:#ff6e40,stroke:#d84315,stroke-width:2px
    style otel fill:#ff8a65,stroke:#d84315,stroke-width:2px
    style metrics fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style dashboards fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style apm fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style alerts fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style user fill:#b2dfdb,stroke:#00695c,stroke-width:2px</pre><h2 id=architecture-components>Architecture Components</h2><h3 id=1-kubernetes-cluster>1. Kubernetes Cluster</h3><ul><li><strong>Secret (te-creds)</strong>: Stores the base64-encoded <code>TEAGENT_ACCOUNT_TOKEN</code> for authentication</li><li><strong>ThousandEyes Enterprise Agent Pod</strong>:<ul><li>Container image: <code>thousandeyes/enterprise-agent:latest</code></li><li>Hostname: <code>te-agent-aleccham</code> (customizable)</li><li>Security capabilities: <code>NET_ADMIN</code>, <code>SYS_ADMIN</code> (required for network testing)</li><li>Memory allocation: 2GB request, 3.5GB limit</li><li>Network mode: IPv4 only (configured via <code>TEAGENT_INET: "4"</code> environment variable)</li><li>Image pull policy: <code>Always</code> (ensures latest image is pulled)</li><li>Init command: <code>/sbin/my_init</code> (required for proper agent initialization)</li></ul></li><li><strong>Internal Services</strong>: Kubernetes workloads including REST APIs, microservices, databases, and gRPC services</li></ul><h3 id=2-test-targets>2. Test Targets</h3><ul><li><strong>Internal Services</strong>: Monitor services within the Kubernetes cluster</li><li><strong>External Services</strong>: Test external dependencies such as:<ul><li>Payment gateways (Stripe, PayPal)</li><li>Third-party APIs</li><li>SaaS applications</li><li>CDN endpoints</li><li>Public websites</li></ul></li></ul><h3 id=3-thousandeyes-platform>3. ThousandEyes Platform</h3><ul><li><strong>ThousandEyes Cloud</strong>: Central platform for:<ul><li>Agent registration and management</li><li>Test configuration and scheduling</li><li>Metrics collection and aggregation</li><li>Built-in alerting engine</li></ul></li><li><strong>ThousandEyes API</strong>: RESTful API (v7/stream endpoint) for programmatic access</li></ul><h3 id=4-test-types--metrics>4. Test Types & Metrics</h3><p>The Enterprise Agent performs:</p><ul><li><strong>HTTP/HTTPS tests</strong>: Web page availability, response times, status codes</li><li><strong>DNS tests</strong>: Resolution time, record validation</li><li><strong>Network layer tests</strong>: Latency, packet loss, path visualization</li><li><strong>Voice/RTP tests</strong>: Quality metrics for voice traffic</li></ul><p>Metrics collected include:</p><ul><li>HTTP server availability (%)</li><li>Throughput (bytes/s)</li><li>Request duration (seconds)</li><li>Page load completion (%)</li><li>Error codes and failure reasons</li></ul><h3 id=5-splunk-observability-cloud-integration>5. Splunk Observability Cloud Integration</h3><ul><li><strong>OpenTelemetry Collector</strong>:<ul><li>Endpoint: <code>https://ingest.{realm}.signalfx.com/v2/datapoint/otlp</code></li><li>Protocol: HTTP or gRPC</li><li>Format: Protobuf</li><li>Authentication: <code>X-SF-Token</code> header</li><li>Signal type: Metrics (OpenTelemetry v2)</li></ul></li><li><strong>Observability Features</strong>:<ul><li><strong>Metrics</strong>: Real-time visualization of ThousandEyes data</li><li><strong>Dashboards</strong>: Pre-built ThousandEyes dashboard with unified views</li><li><strong>APM/RUM Integration</strong>: Correlate synthetic tests with application traces and real user monitoring</li><li><strong>Alerting</strong>: Centralized alert management with correlation rules</li></ul></li></ul><h3 id=6-data-flow>6. Data Flow</h3><ol><li>Agent authenticates using token from Kubernetes Secret</li><li>Agent runs scheduled tests against internal and external targets</li><li>Test results sent to ThousandEyes Cloud</li><li>ThousandEyes streams metrics to Splunk via OpenTelemetry protocol</li><li>Splunk ingests, processes, and visualizes data in dashboards</li><li>DevOps/SRE teams monitor dashboards and respond to alerts</li></ol><h2 id=testing-capabilities>Testing Capabilities</h2><p>With this deployment, you can:</p><ul><li>‚úÖ <strong>Test internal services</strong>: Monitor Kubernetes services, APIs, and microservices from within the cluster</li><li>‚úÖ <strong>Test external dependencies</strong>: Validate connectivity to payment gateways, third-party APIs, and SaaS platforms</li><li>‚úÖ <strong>Measure performance</strong>: Capture latency, availability, and performance metrics from your cluster&rsquo;s perspective</li><li>‚úÖ <strong>Troubleshoot issues</strong>: Identify whether problems originate from your infrastructure or external dependencies</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This is <strong>not an officially supported</strong> ThousandEyes agent deployment configuration. However, it has been tested and works very well in production-like environments.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment>Deployment</h1><p>This section guides you through deploying the ThousandEyes Enterprise Agent in your Kubernetes cluster.</p><h2 id=components>Components</h2><p>The deployment consists of two files:</p><h3 id=1-secrets-file-credentialssecretyaml>1. Secrets File (<code>credentialsSecret.yaml</code>)</h3><p>Contains your ThousandEyes agent token (base64 encoded). This secret is referenced by the deployment to authenticate the agent with ThousandEyes Cloud.</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TEAGENT_ACCOUNT_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>&lt;base64-encoded-token&gt;</span></span></span></code></pre></div><h3 id=2-deployment-manifest-thousandeyesdeployyaml>2. Deployment Manifest (<code>thousandEyesDeploy.yaml</code>)</h3><p>Defines the Enterprise Agent pod configuration with the following key settings:</p><ul><li><strong>Namespace</strong>: <code>te-demo</code> (customize as needed)</li><li><strong>Image</strong>: <code>thousandeyes/enterprise-agent:latest</code> from Docker Hub</li><li><strong>Hostname</strong>: <code>te-agent-aleccham</code> (appears in ThousandEyes dashboard)</li><li><strong>Capabilities</strong>: Requires <code>NET_ADMIN</code> and <code>SYS_ADMIN</code> for network testing</li><li><strong>Resources</strong>:<ul><li>Memory limit: 3584Mi</li><li>Memory request: 2000Mi</li></ul></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class=l>te-agent-aleccham</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;thousandeyes/enterprise-agent:latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>/sbin/my_init</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>capabilities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>add</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>NET_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>SYS_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_ACCOUNT_TOKEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>secretKeyRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_ACCOUNT_TOKEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_INET</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>3584Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>2000Mi</span></span></span></code></pre></div><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Important Notes</summary><div class=box-content><ul><li>The agent requires elevated privileges (<code>NET_ADMIN</code>, <code>SYS_ADMIN</code>) to perform network tests</li><li>The <code>TEAGENT_INET: "4"</code> environment variable forces IPv4-only mode (required for some network configurations)</li><li>The <code>/sbin/my_init</code> command is required for proper agent initialization and service management</li><li>The <code>imagePullPolicy: Always</code> ensures you always pull the latest image version</li><li>Adjust the <code>hostname</code> field to uniquely identify your agent in the ThousandEyes dashboard</li><li>Modify the <code>namespace</code> to match your Kubernetes environment</li><li>The ThousandEyes Enterprise Agent has relatively high hardware requirements; you may need to adjust these depending on your environment</li></ul></div></details><h2 id=installation-steps>Installation Steps</h2><h3 id=step-1-create-the-thousandeyes-token>Step 1: Create the ThousandEyes Token</h3><ol><li><p>Log in to the ThousandEyes platform at <a href=https://app.thousandeyes.com/login rel=external>app.thousandeyes.com/login</a></p></li><li><p>Navigate to <strong>Cloud & Enterprise Agents > Agent Settings > Add New Enterprise Agent</strong></p></li><li><p>Copy your <strong>Account Group Token</strong></p></li><li><p>Base64 encode the token:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> -n <span class=s1>&#39;your-token-here&#39;</span> <span class=p>|</span> base64</span></span></code></pre></div></li><li><p>Save the base64-encoded output for the next step</p></li></ol><p><a href=#R-image-92ec895370b20ab708097a4fb116d8d7 class=lightbox-link><img alt="Get ThousandEyes Token" class="lazy lightbox figure-image" loading=lazy src=../images/te1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-92ec895370b20ab708097a4fb116d8d7><img alt="Get ThousandEyes Token" class="lazy lightbox lightbox-image" loading=lazy src=../images/te1.gif></a></p><h3 id=step-2-create-the-namespace>Step 2: Create the Namespace</h3><p>Create the namespace (if it doesn&rsquo;t exist):</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace te-demo</span></span></code></pre></div><h3 id=step-3-create-the-secret>Step 3: Create the Secret</h3><p>Create a file named <code>credentialsSecret.yaml</code> with your base64-encoded token:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TEAGENT_ACCOUNT_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>&lt;your-base64-encoded-token-here&gt;</span></span></span></code></pre></div><p>Apply the secret:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f credentialsSecret.yaml</span></span></code></pre></div><h3 id=step-4-create-the-deployment>Step 4: Create the Deployment</h3><p>Create a file named <code>thousandEyesDeploy.yaml</code> with the deployment manifest shown above (customize the hostname and namespace as needed).</p><p>Apply the deployment:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f thousandEyesDeploy.yaml</span></span></code></pre></div><h3 id=step-5-verify-the-deployment>Step 5: Verify the Deployment</h3><p>Verify the agent is running:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n te-demo</span></span></code></pre></div><p>Expected output:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>NAME                            READY   STATUS    RESTARTS   AGE
thousandeyes-xxxxxxxxxx-xxxxx   1/1     Running   0          2m</code></pre></div><p>Check the logs to ensure the agent is connecting:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -n te-demo -l <span class=nv>app</span><span class=o>=</span>thousandeyes</span></span></code></pre></div><h3 id=step-6-verify-in-thousandeyes-dashboard>Step 6: Verify in ThousandEyes Dashboard</h3><p>Verify in the ThousandEyes dashboard that the agent has registered successfully:</p><p>Navigate to <strong>Cloud & Enterprise Agents > Agent Settings</strong> to see your newly registered agent.</p><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Success</summary><div class=box-content><p>Your ThousandEyes Enterprise Agent is now running in Kubernetes! Next, we&rsquo;ll integrate it with Splunk Observability Cloud.</p></div></details><h2 id=background>Background</h2><p>ThousandEyes does not provide official Kubernetes deployment documentation. Their standard deployment method uses <code>docker run</code> commands, which makes it challenging to translate into reusable Kubernetes manifests. This guide bridges that gap by providing production-ready Kubernetes configurations.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-integration>Splunk Integration</h1><h2 id=about-splunk-observability-cloud>About Splunk Observability Cloud</h2><p>Splunk Observability Cloud is a real-time observability platform purpose-built for monitoring metrics, traces, and logs at scale. It ingests OpenTelemetry data and provides advanced dashboards and analytics to help teams detect and resolve performance issues quickly. This section explains how to integrate ThousandEyes data with Splunk Observability Cloud using OpenTelemetry.</p><h2 id=step-1-create-a-splunk-observability-cloud-access-token>Step 1: Create a Splunk Observability Cloud Access Token</h2><p>To send data to Splunk Observability Cloud, you need an access token. Follow these steps:</p><ol><li>In the Splunk Observability Cloud platform, go to <strong>Settings > Access Token</strong></li><li>Click <strong>Create Token</strong></li><li>Enter a <strong>Name</strong></li><li>Select <strong>Ingest</strong> scope</li><li>Select <strong>Create</strong> to generate your access token</li><li>Copy the access token and store it securely</li></ol><p>You need the access token to send telemetry data to Splunk Observability Cloud.</p><h2 id=step-2-create-an-integration>Step 2: Create an Integration</h2><h3 id=using-the-thousandeyes-ui>Using the ThousandEyes UI</h3><p>To integrate Splunk Observability Cloud with ThousandEyes:</p><ol><li><p>Log in to your account on the ThousandEyes platform and go to <strong>Manage > Integration > Integration 1.0</strong></p></li><li><p>Click <strong>New Integration</strong> and select <strong>OpenTelemetry Integration</strong></p><p><a href=#R-image-80040c04c68df2918b1c88c9da85a421 class=lightbox-link><img alt="ThousandEyes Integration Setup" class="lazy lightbox figure-image" loading=lazy src=../images/te1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-80040c04c68df2918b1c88c9da85a421><img alt="ThousandEyes Integration Setup" class="lazy lightbox lightbox-image" loading=lazy src=../images/te1.gif></a></p></li><li><p>Enter a <strong>Name</strong> for the integration</p></li><li><p>Set the <strong>Target</strong> to <strong>HTTP</strong></p></li><li><p>Enter the <strong>Endpoint URL</strong>: <code>https://ingest.{REALM}.signalfx.com/v2/datapoint/otlp</code></p><ul><li>Replace <code>{REALM}</code> with your Splunk environment (e.g., <code>us1</code>, <code>eu0</code>)</li></ul></li><li><p>For <strong>Preset Configuration</strong>, select <strong>Splunk Observability Cloud</strong></p></li><li><p>For <strong>Auth Type</strong>, select <strong>Custom</strong></p></li><li><p>Add the following <strong>Custom Headers</strong>:</p><ul><li><code>X-SF-Token: {TOKEN}</code> (Enter your Splunk Observability Cloud access token created in Step 1)</li><li><code>Content-Type: application/x-protobuf</code></li></ul></li><li><p>For <strong>OpenTelemetry Signal</strong>, select <strong>Metric</strong></p></li><li><p>For <strong>Data Model Version</strong>, select <strong>v2</strong></p></li><li><p>Select a test</p></li><li><p>Click <strong>Save</strong> to complete the integration setup</p></li></ol><p><a href=#R-image-4c6509b91a4ea6c55744d20fa6ca4b17 class=lightbox-link><img alt="Integration Complete" class="lazy lightbox figure-image" loading=lazy src=../images/te2.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4c6509b91a4ea6c55744d20fa6ca4b17><img alt="Integration Complete" class="lazy lightbox lightbox-image" loading=lazy src=../images/te2.gif></a></p><p>You have now successfully integrated your ThousandEyes data with Splunk Observability Cloud.</p><h3 id=using-the-thousandeyes-api>Using the ThousandEyes API</h3><p>For a programmatic integration, use the following API commands:</p><h4 id=http-protocol>HTTP Protocol</h4><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -v -XPOST https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;type&#34;: &#34;opentelemetry&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testMatch&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;id&#34;: &#34;281474976717575&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;domain&#34;: &#34;cea&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;endpointType&#34;: &#34;http&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;streamEndpointUrl&#34;: &#34;https://ingest.{REALM}.signalfx.com:443/v2/datapoint/otlp&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;customHeaders&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;X-SF-Token&#34;: &#34;{TOKEN}&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;Content-Type&#34;: &#34;application/x-protobuf&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h4 id=grpc-protocol>gRPC Protocol</h4><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -v -XPOST https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;type&#34;: &#34;opentelemetry&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testMatch&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;id&#34;: &#34;281474976717575&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;domain&#34;: &#34;cea&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;endpointType&#34;: &#34;grpc&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;streamEndpointUrl&#34;: &#34;https://ingest.{REALM}.signalfx.com:443&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;customHeaders&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;X-SF-Token&#34;: &#34;{TOKEN}&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;Content-Type&#34;: &#34;application/x-protobuf&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><p>Replace <code>streamEndpointUrl</code> and <code>X-SF-Token</code> values with the correct values for your Splunk Observability Cloud instance.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Make sure to replace <code>{REALM}</code> with your Splunk environment realm (e.g., <code>us1</code>, <code>us2</code>, <code>eu0</code>) and <code>{TOKEN}</code> with your actual Splunk access token.</p></div></details><h2 id=step-3-thousandeyes-dashboard-in-splunk-observability-cloud>Step 3: ThousandEyes Dashboard in Splunk Observability Cloud</h2><p>Once the integration is set up, you can view real-time monitoring data in the ThousandEyes Network Monitoring Dashboard within Splunk Observability Cloud. The dashboard includes:</p><ul><li><strong>HTTP Server Availability (%)</strong>: Displays the availability of monitored HTTP servers</li><li><strong>HTTP Throughput (bytes/s)</strong>: Shows the data transfer rate over time</li><li><strong>Client Request Duration (seconds)</strong>: Measures the latency of client requests</li><li><strong>Web Page Load Completion (%)</strong>: Indicates the percentage of successful page loads</li><li><strong>Page Load Duration (seconds)</strong>: Displays the time taken to load pages</li></ul><h3 id=dashboard-template>Dashboard Template</h3><p>You can download the dashboard template from the following link: <a href="https://drive.google.com/file/d/1xpdjr5CRBC-JBM9tGsNFcVYp3C-tJC8s/view?usp=sharing" rel=external>Download ThousandEyes Splunk Observability Cloud dashboard template (Google Drive)</a>.</p><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Success</summary><div class=box-content><p>Your ThousandEyes data is now streaming to Splunk Observability Cloud! You can now correlate synthetic test results with APM traces and infrastructure metrics for comprehensive observability.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=kubernetes-service-testing>Kubernetes Service Testing</h1><h2 id=replicating-appdynamics-test-recommendations>Replicating AppDynamics Test Recommendations</h2><p>AppDynamics offers a feature called &ldquo;Test Recommendations&rdquo; that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloud&rsquo;s unified view.</p><p>Since the ThousandEyes Enterprise Agent runs <strong>inside the cluster</strong>, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally.</p><h2 id=how-it-works>How It Works</h2><ol><li><strong>Service Discovery</strong>: Use <code>kubectl get svc</code> to enumerate services in your cluster</li><li><strong>Hostname Construction</strong>: Build test URLs using Kubernetes DNS naming convention: <code>&lt;service-name>.&lt;namespace>.svc.cluster.local</code></li><li><strong>Test Creation</strong>: Configure ThousandEyes HTTP Server tests targeting these internal services</li><li><strong>Correlation in Splunk</strong>: View synthetic test results alongside APM traces and infrastructure metrics</li></ol><h2 id=benefits-of-in-cluster-testing>Benefits of In-Cluster Testing</h2><ul><li><strong>Internal Service Monitoring</strong>: Test backend services not exposed to the internet</li><li><strong>Service Mesh Awareness</strong>: Monitor services behind Istio, Linkerd, or other service meshes</li><li><strong>DNS Resolution Testing</strong>: Validate Kubernetes DNS and service discovery</li><li><strong>Network Policy Validation</strong>: Ensure network policies allow proper communication</li><li><strong>Latency Baseline</strong>: Measure cluster-internal network performance</li><li><strong>Pre-Production Testing</strong>: Test services before exposing them via Ingress/LoadBalancer</li></ul><h2 id=step-by-step-guide>Step-by-Step Guide</h2><h3 id=1-discover-kubernetes-services>1. Discover Kubernetes Services</h3><p>List all services in your cluster or a specific namespace:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get all services in all namespaces</span>
</span></span><span class=line><span class=cl>kubectl get svc --all-namespaces
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services in a specific namespace</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services with detailed output including ports</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production -o wide</span></span></code></pre></div><p>Example output:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>NAMESPACE    NAME           TYPE        CLUSTER-IP      PORT(S)    AGE
production   api-gateway    ClusterIP   10.96.100.50    8080/TCP   5d
production   payment-svc    ClusterIP   10.96.100.51    8080/TCP   5d
production   auth-service   ClusterIP   10.96.100.52    9000/TCP   5d
production   postgres       ClusterIP   10.96.100.53    5432/TCP   5d</code></pre></div><h3 id=2-build-test-hostnames>2. Build Test Hostnames</h3><p>Kubernetes services are accessible via DNS using the following naming pattern:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code></pre></div><p>For the services above:</p><ul><li><code>api-gateway.production.svc.cluster.local:8080</code></li><li><code>payment-svc.production.svc.cluster.local:8080</code></li><li><code>auth-service.production.svc.cluster.local:9000</code></li></ul><p><strong>Shorthand within the same namespace:</strong>
If testing services in the same namespace as the ThousandEyes agent, you can use just the service name:</p><ul><li><code>api-gateway:8080</code></li><li><code>payment-svc:8080</code></li></ul><h3 id=3-create-thousandeyes-tests-for-internal-services>3. Create ThousandEyes Tests for Internal Services</h3><p>For each service endpoint, create an HTTP Server test in ThousandEyes:</p><h4 id=via-thousandeyes-ui>Via ThousandEyes UI</h4><ol><li>Navigate to <strong>Cloud & Enterprise Agents > Test Settings</strong></li><li>Click <strong>Add New Test</strong> ‚Üí <strong>HTTP Server</strong></li><li>Configure the test:<ul><li><strong>Test Name</strong>: <code>[K8s] API Gateway Health</code></li><li><strong>URL</strong>: <code>http://api-gateway.production.svc.cluster.local:8080/health</code></li><li><strong>Interval</strong>: 2 minutes (or desired frequency)</li><li><strong>Agents</strong>: Select your Kubernetes-deployed Enterprise Agent</li><li><strong>HTTP Response Code</strong>: <code>200</code> (expected)</li></ul></li><li>Click <strong>Create Test</strong></li></ol><h4 id=via-thousandeyes-api>Via ThousandEyes API</h4><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[K8s] API Gateway Health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;http://api-gateway.production.svc.cluster.local:8080/health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 1000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h3 id=4-configure-alerting-rules>4. Configure Alerting Rules</h3><p>Set up alerts for common failure scenarios:</p><ul><li><strong>Availability Alert</strong>: Trigger when HTTP response is not 200</li><li><strong>Performance Alert</strong>: Trigger when response time exceeds baseline</li><li><strong>DNS Resolution Alert</strong>: Trigger when service DNS cannot be resolved</li></ul><h3 id=5-view-results-in-splunk-observability-cloud>5. View Results in Splunk Observability Cloud</h3><p>Once tests are running and integrated with Splunk:</p><ol><li><strong>Navigate to the ThousandEyes Dashboard</strong> in Splunk Observability Cloud</li><li><strong>Filter by test name</strong> (e.g., <code>[K8s]</code> prefix) to see all Kubernetes internal tests</li><li><strong>Correlate with APM data</strong>:<ul><li>View synthetic test failures alongside APM error rates</li><li>Identify if issues are network-related (ThousandEyes) or application-related (APM)</li></ul></li><li><strong>Create custom dashboards</strong> combining:<ul><li>ThousandEyes HTTP availability metrics</li><li>APM service latency and error rates</li><li>Kubernetes infrastructure metrics (CPU, memory, pod restarts)</li></ul></li></ol><h2 id=example-use-cases>Example Use Cases</h2><h3 id=use-case-1-microservices-health-checks>Use Case 1: Microservices Health Checks</h3><p>Test multiple microservice health endpoints:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://user-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://order-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://inventory-service.production.svc.cluster.local:8080/actuator/health</span></span></code></pre></div><h3 id=use-case-2-api-gateway-endpoint-testing>Use Case 2: API Gateway Endpoint Testing</h3><p>Test API gateway routes:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/users
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/orders
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/products</span></span></code></pre></div><h3 id=use-case-3-database-connection-testing>Use Case 3: Database Connection Testing</h3><p>While ThousandEyes is primarily for HTTP testing, you can test database proxies:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test PgBouncer or database HTTP management interfaces</span>
</span></span><span class=line><span class=cl>http://pgbouncer.production.svc.cluster.local:8080/stats
</span></span><span class=line><span class=cl>http://redis-exporter.production.svc.cluster.local:9121/metrics</span></span></code></pre></div><h3 id=use-case-4-external-service-dependencies>Use Case 4: External Service Dependencies</h3><p>One of the most valuable capabilities of the in-cluster ThousandEyes agent is monitoring your application&rsquo;s external dependencies from the same network perspective as your services. This helps identify whether issues originate from your infrastructure, network path, or the external service itself.</p><h4 id=testing-payment-gateways>Testing Payment Gateways</h4><p>Create tests for critical payment gateway endpoints to ensure availability and performance:</p><p><strong>Stripe API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via ThousandEyes UI</span>
</span></span><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> Stripe API Health
</span></span><span class=line><span class=cl>URL: https://api.stripe.com/healthcheck
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>200</span></span></span></code></pre></div><p><strong>PayPal API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> PayPal API Health
</span></span><span class=line><span class=cl>URL: https://api.paypal.com/v1/notifications/webhooks
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>401</span> <span class=o>(</span>authentication required, but endpoint is reachable<span class=o>)</span></span></span></code></pre></div><p><strong>Via ThousandEyes API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[External] Stripe API Availability&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;https://api.stripe.com/healthcheck&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 2000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h4 id=why-monitor-external-dependencies>Why Monitor External Dependencies?</h4><ul><li><strong>Proactive Issue Detection</strong>: Know about payment gateway outages before your customers report them</li><li><strong>Network Path Validation</strong>: Ensure your Kubernetes egress network can reach external services</li><li><strong>Performance Baseline</strong>: Track latency from your cluster to external APIs</li><li><strong>Compliance & SLA Monitoring</strong>: Verify third-party services meet their SLA commitments</li><li><strong>Root Cause Analysis</strong>: Quickly determine if issues are network-related, your infrastructure, or the external provider</li></ul><h4 id=recommended-external-services-to-monitor>Recommended External Services to Monitor</h4><ul><li><strong>Payment Processors</strong>: Stripe, PayPal, Square, Braintree</li><li><strong>Authentication Providers</strong>: Auth0, Okta, Azure AD</li><li><strong>Email Services</strong>: SendGrid, Mailgun, AWS SES</li><li><strong>SMS/Communications</strong>: Twilio, MessageBird</li><li><strong>CDN Endpoints</strong>: Cloudflare, Fastly, Akamai</li><li><strong>Cloud Storage</strong>: AWS S3, Google Cloud Storage, Azure Blob Storage</li><li><strong>Third-Party APIs</strong>: Any critical business partner APIs</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Best Practice</summary><div class=box-content><p>Use the <code>[External]</code> prefix in test names to easily distinguish between internal Kubernetes services and external dependencies in your dashboards.</p></div></details><h2 id=best-practices>Best Practices</h2><ol><li><strong>Use Consistent Naming</strong>: Prefix test names with <code>[K8s]</code> or <code>[Internal]</code> for easy filtering</li><li><strong>Test Health Endpoints First</strong>: Start with <code>/health</code> or <code>/readiness</code> endpoints before testing business logic</li><li><strong>Set Appropriate Intervals</strong>: Use shorter intervals (1-2 minutes) for critical services</li><li><strong>Tag Tests</strong>: Use ThousandEyes labels/tags to group tests by:<ul><li>Environment (dev, staging, production)</li><li>Service type (API, database, cache)</li><li>Team ownership</li></ul></li><li><strong>Monitor Test Agent Health</strong>: Ensure the ThousandEyes agent pod is healthy and has sufficient resources</li><li><strong>Correlate with APM</strong>: Create Splunk dashboards that show both synthetic and real user metrics side-by-side</li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>By testing internal services before they&rsquo;re exposed externally, you can catch issues early and ensure your infrastructure is healthy before user traffic reaches it.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=troubleshooting>Troubleshooting</h1><p>This section covers common issues you may encounter when deploying and using the ThousandEyes Enterprise Agent in Kubernetes.</p><h2 id=test-failing-with-dns-resolution-error>Test Failing with DNS Resolution Error</h2><p>If your tests are failing with DNS resolution errors, verify DNS from within the ThousandEyes pod:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify DNS resolution from within the pod</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- nslookup api-gateway.production.svc.cluster.local
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check CoreDNS logs</span>
</span></span><span class=line><span class=cl>kubectl logs -n kube-system -l k8s-app<span class=o>=</span>kube-dns</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Service doesn&rsquo;t exist in the specified namespace</li><li>Typo in the service name or namespace</li><li>CoreDNS is not functioning properly</li></ul><h2 id=connection-refused-errors>Connection Refused Errors</h2><p>If you&rsquo;re seeing connection refused errors, check the following:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify service endpoints exist</span>
</span></span><span class=line><span class=cl>kubectl get endpoints -n production api-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if pods are ready</span>
</span></span><span class=line><span class=cl>kubectl get pods -n production -l <span class=nv>app</span><span class=o>=</span>api-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Test connectivity from agent pod</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- curl -v http://api-gateway.production.svc.cluster.local:8080/health</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>No pods backing the service (endpoints are empty)</li><li>Pods are not in Ready state</li><li>Wrong port specified in the test URL</li><li>Service selector doesn&rsquo;t match pod labels</li></ul><h2 id=network-policy-blocking-traffic>Network Policy Blocking Traffic</h2><p>If network policies are blocking traffic from the ThousandEyes agent:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List network policies</span>
</span></span><span class=line><span class=cl>kubectl get networkpolicies -n production
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Describe network policy</span>
</span></span><span class=line><span class=cl>kubectl describe networkpolicy &lt;policy-name&gt; -n production</span></span></code></pre></div><p><strong>Solution:</strong>
Create a network policy to allow traffic from the <code>te-demo</code> namespace to your services:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>NetworkPolicy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>allow-thousandeyes-agent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>podSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>api-gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>policyTypes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>from</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>namespaceSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span></span></span></code></pre></div><h2 id=agent-pod-not-starting>Agent Pod Not Starting</h2><p>If the ThousandEyes agent pod is not starting, check the pod status and events:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get pod status</span>
</span></span><span class=line><span class=cl>kubectl get pods -n te-demo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Describe pod to see events</span>
</span></span><span class=line><span class=cl>kubectl describe pod -n te-demo &lt;pod-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check logs</span>
</span></span><span class=line><span class=cl>kubectl logs -n te-demo &lt;pod-name&gt;</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Insufficient resources (memory/CPU)</li><li>Invalid or missing TEAGENT_ACCOUNT_TOKEN secret</li><li>Security context capabilities not allowed by Pod Security Policy</li><li>Image pull errors</li></ul><p><strong>Solutions:</strong></p><ul><li>Increase memory limits if OOMKilled</li><li>Verify secret is created correctly: <code>kubectl get secret te-creds -n te-demo -o yaml</code></li><li>Check Pod Security Policy allows NET_ADMIN and SYS_ADMIN capabilities</li><li>Verify image pull: <code>kubectl describe pod -n te-demo &lt;pod-name></code></li></ul><h2 id=agent-not-appearing-in-thousandeyes-dashboard>Agent Not Appearing in ThousandEyes Dashboard</h2><p>If the agent is running but not appearing in the ThousandEyes dashboard:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check agent logs for connection issues</span>
</span></span><span class=line><span class=cl>kubectl logs -n te-demo -l <span class=nv>app</span><span class=o>=</span>thousandeyes --tail<span class=o>=</span><span class=m>100</span></span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Invalid or incorrect TEAGENT_ACCOUNT_TOKEN</li><li>Network egress blocked (firewall or network policy)</li><li>Agent cannot reach ThousandEyes Cloud servers</li></ul><p><strong>Solutions:</strong></p><ol><li>Verify the token is correct and properly base64-encoded</li><li>Check if egress to <code>*.thousandeyes.com</code> is allowed</li><li>Verify the agent can reach the internet:</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- curl -v https://api.thousandeyes.com</span></span></code></pre></div><h2 id=data-not-appearing-in-splunk-observability-cloud>Data Not Appearing in Splunk Observability Cloud</h2><p>If ThousandEyes data is not appearing in Splunk:</p><p><strong>Verify integration configuration:</strong></p><ol><li>Check the OpenTelemetry integration is configured correctly in ThousandEyes</li><li>Verify the Splunk ingest endpoint URL is correct for your realm</li><li>Confirm the <code>X-SF-Token</code> header contains a valid Splunk access token</li><li>Ensure tests are assigned to the integration</li></ol><p><strong>Check test assignment:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Use ThousandEyes API to verify integration</span>
</span></span><span class=line><span class=cl>curl -v https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span></span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Wrong Splunk realm in endpoint URL</li><li>Invalid or expired Splunk access token</li><li>Tests not assigned to the OpenTelemetry integration</li><li>Integration not enabled or saved properly</li></ul><h2 id=high-memory-usage>High Memory Usage</h2><p>If the ThousandEyes agent pod is consuming excessive memory:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check current memory usage</span>
</span></span><span class=line><span class=cl>kubectl top pod -n te-demo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check for OOMKilled events</span>
</span></span><span class=line><span class=cl>kubectl describe pod -n te-demo &lt;pod-name&gt; <span class=p>|</span> grep -i oom</span></span></code></pre></div><p><strong>Solutions:</strong></p><ol><li>Increase memory limits in the deployment:</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>4096Mi </span><span class=w> </span><span class=c># Increase from 3584Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>2500Mi </span><span class=w> </span><span class=c># Increase from 2000Mi</span></span></span></code></pre></div><ol start=2><li>Reduce the number of concurrent tests assigned to the agent</li><li>Check if the agent is running unnecessary services</li></ol><h2 id=permission-denied-errors>Permission Denied Errors</h2><p>If you see permission denied errors in the agent logs:</p><p><strong>Verify security context:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pod -n te-demo &lt;pod-name&gt; -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.containers[0].securityContext}&#39;</span></span></span></code></pre></div><p><strong>Solution:</strong>
Ensure the pod has the required capabilities:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>capabilities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>add</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>NET_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYS_ADMIN</span></span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Some Kubernetes clusters with strict Pod Security Policies may not allow these capabilities. You may need to work with your cluster administrators to create an appropriate policy exception.</p></div></details><h2 id=getting-help>Getting Help</h2><p>If you encounter issues not covered in this guide:</p><ol><li><strong>ThousandEyes Support</strong>: Contact ThousandEyes support at <a href=https://support.thousandeyes.com rel=external>support.thousandeyes.com</a></li><li><strong>Splunk Support</strong>: For Splunk Observability Cloud issues, visit <a href=https://www.splunk.com/en_us/support-and-services.html rel=external>Splunk Support</a></li><li><strong>Community Forums</strong>:<ul><li><a href=https://community.thousandeyes.com rel=external>ThousandEyes Community</a></li><li><a href=https://community.splunk.com rel=external>Splunk Community</a></li></ul></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>When asking for help, always include relevant logs, pod descriptions, and error messages to help troubleshoot more effectively.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1769113953 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1769113953 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1769113953 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/clipboard/clipboard.min.js?1769113953 defer></script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1769113953 defer></script><script src=/observability-workshop/js/theme.min.js?1769113953 defer></script></body></html>