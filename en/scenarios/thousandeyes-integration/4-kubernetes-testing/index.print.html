<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.2.0+9cac649a184a2967957ef9bbececf9402192846c"><meta name=description content="Replicating AppDynamics Test Recommendations AppDynamics offers a feature called â€œTest Recommendationsâ€ that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloudâ€™s unified view.
Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Kubernetes Service Testing :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Replicating AppDynamics Test Recommendations AppDynamics offers a feature called â€œTest Recommendationsâ€ that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloudâ€™s unified view.
Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally."><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Kubernetes Service Testing :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Replicating AppDynamics Test Recommendations AppDynamics offers a feature called â€œTest Recommendationsâ€ that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloudâ€™s unified view.
Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Kubernetes Service Testing :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Replicating AppDynamics Test Recommendations AppDynamics offers a feature called â€œTest Recommendationsâ€ that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloudâ€™s unified view.
Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally."><meta itemprop=dateModified content="2025-11-12T12:50:30-05:00"><meta itemprop=wordCount content="1013"><title>Kubernetes Service Testing :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html rel=canonical type=text/html title="Kubernetes Service Testing :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1769100198 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1769100198 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1769100198 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1769100198 defer></script><script src=/observability-workshop/js/search.min.js?1769100198 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1769100198"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1769100198 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1769100198 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1769100198 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1769100198 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769100198 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769100198 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1769100198 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1769100198 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1769100198 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html",window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#replicating-appdynamics-test-recommendations>Replicating AppDynamics Test Recommendations</a></li><li><a href=#how-it-works>How It Works</a></li><li><a href=#benefits-of-in-cluster-testing>Benefits of In-Cluster Testing</a></li><li><a href=#step-by-step-guide>Step-by-Step Guide</a><ul><li><a href=#1-discover-kubernetes-services>1. Discover Kubernetes Services</a></li><li><a href=#2-build-test-hostnames>2. Build Test Hostnames</a></li><li><a href=#3-create-thousandeyes-tests-for-internal-services>3. Create ThousandEyes Tests for Internal Services</a></li><li><a href=#4-configure-alerting-rules>4. Configure Alerting Rules</a></li><li><a href=#5-view-results-in-splunk-observability-cloud>5. View Results in Splunk Observability Cloud</a></li></ul></li><li><a href=#example-use-cases>Example Use Cases</a><ul><li><a href=#use-case-1-microservices-health-checks>Use Case 1: Microservices Health Checks</a></li><li><a href=#use-case-2-api-gateway-endpoint-testing>Use Case 2: API Gateway Endpoint Testing</a></li><li><a href=#use-case-3-database-connection-testing>Use Case 3: Database Connection Testing</a></li><li><a href=#use-case-4-external-service-dependencies>Use Case 4: External Service Dependencies</a></li></ul></li><li><a href=#best-practices>Best Practices</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/scenarios/index.html><span itemprop=name>Scenarios</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/scenarios/thousandeyes-integration/index.html><span itemprop=name>ThousandEyes Integration</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>4. Kubernetes Testing</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/thousandeyes-integration/3-splunk-integration/index.html title="Splunk Integration (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/en/scenarios/thousandeyes-integration/5-troubleshooting/index.html title="Troubleshooting (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable scenarios" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=kubernetes-service-testing>Kubernetes Service Testing</h1><h2 id=replicating-appdynamics-test-recommendations>Replicating AppDynamics Test Recommendations</h2><p>AppDynamics offers a feature called &ldquo;Test Recommendations&rdquo; that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloud&rsquo;s unified view.</p><p>Since the ThousandEyes Enterprise Agent runs <strong>inside the cluster</strong>, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally.</p><h2 id=how-it-works>How It Works</h2><ol><li><strong>Service Discovery</strong>: Use <code>kubectl get svc</code> to enumerate services in your cluster</li><li><strong>Hostname Construction</strong>: Build test URLs using Kubernetes DNS naming convention: <code>&lt;service-name>.&lt;namespace>.svc.cluster.local</code></li><li><strong>Test Creation</strong>: Configure ThousandEyes HTTP Server tests targeting these internal services</li><li><strong>Correlation in Splunk</strong>: View synthetic test results alongside APM traces and infrastructure metrics</li></ol><h2 id=benefits-of-in-cluster-testing>Benefits of In-Cluster Testing</h2><ul><li><strong>Internal Service Monitoring</strong>: Test backend services not exposed to the internet</li><li><strong>Service Mesh Awareness</strong>: Monitor services behind Istio, Linkerd, or other service meshes</li><li><strong>DNS Resolution Testing</strong>: Validate Kubernetes DNS and service discovery</li><li><strong>Network Policy Validation</strong>: Ensure network policies allow proper communication</li><li><strong>Latency Baseline</strong>: Measure cluster-internal network performance</li><li><strong>Pre-Production Testing</strong>: Test services before exposing them via Ingress/LoadBalancer</li></ul><h2 id=step-by-step-guide>Step-by-Step Guide</h2><h3 id=1-discover-kubernetes-services>1. Discover Kubernetes Services</h3><p>List all services in your cluster or a specific namespace:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get all services in all namespaces</span>
</span></span><span class=line><span class=cl>kubectl get svc --all-namespaces
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services in a specific namespace</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services with detailed output including ports</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production -o wide</span></span></code></pre></div><p>Example output:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>NAMESPACE    NAME           TYPE        CLUSTER-IP      PORT(S)    AGE
production   api-gateway    ClusterIP   10.96.100.50    8080/TCP   5d
production   payment-svc    ClusterIP   10.96.100.51    8080/TCP   5d
production   auth-service   ClusterIP   10.96.100.52    9000/TCP   5d
production   postgres       ClusterIP   10.96.100.53    5432/TCP   5d</code></pre></div><h3 id=2-build-test-hostnames>2. Build Test Hostnames</h3><p>Kubernetes services are accessible via DNS using the following naming pattern:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code></pre></div><p>For the services above:</p><ul><li><code>api-gateway.production.svc.cluster.local:8080</code></li><li><code>payment-svc.production.svc.cluster.local:8080</code></li><li><code>auth-service.production.svc.cluster.local:9000</code></li></ul><p><strong>Shorthand within the same namespace:</strong>
If testing services in the same namespace as the ThousandEyes agent, you can use just the service name:</p><ul><li><code>api-gateway:8080</code></li><li><code>payment-svc:8080</code></li></ul><h3 id=3-create-thousandeyes-tests-for-internal-services>3. Create ThousandEyes Tests for Internal Services</h3><p>For each service endpoint, create an HTTP Server test in ThousandEyes:</p><h4 id=via-thousandeyes-ui>Via ThousandEyes UI</h4><ol><li>Navigate to <strong>Cloud & Enterprise Agents > Test Settings</strong></li><li>Click <strong>Add New Test</strong> â†’ <strong>HTTP Server</strong></li><li>Configure the test:<ul><li><strong>Test Name</strong>: <code>[K8s] API Gateway Health</code></li><li><strong>URL</strong>: <code>http://api-gateway.production.svc.cluster.local:8080/health</code></li><li><strong>Interval</strong>: 2 minutes (or desired frequency)</li><li><strong>Agents</strong>: Select your Kubernetes-deployed Enterprise Agent</li><li><strong>HTTP Response Code</strong>: <code>200</code> (expected)</li></ul></li><li>Click <strong>Create Test</strong></li></ol><h4 id=via-thousandeyes-api>Via ThousandEyes API</h4><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[K8s] API Gateway Health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;http://api-gateway.production.svc.cluster.local:8080/health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 1000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h3 id=4-configure-alerting-rules>4. Configure Alerting Rules</h3><p>Set up alerts for common failure scenarios:</p><ul><li><strong>Availability Alert</strong>: Trigger when HTTP response is not 200</li><li><strong>Performance Alert</strong>: Trigger when response time exceeds baseline</li><li><strong>DNS Resolution Alert</strong>: Trigger when service DNS cannot be resolved</li></ul><h3 id=5-view-results-in-splunk-observability-cloud>5. View Results in Splunk Observability Cloud</h3><p>Once tests are running and integrated with Splunk:</p><ol><li><strong>Navigate to the ThousandEyes Dashboard</strong> in Splunk Observability Cloud</li><li><strong>Filter by test name</strong> (e.g., <code>[K8s]</code> prefix) to see all Kubernetes internal tests</li><li><strong>Correlate with APM data</strong>:<ul><li>View synthetic test failures alongside APM error rates</li><li>Identify if issues are network-related (ThousandEyes) or application-related (APM)</li></ul></li><li><strong>Create custom dashboards</strong> combining:<ul><li>ThousandEyes HTTP availability metrics</li><li>APM service latency and error rates</li><li>Kubernetes infrastructure metrics (CPU, memory, pod restarts)</li></ul></li></ol><h2 id=example-use-cases>Example Use Cases</h2><h3 id=use-case-1-microservices-health-checks>Use Case 1: Microservices Health Checks</h3><p>Test multiple microservice health endpoints:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://user-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://order-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://inventory-service.production.svc.cluster.local:8080/actuator/health</span></span></code></pre></div><h3 id=use-case-2-api-gateway-endpoint-testing>Use Case 2: API Gateway Endpoint Testing</h3><p>Test API gateway routes:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/users
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/orders
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/products</span></span></code></pre></div><h3 id=use-case-3-database-connection-testing>Use Case 3: Database Connection Testing</h3><p>While ThousandEyes is primarily for HTTP testing, you can test database proxies:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test PgBouncer or database HTTP management interfaces</span>
</span></span><span class=line><span class=cl>http://pgbouncer.production.svc.cluster.local:8080/stats
</span></span><span class=line><span class=cl>http://redis-exporter.production.svc.cluster.local:9121/metrics</span></span></code></pre></div><h3 id=use-case-4-external-service-dependencies>Use Case 4: External Service Dependencies</h3><p>One of the most valuable capabilities of the in-cluster ThousandEyes agent is monitoring your application&rsquo;s external dependencies from the same network perspective as your services. This helps identify whether issues originate from your infrastructure, network path, or the external service itself.</p><h4 id=testing-payment-gateways>Testing Payment Gateways</h4><p>Create tests for critical payment gateway endpoints to ensure availability and performance:</p><p><strong>Stripe API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via ThousandEyes UI</span>
</span></span><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> Stripe API Health
</span></span><span class=line><span class=cl>URL: https://api.stripe.com/healthcheck
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>200</span></span></span></code></pre></div><p><strong>PayPal API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> PayPal API Health
</span></span><span class=line><span class=cl>URL: https://api.paypal.com/v1/notifications/webhooks
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>401</span> <span class=o>(</span>authentication required, but endpoint is reachable<span class=o>)</span></span></span></code></pre></div><p><strong>Via ThousandEyes API:</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[External] Stripe API Availability&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;https://api.stripe.com/healthcheck&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 2000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h4 id=why-monitor-external-dependencies>Why Monitor External Dependencies?</h4><ul><li><strong>Proactive Issue Detection</strong>: Know about payment gateway outages before your customers report them</li><li><strong>Network Path Validation</strong>: Ensure your Kubernetes egress network can reach external services</li><li><strong>Performance Baseline</strong>: Track latency from your cluster to external APIs</li><li><strong>Compliance & SLA Monitoring</strong>: Verify third-party services meet their SLA commitments</li><li><strong>Root Cause Analysis</strong>: Quickly determine if issues are network-related, your infrastructure, or the external provider</li></ul><h4 id=recommended-external-services-to-monitor>Recommended External Services to Monitor</h4><ul><li><strong>Payment Processors</strong>: Stripe, PayPal, Square, Braintree</li><li><strong>Authentication Providers</strong>: Auth0, Okta, Azure AD</li><li><strong>Email Services</strong>: SendGrid, Mailgun, AWS SES</li><li><strong>SMS/Communications</strong>: Twilio, MessageBird</li><li><strong>CDN Endpoints</strong>: Cloudflare, Fastly, Akamai</li><li><strong>Cloud Storage</strong>: AWS S3, Google Cloud Storage, Azure Blob Storage</li><li><strong>Third-Party APIs</strong>: Any critical business partner APIs</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Best Practice</summary><div class=box-content><p>Use the <code>[External]</code> prefix in test names to easily distinguish between internal Kubernetes services and external dependencies in your dashboards.</p></div></details><h2 id=best-practices>Best Practices</h2><ol><li><strong>Use Consistent Naming</strong>: Prefix test names with <code>[K8s]</code> or <code>[Internal]</code> for easy filtering</li><li><strong>Test Health Endpoints First</strong>: Start with <code>/health</code> or <code>/readiness</code> endpoints before testing business logic</li><li><strong>Set Appropriate Intervals</strong>: Use shorter intervals (1-2 minutes) for critical services</li><li><strong>Tag Tests</strong>: Use ThousandEyes labels/tags to group tests by:<ul><li>Environment (dev, staging, production)</li><li>Service type (API, database, cache)</li><li>Team ownership</li></ul></li><li><strong>Monitor Test Agent Health</strong>: Ensure the ThousandEyes agent pod is healthy and has sufficient resources</li><li><strong>Correlate with APM</strong>: Create Splunk dashboards that show both synthetic and real user metrics side-by-side</li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>By testing internal services before they&rsquo;re exposed externally, you can catch issues early and ensure your infrastructure is healthy before user traffic reaches it.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article></div></main></div><script src=/observability-workshop/js/clipboard/clipboard.min.js?1769100198 defer></script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1769100198 defer></script><script src=/observability-workshop/js/theme.min.js?1769100198 defer></script></body></html>