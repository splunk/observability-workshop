<!doctype html><html id=R-html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="Learn how to automate AppDynamics Smart Agent deployment using GitHub Actions with self-hosted runners."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="GitHub Actions Automation :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Learn how to automate AppDynamics Smart Agent deployment using GitHub Actions with self-hosted runners."><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="GitHub Actions Automation :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Learn how to automate AppDynamics Smart Agent deployment using GitHub Actions with self-hosted runners."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="GitHub Actions Automation :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Learn how to automate AppDynamics Smart Agent deployment using GitHub Actions with self-hosted runners."><meta itemprop=dateModified content="2025-11-17T18:54:32-05:00"><meta itemprop=wordCount content="433"><title>GitHub Actions Automation :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/index.html rel=canonical type=text/html title="GitHub Actions Automation :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770160979 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770160979 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770160979 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770160979 defer></script><script src=/observability-workshop/js/search.min.js?1770160979 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1770160979"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770160979 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770160979 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770160979 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1770160979 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770160979 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770160979 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770160979 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770160979 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770160979 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/index.html",window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-youll-learn>What You&rsquo;ll Learn</a></li><li><a href=#key-features>Key Features</a></li><li><a href=#architecture-overview>Architecture Overview</a></li><li><a href=#workshop-components>Workshop Components</a></li><li><a href=#available-workflows>Available Workflows</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#github-repository>GitHub Repository</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/15-appd-workshop/index.html><span itemprop=name>Splunk4Ninjas AppDynamics</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/index.html><span itemprop=name>SmartAgent Deployment</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>GitHub Actions Automation</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/4-deployment-workflow/index.html title="Deployment Workflow (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/3-github-actions/1-architecture/index.html title="Architecture & Design (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=github-actions-automation>GitHub Actions Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop demonstrates how to use <strong>GitHub Actions</strong> with a self-hosted runner to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage GitHub Actions workflows for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-64208b2e31411326a0f96564e0ad4d28 class=lightbox-link><img alt="GitHub Actions and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64208b2e31411326a0f96564e0ad4d28><img alt="GitHub Actions and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white"></a> <a href=#R-image-16b19fbdc4196d61fbac1d1754109c56 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-16b19fbdc4196d61fbac1d1754109c56><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts using GitHub Actions workflows</li><li><strong>Configure GitHub secrets and variables</strong> for secure credentials management</li><li><strong>Set up a self-hosted runner</strong> in your AWS VPC</li><li><strong>Implement automatic batching</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, uninstall, stop, and cleanup</li><li><strong>Monitor workflow execution</strong> and troubleshoot issues</li></ul><h2 id=key-features>Key Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>ğŸš€ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>ğŸ”„ <strong>Complete Lifecycle Management</strong> - 11 workflows covering all agent operations</li><li>ğŸ—ï¸ <strong>Infrastructure as Code</strong> - All workflows version-controlled in GitHub</li><li>ğŸ” <strong>Secure</strong> - SSH keys stored as GitHub secrets, private VPC networking</li><li>ğŸ“ˆ <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>ğŸ›ï¸ <strong>Self-hosted Runner</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GitHub Actions-based Deployment                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Developer â”€â”€â–¶ GitHub.com â”€â”€â–¶ Self-hosted Runner (AWS VPC)     â”‚
â”‚                                          â”‚                       â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 1 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 2 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 3 (SSH)      â”‚
â”‚                                          â””â”€â”€â–¶ Host N (SSH)      â”‚
â”‚                                                                  â”‚
â”‚  All hosts send metrics â”€â”€â–¶ AppDynamics Controller             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workshop-components>Workshop Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the GitHub Actions workflow architecture</li><li><strong>GitHub Setup</strong> - Configuring secrets, variables, and self-hosted runners</li><li><strong>Workflow Creation</strong> - Understanding and using the 11 available workflows</li><li><strong>Deployment Execution</strong> - Running workflows and verifying installations</li></ol><h2 id=available-workflows>Available Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This solution includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management:</p><table><thead><tr><th>Category</th><th>Workflows</th><th>Description</th></tr></thead><tbody><tr><td><strong>Deployment</strong></td><td>1</td><td>Deploy and start Smart Agent</td></tr><tr><td><strong>Agent Installation</strong></td><td>4</td><td>Install Node, Machine, DB, and Java agents</td></tr><tr><td><strong>Agent Uninstallation</strong></td><td>4</td><td>Uninstall specific agent types</td></tr><tr><td><strong>Agent Management</strong></td><td>2</td><td>Stop/clean and complete cleanup</td></tr></tbody></table><p>All workflows support automatic batching for scalability!</p><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>Self-hosted GitHub Actions runner in the same VPC</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li></ul><h2 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflow code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></strong></p><p>The repository includes:</p><ul><li>11 complete workflow YAML files</li><li>Detailed setup documentation</li><li>Architecture diagrams</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (â—€ï¸) and right (â–¶ï¸) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of GitHub Actions Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub Actions-based Smart Agent deployment system uses a self-hosted runner within your AWS VPC to orchestrate deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">graph TB
    subgraph Internet
        GH[GitHub.com&lt;br/&gt;Repository &amp; Actions]
        User[Developer&lt;br/&gt;Local Machine]
    end

    subgraph AWS[&#34;AWS VPC (172.31.0.0/16)&#34;]
        subgraph SG[&#34;Security Group: smartagent-lab&#34;]
            Runner[Self-hosted Runner&lt;br/&gt;EC2 Instance&lt;br/&gt;172.31.1.x]
            
            subgraph Targets[&#34;Target Hosts&#34;]
                T1[Target Host 1&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.243]
                T2[Target Host 2&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.48]
                T3[Target Host 3&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.5]
            end
        end
    end

    User --&gt;|git push| GH
    GH &lt;--&gt;|HTTPS:443&lt;br/&gt;Poll for jobs| Runner
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T1
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T2
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T3

    style GH fill:#24292e,color:#fff
    style User fill:#0366d6,color:#fff
    style Runner fill:#28a745,color:#fff
    style T1 fill:#ffd33d,color:#000
    style T2 fill:#ffd33d,color:#000
    style T3 fill:#ffd33d,color:#000</pre><h2 id=network-architecture>Network Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The self-hosted runner communicates with target hosts via private IPs.</p><h3 id=vpc-layout>VPC Layout<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AWS VPC (172.31.0.0/16)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Security Group: smartagent-lab                   â”‚  â”‚
â”‚  â”‚  Rules:                                                   â”‚  â”‚
â”‚  â”‚  - Inbound: SSH (22) from same security group            â”‚  â”‚
â”‚  â”‚  - Outbound: HTTPS (443) to GitHub                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Self-hosted â”‚    â”‚  Target EC2  â”‚    â”‚  Target EC2  â”‚       â”‚
â”‚  â”‚   Runner    â”‚    â”‚              â”‚    â”‚              â”‚       â”‚
â”‚  â”‚             â”‚â”€â”€â”€â–¶â”‚ Private IP:  â”‚    â”‚ Private IP:  â”‚       â”‚
â”‚  â”‚ 172.31.1.x  â”‚SSH â”‚ 172.31.1.243 â”‚    â”‚ 172.31.1.48  â”‚       â”‚
â”‚  â”‚             â”‚â”€â”€â”€â–¶â”‚              â”‚    â”‚              â”‚       â”‚
â”‚  â”‚ Polls GitHubâ”‚    â”‚ Ubuntu 20.04 â”‚    â”‚ Ubuntu 20.04 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AppDynamics    â”‚
                    â”‚    Controller    â”‚
                    â”‚  (SaaS/On-Prem)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workflow-execution-flow>Workflow Execution Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">sequenceDiagram
    participant Dev as Developer
    participant GH as GitHub
    participant Runner as Self-hosted Runner
    participant Target as Target Host(s)

    Dev-&gt;&gt;GH: 1. Push code or trigger workflow
    GH-&gt;&gt;GH: 2. Workflow event triggered
    Runner-&gt;&gt;GH: 3. Poll for jobs (HTTPS:443)
    GH-&gt;&gt;Runner: 4. Assign job to runner
    Runner-&gt;&gt;Runner: 5. Execute prepare job&lt;br/&gt;(load host matrix)
    
    par Parallel Execution
        Runner-&gt;&gt;Target: 6a. SSH to Host 1&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6b. SSH to Host 2&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6c. SSH to Host 3&lt;br/&gt;(port 22)
    end
    
    Target-&gt;&gt;Target: 7. Execute commands&lt;br/&gt;(install/uninstall/stop/clean)
    Target--&gt;&gt;Runner: 8. Return results
    Runner--&gt;&gt;GH: 9. Report job status
    GH--&gt;&gt;Dev: 10. Notify completion</pre><h2 id=component-details>Component Details<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Stores:</strong></p><ul><li>11 workflow YAML files</li><li>Smart Agent installation package</li><li>Configuration file (config.ini)</li></ul><p><strong>Secrets:</strong></p><ul><li>SSH private key</li></ul><p><strong>Variables:</strong></p><ul><li>Host list (DEPLOYMENT_HOSTS)</li><li>User/group settings (optional)</li></ul><h3 id=self-hosted-runner>Self-hosted Runner<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Poll GitHub for workflow jobs</li><li>Execute workflow steps</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Parallel execution</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Ubuntu/Amazon Linux 2</li><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>SSH key authentication</li></ul><p><strong>Access:</strong></p><ul><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>Uses SSH key authentication</li></ul><h3 id=target-hosts>Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
â””â”€â”€ appdsmartagent/
    â”œâ”€â”€ smartagentctl
    â”œâ”€â”€ config.ini
    â””â”€â”€ agents/
        â”œâ”€â”€ machine/
        â”œâ”€â”€ java/
        â”œâ”€â”€ node/
        â””â”€â”€ db/</code></pre></div><h2 id=security-architecture>Security Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=security-layers>Security Layers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for hosts</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>SSH (22) within same security group only</li><li>HTTPS (443) outbound for GitHub access</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in GitHub Secrets</li><li>Temporary key files on runner</li><li>Keys removed after workflow</li></ul></li><li><p><strong>GitHub Security</strong></p><ul><li>Repository access controls</li><li>Branch protection rules</li><li>Secrets never exposed in logs</li><li>Environment variable masking</li></ul></li><li><p><strong>Network Security</strong></p><ul><li>Private IP communication only</li><li>No public IPs required</li><li>Runner in same VPC as targets</li></ul></li></ol><h2 id=workflow-categories>Workflow Categories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The system includes 11 workflows organized into 4 categories:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>GitHub Actions Workflows (11 Total)
â”œâ”€â”€ Deployment (1 workflow)
â”‚   â””â”€â”€ Deploy Smart Agent (Batched)
â”œâ”€â”€ Agent Installation (4 workflows)
â”‚   â”œâ”€â”€ Install Node Agent (Batched)
â”‚   â”œâ”€â”€ Install Machine Agent (Batched)
â”‚   â”œâ”€â”€ Install DB Agent (Batched)
â”‚   â””â”€â”€ Install Java Agent (Batched)
â”œâ”€â”€ Agent Uninstallation (4 workflows)
â”‚   â”œâ”€â”€ Uninstall Node Agent (Batched)
â”‚   â”œâ”€â”€ Uninstall Machine Agent (Batched)
â”‚   â”œâ”€â”€ Uninstall DB Agent (Batched)
â”‚   â””â”€â”€ Uninstall Java Agent (Batched)
â””â”€â”€ Smart Agent Management (2 workflows)
    â”œâ”€â”€ Stop and Clean Smart Agent (Batched)
    â””â”€â”€ Cleanup All Agents (Batched)</code></pre></div><h2 id=batching-strategy>Batching Strategy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflows use automatic batching to support deployments at any scale.</p><h3 id=how-batching-works>How Batching Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Host 002: 172.31.1.2      â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   BATCH 1        â”‚
    ...                              â”‚   Hosts 1-256    â”‚ â”€â”€â”€â”
Host 256: 172.31.1.256               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 257: 172.31.1.257               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
Host 258: 172.31.1.258   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   BATCH 2        â”‚    â”‚ SEQUENTIAL
    ...                              â”‚   Hosts 257-512  â”‚    â”‚ EXECUTION
Host 512: 172.31.1.512               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 513: 172.31.1.513               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    ...                              â”‚   BATCH 3        â”‚    â”‚
Host 768: 172.31.1.768   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 513-768  â”‚ â”€â”€â”€â”˜
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Host 769: 172.31.1.769               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    ...                              â”‚   BATCH 4        â”‚
Host 1000: 172.31.2.232  â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 769-1000 â”‚
                                     â”‚   (232 hosts)    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WITHIN EACH BATCH:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All hosts deploy in PARALLEL          â”‚
â”‚                                        â”‚
â”‚  Host 1 â”€â”€â”                           â”‚
â”‚  Host 2 â”€â”€â”¤                           â”‚
â”‚  Host 3 â”€â”€â”¼â”€â–¶ Background processes (&amp;)â”‚
â”‚    ...    â”‚                           â”‚
â”‚  Host 256â”€â”˜   â””â”€â–¶ wait command        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h3 id=why-sequential-batches>Why Sequential Batches?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Resource Management:</strong></p><ul><li>Prevents overwhelming the self-hosted runner</li><li>Each batch opens 256 parallel SSH connections</li><li>Sequential processing ensures stable performance</li></ul><p><strong>Configurable:</strong></p><ul><li>Default batch size: 256 (GitHub Actions matrix limit)</li><li>Adjustable via workflow input for smaller batches</li><li>Balance between speed and resource usage</li></ul><h3 id=scaling-characteristics>Scaling Characteristics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts â†’ 1 batch â†’ ~2 minutes</li><li>100 hosts â†’ 1 batch â†’ ~3 minutes</li><li>500 hosts â†’ 2 batches â†’ ~6 minutes</li><li>1,000 hosts â†’ 4 batches â†’ ~12 minutes</li><li>5,000 hosts â†’ 20 batches â†’ ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Runner resources (CPU/memory)</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up GitHub and configuring the self-hosted runner.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=github-setup>GitHub Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before you begin, ensure you have:</p><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>SSH key pair (PEM file) for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=fork-or-clone-the-repository>Fork or Clone the Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>First, get access to the GitHub Actions lab repository:</p><p><strong>Repository URL</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Option 1: Fork the repository via GitHub UI</span>
</span></span><span class=line><span class=cl><span class=c1># Go to https://github.com/chambear2809/github-actions-lab</span>
</span></span><span class=line><span class=cl><span class=c1># Click &#34;Fork&#34; button</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Option 2: Clone directly (for testing)</span>
</span></span><span class=line><span class=cl>git clone https://github.com/chambear2809/github-actions-lab.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> github-actions-lab</span></span></code></pre></div><h2 id=configure-self-hosted-runner>Configure Self-hosted Runner<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your self-hosted runner must be deployed in the same AWS VPC as your target EC2 instances.</p><h3 id=install-runner-on-ec2-instance>Install Runner on EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>Launch EC2 instance</strong> in your VPC (Ubuntu or Amazon Linux 2)</p></li><li><p><strong>Navigate to runner settings</strong> in your forked repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Settings â†’ Actions â†’ Runners â†’ New self-hosted runner</code></pre></div></li><li><p><strong>SSH into the runner instance</strong> and execute installation commands:</p></li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create runner directory</span>
</span></span><span class=line><span class=cl>mkdir actions-runner <span class=o>&amp;&amp;</span> <span class=nb>cd</span> actions-runner
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Download runner (check GitHub for latest version)</span>
</span></span><span class=line><span class=cl>curl -o actions-runner-linux-x64-2.311.0.tar.gz -L <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract</span>
</span></span><span class=line><span class=cl>tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configure (use token from GitHub UI)</span>
</span></span><span class=line><span class=cl>./config.sh --url https://github.com/YOUR_USERNAME/github-actions-lab --token YOUR_TOKEN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install as service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh start</span></span></code></pre></div><h3 id=verify-runner-status>Verify Runner Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Check that the runner appears as <strong>&ldquo;Idle&rdquo;</strong> (green) in:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Settings â†’ Actions â†’ Runners</code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The runner must remain online and idle to pick up workflow jobs. If it shows offline, check the service status: <code>sudo ./svc.sh status</code></p></div></details><h2 id=configure-github-secrets>Configure GitHub Secrets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Settings â†’ Secrets and variables â†’ Actions â†’ Secrets</strong></p><h3 id=ssh-private-key-secret>SSH Private Key Secret<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This secret contains your SSH private key for accessing target hosts.</p><ol><li>Click <strong>&ldquo;New repository secret&rdquo;</strong></li><li><strong>Name</strong>: <code>SSH_PRIVATE_KEY</code></li><li><strong>Value</strong>: Paste the contents of your PEM file</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View your PEM file</span>
</span></span><span class=line><span class=cl>cat /path/to/your-key.pem</span></span></code></pre></div><p>Example format:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><ol start=4><li>Click <strong>&ldquo;Add secret&rdquo;</strong></li></ol><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Never commit SSH keys to your repository! Always use GitHub Secrets for sensitive credentials.</p></div></details><h2 id=configure-github-variables>Configure GitHub Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Settings â†’ Secrets and variables â†’ Actions â†’ Variables</strong></p><h3 id=deployment-hosts-variable-required>Deployment Hosts Variable (Required)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This variable contains the list of all target hosts where Smart Agent should be deployed.</p><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>DEPLOYMENT_HOSTS</code></li><li><strong>Value</strong>: Enter your target host IPs (one per line)</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><ol start=4><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h3 id=optional-variables>Optional Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>These variables are optional and used for Smart Agent service user/group configuration:</p><h4 id=smartagent_user>SMARTAGENT_USER<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_USER</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h4 id=smartagent_group>SMARTAGENT_GROUP<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_GROUP</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h2 id=network-configuration>Network Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For the lab setup with all EC2 instances in the same VPC and security group:</p><h3 id=security-group-rules>Security Group Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Inbound Rules:</strong></p><ul><li>SSH (port 22) from same security group (source: same SG)</li></ul><p><strong>Outbound Rules:</strong></p><ul><li>HTTPS (port 443) to 0.0.0.0/0 (for GitHub API access)</li><li>SSH (port 22) to same security group (for target access)</li></ul><h3 id=network-best-practices>Network Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>âœ… Use private IP addresses (172.31.x.x) for <code>DEPLOYMENT_HOSTS</code></li><li>âœ… Runner and targets in same security group</li><li>âœ… No public IPs needed on target hosts</li><li>âœ… Runner communicates via private network</li><li>âœ… Outbound HTTPS required for GitHub polling</li></ul><h2 id=verify-configuration>Verify Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before running workflows, verify your setup:</p><h3 id=1-check-runner-status>1. Check Runner Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Settings â†’ Actions â†’ Runners</strong></li><li>Verify runner shows as &ldquo;Idle&rdquo; (green)</li><li>Check &ldquo;Last seen&rdquo; timestamp is recent</li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH from your runner instance to a target host:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/your-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p>If successful, you should get a shell prompt on the target host.</p><h3 id=3-verify-secrets-and-variables>3. Verify Secrets and Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Settings â†’ Secrets and variables â†’ Actions</strong></li><li>Confirm secrets tab shows: <code>SSH_PRIVATE_KEY</code></li><li>Confirm variables tab shows: <code>DEPLOYMENT_HOSTS</code></li></ol><h3 id=4-check-repository-access>4. Check Repository Access<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Ensure the runner can access the repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance, as the runner user</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/actions-runner
</span></span><span class=line><span class=cl>./run.sh  <span class=c1># Test run (Ctrl+C to stop)</span></span></span></code></pre></div><p>You should see: &ldquo;Listening for Jobs&rdquo;</p><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=runner-not-picking-up-jobs>Runner Not Picking Up Jobs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflows stay in &ldquo;queued&rdquo; state</p><p><strong>Solution</strong>:</p><ul><li>Check runner status: <code>sudo systemctl status actions.runner.*</code></li><li>Restart runner: <code>sudo ./svc.sh restart</code></li><li>Verify outbound HTTPS (443) connectivity to GitHub</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflows fail with &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo;</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from runner</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from runner</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on targets</span></span></span></code></pre></div><h3 id=invalid-characters-in-hostname>Invalid Characters in Hostname<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Error: &ldquo;hostname contains invalid characters&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Edit <code>DEPLOYMENT_HOSTS</code> variable</li><li>Ensure no trailing spaces</li><li>Use Unix line endings (LF, not CRLF)</li><li>One IP per line, no extra characters</li></ul><h3 id=secrets-not-found>Secrets Not Found<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Error: &ldquo;Secret SSH_PRIVATE_KEY not found&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Verify secret name exactly matches: <code>SSH_PRIVATE_KEY</code></li><li>Check secret is in repository secrets (not environment secrets)</li><li>Ensure you have repository admin access</li></ul><h2 id=security-best-practices>Security Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Follow these best practices for secure operations:</p><ul><li>âœ… Use GitHub Secrets for all private keys</li><li>âœ… Rotate SSH keys regularly</li><li>âœ… Keep runner in private VPC subnet</li><li>âœ… Restrict runner security group to minimal access</li><li>âœ… Update runner software regularly</li><li>âœ… Enable branch protection rules</li><li>âœ… Use separate keys for different environments</li><li>âœ… Enable audit logging for repository access</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With GitHub configured and the runner set up, you&rsquo;re ready to explore the available workflows and execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=understanding-workflows>Understanding Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=available-workflows>Available Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub Actions lab includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management. All workflow files are available in the repository at <code>.github/workflows/</code>.</p><p><strong>Repository</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><h2 id=workflow-categories>Workflow Categories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-deployment-1-workflow>1. Deployment (1 workflow)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=deploy-smart-agent-batched>Deploy Smart Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>deploy-agent-batched.yml</code></li><li><strong>Purpose</strong>: Installs Smart Agent and starts the service</li><li><strong>Features</strong>:<ul><li>Automatic batching (default: 256 hosts per batch)</li><li>Configurable batch size</li><li>Parallel deployment within each batch</li><li>Sequential batch processing</li></ul></li><li><strong>Inputs</strong>:<ul><li><code>batch_size</code>: Number of hosts per batch (default: 256)</li></ul></li><li><strong>Trigger</strong>: Manual only (<code>workflow_dispatch</code>)</li></ul><h3 id=2-agent-installation-4-workflows>2. Agent Installation (4 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All installation workflows use <code>smartagentctl</code> to install specific agent types:</p><h4 id=install-node-agent-batched>Install Node Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-machine-agent-batched>Install Machine Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-db-agent-batched>Install DB Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-java-agent-batched>Install Java Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=3-agent-uninstallation-4-workflows>3. Agent Uninstallation (4 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All uninstallation workflows use <code>smartagentctl</code> to remove specific agent types:</p><h4 id=uninstall-node-agent-batched>Uninstall Node Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-machine-agent-batched>Uninstall Machine Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-db-agent-batched>Uninstall DB Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-java-agent-batched>Uninstall Java Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=4-smart-agent-management-2-workflows>4. Smart Agent Management (2 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=stop-and-clean-smart-agent-batched>Stop and Clean Smart Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>stop-clean-smartagent-batched.yml</code></li><li><strong>Commands</strong>:<ul><li><code>smartagentctl stop</code></li><li><code>smartagentctl clean</code></li></ul></li><li><strong>Purpose</strong>: Stops the Smart Agent service and purges all data</li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=cleanup-all-agents-batched>Cleanup All Agents (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>cleanup-appdynamics.yml</code></li><li><strong>Command</strong>: <code>sudo rm -rf /opt/appdynamics</code></li><li><strong>Purpose</strong>: Completely removes the /opt/appdynamics directory</li><li><strong>Batched</strong>: Yes (configurable)</li><li><strong>Warning</strong>: This permanently deletes all AppDynamics components</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>The &ldquo;Cleanup All Agents&rdquo; workflow permanently deletes <code>/opt/appdynamics</code>. This action cannot be undone. Use with caution!</p></div></details><h2 id=workflow-structure>Workflow Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All batched workflows follow a consistent two-job structure:</p><h3 id=job-1-prepare>Job 1: Prepare<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>prepare</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>batches</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.create-batches.outputs.batches }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Load hosts and create batches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        # Load DEPLOYMENT_HOSTS variable
</span></span></span><span class=line><span class=cl><span class=sd>        # Split into batches of N hosts
</span></span></span><span class=line><span class=cl><span class=sd>        # Output as JSON array</span></span></span></code></pre></div><p><strong>Purpose</strong>: Loads target hosts from GitHub variables and creates batch matrix</p><h3 id=job-2-deployinstalluninstall>Job 2: Deploy/Install/Uninstall<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>prepare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>batch</span><span class=p>:</span><span class=w> </span><span class=l>${{ fromJson(needs.prepare.outputs.batches) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup SSH key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Execute operation on all hosts in batch (parallel)</span></span></span></code></pre></div><p><strong>Purpose</strong>: Runs in parallel for each batch, executing the specific operation on all hosts within the batch</p><h2 id=batching-behavior>Batching Behavior<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=how-it-works>How It Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Prepare Job</strong> loads <code>DEPLOYMENT_HOSTS</code> and splits into batches</li><li><strong>Deploy Job</strong> creates one matrix entry per batch</li><li><strong>Batches process sequentially</strong> to avoid overwhelming the runner</li><li><strong>Within each batch</strong>, all hosts deploy in parallel using background processes</li></ol><h3 id=configurable-batch-size>Configurable Batch Size<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All workflows accept a <code>batch_size</code> input (default: 256):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via GitHub CLI</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Via GitHub UI</span>
</span></span><span class=line><span class=cl>Actions â†’ Select workflow â†’ Run workflow â†’ Set batch_size</span></span></code></pre></div><h3 id=examples>Examples<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>100 hosts, batch_size=256</strong>: 1 batch, ~3 minutes</li><li><strong>500 hosts, batch_size=256</strong>: 2 batches, ~6 minutes</li><li><strong>1,000 hosts, batch_size=128</strong>: 8 batches, ~16 minutes</li><li><strong>5,000 hosts, batch_size=256</strong>: 20 batches, ~60 minutes</li></ul><h2 id=workflow-execution-order>Workflow Execution Order<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=typical-deployment-sequence>Typical Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Deploy Smart Agent</strong> - Initial deployment</li><li><strong>Install Machine Agent</strong> - Install specific agents as needed</li><li><strong>Install DB Agent</strong> - Install database monitoring</li><li>(Use other install workflows as needed)</li></ol><h3 id=maintenanceupdate-sequence>Maintenance/Update Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services and clean data</li><li><strong>Deploy Smart Agent</strong> - Redeploy with updated version</li><li><strong>Install agents again</strong> - Reinstall required agents</li></ol><h3 id=complete-removal-sequence>Complete Removal Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services</li><li><strong>Cleanup All Agents</strong> - Remove /opt/appdynamics directory</li></ol><h2 id=viewing-workflow-code>Viewing Workflow Code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can view the complete workflow YAML files in the repository:</p><p><strong>Main deployment workflow:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml rel=external>https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml</a></p><p><strong>All workflows:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows rel=external>https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows</a></p><h2 id=workflow-features>Workflow Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=built-in-error-handling>Built-in Error Handling<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Per-host error tracking</li><li>Failed host reporting</li><li>Batch-level failure handling</li><li>Always-executed summary</li></ul><h3 id=parallel-execution>Parallel Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>All hosts within a batch deploy simultaneously</li><li>Uses SSH background processes (<code>&</code>)</li><li>Wait command ensures all complete</li><li>Maximum parallelism within resource limits</li></ul><h3 id=security>Security<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>SSH keys never exposed in logs</li><li>Credentials bound as environment variables</li><li>Strict host key checking disabled for automation</li><li>Keys removed after workflow completion</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the available workflows, let&rsquo;s execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=running-workflows>Running Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=triggering-workflows>Triggering Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflows are configured with <code>workflow_dispatch</code>, meaning they must be triggered manually. There are two main ways to run workflows:</p><ol><li><strong>GitHub UI</strong> - Visual interface, easiest for most users</li><li><strong>GitHub CLI</strong> - Command-line interface, great for automation</li></ol><h2 id=method-1-github-ui>Method 1: GitHub UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=step-1-navigate-to-actions-tab>Step 1: Navigate to Actions Tab<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to your forked repository on GitHub</li><li>Click the <strong>Actions</strong> tab at the top</li></ol><h3 id=step-2-select-workflow>Step 2: Select Workflow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>On the left sidebar, you&rsquo;ll see all available workflows:</p><ul><li>Deploy Smart Agent</li><li>Install Node Agent (Batched)</li><li>Install Machine Agent (Batched)</li><li>Install DB Agent (Batched)</li><li>Install Java Agent (Batched)</li><li>Uninstall Node Agent (Batched)</li><li>Uninstall Machine Agent (Batched)</li><li>Uninstall DB Agent (Batched)</li><li>Uninstall Java Agent (Batched)</li><li>Stop and Clean Smart Agent (Batched)</li><li>Cleanup All Agents</li></ul><p>Click on the workflow you want to run.</p><h3 id=step-3-run-workflow>Step 3: Run Workflow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button (top right)</li><li>Select branch: <strong>main</strong></li><li>(Optional) Adjust <strong>batch_size</strong> if desired</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button</li></ol><h3 id=step-4-monitor-execution>Step 4: Monitor Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>The workflow will appear in the list below</li><li>Click on the workflow run to view details</li><li>Watch progress in real-time</li><li>Click on job names to see detailed logs</li></ol><h2 id=method-2-github-cli>Method 2: GitHub CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=install-github-cli>Install GitHub CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># macOS</span>
</span></span><span class=line><span class=cl>brew install gh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Linux</span>
</span></span><span class=line><span class=cl>curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg <span class=p>|</span> sudo dd <span class=nv>of</span><span class=o>=</span>/usr/share/keyrings/githubcli-archive-keyring.gpg
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [arch=</span><span class=k>$(</span>dpkg --print-architecture<span class=k>)</span><span class=s2> signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/github-cli.list &gt; /dev/null
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install gh</span></span></code></pre></div><h3 id=authenticate>Authenticate<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh auth login</span></span></code></pre></div><h3 id=run-workflows>Run Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Deploy Smart Agent (default batch size)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Deploy with custom batch size</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Uninstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Uninstall Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Complete cleanup</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=monitor-workflows>Monitor Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List recent workflow runs</span>
</span></span><span class=line><span class=cl>gh run list --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View specific run</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Watch run in progress</span>
</span></span><span class=line><span class=cl>gh run watch RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View failed logs</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --log-failed --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=first-deployment-walkthrough>First Deployment Walkthrough<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s walk through a complete first-time deployment:</p><h3 id=step-1-verify-setup>Step 1: Verify Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Before running any workflows, ensure:</p><ul><li>âœ… Self-hosted runner shows &ldquo;Idle&rdquo; (green)</li><li>âœ… <code>SSH_PRIVATE_KEY</code> secret is configured</li><li>âœ… <code>DEPLOYMENT_HOSTS</code> variable contains your target IPs</li><li>âœ… Network connectivity verified</li></ul><h3 id=step-2-deploy-smart-agent>Step 2: Deploy Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Via GitHub UI:</strong></p><ol><li>Go to <strong>Actions</strong> tab</li><li>Select <strong>&ldquo;Deploy Smart Agent&rdquo;</strong></li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li><li>Accept default batch_size (256)</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li></ol><p><strong>Via GitHub CLI:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=step-3-monitor-execution>Step 3: Monitor Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The workflow will show:</p><ol><li><strong>Prepare</strong> job - Creating batch matrix</li><li><strong>Deploy</strong> job (one per batch) - Deploying to hosts</li></ol><p>Click on each job to view detailed logs.</p><h3 id=step-4-verify-installation>Step 4: Verify Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH into a target host and check:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=step-5-install-additional-agents-optional>Step 5: Install Additional Agents (Optional)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If needed, install specific agent types:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Install Machine Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install DB Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=understanding-workflow-output>Understanding Workflow Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=prepare-job-output>Prepare Job Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Loading deployment hosts...
Total hosts: 1000
Batch size: 256
Creating 4 batches...
Batch 1: Hosts 1-256
Batch 2: Hosts 257-512
Batch 3: Hosts 513-768
Batch 4: Hosts 769-1000</code></pre></div><h3 id=deploy-job-output-per-batch>Deploy Job Output (per batch)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Processing batch 1 of 4
Deploying to 256 hosts in parallel...
Host 172.31.1.1: SUCCESS
Host 172.31.1.2: SUCCESS
Host 172.31.1.3: SUCCESS
...
Batch 1 complete: 256/256 succeeded</code></pre></div><h3 id=completion-summary>Completion Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Deployment Summary:
Total hosts: 1000
Successful: 998
Failed: 2
Failed hosts:
  - 172.31.1.48
  - 172.31.1.125</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Deploy Smart Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Verify deployment</span>
</span></span><span class=line><span class=cl><span class=c1># SSH to a host and check status</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Install agents as needed</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean current installation</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Update Smart Agent ZIP in repository</span>
</span></span><span class=line><span class=cl><span class=c1># (Push new version to repository)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Deploy new version</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Reinstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Update DEPLOYMENT_HOSTS variable in GitHub</span>
</span></span><span class=line><span class=cl><span class=c1># Add new IPs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Deploy to all hosts (will skip existing ones with idempotent logic)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span></span></span></code></pre></div><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Complete removal</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span></span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>&ldquo;Cleanup All Agents&rdquo; permanently deletes <code>/opt/appdynamics</code>. This cannot be undone!</p></div></details><h2 id=troubleshooting-workflow-failures>Troubleshooting Workflow Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=workflow-stays-in-queued>Workflow Stays in &ldquo;Queued&rdquo;<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflow doesn&rsquo;t start</p><p><strong>Cause</strong>: Runner not available or offline</p><p><strong>Solution</strong>:</p><ol><li>Check runner status: Settings â†’ Actions â†’ Runners</li><li>Verify runner shows &ldquo;Idle&rdquo; (green)</li><li>Restart runner if needed: <code>sudo ./svc.sh restart</code></li></ol><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Test SSH manually:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Check security groups:</strong></p><ul><li>Verify SSH (22) allowed from runner</li><li>Confirm runner and targets in same security group</li></ul><p><strong>Verify SSH key:</strong></p><ul><li>Ensure <code>SSH_PRIVATE_KEY</code> secret matches actual key</li><li>Verify public key is on target hosts</li></ul><h3 id=partial-batch-failures>Partial Batch Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li>View workflow logs to identify failed hosts</li><li>SSH to failed hosts to investigate</li><li>Re-run workflow (idempotent - skips successful hosts)</li></ol><h3 id=batch-job-errors>Batch Job Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Error splitting hosts into batches&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Check <code>DEPLOYMENT_HOSTS</code> variable format</li><li>Ensure one IP per line</li><li>No trailing spaces or special characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><h2 id=performance-tuning>Performance Tuning<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=adjusting-batch-size>Adjusting Batch Size<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Smaller batches</strong> (fewer resources, slower):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span></span></span></code></pre></div><p><strong>Larger batches</strong> (more resources, faster):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>256</span></span></span></code></pre></div><h3 id=runner-resource-recommendations>Runner Resource Recommendations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Hosts</th><th>CPU</th><th>Memory</th><th>Batch Size</th></tr></thead><tbody><tr><td>1-100</td><td>2 cores</td><td>4 GB</td><td>256</td></tr><tr><td>100-500</td><td>4 cores</td><td>8 GB</td><td>256</td></tr><tr><td>500-2000</td><td>8 cores</td><td>16 GB</td><td>256</td></tr><tr><td>2000+</td><td>16 cores</td><td>32 GB</td><td>256</td></tr></tbody></table><h2 id=best-practices>Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p><strong>Test on single host first</strong></p><ul><li>Create a test variable with 1 IP</li><li>Run workflow to verify</li><li>Then deploy to full list</li></ul></li><li><p><strong>Monitor workflow execution</strong></p><ul><li>Watch logs in real-time</li><li>Check for errors immediately</li><li>Verify on sample hosts</li></ul></li><li><p><strong>Use appropriate batch sizes</strong></p><ul><li>Default (256) works for most cases</li><li>Reduce if runner struggles</li><li>Monitor runner resource usage</li></ul></li><li><p><strong>Keep workflows up to date</strong></p><ul><li>Pull latest changes from repository</li><li>Test updates on non-production first</li><li>Document any customizations</li></ul></li><li><p><strong>Maintain runner health</strong></p><ul><li>Keep runner online and idle</li><li>Update runner software regularly</li><li>Monitor disk space and resources</li></ul></li></ol><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Congratulations! You&rsquo;ve successfully learned how to automate AppDynamics Smart Agent deployment using GitHub Actions. For more information, visit the <a href=https://github.com/chambear2809/github-actions-lab rel=external>complete repository</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1770160979 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1770160979 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1770160979 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770160979 defer></script><script src=/observability-workshop/js/theme.min.js?1770160979 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>