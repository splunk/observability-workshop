<!doctype html><html id=R-html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="Learn how to automate AppDynamics Smart Agent deployment and lifecycle management across multiple hosts using Jenkins pipelines."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Jenkins Automation :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Learn how to automate AppDynamics Smart Agent deployment and lifecycle management across multiple hosts using Jenkins pipelines."><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Jenkins Automation :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Learn how to automate AppDynamics Smart Agent deployment and lifecycle management across multiple hosts using Jenkins pipelines."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Jenkins Automation :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Learn how to automate AppDynamics Smart Agent deployment and lifecycle management across multiple hosts using Jenkins pipelines."><meta itemprop=dateModified content="2025-11-17T18:54:32-05:00"><meta itemprop=wordCount content="369"><title>Jenkins Automation :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/index.html rel=canonical type=text/html title="Jenkins Automation :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770901811 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770901811 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770901811 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770901811 defer></script><script src=/observability-workshop/js/search.min.js?1770901811 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1770901811"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770901811 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770901811 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770901811 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1770901811 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770901811 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770901811 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770901811 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770901811 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770901811 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/index.html",window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-youll-learn>What You&rsquo;ll Learn</a></li><li><a href=#key-features>Key Features</a></li><li><a href=#architecture-overview>Architecture Overview</a></li><li><a href=#workshop-components>Workshop Components</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#github-repository>GitHub Repository</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/15-appd-workshop/index.html><span itemprop=name>Splunk4Ninjas AppDynamics</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/index.html><span itemprop=name>SmartAgent Deployment</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Jenkins Automation</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/1-remote-installation/4-troubleshooting/index.html title="4. Troubleshooting (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/6-smartagent/2-jenkins-automation/1-architecture/index.html title="Architecture & Design (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=jenkins-automation>Jenkins Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop demonstrates how to use <strong>Jenkins</strong> to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage Jenkins pipelines for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-9da606428641b200651a959c43bf962c class=lightbox-link><img alt="Jenkins and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9da606428641b200651a959c43bf962c><img alt="Jenkins and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white"></a> <a href=#R-image-264d670930a2460c63d1b524326a425a class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-264d670930a2460c63d1b524326a425a><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts simultaneously using Jenkins</li><li><strong>Configure Jenkins credentials</strong> for secure SSH and AppDynamics access</li><li><strong>Create parameterized pipelines</strong> for flexible deployment scenarios</li><li><strong>Implement batch processing</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, configure, stop, and cleanup</li><li><strong>Handle failures gracefully</strong> with automatic error tracking and reporting</li></ul><h2 id=key-features>Key Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>ğŸš€ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>ğŸ”„ <strong>Complete Lifecycle Management</strong> - Install, uninstall, stop, and clean agents</li><li>ğŸ—ï¸ <strong>Infrastructure as Code</strong> - All pipelines version-controlled</li><li>ğŸ” <strong>Secure</strong> - SSH key-based authentication via Jenkins credentials</li><li>ğŸ“ˆ <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>ğŸ›ï¸ <strong>Jenkins Agent</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Jenkins-based Deployment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Developer â”€â”€â–¶ Jenkins Master â”€â”€â–¶ Jenkins Agent (AWS VPC)      â”‚
â”‚                                          â”‚                       â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 1 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 2 (SSH)      â”‚
â”‚                                          â”œâ”€â”€â–¶ Host 3 (SSH)      â”‚
â”‚                                          â””â”€â”€â–¶ Host N (SSH)      â”‚
â”‚                                                                  â”‚
â”‚  All hosts send metrics â”€â”€â–¶ AppDynamics Controller             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=workshop-components>Workshop Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the system design and network topology</li><li><strong>Jenkins Setup</strong> - Configuring Jenkins, credentials, and agents</li><li><strong>Pipeline Creation</strong> - Creating and configuring deployment pipelines</li><li><strong>Deployment Workflow</strong> - Executing deployments and verifying installations</li></ol><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Jenkins server (2.300+) with Pipeline plugin</li><li>Jenkins agent in the same VPC as target EC2 instances</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All pipeline code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/sm-jenkins rel=external>https://github.com/chambear2809/sm-jenkins</a></strong></p><p>The repository includes:</p><ul><li>Complete Jenkinsfile pipeline definitions</li><li>Detailed setup documentation</li><li>Configuration examples</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (â—€ï¸) and right (â–¶ï¸) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Jenkins Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Jenkins-based Smart Agent deployment system uses a hub-and-spoke architecture where a Jenkins agent in your AWS VPC orchestrates deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">graph TB
    subgraph &#34;Jenkins Infrastructure&#34;
        JM[Jenkins Master&lt;br/&gt;Web UI + Orchestration]
        JA[Jenkins Agent&lt;br/&gt;EC2 in VPC&lt;br/&gt;Label: linux]
    end
    
    subgraph &#34;AWS VPC - Private Network&#34;
        subgraph &#34;Target EC2 Instances&#34;
            H1[Host 1&lt;br/&gt;172.31.1.243]
            H2[Host 2&lt;br/&gt;172.31.1.48]
            H3[Host 3&lt;br/&gt;172.31.1.5]
            HN[Host N&lt;br/&gt;172.31.x.x]
        end
    end
    
    DEV[Developer/Operator]
    APPD[AppDynamics&lt;br/&gt;Controller]
    
    DEV --&gt;|1. Triggers Pipeline| JM
    JM --&gt;|2. Assigns Job| JA
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H1
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H2
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H3
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| HN
    
    H1 -.-&gt;|Metrics| APPD
    H2 -.-&gt;|Metrics| APPD
    H3 -.-&gt;|Metrics| APPD
    HN -.-&gt;|Metrics| APPD
    
    style JM fill:#d4e6f1
    style JA fill:#a9cce3
    style H1 fill:#aed6f1
    style H2 fill:#aed6f1
    style H3 fill:#aed6f1
    style HN fill:#aed6f1</pre><h2 id=network-architecture>Network Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The Jenkins agent communicates with target hosts via private IPs, eliminating the need for public IP addresses on target hosts.</p><h3 id=vpc-layout>VPC Layout<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AWS VPC (10.0.0.0/16)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Security Group: app-agents-sg                â”‚  â”‚
â”‚  â”‚  Rules:                                                   â”‚  â”‚
â”‚  â”‚  - Inbound: SSH (22) from Jenkins Agent only             â”‚  â”‚
â”‚  â”‚  - Outbound: HTTPS (443) to AppDynamics Controller       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Jenkins Agentâ”‚    â”‚  Target EC2  â”‚    â”‚  Target EC2  â”‚      â”‚
â”‚  â”‚              â”‚    â”‚              â”‚    â”‚              â”‚      â”‚
â”‚  â”‚ Private IP:  â”‚â”€â”€â”€â–¶â”‚ Private IP:  â”‚    â”‚ Private IP:  â”‚      â”‚
â”‚  â”‚ 172.31.50.10 â”‚SSH â”‚ 172.31.1.243 â”‚    â”‚ 172.31.1.48  â”‚      â”‚
â”‚  â”‚              â”‚â”€â”€â”€â–¶â”‚              â”‚    â”‚              â”‚      â”‚
â”‚  â”‚ Label: linux â”‚    â”‚ Ubuntu 20.04 â”‚    â”‚ Ubuntu 20.04 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AppDynamics    â”‚
                    â”‚    Controller    â”‚
                    â”‚  (SaaS/On-Prem)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h2 id=deployment-flow>Deployment Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">sequenceDiagram
    participant Dev as Developer
    participant JM as Jenkins Master
    participant JA as Jenkins Agent&lt;br/&gt;(VPC)
    participant TH as Target Hosts&lt;br/&gt;(VPC)
    participant AppD as AppDynamics&lt;br/&gt;Controller
    
    Dev-&gt;&gt;JM: 1. Trigger Pipeline
    JM-&gt;&gt;JM: 2. Load Credentials
    JM-&gt;&gt;JA: 3. Schedule Job
    JA-&gt;&gt;JA: 4. Prepare Batches
    
    loop For Each Batch
        JA-&gt;&gt;TH: 5. SSH Copy Files (SCP)
        JA-&gt;&gt;TH: 6. SSH Execute Commands
        TH-&gt;&gt;TH: 7. Install/Config Agent
        TH--&gt;&gt;JA: 8. Return Status
    end
    
    JA-&gt;&gt;JM: 9. Report Results
    JM-&gt;&gt;Dev: 10. Show Build Status
    
    TH-&gt;&gt;AppD: 11. Send Metrics (Post-Install)
    AppD--&gt;&gt;Dev: 12. View Monitoring Data</pre><h2 id=component-details>Component Details<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=jenkins-master>Jenkins Master<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Responsibilities:</strong></p><ul><li>Web UI for users</li><li>Pipeline orchestration</li><li>Credential management</li><li>Build history & logs</li><li>Job scheduling</li></ul><p><strong>Requirements:</strong></p><ul><li>Jenkins 2.300+</li><li>Plugins: Pipeline, SSH Agent, Credentials, Git</li><li>Network access to agent</li></ul><h3 id=jenkins-agent>Jenkins Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Execute pipeline stages</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Batching logic</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Label: <code>linux</code></li><li>Java 11+</li><li>SSH client</li><li>Network: SSH to all targets</li><li>Disk: ~20GB for artifacts</li></ul><h3 id=target-hosts>Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
â””â”€â”€ appdsmartagent/
    â”œâ”€â”€ smartagentctl
    â”œâ”€â”€ config.ini
    â””â”€â”€ agents/
        â”œâ”€â”€ machine/
        â”œâ”€â”€ java/
        â”œâ”€â”€ node/
        â””â”€â”€ db/</code></pre></div><h2 id=security-architecture>Security Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=security-layers>Security Layers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for agents</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>Whitelist Jenkins Agent IP</li><li>Port 22 (SSH) only</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in Jenkins credentials</li><li>Temporary key files (600 perms)</li><li>Keys removed after each build</li></ul></li><li><p><strong>Jenkins RBAC</strong></p><ul><li>Role-based access control</li><li>Pipeline-level permissions</li><li>Credential access restrictions</li><li>Audit logging enabled</li></ul></li><li><p><strong>Secrets Management</strong></p><ul><li>No secrets in code/logs</li><li>Credentials binding only</li><li>Environment variable masking</li><li>Automatic secret rotation (optional)</li></ul></li></ol><h3 id=credential-flow>Credential Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">flowchart LR
    subgraph &#34;Jenkins Master&#34;
        CS[Credentials Store&lt;br/&gt;Encrypted at Rest]
        JM[Jenkins Master]
    end
    
    subgraph &#34;Jenkins Agent&#34;
        WS[Workspace&lt;br/&gt;Temp Files]
        KEY[SSH Key File&lt;br/&gt;600 permissions]
    end
    
    subgraph &#34;Target Hosts&#34;
        TH[EC2 Instances&lt;br/&gt;Authorized Keys]
    end
    
    CS --&gt;|Binding| JM
    JM --&gt;|Secure Copy| KEY
    KEY --&gt;|SSH Auth| TH
    WS -.-&gt;|Cleanup| X[Deleted]
    KEY -.-&gt;|Cleanup| X
    
    style CS fill:#fdeaa8
    style KEY fill:#fadbd8
    style X fill:#e8e8e8</pre><h2 id=batch-processing>Batch Processing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The system uses automatic batching to support deployments at any scale. By default, hosts are processed in batches of 256, with all hosts within a batch deploying in parallel.</p><h3 id=how-batching-works>How Batching Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Host 002: 172.31.1.2      â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   BATCH 1        â”‚
    ...                              â”‚   Hosts 1-256    â”‚ â”€â”€â”€â”
Host 256: 172.31.1.256               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 257: 172.31.1.257               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
Host 258: 172.31.1.258   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   BATCH 2        â”‚    â”‚ SEQUENTIAL
    ...                              â”‚   Hosts 257-512  â”‚    â”‚ EXECUTION
Host 512: 172.31.1.512               â”‚   Sequential     â”‚    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
Host 513: 172.31.1.513               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    ...                              â”‚   BATCH 3        â”‚    â”‚
Host 768: 172.31.1.768   â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 513-768  â”‚ â”€â”€â”€â”˜
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Host 769: 172.31.1.769               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    ...                              â”‚   BATCH 4        â”‚
Host 1000: 172.31.2.232  â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Hosts 769-1000 â”‚
                                     â”‚   (232 hosts)    â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WITHIN EACH BATCH:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All hosts deploy in PARALLEL          â”‚
â”‚                                        â”‚
â”‚  Host 1 â”€â”€â”                           â”‚
â”‚  Host 2 â”€â”€â”¤                           â”‚
â”‚  Host 3 â”€â”€â”¼â”€â–¶ Background processes (&amp;)â”‚
â”‚    ...    â”‚                           â”‚
â”‚  Host 256â”€â”˜   â””â”€â–¶ wait command        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></div><h3 id=scaling-characteristics>Scaling Characteristics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts â†’ 1 batch â†’ ~2 minutes</li><li>100 hosts â†’ 1 batch â†’ ~3 minutes</li><li>500 hosts â†’ 2 batches â†’ ~6 minutes</li><li>1,000 hosts â†’ 4 batches â†’ ~12 minutes</li><li>5,000 hosts â†’ 20 batches â†’ ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Jenkins agent resources</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up Jenkins and configuring credentials.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=jenkins-setup>Jenkins Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before you begin, ensure you have:</p><ul><li>Jenkins server (version 2.300 or later)</li><li>A Jenkins agent in the same AWS VPC as your target EC2 instances</li><li>SSH key pair for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=required-jenkins-plugins>Required Jenkins Plugins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install these plugins via <strong>Manage Jenkins â†’ Plugins â†’ Available Plugins</strong>:</p><ol><li><strong>Pipeline</strong> (core plugin, usually pre-installed)</li><li><strong>SSH Agent Plugin</strong></li><li><strong>Credentials Plugin</strong> (usually pre-installed)</li><li><strong>Git Plugin</strong> (if using SCM)</li></ol><p>To install:</p><ol><li>Navigate to <strong>Manage Jenkins â†’ Plugins</strong></li><li>Click <strong>Available</strong> tab</li><li>Search for each plugin</li><li>Select and click <strong>Install</strong></li></ol><h2 id=configure-jenkins-agent>Configure Jenkins Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your Jenkins agent must be able to reach target EC2 instances via private IPs. There are two main options:</p><h3 id=option-a-ec2-instance-as-agent>Option A: EC2 Instance as Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>Launch EC2 instance in same VPC</strong> as your target hosts</p></li><li><p><strong>Install Java</strong> (required by Jenkins):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install -y openjdk-11-jdk</span></span></code></pre></div></li><li><p><strong>Add agent in Jenkins</strong>:</p><ul><li>Go to <strong>Manage Jenkins â†’ Nodes â†’ New Node</strong></li><li>Name: <code>aws-vpc-agent</code> (or your preferred name)</li><li>Type: <strong>Permanent Agent</strong></li><li>Configure:<ul><li><strong>Remote root directory</strong>: <code>/home/ubuntu/jenkins</code></li><li><strong>Labels</strong>: <code>linux</code> (must match pipeline agent label)</li><li><strong>Launch method</strong>: Launch agent via SSH</li><li><strong>Host</strong>: EC2 private IP</li><li><strong>Credentials</strong>: Add SSH credentials for agent</li></ul></li></ul></li></ol><h3 id=option-b-use-existing-linux-agent>Option B: Use Existing Linux Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Ensure agent has label <code>linux</code></li><li>Verify network connectivity to target hosts</li><li>Confirm SSH client is installed</li></ul><h3 id=configure-agent-labels>Configure Agent Labels<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>All pipelines in this workshop use the <code>linux</code> label. Make sure your agent is configured with this label.</p></div></details><p>To set or modify labels:</p><ol><li>Go to <strong>Manage Jenkins â†’ Nodes</strong></li><li>Click on your agent</li><li>Click <strong>Configure</strong></li><li>Set <strong>Labels</strong> to <code>linux</code></li><li>Click <strong>Save</strong></li></ol><h2 id=credentials-setup>Credentials Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Manage Jenkins â†’ Credentials â†’ System â†’ Global credentials (unrestricted)</strong></p><p>You&rsquo;ll need to create three credentials for the pipelines to work.</p><h3 id=1-ssh-private-key-for-target-hosts>1. SSH Private Key for Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential allows Jenkins to SSH into your target EC2 instances.</p><p><strong>Type</strong>: SSH Username with private key</p><ul><li><strong>ID</strong>: <code>ssh-private-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>SSH key for EC2 target hosts</code></li><li><strong>Username</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>Private Key</strong>: Choose one:<ul><li><strong>Enter directly</strong>: Paste your PEM file content</li><li><strong>From file</strong>: Upload PEM file</li><li><strong>From Jenkins master</strong>: Specify path</li></ul></li></ul><p><strong>Example format</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><h3 id=2-deployment-hosts-list>2. Deployment Hosts List<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential contains the list of all target hosts where Smart Agent should be deployed.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>deployment-hosts</code> (must match exactly)</li><li><strong>Description</strong>: <code>List of target EC2 host IPs</code></li><li><strong>Secret</strong>: Enter newline-separated IPs</li></ul><p><strong>Example</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul></div></details><h3 id=3-appdynamics-account-access-key>3. AppDynamics Account Access Key<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential contains your AppDynamics account access key for Smart Agent authentication.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>account-access-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>AppDynamics account access key</code></li><li><strong>Secret</strong>: Your AppDynamics access key</li></ul><p><strong>Example</strong>: <code>abcd1234-ef56-7890-gh12-ijklmnopqrst</code></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can find your AppDynamics access key in the Controller under <strong>Settings â†’ License â†’ Account</strong>.</p></div></details><h2 id=credential-security-best-practices>Credential Security Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Follow these best practices for credential management:</p><ul><li>âœ… Use Jenkins credential encryption (built-in)</li><li>âœ… Restrict access via Jenkins role-based authorization</li><li>âœ… Rotate SSH keys periodically</li><li>âœ… Use least-privilege IAM roles for EC2 instances</li><li>âœ… Enable audit logging for credential access</li><li>âœ… Never commit credentials to version control</li></ul><h2 id=smart-agent-package-setup>Smart Agent Package Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Smart Agent ZIP file should be placed in a location accessible to Jenkins. The recommended approach is to store it in the Jenkins home directory.</p><h3 id=download-smart-agent>Download Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Download from AppDynamics</span>
</span></span><span class=line><span class=cl>curl -o appdsmartagent_64_linux.zip <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;https://download.appdynamics.com/download/prox/download-file/smart-agent/latest/appdsmartagent_64_linux.zip&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Verify the download</span>
</span></span><span class=line><span class=cl>ls -lh appdsmartagent_64_linux.zip</span></span></code></pre></div><h3 id=storage-location>Storage Location<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The pipelines reference the Smart Agent ZIP at: <code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></p><p>You can either:</p><ol><li>Place the ZIP at this exact location</li><li>Modify the <code>SMARTAGENT_ZIP_PATH</code> pipeline parameter to point to your ZIP location</li></ol><h2 id=verify-configuration>Verify Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before proceeding to pipeline creation, verify your setup:</p><h3 id=1-check-agent-status>1. Check Agent Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Manage Jenkins â†’ Nodes</strong></li><li>Verify your agent shows as &ldquo;online&rdquo;</li><li>Confirm label is set to <code>linux</code></li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Create a simple test pipeline to verify SSH works:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;Test SSH&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>steps</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>                    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>keyFileVariable:</span> <span class=s1>&#39;SSH_KEY&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>usernameVariable:</span> <span class=s1>&#39;SSH_USER&#39;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>                    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;deployment-hosts&#39;</span><span class=o>,</span> <span class=nl>variable:</span> <span class=s1>&#39;HOSTS&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>sh</span> <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;Testing SSH credentials...&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;$HOSTS&#34; | head -1 | while read HOST; do
</span></span></span><span class=line><span class=cl><span class=s1>                            ssh -i $SSH_KEY \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o StrictHostKeyChecking=no \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o ConnectTimeout=10 \
</span></span></span><span class=line><span class=cl><span class=s1>                                $SSH_USER@$HOST \
</span></span></span><span class=line><span class=cl><span class=s1>                                &#34;echo &#39;Connection successful&#39;&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        done
</span></span></span><span class=line><span class=cl><span class=s1>                    &#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><h3 id=3-verify-credentials-exist>3. Verify Credentials Exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Manage Jenkins â†’ Credentials</strong></li><li>Confirm all three credentials are listed:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li></ol><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=agent-not-available>Agent Not Available<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;No agent available&rdquo; error when running pipelines</p><p><strong>Solution</strong>:</p><ul><li>Check: <strong>Manage Jenkins â†’ Nodes</strong></li><li>Ensure agent is online</li><li>Verify agent has <code>linux</code> label</li><li>Test agent connectivity</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Cannot connect to target hosts via SSH</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from agent</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on target</span></span></span></code></pre></div><h3 id=credential-not-found>Credential Not Found<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Credential not found&rdquo; error</p><p><strong>Solution</strong>:</p><ul><li>Verify credential IDs exactly match:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li><li>Check credential scope is set to <strong>Global</strong></li></ul><h3 id=permission-denied-on-target-hosts>Permission Denied on Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: SSH succeeds but commands fail with permission denied</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On target host, verify user is in sudoers</span>
</span></span><span class=line><span class=cl>sudo visudo
</span></span><span class=line><span class=cl><span class=c1># Add line:</span>
</span></span><span class=line><span class=cl>ubuntu <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span> NOPASSWD: ALL</span></span></code></pre></div><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that Jenkins is configured with credentials and agents, you&rsquo;re ready to create the deployment pipelines!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=pipeline-creation>Pipeline Creation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=overview>Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub repository contains four main pipelines for managing the Smart Agent lifecycle:</p><ol><li><strong>Deploy Smart Agent</strong> - Installs and starts Smart Agent service</li><li><strong>Install Machine Agent</strong> - Installs Machine Agent via smartagentctl</li><li><strong>Install Database Agent</strong> - Installs Database Agent via smartagentctl</li><li><strong>Cleanup All Agents</strong> - Removes /opt/appdynamics directory</li></ol><p>All pipeline code is available in the <a href=https://github.com/chambear2809/sm-jenkins rel=external>sm-jenkins GitHub repository</a>.</p><h2 id=pipeline-files>Pipeline Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The repository contains these Jenkinsfile pipeline definitions:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>sm-jenkins/
â””â”€â”€ pipelines/
    â”œâ”€â”€ Jenkinsfile.deploy                  # Deploy Smart Agent
    â”œâ”€â”€ Jenkinsfile.install-machine-agent  # Install Machine Agent
    â”œâ”€â”€ Jenkinsfile.install-db-agent       # Install Database Agent
    â””â”€â”€ Jenkinsfile.cleanup                # Cleanup All Agents</code></pre></div><h2 id=creating-pipelines-in-jenkins>Creating Pipelines in Jenkins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For each Jenkinsfile you want to use, follow these steps to create a pipeline in Jenkins.</p><h3 id=method-1-pipeline-from-scm-recommended>Method 1: Pipeline from SCM (Recommended)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This method keeps your pipeline code in version control and automatically syncs changes.</p><h4 id=step-1-fork-or-clone-the-repository>Step 1: Fork or Clone the Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>First, fork the repository to your own GitHub account or organization, or use the original repository directly.</p><p><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></p><h4 id=step-2-create-pipeline-in-jenkins>Step 2: Create Pipeline in Jenkins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click <strong>New Item</strong></li><li>Enter item name (e.g., <code>Deploy-Smart-Agent</code>)</li><li>Select <strong>Pipeline</strong></li><li>Click <strong>OK</strong></li></ol><h4 id=step-3-configure-pipeline>Step 3: Configure Pipeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>In the pipeline configuration page:</p><p><strong>General Section:</strong></p><ul><li><strong>Description</strong>: <code>Deploys AppDynamics Smart Agent to multiple hosts</code></li><li>Leave <strong>Discard old builds</strong> unchecked (or configure as desired)</li></ul><p><strong>Build Triggers:</strong></p><ul><li>Leave unchecked for manual-only execution</li><li>Or configure webhook/polling if desired</li></ul><p><strong>Pipeline Section:</strong></p><ul><li><strong>Definition</strong>: Select <code>Pipeline script from SCM</code></li><li><strong>SCM</strong>: Select <code>Git</code></li><li><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></li><li><strong>Credentials</strong>: Add if using a private repository</li><li><strong>Branch Specifier</strong>: <code>*/main</code> (or <code>*/master</code>)</li><li><strong>Script Path</strong>: <code>pipelines/Jenkinsfile.deploy</code></li></ul><h4 id=step-4-save>Step 4: Save<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Click <strong>Save</strong> to create the pipeline.</p><h4 id=step-5-repeat-for-other-pipelines>Step 5: Repeat for Other Pipelines<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Repeat steps 2-4 for each pipeline you want to create, using the appropriate script path:</p><table><thead><tr><th>Pipeline Name</th><th>Script Path</th></tr></thead><tbody><tr><td>Deploy-Smart-Agent</td><td><code>pipelines/Jenkinsfile.deploy</code></td></tr><tr><td>Install-Machine-Agent</td><td><code>pipelines/Jenkinsfile.install-machine-agent</code></td></tr><tr><td>Install-Database-Agent</td><td><code>pipelines/Jenkinsfile.install-db-agent</code></td></tr><tr><td>Cleanup-All-Agents</td><td><code>pipelines/Jenkinsfile.cleanup</code></td></tr></tbody></table><h3 id=method-2-direct-pipeline-script>Method 2: Direct Pipeline Script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Alternatively, you can copy the Jenkinsfile content directly into Jenkins.</p><ol><li><strong>Create New Item</strong> (same as Method 1)</li><li>In <strong>Pipeline</strong> section:<ul><li><strong>Definition</strong>: Select <code>Pipeline script</code></li><li><strong>Script</strong>: Copy/paste the entire Jenkinsfile content from GitHub</li></ul></li><li><strong>Save</strong></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Method 1 (SCM) is recommended because it keeps your pipelines in version control and makes updates easier.</p></div></details><h2 id=pipeline-parameters>Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Each pipeline accepts configurable parameters. Here are the key parameters for the main deployment pipeline:</p><h3 id=deploy-smart-agent-pipeline-parameters>Deploy Smart Agent Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>SMARTAGENT_ZIP_PATH</code></td><td><code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></td><td>Path to Smart Agent ZIP on Jenkins server</td></tr><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Installation directory on target hosts</td></tr><tr><td><code>APPD_USER</code></td><td><code>ubuntu</code></td><td>User to run Smart Agent process</td></tr><tr><td><code>APPD_GROUP</code></td><td><code>ubuntu</code></td><td>Group to run Smart Agent process</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>AGENT_NAME</code></td><td><code>smartagent</code></td><td>Smart Agent name</td></tr><tr><td><code>LOG_LEVEL</code></td><td><code>DEBUG</code></td><td>Log level (DEBUG, INFO, WARN, ERROR)</td></tr></tbody></table><h3 id=cleanup-pipeline-parameters>Cleanup Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Directory to remove</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>CONFIRM_CLEANUP</code></td><td><code>false</code></td><td>Must be checked to proceed with cleanup</td></tr></tbody></table><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The cleanup pipeline includes a confirmation parameter to prevent accidental deletion. You must check <code>CONFIRM_CLEANUP</code> to execute the cleanup.</p></div></details><h2 id=understanding-pipeline-structure>Understanding Pipeline Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s examine the key components of the deployment pipeline:</p><h3 id=1-agent-declaration>1. Agent Declaration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span></span></span></code></pre></div><p>This ensures the pipeline runs on a Jenkins agent with the <code>linux</code> label.</p><h3 id=2-parameters-block>2. Parameters Block<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>parameters</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;SMARTAGENT_ZIP_PATH&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;REMOTE_INSTALL_DIR&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ... more parameters
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Defines configurable parameters that can be set when triggering the build.</p><h3 id=3-stages>3. Stages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The deployment pipeline has these stages:</p><ol><li><strong>Preparation</strong> - Loads target hosts from credentials</li><li><strong>Extract Smart Agent</strong> - Extracts ZIP file to staging directory</li><li><strong>Configure Smart Agent</strong> - Creates config.ini template</li><li><strong>Deploy to Remote Hosts</strong> - Copies files and starts Smart Agent on each host</li><li><strong>Verify Installation</strong> - Checks Smart Agent status on all hosts</li></ol><h3 id=4-credentials-binding>4. Credentials Binding<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> <span class=o>...),</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;account-access-key&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Pipeline code with access to credentials
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Securely loads credentials without exposing them in logs.</p><h3 id=5-post-actions>5. Post Actions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>post</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>success</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>failure</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>always</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Defines actions to run after pipeline completion, regardless of success or failure.</p><h2 id=pipeline-naming-convention>Pipeline Naming Convention<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For clarity and organization, use a consistent naming convention:</p><p><strong>Recommended names:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>01-Deploy-Smart-Agent
02-Install-Machine-Agent
03-Install-Database-Agent
04-Cleanup-All-Agents</code></pre></div><p>The numeric prefix helps maintain logical ordering in the Jenkins dashboard.</p><h2 id=organizing-pipelines-with-folders>Organizing Pipelines with Folders<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For better organization, you can use Jenkins folders:</p><ol><li><p><strong>Create Folder</strong>:</p><ul><li>Click <strong>New Item</strong></li><li>Enter name: <code>AppDynamics Smart Agent</code></li><li>Select <strong>Folder</strong></li><li>Click <strong>OK</strong></li></ul></li><li><p><strong>Create Pipelines in Folder</strong>:</p><ul><li>Enter the folder</li><li>Create pipelines as described above</li></ul></li></ol><p><strong>Example structure:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>AppDynamics Smart Agent/
â”œâ”€â”€ Deployment/
â”‚   â””â”€â”€ 01-Deploy-Smart-Agent
â”œâ”€â”€ Agent Installation/
â”‚   â”œâ”€â”€ 02-Install-Machine-Agent
â”‚   â””â”€â”€ 03-Install-Database-Agent
â””â”€â”€ Cleanup/
    â””â”€â”€ 04-Cleanup-All-Agents</code></pre></div><h2 id=viewing-pipeline-code>Viewing Pipeline Code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can view the complete pipeline code in the GitHub repository:</p><p><strong>Main deployment pipeline:</strong>
<a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy rel=external>https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy</a></p><p><strong>Other pipelines:</strong></p><ul><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-machine-agent rel=external>Jenkinsfile.install-machine-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-db-agent rel=external>Jenkinsfile.install-db-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.cleanup rel=external>Jenkinsfile.cleanup</a></li></ul><h2 id=testing-pipeline-configuration>Testing Pipeline Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before running a full deployment, test your pipeline configuration:</p><h3 id=1-dry-run-with-single-host>1. Dry Run with Single Host<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Create a test credential <code>deployment-hosts-test</code> with only one IP</li><li>Temporarily modify your pipeline to use this credential</li><li>Run the pipeline and verify it works on a single host</li><li>Once verified, update to use the full host list</li></ol><h3 id=2-check-syntax>2. Check Syntax<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Jenkins provides a built-in syntax validator:</p><ol><li>Go to your pipeline</li><li>Click <strong>Pipeline Syntax</strong> link</li><li>Use the <strong>Declarative Directive Generator</strong> to validate syntax</li></ol><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With pipelines created, you&rsquo;re ready to execute your first Smart Agent deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment-workflow>Deployment Workflow</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=first-deployment>First Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that your pipelines are configured, let&rsquo;s walk through executing your first Smart Agent deployment.</p><h3 id=step-1-navigate-to-pipeline>Step 1: Navigate to Pipeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click on your <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><h3 id=step-2-build-with-parameters>Step 2: Build with Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p>Click <strong>Build with Parameters</strong> in the left sidebar</p></li><li><p>Review the default parameters:</p><ul><li><strong>SMARTAGENT_ZIP_PATH</strong>: Verify path is correct</li><li><strong>REMOTE_INSTALL_DIR</strong>: <code>/opt/appdynamics/appdsmartagent</code></li><li><strong>APPD_USER</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>APPD_GROUP</strong>: <code>ubuntu</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li><li><strong>AGENT_NAME</strong>: <code>smartagent</code></li><li><strong>LOG_LEVEL</strong>: <code>DEBUG</code></li></ul></li><li><p>Adjust parameters if needed</p></li><li><p>Click <strong>Build</strong></p></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>For your first deployment, consider testing on a single host by creating a separate credential with just one IP address.</p></div></details><h3 id=step-3-monitor-pipeline-execution>Step 3: Monitor Pipeline Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After clicking <strong>Build</strong>, you&rsquo;ll see:</p><ol><li><strong>Build added to queue</strong> - Build number appears in Build History</li><li><strong>Click build number</strong> (e.g., #1) to view details</li><li><strong>Click Console Output</strong> to view real-time logs</li></ol><h3 id=step-4-understanding-console-output>Step 4: Understanding Console Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The console output shows each stage of the deployment:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Started by user admin
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on aws-vpc-agent in /home/ubuntu/jenkins/workspace/Deploy-Smart-Agent
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Preparation)
[Pipeline] script
[Pipeline] {
Preparing Smart Agent deployment to 3 hosts: 172.31.1.243, 172.31.1.48, 172.31.1.5
...</code></pre></div><p>Key stages you&rsquo;ll see:</p><ol><li>âœ… <strong>Preparation</strong> - Loads and validates host list</li><li>âœ… <strong>Extract Smart Agent</strong> - Extracts ZIP file</li><li>âœ… <strong>Configure Smart Agent</strong> - Creates config.ini</li><li>âœ… <strong>Deploy to Remote Hosts</strong> - Deploys to each host</li><li>âœ… <strong>Verify Installation</strong> - Checks Smart Agent status</li></ol><h3 id=step-5-review-results>Step 5: Review Results<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After completion, you&rsquo;ll see:</p><p><strong>Success:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent successfully deployed to all hosts
Finished: SUCCESS</code></pre></div><p><strong>Partial Success:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Deployment completed with some failures
Failed hosts: 172.31.1.48
Finished: UNSTABLE</code></pre></div><p><strong>Failure:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent deployment failed. Check logs for details.
Finished: FAILURE</code></pre></div><h2 id=verifying-installation>Verifying Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After a successful deployment, verify Smart Agent is running on target hosts.</p><h3 id=check-smart-agent-status>Check Smart Agent Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH into a target host and check the status:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target host</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Navigate to installation directory</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=list-installed-agents>List Installed Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>No agents currently installed
(Use install-machine-agent or install-db-agent pipelines to add agents)</code></pre></div><h3 id=check-logs>Check Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>tail -f log.log</span></span></code></pre></div><p>Look for successful connection messages to the AppDynamics controller.</p><h3 id=verify-in-appdynamics-controller>Verify in AppDynamics Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Log into your AppDynamics Controller</li><li>Navigate to <strong>Servers â†’ Servers</strong></li><li>Look for your newly deployed hosts</li><li>Verify Smart Agent is reporting metrics</li></ol><h2 id=installing-additional-agents>Installing Additional Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once Smart Agent is deployed, you can install specific agent types using the other pipelines.</p><h3 id=install-machine-agent>Install Machine Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Install-Machine-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Review parameters:<ul><li><strong>AGENT_NAME</strong>: <code>machine-agent</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li></ul></li><li>Click <strong>Build</strong></li></ol><p>The pipeline will SSH to each host and execute:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl install --component machine</span></span></code></pre></div><h3 id=install-database-agent>Install Database Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Install-Database-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Configure database connection parameters</li><li>Click <strong>Build</strong></li></ol><p>The pipeline will install and configure the Database Agent on all hosts.</p><h3 id=verify-agent-installation>Verify Agent Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After installing agents, verify they appear:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Installed agents:
- machine-agent (running)
- db-agent (running)</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Workflow:</strong></p><ol><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li><li>Wait for completion and verify</li><li>Run <strong>Install-Machine-Agent</strong> if needed</li><li>Run <strong>Install-Database-Agent</strong> if needed</li></ol><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To update Smart Agent to a new version:</p><ol><li>Download new Smart Agent ZIP</li><li>Place it in Jenkins at configured path</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline again</li></ol><p>The pipeline automatically:</p><ul><li>Stops existing Smart Agent</li><li>Removes old files</li><li>Installs new version</li><li>Restarts Smart Agent</li></ul><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To add Smart Agent to new hosts:</p><ol><li>Update the <code>deployment-hosts</code> credential in Jenkins</li><li>Add new IP addresses (one per line)</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><p>The pipeline will:</p><ul><li>Skip already-configured hosts (if idempotent)</li><li>Deploy to new hosts only</li></ul><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To completely remove Smart Agent from all hosts:</p><ol><li>Go to <strong>Cleanup-All-Agents</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li><strong>Check</strong> the <code>CONFIRM_CLEANUP</code> checkbox</li><li>Click <strong>Build</strong></li></ol><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>This will permanently delete <code>/opt/appdynamics/appdsmartagent</code> directory from all hosts. This action cannot be undone.</p></div></details><h2 id=troubleshooting-deployments>Troubleshooting Deployments<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=build-fails-at-preparation-stage>Build Fails at Preparation Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Pipeline fails when loading host list</p><p><strong>Cause</strong>: Missing or incorrect <code>deployment-hosts</code> credential</p><p><strong>Solution</strong>:</p><ol><li>Go to <strong>Manage Jenkins â†’ Credentials</strong></li><li>Verify <code>deployment-hosts</code> credential exists</li><li>Check format (one IP per line, no commas)</li><li>Ensure no trailing spaces</li></ol><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Check security group:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify Jenkins agent can reach target</span>
</span></span><span class=line><span class=cl>ping 172.31.1.243
</span></span><span class=line><span class=cl>telnet 172.31.1.243 <span class=m>22</span></span></span></code></pre></div><p><strong>Test SSH manually:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Verify SSH key:</strong></p><ol><li>Ensure <code>ssh-private-key</code> credential is correct</li><li>Verify public key is in <code>~/.ssh/authorized_keys</code> on target hosts</li></ol><h3 id=smart-agent-fails-to-start>Smart Agent Fails to Start<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Deployment completes but Smart Agent not running</p><p><strong>Solution</strong>:</p><p><strong>Check logs on target host:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>cat log.log</span></span></code></pre></div><p><strong>Common issues:</strong></p><ul><li><strong>Invalid access key</strong>: Check <code>account-access-key</code> credential</li><li><strong>Network connectivity</strong>: Verify outbound HTTPS to Controller</li><li><strong>Permission issues</strong>: Ensure APPD_USER has correct permissions</li></ul><h3 id=partial-deployment-success>Partial Deployment Success<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li><strong>Check Console Output</strong> - Identifies which hosts failed</li><li><strong>Investigate failed hosts</strong> - SSH and test manually</li><li><strong>Re-run pipeline</strong> - Jenkins tracks which hosts need retry</li></ol><h2 id=pipeline-best-practices>Pipeline Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-test-on-single-host-first>1. Test on Single Host First<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Always test new configurations on a single host before deploying to production:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>1. Create deployment-hosts-test credential (1 IP)
2. Create test pipeline pointing to this credential
3. Verify success
4. Deploy to full host list</code></pre></div><h3 id=2-use-descriptive-build-descriptions>2. Use Descriptive Build Descriptions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After triggering a build, add a description:</p><ol><li>Go to build page</li><li>Click <strong>Edit Build Information</strong></li><li>Add description: &ldquo;Production deployment - Q4 2024&rdquo;</li></ol><h3 id=3-monitor-build-history>3. Monitor Build History<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Regularly check build history for patterns:</p><ul><li>Failed builds</li><li>Duration trends</li><li>Error messages</li></ul><h3 id=4-schedule-deployments-during-maintenance-windows>4. Schedule Deployments During Maintenance Windows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For production systems:</p><ul><li>Use Jenkins scheduled builds</li><li>Deploy during low-traffic periods</li><li>Have rollback plan ready</li></ul><h3 id=5-keep-credentials-updated>5. Keep Credentials Updated<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Rotate SSH keys quarterly</li><li>Update host lists as infrastructure changes</li><li>Verify AppDynamics access key validity</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now let&rsquo;s explore scaling and operational considerations for large deployments.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1770901811 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1770901811 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1770901811 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770901811 defer></script><script src=/observability-workshop/js/theme.min.js?1770901811 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>