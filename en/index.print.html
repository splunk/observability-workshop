<!doctype html><html id=R-html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="Learn how to build observability solutions with Splunk"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Splunk Observability Workshops :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Learn how to build observability solutions with Splunk"><meta property="og:url" content="https://splunk.github.io/observability-workshop/en/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Splunk Observability Workshops :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Learn how to build observability solutions with Splunk"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Splunk Observability Workshops :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Learn how to build observability solutions with Splunk"><meta itemprop=dateModified content="2026-01-30T15:41:34+00:00"><meta itemprop=wordCount content="96"><title>Splunk Observability Workshops :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/en/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/ja/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/en/index.html rel=canonical type=text/html title="Splunk Observability Workshops :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770895853 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770895853 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770895853 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770895853 defer></script><script src=/observability-workshop/js/search.min.js?1770895853 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.en.js?1770895853"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770895853 defer></script><script src=/observability-workshop/js/lunr/lunr.en.min.js?1770895853 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770895853 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770895853 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770895853 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770895853 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770895853 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/index.html",window.relearn.relBasePath="..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/en/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Splunk Observability Workshops</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle"><span><i class="fa-fw fas fa-chevron-left"></i></span></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/en/splunk4rookies/index.html title="Splunk4Rookies Workshops (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable page" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=splunk-observability-workshops>Splunk Observability Workshops</h1><details open class="box cstyle notices splunk"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-circle-info"></i>
Welcome</summary><div class=box-content><p>Get insights into your applications and infrastructure in real-time with the help of the monitoring, analytics and response tools of the Splunk Observability Cloud</p><p>These workshops are going to take you through the best-in-class observability platform for ingesting, monitoring, visualizing and analyzing metrics, traces and logs.</p></div></details><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-5edbdf2032f69ce44fa35d403d9a159b><div class=card-content><div class=card-title id=R-card-5edbdf2032f69ce44fa35d403d9a159b><a href=/observability-workshop/en/splunk4rookies/index.html>Splunk4Rookies Workshops</a></div><div class=card-content-text>The following workshops are for Rookies.</div></div><div class=card-image><img src=/observability-workshop/en/splunk4rookies/images/s4r-featured.png></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-42f3883796cf76245541ac04941106b1><div class=card-content><div class=card-title id=R-card-42f3883796cf76245541ac04941106b1><a href=/observability-workshop/en/ninja-workshops/index.html>Splunk4Ninjas Workshops</a></div><div class=card-content-text>The following workshops require Ninja skills, wax on, wax off.</div></div><div class=card-image><img src=/observability-workshop/en/ninja-workshops/images/s4n-featured.png></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-9083e5324e2773a095e8d055c587df3b><div class=card-content><div class=card-title id=R-card-9083e5324e2773a095e8d055c587df3b><a href=/observability-workshop/en/scenarios/index.html>Scenarios</a></div><div class=card-content-text>Learn how to build observability solutions with Splunk</div></div><div class=card-image><img src=/observability-workshop/en/scenarios/images/featured-scenarios.jpg></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-14eb11e11e7e796987a1aad9d3c07e16><div class=card-content><div class=card-title id=R-card-14eb11e11e7e796987a1aad9d3c07e16><a href=/observability-workshop/en/resources/index.html>Resources</a></div><div class=card-content-text>Resources for learning about Splunk Observability Cloud</div></div><div class=card-image><img src=/observability-workshop/en/resources/images/featured-resources.png></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-c2d2a98d73e58e5b7295b130d8438bf2><div class=card-content><div class=card-title id=R-card-c2d2a98d73e58e5b7295b130d8438bf2><a href=/observability-workshop/en/unsupported-field-workshops/index.html>Unsupported Field Workshops</a></div><div class=card-content-text>Workshops that use unsupported fields in Splunk Observability Cloud</div></div><div class=card-image><img src=/observability-workshop/en/unsupported-field-workshops/images/featured-unsupported.jpg></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk Observability Workshops</h1><article class=default><header class=headline></header><h1 id=splunk4rookies-workshops>Splunk4Rookies Workshops</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-00e92dd027d66301fe01405e28b76eb6><div class=card-content><div class=card-title id=R-card-00e92dd027d66301fe01405e28b76eb6><a href=/observability-workshop/en/splunk4rookies/observability-cloud/index.html>Observability Cloud</a></div><div class=card-content-text>In this workshop, we will be showing how Splunk Observability Cloud provides instant visibility of the user experience ‚Äì from the perspective of the front-end application to its back-end services ‚Äì Letting you experience some of the most compelling product features and differentiators of Splunk Observability Cloud.</div></div><div class=card-image><img src=/observability-workshop/en/splunk4rookies/observability-cloud/images/featured.png></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-340147b035db94db8f7e6c68c136593e><div class=card-content><div class=card-title id=R-card-340147b035db94db8f7e6c68c136593e><a href=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/index.html>Financial Services Observability Cloud</a></div><div class=card-content-text>This workshop, tailored for the Financial Services sector, will demonstrate how Splunk Observability Cloud delivers real-time insights into user experience, spanning from front-end applications to back-end services. You&rsquo;ll explore key product features and unique advantages that set Splunk Observability Cloud apart.</div></div><div class=card-image><img src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/images/featured.png></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk4Rookies Workshops</h1><article class=default><header class=headline></header><h1 id=observability-cloud>Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Authors
</span><span class=badge-content>Robert Castley & Pieter Hagen</span></span><p>In this workshop, we&rsquo;ll demonstrate how Splunk Observability Cloud delivers instant visibility into the user experience‚Äîcovering everything from front-end applications to back-end services. You‚Äôll have the opportunity to explore some of the platform‚Äôs most powerful features, which set it apart from other observability solutions:</p><ul><li><strong>Infrastructure Monitoring</strong></li><li><strong>Full-fidelity Real User Monitoring (RUM)</strong></li><li><strong>Complete end-to-end trace visibility with NoSample Full-fidelity Application Performance Monitoring (APM)</strong></li><li><strong>No-code log querying</strong></li><li><strong>Synthetic Monitoring</strong></li><li><strong>Root cause analysis with tag analytics and error stacks</strong></li><li><strong>Related Content</strong> for seamless navigation between components</li></ul><p>One of the core strengths of Splunk Observability Cloud is its ability to unify telemetry data, creating a comprehensive picture of both the end-user experience and your entire application stack.</p><p>The workshop will focus on a microservices-based e-commerce application deployed on AWS EC2 instances. Users can browse products, add items to a cart, and complete purchases. This application is fully instrumented with OpenTelemetry to capture detailed performance data.</p><p><strong>What is OpenTelemetry?</strong><br>OpenTelemetry is an open-source collection of tools, APIs, and software development kits (SDKs) designed to help you instrument, generate, collect, and export telemetry data‚Äîsuch as metrics, traces, and logs. This data enables in-depth analysis of your software‚Äôs performance and behavior.</p><p>The OpenTelemetry community is growing rapidly, supported by leading companies like Splunk, Google, Microsoft, and Amazon. It currently has the second-largest number of contributors within the Cloud Native Computing Foundation, following only Kubernetes.</p><p><a href=#R-image-24a94854cc20f0083c994c210e53d623 class=lightbox-link><img alt="Full Stack" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/images/featured.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-24a94854cc20f0083c994c210e53d623><img alt="Full Stack" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/images/featured.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Observability Cloud</h1><article class=default><header class=headline></header><h1 id=workshop-overview>Workshop Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p><strong>Introduction</strong><br>The goal of this workshop is to give you hands-on experience troubleshooting an issue using Splunk Observability Cloud to identify its root cause. We‚Äôve provided a fully instrumented microservices-based application running on Kubernetes, which sends metrics, traces, and logs to Splunk Observability Cloud for real-time analysis.</p><p><strong>Who Should Attend?</strong><br>This workshop is ideal for anyone looking to gain practical knowledge of Splunk Observability. It&rsquo;s designed for individuals with little or no prior experience with the platform.</p><p><strong>What You‚Äôll Need</strong><br>All you need is your laptop and a browser with access to external websites. The workshop can be attended either in-person or via Zoom. If you don‚Äôt have the Zoom client installed, you can still join using your browser.</p><p><strong>Workshop Overview</strong><br>In this 3-hour session, we‚Äôll cover the fundamentals of Splunk Observability‚Äîthe only platform offering streaming analytics and NoSample Full Fidelity distributed tracing‚Äîin an interactive, hands-on setting. Here&rsquo;s what you can expect:</p><ul><li><p><strong>OpenTelemetry</strong><br>Learn why OpenTelemetry is essential for modern observability and how it enhances visibility into your systems.</p></li><li><p><strong>Tour of the Splunk Observability User Interface</strong><br>Take a guided tour of Splunk Observability Cloud‚Äôs interface, where we‚Äôll show you how to navigate the five key components: APM, RUM, Log Observer, Synthetics, and Infrastructure.</p></li><li><p><strong>Generate Real User Data</strong><br>Dive into a simulated retail experience on the Online Boutique Website. Using your browser, mobile, or tablet, explore the site and generate real user data that includes metrics (Is there a problem?), traces (Where is the problem?), and logs (What‚Äôs causing the problem?).</p></li><li><p><strong>Splunk Real User Monitoring (RUM)</strong><br>Analyze the real user data collected from participants‚Äô browser sessions. Your task is to identify poorly performing sessions and begin the troubleshooting process.</p></li><li><p><strong>Splunk Application Performance Monitoring (APM)</strong><br>Gain end-to-end visibility by linking a RUM trace (front-end) to an APM trace (back-end). You‚Äôll explore how telemetry from various services is captured and visualized in Splunk Observability Cloud, helping you detect anomalies and errors.</p></li><li><p><strong>Splunk Log Observer (LO)</strong><br>Learn how to leverage the &ldquo;Related Content&rdquo; feature to easily navigate between components. In this case, we‚Äôll move from an APM trace to the related logs for deeper insight into issues.</p></li><li><p><strong>Splunk Synthetics</strong><br>Discover how Synthetics can help with 24/7 monitoring of your application. We‚Äôll walk you through setting up a simple synthetic test that runs every minute to monitor the performance and availability of the Online Boutique website.</p></li></ul><p>By the end of this session, you&rsquo;ll have gained practical experience with Splunk Observability Cloud and a solid understanding of how to troubleshoot and resolve issues across your application stack.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=what-is-opentelemetry--why-should-you-care>What is OpenTelemetry & why should you care?</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=opentelemetry>OpenTelemetry<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With the rise of cloud computing, microservices architectures, and ever-more complex business requirements, the need for Observability has never been greater. Observability is the ability to understand the internal state of a system by examining its outputs. In the context of software, this means being able to understand the internal state of a system by examining its telemetry data, which includes <strong>metrics</strong>, <strong>traces</strong>, and <strong>logs</strong>.</p><p>To make a system observable, it must be instrumented. That is, the code must emit traces, metrics, and logs. The instrumented data must then be sent to an Observability back-end such as <strong>Splunk Observability Cloud</strong>.</p><table><thead><tr><th style=text-align:center>Metrics</th><th style=text-align:center>Traces</th><th style=text-align:center>Logs</th></tr></thead><tbody><tr><td style=text-align:center><em><strong>Do I have a problem?</strong></em></td><td style=text-align:center><em><strong>Where is the problem?</strong></em></td><td style=text-align:center><em><strong>What is the problem?</strong></em></td></tr></tbody></table><p>OpenTelemetry does two important things:</p><ul><li>Allows you to <strong>own</strong> the data that you generate rather than be stuck with a proprietary data format or tool.</li><li>Allows you to learn <strong>a single set</strong> of APIs and conventions</li></ul><p>These two things combined enable teams and organizations the flexibility they need in today‚Äôs modern computing world.</p><p>There are a lot of variables to consider when getting started with Observability, including the all-important question: <em>&ldquo;How do I get my data into an Observability tool?&rdquo;</em>. The industry-wide adoption of OpenTelemetry makes this question easier to answer than ever.</p><h2 id=why-should-you-care>Why Should You Care?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>OpenTelemetry is completely open-source and free to use. In the past, monitoring and Observability tools relied heavily on proprietary agents meaning that the effort required to change or set up additional tooling required a large amount of changes across systems, from the infrastructure level to the application level.</p><p>Since OpenTelemetry is vendor-neutral and supported by many industry leaders in the Observability space, adopters can switch between supported Observability tools at any time with minor changes to their instrumentation. This is true regardless of which distribution of OpenTelemetry is used ‚Äì like with Linux, the various distributions bundle settings and add-ons but are all fundamentally based on the community-driven OpenTelemetry project.</p><p>Splunk has fully committed to OpenTelemetry so that our customers can collect and use <strong>ALL</strong> their data, in any type, any structure, from any source, on any scale, and all in real-time. OpenTelemetry is fundamentally changing the monitoring landscape, enabling IT and DevOps teams to bring data to every question and every action. You will experience this during these workshops.</p><p><a href=#R-image-8f75a501869b56849bda6ebe9e22baf8 class=lightbox-link><img alt="OpenTelemetry Logo" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/2-opentelemetry/images/otel.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f75a501869b56849bda6ebe9e22baf8><img alt="OpenTelemetry Logo" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/2-opentelemetry/images/otel.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=ui---quick-tour->UI - Quick Tour üöå</h1><p>We are going to start with a short walkthrough of the various components of Splunk Observability Cloud. The aim of this is to get you familiar with the UI.</p><ol><li><strong>Signing in to Splunk Observability Cloud</strong></li><li><strong>Real User Monitoring (RUM)</strong></li><li><strong>Application Performance Monitoring (APM)</strong></li><li><strong>Log Observer</strong></li><li><strong>Synthetics</strong></li><li><strong>Infrastructure Monitoring</strong></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. UI - Quick Tour</h1><article class=default><header class=headline></header><h1 id=getting-started>Getting Started</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h3 id=1-sign-in-to-splunk-observability-cloud>1. Sign in to Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You should have received an e-mail from Splunk inviting you to the Workshop Org. This e-mail will look like the screenshot below, if you cannot find it, please check your Spam/Junk folders or inform your Instructor. You can also check for other solutions in our <a href=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/1-homepage/99-login-faq/index.html><strong>login F.A.Q.</strong></a>.</p><p>To proceed click the <strong>Join Now</strong> button or click on the link provided in the e-mail.</p><p>If you have already completed the registration process you can skip the rest and proceed directly to Splunk Observability Cloud and log in:</p><ul><li><a href=https://app.eu0.signalfx.com rel=external><strong>https://app.eu0.signalfx.com (EMEA)</strong></a></li><li><a href=https://app.us1.signalfx.com rel=external><strong>https://app.us1.signalfx.com (APAC/AMER)</strong></a></li></ul><p><a href=#R-image-c375548b50c1f936ec6b0cfa89c35ead class=lightbox-link><img alt=email class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/1-homepage/images/invite-email.png?width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c375548b50c1f936ec6b0cfa89c35ead><img alt=email class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/1-homepage/images/invite-email.png?width=25vw"></a></p><p>If this is your first time using Splunk Observability Cloud, you will be presented with the registration form. Enter your full name, and desired password. Please note that the password requirements are:</p><ul><li><strong>Must</strong> be between 8 and 32 characters</li><li><strong>Must</strong> contain at least one capital letter</li><li><strong>Must</strong> have at least one number</li><li><strong>Must</strong> have at least one symbol (e.g. !@#$%^&*()_+)</li></ul><p>Click the checkbox to agree to the terms and conditions and click the <strong>SIGN IN NOW</strong> button.</p><p><a href=#R-image-3ef4d9fb794f78c9ceea828319e0c6c9 class=lightbox-link><img alt=User-Setup class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/1-homepage/images/enter-password.png?width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3ef4d9fb794f78c9ceea828319e0c6c9><img alt=User-Setup class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/1-homepage/images/enter-password.png?width=25vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=home-page>Home Page</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>After you have registered and logged into Splunk Observability Cloud you will be taken to the home or landing page. Here, you will find several useful features to help you get started.</p><p><a href=#R-image-ffd2c133ea2b3026e2c945b4cde49bfb class=lightbox-link><img alt="home page" class="lazy lightbox figure-image" loading=lazy src=../images/home-page.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ffd2c133ea2b3026e2c945b4cde49bfb><img alt="home page" class="lazy lightbox lightbox-image" loading=lazy src=../images/home-page.png></a></p><ol><li><strong>Expand/Contract Main Menu:</strong> Expand <strong>&#187;</strong> / Collapse <strong>&#171;</strong> the main menu if space is at a premium.</li><li><strong>Org Switcher:</strong> Switch between Organizations (if you are a member of more than one Organization).</li><li><strong>Teams:</strong> Focus on assets of interest to the Teams you belong to.</li><li><strong>Active Alerts:</strong> Quickly see what might require your immediate attention.</li><li><strong>AI Assistant:</strong> Accelerate root cause analysis and get expert guidance to find and fix issues faster.</li></ol><p>Let&rsquo;s start with our first exercise:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on your name in the top right and check the Organization name.</li><li>If you are not in <strong>Observability Workshop AMER</strong>, select it now.</li><li>At the bottom of the menu, select your preferred appearance: <strong>Light</strong>, <strong>Dark</strong> or <strong>Auto</strong> mode.</li><li>Did you also notice this is where the <strong>Log Out</strong> option is? Please don&rsquo;t üòä !</li></ul></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you have used Splunk Observability before, you may be placed in an Organization you have used previously. Make sure you are in the correct workshop organization. Verify this with your instructor if you have access to multiple Organizations.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><p>Click the help icon and select <strong>Onboarding Guidance</strong>. (You can toggle the visibility of the onboarding panes. This is useful if you know the product well enough, and can use the space to show more information).</p></li><li><p>Hide the Onboarding Content for the <strong>Home Page</strong>.</p></li><li><p>Click <strong>&lt;</strong> to get back to the main menu.</p></li></ul></div></details><p>Next, let&rsquo;s check out <strong>Splunk Real User Monitoring (RUM)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=real-user-monitoring-overview>Real User Monitoring Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk RUM is the industry‚Äôs only end-to-end, <strong>NoSample</strong> RUM solution - providing visibility into the full user experience of every web and mobile session to uniquely combine all front-end traces with back-end metrics, traces, and logs as they happen. IT Operations and Engineering teams can quickly scope, prioritize and isolate errors, measure how performance impacts real users and optimize end-user experiences by correlating performance metrics alongside video reconstructions of all user interactions.</p><p><strong>Full user session analysis:</strong> Streaming analytics capture full user sessions from single and multi-page apps, measuring the customer impact of every resource, image, route change and API call.<br><strong>Correlate issues faster:</strong> Infinite cardinality and full transaction analysis help you pinpoint and correlate issues faster across complex distributed systems.<br><strong>Isolate latency and errors:</strong> Easily identify latency, errors and poor performance for each code change and deployment. Measure how content, images and third-party dependencies impact your customers.<br><strong>Benchmark and improve page performance:</strong> Leverage core web vitals to measure and improve your page load experience, interactivity and visual stability. Find and fix impactful JavaScript errors, and easily understand which pages to improve first.<br><strong>Explore meaningful metrics:</strong> Instantly visualize the customer impact with metrics on specific workflows, custom tags and auto-suggest un-indexed tags to quickly find the root cause of issues.<br><strong>Optimize end-user experience:</strong> Correlate performance metrics alongside video reconstructions of all user interactions to optimize end-user experiences.</p><p><a href=#R-image-73806236a383d9f129effde79202d5fc class=lightbox-link><img alt="Architecture Overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/2-rum-home/images/rum-architecture.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-73806236a383d9f129effde79202d5fc><img alt="Architecture Overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/2-rum-home/images/rum-architecture.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. RUM Overview</h1><article class=default><header class=headline></header><h1 id=real-user-monitoring-home-page>Real User Monitoring Home Page</h1><p>Click <strong>RUM</strong> in the main menu, this will bring you to the main RUM Home or Landing page. The main concept of this page is to provide you at a glance, the overall status of all selected RUM applications, either in a full dashboard or the compact view.</p><p>Independent of the type of Status Dashboard used, the RUM Home Page is made up of 3 distinct sections:</p><p><a href=#R-image-3a855fca61f6aa231614c0ad0e1622a8 class=lightbox-link><img alt="RUM Page" class="lazy lightbox figure-image" loading=lazy src=../images/rum-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3a855fca61f6aa231614c0ad0e1622a8><img alt="RUM Page" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-main.png></a></p><ol><li><strong>Onboarding Pane:</strong> Training videos and links to documentation to get you started with Splunk RUM. (You can hide this pane in case you need the screen real estate).</li><li><strong>Filter Pane:</strong> Filter on the time frame, environment, application and source type.</li><li><strong>Application Summary Pane:</strong> Summary of all your applications that send RUM data.</li></ol><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
RUM Environments & Application and Source Type</summary><div class=box-content><ul><li>Splunk Observability uses the <strong>environments</strong> Tag that is sent as part of the RUM trace, (created with every interaction with your website or Mobile App), to separate data coming from different environments like &ldquo;Production&rdquo; or &ldquo;Development&rdquo;.</li><li>A further separation can be made by the <strong>Applications</strong> Tag. This allows you to distinguish between separate browser/mobile applications running in the same environment.</li><li>Splunk RUM is available for both browser and mobile applications, you could use <strong>Source Type</strong> to distinguish between them, however for this workshop, we will only use browser-based RUM.</li></ul></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Ensure the time window is set to <strong>-15m</strong></li><li>Select the environment for your workshop from the drop-down box. The naming convention is <strong>[NAME OF WORKSHOP]-workshop</strong> (Selecting this will make sure the workshop RUM application is visible)</li><li>Select the <strong>App</strong> name. There the naming convention is <strong>[NAME OF WORKSHOP]-store</strong> and leave <strong>Source</strong> set to <strong>All</strong></li><li>In the <strong>JavaScript Errors</strong> tile click on the <strong>TypeError</strong> entry that says: <em>Cannot read properties of undefined (reading &lsquo;Prcie&rsquo;)</em> to see more details. Note that you are given a quick indication of what part of the website the error occurred, allowing you to fix this quickly.</li><li>Close the pane.</li><li>The 3rd tile reports <strong>Web Vitals</strong>, a metric that focuses on three important aspects of the user experience: <em>loading</em>, <em>interactivity</em>, and <em>visual stability</em>.</li></ul><div class=tab-panel data-tab-group=R-tabs-5c7883c71c830cd6324de0ee8d47ea23><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-69779fb869f084735fae2058dfc50d3a aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5c7883c71c830cd6324de0ee8d47ea23","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-767636a53ee346f1ad59baf5e2ce2b96 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5c7883c71c830cd6324de0ee8d47ea23","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-69779fb869f084735fae2058dfc50d3a data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Based on the <strong>Web Vitals</strong> metrics, how do you rate the current web performance of the site?</strong></p></div></div><div id=R-tab-id-767636a53ee346f1ad59baf5e2ce2b96 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>According to the <em>Web Vitals</em> Metrics, the initial load of the site is OK and is rated <em>Good</em></strong></p></div></div></div></div><ul><li>The last tile, <strong>Most recent detectors</strong> tile, will show if any alerts have been triggered for the application.</li><li>Click on the down <strong>‚åµ</strong> arrow in front of the Application name to toggle the view to the compact style. Note that you have all the main information available in this view as well. Click anywhere in the compact view to go back to the full view.</li></ul></div></details><p>Next, let&rsquo;s check out <strong>Splunk Application Performance Monitoring (APM)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=application-performance-monitoring-overview>Application Performance Monitoring Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk APM provides a <strong>NoSample</strong> end-to-end visibility of every service and its dependency to solve problems quicker across monoliths and microservices. Teams can immediately detect problems from new deployments, confidently troubleshoot by scoping and isolating the source of an issue, and optimize service performance by understanding how back-end services impact end users and business workflows.</p><p><strong>Real-time monitoring and alerting:</strong> Splunk provides out-of-the-box service dashboards and automatically detects and alerts on RED metrics (rate, error and duration) when there is a sudden change.
<strong>Dynamic telemetry maps:</strong> Easily visualize service performance in modern production environments in real-time. End-to-end visibility of service performance from infrastructure, applications, end users, and all dependencies helps quickly scope new issues and troubleshoot more effectively.<br><strong>Intelligent tagging and analysis:</strong> View all tags from your business, infrastructure and applications in one place to easily compare new trends in latency or errors to their specific tag values.<br><strong>AI-directed troubleshooting identifies the most impactful issues:</strong> Instead of manually digging through individual dashboards, isolate problems more efficiently. Automatically identify anomalies and the sources of errors that impact services and customers the most.<br><strong>Complete distributed tracing analyses every transaction:</strong> Identify problems in your cloud-native environment more effectively. Splunk distributed tracing visualizes and correlates every transaction from the back-end and front-end in context with your infrastructure, business workflows and applications.<br><strong>Full stack correlation:</strong> Within Splunk Observability, APM links traces, metrics, logs and profiling together to easily understand the performance of every component and its dependency across your stack.<br><strong>Monitor database query performance:</strong> Easily identify how slow and high execution queries from SQL and NoSQL databases impact your services, endpoints and business workflows ‚Äî no instrumentation required.</p><p><a href=#R-image-e7d4d19ea3f318dadc6c90dfa2ccf064 class=lightbox-link><img alt="Architecture Overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/3-apm-home/images/arch-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7d4d19ea3f318dadc6c90dfa2ccf064><img alt="Architecture Overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/3-apm-home/images/arch-overview.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. APM Overview</h1><article class=default><header class=headline></header><h1 id=application-performance-monitoring-home-page>Application Performance Monitoring Home page</h1><p>Click <strong>APM</strong> in the main menu, the APM Home Page is made up of 3 distinct sections:</p><p><a href=#R-image-02f8d054d64495fef6c85e0104c4e445 class=lightbox-link><img alt="APM page" class="lazy lightbox figure-image" loading=lazy src=../images/apm-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-02f8d054d64495fef6c85e0104c4e445><img alt="APM page" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-main.png></a></p><ol><li><strong>Onboarding Pane Pane:</strong> Training videos and links to documentation to get you started with Splunk APM.</li><li><strong>APM Overview Pane:</strong> Real-time metrics for the Top Services and Top Business Workflows.</li><li><strong>Functions Pane:</strong> Links for deeper analysis of your services, tags, traces, database query performance and code profiling.</li></ol><p>The <strong>APM Overview</strong> pan provides a high-level view of the health of your application. It includes a summary of the services, latency and errors in your application. It also includes a list of the top services by error rate and the top business workflows by error rate (a business workflow is the start-to-finish journey of the collection of traces associated with a given activity or transaction and enables monitoring of end-to-end KPIs and identifying root causes and bottlenecks).</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
About Environments</summary><div class=box-content><p>To easily differentiate between multiple applications, Splunk uses <strong>environments</strong>. The naming convention for workshop environments is <strong>[NAME OF WORKSHOP]-workshop</strong>. Your instructor will provide you with the correct one to select.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Verify that the time window we are working with is set to the last 15 minutes (<strong>-15m</strong>).</li><li>Change the environment to the workshop one by selecting its name from the drop-down box and make sure that is the only one selected.</li></ul><div class=tab-panel data-tab-group=R-tabs-d75476398f933f7a25eedc7038d67945><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ff9ae9e6602f61b1605ea2539159f8c6 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d75476398f933f7a25eedc7038d67945","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-0941abede2379b5005d7e1e759a71a1a aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d75476398f933f7a25eedc7038d67945","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-ff9ae9e6602f61b1605ea2539159f8c6 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What can you conclude from the <em>Top Services by Error Rate</em> chart?</strong></p></div></div><div id=R-tab-id-0941abede2379b5005d7e1e759a71a1a data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The <em>paymentservice</em> has a high error rate</strong></p></div></div></div></div></div></details><p>If you scroll down the Overview Page you will notice some services listed have <strong>Inferred Service</strong> next to them.</p><p>Splunk APM can infer the presence of the remote service, or inferred service if the span calling the remote service has the necessary information. Examples of possible inferred services include databases, HTTP endpoints, and message queues. Inferred services are not instrumented, but they are displayed on the service map and the service list.</p><p>Next, let&rsquo;s check out <strong>Splunk Log Observer (LO)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=log-observer-overview>Log Observer Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Log Observer Connect allows you to seamlessly bring in the same log data from your Splunk Platform into an intuitive and <strong>no-code</strong> interface designed to help you find and fix problems quickly. You can easily perform log-based analysis and seamlessly correlate your logs with Splunk Infrastructure Monitoring‚Äôs real-time metrics and Splunk APM traces in one place.</p><p><strong>End-to-end visibility:</strong> By combining the powerful logging capabilities of Splunk Platform with Splunk Observability Cloud‚Äôs traces and real-time metrics for deeper insights and more context of your hybrid environment.<br><strong>Perform quick and easy log-based investigations:</strong> By reusing logs that are already ingested in Splunk Cloud Platform or Enterprise in a simplified and intuitive interface (no need to know SPL!) with customizable and out-of-the-box dashboards<br><strong>Achieve higher economies of scale and operational efficiency:</strong> By centralizing log management across teams, breaking down data and team silos, and getting better overall support</p><p><a href=#R-image-b9654c890a98857bded24c167fd14e80 class=lightbox-link><img alt="Logo graph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/4-log-observer-home/images/logo-image-loop.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b9654c890a98857bded24c167fd14e80><img alt="Logo graph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/4-log-observer-home/images/logo-image-loop.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Log Observer Overview</h1><article class=default><header class=headline></header><h1 id=log-observer-home-page>Log Observer Home Page</h1><p>Click <strong>Log Observer</strong> in the main menu, the Log Observer Home Page is made up of 4 distinct sections:</p><p><a href=#R-image-9cee522c235ac81d68e622e925d42f74 class=lightbox-link><img alt="Lo Page" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9cee522c235ac81d68e622e925d42f74><img alt="Lo Page" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-main.png></a></p><ol><li><strong>Onboarding Pane:</strong> Training videos and links to documentation to get you started with Splunk Log Observer.</li><li><strong>Filter Bar:</strong> Filter on time, indexes, and fields and also Save Queries.</li><li><strong>Logs Table Pane:</strong> List of log entries that match the current filter criteria.</li><li><strong>Fields Pane:</strong> List of fields available in the currently selected index.</li></ol><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Splunk indexes</summary><div class=box-content><p>Generally, in Splunk, an &ldquo;index&rdquo; refers to a designated place where your data is stored. It&rsquo;s like a folder or container for your data. Data within a Splunk index is organized and structured in a way that makes it easy to search and analyze. Different indexes can be created to store specific types of data. For example, you might have one index for web server logs, another for application logs, and so on.</p></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you have used Splunk Enterprise or Splunk Cloud before, you are probably used to starting investigations with logs. As you will see in the following exercise, you can do that with Splunk Observability Cloud as well. This workshop, however, will use all the <strong>OpenTelemetry</strong> signals for investigations.</p></div></details><p>Let&rsquo;s run a little search exercise:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><p>Set the time frame to <strong>-15m</strong>.</p></li><li><p>Click on <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Add Filter</span></span></span> in the filter bar then click on <strong>Fields</strong> in the dialog.</p></li><li><p>Type in <strong>cardType</strong> and select it.</p></li><li><p>Under <strong>Top values</strong> click on <strong>visa</strong>, then click on <strong>=</strong> to add it to the filter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p><p><a href=#R-image-444c10b3e1b3a5597164c8675af1b348 class=lightbox-link><img alt="logo search" class="lazy lightbox figure-image" loading=lazy src="../images/log-filter-bar.png?width=920px" style=height:auto;width:920px></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-444c10b3e1b3a5597164c8675af1b348><img alt="logo search" class="lazy lightbox lightbox-image" loading=lazy src="../images/log-filter-bar.png?width=920px"></a></p></li><li><p>Click on one of the log entries in the Logs table to validate that the entry contains <code>cardType: "visa"</code>.</p></li><li><p>Let&rsquo;s find all the orders that have been shipped. Click on <strong>Clear All</strong> in the filter bar to remove the previous filter.</p></li><li><p>Click again on <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Add Filter</span></span></span> in the filter bar, then select <strong>Keyword</strong>. Next just type <code>order</code> in the <strong>Enter Keyword&mldr;</strong> box and press enter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p></li><li><p>You should now only have log lines that contain the word <code>order</code>. There are still a lot of log lines, so let&rsquo;s filter some more.</p></li><li><p>Add another filter, this time select the <strong>Fields</strong> box, then type <code>severity</code> in the <strong>Find a field &mldr;</strong> search box and select it.
<a href=#R-image-5fc28c4e9eca9230ec9dfa85e1269f3e class=lightbox-link><img alt=severity class="lazy left lightbox figure-image" loading=lazy src="../images/find-severity.png?width=15vw&classes=left" style=height:auto;width:15vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5fc28c4e9eca9230ec9dfa85e1269f3e><img alt=severity class="lazy left lightbox lightbox-image" loading=lazy src="../images/find-severity.png?width=15vw&classes=left"></a></p></li><li><p>Under <strong>Top values</strong> click on <strong>error</strong>, then click on <strong>=</strong> to add it to the filter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p></li><li><p>You should now have a list of orders that failed to complete for the last 15 minutes.</p></li></ul></div></details><p>Next, let&rsquo;s check out <strong>Splunk Synthetics</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=synthetics-overview>Synthetics Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk Synthetic Monitoring provides visibility across URLs, APIs and critical web services to solve problems faster. IT Operations and engineering teams can easily detect, alert and prioritize issues, simulate multi-step user journeys, measure business impact from new code deployments and optimize web performance with guided step-by-step recommendations to ensure better digital experiences.</p><p><strong>Ensure Availability:</strong> Proactively monitor and alert on the health and availability of critical services, URLs and APIs with customizable browser tests to simulate multi-step workflows that make up the user experience.<br><strong>Improve Metrics:</strong> Core Web Vitals and modern performance metrics allow users to view all their performance defects in one place, measure and improve page load, interactivity and visual stability, and find and fix JavaScript errors to improve page performance.<br><strong>front-end to back-end:</strong> Integrations with Splunk APM, Infrastructure Monitoring, On-Call and ITSI help teams view endpoint uptime against back-end services, the underlying infrastructure and within their incident response coordination so they can troubleshoot across their entire environment, in a single UI.<br><strong>Detect and Alert:</strong> Monitor and simulate end-user experiences to detect, communicate and resolve issues for APIs, service endpoints and critical business transactions before they impact customers.<br><strong>Business Performance:</strong> Easily define multi-step user flows for key business transactions and start recording and testing your critical user journeys in minutes. Track and report SLAs and SLOs for uptime and performance.<br><strong>Filmstrips and Video Playback:</strong> View screen recordings, film strips, and screenshots alongside modern performance scores, competitive benchmarking, and metrics to visualize artificial end-user experiences. Optimize how fast you deliver visual content, and improve page stability and interactivity to deploy better digital experiences.</p><p><a href=#R-image-04a014af040af8ead48e702f67ebd60f class=lightbox-link><img alt="Synthetics overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/5-synthetics-home/images/synthetic-tests.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-04a014af040af8ead48e702f67ebd60f><img alt="Synthetics overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/5-synthetics-home/images/synthetic-tests.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Synthetics Overview</h1><article class=default><header class=headline></header><h1 id=synthetics-home-page>Synthetics Home Page</h1><p>Click on <strong>Synthetics</strong> in the main menu. This will bring us to the Synthetics Home Page. It has 3 distinct sections that provide either useful information or allow you to pick or create a Synthetic Test.</p><p><a href=#R-image-d115080eb05fb7332d73007ef678ecc0 class=lightbox-link><img alt="Synthetic main" class="lazy lightbox figure-image" loading=lazy src=../images/synthetics-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d115080eb05fb7332d73007ef678ecc0><img alt="Synthetic main" class="lazy lightbox lightbox-image" loading=lazy src=../images/synthetics-main.png></a></p><ol><li><strong>Onboarding Pane:</strong> Training videos and links to documentation to get you started with Splunk Synthetics.</li><li><strong>Test Pane:</strong> List of all the tests that are configured (<strong>Browser</strong>, <strong>API</strong> and <strong>Uptime</strong>)</li><li><strong>Create Test Pane:</strong> Drop-down for creating new Synthetic tests.</li></ol><p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>As part of the workshop we have created a default browser test against the application we are running. You find it in the Test Pane <strong>(2)</strong>. It will have the following name <strong>Workshop Browser Test for</strong>, followed by the name of your Workshop (your instructor should have provided that to you).</p></div></details>To continue our tour, let&rsquo;s look at the result of our workshop&rsquo;s automatic browser test.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the Test Pane, click on the line that contains the name of your workshop. The result should look like this:</li></ul><p><a href=#R-image-23169a4ff64b011464a16cce28ceb0a7 class=lightbox-link><img alt=Synthetics-overview class="lazy lightbox figure-image" loading=lazy src=../images/synthetics-test-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-23169a4ff64b011464a16cce28ceb0a7><img alt=Synthetics-overview class="lazy lightbox lightbox-image" loading=lazy src=../images/synthetics-test-overview.png></a></p><ul><li>Note, On the Synthetic Tests Page, the first pane will show the performance of your site for the last day, 8 days and 30 days. As shown in the screenshot above, only if a test started far enough in the past, the corresponding chart will contain valid data. For the workshop, this depends on when it was created.</li><li>In the Performance KPI drop-down, change the time from the default 4 hours to the 1 last hour.</li></ul><div class=tab-panel data-tab-group=R-tabs-325fe7cfeed287a346acc140eb449a89><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-eae6999d4faa50bde2b81377a5e50ed5 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-325fe7cfeed287a346acc140eb449a89","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-c2459ed99b892362aec4b9ffddb78d24 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-325fe7cfeed287a346acc140eb449a89","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-eae6999d4faa50bde2b81377a5e50ed5 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>How often is the test run, and from where?</strong></p></div></div><div id=R-tab-id-c2459ed99b892362aec4b9ffddb78d24 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The test runs at <strong>a 1-minute <strong>round-robin</strong> interval from</strong> Frankfurt, London and Paris</strong></p></div></div></div></div></div></details><p>Next, let‚Äôs examine the infrastructure our application is running on using <strong>Splunk Infrastructure Monitoring (IM)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=infrastructure-overview>Infrastructure Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk Infrastructure Monitoring (IM) is a market-leading monitoring and observability service for hybrid cloud environments. Built on a patented streaming architecture, it provides a <strong>real-time</strong> solution for engineering teams to visualize and analyze performance across infrastructure, services, and applications in a fraction of the time and with greater accuracy than traditional solutions.</p><p><strong>OpenTelemetry standardization:</strong> Gives you full control over your data ‚Äî freeing you from vendor lock-in and implementing proprietary agents.<br><strong>Splunk‚Äôs OTel Collector:</strong> Seamless installation and dynamic configuration, auto-discovers your entire stack in seconds for visibility across clouds, services, and systems.<br><strong>300+ Easy-to-use OOTB content:</strong> Pre-built navigators and dashboards, deliver immediate visualizations of your entire environment so that you can interact with all your data in real time.<br><strong>Kubernetes navigator:</strong> Provides an instant, comprehensive out-of-the-box hierarchical view of nodes, pods, and containers. Ramp up even the most novice Kubernetes user with easy-to-understand interactive cluster maps.<br><strong>AutoDetect alerts and detectors:</strong> Automatically identify the most important metrics, out-of-the-box, to create alert conditions for detectors that accurately alert from the moment telemetry data is ingested and use real-time alerting capabilities for important notifications in seconds.<br><strong>Log views in dashboards:</strong> Combine log messages and real-time metrics on one page with common filters and time controls for faster in-context troubleshooting.<br><strong>Metrics pipeline management:</strong> Control metrics volume at the point of ingest without re-instrumentation with a set of aggregation and data-dropping rules to store and analyze only the needed data. Reduce metrics volume and optimize observability spend.</p><p><a href=#R-image-d583e0f2d76ed5a280480e4e76134179 class=lightbox-link><img alt="Infrastructure Overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/6-infrastructure-home/images/infrastructure-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d583e0f2d76ed5a280480e4e76134179><img alt="Infrastructure Overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/3-quick-tour/6-infrastructure-home/images/infrastructure-overview.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 30, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=lets-go-shopping->Let's go shopping üí∂</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>You are a <strong>hip urban professional</strong>, longing to buy your next novelty items in the famous Online Boutique shop. You have heard that the Online Boutique is the place to go for all your hipster needs.</p></div></details><p>The purpose of this exercise is for you to interact with the Online Boutique web application. This is a sample application that is used to demonstrate the capabilities of Splunk Observability Cloud. The application is a simple e-commerce site that allows you to browse items, add them to your cart, and then checkout.</p><p>The application will already be deployed for you and your instructor will provide you with a link to the Online Boutique website e.g:</p><ul><li><strong>http://&lt;s4r-workshop-i-xxx.splunk>.show:81/</strong>. The application is also running on ports <strong>80</strong> & <strong>443</strong> if you prefer to use those or port <strong>81</strong> is unreachable.</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise - Let&rsquo;s go shopping</summary><div class=box-content><ul><li>Once you have the link to the Online Boutique, have a browse through a few items, add them to your cart and then, finally, do a checkout.</li><li>Repeat this exercise a few times and if possible use different browsers, mobile devices or tablets as this will generate more data for you to explore.</li></ul></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>While you are waiting for pages to load, please move your mouse cursor around the page. This will generate more data for us to explore at a later date in this workshop.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise (cont.)</summary><div class=box-content><ul><li>Did you notice anything about the checkout process? Did it seem to take a while to complete, but it did ultimately complete? When this happens please copy the <strong>Order Confirmation ID</strong> and save it locally somewhere as we will need it later.</li><li>Close the browser sessions you used to shop.</li></ul></div></details><p>This is what a poor user experience can feel like and since this is a potential customer satisfaction issue we had better jump on this and troubleshoot.</p><p><a href=#R-image-477f9736e5006e1052fa29b946bdd342 class=lightbox-link><img alt="Online Boutique" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/4-online-boutique/images/shop.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-477f9736e5006e1052fa29b946bdd342><img alt="Online Boutique" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/observability-cloud/4-online-boutique/images/shop.png></a></p><p>Let‚Äôs go take a look at what the data looks like in <strong>Splunk RUM</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-rum>Splunk RUM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>You are a <strong>frontend engineer</strong>, or an <strong>SRE</strong> tasked to do the first triage of a performance issue. You have been asked to investigate a potential customer satisfaction issue with the Online Boutique application.</p></div></details><p>We are going to examine the real user data that has been provided by the telemetry received from all participants&rsquo; browser sessions. The goal is to find a browser, mobile or tablet session that performed poorly and begin the troubleshooting process.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Splunk RUM</h1><article class=default><header class=headline></header><h1 id=1-rum-dashboard>1. RUM Dashboard</h1><p>In Splunk Observability Cloud from the main menu, click on <strong>RUM</strong>. you arrive at the RUM Home page, this view has already been covered in the short introduction earlier.</p><p><a href=#R-image-2cbe27105908bfb57f8c8afd74a7b83e class=lightbox-link><img alt="multiple apps" class="lazy lightbox figure-image" loading=lazy src=../images/rum-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2cbe27105908bfb57f8c8afd74a7b83e><img alt="multiple apps" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-dashboard.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Make sure you select your workshop by ensuring the drop-downs are set/selected as follows:<ul><li>The <strong>Time frame</strong> is set to <strong>-15m</strong>.</li><li>The <strong>Environment</strong> selected is <strong>[NAME OF WORKSHOP]-workshop</strong>.</li><li>The <strong>App</strong> selected is <strong>[NAME OF WORKSHOP]-store</strong>.</li><li>The <strong>Source</strong> is set to <strong>All</strong>.</li></ul></li><li>Next, click on the <strong>[NAME OF WORKSHOP]-store</strong> above the <strong>Page Views / JavaScript Errors</strong> chart.</li><li>This will bring up a new dashboard view breaking down the metrics by <strong>UX Metrics</strong>, <strong>Front-end Health</strong>, <strong>Back-end Health</strong> and <strong>Custom Events</strong> and comparing them to historic metrics (1 hour by default).</li></ul></div></details><p><a href=#R-image-e9837c850c1f6e8c30146c93cf2225b9 class=lightbox-link><img alt="RUM Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/rum-metrics-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e9837c850c1f6e8c30146c93cf2225b9><img alt="RUM Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-metrics-dashboard.png></a></p><ul><li><strong>UX Metrics:</strong> Page Views, Page Load and Web Vitals metrics.</li><li><strong>Front-end Health:</strong> Breakdown of Javascript Errors and Long Task duration and count.</li><li><strong>Back-end Health:</strong> Network Errors and Requests and Time to First Byte.</li><li><strong>Custom Events:</strong> RED metrics (Rate, Error & Duration) for custom events.</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click through each of the tabs (<strong>UX Metrics</strong>, <strong>Front-end Health</strong>, <strong>Back-end Health</strong> and <strong>Custom Events</strong>) and examine the data.</li></ul><div class=tab-panel data-tab-group=R-tabs-c416e20a7f4a6367c6b96a8e56626fbc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3a18cc6b1f35f1e68375768e19030466 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c416e20a7f4a6367c6b96a8e56626fbc","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-3e1e084769a049fc5658cbcf62098fea aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c416e20a7f4a6367c6b96a8e56626fbc","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-3a18cc6b1f35f1e68375768e19030466 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>If you examine the charts in the <em>Custom Events</em> Tab, <strong>what chart <strong>shows</strong> clearly the</strong> latency Spikes?</strong></p></div></div><div id=R-tab-id-3e1e084769a049fc5658cbcf62098fea data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>It is the <em>Custom Event Latency</em> chart</strong></p></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-tag-spotlight>2. Tag Spotlight</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><p>Make sure you are on the <strong>Custom Events</strong> tab by selecting it.</p></li><li><p>Have a look at the <strong>Custom Event Latency</strong> chart. The metrics shown here show the application latency. The comparison metrics to the side show the latency compared to 1 hour ago (which is selected in the top filter bar).</p></li><li><p>Click on the <strong>see all</strong> link under the chart title.</p></li></ul></div></details><p><a href=#R-image-b44b56e72c6d0db415832e0f2de04743 class=lightbox-link><img alt="RUM Tag Spotlight" class="lazy lightbox figure-image" loading=lazy src=../images/rum-tag-spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b44b56e72c6d0db415832e0f2de04743><img alt="RUM Tag Spotlight" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-tag-spotlight.png></a></p><p>In this dashboard view, you are presented with all the tags associated with the RUM data. Tags are key-value pairs that are used to identify the data. In this case, the tags are automatically generated by the OpenTelemetry instrumentation. The tags are used to filter the data and to create the charts and tables. The Tag Spotlight view allows you to drill down into a user session.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Change the timeframe to <strong>Last 1 hour</strong>.</li><li>Click <strong>Add Filters</strong>, select <strong>OS Version</strong>, click <strong>!=</strong> and select <strong>Synthetics</strong> and <strong>RUMLoadGen</strong> then click the <span class="btn cstyle button blue noicon"><span><span class=title>Apply Filter</span></span></span> button.</li><li>Find the <strong>Custom Event Name</strong> chart, locate <strong>PlaceOrder</strong> in the list, click on it and select <strong>Add to filter</strong>.</li><li>Notice the large spikes in the graph across the top.</li><li>Click on the <strong>User Sessions</strong> tab.</li><li>Click on the <strong>Duration</strong> heading twice to sort the sessions by duration (longest at the top).</li><li>Click on the <i class="fa-fw fas fa-cog"></i> above the table and select <strong>Sf Geo City</strong> from the list of additional columns and click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span></li></ul></div></details><p>We now have a User Session table that is sorted by longest duration descending and includes the cities of all the users that have been shopping on the site. We could apply more filters to further narrow down the data e.g. OS version, browser version, etc.</p><p><a href=#R-image-0625f92f935e27eaa172030e8fcb68bd class=lightbox-link><img alt="RUM Tag Spotlight" class="lazy lightbox figure-image" loading=lazy src=../images/rum-user-sessions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0625f92f935e27eaa172030e8fcb68bd><img alt="RUM Tag Spotlight" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-user-sessions.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-session-replay>3. Session Replay</h1><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Sessions</summary><div class=box-content><p>A session is a collection of traces that correspond to the actions a single user takes when interacting with an application. By default, a session lasts until 15 minutes have passed from the last event captured in the session. The maximum session duration is 4 hours.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the <strong>User Sessions</strong> table, click on the top <strong>Session ID</strong> with the longest <strong>Duration</strong> (over 20 seconds or longer), this will take you to the RUM Session view.</li></ul></div></details><p><a href=#R-image-97bca36bd64e0198037d97cc1ae5556c class=lightbox-link><img alt="RUM Session" class="lazy lightbox figure-image" loading=lazy src=../images/rum-session.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-97bca36bd64e0198037d97cc1ae5556c><img alt="RUM Session" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-session.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click the RUM Session Replay <span class="btn cstyle button transparent"><span><i class="fa-fw fas fa-play"></i> <span class=title>Replay</span></span></span> button. RUM Session Replay allows you to replay and see the user session. This is a great way to see exactly what the user experienced.</li><li>Click the button to start the replay.</li></ul></div></details><p>RUM Session Replay can redact information, by default text is redacted. You can also redact images (which has been done for this workshop example). This is useful if you are replaying a session that contains sensitive information. You can also change the playback speed and pause the replay.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>When playing back the session, notice how the mouse movements are captured. This is useful to see where the user is focusing their attention.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-user-sessions>4. User Sessions</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Close the RUM Session Replay by clicking on the <strong>X</strong> in the top right corner.</li><li>Note the length of the span, this is the time it took to complete the order, not good!</li><li>Scroll down the page and you will see the <strong>Tags</strong> metadata (which is used in Tag Spotlight). After the tags, we come to the waterfall which shows the page objects that have been loaded (HTML, CSS, images, JavaScript etc.)</li><li>Keep scrolling down the page until you come to a blue <strong>APM</strong> link (the one with <code>/cart/checkout</code> at the end of the URL) and hover over it.</li></ul></div></details><p><a href=#R-image-1bfcfef3d9a39331d81a816f7cdf6c84 class=lightbox-link><img alt="RUM Session" class="lazy lightbox figure-image" loading=lazy src=../images/rum-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1bfcfef3d9a39331d81a816f7cdf6c84><img alt="RUM Session" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-waterfall.png></a></p><p>This brings up the APM Performance Summary. Having this end-to-end (RUM to APM) view is very useful when troubleshooting issues.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>You will see <strong>paymentservice</strong> and <strong>checkoutservice</strong> are in an error state as per the screenshot above.</li><li>Under <strong>Workflow Name</strong> click on <code>front-end:/cart/checkout</code>, this will bring up the <strong>APM Service Map</strong>.</li></ul></div></details><p><a href=#R-image-d1cb4927e929f4d190badffea9243c44 class=lightbox-link><img alt="RUM to APM" class="lazy lightbox figure-image" loading=lazy src=../images/rum-to-apm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d1cb4927e929f4d190badffea9243c44><img alt="RUM to APM" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-to-apm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-apm>Splunk APM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>You are a <strong>back-end developer</strong> and you have been called in to help investigate an issue found by the SRE. The SRE has identified a poor user experience and has asked you to investigate the issue.</p></div></details><p>Discover the power of full end-to-end visibility by jumping from a RUM trace (front-end) to an APM trace (back-end). All the services are sending telemetry (traces and spans) that Splunk Observability Cloud can visualize, analyze and use to detect anomalies and errors.</p><p>RUM and APM are two sides of the same coin. RUM is the client-side view of the application and APM is the server-side view. In this section, we will use APM to drill down and identify where the problem is.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Splunk APM</h1><article class=default><header class=headline></header><h1 id=1-apm-explore>1. APM Explore</h1><p>The APM Service Map displays the dependencies and connections among your instrumented and inferred services in APM. The map is dynamically generated based on your selections in the time range, environment, workflow, service, and tag filters.</p><p>When we clicked on the APM link in the RUM waterfall, filters were automatically added to the service map view to show the services that were involved in that <strong>WorkFlow Name</strong> (<code>frontend:/cart/checkout</code>).</p><p>You can see the services involved in the workflow in the <strong>Service Map</strong>. In the side pane, under <strong>Business Workflow</strong>, charts for the selected workflow are displayed. The <strong>Service Map</strong> and <strong>Business Workflow</strong> charts are synchronized. When you select a service in the <strong>Service Map</strong>, the charts in the <strong>Business Workflow</strong> pane are updated to show metrics for the selected service.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the <strong>paymentservice</strong> in the Service Map.</li></ul></div></details><p><a href=#R-image-e651e31f567326a6f4b22180362a323e class=lightbox-link><img alt="APM Explore" class="lazy lightbox figure-image" loading=lazy src=../images/apm-business-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e651e31f567326a6f4b22180362a323e><img alt="APM Explore" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-business-workflow.png></a></p><p>Splunk APM also provides built-in <strong>Service Centric Views</strong> to help you see problems occurring in real time and quickly determine whether the problem is associated with a service, a specific endpoint, or the underlying infrastructure. Let&rsquo;s have a closer look.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the right hand pane, click on <strong>paymentservice</strong> in blue.</li></ul></div></details><p><a href=#R-image-fca24835cfb170751f12443e257c351f class=lightbox-link><img alt="APM Service" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fca24835cfb170751f12443e257c351f><img alt="APM Service" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-apm-service-view>2. APM Service View</h1><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Service View</summary><div class=box-content><p>As a service owners you can use the service view in Splunk APM to get a complete view of your service health in a single pane of glass. The service view includes a service-level indicator (SLI) for availability, dependencies, request, error, and duration (RED) metrics, runtime metrics, infrastructure metrics, Tag Spotlight, endpoints, and logs for a selected service. You can also quickly navigate to code profiling and memory profiling for your service from the service view.</p></div></details><p><a href=#R-image-6146d0c888a18cc3b61442563b99b7af class=lightbox-link><img alt="Service Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6146d0c888a18cc3b61442563b99b7af><img alt="Service Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-dashboard.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Check the <strong>Time</strong> box, you can see that the dashboards only show data relevant to the time it took for the APM trace we previosuly selected to complete (note that the charts are static).</li><li>In the <strong>Time</strong> box change the timeframe to <strong>-1h</strong>.</li><li>These charts are very useful to quickly identify performance issues. You can use this dashboard to keep an eye on the health of your service.</li><li>Scroll down the page and expand <strong>Infrastructure Metrics</strong>. Here you will see the metrics for the Host and Pod.</li><li><strong>Runtime Metrics</strong> are not available as profiling data is not available for services written in Node.js.</li><li>Now let&rsquo;s go back to the explore view, you can hit the back button in your Browser</li></ul></div></details><p><a href=#R-image-07918a3c76d41addb5132399149c103d class=lightbox-link><img alt="APM Explore" class="lazy lightbox figure-image" loading=lazy src=../images/apm-business-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-07918a3c76d41addb5132399149c103d><img alt="APM Explore" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-business-workflow.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-f1359f6cac24474da261f7130bb155a2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b77ec22b7cfafcfb921a41849bf731fa aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f1359f6cac24474da261f7130bb155a2","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-082e60880ba90cbcc45fdf5656634552 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f1359f6cac24474da261f7130bb155a2","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-b77ec22b7cfafcfb921a41849bf731fa data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>In the Service Map hover over the <strong>paymentservice</strong>. What can you conclude from the popup service chart?</strong></p></div></div><div id=R-tab-id-082e60880ba90cbcc45fdf5656634552 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The error percentage is very high.</strong></p></div></div></div></div></div></details><p><a href=#R-image-1d153b0e6fedce0f48518c9aed4f09a4 class=lightbox-link><img alt="APM Service Chart" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-popup-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1d153b0e6fedce0f48518c9aed4f09a4><img alt="APM Service Chart" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-popup-chart.png></a></p><p>We need to understand if there is a pattern to this error rate. We have a handy tool for that, <strong>Tag Spotlight</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-apm-tag-spotlight>3. APM Tag Spotlight</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>To view the tags for the <strong>paymentservice</strong> click on the <strong>paymentservice</strong> and then click on <strong>Tag Spotlight</strong> in the right-hand side functions pane (you may need to scroll down depending upon your screen resolution).* Once in <strong>Tag Spotlight</strong> ensure the toggle <strong>Show tags with no values</strong> is off.</li></ul></div></details><p><a href=#R-image-31e06356bbf3852e688aaeb7528ac1d5 class=lightbox-link><img alt="APM Tag Spotlight" class="lazy lightbox figure-image" loading=lazy src=../images/apm-tag-spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31e06356bbf3852e688aaeb7528ac1d5><img alt="APM Tag Spotlight" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-tag-spotlight.png></a></p><p>The views in <strong>Tag Spotlight</strong> are configurable for both the chart and cards. The view defaults to <strong>Requests & Errors</strong>.</p><p>It is also possible to configure which tag metrics are displayed in the cards. It is possible to select any combinations of:</p><ul><li>Requests</li><li>Errors</li><li>Root cause errors</li><li>P50 Latency</li><li>P90 Latency</li><li>P99 Latency</li></ul><p>Also ensure that the <strong>Show tags with no values</strong> toggle is unchecked.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-7abea8735ca9a29aed34997a5175b0d3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4721dc3ee8b37d748e41424fb7178b99 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7abea8735ca9a29aed34997a5175b0d3","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-307c5afc0d5c18d05bebc750822b3c3a aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7abea8735ca9a29aed34997a5175b0d3","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-4721dc3ee8b37d748e41424fb7178b99 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Which card exposes the tag that identifies what the problem is?</strong></p></div></div><div id=R-tab-id-307c5afc0d5c18d05bebc750822b3c3a data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The <em>version</em> card. The number of requests against <code>v350.10</code> matches the number of errors i.e. 100%</strong></p></div></div></div></div></div></details><p>Now that we have identified the version of the <strong>paymentservice</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. Click on <strong>‚Üê Tag Spotlight</strong> at the top of the page to get back to the Service Map.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-apm-service-breakdown>4. APM Service Breakdown</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Select the <strong>paymentservice</strong> in the Service Map.</li><li>In the right-hand pane click on the <span class="btn cstyle button grey noicon"><span><span class=title>Breakdown</span></span></span>.</li><li>Select <code>tenant.level</code> in the list.</li><li>Back in the Service Map click on <strong>gold</strong>.</li><li>Click on <span class="btn cstyle button grey noicon"><span><span class=title>Breakdown</span></span></span> and select <code>version</code>, this is the tag that exposes the service version.</li><li>Repeat this for <strong>silver</strong> and <strong>bronze</strong>.</li></ul><div class=tab-panel data-tab-group=R-tabs-25cf76dadd1ce72cb36868ff5a33bfa7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-5951c2d25f159b5ddc5419f2802810d8 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-25cf76dadd1ce72cb36868ff5a33bfa7","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-9497483f9a4ce8e108942d396afe68ff aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-25cf76dadd1ce72cb36868ff5a33bfa7","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-5951c2d25f159b5ddc5419f2802810d8 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What can you conclude from what you are seeing?</strong></p></div></div><div id=R-tab-id-9497483f9a4ce8e108942d396afe68ff data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>Every <code>tenant.level</code> is being impacted by <code>v350.10</code></strong></p></div></div></div></div></div></details><p>You will now see the <strong>paymentservice</strong> broken down into three services, <strong>gold</strong>, <strong>silver</strong> and <strong>bronze</strong>. Each tenant is broken down into two services, one for each version (<code>v350.10</code> and <code>v350.9</code>).</p><p><a href=#R-image-29d5efbe9a93bf0dd21dcd8b748cee5e class=lightbox-link><img alt="APM Service Breakdown" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-breakdown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-29d5efbe9a93bf0dd21dcd8b748cee5e><img alt="APM Service Breakdown" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-breakdown.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Span Tags</summary><div class=box-content><p>Using span tags to break down services is a very powerful feature. It allows you to see how your services are performing for different customers, different versions, different regions, etc. In this exercise, we have determined that <code>v350.10</code> of the <strong>paymentservice</strong> is causing problems for all our customers.</p></div></details><p>Next, we need to drill down into a trace to see what is going on.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=5-apm-trace-analyzer>5. APM Trace Analyzer</h1><p>As Splunk APM provides a <strong>NoSample</strong> end-to-end visibility of every service Splunk APM captures every trace. For this workshop, the <strong>Order Confirmation ID</strong> is available as a tag. This means that we can use this to search for the exact trace of the poor user experience you encountered earlier in the workshop.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Trace Analyzer</summary><div class=box-content><p>Splunk Observability Cloud provides several tools for exploring application monitoring data. <strong>Trace Analyzer</strong> is suited to scenarios where you have high-cardinality, high-granularity searches and explorations to research unknown or new issues.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>With the outer box of the <strong>paymentservice</strong> selected, in the right-hand pane, click on <strong>Traces</strong>.</li><li>Set <strong>Time Range</strong> to <strong>Last 15 minutes</strong>.</li><li>Ensure the <strong>Sample Ratio</strong> is set to <code>1:1</code> and <strong>not</strong> <code>1:10</code>.</li></ul></div></details><p><a href=#R-image-52933ec2db48903653086a395856bc56 class=lightbox-link><img alt="APM Trace Analyzer" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-analyzer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-52933ec2db48903653086a395856bc56><img alt="APM Trace Analyzer" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-analyzer.png></a></p><p>The <strong>Trace & error count</strong> view shows the total traces and traces with errors in a stacked bar chart. You can use your mouse to select a specific period within the available time frame.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the dropdown menu that says <strong>Trace & error count</strong>, and change it to <strong>Trace duration</strong></li></ul></div></details><p><a href=#R-image-3b59d658dd90b6c7db2abc3c97b7c37f class=lightbox-link><img alt="APM Trace Analyzer Heat Map" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-analyzer-heat-map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3b59d658dd90b6c7db2abc3c97b7c37f><img alt="APM Trace Analyzer Heat Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-analyzer-heat-map.png></a></p><p>The <strong>Trace Duration</strong> view shows a heatmap of traces by duration. The heatmap represents 3 dimensions of data:</p><ul><li>Time on the x-axis</li><li>Trace duration on the y-axis</li><li>The traces (or requests) per second are represented by the heatmap shades</li></ul><p>You can use your mouse to select an area on the heatmap, to focus on a specific time period and trace duration range.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Switch from <strong>Trace duration</strong> back to <strong>Trace & Error count</strong>.</li><li>In the time picker select <strong>Last 1 hour</strong>.</li><li>Note, that most of our traces have errors (red) and there are only a limited amount of traces that are error-free (blue).</li><li>Make sure the <strong>Sample Ratio</strong> is set to <code>1:1</code> and <strong>not</strong> <code>1:10</code>.</li><li>Click on <strong>Add filters</strong>, type in <code>orderId</code> and select <strong>orderId</strong> from the list.</li><li>Paste in your <strong>Order Confirmation ID</strong> from when you went shopping earlier in the workshop and hit enter. If you didn&rsquo;t capture one, please ask your instructor for one.
<a href=#R-image-afa11db81ccdb1679cb3f8a0a5035da7 class=lightbox-link><img alt="Traces by Duration" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-by-duration.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-afa11db81ccdb1679cb3f8a0a5035da7><img alt="Traces by Duration" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-by-duration.png></a></li></ul></div></details><p>We have now filtered down to the exact trace where you encountered a poor user experience with a very long checkout wait.</p><p>A secondary benefit to viewing this trace is that the trace will be accessible for up to 13 months. This will allow developers to come back to this issue at a later stage and still view this trace for example.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the trace in the list.</li></ul></div></details><p>Next, we will walk through the trace waterfall.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 24, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=6-apm-waterfall>6. APM Waterfall</h1><p>We have arrived at the <strong>Trace Waterfall</strong> from the <strong>Trace Analyzer</strong>. A trace is a collection of spans that share the same trace ID, representing a unique transaction handled by your application and its constituent services.</p><p>Each span in Splunk APM captures a single operation. Splunk APM considers a span to be an error span if the operation that the span captures results in an error.</p><p><a href=#R-image-8ee92d851c6d43ab0c0bbc5dc987f688 class=lightbox-link><img alt="Trace Waterfall" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8ee92d851c6d43ab0c0bbc5dc987f688><img alt="Trace Waterfall" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-waterfall.png></a></p><p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the <span class="btn cstyle button red noicon"><span><span class=title>!</span></span></span> next to any of the <code>paymentservice:grpc.hipstershop.PaymentService/Charge</code> spans in the waterfall.</li></ul><div class=tab-panel data-tab-group=R-tabs-b7eaa7e26bf87a9d5047ed8e41535d93><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8ca0f975e41574b9a8c21c315fd2f59b aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b7eaa7e26bf87a9d5047ed8e41535d93","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-1f5605f14befb0e02d204e1dab4505be aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b7eaa7e26bf87a9d5047ed8e41535d93","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-8ca0f975e41574b9a8c21c315fd2f59b data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What is the error message and version being reported in the Span Details?</strong></p></div></div><div id=R-tab-id-1f5605f14befb0e02d204e1dab4505be data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong><code>Invalid request</code> and <code>v350.10</code></strong>.</p></div></div></div></div></div></details>Now that we have identified the version of the <strong>paymentservice</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. This is where <strong>Related Logs</strong> come in.</p><p>Related Content relies on specific metadata that allow APM, Infrastructure Monitoring, and Log Observer to pass filters around Observability Cloud. For related logs to work, you need to have the following metadata in your logs:</p><ul><li><code>service.name</code></li><li><code>deployment.environment</code></li><li><code>host.name</code></li><li><code>trace_id</code></li><li><code>span_id</code></li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>At the very bottom of the <strong>Trace Waterfall</strong> click on <strong>Logs (1)</strong>. This highlights that there are <strong>Related Logs</strong> for this trace.</li><li>Click on the <strong>Logs for trace xxx</strong> entry in the pop-up, this will open the logs for the complete trace in <strong>Log Observer</strong>.</li></ul></div></details><p><a href=#R-image-74f82732f64617b3928d4808a7b844e2 class=lightbox-link><img alt="Related Logs" class="lazy lightbox figure-image" loading=lazy src=../images/apm-related-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-74f82732f64617b3928d4808a7b844e2><img alt="Related Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-related-logs.png></a></p><p>Next, let&rsquo;s find out more about the error in the logs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-log-observer>Splunk Log Observer</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>Remaining in your <strong>back-end developer</strong> role, you need to inspect the logs from your application to determine the root cause of the issue.</p></div></details><p>Using the content related to the APM trace (logs) we will now use Splunk Log Observer to drill down further to understand exactly what the problem is.</p><p>Related Content is a powerful feature that allows you to jump from one component to another and is available for <strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 7. Splunk Log Observer</h1><article class=default><header class=headline></header><h1 id=1-log-filtering>1. Log Filtering</h1><p><strong>Log Observer (LO)</strong>, can be used in multiple ways. In the quick tour, you used the LO <strong>no-code interface</strong> to search for specific entries in the logs. This section, however, assumes you have arrived in LO from a trace in APM using the <strong>Related Content</strong> link.</p><p>The advantage of this is, as it was with the link between RUM & APM, that you are looking at your logs within the context of your previous actions. In this case, the context is the time frame <strong>(1)</strong>, which matches that of the trace and the filter <strong>(2)</strong> which is set to the <strong>trace_id</strong>.</p><p><a href=#R-image-5f9d36bea1426b3217df4d8f084c9923 class=lightbox-link><img alt="Trace Logs" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-trace-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5f9d36bea1426b3217df4d8f084c9923><img alt="Trace Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-trace-logs.png></a></p><p>This view will include <strong>all</strong> the log lines from <strong>all</strong> applications or services that participated in the back-end transaction started by the end-user interaction with the Online Boutique.</p><p>Even in a small application such as our Online Boutique, the sheer amount of logs found can make it hard to see the specific log lines that matter to the actual incident we are investigating.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>We need to focus on just the Error messages in the logs:</p><ul><li>Click on the <strong>Group By</strong> drop-down box and use the filter to find <strong>Severity</strong>.</li><li>Once selected click the <span class="btn cstyle button blue noicon"><span><span class=title>Apply</span></span></span> button (notice that the chart legend changes to show debug, error and info).
<a href=#R-image-e71447f383af047ed91537f1fa9a4c5f class=lightbox-link><img alt=legend class="lazy lightbox figure-image" loading=lazy src=../images/severity-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e71447f383af047ed91537f1fa9a4c5f><img alt=legend class="lazy lightbox lightbox-image" loading=lazy src=../images/severity-logs.png></a></li><li>Selecting just the error logs can be done by either clicking on the word error <strong>(1)</strong> in the legend, followed by selecting <strong>Add to filter</strong>. Then click <span class="btn cstyle button blue noicon"><span><span class=title>Run Search</span></span></span></li><li>You could also add the service name, <code>sf_service=paymentservice</code>, to the filter if there are error lines for multiple services, but in our case, this is not necessary.
<a href=#R-image-0d4b12ba9c001e1472c781ba4e1deb3e class=lightbox-link><img alt="Error Logs" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0d4b12ba9c001e1472c781ba4e1deb3e><img alt="Error Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-errors.png></a></li></ul></div></details><p>Next, we will look at log entries in detail.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-viewing-log-entries>2. Viewing Log Entries</h1><p>Before we look at a specific log line, let&rsquo;s quickly recap what we have done so far and why we are here based on the 3 pillars of Observability:</p><table><thead><tr><th style=text-align:center>Metrics</th><th style=text-align:center>Traces</th><th style=text-align:center>Logs</th></tr></thead><tbody><tr><td style=text-align:center><em><strong>Do I have a problem?</strong></em></td><td style=text-align:center><em><strong>Where is the problem?</strong></em></td><td style=text-align:center><em><strong>What is the problem?</strong></em></td></tr></tbody></table><ul><li>Using metrics we identified <strong>we have a problem</strong> with our application. This was obvious from the error rate in the Service Dashboards as it was higher than it should be.</li><li>Using traces and span tags we found <strong>where the problem is</strong>. The <strong>paymentservice</strong> comprises of two versions, <code>v350.9</code> and <code>v350.10</code>, and the error rate was <strong>100%</strong> for <code>v350.10</code>.</li><li>We did see that this error from the <strong>paymentservice</strong> <code>v350.10</code> caused multiple retries and a long delay in the response back from the Online Boutique checkout.</li><li>From the trace, using the power of <strong>Related Content</strong>, we arrived at the log entries for the failing <strong>paymentservice</strong> version. Now, we can determine <strong>what the problem is</strong>.</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on an error entry in the log table (make sure it says <code>hostname: "paymentservice-xxxx"</code> in case there is a rare error from a different service in the list too.</li></ul><div class=tab-panel data-tab-group=R-tabs-9a3e52e323b2f37bb7cde01a61d03aff><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-683b4b4eb8c45bf518a20a3a8816ed51 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9a3e52e323b2f37bb7cde01a61d03aff","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-311c5cc47a7f107f11bb60e5acca6e12 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9a3e52e323b2f37bb7cde01a61d03aff","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-683b4b4eb8c45bf518a20a3a8816ed51 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Based on the message, what would you tell the development team to do to resolve the issue?</strong></p></div></div><div id=R-tab-id-311c5cc47a7f107f11bb60e5acca6e12 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The development team needs to rebuild and deploy the container with a valid API Token or rollback to <code>v350.9</code></strong>.</p></div></div></div></div><p><a href=#R-image-bb3467a6c42a9675262ad13b9a6f1310 class=lightbox-link><img alt="Log Message" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-log-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bb3467a6c42a9675262ad13b9a6f1310><img alt="Log Message" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-log-message.png></a></p><ul><li>Click on the <strong>X</strong> in the log message pane to close it.</li></ul></div></details><details open class="box cstyle notices blue"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-wine-bottle"></i>
Congratulations</summary><div class=box-content><p>You have <strong>successfully</strong> used Splunk Observability Cloud to understand why you experienced a poor user experience whilst shopping at the Online Boutique. You used RUM, APM and logs to understand what happened in your service landscape and subsequently, found the underlying cause, all based on the 3 pillars of Observability, <strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong></p><p>You also learned how to use Splunk&rsquo;s <strong>intelligent tagging and analysis</strong> with <strong>Tag Spotlight</strong> to detect patterns in your applications&rsquo; behavior and to use the <strong>full stack correlation</strong> power of <strong>Related Content</strong> to quickly move between the different components whilst keeping in context of the issue.</p></div></details><p>In the next part of the workshop, we will move from <strong>problem-finding mode</strong> into <strong>mitigation</strong>, <strong>prevention</strong> and <strong>process improvement mode</strong>.</p><p>Next up, creating log charts in a custom dashboard.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-log-timeline-chart>3. Log Timeline Chart</h1><p>Once you have a specific view in Log Observer, it is very useful to be able to use that view in a dashboard, to help in the future with reducing the time to detect or resolve issues. As part of the workshop, we will create an example custom dashboard that will use these charts.</p><p>Let&rsquo;s look at creating a <strong>Log Timeline</strong> chart. The Log Timeline chart is used for visualizing log messages over time. It is a great way to see the frequency of log messages and to identify patterns. It is also a great way to see the distribution of log messages across your environment. These charts can be saved to a custom dashboard.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>First, we will reduce the amount of information to only the columns we are interested in:</p><ul><li>Click on the Configure Table <i class="fa-fw fas fa-cog"></i> icon above the <strong>Logs table</strong> to open the <strong>Table Settings</strong>, untick <code>_raw</code> and ensure the following fields are selected <code>k8s.pod.name</code>, <code>message</code> and <code>version</code>.
<a href=#R-image-4832cdfb052d8e9aa485b2a938c7cffc class=lightbox-link><img alt="Log Table Settings" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4832cdfb052d8e9aa485b2a938c7cffc><img alt="Log Table Settings" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-table.png></a></li><li>Remove the fixed time from the time picker, and set it to the <strong>Last 15 minutes</strong>.</li><li>To make this work for all traces, remove the <code>trace_id</code> from the filter and add the fields <code>sf_service=paymentservice</code> and <code>sf_environment=[WORKSHOPNAME]</code>.</li><li>Click <strong>Save</strong> and select <strong>Save to Dashboard</strong>.
<a href=#R-image-da8499df7cdd91952537af1be91fd9cd class=lightbox-link><img alt="save it" class="lazy lightbox figure-image" loading=lazy src=../images/save-query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-da8499df7cdd91952537af1be91fd9cd><img alt="save it" class="lazy lightbox lightbox-image" loading=lazy src=../images/save-query.png></a></li><li>In the chart creation dialog box that appears, for the <strong>Chart name</strong> use <code>Log Timeline</code>.</li><li>Click <span class="btn cstyle button blue noicon"><span><span class=title>Select Dashboard</span></span></span> and then click <span class="btn cstyle button blue noicon"><span><span class=title>New dashboard</span></span></span> in the Dashboard Selection dialog box.</li><li>In the <strong>New dashboard</strong> dialog box, enter a name for the new dashboard (no need to enter a description). Use the following format: <code>Initials - Service Health Dashboard</code> and click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span></li><li>Ensure the new dashboard is highlighted in the list <strong>(1)</strong> and click <span class="btn cstyle button blue noicon"><span><span class=title>OK</span></span></span> <strong>(2)</strong>.
<a href=#R-image-b7f0529a920801db9285f389f3d282ff class=lightbox-link><img alt="Save dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/dashboard-save.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b7f0529a920801db9285f389f3d282ff><img alt="Save dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/dashboard-save.png></a></li><li>Ensure that <strong>Log Timeline</strong> is selected as the <strong>Chart Type</strong>.
<a href=#R-image-e04e6413072f2b3dba8d7e5257c4c1de class=lightbox-link><img alt="log timeline" class="lazy left lightbox figure-image" loading=lazy src="../images/log-timeline.png?classes=left&width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e04e6413072f2b3dba8d7e5257c4c1de><img alt="log timeline" class="lazy left lightbox lightbox-image" loading=lazy src="../images/log-timeline.png?classes=left&width=25vw"></a></li><li>Click the <span class="btn cstyle button transparent noicon"><span><span class=title>Save</span></span></span> button (<strong>do not</strong> click <strong>Save and goto dashboard</strong> at this time).</li></ul></div></details><p>Next, we will create a <strong>Log View</strong> chart.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-log-view-chart>4. Log View Chart</h1><p>The next chart type that can be used with logs is the <strong>Log View</strong> chart type. This chart will allow us to see log messages based on predefined filters.</p><p>As with the previous Log Timeline chart, we will add a version of this chart to our Customer Health Service Dashboard:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>After the previous exercise make sure you are still in <strong>Log Observer</strong>.</li><li>The filters should be the same as the previous exercise, with the time picker set to the <strong>Last 15 minutes</strong> and filtering on severity=error, <code>sf_service=paymentservice</code> and <code>sf_environment=[WORKSHOPNAME]</code>.</li><li>Make sure we have the header with just the fields we wanted.</li><li>Click again on <strong>Save</strong> and then <strong>Save to Dashboard</strong>.</li><li>This will again provide you with the Chart creation dialog.</li><li>For the <strong>Chart name</strong> use <strong>Log View</strong>.</li><li>This time Click <span class="btn cstyle button blue noicon"><span><span class=title>Select Dashboard</span></span></span> and search for the Dashboard you created in the previous exercise. You can start by typing your initials in the search box <strong>(1)</strong>.
<a href=#R-image-c7f092d0555bbed8da62090558ef20f0 class=lightbox-link><img alt="search dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/search-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c7f092d0555bbed8da62090558ef20f0><img alt="search dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/search-dashboard.png></a></li><li>Click on your dashboard name to highlight it <strong>(2)</strong> and click <span class="btn cstyle button blue noicon"><span><span class=title>OK</span></span></span> <strong>(3)</strong>.</li><li>This will return you to the create chart dialog.</li><li>Ensure <strong>Log View</strong> is selected as the <strong>Chart Type</strong>.
<a href=#R-image-57c4ef09c4922b72fc026a5628902865 class=lightbox-link><img alt="log view" class="lazy left lightbox figure-image" loading=lazy src="../images/log-view.png?classes=left&width=30vw" style=height:auto;width:30vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-57c4ef09c4922b72fc026a5628902865><img alt="log view" class="lazy left lightbox lightbox-image" loading=lazy src="../images/log-view.png?classes=left&width=30vw"></a></li><li>To see your dashboard click <span class="btn cstyle button blue noicon"><span><span class=title>Save and go to dashboard</span></span></span>.</li><li>The result should be similar to the dashboard below:
<a href=#R-image-340116d8f6a1c6ca88c675cbb94c0bd4 class=lightbox-link><img alt="Custom Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-custom-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-340116d8f6a1c6ca88c675cbb94c0bd4><img alt="Custom Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-custom-dashboard.png></a></li><li>As the last step in this exercise, let us add your dashboard to your workshop team page, this will make it easy to find later in the workshop.</li><li>At the top of the page, click on the vertical 3 dots menu <strong>‚ãÆ</strong> on the top right, select <strong>Dashboard Group Actions</strong> > <strong>Link to teams</strong>.
<a href=#R-image-7963499f6c5876bb3cb951f34ae0b23d class=lightbox-link><img alt=linking class="lazy lightbox figure-image" loading=lazy src=../images/linking.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7963499f6c5876bb3cb951f34ae0b23d><img alt=linking class="lazy lightbox lightbox-image" loading=lazy src=../images/linking.png></a></li><li>In the following <strong>Link to teams</strong> dialog box, find the Workshop team that your instructor will have provided for you and click <span class="btn cstyle button blue noicon"><span><span class=title>Done</span></span></span>.</li></ul></div></details><p>In the next session, we will look at Splunk Synthetics and see how we can automate the testing of web-based applications.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-synthetics>Splunk Synthetics</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>Putting your <strong>SRE</strong> hat back on, you have been asked to set up monitoring for the Online Boutique. You need to ensure that the application is available and performing well 24 hours a day, 7 days a week.</p></div></details><p>Wouldn‚Äôt it be great if we could have 24/7 monitoring of our application, and be alerted when there is a problem? This is where Synthetics comes in. We will show you a simple test that runs every 1 minute and checks the performance and availability of a typical user journey through the Online Boutique.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 8. Splunk Synthetics</h1><article class=default><header class=headline></header><h1 id=1-synthetics-dashboard>1. Synthetics Dashboard</h1><p>In Splunk Observability Cloud from the main menu, click on <strong>Synthetics</strong>. Click on <strong>All</strong> or <strong>Browser tests</strong> to see the list of active tests.</p><p>During our investigation in the RUM section, we found there was an issue with the <strong>Place Order</strong> Transaction. Let&rsquo;s see if we can confirm this from the Synthetics test as well. We will be using the metric <strong>First byte time</strong> for the 4th page of the test, which is the <strong>Place Order</strong> step.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the <strong>Search</strong> box enter <strong>[WORKSHOP NAME]</strong> and select the test for your workshop (your instructor will advise as to which one to select).</li><li>Under <strong>Performance KPIs</strong> set the Time Picker to <strong>Last 1 hour</strong> and hit enter.</li><li>Click on <strong>Location</strong> and from the drop-down select <strong>Page</strong>. The next filter will be populated with the pages that are part of the test.</li><li>Click on <strong>Duration</strong>, deselect <strong>Duration</strong> and select <strong>First byte time</strong>.
<a href=#R-image-a9310bd43653f2ce763ee5b60a5fa7d6 class=lightbox-link><img alt="Transaction Filter" class="lazy lightbox figure-image" loading=lazy src=../images/synthetics-transaction-filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a9310bd43653f2ce763ee5b60a5fa7d6><img alt="Transaction Filter" class="lazy lightbox lightbox-image" loading=lazy src=../images/synthetics-transaction-filter.png></a></li><li>Look at the legend and note the color of <strong>First byte time - Page 4</strong>.</li><li>Select the highest data point for <strong>First byte time - Page 4</strong>. You will now be taken to the <strong>Run results</strong> for this particular test run.</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 2, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-synthetics-test-detail>2. Synthetics Test Detail</h1><p>Right now we are looking at the result of a single Synthetic Browser Test. This test is split up into <strong>Business Transactions</strong>, think of this as a group of one or more logically related interactions that represent a business-critical user flow.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>The screenshot below doesn&rsquo;t contain a red banner with an error in it however you might be seeing one in your run results. This is expected as in some cases the test run fails and does not impact the workshop.</p></div></details><p><a href=#R-image-abfbb63831c06638242015dd797c5ee7 class=lightbox-link><img alt=waterfall class="lazy lightbox figure-image" loading=lazy src=../images/synth-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-abfbb63831c06638242015dd797c5ee7><img alt=waterfall class="lazy lightbox lightbox-image" loading=lazy src=../images/synth-waterfall.png></a></p><ol><li><strong>Filter:</strong> Focus in on specific parts of your test; filters the filmstrip, video, and waterfall.</li><li><strong>Filmstrip:</strong> Offers a set of screenshots of site performance so that you can see how the page responds in real-time.</li><li><strong>Waterfall chart:</strong> The waterfall chart is a visual representation of the interaction between the test runner and the site being tested.</li><li><strong>Video:</strong> This lets you see exactly what a user trying to load your site from the location and device of a particular test run would experience.</li><li><strong>Browser test metrics:</strong> A view that offers you a picture of website performance.</li></ol><p>By default, Splunk Synthetics provides screenshots and video capture of the test. This is useful for debugging issues. You can see, for example, the slow loading of large images, the slow rendering of a page etc.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Use your mouse to scroll left and right through the filmstrip to see how the site was being rendered during the test run.</li><li>In the Video pane, press on the play button <strong>‚ñ∂</strong> to see the test playback. If you click the vertical three dots <strong>‚ãÆ</strong> you can change the <em>playback speed</em>, view it <em>Picture in Picture</em> and even <em>Download</em> the video.</li><li>Using the filter above the filmstrip, under the header <em>Synthetic Transactions</em>, click on <strong>Home</strong></li><li>The waterfall below will show all the objects that make up the page. The first line is the HTML page itself. The next lines are the objects that make up the page (HTML, CSS, JavaScript, Images, Fonts, etc.).</li><li>In the waterfall find the line <strong>GET</strong> <em>splunk-otel-web.js</em>.</li><li>Click on the <strong>></strong> button to open the metadata section to see the Request/Response Header information.</li><li>In the filter, switch to the second Synthetic Transaction <strong>Shop</strong>. Note that the filmstrip and video adjust and move to the beginning of the new transaction.</li><li>Repeat this for all the other Transactions, then finally select the <strong>PlaceOrder</strong> transaction.</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 2, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-synthetics-to-apm>3. Synthetics to APM</h1><p>We now should have a view similar to the one below.</p><p><a href=#R-image-8422e1c176d205f47915279eddb9110d class=lightbox-link><img alt="Place Order" class="lazy lightbox figure-image" loading=lazy src=../images/run-results-place-order.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8422e1c176d205f47915279eddb9110d><img alt="Place Order" class="lazy lightbox lightbox-image" loading=lazy src=../images/run-results-place-order.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the waterfall find an entry that starts with <strong>POST checkout</strong>.</li><li>Click on the <strong>></strong> button in front of it to drop open the metadata section. Observe the metadata that is collected, and note the <strong>Server-Timing</strong> header. This header is what allows us to correlate the test run to a back-end trace.</li><li>Click on the blue <i class="fa-fw fas fa-link"></i> <strong>APM</strong> link on the <strong>POST checkout</strong> line in the waterfall.</li></ul></div></details><p><a href=#R-image-f6792cd86240221310ad9b6fdfba7d9b class=lightbox-link><img alt="APM trace" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f6792cd86240221310ad9b6fdfba7d9b><img alt="APM trace" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Validate you see one or more errors for the <strong>paymentservice</strong> <strong>(1)</strong>.</li><li>To validate that it&rsquo;s the same error, click on the related content for <strong>Logs</strong> <strong>(2)</strong>.</li><li>Repeat the earlier exercise to filter down to the errors only.</li><li>View the error log to validate the failed payment due to an invalid token.</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-synthetics-detector>4. Synthetics Detector</h1><p>Given you can run these tests 24/7, it is an ideal tool to get warned early if your tests are failing or starting to run longer than your agreed SLA instead of getting informed by social media, or Uptime websites.</p><p><a href=#R-image-91d7606f551d09682efa63ddcd970d52 class=lightbox-link><img alt="Social media" class="lazy lightbox figure-image" loading=lazy src=../images/social-media-post.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-91d7606f551d09682efa63ddcd970d52><img alt="Social media" class="lazy lightbox lightbox-image" loading=lazy src=../images/social-media-post.png></a></p><p>To stop that from happening let&rsquo;s detect if our test is taking more than 1.1 minutes.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><p>Go back to the Synthetics home page via the menu on the left</p></li><li><p>Select the workshop test again and click the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>Create Detector</strong></span></span></span> button at the top of the page.</p><p><a href=#R-image-87358bada5e1803a536083dffb15a196 class=lightbox-link><img alt="synth detector" class="lazy lightbox figure-image" loading=lazy src=../images/synth-detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-87358bada5e1803a536083dffb15a196><img alt="synth detector" class="lazy lightbox lightbox-image" loading=lazy src=../images/synth-detector.png></a></p></li><li><p>Edit the text <strong>New Synthetics Detector</strong> <strong>(1)</strong> and replace it with <code>INITIALS - [WORKSHOPNAME]</code>.</p></li><li><p>Change the alert criteria so that the metric is Run Duration (instead of Uptime) and the condition is Static Threshold.</p></li><li><p>Set the <strong>Trigger threshold</strong> <strong>(2)</strong> to be around <code>65,000</code> to <code>68,000</code> and hit enter to update the chart. Make sure you have more than one spike cutting through the threshold line as shown above (you may have to adjust the threshold value a bit to match your actual latency).</p></li><li><p>Leave the rest as default.</p></li><li><p>Note that there is now a row of red and white triangles appearing below the spikes <strong>(3)</strong>. The red triangles let you know that your detector found that your test was above the given threshold & the white triangle indicates that the result returned below the threshold. Each red triangle will trigger an alert.</p></li><li><p>You can change the Alerts criticality <strong>(4)</strong> by changing the drop-down to a different level, as well as the method of alerting. Make sure you do <strong>NOT</strong> add a Recipient as this could lead to you being subjected to an alert storm!</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Activate</span></span></span> to deploy your detector.</p></li><li><p>To see your new created detector click <span class="btn cstyle button transparent noicon"><span><span class=title>Edit Test</span></span></span> button</p></li><li><p>At the bottom of the page is a list of active detectors.</p><p><a href=#R-image-dbc0cc4a4f6a058b61176c0afe333c03 class=lightbox-link><img alt="list of detectors" class="lazy lightbox figure-image" loading=lazy src=../images/detector-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dbc0cc4a4f6a058b61176c0afe333c03><img alt="list of detectors" class="lazy lightbox lightbox-image" loading=lazy src=../images/detector-list.png></a></p></li><li><p>If you can&rsquo;t find yours, but see one called <em>New Synthetic Detector</em>, you may not have saved it correctly with your name. Click on the <em>New Synthetic Detector</em> link, and redo the rename.</p></li><li><p>Click on the <span class="btn cstyle button transparent noicon"><span><span class=title>Close</span></span></span> button to exit the edit mode.</p></li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=custom-service-health-dashboard->Custom Service Health Dashboard üè•</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>As the <strong>SRE</strong> hat suits you let&rsquo;s keep it on as you have been asked to build a custom Service Health Dashboard for the <strong>paymentservice</strong>. The requirement is to display RED metrics, logs and Synthetic test duration results.</p></div></details><p>It is common for development and SRE teams to require a summary of the health of their applications and/or services. More often or not these are displayed on wall-mounted TVs. Splunk Observability Cloud has the perfect solution for this by creating custom dashboards.</p><p>In this section we are going to build a <strong>Service Health Dashboard</strong> we can use to display on teams&rsquo; monitors or TVs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 9. Service Health Dashboard</h1><article class=default><header class=headline></header><h1 id=enhancing-the-dashboard>Enhancing the Dashboard</h1><p>As we already saved some useful log charts in a dashboard in the Log Observer exercise, we are going to extend that dashboard.</p><p><a href=#R-image-ae30a6df2b16873ab5fcb473d8a60eb4 class=lightbox-link><img alt="Wall mounted" class="lazy lightbox figure-image" loading=lazy src=../images/wall-mount.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae30a6df2b16873ab5fcb473d8a60eb4><img alt="Wall mounted" class="lazy lightbox lightbox-image" loading=lazy src=../images/wall-mount.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>To get back to your dashboard with the two log charts, click on <strong>Dashboards</strong> from the main menu and you will be taken to your Team Dashboard view. Under <strong>Dashboards</strong> click in <strong>Search dashboards</strong> to search for your Service Health Dashboard group.</li><li>Click on the name and this will bring up your previously saved dashboard.
<a href=#R-image-685dacfad5095997a5427fefcf2dfa5d class=lightbox-link><img alt="log list" class="lazy lightbox figure-image" loading=lazy src=../../7-log-observer/images/log-observer-custom-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-685dacfad5095997a5427fefcf2dfa5d><img alt="log list" class="lazy lightbox lightbox-image" loading=lazy src=../../7-log-observer/images/log-observer-custom-dashboard.png></a></li><li>Even if the log information is useful, it will need more information to have it make sense for our team so let&rsquo;s add a bit more information</li><li>The first step is adding a description chart to the dashboard. Click on the <span class="btn cstyle button grey noicon"><span><span class=title>New text note</span></span></span> and replace the text in the note with the following text and then click the <span class="btn cstyle button blue noicon"><span><span class=title>Save and close</span></span></span> button and name the chart <strong>Instructions</strong></li></ul><details open class="box cstyle notices grey"><summary class=box-label tabindex=-1>Information to use with text note</summary><div class=box-content><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>This is a Custom Health Dashboard for the **Payment service**,  
</span></span><span class=line><span class=cl>Please pay attention to any errors in the logs.
</span></span><span class=line><span class=cl>For more detail visit [link](https://https://www.splunk.com/en_us/products/observability.html)</span></span></code></pre></div></div></details><ul><li>The charts are not in a nice order, let&rsquo;s correct that and rearrange the charts so that they are useful.</li><li>Move your mouse over the top edge of the <strong>Instructions</strong> chart, your mouse pointer will change to a <strong>‚ò©</strong>. This will allow you to drag the chart in the dashboard. Drag the <strong>Instructions</strong> chart to the top left location and resize it to a 1/3rd of the page by dragging the right-hand edge.</li><li>Drag and add the <strong>Log Timeline view</strong> chart next to the <strong>Instruction</strong> chart, resize it so it fills the other 2/3rd of the page to be the error rate chart next to the two the chart and resize it so it fills the page</li><li>Next, resize the <strong>Log lines</strong> chart to be the width of the page and resize it the make it at least twice as long.</li><li>You should have something similar to the dashboard below:
<a href=#R-image-aaefa874eda11c694f4493cb0067f2d8 class=lightbox-link><img alt="Initial Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/initial-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aaefa874eda11c694f4493cb0067f2d8><img alt="Initial Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/initial-dashboard.png></a></li></ul></div></details><p>This looks great, let&rsquo;s continue and add more meaningful charts.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-a-custom-chart>Adding a Custom Chart</h1><p>In this part of the workshop we are going to create a chart that we will add to our dashboard, we will also link it to the detector we previously built. This will allow us to see the behavior of our test and get alerted if one or more of our test runs breach its SLA.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>At the top of the dashboard click on the <strong>+</strong> and select <strong>Chart</strong>.
<a href=#R-image-fa8b167bf10eadbf251fde87a25a5ade class=lightbox-link><img alt="new chart screen" class="lazy lightbox figure-image" loading=lazy src=../images/new-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fa8b167bf10eadbf251fde87a25a5ade><img alt="new chart screen" class="lazy lightbox lightbox-image" loading=lazy src=../images/new-chart.png></a></li><li>First, use the <span class="btn cstyle button grey noicon"><span><span class=title>Untitled chart</span></span></span> input field and name the chart <strong>Overall Test Duration</strong>.</li><li>For this exercise we want a bar or column chart, so click on the 3rd icon <i class="fa-fw fas fa-chart-bar"></i> in the chart option box.</li><li>In the <strong>Plot editor</strong> enter <code>synthetics.run.duration.time.ms</code> (this is runtime in duration for our test) in the <strong>Signal</strong> box and hit enter.</li><li>Right now we see different colored bars, a different color for each region the test runs from. As this is not needed we can change that behavior by adding some analytics.</li><li>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Add analytics</span></span></span> button.</li><li>From the drop-down choose the <strong>Mean</strong> option, then pick <code>mean:aggregation</code> and click outside the dialog box. Notice how the chart changes to a single color as the metrics are now aggregated.</li><li>The x-axis does not currently represent time to change this click on the settings <i class="fa-fw fas fa-cog"></i> icon at the end of the plot line. The following following dialog will open:
<a href=#R-image-0109492a81b98e73e0617d656c422d26 class=lightbox-link><img alt="signal setup" class="lazy lightbox figure-image" loading=lazy src=../images/signal-setup.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0109492a81b98e73e0617d656c422d26><img alt="signal setup" class="lazy lightbox lightbox-image" loading=lazy src=../images/signal-setup.png></a></li><li>Change the <strong>Display units</strong> <strong>(2)</strong> in the drop-down box from <strong>None</strong> to <strong>Time (autoscaling)/Milliseconds(ms)</strong>. The drop-down changes to <strong>Millisecond</strong> and the x-axis of the chart now represents the test duration time.</li><li>Close the dialog, either by clicking on the settings <i class="fa-fw fas fa-cog"></i> icon or the <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>close</span></span></span> button.</li><li>Add our detector by clicking the <span class="btn cstyle button blue noicon"><span><span class=title>Link Detector</span></span></span> button and start typing the name of the detector you created earlier.</li><li>Click on the detector name to select it.</li><li>Notice that a colored border appears around the chart, indicating the status of the alert, along with a bell icon at the top of the dashboard as shown below:
<a href=#R-image-b0f8880bf2ad8942ac6dff27c2c4ec6a class=lightbox-link><img alt="detector added" class="lazy lightbox figure-image" loading=lazy src=../images/detector-added.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b0f8880bf2ad8942ac6dff27c2c4ec6a><img alt="detector added" class="lazy lightbox lightbox-image" loading=lazy src=../images/detector-added.png></a></li><li>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Save and close</span></span></span> button.</li><li>In the dashboard, move the charts so they look like the screenshot below:
<a href=#R-image-cd195edf45fa749bc9aabf8d28c6a243 class=lightbox-link><img alt="Service Health Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/service-health-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd195edf45fa749bc9aabf8d28c6a243><img alt="Service Health Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/service-health-dashboard.png></a></li><li>For the final task, click three vertical dots <strong>‚ãÆ</strong> at the top right of the page (next to <strong>AI Assistant</strong>) and click on <strong>View fullscreen</strong>. This will be the view you would use on the TV monitor on the wall (press Esc to go back).</li></ul></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>In your spare time have a try at adding another custom chart to the dashboard using RUM metrics. You could copy a chart from the out-of-the-box <strong>RUM applications</strong> dashboard group. Or you could use the RUM metric <code>rum.client_error.count</code> to create a chart that shows the number of client errors in the application.</p></div></details><p>Finally, we will run through a workshop wrap-up.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=workshop-wrap-up->Workshop Wrap-up üéÅ</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Congratulations, you have completed the <strong>Splunk4Rookies - Observability Cloud Workshop</strong>. Today, you have become familiar with how to use Splunk Observability Cloud to monitor your applications and infrastructure.</p><p>Celebrate your achievement by adding this certificate to your <span class="badge cstyle blue badge-with-title"><span class=badge-title><i class="fab fa-fw fa-linkedin-in"></i></span><span class=badge-content><a href='https://www.linkedin.com/profile/add?startTask=CERTIFICATION_NAME&name=Splunk4Rookies%20-%20Observability%20Cloud&organizationId=20226&issueYear
=2026&issueMonth=2&certUrl=https%3A%2F%2Fsplunk.github.io%2Fobservability-workshop%2Fsplunk4rookies%2Fobservability-cloud%2Fimages%2Fcertificate.png' style=color:#fff target=_blank>LinkedIn</a>
</span></span>profile.</p><p>Let&rsquo;s recap what we have learned and what you can do next.</p><p><a href=#R-image-271419a10c0efba8317961ed5aefa172 class=lightbox-link><img alt=Champagne class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/10-wrap-up/images/champagne.png?width=45vw" style=height:auto;width:45vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-271419a10c0efba8317961ed5aefa172><img alt=Champagne class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/observability-cloud/10-wrap-up/images/champagne.png?width=45vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 10. Workshop Wrap-up</h1><article class=default><header class=headline></header><h1 id=key-takeaways>Key Takeaways</h1><p>During the workshop, we have seen how the Splunk Observability Cloud in combination with the OpenTelemetry signals (<strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong>) can help you to reduce mean time to detect (<strong>MTTD</strong>) and also reduce mean time to resolution (<strong>MTTR</strong>).</p><ul><li>We have a better understanding of the Main User interface and its components, the <em>Landing, Infrastructure, APM, RUM, Synthetics, Dashboard</em> pages, and a quick peek at the <em>Settings</em> page.</li><li>Depending on time, we did an <em>Infrastructure</em> exercise and looked at <em>Metrics</em> used in the Kubernetes Navigators and saw related services found on our Kubernetes cluster:</li></ul><p><a href=#R-image-eae84ae7c58e08ff4f6866013a263c71 class=lightbox-link><img alt=Kubernetes class="lazy lightbox figure-image" loading=lazy src=../images/infra.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eae84ae7c58e08ff4f6866013a263c71><img alt=Kubernetes class="lazy lightbox lightbox-image" loading=lazy src=../images/infra.png></a></p><ul><li>Understood what users were experiencing and used RUM & APM to Troubleshoot a particularly long page load, by following its trace across the front and back end and right to the log entries.
We used tools like RUM <em>Session replay</em> and the APM <em>Dependency map</em> with Breakdown to discover what is causing our issue:</li></ul><p><a href=#R-image-a8045604e89b8ffa2b45b02815147b32 class=lightbox-link><img alt="rum and apm" class="lazy lightbox figure-image" loading=lazy src=../images/rum-apm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a8045604e89b8ffa2b45b02815147b32><img alt="rum and apm" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-apm.png></a></p><ul><li>Used <em>Tag Spotlight</em>, in both RUM and APM, to understand blast radius, detect trends and context for our performance issues and errors. We drilled down in <em>Span&rsquo;s</em> in the APM <em>Trace waterfall</em> to see how services interacted and find errors:</li></ul><p><a href=#R-image-be961643122a3a4aa39b5cdc77edbd94 class=lightbox-link><img alt="tag and waterfall" class="lazy lightbox figure-image" loading=lazy src=../images/tag-spotlight-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be961643122a3a4aa39b5cdc77edbd94><img alt="tag and waterfall" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag-spotlight-waterfall.png></a></p><ul><li>We used the <em>Related content</em> feature to follow the link between our <em>Trace</em> directly to the <em>Logs</em> related to our <em>Trace</em> and used filters to drill down to the exact cause of our issue.</li></ul><p><a href=#R-image-659586d2540af1ee4b57c0c9fd76e7ca class=lightbox-link><img alt=logs class="lazy lightbox figure-image" loading=lazy src=../images/log.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-659586d2540af1ee4b57c0c9fd76e7ca><img alt=logs class="lazy lightbox lightbox-image" loading=lazy src=../images/log.png></a></p><ul><li><p>We then looked at Synthetics, which can simulate web and mobile traffic and we used the available Synthetic Test, first to confirm our finding from RUM/AMP and Log observer, then we created a <em>Detector</em> so we would be alerted if when the run time of a test exceeded our SLA.</p></li><li><p>In the final exercise, we created a health dashboard to keep that running for our Developers and SREs on a TV screen:</p></li></ul><p><a href=#R-image-c5fd65495fea46400f4e8fde18eb90b0 class=lightbox-link><img alt="synth and TV" class="lazy lightbox figure-image" loading=lazy src=../images/synth-tv.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c5fd65495fea46400f4e8fde18eb90b0><img alt="synth and TV" class="lazy lightbox lightbox-image" loading=lazy src=../images/synth-tv.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 28, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=financial-services-observability-cloud>Financial Services Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Authors
</span><span class=badge-content>Robert Castley, Pieter Hagen, Jeremy Hicks, & Deepti Bhutani</span></span><p>In this workshop, we‚Äôll demonstrate how Splunk Observability Cloud delivers value to our financial services customers due to its ability to provide real-time, full-fidelity, AI-powered monitoring across your entire digital ecosystem from infrastructure to applications to user experiences. It‚Äôs purpose-built for modern, cloud-native, microservices-based environments. You‚Äôll have the opportunity to explore some of the platform‚Äôs most powerful features, which set it apart from other observability solutions:</p><ul><li><strong>Infrastructure Monitoring</strong></li><li><strong>Complete end-to-end trace visibility with NoSample Full-fidelity Application Performance Monitoring (APM)</strong></li><li><strong>No-code log querying</strong></li><li><strong>Root cause analysis with tag analytics and error stacks</strong></li><li><strong>Related Content for seamless navigation between components</strong></li></ul><p>One of the core strengths of Splunk Observability Cloud is its ability to unify telemetry data, creating a comprehensive picture of both the end-user experience and your entire application stack.</p><p>The workshop will focus on a microservices-based Wire transfer application deployed on Kubernetes. Users can initiate a wire transfer and all of the appropriate checks for user, balance, and compliance will be handled. This application is fully instrumented with OpenTelemetry to capture detailed performance data.</p><p><strong>What is OpenTelemetry?</strong><br>OpenTelemetry is an open-source collection of tools, APIs, and software development kits (SDKs) designed to help you instrument, generate, collect, and export telemetry data‚Äîsuch as metrics, traces, and logs. This data enables in-depth analysis of your software‚Äôs performance and behavior.</p><p>The OpenTelemetry community is growing rapidly, supported by leading companies like Splunk, Google, Microsoft, and Amazon. It currently has the second-largest number of contributors within the Cloud Native Computing Foundation, following only Kubernetes.</p><p><a href=#R-image-b425c34610ab8168fc71506f924be02f class=lightbox-link><img alt="Full Stack" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/images/featured.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b425c34610ab8168fc71506f924be02f><img alt="Full Stack" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/images/featured.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Financial Services Observability Cloud</h1><article class=default><header class=headline></header><h1 id=workshop-overview>Workshop Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p><strong>Introduction</strong><br>The goal of this workshop is to give you hands-on experience troubleshooting an issue using Splunk Observability Cloud to identify its root cause. We‚Äôve provided a fully instrumented microservices-based application that actually mimic a wire transfer workflow that is running on Kubernetes, which sends metrics, traces, and logs to Splunk Observability Cloud for real-time analysis.</p><p><strong>Who Should Attend?</strong><br>This workshop is ideal for anyone looking to gain practical knowledge of Splunk Observability. It&rsquo;s designed for individuals with little or no prior experience with the platform.</p><p><strong>What You‚Äôll Need</strong><br>All you need is your laptop and a browser with access to external websites. The workshop can be attended either in-person or via Zoom. If you don‚Äôt have the Zoom client installed, you can still join using your browser.</p><p><strong>Workshop Overview</strong><br>In this 3-hour session, we‚Äôll cover the fundamentals of Splunk Observability‚Äîthe only platform offering streaming analytics and NoSample Full Fidelity distributed tracing‚Äîin an interactive, hands-on setting. Here&rsquo;s what you can expect:</p><ul><li><p><strong>OpenTelemetry</strong><br>Learn why OpenTelemetry is essential for modern observability and how it enhances visibility into your systems.</p></li><li><p><strong>Tour of the Splunk Observability User Interface</strong><br>Take a guided tour of Splunk Observability Cloud‚Äôs interface, where we‚Äôll show you how to navigate the five key components: APM, Log Observer, and Infrastructure.</p></li><li><p><strong>Splunk Application Performance Monitoring (APM)</strong><br>Gain end-to-end visibility of your customers&rsquo; request path using APM traces. You‚Äôll explore how telemetry from various services is captured and visualized in Splunk Observability Cloud, helping you detect anomalies and errors.</p></li><li><p><strong>Splunk Log Observer (LO)</strong><br>Learn how to leverage the &ldquo;Related Content&rdquo; feature to easily navigate between components. In this case, we‚Äôll move from an APM trace to the related logs for deeper insight into issues.</p></li></ul><p>By the end of this session, you&rsquo;ll have gained practical experience with Splunk Observability Cloud and a solid understanding of how to troubleshoot and resolve issues across your application stack.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=what-is-opentelemetry--why-should-you-care>What is OpenTelemetry & why should you care?</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=opentelemetry>OpenTelemetry<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With the rise of cloud computing, microservices architectures, and ever-more complex business requirements, the need for Observability has never been greater. Observability is the ability to understand the internal state of a system by examining its outputs. In the context of software, this means being able to understand the internal state of a system by examining its telemetry data, which includes <strong>metrics</strong>, <strong>traces</strong>, and <strong>logs</strong>.</p><p>To make a system observable, it must be instrumented. That is, the code must emit traces, metrics, and logs. The instrumented data must then be sent to an Observability back-end such as <strong>Splunk Observability Cloud</strong>.</p><table><thead><tr><th style=text-align:center>Metrics</th><th style=text-align:center>Traces</th><th style=text-align:center>Logs</th></tr></thead><tbody><tr><td style=text-align:center><em><strong>Do I have a problem?</strong></em></td><td style=text-align:center><em><strong>Where is the problem?</strong></em></td><td style=text-align:center><em><strong>What is the problem?</strong></em></td></tr></tbody></table><p>OpenTelemetry does two important things:</p><ul><li>Allows you to <strong>own</strong> the data that you generate rather than be stuck with a proprietary data format or tool.</li><li>Allows you to learn <strong>a single set</strong> of APIs and conventions</li></ul><p>These two things combined enable teams and organizations the flexibility they need in today‚Äôs modern computing world.</p><p>There are a lot of variables to consider when getting started with Observability, including the all-important question: <em>&ldquo;How do I get my data into an Observability tool?&rdquo;</em>. The industry-wide adoption of OpenTelemetry makes this question easier to answer than ever.</p><h2 id=why-should-you-care>Why Should You Care?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>OpenTelemetry is completely open-source and free to use. In the past, monitoring and Observability tools relied heavily on proprietary agents meaning that the effort required to change or set up additional tooling required a large amount of changes across systems, from the infrastructure level to the application level.</p><p>Since OpenTelemetry is vendor-neutral and supported by many industry leaders in the Observability space, adopters can switch between supported Observability tools at any time with minor changes to their instrumentation. This is true regardless of which distribution of OpenTelemetry is used ‚Äì like with Linux, the various distributions bundle settings and add-ons but are all fundamentally based on the community-driven OpenTelemetry project.</p><p>Splunk has fully committed to OpenTelemetry so that our customers can collect and use <strong>ALL</strong> their data, in any type, any structure, from any source, on any scale, and all in real-time. OpenTelemetry is fundamentally changing the monitoring landscape, enabling IT and DevOps teams to bring data to every question and every action. You will experience this during these workshops.</p><p><a href=#R-image-1ac8aa6da8e663d843e054a704e6028b class=lightbox-link><img alt="OpenTelemetry Logo" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/2-opentelemetry/images/otel.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1ac8aa6da8e663d843e054a704e6028b><img alt="OpenTelemetry Logo" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/2-opentelemetry/images/otel.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=ui---quick-tour->UI - Quick Tour üöå</h1><p>We are going to start with a short walkthrough of the various components of Splunk Observability Cloud. The aim of this is to get you familiar with the UI.</p><ol><li><strong>Signing in to Splunk Observability Cloud</strong></li><li><strong>Application Performance Monitoring (APM)</strong></li><li><strong>Infrastructure Monitoring</strong></li><li><strong>Log Observer</strong></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. UI - Quick Tour</h1><article class=default><header class=headline></header><h1 id=getting-started>Getting Started</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h3 id=1-sign-in-to-splunk-observability-cloud>1. Sign in to Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You should have received an e-mail from Splunk inviting you to the Workshop Org. This e-mail will look like the screenshot below, if you cannot find it, please check your Spam/Junk folders or inform your Instructor. You can also check for other solutions in our <a href=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/1-homepage/99-login-faq/index.html><strong>login F.A.Q.</strong></a>.</p><p>To proceed click the <strong>Join Now</strong> button or click on the link provided in the e-mail.</p><p>If you have already completed the registration process you can skip the rest and proceed directly to Splunk Observability Cloud and log in:</p><ul><li><a href=https://app.eu0.signalfx.com rel=external><strong>https://app.eu0.signalfx.com (EMEA)</strong></a></li><li><a href=https://app.us1.signalfx.com rel=external><strong>https://app.us1.signalfx.com (APAC/AMER)</strong></a></li></ul><p><a href=#R-image-2a71f1550c19eb0abdc7a244f0bba4c8 class=lightbox-link><img alt=email class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/1-homepage/images/invite-email.png?width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2a71f1550c19eb0abdc7a244f0bba4c8><img alt=email class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/1-homepage/images/invite-email.png?width=25vw"></a></p><p>If this is your first time using Splunk Observability Cloud, you will be presented with the registration form. Enter your full name, and desired password. Please note that the password requirements are:</p><ul><li><strong>Must</strong> be between 8 and 32 characters</li><li><strong>Must</strong> contain at least one capital letter</li><li><strong>Must</strong> have at least one number</li><li><strong>Must</strong> have at least one symbol (e.g. !@#$%^&*()_+)</li></ul><p>Click the checkbox to agree to the terms and conditions and click the <strong>SIGN IN NOW</strong> button.</p><p><a href=#R-image-539380570b7252227062cf3c34bbe80b class=lightbox-link><img alt=User-Setup class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/1-homepage/images/enter-password.png?width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-539380570b7252227062cf3c34bbe80b><img alt=User-Setup class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/1-homepage/images/enter-password.png?width=25vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=home-page>Home Page</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>After you have registered and logged into Splunk Observability Cloud you will be taken to the home or landing page. Here, you will find several useful features to help you get started.</p><p><a href=#R-image-cb3c1bede4723acbaf7d19c689c8eaa9 class=lightbox-link><img alt="home page" class="lazy lightbox figure-image" loading=lazy src=../images/home-screen.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb3c1bede4723acbaf7d19c689c8eaa9><img alt="home page" class="lazy lightbox lightbox-image" loading=lazy src=../images/home-screen.png></a></p><ol><li><strong>Explore your data pane:</strong> Displays which integrations are enabled and allows you to add additional integrations if you are an Administrator.</li><li><strong>Documentation pane:</strong> Training videos and links to documentation to get you started with Splunk Observability Cloud.</li><li><strong>Recents pane:</strong> Recently created/visited dashboards and/or detectors for quick access.</li><li><strong>Main Menu pane:</strong> Navigate the components of Splunk Observability Cloud.</li><li><strong>Org Switcher:</strong> Easily switch between Organizations (if you are a member of more than one Organization).</li><li><strong>Expand/Contract Main Menu:</strong> Expand <strong>&#187;</strong> / Collapse <strong>&#171;</strong> the main menu if space is at a premium.</li></ol><p>Let&rsquo;s start with our first exercise:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Expand the Main Menu and click on <strong>Settings</strong>.</li><li>Check in the <strong>Org Switcher</strong> if you have access to more than one Organization.</li></ul></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you have used Splunk Observability before, you may be placed in an Organization you have used previously. Make sure you are in the correct workshop organization. Verify this with your instructor if you have access to multiple Organizations.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click <strong>Onboarding Guidance</strong> (Here you can toggle the visibility of the onboarding panes. This is useful if you know the product well enough, and can use the space to show more information).</li><li>Hide the Onboarding Content for the <strong>Home Page</strong>.</li><li>At the bottom of the menu, select your preferred appearance: <strong>Light</strong>, <strong>Dark</strong> or <strong>Auto</strong> mode.</li><li>Did you also notice this is where the <strong>Sign Out</strong> option is? Please don&rsquo;t üòä !</li><li>Click <strong>&lt;</strong> to get back to the main menu.</li></ul></div></details><p>Next, let&rsquo;s check out <strong>Splunk Real User Monitoring (RUM)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=application-performance-monitoring-overview>Application Performance Monitoring Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk APM provides a <strong>NoSample</strong> end-to-end visibility of every service and its dependency to solve problems quicker across monoliths and microservices. Teams can immediately detect problems from new deployments, confidently troubleshoot by scoping and isolating the source of an issue, and optimize service performance by understanding how back-end services impact end users and business workflows.</p><p><strong>Real-time monitoring and alerting:</strong> Splunk provides out-of-the-box service dashboards and automatically detects and alerts on RED metrics (rate, error and duration) when there is a sudden change.</p><p><strong>Dynamic telemetry maps:</strong> Easily visualize service performance in modern production environments in real-time. End-to-end visibility of service performance from infrastructure, applications, end users, and all dependencies helps quickly scope new issues and troubleshoot more effectively.</p><p><strong>Intelligent tagging and analysis:</strong> View all tags from your business, infrastructure and applications in one place to easily compare new trends in latency or errors to their specific tag values.</p><p><strong>AI-directed troubleshooting identifies the most impactful issues:</strong> Instead of manually digging through individual dashboards, isolate problems more efficiently. Automatically identify anomalies and the sources of errors that impact services and customers the most.</p><p><strong>Complete distributed tracing analyses every transaction:</strong> Identify problems in your cloud-native environment more effectively. Splunk distributed tracing visualizes and correlates every transaction from the back-end and front-end in context with your infrastructure, business workflows and applications.</p><p><strong>Full stack correlation:</strong> Within Splunk Observability, APM links traces, metrics, logs and profiling together to easily understand the performance of every component and its dependency across your stack.</p><p><strong>Monitor database query performance:</strong> Easily identify how slow and high execution queries from SQL and NoSQL databases impact your services, endpoints and business workflows ‚Äî no instrumentation required.</p><p><a href=#R-image-995d037b340751ebef25ce5506c075ec class=lightbox-link><img alt="Architecture Overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/2-apm-home/images/arch-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-995d037b340751ebef25ce5506c075ec><img alt="Architecture Overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/2-apm-home/images/arch-overview.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. APM Overview</h1><article class=default><header class=headline></header><h1 id=application-performance-monitoring-home-page>Application Performance Monitoring Home page</h1><p>Click <strong>APM</strong> in the main menu, the APM Home Page is made up of 3 distinct sections:</p><p><a href=#R-image-5920d2fcdd41654a8b7c166172acd5da class=lightbox-link><img alt="APM page" class="lazy lightbox figure-image" loading=lazy src=../images/apm-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5920d2fcdd41654a8b7c166172acd5da><img alt="APM page" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-main.png></a></p><ol><li><strong>Onboarding Pane Pane:</strong> Training videos and links to documentation to get you started with Splunk APM.</li><li><strong>APM Overview Pane:</strong> Real-time metrics for the Top Services and Top Business Workflows.</li><li><strong>Functions Pane:</strong> Links for deeper analysis of your services, tags, traces, database query performance and code profiling.</li></ol><p>The <strong>APM Overview</strong> pan provides a high-level view of the health of your application. It includes a summary of the services, latency and errors in your application. It also includes a list of the top services by error rate and the top business workflows by error rate (a business workflow is the start-to-finish journey of the collection of traces associated with a given activity or transaction and enables monitoring of end-to-end KPIs and identifying root causes and bottlenecks).</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
About Environments</summary><div class=box-content><p>To easily differentiate between multiple applications, Splunk uses <strong>environments</strong>. The naming convention for workshop environments is <strong>[NAME OF WORKSHOP]-workshop</strong>. Your instructor will provide you with the correct one to select.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Verify that the time window we are working with is set to the last 15 minutes (<strong>-15m</strong>).</li><li>Change the environment to the workshop one by selecting its name from the drop-down box and make sure that is the only one selected.</li></ul><div class=tab-panel data-tab-group=R-tabs-69859ac3d423beb6642b721c972636cb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-08ad70e875cfec418ac5309fbeabcd29 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-69859ac3d423beb6642b721c972636cb","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-50f15ae6a8ccd659c19a23c32bcaf1bf aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-69859ac3d423beb6642b721c972636cb","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-08ad70e875cfec418ac5309fbeabcd29 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What can you conclude from the <em>Top Services by Error Rate</em> chart?</strong></p></div></div><div id=R-tab-id-50f15ae6a8ccd659c19a23c32bcaf1bf data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The <em>wire-transfer-service</em> has a high error rate</strong></p></div></div></div></div></div></details><p>If you scroll down the Overview Page you will notice some services listed have <strong>Inferred Service</strong> next to them.</p><p>Splunk APM can infer the presence of the remote service, or inferred service if the span calling the remote service has the necessary information. Examples of possible inferred services include databases, HTTP endpoints, and message queues. Inferred services are not instrumented, but they are displayed on the service map and the service list.</p><p>Next, let&rsquo;s check out <strong>Splunk Log Observer (LO)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=log-observer-overview>Log Observer Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Log Observer Connect allows you to seamlessly bring in the same log data from your Splunk Platform into an intuitive and <strong>no-code</strong> interface designed to help you find and fix problems quickly. You can easily perform log-based analysis and seamlessly correlate your logs with Splunk Infrastructure Monitoring‚Äôs real-time metrics and Splunk APM traces in one place.</p><p><strong>End-to-end visibility:</strong> By combining the powerful logging capabilities of Splunk Platform with Splunk Observability Cloud‚Äôs traces and real-time metrics for deeper insights and more context of your hybrid environment.</p><p><strong>Perform quick and easy log-based investigations:</strong> By reusing logs that are already ingested in Splunk Cloud Platform or Enterprise in a simplified and intuitive interface (no need to know SPL!) with customizable and out-of-the-box dashboards</p><p><strong>Achieve higher economies of scale and operational efficiency:</strong> By centralizing log management across teams, breaking down data and team silos, and getting better overall support</p><p><a href=#R-image-b0dddd2a79519d057113c5287f491a82 class=lightbox-link><img alt="Logo graph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/3-log-observer-home/images/logo-image-loop.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b0dddd2a79519d057113c5287f491a82><img alt="Logo graph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/3-log-observer-home/images/logo-image-loop.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Log Observer Overview</h1><article class=default><header class=headline></header><h1 id=log-observer-home-page>Log Observer Home Page</h1><p>Click <strong>Log Observer</strong> in the main menu, the Log Observer Home Page is made up of 4 distinct sections:</p><p><a href=#R-image-d9d424dc272c3099b805aa7a0d4c5a4a class=lightbox-link><img alt="Lo Page" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9d424dc272c3099b805aa7a0d4c5a4a><img alt="Lo Page" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-main.png></a></p><ol><li><strong>Onboarding Pane:</strong> Training videos and links to documentation to get you started with Splunk Log Observer.</li><li><strong>Filter Bar:</strong> Filter on time, indexes, and fields and also Save Queries.</li><li><strong>Logs Table Pane:</strong> List of log entries that match the current filter criteria.</li><li><strong>Fields Pane:</strong> List of fields available in the currently selected index.</li></ol><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Splunk indexes</summary><div class=box-content><p>Generally, in Splunk, an &ldquo;index&rdquo; refers to a designated place where your data is stored. It&rsquo;s like a folder or container for your data. Data within a Splunk index is organized and structured in a way that makes it easy to search and analyze. Different indexes can be created to store specific types of data. For example, you might have one index for web server logs, another for application logs, and so on.</p></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you have used Splunk Enterprise or Splunk Cloud before, you are probably used to starting investigations with logs. As you will see in the following exercise, you can do that with Splunk Observability Cloud as well. This workshop, however, will use all the <strong>OpenTelemetry</strong> signals for investigations.</p></div></details><p>Let&rsquo;s run a little search exercise:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><p>Set the time frame to <strong>-15m</strong>.</p></li><li><p>Click on <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Add Filter</span></span></span> in the filter bar then click on <strong>Fields</strong> in the dialog.</p></li><li><p>Type in <strong>cardType</strong> and select it.</p></li><li><p>Under <strong>Top values</strong> click on <strong>visa</strong>, then click on <strong>=</strong> to add it to the filter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p><p><a href=#R-image-5c34b413788dcbf0e6025839e4edf168 class=lightbox-link><img alt="logo search" class="lazy lightbox figure-image" loading=lazy src="../images/log-filter-bar.png?width=920px" style=height:auto;width:920px></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c34b413788dcbf0e6025839e4edf168><img alt="logo search" class="lazy lightbox lightbox-image" loading=lazy src="../images/log-filter-bar.png?width=920px"></a></p></li><li><p>Click on one of the log entries in the Logs table to validate that the entry contains <code>cardType: "visa"</code>.</p></li><li><p>Let&rsquo;s find all the wire transfer orders that have been compelted. Click on <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Clear All</span></span></span> in the filter bar to remove the previous filter.</p></li><li><p>Click again on <span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Add Filter</span></span></span> in the filter bar, then select <strong>Keyword</strong>. Next just type <code>order</code> in the <strong>Enter Keyword&mldr;</strong> box and press enter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p></li><li><p>You should now only have log lines that contain the word <code>order</code>. There are still a lot of log lines &ndash; some of which may not be our service &ndash; so let&rsquo;s filter some more.</p></li><li><p>Add another filter, this time select the <strong>Fields</strong> box, then type <code>severity</code> in the <strong>Find a field &mldr;</strong> search box and select it.
<a href=#R-image-9276d408230d34007cc3c3932fd026d3 class=lightbox-link><img alt=severity class="lazy left lightbox figure-image" loading=lazy src="../images/find-severity.png?width=15vw&classes=left" style=height:auto;width:15vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9276d408230d34007cc3c3932fd026d3><img alt=severity class="lazy left lightbox lightbox-image" loading=lazy src="../images/find-severity.png?width=15vw&classes=left"></a></p></li><li><p>Under <strong>Top values</strong> click on <strong>error</strong>, then click on <strong>=</strong> to add it to the filter.</p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Run search</span></span></span></p></li><li><p>You should now have a list of wire transfer orders that failed to complete for the last 15 minutes.</p></li></ul></div></details><p>Next, let&rsquo;s check out <strong>Splunk Synthetics</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=infrastructure-overview>Infrastructure Overview</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Splunk Infrastructure Monitoring (IM) is a market-leading monitoring and observability service for hybrid cloud environments. Built on a patented streaming architecture, it provides a <strong>real-time</strong> solution for engineering teams to visualize and analyze performance across infrastructure, services, and applications in a fraction of the time and with greater accuracy than traditional solutions.</p><p><strong>OpenTelemetry standardization:</strong> Gives you full control over your data ‚Äî freeing you from vendor lock-in and implementing proprietary agents.</p><p><strong>Splunk‚Äôs OTel Collector:</strong> Seamless installation and dynamic configuration, auto-discovers your entire stack in seconds for visibility across clouds, services, and systems.</p><p><strong>300+ Easy-to-use OOTB content:</strong> Pre-built navigators and dashboards, deliver immediate visualizations of your entire environment so that you can interact with all your data in real time.</p><p><strong>Kubernetes navigator:</strong> Provides an instant, comprehensive out-of-the-box hierarchical view of nodes, pods, and containers. Ramp up even the most novice Kubernetes user with easy-to-understand interactive cluster maps.</p><p><strong>AutoDetect alerts and detectors:</strong> Automatically identify the most important metrics, out-of-the-box, to create alert conditions for detectors that accurately alert from the moment telemetry data is ingested and use real-time alerting capabilities for important notifications in seconds.</p><p><strong>Log views in dashboards:</strong> Combine log messages and real-time metrics on one page with common filters and time controls for faster in-context troubleshooting.</p><p><strong>Metrics pipeline management:</strong> Control metrics volume at the point of ingest without re-instrumentation with a set of aggregation and data-dropping rules to store and analyze only the needed data. Reduce metrics volume and optimize observability spend.</p><p><a href=#R-image-dd65fcab63c3a74b1a04fa25fcd5042f class=lightbox-link><img alt="Infrastructure Overview" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/4-infrastructure-home/images/infrastructure-over.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dd65fcab63c3a74b1a04fa25fcd5042f><img alt="Infrastructure Overview" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/3-quick-tour/4-infrastructure-home/images/infrastructure-over.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-apm>Splunk APM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>You are a <strong>back-end developer</strong> and you have been called in to help investigate an issue found by the SRE. The SRE has identified a poor user experience and has asked you to investigate the issue.</p></div></details><p>Getting to the root cause of a problem in cloud-native environments requires engineers to navigate through immense complexity within a distributed system. Oftentimes, you didn‚Äôt write the code and you lack the background and context to quickly understand what‚Äôs going on when a problem occurs. That is where Splunk APM comes in.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Splunk APM</h1><article class=default><header class=headline></header><h1 id=1-apm-explore>1. APM Explore</h1><p>When you click into the APM section of Splunk Observability Cloud you are greated with an overview of your APM data including top services by error rates, and R.E.D. metrics for services and workflows.</p><p>The APM Service Map displays the dependencies and connections among your instrumented and inferred services in APM. The map is dynamically generated based on your selections in the time range, environment, workflow, service, and tag filters.</p><p>You can see the services involved in any of your APM user workflows by clicking into the <strong>Service Map</strong>. When you select a service in the <strong>Service Map</strong>, the charts in the <strong>Business Workflow</strong> sidepane are updated to show metrics for the selected service. The <strong>Service Map</strong> and any indicators are syncronized with the time picker and chart data displayed.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the <strong>wire-transfer-service</strong> in the Service Map.</li></ul></div></details><p><a href=#R-image-f50dcf34d68d1a0428b8006d6096f8c7 class=lightbox-link><img alt="APM Explore" class="lazy lightbox figure-image" loading=lazy src=../images/apm-business-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f50dcf34d68d1a0428b8006d6096f8c7><img alt="APM Explore" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-business-workflow.png></a></p><p>Splunk APM also provides built-in <strong>Service Centric Views</strong> to help you see problems occurring in real time and quickly determine whether the problem is associated with a service, a specific endpoint, or the underlying infrastructure. Let&rsquo;s have a closer look.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the right hand pane, click on <strong>wire-transfer-service</strong> in blue.</li></ul></div></details><p><a href=#R-image-f18b7cc102b4882ca4765428118dae79 class=lightbox-link><img alt="APM Service" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f18b7cc102b4882ca4765428118dae79><img alt="APM Service" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-apm-service-view>2. APM Service View</h1><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Service View</summary><div class=box-content><p>As a service owners you can use the service view in Splunk APM to get a complete view of your service health in a single pane of glass. The service view includes a service-level indicator (SLI) for availability, dependencies, request, error, and duration (RED) metrics, runtime metrics, infrastructure metrics, Tag Spotlight, endpoints, and logs for a selected service. You can also quickly navigate to code profiling and memory profiling for your service from the service view.</p></div></details><p><a href=#R-image-9d4556cb222cf80708092fd6ba5ef75c class=lightbox-link><img alt="Service Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d4556cb222cf80708092fd6ba5ef75c><img alt="Service Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-dashboard.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>In the <strong>Time</strong> box change the timeframe to <strong>-1h</strong>. Note how the charts update.</li><li>These charts are very useful to quickly identify performance issues. You can use this dashboard to keep an eye on the health of your service.</li><li>Scroll down the page and expand <strong>Infrastructure Metrics</strong>. Here you will see the metrics for the Host and Pod.</li><li><strong>Runtime Metrics</strong> are not available as profiling data is not available for services written in Node.js.</li><li>Now let&rsquo;s go back to the explore view, you can hit the back button in your Browser</li></ul></div></details><p><a href=#R-image-2ca7f1ee5c21443d57139152b7d60c90 class=lightbox-link><img alt="APM Explore" class="lazy lightbox figure-image" loading=lazy src=../images/apm-business-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2ca7f1ee5c21443d57139152b7d60c90><img alt="APM Explore" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-business-workflow.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-ee4dc9820789dc7355b05c3cb83d1494><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2fefa594ecb69ceaeedab512457a433e aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ee4dc9820789dc7355b05c3cb83d1494","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-c4fda1fa1c05fc135043ca0dddd99df5 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ee4dc9820789dc7355b05c3cb83d1494","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-2fefa594ecb69ceaeedab512457a433e data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>In the Service Map hover over the <strong>wire-transfer-service</strong>. What can you conclude from the popup service chart?</strong></p></div></div><div id=R-tab-id-c4fda1fa1c05fc135043ca0dddd99df5 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The error percentage is very high.</strong></p></div></div></div></div></div></details><p><a href=#R-image-fd71a0942a4e1c28833b2f7054e1c777 class=lightbox-link><img alt="APM Service Chart" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-popup-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fd71a0942a4e1c28833b2f7054e1c777><img alt="APM Service Chart" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-popup-chart.png></a></p><p>We need to understand if there is a pattern to this error rate. We have a handy tool for that, <strong>Tag Spotlight</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-apm-tag-spotlight>3. APM Tag Spotlight</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>To view the tags for the <strong>wire-transfer-service</strong> click on the <strong>wire-transfer-service</strong> and then click on <strong>Tag Spotlight</strong> in the right-hand side functions pane (you may need to scroll down depending upon your screen resolution).* Once in <strong>Tag Spotlight</strong> ensure the toggle <strong>Show tags with no values</strong> is off.</li></ul></div></details><p><a href=#R-image-5494f0f62c05a95517a565a2508946fc class=lightbox-link><img alt="APM Tag Spotlight" class="lazy lightbox figure-image" loading=lazy src=../images/apm-tag-spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5494f0f62c05a95517a565a2508946fc><img alt="APM Tag Spotlight" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-tag-spotlight.png></a></p><p>The views in <strong>Tag Spotlight</strong> are configurable for both the chart and cards. The view defaults to <strong>Requests & Errors</strong>.</p><p>It is also possible to configure which tag metrics are displayed in the cards. It is possible to select any combinations of:</p><ul><li>Requests</li><li>Errors</li><li>Root cause errors</li><li>P50 Latency</li><li>P90 Latency</li><li>P99 Latency</li></ul><p>Also ensure that the <strong>Show tags with no values</strong> toggle is unchecked.</p><p>Scroll through the cards and get familiar with the tags provided by the wire-transfer-service&rsquo;s telemetry.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-76528eff63759312fd63ce80d36d1bee><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-5135bc106400f7e24133e8c277e84e29 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-76528eff63759312fd63ce80d36d1bee","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-c43a8e0190dc045f3e5af6d19c260008 aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-76528eff63759312fd63ce80d36d1bee","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-5135bc106400f7e24133e8c277e84e29 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Which card exposes the tag that identifies what the problem is?</strong></p></div></div><div id=R-tab-id-c43a8e0190dc045f3e5af6d19c260008 data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The <em>version</em> card. The number of requests against <code>v350.10</code> matches the number of errors i.e. 100%</strong></p></div></div></div></div></div></details><p>Now that we have identified the version of the <strong>wire-transfer-service</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. Press the back button on your browser to get back to the Service Map.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-apm-service-breakdown>4. APM Service Breakdown</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Select the <strong>wire-transfer-service</strong> in the Service Map.</li><li>In the right-hand pane click on the <span class="btn cstyle button grey noicon"><span><span class=title>Breakdown</span></span></span>.</li><li>Select <code>tenant.level</code> in the list.</li><li>Back in the Service Map click on <strong>gold</strong> (our most valuable user tier).</li><li>Click on <span class="btn cstyle button grey noicon"><span><span class=title>Breakdown</span></span></span> and select <code>version</code>, this is the tag that exposes the service version.</li><li>Repeat this for <strong>silver</strong> and <strong>bronze</strong>.</li></ul><div class=tab-panel data-tab-group=R-tabs-ef238f91def1d91dedda3daf07258275><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e07e40a4d17223c5885d7acf1718e8e3 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ef238f91def1d91dedda3daf07258275","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-985d2b716ed8bcb3387ba746e79a89ae aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ef238f91def1d91dedda3daf07258275","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-e07e40a4d17223c5885d7acf1718e8e3 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What can you conclude from what you are seeing?</strong></p></div></div><div id=R-tab-id-985d2b716ed8bcb3387ba746e79a89ae data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>Every <code>tenant.level</code> is being impacted by <code>v350.10</code></strong></p></div></div></div></div></div></details><p>You will now see the <strong>wire-transfer-service</strong> broken down into three services, <strong>gold</strong>, <strong>silver</strong> and <strong>bronze</strong>. Each tenant is broken down into two services, one for each version (<code>v350.10</code> and <code>v350.9</code>).</p><p><a href=#R-image-406eeec6054565d5cf3c5c084bb0de29 class=lightbox-link><img alt="APM Service Breakdown" class="lazy lightbox figure-image" loading=lazy src=../images/apm-service-breakdown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-406eeec6054565d5cf3c5c084bb0de29><img alt="APM Service Breakdown" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-service-breakdown.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Span Tags</summary><div class=box-content><p>Using span tags to break down services is a very powerful feature. It allows you to see how your services are performing for different customers, different versions, different regions, etc. In this exercise, we have determined that <code>v350.10</code> of the <strong>wire-transfer-service</strong> is causing problems for all our customers.</p></div></details><p>Next, we need to drill down into a trace to see what is going on.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=5-apm-trace-analyzer>5. APM Trace Analyzer</h1><p>As Splunk APM provides a <strong>NoSample</strong> end-to-end visibility of every service Splunk APM captures every trace. For this workshop, the wire transfer <strong>orderId</strong> is available as a tag. This means that we can use this to search for the exact trace of the poor user experience encountered by users.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Trace Analyzer</summary><div class=box-content><p>Splunk Observability Cloud provides several tools for exploring application monitoring data. <strong>Trace Analyzer</strong> is suited to scenarios where you have high-cardinality, high-granularity searches and explorations to research unknown or new issues.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>With the outer box of the <strong>wire-transfer-service</strong> selected, in the right-hand pane, click on <strong>Traces</strong>.</li><li>Set <strong>Time Range</strong> to <strong>Last 15 minutes</strong>.</li><li>Ensure the <strong>Sample Ratio</strong> is set to <code>1:1</code> and <strong>not</strong> <code>1:10</code>.</li></ul></div></details><p><a href=#R-image-ce3baa9447432ec3017c39ecb47f3088 class=lightbox-link><img alt="APM Trace Analyzer" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-analyzer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce3baa9447432ec3017c39ecb47f3088><img alt="APM Trace Analyzer" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-analyzer.png></a></p><p>The <strong>Trace & error count</strong> view shows the total traces and traces with errors in a stacked bar chart. You can use your mouse to select a specific period within the available time frame.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the dropdown menu that says <strong>Trace & error count</strong>, and change it to <strong>Trace duration</strong></li></ul></div></details><p><a href=#R-image-01440e69538b3cc19d7b7b4f9e81a8a1 class=lightbox-link><img alt="APM Trace Analyzer Heat Map" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-analyzer-heat-map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-01440e69538b3cc19d7b7b4f9e81a8a1><img alt="APM Trace Analyzer Heat Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-analyzer-heat-map.png></a></p><p>The <strong>Trace Duration</strong> view shows a heatmap of traces by duration. The heatmap represents 3 dimensions of data:</p><ul><li>Time on the x-axis</li><li>Trace duration on the y-axis</li><li>The traces (or requests) per second are represented by the heatmap shades</li></ul><p>You can use your mouse to select an area on the heatmap, to focus on a specific time period and trace duration range.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Switch from <strong>Trace duration</strong> back to <strong>Trace & Error count</strong>.</li><li>In the time picker select <strong>Last 1 hour</strong>.</li><li>Note, that most of our traces have errors (red) and there are only a limited amount of traces that are error-free (blue).</li><li>Make sure the <strong>Sample Ratio</strong> is set to <code>1:1</code> and <strong>not</strong> <code>1:10</code>.</li><li>Click on <strong>Add filters</strong>, type in <code>orderId</code> and select <strong>orderId</strong> from the list.</li><li>Find and select the <strong>orderId</strong> provided by your workshop leader and hit enter.
<a href=#R-image-9f286d7b993633014637f6720cc91e45 class=lightbox-link><img alt="Traces by Duration" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-by-id.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f286d7b993633014637f6720cc91e45><img alt="Traces by Duration" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-by-id.png></a></li></ul></div></details><p>We have now filtered down to the exact trace where users reported a poor experience with a very long processing wait.</p><p>A secondary benefit to viewing this trace is that the trace will be accessible for up to 13 months. This will allow developers to come back to this issue at a later stage and still view this trace for example.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the trace in the list.</li></ul></div></details><p>Next, we will walk through the trace waterfall.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=6-apm-waterfall>6. APM Waterfall</h1><p>We have arrived at the <strong>Trace Waterfall</strong> from the <strong>Trace Analyzer</strong>. A trace is a collection of spans that share the same trace ID, representing a unique transaction handled by your application and its constituent services.</p><p>Each span in Splunk APM captures a single operation. Splunk APM considers a span to be an error span if the operation that the span captures results in an error.</p><p><a href=#R-image-069dae44b1e4c16061053b5e265cee36 class=lightbox-link><img alt="Trace Waterfall" class="lazy lightbox figure-image" loading=lazy src=../images/apm-trace-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-069dae44b1e4c16061053b5e265cee36><img alt="Trace Waterfall" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-trace-waterfall.png></a></p><p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on the <span class="btn cstyle button red noicon"><span><span class=title>!</span></span></span> next to any of the <code>wire-transfer-service</code> spans in the waterfall.</li></ul><div class=tab-panel data-tab-group=R-tabs-658ddbf7cb261c8f784b891d5c0a07d6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-54b4ffd54d3bb93cfa3bbf495f5365cd aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-658ddbf7cb261c8f784b891d5c0a07d6","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-5e8e810bc0002c14d96f1074a7b416ac aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-658ddbf7cb261c8f784b891d5c0a07d6","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-54b4ffd54d3bb93cfa3bbf495f5365cd data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>What is the error message and version being reported in the Span Details?</strong></p></div></div><div id=R-tab-id-5e8e810bc0002c14d96f1074a7b416ac data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong><code>Invalid request</code> and <code>v350.10</code></strong>.</p></div></div></div></div></div></details>Now that we have identified the version of the <strong>wire-transfer-service</strong> that is causing the issue, let&rsquo;s see if we can find out more information about the error. This is where <strong>Related Logs</strong> come in.</p><p>Related Content relies on specific metadata that allow APM, Infrastructure Monitoring, and Log Observer to pass filters around Observability Cloud. For related logs to work, you need to have the following metadata in your logs:</p><ul><li><code>service.name</code></li><li><code>deployment.environment</code></li><li><code>host.name</code></li><li><code>trace_id</code></li><li><code>span_id</code></li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>At the very bottom of the <strong>Trace Waterfall</strong> click on <strong>Logs (1)</strong>. This highlights that there are <strong>Related Logs</strong> for this trace.</li><li>Click on the <strong>Logs for trace xxx</strong> entry in the pop-up, this will open the logs for the complete trace in <strong>Log Observer</strong>.</li></ul></div></details><p><a href=#R-image-198aeaee21a6408eb402c9574c084a7e class=lightbox-link><img alt="Related Logs" class="lazy lightbox figure-image" loading=lazy src=../images/apm-related-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-198aeaee21a6408eb402c9574c084a7e><img alt="Related Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-related-logs.png></a></p><p>Next, let&rsquo;s find out more about the error in the logs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-log-observer>Splunk Log Observer</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>Remaining in your <strong>back-end developer</strong> role, you need to inspect the logs from your application to determine the root cause of the issue.</p></div></details><p>Using the content related to the APM trace (logs) we will now use Splunk Log Observer to drill down further to understand exactly what the problem is.</p><p>Related Content is a powerful feature that allows you to jump from one component to another and is available for <strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Splunk Log Observer</h1><article class=default><header class=headline></header><h1 id=1-log-filtering>1. Log Filtering</h1><p><strong>Log Observer (LO)</strong>, can be used in multiple ways. In the quick tour, you used the LO <strong>no-code interface</strong> to search for specific entries in the logs. This section, however, assumes you have arrived in LO from a trace in APM using the <strong>Related Content</strong> link.</p><p>The advantage of this is, as it was with the link between RUM & APM, that you are looking at your logs within the context of your previous actions. In this case, the context is the time frame <strong>(1)</strong>, which matches that of the trace and the filter <strong>(2)</strong> which is set to the <strong>trace_id</strong>.</p><p><a href=#R-image-220cf7577f76d5a2e10f53c5d9028c15 class=lightbox-link><img alt="Trace Logs" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-trace-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-220cf7577f76d5a2e10f53c5d9028c15><img alt="Trace Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-trace-logs.png></a></p><p>This view will include <strong>all</strong> the log lines from <strong>all</strong> applications or services that participated in the back-end transaction started by the end-user interaction with the Online Boutique.</p><p>Even in a small application, the sheer amount of logs found can make it hard to see the specific log lines that matter to the actual incident we are investigating.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>We need to focus on just the Error messages in the logs:</p><ul><li>Click on the <strong>Group By</strong> drop-down box and use the filter to find <strong>Severity</strong>.</li><li>Once selected click the <span class="btn cstyle button blue noicon"><span><span class=title>Apply</span></span></span> button (notice that the chart legend changes to show debug, error and info).
<a href=#R-image-1ccfd1f304558ee8b93b35abc8465648 class=lightbox-link><img alt=legend class="lazy lightbox figure-image" loading=lazy src=../images/severity-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1ccfd1f304558ee8b93b35abc8465648><img alt=legend class="lazy lightbox lightbox-image" loading=lazy src=../images/severity-logs.png></a></li><li>Selecting just the error logs can be done by either clicking on the word error <strong>(1)</strong> in the legend, followed by selecting <strong>Add to filter</strong>. Then click <span class="btn cstyle button blue noicon"><span><span class=title>Run Search</span></span></span></li><li>You could also add the service name, <code>sf_service=wire-transfer-service</code>, to the filter if there are error lines for multiple services, but in our case, this is not necessary.
<a href=#R-image-e5e7119c75dfd175cd486430d516aa40 class=lightbox-link><img alt="Error Logs" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e5e7119c75dfd175cd486430d516aa40><img alt="Error Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-errors.png></a></li></ul></div></details><p>Next, we will look at log entries in detail.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-viewing-log-entries>2. Viewing Log Entries</h1><p>Before we look at a specific log line, let&rsquo;s quickly recap what we have done so far and why we are here based on the 3 pillars of Observability:</p><table><thead><tr><th style=text-align:center>Metrics</th><th style=text-align:center>Traces</th><th style=text-align:center>Logs</th></tr></thead><tbody><tr><td style=text-align:center><em><strong>Do I have a problem?</strong></em></td><td style=text-align:center><em><strong>Where is the problem?</strong></em></td><td style=text-align:center><em><strong>What is the problem?</strong></em></td></tr></tbody></table><ul><li>Using metrics we identified <strong>we have a problem</strong> with our application. This was obvious from the error rate in the Service Dashboards as it was higher than it should be.</li><li>Using traces and span tags we found <strong>where the problem is</strong>. The <strong>wire-transfer-service</strong> comprises of two versions, <code>v350.9</code> and <code>v350.10</code>, and the error rate was <strong>100%</strong> for <code>v350.10</code>.</li><li>We did see that this error from the <strong>wire-transfer-service</strong> <code>v350.10</code> caused multiple retries and a long delay in the response back from the compliance check service.</li><li>From the trace, using the power of <strong>Related Content</strong>, we arrived at the log entries for the failing <strong>wire-transfer-service</strong> version. Now, we can determine <strong>what the problem is</strong>.</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>Click on an error entry in the log table (make sure it says <code>hostname: "wire-transfer-service-xxxx"</code> in case there is a rare error from a different service in the list too.</li></ul><div class=tab-panel data-tab-group=R-tabs-04fb34d0dc335b288f5136476ca5701e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8aa46dac53ffa40ef38e6cbcb1b08d87 aria-expanded=true data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-04fb34d0dc335b288f5136476ca5701e","R-tab-a97ea56b0e00b2379736ae60869ff66a")'>
<span class=tab-nav-text>Question</span>
</button>
<button aria-controls=R-tab-id-85e1478d4d96df11f03dcb4c9ead9b4d aria-expanded=false data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-04fb34d0dc335b288f5136476ca5701e","R-tab-3751695c17afed4055a7a5ad5d46f6f5")'>
<span class=tab-nav-text>Answer</span></button></div><div class=tab-content-container><div id=R-tab-id-8aa46dac53ffa40ef38e6cbcb1b08d87 data-tab-item=R-tab-a97ea56b0e00b2379736ae60869ff66a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>Based on the message, what would you tell the development team to do to resolve the issue?</strong></p></div></div><div id=R-tab-id-85e1478d4d96df11f03dcb4c9ead9b4d data-tab-item=R-tab-3751695c17afed4055a7a5ad5d46f6f5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>The development team needs to rebuild and deploy the container with a valid API Token or rollback to <code>v350.9</code></strong>.</p></div></div></div></div><p><a href=#R-image-9894397e6d5da1b30973ca6faf752fc6 class=lightbox-link><img alt="Log Message" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-log-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9894397e6d5da1b30973ca6faf752fc6><img alt="Log Message" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-log-message.png></a></p><ul><li>Click on the <strong>X</strong> in the log message pane to close it.</li></ul></div></details><details open class="box cstyle notices blue"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-wine-bottle"></i>
Congratulations</summary><div class=box-content><p>You have <strong>successfully</strong> used Splunk Observability Cloud to understand why users are experiencing issues while using the wire transfer service. You used Splunk APM and Splunk Log Observer to understand what happened in your service landscape and subsequently, found the underlying cause, all based on the 3 pillars of Observability, <strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong></p><p>You also learned how to use Splunk&rsquo;s <strong>intelligent tagging and analysis</strong> with <strong>Tag Spotlight</strong> to detect patterns in your applications&rsquo; behavior and to use the <strong>full stack correlation</strong> power of <strong>Related Content</strong> to quickly move between the different components and telemetry while keeping in context of the issue.</p></div></details><p>In the next part of the workshop, we will move from <strong>problem-finding mode</strong> into <strong>mitigation</strong>, <strong>prevention</strong> and <strong>process improvement mode</strong>.</p><p>Next up, creating log charts in a custom dashboard.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-log-timeline-chart>3. Log Timeline Chart</h1><p>Once you have a specific view in Log Observer, it is very useful to be able to use that view in a dashboard, to help in the future with reducing the time to detect or resolve issues. As part of the workshop, we will create an example custom dashboard that will use these charts.</p><p>Let&rsquo;s look at creating a <strong>Log Timeline</strong> chart. The Log Timeline chart is used for visualizing log messages over time. It is a great way to see the frequency of log messages and to identify patterns. It is also a great way to see the distribution of log messages across your environment. These charts can be saved to a custom dashboard.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>First, we will reduce the amount of information to only the columns we are interested in:</p><ul><li>Click on the Configure Table <i class="fa-fw fas fa-cog"></i> icon above the <strong>Logs table</strong> to open the <strong>Table Settings</strong>, untick <code>_raw</code> and ensure the following fields are selected <code>k8s.pod.name</code>, <code>message</code> and <code>version</code>.
<a href=#R-image-bdf87bd53fc683125725de066a5b1fca class=lightbox-link><img alt="Log Table Settings" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bdf87bd53fc683125725de066a5b1fca><img alt="Log Table Settings" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-table.png></a></li><li>Remove the fixed time from the time picker, and set it to the <strong>Last 15 minutes</strong>.</li><li>To make this work for all traces, remove the <code>trace_id</code> from the filter and add the fields <code>sf_service=wire-transfer-service</code> and <code>sf_environment=[WORKSHOPNAME]</code>.</li><li>Click <strong>Save</strong> and select <strong>Save to Dashboard</strong>.
<a href=#R-image-6d6113f548e64fbb0732bae0f305e0fe class=lightbox-link><img alt="save it" class="lazy lightbox figure-image" loading=lazy src=../images/save-query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d6113f548e64fbb0732bae0f305e0fe><img alt="save it" class="lazy lightbox lightbox-image" loading=lazy src=../images/save-query.png></a></li><li>In the chart creation dialog box that appears, for the <strong>Chart name</strong> use <code>Log Timeline</code>.</li><li>Click <span class="btn cstyle button blue noicon"><span><span class=title>Select Dashboard</span></span></span> and then click <span class="btn cstyle button blue noicon"><span><span class=title>New dashboard</span></span></span> in the Dashboard Selection dialog box.</li><li>In the <strong>New dashboard</strong> dialog box, enter a name for the new dashboard (no need to enter a description). Use the following format: <code>Initials - Service Health Dashboard</code> and click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span></li><li>Ensure the new dashboard is highlighted in the list <strong>(1)</strong> and click <span class="btn cstyle button blue noicon"><span><span class=title>OK</span></span></span> <strong>(2)</strong>.
<a href=#R-image-34b0c6c8a27fe1e057e3600fcc36ef43 class=lightbox-link><img alt="Save dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/dashboard-save.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34b0c6c8a27fe1e057e3600fcc36ef43><img alt="Save dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/dashboard-save.png></a></li><li>Ensure that <strong>Log Timeline</strong> is selected as the <strong>Chart Type</strong>.
<a href=#R-image-4adaacd64210586ae514833db8c24508 class=lightbox-link><img alt="log timeline" class="lazy left lightbox figure-image" loading=lazy src="../images/log-timeline.png?classes=left&width=25vw" style=height:auto;width:25vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4adaacd64210586ae514833db8c24508><img alt="log timeline" class="lazy left lightbox lightbox-image" loading=lazy src="../images/log-timeline.png?classes=left&width=25vw"></a></li><li>Click the <span class="btn cstyle button transparent noicon"><span><span class=title>Save</span></span></span> button (<strong>do not</strong> click <strong>Save and goto dashboard</strong> at this time).</li></ul></div></details><p>Next, we will create a <strong>Log View</strong> chart.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-log-view-chart>4. Log View Chart</h1><p>The next chart type that can be used with logs is the <strong>Log View</strong> chart type. This chart will allow us to see log messages based on predefined filters.</p><p>As with the previous Log Timeline chart, we will add a version of this chart to our Customer Health Service Dashboard:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>After the previous exercise make sure you are still in <strong>Log Observer</strong>.</li><li>The filters should be the same as the previous exercise, with the time picker set to the <strong>Last 15 minutes</strong> and filtering on severity=error, <code>sf_service=wire-transfer-service</code> and <code>sf_environment=[WORKSHOPNAME]</code>.</li><li>Make sure we have the header with just the fields we wanted.</li><li>Click again on <strong>Save</strong> and then <strong>Save to Dashboard</strong>.</li><li>This will again provide you with the Chart creation dialog.</li><li>For the <strong>Chart name</strong> use <strong>Log View</strong>.</li><li>This time Click <span class="btn cstyle button blue noicon"><span><span class=title>Select Dashboard</span></span></span> and search for the Dashboard you created in the previous exercise. You can start by typing your initials in the search box <strong>(1)</strong>.
<a href=#R-image-245a67137d94eb6a00919636d3e58a9d class=lightbox-link><img alt="search dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/search-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-245a67137d94eb6a00919636d3e58a9d><img alt="search dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/search-dashboard.png></a></li><li>Click on your dashboard name to highlight it <strong>(2)</strong> and click <span class="btn cstyle button blue noicon"><span><span class=title>OK</span></span></span> <strong>(3)</strong>.</li><li>This will return you to the create chart dialog.</li><li>Ensure <strong>Log View</strong> is selected as the <strong>Chart Type</strong>.
<a href=#R-image-7826bbe4094cbda0e380eec688e46409 class=lightbox-link><img alt="log view" class="lazy left lightbox figure-image" loading=lazy src="../images/log-view.png?classes=left&width=30vw" style=height:auto;width:30vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7826bbe4094cbda0e380eec688e46409><img alt="log view" class="lazy left lightbox lightbox-image" loading=lazy src="../images/log-view.png?classes=left&width=30vw"></a></li><li>To see your dashboard click <span class="btn cstyle button blue noicon"><span><span class=title>Save and go to dashboard</span></span></span>.</li><li>The result should be similar to the dashboard below:
<a href=#R-image-2216da8d4360af99cf1d865cf5abeaec class=lightbox-link><img alt="Custom Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-custom-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2216da8d4360af99cf1d865cf5abeaec><img alt="Custom Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-custom-dashboard.png></a></li><li>As the last step in this exercise, let us add your dashboard to your workshop team page, this will make it easy to find later in the workshop.</li><li>At the top of the page, click on the <em><strong>&mldr;</strong></em> to the left of your dashboard name.
<a href=#R-image-d224a5299dec55b88c27f5a4a9740838 class=lightbox-link><img alt=linking class="lazy lightbox figure-image" loading=lazy src=../images/linking.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d224a5299dec55b88c27f5a4a9740838><img alt=linking class="lazy lightbox lightbox-image" loading=lazy src=../images/linking.png></a></li><li>Select <strong>Link to teams</strong> from the drop-down.</li><li>In the following <strong>Link to teams</strong> dialog box, find the Workshop team that your instructor will have provided for you and click <span class="btn cstyle button blue noicon"><span><span class=title>Done</span></span></span>.</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=custom-service-health-dashboard->Custom Service Health Dashboard üè•</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-user"></i>
Persona</summary><div class=box-content><p>As the <strong>SRE</strong> hat suits you let&rsquo;s keep it on as you have been asked to build a custom Service Health Dashboard for the <strong>wire-transfer-service</strong>. The requirement is to display RED metrics, logs and Synthetic test duration results.</p></div></details><p>It is common for development and SRE teams to require a summary of the health of their applications and/or services. More often or not these are displayed on wall-mounted TVs. Splunk Observability Cloud has the perfect solution for this by creating custom dashboards.</p><p>In this section we are going to build a <strong>Service Health Dashboard</strong> we can use to display on teams&rsquo; monitors or TVs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Service Health Dashboard</h1><article class=default><header class=headline></header><h1 id=enhancing-the-dashboard>Enhancing the Dashboard</h1><p>As we already saved some useful log charts in a dashboard in the Log Observer exercise, we are going to extend that dashboard.</p><p><a href=#R-image-c9362569aa6a7b115ca8ae28c111ca79 class=lightbox-link><img alt="Wall mounted" class="lazy lightbox figure-image" loading=lazy src=../images/wall-mount.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c9362569aa6a7b115ca8ae28c111ca79><img alt="Wall mounted" class="lazy lightbox lightbox-image" loading=lazy src=../images/wall-mount.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>To get back to your dashboard with the two log charts, click on <strong>Dashboards</strong> from the main menu and you will be taken to your Team Dashboard view. Under <strong>Dashboards</strong> click in <strong>Search dashboards</strong> to search for your Service Health Dashboard group.</li><li>Click on the name and this will bring up your previously saved dashboard.
<a href=#R-image-44daac3c7cbf49c30eb0c5cee5080be0 class=lightbox-link><img alt="log list" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer-custom-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44daac3c7cbf49c30eb0c5cee5080be0><img alt="log list" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer-custom-dashboard.png></a></li><li>Even if the log information is useful, it will need more information to have it make sense for our team so let&rsquo;s add a bit more information</li><li>The first step is adding a description chart to the dashboard. Click on the <span class="btn cstyle button grey noicon"><span><span class=title>New text note</span></span></span> and replace the text in the note with the following text and then click the <span class="btn cstyle button blue noicon"><span><span class=title>Save and close</span></span></span> button and name the chart <strong>Instructions</strong></li></ul><details open class="box cstyle notices grey"><summary class=box-label tabindex=-1>Information to use with text note</summary><div class=box-content><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>This is a Custom Health Dashboard for the **wire-transfer-service**,  
</span></span><span class=line><span class=cl>Please pay attention to any errors in the logs.
</span></span><span class=line><span class=cl>For more detail visit [link](https://https://www.splunk.com/en_us/products/observability.html)</span></span></code></pre></div></div></details><ul><li>The charts are not in a nice order, let&rsquo;s correct that and rearrange the charts so that they are useful.</li><li>Move your mouse over the top edge of the <strong>Instructions</strong> chart, your mouse pointer will change to a <strong>‚ò©</strong>. This will allow you to drag the chart in the dashboard. Drag the <strong>Instructions</strong> chart to the top left location and resize it to a 1/3rd of the page by dragging the right-hand edge.</li><li>Drag and add the <strong>Log Timeline view</strong> chart next to the <strong>Instruction</strong> chart, resize it so it fills the other 2/3rd of the page to be the error rate chart next to the two the chart and resize it so it fills the page</li><li>Next, resize the <strong>Log lines</strong> chart to be the width of the page and resize it the make it at least twice as long.</li><li>You should have something similar to the dashboard below:
<a href=#R-image-d9a1416ad1ace64662e883a02a9ffa8f class=lightbox-link><img alt="Initial Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/initial-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9a1416ad1ace64662e883a02a9ffa8f><img alt="Initial Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/initial-dashboard.png></a></li></ul></div></details><p>This looks great, let&rsquo;s continue and add more meaningful charts.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-a-custom-chart>Adding a Custom Chart</h1><p>In this part of the workshop we are going to create a chart that we will add to our dashboard, we will also link it to the detector we previously built. This will allow us to see the behavior of our test and get alerted if one or more of our test runs breach its SLA.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li>At the top of the dashboard click on the <strong>+</strong> and select <strong>Chart</strong>.
<a href=#R-image-86b52fda3e2c9f81cb8726b44b179cfd class=lightbox-link><img alt="new chart screen" class="lazy lightbox figure-image" loading=lazy src=../images/new-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-86b52fda3e2c9f81cb8726b44b179cfd><img alt="new chart screen" class="lazy lightbox lightbox-image" loading=lazy src=../images/new-chart.png></a></li><li>First, use the <span class="btn cstyle button grey noicon"><span><span class=title>Untitled chart</span></span></span> input field and name the chart <strong>Requests by version & error</strong>.</li><li>For this exercise we want a bar or column chart, so click on the 3rd icon <i class="fa-fw fas fa-chart-bar"></i> in the chart option box.</li><li>In the <strong>Plot editor</strong> enter <code>spans.count</code> (this is runtime in duration for our test) in the <strong>Signal</strong> box and hit enter.</li><li>Click <span class="btn cstyle button blue noicon"><span><span class=title>Add filter</span></span></span> and choose <code>sf_service:wire-transfer-service</code></li><li>Right now we see different colored bars, a different color for each region the test runs from. As this is not needed we can change that behavior by adding some analytics.</li><li>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Add analytics</span></span></span> button.</li><li>From the drop-down choose the <strong>Sum</strong> option, then pick <code>sum:aggregation</code> and click <code>version</code> and then click <code>sf_error</code> to group by both of these dimensions. Notice how the chart changes as the metrics are now aggregated.
<a href=#R-image-5e32a85b670814c09ab2f9c01b318227 class=lightbox-link><img alt="new chart screen" class="lazy lightbox figure-image" loading=lazy src=../images/spans-sum-version-error.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5e32a85b670814c09ab2f9c01b318227><img alt="new chart screen" class="lazy lightbox lightbox-image" loading=lazy src=../images/spans-sum-version-error.png></a></li><li>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Save and close</span></span></span> button.</li><li>In the dashboard, move the charts so they look like the screenshot below:
<a href=#R-image-d8537bb0e5815163ea0baa46c21afd2a class=lightbox-link><img alt="Service Health Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/service-health-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d8537bb0e5815163ea0baa46c21afd2a><img alt="Service Health Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/service-health-dashboard.png></a></li><li>For the final task, click three dots <strong>&mldr;</strong> at the top of the page (next to <strong>Event Overlay</strong>) and click on <strong>View fullscreen</strong>. This will be the view you would use on the TV monitor on the wall (press Esc to go back).</li></ul></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>In your spare time have a try at adding another custom chart to the dashboard using APM or Infrastructure metrics. You could copy a chart from the out-of-the-box <strong>Kubernetes</strong> dashboard group. Or you could use the APM metric <code>traces.count</code> to create a chart that shows the number of errors on a specific endpoint.</p></div></details><p>Finally, we will run through a workshop wrap-up.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=workshop-wrap-up->Workshop Wrap-up üéÅ</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Congratulations, you have completed the <strong>Splunk4Rookies - Observability Cloud Workshop</strong>. Today, you have become familiar with how to use Splunk Observability Cloud to monitor your applications and infrastructure.</p><p>Celebrate your achievement by adding this certificate to your <span class="badge cstyle blue badge-with-title"><span class=badge-title><i class="fab fa-fw fa-linkedin-in"></i></span><span class=badge-content><a href='https://www.linkedin.com/profile/add?startTask=CERTIFICATION_NAME&name=Splunk4Rookies%20-%20Observability%20Cloud&organizationId=20226&issueYear
=2026&issueMonth=2&certUrl=https%3A%2F%2Fsplunk.github.io%2Fobservability-workshop%2Fsplunk4rookies%2Fobservability-cloud%2Fimages%2Fcertificate.png' style=color:#fff target=_blank>LinkedIn</a>
</span></span>profile.</p><p>Let&rsquo;s recap what we have learned and what you can do next.</p><p><a href=#R-image-1af7cb244d87f2ab27d6c181182e85e5 class=lightbox-link><img alt=Champagne class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/7-wrap-up/images/champagne.png?width=45vw" style=height:auto;width:45vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1af7cb244d87f2ab27d6c181182e85e5><img alt=Champagne class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/splunk4rookies/financial-services-observability-cloud/7-wrap-up/images/champagne.png?width=45vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 7. Workshop Wrap-up</h1><article class=default><header class=headline></header><h1 id=key-takeaways>Key Takeaways</h1><p>During the workshop, we have seen how the Splunk Observability Cloud in combination with the OpenTelemetry signals (<strong>metrics</strong>, <strong>traces</strong> and <strong>logs</strong>) can help you to reduce mean time to detect (<strong>MTTD</strong>) and also reduce mean time to resolution (<strong>MTTR</strong>).</p><ul><li>We have a better understanding of the Main User interface and its components, the <em>Landing, Infrastructure, APM, Log Observer, Dashboard</em> pages, and a quick peek at the <em>Settings</em> page.</li><li>Depending on time, we did an <em>Infrastructure</em> exercise and looked at <em>Metrics</em> used in the Kubernetes Navigators and saw related services found on our Kubernetes cluster:</li></ul><p><a href=#R-image-2067dbb51b74978cfcec033e803c3075 class=lightbox-link><img alt=Kubernetes class="lazy lightbox figure-image" loading=lazy src=../images/infra-k8s.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2067dbb51b74978cfcec033e803c3075><img alt=Kubernetes class="lazy lightbox lightbox-image" loading=lazy src=../images/infra-k8s.png></a></p><ul><li>Understood what users were experiencing and used APM to Troubleshoot a particularly long load time and error, by following its trace across the front and back end and right to the log entries.
We used tools like the APM <em>Dependency map</em> with Breakdown to discover what is causing our issue:</li></ul><p><a href=#R-image-158603aa94f51ff6fea5eadb974c6518 class=lightbox-link><img alt=apm class="lazy lightbox figure-image" loading=lazy src=../images/apm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-158603aa94f51ff6fea5eadb974c6518><img alt=apm class="lazy lightbox lightbox-image" loading=lazy src=../images/apm.png></a></p><ul><li>Used <em>Tag Spotlight</em>, in APM, to understand blast radius, detect trends and context for our performance issues and errors. We drilled down in <em>Span&rsquo;s</em> in the APM <em>Trace waterfall</em> to see how services interacted and find errors:</li></ul><p><a href=#R-image-40c662c2d1753d8e26b7db6d422723c5 class=lightbox-link><img alt="tag and waterfall" class="lazy lightbox figure-image" loading=lazy src=../images/tag-spotlight-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-40c662c2d1753d8e26b7db6d422723c5><img alt="tag and waterfall" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag-spotlight-waterfall.png></a></p><ul><li>We used the <em>Related content</em> feature to follow the link between our <em>Trace</em> directly to the <em>Logs</em> related to our <em>Trace</em> and used filters to drill down to the exact cause of our issue.</li></ul><p><a href=#R-image-cd4b82f963ab329fecfffe33354be696 class=lightbox-link><img alt=logs class="lazy lightbox figure-image" loading=lazy src=../images/log.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd4b82f963ab329fecfffe33354be696><img alt=logs class="lazy lightbox lightbox-image" loading=lazy src=../images/log.png></a></p><ul><li>In the final exercise, we created a health dashboard to keep that running for our Developers and SREs on a TV screen:</li></ul><p><a href=#R-image-64ee324ac43c7da579a6bf58737359fb class=lightbox-link><img alt="synth and TV" class="lazy lightbox figure-image" loading=lazy src=../images/synth-tv.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64ee324ac43c7da579a6bf58737359fb><img alt="synth and TV" class="lazy lightbox lightbox-image" loading=lazy src=../images/synth-tv.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 20, 2025</span></span></footer></article></section></section></section><article class=default><header class=headline></header><h1 id=splunk4ninjas-workshops>Splunk4Ninjas Workshops</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-95314e4a2f2768a2f7c93765ac64f9a9><div class=card-content><div class=card-title id=R-card-95314e4a2f2768a2f7c93765ac64f9a9><a href=/observability-workshop/en/ninja-workshops/1-automatic-discovery/index.html>Automatic Discovery Workshops</a></div><div class=card-content-text>Learn how to leverage Splunk&rsquo;s automatic discovery and configuration capabilities for Java applications. These workshops demonstrate zero-code instrumentation to instantly generate metrics, traces, and logs for comprehensive observability across monolith and Kubernetes deployments.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-47e3ed70e4fba51b69fa17244fefde04><div class=card-content><div class=card-title id=R-card-47e3ed70e4fba51b69fa17244fefde04><a href=/observability-workshop/en/ninja-workshops/2-hpa/index.html>Horizontal Pod Autoscaling</a></div><div class=card-content-text>Learn to monitor Kubernetes Horizontal Pod Autoscaling (HPA) with the Splunk OpenTelemetry Collector, exploring metrics, events, and auto-scaling behavior in real-time</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-13fad3e7c575dee356459d3e4b5a03b7><div class=card-content><div class=card-title id=R-card-13fad3e7c575dee356459d3e4b5a03b7><a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/index.html>OpenTelemetry Collector Workshops</a></div><div class=card-content-text>OpenTelemetry Collector Concepts
Learn the concepts of the OpenTelemetry Collector and how to use it to send data to Splunk Observability Cloud.
Advanced OpenTelemetry Collector
Practice setting up the OpenTelemetry Collector configuration from scratch and go though several advanced configuration scenarios‚Äôs.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-d72ad146045c0c52c915c6dd4a7cc145><div class=card-content><div class=card-title id=R-card-d72ad146045c0c52c915c6dd4a7cc145><a href=/observability-workshop/en/ninja-workshops/4-synthetics-scripting/index.html>Splunk Synthetic Scripting</a></div><div class=card-content-text>Proactively find and fix performance issues across user flows, business transactions and APIs to deliver better digital experiences.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-877caa2447564e49c5301c37c602ac2b><div class=card-content><div class=card-title id=R-card-877caa2447564e49c5301c37c602ac2b><a href=/observability-workshop/en/ninja-workshops/6-lambda-kinesis/index.html>Lambda Tracing</a></div><div class=card-content-text>This workshop will enable you to build a distributed trace for a small serverless application that runs on AWS Lambda, producing and consuming a message via AWS Kinesis</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-d6e22c76e1b7b87c9863cc732e126789><div class=card-content><div class=card-title id=R-card-d6e22c76e1b7b87c9863cc732e126789><a href=/observability-workshop/en/ninja-workshops/7-dashboards-detectors/index.html>Dashboard Workshop</a></div><div class=card-content-text>Learn to build insightful visualizations and custom dashboards using Splunk Observability Cloud&rsquo;s charting capabilities, filters, analytical functions, and SignalFlow</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-55ce1f4d1e73fb8bce84c32244b9732f><div class=card-content><div class=card-title id=R-card-55ce1f4d1e73fb8bce84c32244b9732f><a href=/observability-workshop/en/ninja-workshops/8-docker-k8s-otel/index.html>Hands-On OpenTelemetry, Docker, and K8s</a></div><div class=card-content-text>This hands-on workshop guides you through instrumenting a .NET application with OpenTelemetry, containerizing it with Docker, and deploying it to Kubernetes. You&rsquo;ll learn to deploy and configure the OpenTelemetry collector using Helm and troubleshoot common configuration issues.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-4530a0096edfb48a6bb7801e231ced20><div class=card-content><div class=card-title id=R-card-4530a0096edfb48a6bb7801e231ced20><a href=/observability-workshop/en/ninja-workshops/9-solving-problems-with-o11y-cloud/index.html>Solving Problems with O11y Cloud</a></div><div class=card-content-text>Learn how to deploy and configure the OpenTelemetry Collector, instrument applications with OpenTelemetry, and leverage Troubleshooting MetricSets and Tag Spotlight to identify and resolve performance issues in Splunk Observability Cloud.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-79fe4bed8ccaf0b7aa3f28e49d88c5c9><div class=card-content><div class=card-title id=R-card-79fe4bed8ccaf0b7aa3f28e49d88c5c9><a href=/observability-workshop/en/ninja-workshops/11-ingest-processor-for-observability-cloud/index.html>Ingest Processor for Observability Cloud</a></div><div class=card-content-text>Learn how to optimize observability costs and improve MTTD by transforming logs into metrics using Splunk Ingest Processor with hands-on exercises in Splunk Observability Cloud.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-d923b8da432db942f617f3a43b93f7b8><div class=card-content><div class=card-title id=R-card-d923b8da432db942f617f3a43b93f7b8><a href=/observability-workshop/en/ninja-workshops/12-alerting-monitoring-with-itsi/index.html>Alerting and Monitoring with Splunk IT Service Intelligence</a></div><div class=card-content-text>Scenario Description</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-f71bb9c0e876de75c05097d5d842cd7e><div class=card-content><div class=card-title id=R-card-f71bb9c0e876de75c05097d5d842cd7e><a href=/observability-workshop/en/ninja-workshops/14-cisco-ai-pods/index.html>Monitoring Cisco AI Pods with Splunk Observability Cloud</a></div><div class=card-content-text>This hands-on workshop demonstrates how to monitor Cisco AI Pods with Splunk Observability Cloud. Learn to deploy the OpenTelemetry Collector in Red Hat OpenShift, ingest infrastructure metrics using Prometheus receivers, and configure APM to monitor Python services that interact with Large Language Models (LLMs).</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-cc7950bf5aace135e117f2592c842964><div class=card-content><div class=card-title id=R-card-cc7950bf5aace135e117f2592c842964><a href=/observability-workshop/en/ninja-workshops/15-appd-workshop/index.html>Splunk4Ninjas AppDynamics</a></div><div class=card-content-text>Learn how to use Splunk AppDynamics for full-stack application performance monitoring, from installing Java APM agents and monitoring application health to troubleshooting performance issues, tracking browser metrics with BRUM, analyzing database performance, and gaining business insights with Business IQ.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk4Ninjas Workshops</h1><article class=default><header class=headline></header><h1 id=automatic-discovery-workshops>Automatic Discovery Workshops</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-eefd0c02fb54f465fcddd7c5a1eb775f><div class=card-content><div class=card-title id=R-card-eefd0c02fb54f465fcddd7c5a1eb775f><a href=/observability-workshop/en/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html>PetClinic Monolith Workshop</a></div><div class=card-content-text>Hands-on workshop demonstrating Splunk Observability Cloud&rsquo;s automatic discovery and configuration capabilities for Java applications using the Spring PetClinic sample application.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-2c7f001ff2cea28b2bdf668b5a549c97><div class=card-content><div class=card-title id=R-card-2c7f001ff2cea28b2bdf668b5a549c97><a href=/observability-workshop/en/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/index.html>PetClinic Kubernetes Workshop</a></div><div class=card-content-text>Learn how to enable automatic discovery and configuration for your Java-based application running in Kubernetes. Experience real-time monitoring to help you maximize application behavior with end-to-end visibility.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Automatic Discovery Workshops</h1><article class=default><header class=headline></header><h1 id=petclinic-monolith-workshop>PetClinic Monolith Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>The goal is to walk through the basic steps to configure the following components of the <strong>Splunk Observability Cloud</strong> platform:</p><ul><li>Splunk Infrastructure Monitoring (IM)</li><li>Splunk Automatic Discovery for Java (APM)<ul><li>Database Query Performance</li><li>AlwaysOn Profiling</li></ul></li><li>Splunk Real User Monitoring (RUM)</li><li>RUM to APM Correlation</li><li>Splunk Log Observer (LO)</li></ul><p>We will also show the steps about how to clone (download) a sample Java application (Spring PetClinic), as well as how to compile, package and run the application.</p><p>Once the application is up and running, we will instantly start seeing metrics, traces and logs via the <strong>automatic discovery and configuration</strong> for Java 2.x that will be used by the <strong>Splunk APM</strong> product.</p><p>After that, we will instrument PetClinic&rsquo;s end user interface (HTML pages rendered by the application) with the <strong>Splunk OpenTelemetry Javascript Libraries (RUM)</strong> that will generate RUM traces around all the individual clicks and page loads executed by an end user.</p><p>Lastly, we will view the logs generated by the automatic injection of trace metadata into the PetClinic application logs.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info"></i>
Prerequisites</summary><div class=box-content><ul><li>Outbound SSH access to port <code>2222</code>.</li><li>Outbound HTTP access to port <code>8083</code>.</li><li>Familiarity with the <code>bash</code> shell and <code>vi/vim</code> editor.</li></ul></div></details><p><a href=#R-image-9a3976b11ae94fa4a3ed75faa7a9006a class=lightbox-link><img alt="PetClinic Exercise" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/images/petclinic-exercise.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9a3976b11ae94fa4a3ed75faa7a9006a><img alt="PetClinic Exercise" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/images/petclinic-exercise.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of PetClinic Monolith Workshop</h1><article class=default><header class=headline></header><h1 id=installing-the-opentelemetry-collector>Installing the OpenTelemetry Collector</h1><p>The Splunk OpenTelemetry Collector is the core component of instrumenting infrastructure and applications. Its role is to collect and send:</p><ul><li>Infrastructure metrics (disk, CPU, memory, etc.)</li><li>Application Performance Monitoring (APM) traces</li><li>Profiling data</li><li>Host and application logs</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Remove any existing OpenTelemetry Collectors</summary><div class=box-content><p>If you have completed the Splunk IM workshop, please ensure you have deleted the collector running in Kubernetes before continuing. This can be done by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div><p>The EC2 instance may already have an older version of the collector already installed. To uninstall the collector, run the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh
</span></span><span class=line><span class=cl>sudo sh /tmp/splunk-otel-collector.sh --uninstall</span></span></code></pre></div></div></details><p>To ensure your instance is configured correctly, we need to confirm that the required environment variables for this workshop are set correctly. In your terminal run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. ~/workshop/petclinic/scripts/check_env.sh</span></span></code></pre></div><p>In the output check that all the following environment variables are present and have values set. If any are missing, please contact your instructor:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ACCESS_TOKEN
</span></span><span class=line><span class=cl>REALM
</span></span><span class=line><span class=cl>RUM_TOKEN
</span></span><span class=line><span class=cl>HEC_TOKEN
</span></span><span class=line><span class=cl>HEC_URL
</span></span><span class=line><span class=cl>INSTANCE</span></span></code></pre></div><p>We can then go ahead and install the Collector. Some additional parameters are passed to the installation script, they are:</p><ul><li><code>--with-instrumentation</code> - This will install the agent from the Splunk distribution of OpenTelemetry Java, which is then loaded automatically when the PetClinic Java application starts up. No configuration is required!</li><li><code>--deployment-environment</code> - Sets the resource attribute <code>deployment.environment</code> to the value passed. This is used to filter views in the UI.</li><li><code>--enable-profiler</code> - Enables the profiler for the Java application. This will generate CPU profiles for the application.</li><li><code>--enable-profiler-memory</code> - Enables the profiler for the Java application. This will generate memory profiles for the application.</li><li><code>--enable-metrics</code> - Enables the exporting of Micrometer metrics</li><li><code>--hec-token</code> - Sets the HEC token for the collector to use</li><li><code>--hec-url</code> - Sets the HEC URL for the collector to use</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>sudo sh /tmp/splunk-otel-collector.sh --realm <span class=nv>$REALM</span> -- <span class=nv>$ACCESS_TOKEN</span> --mode agent --without-fluentd --with-instrumentation --deployment-environment <span class=nv>$INSTANCE</span>-petclinic --enable-profiler --enable-profiler-memory --enable-metrics --hec-token <span class=nv>$HEC_TOKEN</span> --hec-url <span class=nv>$HEC_URL</span></span></span></code></pre></div><p>Next, we will patch the collector to expose the hostname of the instance and not the AWS instance ID. This will make it easier to filter data in the UI:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo sed -i <span class=s1>&#39;s/gcp, ecs, ec2, azure, system/system, gcp, ecs, ec2, azure/g&#39;</span> /etc/otel/collector/agent_config.yaml</span></span></code></pre></div><p>Once the <code>agent_config.yaml</code> has been patched, you will need to restart the collector:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart splunk-otel-collector</span></span></code></pre></div><p>Once the installation is completed, you can navigate to the <strong>Hosts with agent installed</strong> dashboard to see the data from your host, <strong>Dashboards ‚Üí Hosts with agent installed</strong>.</p><p>Use the dashboard filter and select <code>host.name</code> and type or select the hostname of your workshop instance (you can get this from the command prompt in your terminal session). Once you see data flowing for your host, we are then ready to get started with the APM component.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=building-the-spring-petclinic-application>Building the Spring PetClinic Application</h1><p>The first thing we need to set up APM is&mldr; well, an application. For this exercise, we will use the Spring PetClinic application. This is a very popular sample Java application built with the Spring framework (Springboot).</p><p>First, clone the PetClinic GitHub repository, and then we will compile, build, package and test the application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/spring-projects/spring-petclinic</span></span></code></pre></div><p>Change into the <code>spring-petclinic</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> spring-petclinic
</span></span><span class=line><span class=cl>git checkout b26f235250627a235a2974a22f2317dbef27338d</span></span></code></pre></div><p>Using Docker, start a MySQL database for PetClinic to use:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -d -e <span class=nv>MYSQL_USER</span><span class=o>=</span>petclinic -e <span class=nv>MYSQL_PASSWORD</span><span class=o>=</span>petclinic -e <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span>root -e <span class=nv>MYSQL_DATABASE</span><span class=o>=</span>petclinic -p 3306:3306 docker.io/biarms/mysql:5.7</span></span></code></pre></div><p>Next, we will start another container running Locust that will generate some simple traffic to the PetClinic application. Locust is a simple load-testing tool that can be used to generate traffic to a web application.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run --network<span class=o>=</span><span class=s2>&#34;host&#34;</span> -d -p 8090:8090 -v ~/workshop/petclinic:/mnt/locust docker.io/locustio/locust -f /mnt/locust/locustfile.py --headless -u <span class=m>1</span> -r <span class=m>1</span> -H http://127.0.0.1:8083</span></span></code></pre></div><p>Next, compile, build and package PetClinic using <code>maven</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./mvnw package -Dmaven.test.skip<span class=o>=</span>true</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>This will take a few minutes the first time you run and will download a lot of dependencies before it compiles the application. Future builds will be a lot quicker.</p></div></details><p>Once the build completes, you need to obtain the public IP address of the instance you are running on. You can do this by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://ifconfig.me</span></span></code></pre></div><p>You will see an IP address returned, make a note of this as we will need it to validate that the application is running.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 7, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=automatic-discovery-and-configuration-for-java>Automatic discovery and configuration for Java</h1><p>You can now start the application with the following command. Notice that we are passing the <code>mysql</code> profile to the application, this will tell the application to use the MySQL database we started earlier. We are also setting the <code>otel.service.name</code> and <code>otel.resource.attributes</code> to a logical names using the instance name. These will also be used in the UI for filtering:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p>You can validate the application is running by visiting <code>http://&lt;IP_ADDRESS>:8083</code> (replace <code>&lt;IP_ADDRESS></code> with the IP address you obtained earlier).</p><p>When we installed the collector we configured it to enable <strong>AlwaysOn Profiling</strong> and <strong>Metrics</strong>. This means that the collector will automatically generate CPU and Memory profiles for the application and send them to Splunk Observability Cloud.</p><p>When you start the PetClinic application you will see the collector automatically detect the application and instrument it for traces and profiling.</p><div class=tab-panel data-tab-group=R-tabs-e6941f8288aeda5307f3b4947fbd9745><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ab81710afee733ec24327128b06534ba aria-expanded=true data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e6941f8288aeda5307f3b4947fbd9745","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-ab81710afee733ec24327128b06534ba data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/lib/splunk-instrumentation/splunk-otel-javaagent.jar
</span></span><span class=line><span class=cl>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:58:970 +0000] [main] INFO io.opentelemetry.javaagent.tooling.VersionLogger - opentelemetry-javaagent - version: splunk-2.6.0-otel-2.6.0
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - Profiler configuration:
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                  splunk.profiler.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                splunk.profiler.directory : /tmp
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -       splunk.profiler.recording.duration : 20s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -               splunk.profiler.keep-files : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -            splunk.profiler.logs-endpoint : null
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -              otel.exporter.otlp.endpoint : null
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -           splunk.profiler.memory.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -        splunk.profiler.memory.event.rate : 150/s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.call.stack.interval : PT10S
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -  splunk.profiler.include.internal.stacks : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.tracing.stacks.only : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.JfrActivator - Profiler is active.</span></span></code></pre></div></div></div></div></div><p>You can now visit the Splunk APM UI and examine the application components, traces, profiling, DB Query performance and metrics. From the left-hand menu click <strong>APM</strong> and then click the <strong>Environment</strong> dropdown and select your environment e.g. <code>&lt;INSTANCE>-petclinic</code> (where<code>&lt;INSTANCE></code> is replaced with the value you noted down earlier).</p><p>Once your validation is complete you can stop the application by pressing <code>Ctrl-c</code>.</p><p>Resource attributes can be added to every reported span. For example <code>version=0.314</code>. A comma-separated list of resource attributes can also be defined e.g. <code>key1=val1,key2=val2</code>.</p><p>Let&rsquo;s launch the PetClinic again using new resource attributes. Note, that adding resource attributes to the run command will override what was defined when we installed the collector. Let&rsquo;s add a new resource attribute <code>version=0.314</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env,version<span class=o>=</span>0.314 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p>Back in the Splunk APM UI we can drill down on a recent trace and see the new <code>version</code> attribute in a span.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 4, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-real-user-monitoring>3. Real User Monitoring</h1><p>For the Real User Monitoring (RUM) instrumentation, we will add the Open Telemetry Javascript <a href=https://github.com/signalfx/splunk-otel-js-web rel=external><strong>https://github.com/signalfx/splunk-otel-js-web</strong></a> snippet in the pages, we will use the wizard again <strong>Data Management ‚Üí Add Integration ‚Üí RUM Instrumentation ‚Üí Browser Instrumentation</strong>.</p><p>Your instructor will inform you which token to use from the dropdown, click <strong>Next</strong>. Enter <strong>App name</strong> and <strong>Environment</strong> using the following syntax:</p><ul><li><code>&lt;INSTANCE>-petclinic-service</code> - replacing <code>&lt;INSTANCE></code> with the value you noted down earlier.</li><li><code>&lt;INSTANCE>-petclinic-env</code> - replacing <code>&lt;INSTANCE></code> with the value you noted down earlier.</li></ul><p>The wizard will then show a snippet of HTML code that needs to be placed at the top of the pages in the <code>&lt;head></code> section. The following is an example of the (do not use this snippet, use the one generated by the wizard):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>IMPORTANT: Replace the <span class=p>&lt;</span><span class=nt>version</span><span class=p>&gt;</span> placeholder in the src URL with a
</span></span><span class=line><span class=cl>version from https://github.com/signalfx/splunk-otel-js-web/releases
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>*/
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>realm</span><span class=o>:</span> <span class=s2>&#34;eu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=s2>&#34;&lt;redacted&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>applicationName</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deploymentEnvironment</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-env&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>The Spring PetClinic application uses a single HTML page as the &ldquo;layout&rdquo; page, that is reused across all pages of the application. This is the perfect location to insert the Splunk RUM Instrumentation Library as it will be loaded in all pages automatically.</p><p>Let&rsquo;s then edit the layout page:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi src/main/resources/templates/fragments/layout.html</span></span></code></pre></div><p>Next, insert the snippet we generated above in the <code>&lt;head></code> section of the page. Make sure you don&rsquo;t include the comment and replace <code>&lt;version></code> in the source URL to <code>latest</code> e.g.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!doctype html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>th:fragment</span><span class=o>=</span><span class=s>&#34;layout (template, menu)&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>realm</span><span class=o>:</span> <span class=s2>&#34;eu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=s2>&#34;&lt;redacted&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>applicationName</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deploymentEnvironment</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-env&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>...</span></span></code></pre></div><p>With the code changes complete, we need to rebuild the application and run it again. Run the <code>maven</code> command to compile/build/package PetClinic:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./mvnw package -Dmaven.test.skip<span class=o>=</span>true</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env,version<span class=o>=</span>0.314 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p>Then let&rsquo;s visit the application using a browser to generate real-user traffic <code>http://&lt;IP_ADDRESS>:8083</code>.</p><p>In RUM, filter down into the environment as defined in the RUM snippet above and click through to the dashboard.</p><p>When you drill down into a RUM trace you will see a link to APM in the spans. Clicking on the trace ID will take you to the corresponding APM trace for the current RUM trace.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-log-observer>4. Log Observer</h1><p>For the Splunk Log Observer component, the Splunk OpenTelemetry Collector automatically collects logs from the Spring PetClinic application and sends them to Splunk Observability Cloud using the OTLP exporter, anotating the log events with <code>trace_id</code>, <code>span_id</code> and trace flags.</p><p>Log Observer provides a real-time view of logs from your applications and infrastructure. It allows you to search, filter, and analyze logs to troubleshoot issues and monitor your environment.</p><p>Go back to the PetClinic web application and click on the <strong>Error</strong> link several times. This will generate some log messages in the PetClinic application logs.</p><p><a href=#R-image-f885f0bb8b3a3793a047ddc1d89137e1 class=lightbox-link><img alt="PetClinic Error" class="lazy lightbox figure-image" loading=lazy src=../images/petclinic-error.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f885f0bb8b3a3793a047ddc1d89137e1><img alt="PetClinic Error" class="lazy lightbox lightbox-image" loading=lazy src=../images/petclinic-error.png></a></p><p>From the left-hand menu click on <strong>Log Observer</strong> and ensure <strong>Index</strong> is set to <strong>splunk4rookies-workshop</strong>.</p><p>Next, click <strong>Add Filter</strong> search for the field <code>service.name</code> select the value <code>&lt;INSTANCE>-petclinic-service</code> and click <code>=</code> (include). You should now see only the log messages from your PetClinic application.</p><p>Select one of the log entries that were generated by clicking on the <strong>Error</strong> link in the PetClinic application. You will see the log message and the trace metadata that was automatically injected into the log message. Also, you will notice that Related Content is available for APM and Infrastructure.</p><p><a href=#R-image-0d9207b4d3910290f92968a9df4f6559 class=lightbox-link><img alt="Log Observer" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0d9207b4d3910290f92968a9df4f6559><img alt="Log Observer" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer.png></a></p><p>This is the end of the workshop and we have certainly covered a lot of ground. At this point, you should have metrics, traces (APM & RUM), logs, database query performance and code profiling being reported into Splunk Observability Cloud and all without having to modify the PetClinic application code (well except for RUM).</p><p><strong>Congratulations!</strong></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=spring-petclinic-springboot-based-microservices-on-kubernetes>Spring PetClinic SpringBoot Based Microservices On Kubernetes</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>90 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Pieter Hagen</span></span><p>The goal of this workshop is to introduce the features of Splunk&rsquo;s <strong>automatic discovery and configuration</strong> for Java.</p><p>The workshop scenario will be created by installing a simple (<strong>un-instrumented</strong>) Java microservices application in Kubernetes.</p><p>Following simple steps to install the Splunk OpenTelemetry Collector with automatic discovery for existing Java based deployments, we will see how easy it is to send metrics, traces and logs to <strong>Splunk Observability Cloud</strong>.</p><details open class="box cstyle notices splunk"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-circle-info"></i>
Prerequisites</summary><div class=box-content><ul><li>Outbound SSH access to port <strong>2222</strong>.</li><li>Outbound HTTP access to port <strong>81</strong>.</li><li>Familiarity with the Linux command line.</li></ul></div></details><p>During this workshop we will cover the following components:</p><ul><li>Splunk Infrastructure Monitoring (<strong>IM</strong>)</li><li>Splunk automatic discovery and configuration for Java (<strong>APM</strong>)<ul><li>Database Query Performance</li><li>AlwaysOn Profiling</li></ul></li><li>Splunk Log Observer (<strong>LO</strong>)</li><li>Splunk Real User Monitoring (<strong>RUM</strong>)</li></ul><p><em>Splunk Synthetics is feeling a little left out here, but we cover that in other workshops</em> <i class="fa-fw fas fa-heart"></i></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of PetClinic Kubernetes Workshop</h1><article class=default><header class=headline></header><h1 id=architecture>Architecture</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>The Spring PetClinic Java application is a simple microservices application that consists of frontend and backend services. The frontend service is a Spring Boot application that serves a web interface to interact with backend services. The backend services are Spring Boot applications that serve RESTful API&rsquo;s to interact with a MySQL database.</p><p>By the end of this workshop, you will have a better understanding of how to enable <strong>automatic discovery and configuration</strong> for your Java-based applications running in Kubernetes.</p><p>The diagram below details the architecture of the Spring PetClinic Java application running in Kubernetes with the Splunk OpenTelemetry Operator and automatic discovery and configuration enabled.</p><p><a href=#R-image-5c25d98282b119f71c176dc65eb9eb67 class=lightbox-link><img alt="Splunk Otel Architecture" class="lazy lightbox figure-image" loading=lazy src=../images/auto-instrumentation-java-diagram.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c25d98282b119f71c176dc65eb9eb67><img alt="Splunk Otel Architecture" class="lazy lightbox lightbox-image" loading=lazy src=../images/auto-instrumentation-java-diagram.png></a></p><hr><p>Based on the <a href=https://github.com/signalfx/splunk-otel-collector-chart/blob/main/examples/enable-operator-and-auto-instrumentation/spring-petclinic-java.md rel=external><strong>example</strong></a> <strong>Josh Voravong</strong> created.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=preparation-of-the-workshop-instance>Preparation of the Workshop instance</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>The instructor will provide you with the login information for the instance that we will be using during the workshop.</p><p>When you first log into your instance, you will be greeted by the Splunk Logo as shown below. If you have any issues connecting to your workshop instance, please reach out to your Instructor.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ ssh -p 2222 splunk@&lt;IP-ADDRESS&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó  
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù    ‚ïö‚ñà‚ñà‚ïó 
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù      ‚ïö‚ñà‚ñà‚ïó
</span></span><span class=line><span class=cl>‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ïî‚ïù
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïî‚ïù 
</span></span><span class=line><span class=cl>‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïù  
</span></span><span class=line><span class=cl>Last login: Mon Feb  5 11:04:54 2024 from [Redacted]
</span></span><span class=line><span class=cl>splunk@show-no-config-i-0d1b29d967cb2e6ff ~ $</span></span></code></pre></div><p>To ensure your instance is configured correctly, we need to confirm that the required environment variables for this workshop are set correctly. In your terminal, run the following script and check that the environment variables are present and set with actual valid values:</p><div class=tab-panel data-tab-group=R-tabs-c9847f1f8057fd528ba65883e64d2dcd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8818150ddad557201ab920b3e31ca451 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c9847f1f8057fd528ba65883e64d2dcd","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-bce8f6db408c3bd82637667881eb3fb8 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c9847f1f8057fd528ba65883e64d2dcd","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8818150ddad557201ab920b3e31ca451 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. ~/workshop/petclinic/scripts/check_env.sh</span></span></code></pre></div></div></div><div id=R-tab-id-bce8f6db408c3bd82637667881eb3fb8 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>ACCESS_TOKEN</span> <span class=o>=</span> &lt;redacted&gt;
</span></span><span class=line><span class=cl><span class=nv>REALM</span> <span class=o>=</span> &lt;e.g. eu0, us1, us2, jp0, au0 etc.&gt;
</span></span><span class=line><span class=cl><span class=nv>RUM_TOKEN</span> <span class=o>=</span> &lt;redacted&gt;
</span></span><span class=line><span class=cl><span class=nv>HEC_TOKEN</span> <span class=o>=</span> &lt;redacted&gt;
</span></span><span class=line><span class=cl><span class=nv>HEC_URL</span> <span class=o>=</span> https://&lt;...&gt;/services/collector/event
</span></span><span class=line><span class=cl><span class=nv>INSTANCE</span> <span class=o>=</span> &lt;instance_name&gt;</span></span></code></pre></div></div></div></div></div><p>Please make a note of the <code>INSTANCE</code> environment variable value as this will be used later to filter data in <strong>Splunk Observability Cloud</strong>.</p><p>For this workshop, <strong>all</strong> the above environment variables are required. If any have values missing, please contact your Instructor.</p><details open class="box cstyle notices splunk"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-circle-info"></i>
Delete any existing OpenTelemetry Collectors</summary><div class=box-content><p>If you have previously completed a Splunk Observability workshop using this EC2 instance, you
need to ensure that any existing installation of the Splunk OpenTelemetry Collector is
deleted. This can be achieved by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Preparation</h1><article class=default><header class=headline></header><h1 id=deploy-the-splunk-opentelemetry-collector>Deploy the Splunk OpenTelemetry Collector</h1><p>To get Observability signals (<strong>metrics, traces</strong> and <strong>logs</strong>) into <strong>Splunk Observability Cloud</strong> we need to deploy the Splunk OpenTelemetry Collector into the Kubernetes cluster.</p><p>For this workshop, we will be using the Splunk OpenTelemetry Collector Helm Chart. First, we need to add the Helm chart repository to Helm and run <code>helm repo update</code> to ensure the latest version:</p><div class=tab-panel data-tab-group=R-tabs-7ba4a947fd486ffac2c8af55125cc3cf><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f67e853cd2234dccce1e973b1fa965d7 aria-expanded=true data-tab-item=R-tab-62904166d08e5d1c0cd759a707578288 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7ba4a947fd486ffac2c8af55125cc3cf","R-tab-62904166d08e5d1c0cd759a707578288")'>
<span class=tab-nav-text>Install Helm Chart</span>
</button>
<button aria-controls=R-tab-id-51c2595923edfdba7af2fa7455b1e9d6 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7ba4a947fd486ffac2c8af55125cc3cf","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f67e853cd2234dccce1e973b1fa965d7 data-tab-item=R-tab-62904166d08e5d1c0cd759a707578288 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div></div></div><div id=R-tab-id-51c2595923edfdba7af2fa7455b1e9d6 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Using ACCESS_TOKEN={REDACTED}
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>&#34;splunk-otel-collector-chart&#34; has been added to your repositories
</span></span><span class=line><span class=cl>Using ACCESS_TOKEN={REDACTED}
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>Hang tight while we grab the latest from your chart repositories...
</span></span><span class=line><span class=cl>...Successfully got an update from the &#34;splunk-otel-collector-chart&#34; chart repository
</span></span><span class=line><span class=cl>Update Complete. ‚éàHappy Helming!‚éà</span></span></code></pre></div></div></div></div></div><p><strong>Splunk Observability Cloud</strong> offers wizards in the UI to walk you through the setup of the OpenTelemetry Collector on Kubernetes, but in the interest of time, we will use the Helm install command below. Additional parameters are set to enable the operator for automatic discovery and configuration and code profiling.</p><ul><li><code>--set="operator.enabled=true"</code> - this will install the OpenTelemetry operator that will be used to handle automatic discovery and configuration.</li><li><code>--set="splunkObservability.profilingEnabled=true"</code> - this enables Code Profiling via the operator.</li></ul><p>To install the collector run the following command. Do <strong>NOT</strong> edit this:</p><div class=tab-panel data-tab-group=R-tabs-9bee0268d2b70dbf7f0f77659603d737><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c8c4ed6af6eea5a902ede516a764f8ef aria-expanded=true data-tab-item=R-tab-5ade205167430c5bf55768631515900b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9bee0268d2b70dbf7f0f77659603d737","R-tab-5ade205167430c5bf55768631515900b")'>
<span class=tab-nav-text>Helm Install</span>
</button>
<button aria-controls=R-tab-id-5c2cec9fbe13ff7ca12e7fababfaa5d5 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9bee0268d2b70dbf7f0f77659603d737","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-c8c4ed6af6eea5a902ede516a764f8ef data-tab-item=R-tab-5ade205167430c5bf55768631515900b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operatorcrds.install=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operator.enabled=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.profilingEnabled=true&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;agent.service.enabled=true&#34;</span>  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$INSTANCE</span><span class=s2>-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-5c2cec9fbe13ff7ca12e7fababfaa5d5 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>LAST DEPLOYED: Fri Apr 19 09:39:54 2024
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: 1
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Platform endpoint &#34;https://http-inputs-o11y-workshop-eu0.splunkcloud.com:443/services/collector/event&#34;.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm eu0.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[INFO] You&#39;ve enabled the operator&#39;s auto-instrumentation feature (operator.enabled=true)! The operator can automatically instrument Kubernetes hosted applications.
</span></span><span class=line><span class=cl>  - Status: Instrumentation language maturity varies. See `operator.instrumentation.spec` and documentation for utilized instrumentation details.
</span></span><span class=line><span class=cl>  - Splunk Support: We offer full support for Splunk distributions and best-effort support for native OpenTelemetry distributions of auto-instrumentation libraries.</span></span></code></pre></div></div></div></div></div><p>Ensure the Pods are reported as <strong>Running</strong> before continuing (this typically takes around 30 seconds).</p><div class=tab-panel data-tab-group=R-tabs-5e959e37328ef9f10d726b1ec292b080><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3587b2f73c3653898caaca01ddb5f97e aria-expanded=true data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5e959e37328ef9f10d726b1ec292b080","R-tab-380f56daf2c41382fed5e183e4f1fbe1")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button aria-controls=R-tab-id-4b9a41979995428f3e1ce197f26c511d aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5e959e37328ef9f10d726b1ec292b080","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-3587b2f73c3653898caaca01ddb5f97e data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods <span class=p>|</span> grep splunk-otel </span></span></code></pre></div></div></div><div id=R-tab-id-4b9a41979995428f3e1ce197f26c511d data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-6bd5567d95-5f8cj     1/1     Running   0          10m
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-tspd2                               1/1     Running   0          10m
</span></span><span class=line><span class=cl>splunk-otel-collector-operator-69d476cb7-j7zwd                  2/2     Running   0          10m</span></span></code></pre></div></div></div></div></div><p>Ensure there are no errors reported by the Splunk OpenTelemetry Collector (press <code>ctrl + c</code> to exit) or use the installed <strong>awesome</strong> <code>k9s</code> terminal UI for bonus points!</p><div class=tab-panel data-tab-group=R-tabs-6697324e759ce6541efcbcfa7e7ff700><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fff6fcd2637ab1cfb83d932e36849e88 aria-expanded=true data-tab-item=R-tab-66b92e950fb2f856e1fdec23c736e201 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6697324e759ce6541efcbcfa7e7ff700","R-tab-66b92e950fb2f856e1fdec23c736e201")'>
<span class=tab-nav-text>kubectl logs</span>
</button>
<button aria-controls=R-tab-id-c38f99e9857eba7e52aa609a5714cb76 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-6697324e759ce6541efcbcfa7e7ff700","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-fff6fcd2637ab1cfb83d932e36849e88 data-tab-item=R-tab-66b92e950fb2f856e1fdec23c736e201 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector -f --container otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-c38f99e9857eba7e52aa609a5714cb76 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2021-03-21T16:11:10.900Z        INFO    service/service.go:364  Starting receivers...
</span></span><span class=line><span class=cl>2021-03-21T16:11:10.900Z        INFO    builder/receivers_builder.go:70 Receiver is starting... {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;prometheus&#34;, &#34;component_name&#34;: &#34;prometheus&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    builder/receivers_builder.go:75 Receiver started.       {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;prometheus&#34;, &#34;component_name&#34;: &#34;prometheus&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    builder/receivers_builder.go:70 Receiver is starting... {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;k8s_cluster&#34;, &#34;component_name&#34;: &#34;k8s_cluster&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    k8sclusterreceiver@v0.21.0/watcher.go:195       Configured Kubernetes MetadataExporter  {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;k8s_cluster&#34;, &#34;component_name&#34;: &#34;k8s_cluster&#34;, &#34;exporter_name&#34;: &#34;signalfx&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    builder/receivers_builder.go:75 Receiver started.       {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;k8s_cluster&#34;, &#34;component_name&#34;: &#34;k8s_cluster&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    healthcheck/handler.go:128      Health Check state change       {&#34;component_kind&#34;: &#34;extension&#34;, &#34;component_type&#34;: &#34;health_check&#34;, &#34;component_name&#34;: &#34;health_check&#34;, &#34;status&#34;: &#34;ready&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    service/service.go:267  Everything is ready. Begin running and processing data.
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.009Z        INFO    k8sclusterreceiver@v0.21.0/receiver.go:59       Starting shared informers and wait for initial cache sync.      {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;k8s_cluster&#34;, &#34;component_name&#34;: &#34;k8s_cluster&#34;}
</span></span><span class=line><span class=cl>2021-03-21T16:11:11.281Z        INFO    k8sclusterreceiver@v0.21.0/receiver.go:75       Completed syncing shared informer caches.       {&#34;component_kind&#34;: &#34;receiver&#34;, &#34;component_type&#34;: &#34;k8s_cluster&#34;, &#34;component_name&#34;: &#34;k8s_cluster&#34;}</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Deleting a failed installation</summary><div class=box-content><p>If you make an error installing the OpenTelemetry Collector you can start over by deleting the
installation with the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-petclinic-application>Deploy the PetClinic Application</h1><p>The first deployment of our application will be using prebuilt containers to give this base scenario: a regular Java microservices-based application running in Kubernetes that we want to start observing. So let&rsquo;s deploy the application:</p><div class=tab-panel data-tab-group=R-tabs-0788a957396516277b6355ee0f9af0b4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-57e5eb525b67fd52aac89dcd4e58dfa3 aria-expanded=true data-tab-item=R-tab-8666ad26e93cd530823e6e5a5c706f5a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0788a957396516277b6355ee0f9af0b4","R-tab-8666ad26e93cd530823e6e5a5c706f5a")'>
<span class=tab-nav-text>kubectl apply</span>
</button>
<button aria-controls=R-tab-id-473beec315d2b0f805bbd3be42582392 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-0788a957396516277b6355ee0f9af0b4","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-57e5eb525b67fd52aac89dcd4e58dfa3 data-tab-item=R-tab-8666ad26e93cd530823e6e5a5c706f5a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f ~/workshop/petclinic/deployment.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-473beec315d2b0f805bbd3be42582392 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>deployment.apps/config-server created
</span></span><span class=line><span class=cl>service/config-server created
</span></span><span class=line><span class=cl>deployment.apps/discovery-server created
</span></span><span class=line><span class=cl>service/discovery-server created
</span></span><span class=line><span class=cl>deployment.apps/api-gateway created
</span></span><span class=line><span class=cl>service/api-gateway created
</span></span><span class=line><span class=cl>service/api-gateway-external created
</span></span><span class=line><span class=cl>deployment.apps/customers-service created
</span></span><span class=line><span class=cl>service/customers-service created
</span></span><span class=line><span class=cl>deployment.apps/vets-service created
</span></span><span class=line><span class=cl>service/vets-service created
</span></span><span class=line><span class=cl>deployment.apps/visits-service created
</span></span><span class=line><span class=cl>service/visits-service created
</span></span><span class=line><span class=cl>deployment.apps/admin-server created
</span></span><span class=line><span class=cl>service/admin-server created
</span></span><span class=line><span class=cl>service/petclinic-db created
</span></span><span class=line><span class=cl>deployment.apps/petclinic-db created
</span></span><span class=line><span class=cl>configmap/petclinic-db-initdb-config created
</span></span><span class=line><span class=cl>deployment.apps/petclinic-loadgen-deployment created
</span></span><span class=line><span class=cl>configmap/scriptfile created</span></span></code></pre></div></div></div></div></div><p>At this point, we can verify the deployment by checking that the Pods are running. The containers need to be downloaded and started, so this may take a couple of minutes.</p><div class=tab-panel data-tab-group=R-tabs-35d845ae12cd33fcf67b587920e2f088><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-19389cbd1d84b59dbde11a5d2af8cc23 aria-expanded=true data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-35d845ae12cd33fcf67b587920e2f088","R-tab-380f56daf2c41382fed5e183e4f1fbe1")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button aria-controls=R-tab-id-606707376cba88ffeaec88b9aa7d0c96 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-35d845ae12cd33fcf67b587920e2f088","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-19389cbd1d84b59dbde11a5d2af8cc23 data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-606707376cba88ffeaec88b9aa7d0c96 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                            READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-655dcd9b6b-dcvkb     1/1     Running   <span class=m>0</span>          114s
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-dg2vj                               1/1     Running   <span class=m>0</span>          114s
</span></span><span class=line><span class=cl>splunk-otel-collector-operator-57cbb8d7b4-dk5wf                 2/2     Running   <span class=m>0</span>          114s
</span></span><span class=line><span class=cl>petclinic-db-64d998bb66-2vzpn                                   1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>api-gateway-d88bc765-jd5lg                                      1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>visits-service-7f97b6c579-bh9zj                                 1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>admin-server-76d8b956c5-mb2zv                                   1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>customers-service-847db99f79-mzlg2                              1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>vets-service-7bdcd7dd6d-2tcfd                                   1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>petclinic-loadgen-deployment-5d69d7f4dd-xxkn4                   1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>config-server-67f7876d48-qrsr5                                  1/1     Running   <span class=m>0</span>          58s
</span></span><span class=line><span class=cl>discovery-server-554b45cfb-bqhgt                                1/1     Running   <span class=m>0</span>          58s</span></span></code></pre></div></div></div></div></div><p>Make sure the output of <code>kubectl get pods</code> matches the output as shown in the above Output tab. Ensure all the services are shown as <strong>Running</strong> (or use <code>k9s</code> to continuously monitor the status).</p><p>To test the application, you need to obtain the public IP address of your instance. You can do this by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://ifconfig.me</span></span></code></pre></div><p>Validate if the application is running by visiting <strong>http://&lt;IP_ADDRESS>:81</strong> (replace <strong>&lt;IP_ADDRESS></strong> with the IP address you obtained above). You should see the PetClinic application running. The application is also running on ports <strong>80</strong> & <strong>443</strong> if you prefer to use those or port <strong>81</strong> is unreachable.</p><p><a href=#R-image-e1ac15a2283c5791284c784649bf24a8 class=lightbox-link><img alt="Pet shop" class="lazy lightbox figure-image" loading=lazy src=../../images/petclinic.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e1ac15a2283c5791284c784649bf24a8><img alt="Pet shop" class="lazy lightbox lightbox-image" loading=lazy src=../../images/petclinic.png></a></p><p>Make sure the application is working correctly by visiting the <strong>All Owners</strong> <strong>(1)</strong> and <strong>Veterinarians</strong> <strong>(2)</strong> tabs, confirming that you see a list of names on each page.</p><p><a href=#R-image-29472ec2e7cf4b8d864fc9c3d714a063 class=lightbox-link><img alt=Owners class="lazy lightbox figure-image" loading=lazy src=../../images/petclinic-owners.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-29472ec2e7cf4b8d864fc9c3d714a063><img alt=Owners class="lazy lightbox lightbox-image" loading=lazy src=../../images/petclinic-owners.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=verify-kubernetes-cluster-metrics>Verify Kubernetes Cluster metrics</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Once the installation has completed, you can log in to <strong>Splunk Observability Cloud</strong> and verify that the metrics are flowing in from your Kubernetes cluster.</p><p>From the left-hand menu, click on <strong>Infrastructure</strong> and select <strong>Kubernetes</strong>, then select the <strong>Kubernetes nodes</strong> tile.</p><p><a href=#R-image-07b0b1856c14d51b4f05a7896ee06c2f class=lightbox-link><img alt=NavigatorList class="lazy lightbox figure-image" loading=lazy src=../images/navigatorlist.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-07b0b1856c14d51b4f05a7896ee06c2f><img alt=NavigatorList class="lazy lightbox lightbox-image" loading=lazy src=../images/navigatorlist.png></a></p><p>Once you are in the <strong>Kubernetes nodes</strong> overview, change the <strong>Time</strong> filter from <strong>-1h</strong> to the last 15 minutes <strong>(-15m)</strong> to focus on the latest data, then select <strong>Table</strong> to list all the nodes that are reporting metrics.</p><p>Next, in the <strong>Refine by:</strong> panel, select <strong>Cluster name</strong> and choose your cluster from the list.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>To identify your specific cluster, use the <code>INSTANCE</code> value from the shell script output you ran during setup. This unique identifier helps you locate your workshop cluster among other nodes in the list.</p></div></details><p>This will filter the list to show only the nodes from your cluster.</p><p><a href=#R-image-ce3ecda3f87bc7d5ce39c6a33516467d class=lightbox-link><img alt="K8s Nodes" class="lazy lightbox figure-image" loading=lazy src=../images/k8s-nodes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce3ecda3f87bc7d5ce39c6a33516467d><img alt="K8s Nodes" class="lazy lightbox lightbox-image" loading=lazy src=../images/k8s-nodes.png></a></p><p>Switch to the <strong>K8s node logs</strong> view to see the logs from your nodes.</p><p><a href=#R-image-d5cb1e2e8284c798cf1a1b55de841b88 class=lightbox-link><img alt=Logs class="lazy lightbox figure-image" loading=lazy src=../images/k8s-peek-at-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5cb1e2e8284c798cf1a1b55de841b88><img alt=Logs class="lazy lightbox lightbox-image" loading=lazy src=../images/k8s-peek-at-logs.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 14, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=setting-up-automatic-discovery-and-configuration-for-apm>Setting up automatic discovery and configuration for APM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we will enable <strong>automatic discovery and configuration</strong> for the Java services running in Kubernetes. This means that the OpenTelemetry Collector will look for Pod annotations that indicate that the Java application should be instrumented with the Splunk OpenTelemetry Java agent. This will allow us to get traces, spans, and profiling data from Java services running on the cluster.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
automatic discovery and configuration</summary><div class=box-content><p>It is important to understand that automatic discovery and configuration is designed to get <strong>trace, span & profiling</strong> data out of your application <strong>without requiring code changes or recompilation</strong>.</p><p>This is a great way to get started with APM, but it is <strong>not</strong> a replacement for manual instrumentation. Manual instrumentation allows you to add custom spans, tags, and logs to your application, which can provide more context and detail to your traces.</p></div></details><p>For Java applications, the OpenTelemetry Collector will look for the annotation <code>instrumentation.opentelemetry.io/inject-java</code>.</p><p>The annotation can have the value set to <code>true</code> or to the <code>namespace/daemonset</code> of the OpenTelemetry Collector e.g. <code>default/splunk-otel-collector</code>. This allows working across namespaces and is what we will use in this workshop.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Using the deployment.yaml</summary><div class=box-content><p>If you want your Pods to send traces automatically, you can add the annotation to the <code>deployment.yaml</code> as shown below. This will add the instrumentation library during the initial deployment. To speed things up we have done that for the following Pods:</p><ul><li><strong>admin-server</strong></li><li><strong>config-server</strong></li><li><strong>discovery-server</strong></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/part-of</span><span class=p>:</span><span class=w> </span><span class=l>spring-petclinic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>instrumentation.opentelemetry.io/inject-java</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;default/splunk-otel-collector&#34;</span></span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Automatic discovery and configuration</h1><article class=default><header class=headline></header><h1 id=patching-the-deployment>Patching the Deployment</h1><p>To configure <strong>automatic discovery and configuration</strong>, the deployments need to be patched to add the instrumentation annotation. Once patched, the OpenTelemetry Collector will inject the automatic discovery and configuration library and the Pods will be restarted in order to start sending traces and profiling data. First, confirm that the <code>api-gateway</code> does not have the <code>splunk-otel-java</code> image by running the following:</p><div class=tab-panel data-tab-group=R-tabs-eaa647e3356114732bcb176c5b7dc738><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4511cee743a1262e958fff73eea40009 aria-expanded=true data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-eaa647e3356114732bcb176c5b7dc738","R-tab-147de2e4d489d131e220c244ab59800a")'>
<span class=tab-nav-text>Describe api-gateway</span>
</button>
<button aria-controls=R-tab-id-317f2abcde3844b06a2ce3090c3d1c1b aria-expanded=false data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-eaa647e3356114732bcb176c5b7dc738","R-tab-397382ef4cd20471e3d9c9fecb6c01a7")'>
<span class=tab-nav-text>Describe Output</span></button></div><div class=tab-content-container><div id=R-tab-id-4511cee743a1262e958fff73eea40009 data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pods api-gateway <span class=p>|</span> grep Image:</span></span></code></pre></div></div></div><div id=R-tab-id-317f2abcde3844b06a2ce3090c3d1c1b data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Image:         quay.io/phagen/spring-petclinic-api-gateway:0.0.2</span></span></code></pre></div></div></div></div></div><p>Next, enable the Java automatic discovery and configuration for all the services by adding the annotation to the deployments. The following command will patch the all deployments. This will trigger the OpenTelemetry Operator to inject the <code>splunk-otel-java</code> image into the Pods:</p><div class=tab-panel data-tab-group=R-tabs-f8f42c52885ed93578230bc40948209b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4ae8c32ffa1134671efd08793ad2f99d aria-expanded=true data-tab-item=R-tab-095a030c413da2306699957e31df046b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f8f42c52885ed93578230bc40948209b","R-tab-095a030c413da2306699957e31df046b")'>
<span class=tab-nav-text>Patch all PetClinic services</span>
</button>
<button aria-controls=R-tab-id-c9a55a0b746707aa3f1339289a098387 aria-expanded=false data-tab-item=R-tab-c7f3c9adf1663130bcb611eae74c77dc class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f8f42c52885ed93578230bc40948209b","R-tab-c7f3c9adf1663130bcb611eae74c77dc")'>
<span class=tab-nav-text>Patch Output</span></button></div><div class=tab-content-container><div id=R-tab-id-4ae8c32ffa1134671efd08793ad2f99d data-tab-item=R-tab-095a030c413da2306699957e31df046b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get deployments -l app.kubernetes.io/part-of<span class=o>=</span>spring-petclinic -o name <span class=p>|</span> xargs -I % kubectl patch % -p <span class=s2>&#34;{\&#34;spec\&#34;: {\&#34;template\&#34;:{\&#34;metadata\&#34;:{\&#34;annotations\&#34;:{\&#34;instrumentation.opentelemetry.io/inject-java\&#34;:\&#34;default/splunk-otel-collector\&#34;}}}}}&#34;</span></span></span></code></pre></div></div></div><div id=R-tab-id-c9a55a0b746707aa3f1339289a098387 data-tab-item=R-tab-c7f3c9adf1663130bcb611eae74c77dc class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>deployment.apps/config-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/admin-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/customers-service patched
</span></span><span class=line><span class=cl>deployment.apps/visits-service patched
</span></span><span class=line><span class=cl>deployment.apps/discovery-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/vets-service patched
</span></span><span class=line><span class=cl>deployment.apps/api-gateway patched</span></span></code></pre></div></div></div></div></div><p>There will be no change for the <strong>config-server</strong>, <strong>discovery-server</strong> and <strong>admin-server</strong> as these have already been patched.</p><p>To check the container image(s) of the <code>api-gateway</code> pod again, run the following command:</p><div class=tab-panel data-tab-group=R-tabs-7b853fb360ac7d0c85e9d7bd40efb442><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-813e5092d06c625ca661e142050aac16 aria-expanded=true data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7b853fb360ac7d0c85e9d7bd40efb442","R-tab-147de2e4d489d131e220c244ab59800a")'>
<span class=tab-nav-text>Describe api-gateway</span>
</button>
<button aria-controls=R-tab-id-bf99a7a819095938398d943ec86a2df9 aria-expanded=false data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7b853fb360ac7d0c85e9d7bd40efb442","R-tab-397382ef4cd20471e3d9c9fecb6c01a7")'>
<span class=tab-nav-text>Describe Output</span></button></div><div class=tab-content-container><div id=R-tab-id-813e5092d06c625ca661e142050aac16 data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pods api-gateway <span class=p>|</span> grep Image:</span></span></code></pre></div></div></div><div id=R-tab-id-bf99a7a819095938398d943ec86a2df9 data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Image:         ghcr.io/signalfx/splunk-otel-java/splunk-otel-java:v1.30.0
</span></span><span class=line><span class=cl>Image:         quay.io/phagen/spring-petclinic-api-gateway:0.0.2</span></span></code></pre></div></div></div></div></div><p>A new image has been added to the <code>api-gateway</code> which will pull <code>splunk-otel-java</code> from <code>ghcr.io</code> (Note: if you see two <code>api-gateway</code> containers, the original one is probably still terminating, so give it a few seconds).</p><p>Navigate back to the Kubernetes Navigator in <strong>Splunk Observability Cloud</strong>. After a couple of minutes, you will see that the Pods are being restarted by the operator and the automatic discovery and configuration container will be added. This will look similar to the screenshot below:</p><p><a href=#R-image-6fb90762744d65ad91f2d79e34226295 class=lightbox-link><img alt=restart class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-navigator-restarted-pods.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6fb90762744d65ad91f2d79e34226295><img alt=restart class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-navigator-restarted-pods.png></a></p><p>Wait for the Pods to turn green in the Kubernetes Navigator, then go tho the next section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=viewing-the-data-in-splunk-apm>Viewing the data in Splunk APM</h1><p>In the left-hand menu click on <strong>APM</strong> to see the data generated by the traces from the newly instrumented services.</p><p>Change the <strong>Environment</strong> filter <strong>(1)</strong> to the name of your workshop instance in the dropdown box.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>This will be <strong><code>&lt;INSTANCE>-workshop</code></strong> where <strong><code>INSTANCE</code></strong> is the value from the shell script you ran earlier. Ensure it is the only one selected.</p></div></details><p><a href=#R-image-78973f5230a6f2f0ea868469da98e6d7 class=lightbox-link><img alt=apm class="lazy lightbox figure-image" loading=lazy src=../../images/zero-config-first-services-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-78973f5230a6f2f0ea868469da98e6d7><img alt=apm class="lazy lightbox lightbox-image" loading=lazy src=../../images/zero-config-first-services-overview.png></a></p><p>Click on the <strong>Service Map</strong> <strong>(2)</strong> pane to get ready for the next section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=apm-features>APM Features</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>As we have seen in the previous section, once you enable <strong>automatic discovery and configuration</strong> on your services, traces are sent to <strong>Splunk Observability Cloud</strong>.</p><p>With these traces, Splunk will automatically generate <strong>Service Maps</strong> and <strong>RED Metrics</strong>. These are the first steps in understanding the behavior of your services and how they interact with each other.</p><p>In this next section, we are going to examine the traces themselves and the information they provide to help you understand the behavior of your services &ndash; all without touching your code!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. APM Features</h1><article class=default><header class=headline></header><h1 id=apm-service-map>APM Service Map</h1><p><a href=#R-image-4047140f900ef95bb595e32912f6ce51 class=lightbox-link><img alt="apm map" class="lazy lightbox figure-image" loading=lazy src=../../images/zero-config-first-services-map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4047140f900ef95bb595e32912f6ce51><img alt="apm map" class="lazy lightbox lightbox-image" loading=lazy src=../../images/zero-config-first-services-map.png></a></p><p>The above map shows all the interactions between all the services. The map may still be in an interim state as it will take the PetClinic Microservice application a few minutes to start up and fully synchronize. Reducing the time filter to a custom time of <strong>2 minutes</strong> by entering <strong>-2m</strong> will help. You can click on the <strong>Refresh</strong> button <strong>(1)</strong> in the top right-hand corner of the screen. The initial startup-related errors indicated by red circles will eventually disappear.</p><p>Next, let&rsquo;s examine the metrics that are available for each service that is instrumented by visiting the request, error, and duration (RED) metrics Dashboard.</p><p>For this exercise, we are going to use a common scenario you would use if your service operation was showing high latency or errors.</p><p>Click on <strong>customers-service</strong> in the Dependency map, then make sure the <code>customers-service</code> is selected in the <strong>Services</strong> dropdown box <strong>(1)</strong>. Next, select <code>GET /owners</code> from the Operations dropdown <strong>(2)</strong> adjacent to the Service name.</p><p>This should give you the workflow with a filter on <code>GET /owners</code> as shown below:</p><p><a href=#R-image-436e96572b696ec155b79efe7e50742d class=lightbox-link><img alt="select a trace" class="lazy lightbox figure-image" loading=lazy src=../../images/select-workflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-436e96572b696ec155b79efe7e50742d><img alt="select a trace" class="lazy lightbox lightbox-image" loading=lazy src=../../images/select-workflow.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=apm-trace>APM Trace</h1><p>To pick a trace, select a line in the <code>Service Requests & Errors</code> chart <strong>(1)</strong>. A selection of related traces will appear.</p><p>Once you have the list of related traces, click on the blue <strong>(2)</strong> Trace ID Link, making sure the trace you select has the same three services mentioned in the Services Column.</p><p><a href=#R-image-109bf8ad7d9ecc36336423347cf96f34 class=lightbox-link><img alt=workflow-trace-pick class="lazy lightbox figure-image" loading=lazy src=../../images/selecting-a-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-109bf8ad7d9ecc36336423347cf96f34><img alt=workflow-trace-pick class="lazy lightbox lightbox-image" loading=lazy src=../../images/selecting-a-trace.png></a></p><p>This brings us to the selected Trace in the Waterfall view:</p><p>Here we find several sections:</p><ul><li>The Waterfall Pane <strong>(1)</strong>, where you see the trace and all the instrumented functions visible as spans, with their duration representation and order/relationship showing.</li><li>The Trace Info Pane <strong>(2)</strong>, which shows the selected Span information (highlighted with a box around the Span in the Waterfall Pane).</li><li>The Span Pane <strong>(3)</strong> where you can find all the Tags that have been sent in the selected Span. You can scroll down to see all of them.</li><li>The process Pane, with tags related to the process that created the Span (scroll down to see as it is not in the screenshot).</li><li>The Trace Properties, located at the top right-hand side of the pane is collapsed by default.</li></ul><p><a href=#R-image-dfc85a16ea4310c13959202a5ce795dc class=lightbox-link><img alt=waterfall class="lazy lightbox figure-image" loading=lazy src=../../images/waterfall-view.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dfc85a16ea4310c13959202a5ce795dc><img alt=waterfall class="lazy lightbox lightbox-image" loading=lazy src=../../images/waterfall-view.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=apm-span>APM Span</h1><p>While we examine our spans, let&rsquo;s look at several out-of-the-box features that you get <strong>without code modifications</strong> when using <strong>automatic discovery and configuration</strong> on top of tracing:</p><p>First, in the Waterfall Pane, make sure the <code>customers-service:SELECT petclinic</code> or similar span is selected as shown in the screenshot below:</p><p><a href=#R-image-65b4174d6103c1bea62b76f8667341e9 class=lightbox-link><img alt=DB-query class="lazy lightbox figure-image" loading=lazy src=../../images/db-query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-65b4174d6103c1bea62b76f8667341e9><img alt=DB-query class="lazy lightbox lightbox-image" loading=lazy src=../../images/db-query.png></a></p><ul><li>The basic latency information is shown as a bar for the instrumented function or call. In our example above, it took 17.8 Milliseconds.</li><li>Several similar Spans <strong>(1)</strong> are only visible if the span is repeated multiple times. In this case, there are 10 repeats in our example. You can show/hide them all by clicking on the <code>10x</code> and all spans will show in order.</li><li><strong>Inferred Services</strong>: Calls made to external systems that are not instrumented show up as a grey &lsquo;inferred&rsquo; span. The Inferred Service or span in our example is a call to the Mysql Database <code>mysql:petclinic SELECT petclinic</code> <strong>(2)</strong> as shown above.</li><li><strong>Span Tags</strong>: In the Tag Pane, we see standard tags produced by the automatic discovery and configuration. In this case, the span is calling a Database, so it includes the <code>db.statement</code> tag <strong>(3)</strong>. This tag will hold the DB query statement and is used by the Database call performed during this span. This will be used by the DB-Query Performance feature. We look at DB-Query Performance in the next section.</li><li><strong>Always-on Profiling</strong>: <strong>IF</strong> the system is configured to capture Profiling data during a Span life cycle. It will show the number of Call Stacks captured in the Spans timeline. In our example above, we see 18 Call Stacks for the <code>customer-service:GET /owners</code> Span. <strong>(4)</strong></li></ul><p>We will look at Profiling in the next section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=service-centric-view>Service Centric View</h1><p>Splunk APM provide <strong>Service Centric Views</strong> that provide engineers a deep understanding of service performance in one centralized view. Now, across every service, engineers can quickly identify errors or bottlenecks from a service‚Äôs underlying infrastructure, pinpoint performance degradation from new deployments, and visualize the health of every third party dependency.</p><p>To see this dashboard for the <code>api-gateway</code>, click on <strong>APM</strong> from the left-hand menu and then click on the <code>api-gateway</code> service in the list. This will bring you to the Service Centric View dashboard:</p><p><a href=#R-image-0cad997a952b67b44ea60c852a17cfb5 class=lightbox-link><img alt=service_maps class="lazy lightbox figure-image" loading=lazy src=../../images/service-view.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0cad997a952b67b44ea60c852a17cfb5><img alt=service_maps class="lazy lightbox lightbox-image" loading=lazy src=../../images/service-view.png></a></p><p>This view, which is available for each of your instrumented services, offers an overview of <strong>Service metrics</strong>, <strong>Error breakdown</strong>, <strong>Runtime metrics (Java)</strong> and <strong>Infrastructure metrics</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 7, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=always-on-profiling--db-query-performance>Always-On Profiling & DB Query Performance</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>As we have seen in the previous chapter, you can trace your interactions between the various services using APM without touching your code, allowing you to identify issues faster.</p><p>In addition to tracing, <strong>automatic discovery and configuration</strong> offers additional features out of the box that can help you find issues even faster! In this section we are going to look at two of them:</p><ul><li><strong>Always-on Profiling and Java Metrics</strong></li><li><strong>Database Query Performance</strong></li></ul><p>If you want to dive deeper into Always-on Profiling or DB-Query performance, we have a separate Ninja Workshop called <a href=/en/scenarios/debug_problems/><strong>Debug Problems in Microservices</strong></a> that you can follow.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Advanced Features</h1><article class=default><header class=headline></header><h1 id=always-on-profiling--metrics>Always-On Profiling & Metrics</h1><p>When we installed the Splunk Distribution of the OpenTelemetry Collector using the Helm chart earlier, we configured it to enable <strong>AlwaysOn Profiling</strong> and <strong>Metrics</strong>. This means that OpenTelemetry Java will automatically generate CPU and Memory profiling for the application, sending them to Splunk Observability Cloud.</p><p>When you deploy the PetClinic application and set the annotation, the collector automatically detects the application and instruments it for traces and profiling. We can verify this by examining the startup logs of one of the Java containers we are instrumenting by running the following script:</p><p>The logs will show the flags that were picked up by the Java automatic discovery and configuration:</p><p><div class=tab-panel data-tab-group=R-tabs-b5bc5bded52ce62eefd06b08f08303f7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-702261235db1cf041b856702234ce8bb aria-expanded=true data-tab-item=R-tab-c3d2921cc9f4b101462512ad1f1676da class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b5bc5bded52ce62eefd06b08f08303f7","R-tab-c3d2921cc9f4b101462512ad1f1676da")'>
<span class=tab-nav-text>Run the script</span>
</button>
<button aria-controls=R-tab-id-5f7eb5e1af8834f4d0e42a84ec024dd7 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b5bc5bded52ce62eefd06b08f08303f7","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-702261235db1cf041b856702234ce8bb data-tab-item=R-tab-c3d2921cc9f4b101462512ad1f1676da class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code class=language-logs data-lang=logs>.  ~/workshop/petclinic/scripts/get_logs.sh</code></pre></div></div></div><div id=R-tab-id-5f7eb5e1af8834f4d0e42a84ec024dd7 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2024/02/15 09:42:00 Problem with dial: dial tcp 10.43.104.25:8761: connect: connection refused. Sleeping 1s
</span></span><span class=line><span class=cl>2024/02/15 09:42:01 Problem with dial: dial tcp 10.43.104.25:8761: connect: connection refused. Sleeping 1s
</span></span><span class=line><span class=cl>2024/02/15 09:42:02 Connected to tcp://discovery-server:8761
</span></span><span class=line><span class=cl>Picked up JAVA_TOOL_OPTIONS:  -javaagent:/otel-auto-instrumentation-java/javaagent.jar
</span></span><span class=line><span class=cl>Picked up _JAVA_OPTIONS: -Dspring.profiles.active=docker,mysql -Dsplunk.profiler.call.stack.interval=150
</span></span><span class=line><span class=cl>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:03:056 +0000] [main] INFO io.opentelemetry.javaagent.tooling.VersionLogger - opentelemetry-javaagent - version: splunk-1.30.1-otel-1.32.1
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:03:768 +0000] [main] INFO com.splunk.javaagent.shaded.io.micrometer.core.instrument.push.PushMeterRegistry - publishing metrics for SignalFxMeterRegistry every 30s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:478 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:478 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - Profiler configuration:
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:480 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                  splunk.profiler.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:505 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                splunk.profiler.directory : /tmp
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:505 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -       splunk.profiler.recording.duration : 20s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:506 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -               splunk.profiler.keep-files : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:510 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -            splunk.profiler.logs-endpoint : http://10.13.2.38:4317
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:513 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -              otel.exporter.otlp.endpoint : http://10.13.2.38:4317
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:513 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -           splunk.profiler.memory.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:515 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -             splunk.profiler.tlab.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:516 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -        splunk.profiler.memory.event.rate : 150/s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:516 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.call.stack.interval : PT0.15S
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:517 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -  splunk.profiler.include.internal.stacks : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:517 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.tracing.stacks.only : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:517 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-02-15 09:42:07:518 +0000] [main] INFO com.splunk.opentelemetry.profiler.JfrActivator - Profiler is active.</span></span></code></pre></div></div></div></div></div>We are interested in the section written by the <code>com.splunk.opentelemetry.profiler.ConfigurationLogger</code> or the <strong>Profiling Configuration</strong>.</p><p>We can see the various settings you can control, such as the <code>splunk.profiler.directory</code>, which is the location where the agent writes the call stacks before sending them to Splunk. (This may be different depending on how you configure your containers.)</p><p>Another parameter you may want to change is <code>splunk.profiler.call.stack.interval</code>. This is how often the system captures a CPU Stack trace. You may want to reduce this interval setting if you have short spans like the ones we have in our Pet Clinic application. For the demo application, we did not change the default interval value, so Spans may not always have a CPU Call Stack related to them.</p><p>You can find how to set these parameters <a href=https://help.splunk.com/en/splunk-observability-cloud/manage-data/available-data-sources/supported-integrations-in-splunk-observability-cloud/apm-instrumentation/instrument-a-java-application/configure-the-java-agent#profiling-configuration-java rel=external>here</a>. In the example below, we see how to set a higher collection rate for call stacks in the <code>deployment.yaml</code>, by setting this value in the JAVA_OPTIONS config section.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>JAVA_OPTIONS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;-Xdebug -Dsplunk.profiler.call.stack.interval=150&#34;</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=always-on-profiling-in-the-trace-waterfall>Always-On Profiling in the Trace Waterfall</h1><p>Make sure you have your original (or similar) Trace & Span <strong>(1)</strong> selected in the APM Waterfall view and select <strong>Memory Stack Traces (2)</strong> from the right-hand pane:</p><p><a href=#R-image-f0adb47c209e56c34b987d24463e87de class=lightbox-link><img alt="profiling from span" class="lazy lightbox figure-image" loading=lazy src=../../images/flamechart-in-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0adb47c209e56c34b987d24463e87de><img alt="profiling from span" class="lazy lightbox lightbox-image" loading=lazy src=../../images/flamechart-in-waterfall.png></a></p><p>The pane should show you the Memory Stack Trace Flame Graph <strong>(3)</strong>. You can scroll down and/or expand by dragging the right side of the pane.</p><p>AlwaysOn Profiling is constantly taking snapshots, or stack traces, of your application‚Äôs code. Imagine having to read through thousands of stack traces! It is simply not practical. To assist with this, AlwaysOn Profiling aggregates and summarizes profiling data, providing a convenient way to explore Call Stacks in a view called the <strong>Flame Graph</strong>. It represents a summary of all stack traces captured from your application. You can use the Flame Graph to discover which lines of code might be causing performance issues and to confirm whether changes you make to the code have the intended effect.</p><p>To dive deeper into Always-on Profiling, select Span <strong>(3)</strong> (as referenced in the above image) in the Profiling Pane under <strong>Memory Stack Traces</strong>. This will open the Always-on Profiling main screen, with the Memory view pre-selected:</p><p><a href=#R-image-551e647c9f04321219044441a6982ff4 class=lightbox-link><img alt="Profiling main" class="lazy lightbox figure-image" loading=lazy src=../../images/profiling-memory.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-551e647c9f04321219044441a6982ff4><img alt="Profiling main" class="lazy lightbox lightbox-image" loading=lazy src=../../images/profiling-memory.png></a></p><ul><li>The Time filter will be set to the time frame of the span we selected <strong>(1)</strong></li><li>Java Memory Metric Charts <strong>(2)</strong> allow you to <code>Monitor Heap Memory, Application Activity</code> like <code>Memory Allocation Rate</code> and <code>Garbage Collecting</code> Metrics.</li><li>Ability to focus/see metrics and Stack Traces only related to the Span <strong>(3)</strong>, This will filter out background activities running in the Java application if required.</li><li>Java Function calls identified <strong>(4)</strong>, allowing you to drill down into the Methods called from that function.</li><li>The Flame Graph <strong>(5)</strong>, with the visualization of hierarchy based on the stack traces of the profiled service.</li><li>Ability to select the Service instance <strong>(6)</strong> in case the service spins up multiple version of itself.</li></ul><p>For further investigation, the UI allows you to click a stack trace so that you can see the called function and the relevant line from the flame chart that you can then use in your coding platform to view the actual lines of code (depending of course on your preferred Coding platform).</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=database-query-performance>Database Query Performance</h1><p>With Database Query Performance, you can monitor the impact of your database queries on service availability directly in Splunk APM. This way, you can quickly identify long-running, unoptimized, or heavy queries and mitigate issues they might be causing, without having to instrument your databases.</p><p>To look at the performance of your database queries, make sure you are on the APM <strong>Service Map</strong> page either by going back in the browser or navigating to the APM section in the Menu bar, then click on the <strong>Service Map</strong> tile.</p><p>Select the inferred database service <code>mysql:petclinic</code> Inferred Database server in the Dependency map <strong>(1)</strong>, then scroll the right-hand pane to find the <strong>Database Query Performance</strong> Pane <strong>(2)</strong>.</p><p><a href=#R-image-b60c231ed1067070583c85d94b4af648 class=lightbox-link><img alt="DB-query from map" class="lazy lightbox figure-image" loading=lazy src=../../images/db-query-map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b60c231ed1067070583c85d94b4af648><img alt="DB-query from map" class="lazy lightbox lightbox-image" loading=lazy src=../../images/db-query-map.png></a></p><p>If the service you have selected in the map is indeed an (inferred) database server, this pane will populate with the top 90% (P90) database calls based on duration. To dive deeper into the db-query performance function, click somewhere on the word <strong>Database Query Performance</strong> at the top of the pane.</p><p>This will bring us to the DB-query Performance overview screen:</p><p><a href=#R-image-a5e5779c3b6f75040085078b2b5a3d7b class=lightbox-link><img alt="DB-query full" class="lazy lightbox figure-image" loading=lazy src=../../images/db-query-full.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a5e5779c3b6f75040085078b2b5a3d7b><img alt="DB-query full" class="lazy lightbox lightbox-image" loading=lazy src=../../images/db-query-full.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Database Query Normalization</summary><div class=box-content><p>By default, Splunk APM instrumentation sanitizes database queries to remove or mask sensible data, such as secrets or personally identifiable information (PII) from the <code>db.statements</code>. You can find how to turn off database query normalization <a href=https://help.splunk.com/en/splunk-observability-cloud/monitor-application-performance/monitor-database-query-performance/troubleshoot-database-query-performance#turn-off-database-query-normalization rel=external>here</a>.</p></div></details><p>This screen will show us all the Database queries <strong>(1)</strong> done to our database from your application, based on the Traces & Spans sent to the Splunk Observability Cloud. Note that you can compare them across a time block or sort them on Total Time, P90 Latency & Requests <strong>(2)</strong>.</p><p>For each Database query in the list, we see the highest latency, the total number of calls during the time window and the number of requests per second <strong>(3)</strong>. This allows you to identify places where you might optimize your queries.</p><p>You can select traces containing Database Calls via the two charts in the right-hand pane <strong>(5)</strong>. Use the Tag Spotlight pane <strong>(6)</strong> to drill down to see which tags are related to the database calls, based on endpoints or tags.</p><p>If you need to see a detailed view of a query:</p><p><a href=#R-image-08dc501e95ad8a26beaa57436b3df702 class=lightbox-link><img alt=details class="lazy lightbox figure-image" loading=lazy src=../../images/query-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-08dc501e95ad8a26beaa57436b3df702><img alt=details class="lazy lightbox lightbox-image" loading=lazy src=../../images/query-details.png></a></p><p>Click on the specific Query <strong>(1)</strong>. This will open the Query Details pane <strong>(2)</strong>, which you can use for more detailed investigations.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=log-observer>Log Observer</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Up until this point, there have been <strong>no code changes</strong>, yet tracing, profiling and Database Query Performance data is being sent to Splunk Observability Cloud.</p><p>Next, we will work with <strong>Splunk Log Observer</strong> to obtain log data from the Spring PetClinic application.</p><p>The <strong>Splunk OpenTelemetry Collector</strong> automatically collects logs from the Spring PetClinic application and sends them to Splunk Observability Cloud using the OTLP exporter, annotating the log events with <code>trace_id</code>, <code>span_id</code> and trace flags.</p><p><strong>Splunk Log Observer</strong> is then used to view the logs, automatically correlating log information with services and traces.</p><p>This feature is called <a href=https://help.splunk.com/en/splunk-observability-cloud/data-tools/related-content rel=external><strong>Related Content</strong></a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 7. Log Observer</h1><article class=default><header class=headline></header><h1 id=viewing-the-logs>Viewing the Logs</h1><p>In order to see logs click on the <a href=#R-image-53e9d1b90106cc5c5b3a70a9d1396f83 class=lightbox-link><img alt=Logo class="inline lazy lightbox figure-image" loading=lazy src="../images/logo-icon.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-53e9d1b90106cc5c5b3a70a9d1396f83><img alt=Logo class="inline lazy lightbox lightbox-image" loading=lazy src="../images/logo-icon.png?classes=inline&height=25px"></a> <strong>Log Observer</strong> in the left-hand menu. Once in Log Observer please ensure <strong>Index</strong> on the filter bar is set to <strong>splunk4rookies-workshop</strong>. <strong>(1)</strong></p><p>Next, click <strong>Add Filter</strong> and search, using the <em>Fields</em> <strong>(2)</strong> option for the field <code>deployment.environment</code> <strong>(3)</strong>. Then from the dropdown list, select your workshop instance, <strong>(4)</strong> and click <code>=</code> (to include). You will now see only the log messages from your PetClinic application.</p><p><a href=#R-image-29889f30dc7eaa127609f8544ce69f34 class=lightbox-link><img alt="Log Observer sort" class="lazy lightbox figure-image" loading=lazy src=../../images/log-observer-sort.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-29889f30dc7eaa127609f8544ce69f34><img alt="Log Observer sort" class="lazy lightbox lightbox-image" loading=lazy src=../../images/log-observer-sort.png></a></p><p>Next, search for the field <code>service.name</code>, selecting the value <code>customers-service</code> and click <code>=</code> (to include). This should now appear in the filter bar <strong>(1)</strong>. Next click on the Button <strong>Run Search</strong> <strong>(2)</strong>.</p><p><a href=#R-image-1d41b5809ed67ffbe746523e121b00fb class=lightbox-link><img alt="Log Observer run" class="lazy lightbox figure-image" loading=lazy src=../../images/log-observer-run.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1d41b5809ed67ffbe746523e121b00fb><img alt="Log Observer run" class="lazy lightbox lightbox-image" loading=lazy src=../../images/log-observer-run.png></a></p><p>This wil refresh the log entries and they will now be reduced to show the entries from your <code>customers-service</code> only.</p><p><a href=#R-image-e47c34867a3117241646ee24e4718644 class=lightbox-link><img alt="Log Observer" class="lazy lightbox figure-image" loading=lazy src=../../images/log-observer-trace-info.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e47c34867a3117241646ee24e4718644><img alt="Log Observer" class="lazy lightbox lightbox-image" loading=lazy src=../../images/log-observer-trace-info.png></a></p><p>Click on an entry that starts with <em>&ldquo;Saving pet&rdquo;</em> <strong>(1)</strong>. A side pane will open where you can see the detailed information, including the relevant trace and span IDs <strong>(2)</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=related-content>Related Content</h1><p>The bottom pane is where any related content will be reported. In the screenshot below you can see that APM has found a trace that is related to this log line <strong>(1)</strong>:</p><p><a href=#R-image-e7af7c072d3480a70aa2db262a900e55 class=lightbox-link><img alt=RC class="lazy lightbox figure-image" loading=lazy src=../../images/log-apm-rc.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7af7c072d3480a70aa2db262a900e55><img alt=RC class="lazy lightbox lightbox-image" loading=lazy src=../../images/log-apm-rc.png></a></p><p>By clicking <strong>(2)</strong> on <strong>Trace for 960432ac9f16b98be84618778905af50</strong> we will be taken to the waterfall in APM for this specific trace, where this log line was generated:</p><p><a href=#R-image-3dacaad677bfbd8d49eb639adb5cf961 class=lightbox-link><img alt="waterfall logs" class="lazy lightbox figure-image" loading=lazy src=../../images/waterfall-with-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3dacaad677bfbd8d49eb639adb5cf961><img alt="waterfall logs" class="lazy lightbox lightbox-image" loading=lazy src=../../images/waterfall-with-logs.png></a></p><p>Note that you now have a <strong>Related Content</strong> pane for Logs appearing <strong>(1)</strong>. Clicking on this will take you back to Log Observer and will display all the log lines that are part of this trace.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=real-user-monitoring>Real User Monitoring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>To enable Real User Monitoring (RUM) instrumentation for an application, you need to add the Open Telemetry Javascript <a href=https://github.com/signalfx/splunk-otel-js-web rel=external><strong>https://github.com/signalfx/splunk-otel-js-web</strong></a> snippet to the code base.</p><p>The Spring PetClinic application uses a single <a href=https://github.com/spring-petclinic/spring-petclinic-microservices/blob/main/spring-petclinic-api-gateway/src/main/resources/static/index.html rel=external><strong>index</strong></a> HTML page, that is reused across all views of the application. This is the perfect location to insert the Splunk RUM instrumentation library as it will be loaded for all pages automatically.</p><p>The <code>api-gateway</code> service is already running the instrumentation and sending RUM traces to Splunk Observability Cloud and we will review the data in the next section.</p><p>If you&rsquo;d like to verify the snippet, you can view the page source in your browser by right-clicking on the page and selecting <strong>View Page Source</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/env.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>  
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>realm</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>RUM_REALM</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Realm:&#39;</span><span class=p>,</span> <span class=nx>realm</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>auth</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>RUM_AUTH</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>appName</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>RUM_APP_NAME</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>environmentName</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>RUM_ENVIRONMENT</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>realm</span> <span class=o>&amp;&amp;</span> <span class=nx>auth</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=nx>realm</span><span class=o>:</span> <span class=nx>realm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=nx>auth</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>applicationName</span><span class=o>:</span> <span class=nx>appName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>deploymentEnvironment</span><span class=o>:</span> <span class=nx>environmentName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>version</span><span class=o>:</span> <span class=s1>&#39;1.0.0&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>            <span class=nx>SplunkSessionRecorder</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=nx>applicationName</span><span class=o>:</span> <span class=nx>appName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>realm</span><span class=o>:</span> <span class=nx>realm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=nx>auth</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                  <span class=nx>recorder</span><span class=o>:</span> <span class=s2>&#34;splunk&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                  <span class=nx>features</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>video</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>Provider</span> <span class=o>=</span> <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>provider</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>tracer</span><span class=o>=</span><span class=nx>Provider</span><span class=p>.</span><span class=nx>getTracer</span><span class=p>(</span><span class=s1>&#39;appModuleLoader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Realm or auth is empty, provide default values or skip initialization
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Realm or auth is empty. Skipping Splunk Rum initialization.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=c>&lt;!-- Section added for  RUM --&gt;</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 1, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 8. Real User Monitoring</h1><article class=default><header class=headline></header><h1 id=select-the-rum-view-for-the-petclinic-app>Select the RUM view for the Petclinic App</h1><p>Lets start with a quick, high level tour of RUM by clicking <strong>RUM</strong> in the left-hand menu. Then change the <strong>Environment</strong> filter <strong>(1)</strong> to the name of your workshop instance from the dropdown box, selecting <strong><code>&lt;INSTANCE>-workshop</code></strong> <strong>(1)</strong> (where <strong><code>INSTANCE</code></strong> is the value from the shell script you ran earlier). Make sure it is the only one selected.</p><p>Then change the <strong>App</strong> <strong>(2)</strong> dropdown box to the name of your app, it will be <strong><code>&lt;INSTANCE>-store</code></strong></p><p><a href=#R-image-0265dca101a5f2013acf8a9661955744 class=lightbox-link><img alt="rum select" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-env-select.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0265dca101a5f2013acf8a9661955744><img alt="rum select" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-env-select.png></a></p><p>Once you have selected your <strong>Environment</strong> and <strong>App</strong>, you will see an overview page showing the RUM status of your Application. (If your Summary Dashboard is just a single row of numbers, you are looking at the condensed view. You can expand it by clicking on the <strong>> (1)</strong> in front of the Application name). If any JavaScript errors occurred, they will show up as shown below:</p><p><a href=#R-image-dc22a1b08cfb55f6b2d1c1ed5513e56d class=lightbox-link><img alt="rum overview" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dc22a1b08cfb55f6b2d1c1ed5513e56d><img alt="rum overview" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-overview.png></a></p><p>To continue, click on the blue link (with your workshop name) to get to the details page. This will bring up a new dashboard view breaking down the interactions by UX Metrics, Front-end Health, Back-end Health and Custom Events and comparing them to historic metrics (1 hour by default).</p><p><a href=#R-image-c68ce113a4e8e1791037936f4263fd4e class=lightbox-link><img alt="rum  main" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-main.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c68ce113a4e8e1791037936f4263fd4e><img alt="rum  main" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-main.png></a>
Normally, you have only one line inside the first chart. Click on the link that relates to your Petclinic shop,
http://198.19.249.202:81 in our example:</p><p>This will bring us to the Tag Spotlight page.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=rum-trace-waterfall-view--linking-to-apm>RUM trace Waterfall view & linking to APM</h1><p>In the TAG Spotlight view, you are presented with all the tags associated with the RUM data. Tags are key-value pairs that are used to identify the data. In this case, the tags are automatically generated by the OpenTelemetry instrumentation. The tags are used to filter the data and to create the charts and tables. The Tag Spotlight view allows you detect trends in behavior and to drill down into a user session.</p><p><a href=#R-image-69404f9b6e79611f7792846acd4cd96b class=lightbox-link><img alt="RUM TAG" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-tag-spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-69404f9b6e79611f7792846acd4cd96b><img alt="RUM TAG" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-tag-spotlight.png></a></p><p>Click on User Sessions <strong>(1)</strong>, this will show you the list of user session that occurred during the time window.</p><p>We want to look at one of the session, so click on <em>Duration</em> <strong>(2)</strong> to sort on duration, and make sure you click on the link of one of the longer ones <strong>(3)</strong>:</p><p><a href=#R-image-248d408207f909983f92a2f3882d3e24 class=lightbox-link><img alt="User sessions" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-user-sessions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-248d408207f909983f92a2f3882d3e24><img alt="User sessions" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-user-sessions.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=rum-trace-waterfall-view--linking-to-apm>RUM trace Waterfall view & linking to APM</h1><p>We are now looking at the RUM Trace waterfall, this will tell you what happened during the session on the user device as they visited the page of our petclinic application.</p><p>If you scroll down the waterfall find click on the <strong>#!/owners/details</strong> segment on the right <strong>(1)</strong>, you see a list of actions that occurred during the handling of the Vets request. Note, that the HTTP request have a blue <strong>APM</strong> link before the return code. Pick one, and click on the APM link. This will show you the APM info for this backend service call hosted in Kubernetes.</p><p><a href=#R-image-4ff0713f3094a4dbc628335decefc3f5 class=lightbox-link><img alt="rum apm link" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4ff0713f3094a4dbc628335decefc3f5><img alt="rum apm link" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-trace.png></a></p><p>Note, if you want to drill down to verify what happened with the request, click on the Trace ID url.</p><p>This will show you the trace related to your request from RUM:</p><p><a href=#R-image-1091ce0a3a8589a98d3d6966caa0d6b1 class=lightbox-link><img alt="RUm-apm linked" class="lazy lightbox figure-image" loading=lazy src=../../images/rum-apm-waterfall.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1091ce0a3a8589a98d3d6966caa0d6b1><img alt="RUm-apm linked" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rum-apm-waterfall.png></a></p><p>You can see that the entry point into your service now has a <strong>RUM (1)</strong> related content link added, allowing you to return back to your RUM session after you validated what happened in your backend service.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=workshop-wrap-up->Workshop Wrap-up üéÅ</h1><p>Congratulations, you have completed the <strong>Get the Most Out of Your Existing Kubernetes Java Applications Using Automatic Discovery and Configuration With OpenTelemetry</strong> workshop.</p><p>Today, you have learned how easy it is to add Tracing, Code Profiling and Database Query Performance to your existing Java application in Kubernetes.</p><p>You immediately improved the observability of the application and infrastructure without touching a line of code or configuration using <strong>Automatic Discovery and Configuration</strong>.</p><p>You also learned that with simple configuration changes, you can add even more observability (<strong>logging</strong> and <strong>RUM</strong>) to the application in order to provide end-to-end observability.</p><p><a href=#R-image-f19a2bde0c82e838d954732cf03c541c class=lightbox-link><img alt=Champagne class="lazy lightbox figure-image" loading=lazy src="/observability-workshop/en/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/9-wrap-up/images/champagne.png?width=45vw" style=height:auto;width:45vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f19a2bde0c82e838d954732cf03c541c><img alt=Champagne class="lazy lightbox lightbox-image" loading=lazy src="/observability-workshop/en/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/9-wrap-up/images/champagne.png?width=45vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 21, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=monitoring-horizontal-pod-autoscaling-in-kubernetes>Monitoring Horizontal Pod Autoscaling in Kubernetes</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>This hands-on workshop teaches you how to monitor Kubernetes Horizontal Pod Autoscaling (HPA) using the Splunk OpenTelemetry Collector. You&rsquo;ll deploy a PHP/Apache application with a load generator to trigger auto-scaling events and observe the complete scaling lifecycle.</p><p>Through practical exercises, you&rsquo;ll explore OpenTelemetry Receivers, Kubernetes Namespaces, ReplicaSets, and HPA mechanics while monitoring everything in Splunk Observability Cloud. You&rsquo;ll master the Kubernetes Navigator, build custom dashboards, analyze metrics and events, and configure detectors to alert on scaling activities.</p><p>For this workshop, Splunk has prepared an Ubuntu Linux instance in AWS/EC2 all pre-configured for you.</p><p>To get access to the instance that you will be using in the workshop, please visit the URL provided by the workshop leader.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Horizontal Pod Autoscaling</h1><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-collector-in-kubernetes>Deploying the OpenTelemetry Collector in Kubernetes</h1><h2 id=1-connect-to-ec2-instance>1. Connect to EC2 instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will be able to connect to the workshop instance by using SSH from your Mac, Linux or Windows device. Open the link to the sheet provided by your instructor. This sheet contains the IP addresses and the password for the workshop instances.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>Your workshop instance has been pre-configured with the correct <strong>Access Token</strong> and <strong>Realm</strong> for this workshop. There is no need for you to configure these.</p></div></details><h2 id=2-install-splunk-otel-using-helm>2. Install Splunk OTel using Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install the OpenTelemetry Collector using the Splunk Helm chart. First, add the Splunk Helm chart repository and update:</p><div class=tab-panel data-tab-group=R-tabs-f54300ca75c674c80d3a20ae3b8c8125><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-911cd3e897b1e0411de104966e30f699 aria-expanded=true data-tab-item=R-tab-ffba54ebcbad31e9c6e41e5577fdfb33 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f54300ca75c674c80d3a20ae3b8c8125","R-tab-ffba54ebcbad31e9c6e41e5577fdfb33")'>
<span class=tab-nav-text>helm repo add</span>
</button>
<button aria-controls=R-tab-id-f403d9d3486579b29b46a45e3c022704 aria-expanded=false data-tab-item=R-tab-e905647b6f1267ab0ddf5da6628dd333 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f54300ca75c674c80d3a20ae3b8c8125","R-tab-e905647b6f1267ab0ddf5da6628dd333")'>
<span class=tab-nav-text>helm repo add output</span></button></div><div class=tab-content-container><div id=R-tab-id-911cd3e897b1e0411de104966e30f699 data-tab-item=R-tab-ffba54ebcbad31e9c6e41e5577fdfb33 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div></div></div><div id=R-tab-id-f403d9d3486579b29b46a45e3c022704 data-tab-item=R-tab-e905647b6f1267ab0ddf5da6628dd333 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Using ACCESS_TOKEN=&lt;REDACTED&gt;
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>&#34;splunk-otel-collector-chart&#34; has been added to your repositories
</span></span><span class=line><span class=cl>Using ACCESS_TOKEN=&lt;REDACTED&gt;
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>Hang tight while we grab the latest from your chart repositories...
</span></span><span class=line><span class=cl>...Successfully got an update from the &#34;splunk-otel-collector-chart&#34; chart repository
</span></span><span class=line><span class=cl>Update Complete. ‚éàHappy Helming!‚éà</span></span></code></pre></div></div></div></div></div><p>Install the OpenTelemetry Collector Helm with the following commands, do <strong>NOT</strong> edit this:</p><div class=tab-panel data-tab-group=R-tabs-b52949e7f4cfd64078eff0e0535040e5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0f383a7c70df796bc0a60d218a28b73c aria-expanded=true data-tab-item=R-tab-0562418e6d9a76d0dd22b2f186a2203d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b52949e7f4cfd64078eff0e0535040e5","R-tab-0562418e6d9a76d0dd22b2f186a2203d")'>
<span class=tab-nav-text>helm install</span></button></div><div class=tab-content-container><div id=R-tab-id-0f383a7c70df796bc0a60d218a28b73c data-tab-item=R-tab-0562418e6d9a76d0dd22b2f186a2203d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div></div></div></div></div><h2 id=3-verify-deployment>3. Verify Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can monitor the progress of the deployment by running <code>kubectl get pods</code> which should typically report that the new pods are up and running after about 30 seconds.</p><p>Ensure the status is reported as <strong>Running</strong> before continuing.</p><div class=tab-panel data-tab-group=R-tabs-76746ad2f4f3971bdd9f94d0a99ecc70><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e39a4fdf8297d47dcef804134785f2df aria-expanded=true data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-76746ad2f4f3971bdd9f94d0a99ecc70","R-tab-380f56daf2c41382fed5e183e4f1fbe1")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button aria-controls=R-tab-id-89af38b5390cdd9e1f63f59fedc4ee83 aria-expanded=false data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-76746ad2f4f3971bdd9f94d0a99ecc70","R-tab-01f08a36636a863c4f9cc981367f9ca4")'>
<span class=tab-nav-text>kubectl get pods Output</span></button></div><div class=tab-content-container><div id=R-tab-id-e39a4fdf8297d47dcef804134785f2df data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-89af38b5390cdd9e1f63f59fedc4ee83 data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-ks9jn                            1/1     Running   0          27s
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-lqs4j                            0/1     Running   0          27s
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-zsqbt                            1/1     Running   0          27s
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-76bb6b555-7fhzj   0/1     Running   0          27s</span></span></code></pre></div></div></div></div></div><p>Use the label set by the <code>helm</code> install to tail logs (You will need to press <code>ctrl + c</code> to exit).</p><div class=tab-panel data-tab-group=R-tabs-d7a3cf731d84a54539ae76e9f72ccac0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4532d269d5a8ba496636d3a1a631c79f aria-expanded=true data-tab-item=R-tab-66b92e950fb2f856e1fdec23c736e201 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d7a3cf731d84a54539ae76e9f72ccac0","R-tab-66b92e950fb2f856e1fdec23c736e201")'>
<span class=tab-nav-text>kubectl logs</span></button></div><div class=tab-content-container><div id=R-tab-id-4532d269d5a8ba496636d3a1a631c79f data-tab-item=R-tab-66b92e950fb2f856e1fdec23c736e201 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector -f --container otel-collector</span></span></code></pre></div></div></div></div></div><p>Or use the installed <code>k9s</code> terminal UI.</p><p><a href=#R-image-f086dea0a65fc9001b0fd05a8d5826a5 class=lightbox-link><img alt=k9s class="lazy lightbox figure-image" loading=lazy src=../images/k9s.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f086dea0a65fc9001b0fd05a8d5826a5><img alt=k9s class="lazy lightbox lightbox-image" loading=lazy src=../images/k9s.png></a></p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Deleting a failed installation</summary><div class=box-content><p>If you make an error installing the Splunk OpenTelemetry Collector you can start over by deleting the installation using:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=k8s-namespaces-and-dns>K8s Namespaces and DNS</h1><h2 id=1-namespaces-in-kubernetes>1. Namespaces in Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Most of our customers will make use of some kind of private or public cloud service to run Kubernetes. They often choose to have only a few large Kubernetes clusters as it is easier to manage centrally.</p><p>Namespaces are a way to organize these large Kubernetes clusters into virtual sub-clusters. This can be helpful when different teams or projects share a Kubernetes cluster as this will give them the easy ability to just see and work with their resources.</p><p>Any number of namespaces are supported within a cluster, each logically separated from others but with the ability to communicate with each other. Components are only <strong>visible</strong> when selecting a namespace or when adding the <code>--all-namespaces</code> flag to <code>kubectl</code> instead of allowing you to view just the components relevant to your project by selecting your namespace.</p><p>Most customers will want to install the applications into a separate namespace. This workshop will follow that best practice.</p><h2 id=2--dns-and-services-in-kubernetes>2. DNS and Services in Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Domain Name System (DNS) is a mechanism for linking various sorts of information with easy-to-remember names, such as IP addresses. Using a DNS system to translate request names into IP addresses makes it easy for end-users to reach their target domain name effortlessly.</p><p>Most Kubernetes clusters include an internal DNS service configured by default to offer a lightweight approach for service discovery. Even when Pods and Services are created, deleted, or shifted between nodes, built-in service discovery simplifies applications to identify and communicate with services on the Kubernetes clusters.</p><p>In short, the DNS system for Kubernetes will create a DNS entry for each Pod and Service. In general, a Pod has the following DNS resolution:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pod-name.my-namespace.pod.cluster-domain.example</span></span></code></pre></div><p>For example, if a Pod in the <code>default</code> namespace has the Pod name <code>my_pod</code>, and the domain name for your cluster is <code>cluster.local</code>, then the Pod has a DNS name:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>my_pod.default.pod.cluster.local</span></span></code></pre></div><p>Any Pods exposed by a Service have the following DNS resolution available:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>my_pod.service-name.my-namespace.svc.cluster-domain.example</span></span></code></pre></div><p>More information can be found here: <a href=https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/ rel=external><strong>DNS for Service and Pods</strong></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=apache-otel-receiver>Apache OTel Receiver</h1><h2 id=1-review-otel-receiver-for-phpapache>1. Review OTel receiver for PHP/Apache<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Inspect the YAML file <code>~/workshop/k3s/otel-apache.yaml</code> and validate the contents using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/k3s/otel-apache.yaml</span></span></code></pre></div><p>This file contains the configuration for the OpenTelemetry agent to monitor the PHP/Apache deployment.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>apache</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;port&#34; &amp;&amp; pod.name matches &#34;apache&#34; &amp;&amp; port == 80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=l>http://php-apache-svc.apache.svc.cluster.local/server-status?auto</span></span></span></code></pre></div><h2 id=2--observation-rules-in-the-opentelemetry-config>2. Observation Rules in the OpenTelemetry config<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The above file contains an observation rule for Apache using the OTel <code>receiver_creator</code>. This receiver can instantiate other receivers at runtime based on whether observed endpoints match a configured rule.</p><p>The configured rules will be evaluated for each endpoint discovered. If the rule evaluates to true, then the receiver for that rule will be started as configured against the matched endpoint.</p><p>In the file above we tell the OpenTelemetry agent to look for Pods that match the name <code>apache</code> and have port <code>80</code> open. Once found, the agent will configure an Apache receiver to read Apache metrics from the configured URL. Note, the K8s DNS-based URL in the above YAML for the service.</p><p>To use the Apache configuration, you can upgrade the existing Splunk OpenTelemetry Collector Helm chart to use the <code>otel-apache.yaml</code> file with the following command:</p><div class=tab-panel data-tab-group=R-tabs-29e7b4a1afdafd0241019459300edd33><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4f35562dda1bf1deed17ad85089922d0 aria-expanded=true data-tab-item=R-tab-db6a91a88fdf95e61921bfba57b611b2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-29e7b4a1afdafd0241019459300edd33","R-tab-db6a91a88fdf95e61921bfba57b611b2")'>
<span class=tab-nav-text>Helm Upgrade</span></button></div><div class=tab-content-container><div id=R-tab-id-4f35562dda1bf1deed17ad85089922d0 data-tab-item=R-tab-db6a91a88fdf95e61921bfba57b611b2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-apache.yaml</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
NOTE</summary><div class=box-content><p>The <strong>REVISION</strong> number of the deployment has changed, which is a helpful way to keep track of your changes.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Release &#34;splunk-otel-collector&#34; has been upgraded. Happy Helming!
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Mon Nov  4 14:56:25 2024
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: 2
</span></span><span class=line><span class=cl>TEST SUITE: None
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Platform endpoint &#34;https://http-inputs-workshop.splunkcloud.com:443/services/collector/event&#34;.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm eu0.</span></span></code></pre></div></div></details><h2 id=3-kubernetes-configmaps>3. Kubernetes ConfigMaps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A ConfigMap is an object in Kubernetes consisting of key-value pairs that can be injected into your application. With a ConfigMap, you can separate configuration from your Pods.</p><p>Using ConfigMap, you can prevent hardcoding configuration data. ConfigMaps are useful for storing and sharing non-sensitive, unencrypted configuration information.</p><p>The OpenTelemetry collector/agent uses ConfigMaps to store the configuration of the agent and the K8s Cluster receiver. You can/will always verify the current configuration of an agent after a change by running the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get cm</span></span></code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>How many ConfigMaps are used by the collector?</p></div></details><p>When you have a list of ConfigMaps from the namespace, select the one for the <code>otel-agent</code> and view it with the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get cm splunk-otel-collector-otel-agent -o yaml</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
NOTE</summary><div class=box-content><p>The option <code>-o yaml</code> will output the content of the ConfigMap in a readable YAML format.</p></div></details><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Is the configuration from <code>otel-apache.yaml</code> visible in the ConfigMap for the collector agent?</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-apache>Deploy Apache</h1><h2 id=1-review-phpapache-deployment-yaml>1. Review PHP/Apache deployment YAML<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Inspect the YAML file <code>~/workshop/k3s/php-apache.yaml</code> and validate the contents using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/k3s/php-apache.yaml</span></span></code></pre></div><p>This file contains the configuration for the PHP/Apache deployment and will create a new StatefulSet with a single replica of the PHP/Apache image.</p><p>A stateless application does not care which network it is using, and it does not need permanent storage. Examples of stateless apps may include web servers such as Apache, Nginx, or Tomcat.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>updateStrategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>RollingUpdate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;php-apache-svc&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/splunk/php-apache:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;6&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>php-apache-svc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span></span></span></code></pre></div><h2 id=2-deploy-phpapache>2. Deploy PHP/Apache<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create an <code>apache</code> namespace then deploy the PHP/Apache application to the cluster.</p><p>Create the <code>apache</code> namespace:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace apache</span></span></code></pre></div><p>Deploy the PHP/Apache application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f ~/workshop/k3s/php-apache.yaml -n apache</span></span></code></pre></div><p>Ensure the deployment has been created:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get statefulset -n apache</span></span></code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What metrics for your Apache instance are being reported in the <strong>Apache web servers (OTel) Navigator</strong>?</p></div></details><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Using Log Observer what is the issue with the PHP/Apache deployment?</p><p><strong>Tip:</strong> Adjust your filters to use: <code>k8s.namespace.name = apache</code> and <code>k8s.cluster.name = &lt;your_cluster></code>.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=fix-phpapache-issue>Fix PHP/Apache Issue</h1><h2 id=1-kubernetes-resources>1. Kubernetes Resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Especially in Production Kubernetes Clusters, CPU and Memory are considered precious resources. Cluster Operators will normally require you to specify the amount of CPU and Memory your Pod or Service will require in the deployment, so they can have the Cluster automatically manage on which Node(s) your solution will be placed.</p><p>You do this by placing a Resource section in the deployment of your application/Pod</p><p><strong>Example:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>limits</span><span class=p>:</span><span class=w>         </span><span class=c># Maximum amount of CPU &amp; memory for peek use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8&#34;</span><span class=w>      </span><span class=c># Maximum of 8 cores of CPU allowed at for peek use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8Mi&#34;</span><span class=w> </span><span class=c># Maximum allowed 8Mb of memory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>requests</span><span class=p>:</span><span class=w>       </span><span class=c># Request are the expected amount of CPU &amp; memory for normal use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;6&#34;</span><span class=w>      </span><span class=c># Requesting 4 cores of a CPU</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4Mi&#34;</span><span class=w> </span><span class=c># Requesting 4Mb of memory</span></span></span></code></pre></div><p>More information can be found here: <a href=https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/ rel=external><strong>Resource Management for Pods and Containers</strong></a></p><p>If your application or Pod will go over the limits set in your deployment, Kubernetes will kill and restart your Pod to protect the other applications on the Cluster.</p><p>Another scenario that you will run into is when there is not enough Memory or CPU on a Node. In that case, the Cluster will try to reschedule your Pod(s) on a different Node with more space.</p><p>If that fails, or if there is not enough space when you deploy your application, the Cluster will put your workload/deployment in schedule mode until there is enough room on any of the available Nodes to deploy the Pods according to their limits.</p><h2 id=2-fix-phpapache-deployment>2. Fix PHP/Apache Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Before we start, let&rsquo;s check the current status of the PHP/Apache deployment. Under <strong>Alerts & Detectors</strong> which detector has fired? Where else can you find this information?</p></div></details><p>To fix the PHP/Apache StatefulSet, edit <code>~/workshop/k3s/php-apache.yaml</code> using the following commands to reduce the CPU resources:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vim ~/workshop/k3s/php-apache.yaml</span></span></code></pre></div><p>Find the resources section and reduce the CPU limits to <strong>1</strong> and the CPU requests to <strong>0.5</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.5&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4Mi&#34;</span></span></span></code></pre></div><p>Save the changes you have made. (Hint: Use <code>Esc</code> followed by <code>:wq!</code> to save your changes).</p><p>Now, we must delete the existing StatefulSet and re-create it. StatefulSets are immutable, so we must delete the existing one and re-create it with the new changes.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl delete statefulset php-apache -n apache</span></span></code></pre></div><p>Now, deploy your changes:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f ~/workshop/k3s/php-apache.yaml -n apache</span></span></code></pre></div><h2 id=3-validate-the-changes>3. Validate the changes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can validate the changes have been applied by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe statefulset php-apache -n apache</span></span></code></pre></div><p>Validate the Pod is now running in Splunk Observability Cloud.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Is the <strong>Apache Web Servers</strong> dashboard showing any data now?</p><p><strong>Tip:</strong> Don&rsquo;t forget to use filters and time frames to narrow down your data.</p></div></details><p>Monitor the Apache web servers Navigator dashboard for a few minutes.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What is happening with the # Hosts reporting chart?</p></div></details><h2 id=4-fix-the-memory-issue>4. Fix the memory issue<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you navigate back to the Apache dashboard, you will notice that metrics are no longer coming in. We have another resource issue and this time we are Out of Memory. Let&rsquo;s edit the stateful set and increase the memory to what is shown in the image below:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl edit statefulset php-apache -n apache</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>16Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>500m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>12Mi</span></span></span></code></pre></div><p>Save the changes you have made.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation"></i>
Hint</summary><div class=box-content><p><code>kubectl edit</code> will open the contents in the <code>vi</code> editor, use <code>Esc</code> followed by <code>:wq!</code> to save your changes.</p></div></details><p>Because StatefulSets are immutable, we must delete the existing Pod and let the StatefulSet re-create it with the new changes.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl delete pod php-apache-0 -n apache</span></span></code></pre></div><p>Validate the changes have been applied by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe statefulset php-apache -n apache</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-load-generator>Deploy Load Generator</h1><p>Now let&rsquo;s apply some load against the <code>php-apache</code> pod. To do this, you will need to start a different Pod to act as a client. The container within the client Pod runs in an infinite loop, sending HTTP GETs to the <code>php-apache</code> service.</p><h2 id=1-review-loadgen-yaml>1. Review loadgen YAML<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Inspect the YAML file <code>~/workshop/k3s/loadgen.yaml</code> and validate the contents using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/k3s/loadgen.yaml</span></span></code></pre></div><p>This file contains the configuration for the load generator and will create a new ReplicaSet with two replicas of the load generator image.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ReplicaSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>loadgen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>loadgen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>loadgen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>loadgen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>loadgen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>infinite-calls</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>busybox</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>/bin/sh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- -<span class=l>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;while true; do wget -q -O- http://php-apache-svc.apache.svc.cluster.local; done&#34;</span></span></span></code></pre></div><h2 id=2-create-a-new-namespace>2. Create a new namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl create namespace loadgen</span></span></code></pre></div><h2 id=3-deploy-the-loadgen-yaml>3. Deploy the loadgen YAML<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl apply -f ~/workshop/k3s/loadgen.yaml --namespace loadgen</span></span></code></pre></div><p>Once you have deployed the load generator, you can see the Pods running in the <code>loadgen</code> namespace. Use previous similar commands to check the status of the Pods from the command line.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Which metrics in the Apache Navigator have now significantly increased?</p></div></details><h2 id=4-scale-the-load-generator>4. Scale the load generator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A ReplicaSet is a process that runs multiple instances of a Pod and keeps the specified number of Pods constant. Its purpose is to maintain the specified number of Pod instances running in a cluster at any given time to prevent users from losing access to their application when a Pod fails or is inaccessible.</p><p>ReplicaSet helps bring up a new instance of a Pod when the existing one fails, scale it up when the running instances are not up to the specified number, and scale down or delete Pods if another instance with the same label is created. A ReplicaSet ensures that a specified number of Pod replicas are running continuously and helps with load-balancing in case of an increase in resource usage.</p><p>Let&rsquo;s scale our ReplicaSet to 4 replicas using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl scale replicaset/loadgen --replicas 4 -n loadgen</span></span></code></pre></div><p>Validate the replicas are running from both the command line and Splunk Observability Cloud:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl get replicaset loadgen -n loadgen</span></span></code></pre></div><p><a href=#R-image-87d7457b2f204b187bec07770b92ca74 class=lightbox-link><img alt=ReplicaSet class="lazy lightbox figure-image" loading=lazy src=../images/k8s-workload-replicaset.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-87d7457b2f204b187bec07770b92ca74><img alt=ReplicaSet class="lazy lightbox lightbox-image" loading=lazy src=../images/k8s-workload-replicaset.png></a></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What impact can you see in the Apache Navigator?</p></div></details><p>Let the load generator run for around 2-3 minutes and keep observing the metrics in the Kubernetes Navigator and the Apache Navigator.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=setup-horizontal-pod-autoscaling-hpa>Setup Horizontal Pod Autoscaling (HPA)</h1><p>In Kubernetes, a HorizontalPodAutoscaler automatically updates a workload resource (such as a Deployment or StatefulSet), to automatically scale the workload to match demand.</p><p>Horizontal scaling means that the response to increased load is to deploy more Pods. This is different from vertical scaling, which for Kubernetes would mean assigning more resources (for example: memory or CPU) to the Pods that are already running for the workload.</p><p>If the load decreases, and the number of Pods is above the configured minimum, the HorizontalPodAutoscaler instructs the workload resource (the Deployment, StatefulSet, or other similar resource) to scale back down.</p><h2 id=1-setup-hpa>1. Setup HPA<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Inspect the <code>~/workshop/k3s/hpa.yaml</code> file and validate the contents using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/k3s/hpa.yaml</span></span></code></pre></div><p>This file contains the configuration for the Horizontal Pod Autoscaler and will create a new HPA for the <code>php-apache</code> deployment.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>autoscaling/v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HorizontalPodAutoscaler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cpu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class=m>50</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Utilization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>memory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class=m>75</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Utilization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scaleTargetRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>php-apache</span></span></span></code></pre></div><p>Once deployed, <code>php-apache</code> will autoscale when either the average CPU usage goes above 50% or the average memory usage for the deployment goes above 75%, with a minimum of 1 pod and a maximum of 4 pods.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl apply -f ~/workshop/k3s/hpa.yaml</span></span></code></pre></div><h2 id=2-validate-hpa>2. Validate HPA<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>kubectl get hpa -n apache</span></span></code></pre></div><p>Go to the <strong>Workloads</strong> or <strong>Node Detail</strong> tab in Kubernetes and check the HPA deployment.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Questions</summary><div class=box-content><ol><li>How many additional <code>php-apache-x</code> pods have been created?</li><li>Which metrics in the <strong>Apache web servers (OTel) Navigator</strong> have significantly increased again?</li></ol></div></details><h2 id=3-increase-the-hpa-replica-count>3. Increase the HPA replica count<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Increase the <code>maxReplicas</code> to 8</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl edit hpa php-apache -n apache</span></span></code></pre></div><p>Save the changes you have made. (Hint: Use <code>Esc</code> followed by <code>:wq!</code> to save your changes).</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Questions</summary><div class=box-content><ol><li><p>How many pods are now running?</p></li><li><p>How many are pending?</p></li><li><p>Why are they pending?</p></li></ol></div></details><p><strong>Congratulations!</strong> You have completed the workshop.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-workshops>OpenTelemetry Collector Workshops</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-e65c7b709831a670577a7de19f50cb40><div class=card-content><div class=card-title id=R-card-e65c7b709831a670577a7de19f50cb40><a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/index.html>OpenTelemetry Collector Concepts</a></div><div class=card-content-text>Learn the concepts of the OpenTelemetry Collector and how to use it to send data to Splunk Observability Cloud.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-4def5072ecbdcbe60d20fc1d1eedf818><div class=card-content><div class=card-title id=R-card-4def5072ecbdcbe60d20fc1d1eedf818><a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/index.html>Advanced OpenTelemetry Collector</a></div><div class=card-content-text>Practice setting up the OpenTelemetry Collector configuration from scratch and go though several advanced configuration scenarios&rsquo;s.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of OpenTelemetry Collector Workshops</h1><article class=default><header class=headline></header><h1 id=making-your-observability-cloud-native-with-opentelemetry>Making Your Observability Cloud Native With OpenTelemetry</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 hour</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><h2 id=abstract>Abstract<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Organizations getting started with OpenTelemetry may begin by sending data directly to an observability backend. While this works well for initial testing, using the OpenTelemetry collector as part of your observability architecture provides numerous benefits and is recommended for any production deployment.</p><p>In this workshop, we will be focusing on using the OpenTelemetry collector and starting with the fundamentals of configuring the receivers, processors, and exporters ready to use with Splunk Observability Cloud. The journey will take attendees from novices to being able to start adding custom components to help solve for their business observability needs for their distributed platform.</p><h3 id=ninja-sections>Ninja Sections<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Throughout the workshop there will be expandable <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong> Sections</span></span>, these will be more hands on and go into further technical detail that you can explore within the workshop or in your own time.</p><p>Please note that the content in these sections may go out of date due to the frequent development being made to the OpenTelemetry project. Links will be provided in the event details are out of sync, please let us know if you spot something that needs updating.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Test Me!</span></span></summary><div class=box-content><p><strong>By completing this workshop you will officially be an OpenTelemetry Collector Ninja!</strong></p></div></details><hr><h2 id=target-audience>Target Audience<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This interactive workshop is for developers and system administrators who are interested in learning more about architecture and deployment of the OpenTelemetry Collector.</p><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Attendees should have a basic understanding of data collection</li><li>Command line and vim/vi experience.</li><li>A instance/host/VM running Ubuntu 20.04 LTS or 22.04 LTS.<ul><li>Minimum requirements are an AWS/EC2 t2.micro (1 CPU, 1GB RAM, 8GB Storage)</li></ul></li></ul><h2 id=learning-objectives>Learning Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By the end of this talk, attendees will be able to:</p><ul><li>Understand the components of OpenTelemetry</li><li>Use receivers, processors, and exporters to collect and analyze data</li><li>Identify the benefits of using OpenTelemetry</li><li>Build a custom component to solve their business needs</li></ul><h2 id=opentelemetry-architecture>OpenTelemetry Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><pre class="mermaid actionbar-wrapper align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of OpenTelemetry Collector Concepts</h1><article class=default><header class=headline></header><h1 id=installing-opentelemetry-collector-contrib>Installing OpenTelemetry Collector Contrib</h1><h2 id=download-the-opentelemetry-collector-contrib-distribution>Download the OpenTelemetry Collector Contrib distribution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The first step in installing the Open Telemetry Collector is downloading it. For our lab, we will use the <code>wget</code> command to download the <code>.deb</code> package from the OpenTelemetry Github repository.</p><p>Obtain the <code>.deb</code> package for your platform from the <a href=https://github.com/open-telemetry/opentelemetry-collector-releases/releases rel=external><strong>OpenTelemetry Collector Contrib releases page</strong></a></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.111.0/otelcol-contrib_0.111.0_linux_amd64.deb</span></span></code></pre></div><h2 id=install-the-opentelemetry-collector-contrib-distribution>Install the OpenTelemetry Collector Contrib distribution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install the <code>.deb</code> package using <code>dpkg</code>. Take a look at the <strong>dpkg Output</strong> tab below to see what the example output of a successful install will look like:</p><div class=tab-panel data-tab-group=R-tabs-37f892d9463fdd93b12a65ec85e0e878><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a1c49ef0d80dba0978db27d5215f2c58 aria-expanded=true data-tab-item=R-tab-349838fb1d851d3e2014b9fe39203275 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-37f892d9463fdd93b12a65ec85e0e878","R-tab-349838fb1d851d3e2014b9fe39203275")'>
<span class=tab-nav-text>Install</span>
</button>
<button aria-controls=R-tab-id-59897d43d212c975ad1508c2f7d39004 aria-expanded=false data-tab-item=R-tab-88b74acfc7be57ced2480fc5f7165e87 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-37f892d9463fdd93b12a65ec85e0e878","R-tab-88b74acfc7be57ced2480fc5f7165e87")'>
<span class=tab-nav-text>dpkg Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a1c49ef0d80dba0978db27d5215f2c58 data-tab-item=R-tab-349838fb1d851d3e2014b9fe39203275 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo dpkg -i otelcol-contrib_0.111.0_linux_amd64.deb</span></span></code></pre></div></div></div><div id=R-tab-id-59897d43d212c975ad1508c2f7d39004 data-tab-item=R-tab-88b74acfc7be57ced2480fc5f7165e87 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Selecting previously unselected package otelcol-contrib.
</span></span><span class=line><span class=cl>(Reading database ... 89232 files and directories currently installed.)
</span></span><span class=line><span class=cl>Preparing to unpack otelcol-contrib_0.111.0_linux_amd64.deb ...
</span></span><span class=line><span class=cl>Unpacking otelcol-contrib (0.111.0) ...
</span></span><span class=line><span class=cl>Setting up otelcol-contrib (0.111.0) ...
</span></span><span class=line><span class=cl>Created symlink /etc/systemd/system/multi-user.target.wants/otelcol-contrib.service ‚Üí /lib/systemd/system/otelcol-contrib.service.</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Installation</h1><article class=default><header class=headline></header><h1 id=installing-opentelemetry-collector-contrib>Installing OpenTelemetry Collector Contrib</h1><h2 id=confirm-the-collector-is-running>Confirm the Collector is running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The collector should now be running. We will verify this as root using <code>systemctl</code> command. To exit the status just press <code>q</code>.</p><div class=tab-panel data-tab-group=R-tabs-884b22553ec21244e678a4f5a1db7f3e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-543f881fb3fefedbbcbdd9b2514c0e8d aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-884b22553ec21244e678a4f5a1db7f3e","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-1792e9f37bce9cf4191a8ec67ec56e96 aria-expanded=false data-tab-item=R-tab-ea8cb5b4ea61afc69dea0097cb212fb6 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-884b22553ec21244e678a4f5a1db7f3e","R-tab-ea8cb5b4ea61afc69dea0097cb212fb6")'>
<span class=tab-nav-text>Status Output</span></button></div><div class=tab-content-container><div id=R-tab-id-543f881fb3fefedbbcbdd9b2514c0e8d data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl status otelcol-contrib</span></span></code></pre></div></div></div><div id=R-tab-id-1792e9f37bce9cf4191a8ec67ec56e96 data-tab-item=R-tab-ea8cb5b4ea61afc69dea0097cb212fb6 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>‚óè otelcol-contrib.service - OpenTelemetry Collector Contrib
</span></span><span class=line><span class=cl>     Loaded: loaded (/lib/systemd/system/otelcol-contrib.service; enabled; vendor preset: enabled)
</span></span><span class=line><span class=cl>     Active: active (running) since Mon 2024-10-07 10:27:49 BST; 52s ago
</span></span><span class=line><span class=cl>   Main PID: 17113 (otelcol-contrib)
</span></span><span class=line><span class=cl>      Tasks: 13 (limit: 19238)
</span></span><span class=line><span class=cl>     Memory: 34.8M
</span></span><span class=line><span class=cl>        CPU: 155ms
</span></span><span class=line><span class=cl>     CGroup: /system.slice/otelcol-contrib.service
</span></span><span class=line><span class=cl>             ‚îî‚îÄ17113 /usr/bin/otelcol-contrib --config=/etc/otelcol-contrib/config.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Descriptor:
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Name: up
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Description: The scraping was successful
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Unit:
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; DataType: Gauge
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: NumberDataPoints #0
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: StartTimestamp: 1970-01-01 00:00:00 +0000 UTC
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Timestamp: 2024-10-07 09:28:36.942 +0000 UTC
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Value: 1.000000
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:         {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;metrics&#34;, &#34;name&#34;: &#34;debug&#34;}</span></span></code></pre></div></div></div></div></div><p>Because we will be making multiple configuration file changes, setting environment variables and restarting the collector, we need to stop the collector service and disable it from starting on boot.</p><div class=tab-panel data-tab-group=R-tabs-bbff901b5a5c27e94cd88e7a55d03505><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ff76c81bf674287f064c2e3f836f412b aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bbff901b5a5c27e94cd88e7a55d03505","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-ff76c81bf674287f064c2e3f836f412b data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl stop otelcol-contrib <span class=o>&amp;&amp;</span> sudo systemctl disable otelcol-contrib</span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Build your own collector using Open Telemetry Collector Builder (ocb)</span></span></summary><div class=box-content><p>For this part we will require the following installed on your system:</p><ul><li><p>Golang (latest version)</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /tmp
</span></span><span class=line><span class=cl>wget https://golang.org/dl/go1.20.linux-amd64.tar.gz
</span></span><span class=line><span class=cl>sudo tar -C /usr/local -xzf go1.20.linux-amd64.tar.gz</span></span></code></pre></div><p>Edit <code>.profile</code> and add the following environment variables:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOROOT</span><span class=o>=</span>/usr/local/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOPATH</span><span class=o>=</span><span class=nv>$HOME</span>/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$GOPATH</span>/bin:<span class=nv>$GOROOT</span>/bin:<span class=nv>$PATH</span></span></span></code></pre></div><p>Renew your shell session:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> ~/.profile</span></span></code></pre></div><p>Check Go version:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go version</span></span></code></pre></div></li><li><p>ocb installed</p><ul><li><p>Download the ocb binary from the <a href=https://github.com/open-telemetry/opentelemetry-collector/releases/tag/cmd%2Fbuilder%2Fv0.80.0 rel=external>project releases</a>
and run the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mv ocb_0.80.0_darwin_arm64 /usr/bin/ocb
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> /usr/bin/ocb</span></span></code></pre></div><p>An alternative approach would be to use the golang tool chain to build the binary locally by doing:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go install go.opentelemetry.io/collector/cmd/builder@v0.80.0
</span></span><span class=line><span class=cl>mv <span class=k>$(</span>go env GOPATH<span class=k>)</span>/bin/builder /usr/bin/ocb</span></span></code></pre></div></li></ul></li><li><p>(Optional) Docker</p></li></ul><h2 id=why-build-your-own-collector>Why build your own collector?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The default distribution of the collector (core and contrib) either contains too much or too little in what they have to offer.</p><p>It is also not advised to run the contrib collector in your production environments due to the amount of components installed which more than likely are not needed by your deployment.</p><h2 id=benefits-of-building-your-own-collector>Benefits of building your own collector?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>When creating your own collector binaries, (commonly referred to as distribution), means you build what you need.</p><p>The benefits of this are:</p><ol><li>Smaller sized binaries</li><li>Can use existing go scanners for vulnerabilities</li><li>Include internal components that can tie in with your organization</li></ol><h2 id=considerations-for-building-your-collector>Considerations for building your collector?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now, this would not be a ü•∑ Ninja zone if it didn&rsquo;t come with some drawbacks:</p><ol><li>Go experience is recommended if not required</li><li><strong>No</strong> Splunk support</li><li>Responsibility for distribution and lifecycle management</li></ol><p>It is important to note that the project is working towards stability but it does not mean changes made will not break your workflow. The team at Splunk provides increased support and a higher level of stability so they can provide a curated experience helping you with your deployment needs.</p><h2 id=the-ninja-zone>The Ninja Zone<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once you have all the required tools installed to get started, you will need to create a new file named <code>otelcol-builder.yaml</code> and we will follow this directory structure:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ otelcol-builder.yaml</span></span></code></pre></div><p>Once we have the file created, we need to add a list of components for it to install with some additional metadata.</p><p>For this example, we are going to create a builder manifest that will install only the components we need for the introduction config:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-ninja</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>A custom build of the Open Telemetry Collector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/ballastextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/zpagesextension  v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/httpforwarder v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/splunkhecexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/signalfxexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/memorylimiterprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/hostmetricsreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/zipkinreceiver v0.80.0</span></span></span></code></pre></div><p>Once the yaml file has been updated for the <em>ocb</em>, then run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ocb --config<span class=o>=</span>otelcol-builder.yaml</span></span></code></pre></div><p>Which leave you with the following directory structure:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>‚îú‚îÄ‚îÄ dist
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components.go
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components_test.go
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ go.mod
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ go.sum
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ main.go
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ main_others.go
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îú‚îÄ‚îÄ main_windows.go
</span></span><span class=line><span class=cl>‚îÇ¬†¬† ‚îî‚îÄ‚îÄ otelcol-ninja
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ otelcol-builder.yaml</span></span></code></pre></div><h3 id=references>References<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><a href=https://opentelemetry.io/docs/collector/custom-collector/ rel=external>https://opentelemetry.io/docs/collector/custom-collector/</a></li></ol></div></details><hr><h2 id=default-configuration>Default configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>OpenTelemetry is configured through YAML files. These files have default configurations that we can modify to meet our needs. Let&rsquo;s look at the default configuration that is supplied:</p><div class=tab-panel data-tab-group=R-tabs-5c41c34449170517946b17b6fa90df2e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6aba146ab566ccfb2f03a3aca5970ac3 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5c41c34449170517946b17b6fa90df2e","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-65b4e455a84c880649a387b68883c76f aria-expanded=false data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5c41c34449170517946b17b6fa90df2e","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-6aba146ab566ccfb2f03a3aca5970ac3 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-65b4e455a84c880649a387b68883c76f data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div><p>Congratulations! You have successfully downloaded and installed the OpenTelemetry Collector. You are well on your way to becoming an OTel Ninja. But first let&rsquo;s walk through configuration files and different distributions of the OpenTelemetry Collector.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>Splunk does provide its own, fully supported, distribution of the OpenTelemetry Collector. This distribution is available to install from the <a href=https://github.com/signalfx/splunk-otel-collector rel=external><strong>Splunk GitHub Repository</strong></a> or via a wizard in Splunk Observability Cloud that will build out a simple installation script to copy and paste. This distribution includes many additional features and enhancements that are not available in the OpenTelemetry Collector Contrib distribution.</p><ul><li>The Splunk Distribution of the OpenTelemetry Collector is production-tested; it is in use by the majority of customers in their production environments.</li><li>Customers that use our distribution can receive direct help from official Splunk support within SLAs.</li><li>Customers can use or migrate to the Splunk Distribution of the OpenTelemetry Collector without worrying about future breaking changes to its core configuration experience for metrics and traces collection (OpenTelemetry logs collection configuration is in beta). There may be breaking changes to the Collector&rsquo;s metrics.</li></ul></div></details><p>We will now walk through each section of the configuration file and modify it to send host metrics to Splunk Observability Cloud.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><p>Now that we have the OpenTelemetry Collector installed, let&rsquo;s take a look at extensions for the OpenTelemetry Collector. Extensions are optional and available primarily for tasks that do not involve processing telemetry data. Examples of extensions include health monitoring, service discovery, and data forwarding.</p><pre class="mermaid actionbar-wrapper align-center">
%%{
  init:{
    &#34;theme&#34;: &#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style E fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Extensions</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=health-check>Health Check<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Extensions are configured in the same <code>config.yaml</code> file that we referenced in the installation step. Let&rsquo;s edit the <code>config.yaml</code> file and configure the extensions. Note that the <strong>pprof</strong> and <strong>zpages</strong> extensions are already configured in the default <code>config.yaml</code> file. For the purpose of this workshop, we will only be updating the <strong>health_check</strong> extension to expose the port on all network interfaces on which we can access the health of the collector.</p><div class=tab-panel data-tab-group=R-tabs-4bd32079937ed2150479f9120a80ff04><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-47c75478999f695238533143eb8dd4c0 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4bd32079937ed2150479f9120a80ff04","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-47c75478999f695238533143eb8dd4c0 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-28280ca1d80f3c87fd2c788edc3cb639><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ee1134d5f9e0c8d6eee1be277ea11dc7 aria-expanded=true data-tab-item=R-tab-152f0ce564aa5e1309a89e848db53185 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-28280ca1d80f3c87fd2c788edc3cb639","R-tab-152f0ce564aa5e1309a89e848db53185")'>
<span class=tab-nav-text>Extensions Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-ee1134d5f9e0c8d6eee1be277ea11dc7 data-tab-item=R-tab-152f0ce564aa5e1309a89e848db53185 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span></span></span></code></pre></div></div></div></div></div><p>Start the collector:</p><div class=tab-panel data-tab-group=R-tabs-efc523bb527abe6525a3e00833bf0d2d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b0887a33f8ae9089a6f7b914e42845db aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-efc523bb527abe6525a3e00833bf0d2d","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-b0887a33f8ae9089a6f7b914e42845db data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><p>This extension enables an HTTP URL that can be probed to check the status of the OpenTelemetry Collector. This extension can be used as a liveness and/or readiness probe on Kubernetes. To learn more about the <code>curl</code> command, check out the <a href=https://curl.se/docs/manpage.html rel=external>curl man page</a>.</p><p>Open a new terminal session and SSH into your instance to run the following command:</p><div class=tab-panel data-tab-group=R-tabs-1f21bc01309348aa08e1dbf6ee303678><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6256b93e119fb0554a972ddf9417dbdc aria-expanded=true data-tab-item=R-tab-e2d1c201ce0c8c47d452167742abc308 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1f21bc01309348aa08e1dbf6ee303678","R-tab-e2d1c201ce0c8c47d452167742abc308")'>
<span class=tab-nav-text>curl Command</span>
</button>
<button aria-controls=R-tab-id-8c0c2747b02fe8bb9362bcf1af76d362 aria-expanded=false data-tab-item=R-tab-6e431ae9119cd9664129d3c3aafa7ce3 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1f21bc01309348aa08e1dbf6ee303678","R-tab-6e431ae9119cd9664129d3c3aafa7ce3")'>
<span class=tab-nav-text>curl Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6256b93e119fb0554a972ddf9417dbdc data-tab-item=R-tab-e2d1c201ce0c8c47d452167742abc308 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:13133</span></span></code></pre></div></div></div><div id=R-tab-id-8c0c2747b02fe8bb9362bcf1af76d362 data-tab-item=R-tab-6e431ae9119cd9664129d3c3aafa7ce3 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;status&#34;:&#34;Server available&#34;,&#34;upSince&#34;:&#34;2024-10-07T11:00:08.004685295+01:00&#34;,&#34;uptime&#34;:&#34;12.56420005s&#34;}</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=performance-profiler>Performance Profiler<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/extension/pprofextension/README.md rel=external><strong>Performance Profiler</strong></a> extension enables the golang net/http/pprof endpoint. This is typically used by developers to collect performance profiles and investigate issues with the service. <strong>We will not be covering this in this workshop</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=zpages>zPages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/extension/zpagesextension/README.md rel=external><strong>zPages</strong></a> are an in-process alternative to external exporters. When included, they collect and aggregate tracing and metrics information in the background; this data is served on web pages when requested. zPages are an extremely useful diagnostic feature to ensure the collector is running as expected.</p><div class=tab-panel data-tab-group=R-tabs-1b34f13232d2e2c21542f24b3b352879><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c85779ff2f0b9debc3abf0f37f3edd26 aria-expanded=true data-tab-item=R-tab-552e9e5a9146ffc544b495bfe6a66c36 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1b34f13232d2e2c21542f24b3b352879","R-tab-552e9e5a9146ffc544b495bfe6a66c36")'>
<span class=tab-nav-text>ServiceZ</span>
</button>
<button aria-controls=R-tab-id-b5f1265818adf7ea3f1248448263aa10 aria-expanded=false data-tab-item=R-tab-41646adfc5c13ab129b70c2240c1db3d class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1b34f13232d2e2c21542f24b3b352879","R-tab-41646adfc5c13ab129b70c2240c1db3d")'>
<span class=tab-nav-text>PipelineZ</span>
</button>
<button aria-controls=R-tab-id-dc62a66078dc188c6a6dd4ab7f92c830 aria-expanded=false data-tab-item=R-tab-3fbf781f7e065ca41160f534cc231df0 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1b34f13232d2e2c21542f24b3b352879","R-tab-3fbf781f7e065ca41160f534cc231df0")'>
<span class=tab-nav-text>ExtensionZ</span></button></div><div class=tab-content-container><div id=R-tab-id-c85779ff2f0b9debc3abf0f37f3edd26 data-tab-item=R-tab-552e9e5a9146ffc544b495bfe6a66c36 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>ServiceZ</strong> gives an overview of the collector services and quick access to the pipelinez, extensionz, and featurez zPages. The page also provides build and runtime information.</p><p>Example URL: <a href=http://localhost:55679/debug/servicez rel=external><strong>http://localhost:55679/debug/servicez</strong></a> (change <code>localhost</code> to reflect your own environment).</p><p><a href=#R-image-76e3cc49c436a55f0dfda87bfa8b2488 class=lightbox-link><img alt=ServiceZ class="lazy lightbox figure-image" loading=lazy src=../../images/servicez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-76e3cc49c436a55f0dfda87bfa8b2488><img alt=ServiceZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/servicez.png></a></p></div></div><div id=R-tab-id-b5f1265818adf7ea3f1248448263aa10 data-tab-item=R-tab-41646adfc5c13ab129b70c2240c1db3d class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>PipelineZ</strong> provides insights on the running pipelines running in the collector. You can find information on type, if data is mutated, and you can also see information on the receivers, processors and exporters that are used for each pipeline.</p><p>Example URL: <a href=http://localhost:55679/debug/pipelinez rel=external><strong>http://localhost:55679/debug/pipelinez</strong></a> (change <code>localhost</code> to reflect your own environment).</p><p><a href=#R-image-78ad7b4fa7fb2c33a00d2570dd3c1f70 class=lightbox-link><img alt=PipelineZ class="lazy lightbox figure-image" loading=lazy src=../../images/pipelinez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-78ad7b4fa7fb2c33a00d2570dd3c1f70><img alt=PipelineZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/pipelinez.png></a></p></div></div><div id=R-tab-id-dc62a66078dc188c6a6dd4ab7f92c830 data-tab-item=R-tab-3fbf781f7e065ca41160f534cc231df0 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>ExtensionZ</strong> shows the extensions that are active in the collector.</p><p>Example URL: <a href=http://localhost:55679/debug/extensionz rel=external><strong>http://localhost:55679/debug/extensionz</strong></a> (change <code>localhost</code> to reflect your own environment).</p><p><a href=#R-image-388b08d0dd7f9e1b937a81d19212caaa class=lightbox-link><img alt=ExtensionZ class="lazy lightbox figure-image" loading=lazy src=../../images/extensionz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-388b08d0dd7f9e1b937a81d19212caaa><img alt=ExtensionZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/extensionz.png></a></p></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Improve data durability with storage extension</span></span></summary><div class=box-content><p>For this, we will need to validate that our distribution has the <code>file_storage</code> extension installed. This can be done by running the command <code>otelcol-contrib components</code> which should show results like:</p><div class=tab-panel data-tab-group=R-tabs-385c9146482eec674edcc0ff32d5c1be><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0f10cd9486e2f21a093779e4c748a4db aria-expanded=true data-tab-item=R-tab-293717097f4a71a9db50f219169437b8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-385c9146482eec674edcc0ff32d5c1be","R-tab-293717097f4a71a9db50f219169437b8")'>
<span class=tab-nav-text>Truncated Output</span>
</button>
<button aria-controls=R-tab-id-3f56c00a857bc49758dd6ad51b6e33fc aria-expanded=false data-tab-item=R-tab-6d20673ef09b9c1f8566526724ee50d7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-385c9146482eec674edcc0ff32d5c1be","R-tab-6d20673ef09b9c1f8566526724ee50d7")'>
<span class=tab-nav-text>Full Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0f10cd9486e2f21a093779e4c748a4db data-tab-item=R-tab-293717097f4a71a9db50f219169437b8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>file_storage</span></span></span></code></pre></div></div></div><div id=R-tab-id-3f56c00a857bc49758dd6ad51b6e33fc data-tab-item=R-tab-6d20673ef09b9c1f8566526724ee50d7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>buildinfo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>OpenTelemetry Collector Contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus_simple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>receiver_creator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodbatlas</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>vcenter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>snmp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>expvar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jmx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>udplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafkametrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memcached</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowseventlog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsecscontainermetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>iis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nsxt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>aerospike</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>httpcheck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sobjects</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>hostmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>statsd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudfoundry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>collectd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>couchdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kubeletstats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>journald</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>riak</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>active_directory_ds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlquery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowsperfcounters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>flinkmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>podman_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>wavefront</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_events</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>rabbitmq</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlserver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>solace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tcplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscontainerinsightreceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsfirehose</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bigip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filelog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudspanner</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudflare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>docker_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azureeventhub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>fluentforward</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlpjsonfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>syslog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cumulativetodelta</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbyattrs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbytrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sattributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>experimental_metricsgeneration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>metricstransform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>routing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>deltatorate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>spanmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>span</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redaction</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>servicegraph</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>transform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>probabilistic_sampler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tail_sampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>f5cloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mezmo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>dynatrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logging</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuredataexplorer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuremonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>instana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loadbalancing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sentry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tanzuobservability</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>alibabacloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>clickhouse</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheusremotewrite</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatchlogs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger_thrift</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logzio</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sumologic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlemanagedprometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awskinesis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>coralogix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logicmonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tencentcloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsemf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zpages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bearertokenauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oidc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>host_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sigv4auth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file_storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_ballast</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>health_check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oauth2client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsproxy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>http_forwarder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaegerremotesampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pprof</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>asapclient</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>basicauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>headers_setter</span></span></span></code></pre></div></div></div></div></div><p>This extension provides exporters the ability to queue data to disk in the event that exporter is unable to send data to the configured endpoint.</p><p>In order to configure the extension, you will need to update your config to include the information below. First, be sure to create a /tmp/otel-data directory and give it read/write permissions:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file_storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>compaction</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_start</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_rebound</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_needed_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_trigger_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages, file_storage]</span></span></span></code></pre></div><h2 id=why-queue-data-to-disk>Why queue data to disk?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This allows the collector to weather network interruptions (and even collector restarts) to ensure data is sent to the upstream provider.</p><h2 id=considerations-for-queuing-data-to-disk>Considerations for queuing data to disk?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There is a potential that this could impact data throughput performance due to disk performance.</p><h3 id=references>References<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><a href=https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583 rel=external>https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage rel=external>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage</a></li></ol></div></details><hr><h2 id=configuration-check-in>Configuration Check-in<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we&rsquo;ve covered extensions, let&rsquo;s check our configuration changes.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-1d30735d6198a2bfb33b243aeb71ba43><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-279eb9372b578680fca48508a2e4e7de aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1d30735d6198a2bfb33b243aeb71ba43","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-279eb9372b578680fca48508a2e4e7de data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=hl><span class=lnt> 5
</span></span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>Now that we have reviewed extensions, let&rsquo;s dive into the data pipeline portion of the workshop. A pipeline defines a path the data follows in the Collector starting from reception, moving to further processing or modification, and finally exiting the Collector via exporters.</p><p>The data pipeline in the OpenTelemetry Collector is made up of <strong>receivers</strong>, <strong>processors</strong>, and <strong>exporters</strong>. We will first start with receivers.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><p>Welcome to the receiver portion of the workshop! This is the starting point of the data pipeline of the OpenTelemetry Collector. Let&rsquo;s dive in.</p><p>A receiver, which can be push or pull based, is how data gets into the Collector. Receivers may support one or more data sources. Generally, a receiver accepts data in a specified format, translates it into the internal format and passes it to processors and exporters defined in the applicable pipelines.</p><pre class="mermaid actionbar-wrapper align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style M fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Receivers</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=host-metrics-receiver>Host Metrics Receiver<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/hostmetricsreceiver/README.md rel=external><strong>The Host Metrics Receiver</strong></a> generates metrics about the host system scraped from various sources. This is intended to be used when the collector is deployed as an agent which is what we will be doing in this workshop.</p><p>Let&rsquo;s update the <code>/etc/otel-contrib/config.yaml</code> file and configure the <strong>hostmetrics</strong> receiver. Insert the following YAML under the <strong>receivers</strong> section, taking care to indent by two spaces.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div><div class=tab-panel data-tab-group=R-tabs-84c0a247f4aeef54fd889541d9b56266><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6b1010cdb741892cf67c1ffdb37ebcc2 aria-expanded=true data-tab-item=R-tab-d4d9df34006b2c5d7545d2f1f4e741e2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-84c0a247f4aeef54fd889541d9b56266","R-tab-d4d9df34006b2c5d7545d2f1f4e741e2")'>
<span class=tab-nav-text>Host Metrics Receiver Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-6b1010cdb741892cf67c1ffdb37ebcc2 data-tab-item=R-tab-d4d9df34006b2c5d7545d2f1f4e741e2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=prometheus-receiver>Prometheus Receiver<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will also notice another receiver called <strong>prometheus</strong>. <a href=https://prometheus.io/docs/introduction/overview/ rel=external><strong>Prometheus</strong></a> is an open-source toolkit used by the OpenTelemetry Collector. This receiver is used to scrape metrics from the OpenTelemetry Collector itself. These metrics can then be used to monitor the health of the collector.</p><p>Let&rsquo;s modify the <code>prometheus</code> receiver to clearly show that it is for collecting metrics from the collector itself. By changing the name of the receiver from <code>prometheus</code> to <code>prometheus/internal</code>, it is now much clearer as to what that receiver is doing. Update the configuration file to look like this:</p><div class=tab-panel data-tab-group=R-tabs-e7f5a46a6154176ce5677580939e9b1d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-319c8c8e1372994d856dec774d2b6f31 aria-expanded=true data-tab-item=R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e7f5a46a6154176ce5677580939e9b1d","R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2")'>
<span class=tab-nav-text>Prometheus Receiver Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-319c8c8e1372994d856dec774d2b6f31 data-tab-item=R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class="line hl"><span class=cl><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span></span></span></code></pre></div></div></div></div></div><h2 id=example-dashboard---prometheus-metrics>Example Dashboard - Prometheus metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The following screenshot shows an example dashboard of some of the metrics the Prometheus internal receiver collects from the OpenTelemetry Collector. Here, we can see accepted and sent spans, metrics and log records.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>The following screenshot is an out-of-the-box (OOTB) dashboard from Splunk Observability Cloud that allows you to easily monitor your Splunk OpenTelemetry Collector install base.</p></div></details><p><a href=#R-image-bbcb60575d804fcc9ad57d004c97e68f class=lightbox-link><img alt=otel-charts class="lazy lightbox figure-image" loading=lazy src=../../images/otel-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bbcb60575d804fcc9ad57d004c97e68f><img alt=otel-charts class="lazy lightbox lightbox-image" loading=lazy src=../../images/otel-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=other-receivers>Other Receivers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will notice in the default configuration there are other receivers: <strong>otlp</strong>, <strong>opencensus</strong>, <strong>jaeger</strong> and <strong>zipkin</strong>. These are used to receive telemetry data from other sources. We will not be covering these receivers in this workshop and they can be left as they are.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Create receivers dynamically</span></span></summary><div class=box-content><p>To help observe short lived tasks like docker containers, kubernetes pods, or ssh sessions, we can use the <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator rel=external>receiver creator</a> with <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/observer rel=external>observer extensions</a> to create a new receiver as these services start up.</p><h2 id=what-do-we-need>What do we need?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In order to start using the receiver creator and its associated observer extensions, they will need to be part of your collector build manifest.</p><p>See <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/1-installation/index.html>installation</a> for the details.</p><h2 id=things-to-consider>Things to consider?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Some short lived tasks may require additional configuration such as <em>username</em>, and <em>password</em>.
These values can be referenced via <a href=https://opentelemetry.io/docs/collector/configuration/#configuration-environment-variables rel=external>environment variables</a>,
or use a scheme expand syntax such as <code>${file:./path/to/database/password}</code>.
Please adhere to your organisation&rsquo;s secret practices when taking this route.</p><h2 id=the-ninja-zone>The Ninja Zone<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There are only two things needed for this ninja zone:</p><ol><li>Make sure you have added receiver creater and observer extensions to the builder manifest.</li><li>Create the config that can be used to match against discovered endpoints.</li></ol><p>To create the templated configurations, you can do the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>host_observer]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;port&#34; &amp;&amp; port == 6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${env:HOST_REDIS_PASSWORD}</span></span></span></code></pre></div><p>For more examples, refer to these <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator#examples rel=external>receiver creator&rsquo;s examples</a>.</p></div></details><hr><h2 id=configuration-check-in>Configuration Check-in<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ve now covered receivers, so let&rsquo;s now check our configuration changes.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-0804aa8eee1d77c869a93f6bf0947918><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-98aa54a9db5a6d785407ca240ddbe3c2 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0804aa8eee1d77c869a93f6bf0947918","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-98aa54a9db5a6d785407ca240ddbe3c2 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=hl><span class=lnt>13
</span></span><span class=hl><span class=lnt>14
</span></span><span class=hl><span class=lnt>15
</span></span><span class=hl><span class=lnt>16
</span></span><span class=hl><span class=lnt>17
</span></span><span class=hl><span class=lnt>18
</span></span><span class=hl><span class=lnt>19
</span></span><span class=hl><span class=lnt>20
</span></span><span class=hl><span class=lnt>21
</span></span><span class=hl><span class=lnt>22
</span></span><span class=hl><span class=lnt>23
</span></span><span class=hl><span class=lnt>24
</span></span><span class=hl><span class=lnt>25
</span></span><span class=hl><span class=lnt>26
</span></span><span class=hl><span class=lnt>27
</span></span><span class=hl><span class=lnt>28
</span></span><span class=hl><span class=lnt>29
</span></span><span class=hl><span class=lnt>30
</span></span><span class=hl><span class=lnt>31
</span></span><span class=hl><span class=lnt>32
</span></span><span class=hl><span class=lnt>33
</span></span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=hl><span class=lnt>45
</span></span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>Now that we have reviewed how data gets into the OpenTelemetry Collector through receivers, let&rsquo;s now take a look at how the Collector processes the received data.</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>As the <code>/etc/otelcol-contrib/config.yaml</code> is not complete, please <strong>do not</strong> attempt to restart the collector at this point.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/README.md rel=external><strong>Processors</strong></a> are run on data between being received and being exported. Processors are optional though some are recommended. There are <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor rel=external><strong>a large number of processors</strong></a> included in the OpenTelemetry contrib Collector.</p><pre class="mermaid actionbar-wrapper align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Processors fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Processors</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=batch-processor>Batch Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By default, only the <strong>batch</strong> processor is enabled. This processor is used to batch up data before it is exported. This is useful for reducing the number of network calls made to exporters. For this workshop, we will inherit the following defaults which are hard-coded into the Collector:</p><ul><li><code>send_batch_size</code> (default = 8192): Number of spans, metric data points, or log records after which a batch will be sent regardless of the timeout. send_batch_size acts as a trigger and does not affect the size of the batch. If you need to enforce batch size limits sent to the next component in the pipeline see send_batch_max_size.</li><li><code>timeout</code> (default = 200ms): Time duration after which a batch will be sent regardless of size. If set to zero, send_batch_size is ignored as data will be sent immediately, subject to only send_batch_max_size.</li><li><code>send_batch_max_size</code> (default = 0): The upper limit of the batch size. 0 means no upper limit on the batch size. This property ensures that larger batches are split into smaller units. It must be greater than or equal to send_batch_size.</li></ul><p>For more information on the Batch processor, see the <a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/batchprocessor/README.md rel=external><strong>Batch Processor documentation</strong></a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=resource-detection-processor>Resource Detection Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <strong>resourcedetection</strong> processor can be used to detect resource information from the host and append or override the resource value in telemetry data with this information.</p><p>By default, the hostname is set to the FQDN if possible, otherwise, the hostname provided by the OS is used as a fallback. This logic can be changed from using using the <code>hostname_sources</code> configuration option. To avoid getting the FQDN and use the hostname provided by the OS, we will set the <code>hostname_sources</code> to <code>os</code>.</p><div class=tab-panel data-tab-group=R-tabs-ea76f5d43819e11ecdd155a8438b00ef><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-92fc11e07e553f5c7ba3371290717247 aria-expanded=true data-tab-item=R-tab-b892811c417d9a038325e7378a05c132 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ea76f5d43819e11ecdd155a8438b00ef","R-tab-b892811c417d9a038325e7378a05c132")'>
<span class=tab-nav-text>System Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-92fc11e07e553f5c7ba3371290717247 data-tab-item=R-tab-b892811c417d9a038325e7378a05c132 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span></span></span></code></pre></div></div></div></div></div><p>If the workshop instance is running on an AWS/EC2 instance we can gather the following tags from the EC2 metadata API (this is not available on other platforms).</p><ul><li><code>cloud.provider ("aws")</code></li><li><code>cloud.platform ("aws_ec2")</code></li><li><code>cloud.account.id</code></li><li><code>cloud.region</code></li><li><code>cloud.availability_zone</code></li><li><code>host.id</code></li><li><code>host.image.id</code></li><li><code>host.name</code></li><li><code>host.type</code></li></ul><p>We will create another processor to append these tags to our metrics.</p><div class=tab-panel data-tab-group=R-tabs-9e59e439297bb4f3d6bfbbe2baa7da70><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4a2b9a676c04bb29e8b4014eb2d7ec4f aria-expanded=true data-tab-item=R-tab-cfb68818ad6985dd73e8c42294095dee class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9e59e439297bb4f3d6bfbbe2baa7da70","R-tab-cfb68818ad6985dd73e8c42294095dee")'>
<span class=tab-nav-text>EC2 Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-4a2b9a676c04bb29e8b4014eb2d7ec4f data-tab-item=R-tab-cfb68818ad6985dd73e8c42294095dee class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=attributes-processor>Attributes Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The attributes processor modifies attributes of a span, log, or metric. This processor also supports the ability to filter and match input data to determine if they should be included or excluded for specified actions.</p><p>It takes a list of actions that are performed in the order specified in the config. The supported actions are:</p><ul><li><code>insert</code>: Inserts a new attribute in input data where the key does not already exist.</li><li><code>update</code>: Updates an attribute in input data where the key does exist.</li><li><code>upsert</code>: Performs insert or update. Inserts a new attribute in input data where the key does not already exist and updates an attribute in input data where the key does exist.</li><li><code>delete</code>: Deletes an attribute from the input data.</li><li><code>hash</code>: Hashes (SHA1) an existing attribute value.</li><li><code>extract</code>: Extracts values using a regular expression rule from the input key to target keys specified in the rule. If a target key already exists, it will be overridden.</li></ul><p>We are going to create an attributes processor to <code>insert</code> a new attribute to all our host metrics called <code>participant.name</code> with a value of your name e.g. <code>marge_simpson</code>.</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>Ensure you replace <code>INSERT_YOUR_NAME_HERE</code> with your name and also ensure you <strong>do not</strong> use spaces in your name.</p></div></details><p>Later on in the workshop, we will use this attribute to filter our metrics in Splunk Observability Cloud.</p><div class=tab-panel data-tab-group=R-tabs-53b3b7593b585fd694d272bed09033e3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3470f7b76cdd74a21ccbe458e2a766c9 aria-expanded=true data-tab-item=R-tab-99b4d39895514cfa032ce15a26ea7099 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-53b3b7593b585fd694d272bed09033e3","R-tab-99b4d39895514cfa032ce15a26ea7099")'>
<span class=tab-nav-text>Attributes Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-3470f7b76cdd74a21ccbe458e2a766c9 data-tab-item=R-tab-99b4d39895514cfa032ce15a26ea7099 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span></span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Using connectors to gain internal insights</span></span></summary><div class=box-content><p>One of the most recent additions to the collector was the notion of a <a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external><strong>connector</strong></a>, which allows you to join the output of one pipeline to the input of another pipeline.</p><p>An example of how this is beneficial is that some services emit metrics based on the amount of datapoints being exported, the number of logs containing an error status,
or the amount of data being sent from one deployment environment. The count connector helps address this for you out of the box.</p><h2 id=why-a-connector-instead-of-a-processor>Why a connector instead of a processor?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A processor is limited in what additional data it can produce considering it has to pass on the data it has processed making it hard to expose additional information. Connectors do not have to emit the data they receive which means they provide an opportunity to create the insights we are after.</p><p>For example, a connector could be made to count the number of logs, metrics, and traces that do not have the deployment environment attribute.</p><p>A very simple example with the output of being able to break down data usage by deployment environment.</p><h2 id=considerations-with-connectors>Considerations with connectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A connector only accepts data exported from one pipeline and receiver by another pipeline, this means you may have to consider how you construct your collector config to take advantage of it.</p><h2 id=references>References<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external><strong>https://opentelemetry.io/docs/collector/configuration/#connectors</strong></a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external><strong>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector</strong></a></li></ol></div></details><hr><h2 id=configuration-check-in>Configuration Check-in<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>That&rsquo;s processors covered, let&rsquo;s check our configuration changes.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-8e7a822b5b864dc0dff868ce7242e2f2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-88a4191aefd6ab2491880485c55cd780 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-8e7a822b5b864dc0dff868ce7242e2f2","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-88a4191aefd6ab2491880485c55cd780 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=hl><span class=lnt> 69
</span></span><span class=hl><span class=lnt> 70
</span></span><span class=hl><span class=lnt> 71
</span></span><span class=hl><span class=lnt> 72
</span></span><span class=hl><span class=lnt> 73
</span></span><span class=hl><span class=lnt> 74
</span></span><span class=hl><span class=lnt> 75
</span></span><span class=hl><span class=lnt> 76
</span></span><span class=hl><span class=lnt> 77
</span></span><span class=hl><span class=lnt> 78
</span></span><span class=hl><span class=lnt> 79
</span></span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-exporters>OpenTelemetry Collector Exporters</h1><p>An exporter, which can be push or pull-based, is how you send data to one or more backends/destinations. Exporters may support one or more data sources.</p><p>For this workshop, we will be using the <a href=https://opentelemetry.io/docs/specs/otel/protocol/exporter/ rel=external><strong>otlphttp</strong></a> exporter. The OpenTelemetry Protocol (OTLP) is a vendor-neutral, standardised protocol for transmitting telemetry data. The OTLP exporter sends data to a server that implements the OTLP protocol. The OTLP exporter supports both <a href=https://grpc.io/ rel=external><strong>gRPC</strong></a> and <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview rel=external><strong>HTTP</strong></a>/<a href=https://www.json.org/json-en.html rel=external><strong>JSON</strong></a> protocols.</p><pre class="mermaid actionbar-wrapper align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Exporters fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Exporters</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-exporters>OpenTelemetry Collector Exporters</h1><h2 id=otlp-http-exporter>OTLP HTTP Exporter<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To send metrics over HTTP to Splunk Observability Cloud, we will need to configure the <strong>otlphttp</strong> exporter.</p><p>Let&rsquo;s edit our <code>/etc/otelcol-contrib/config.yaml</code> file and configure the <strong>otlphttp</strong> exporter. Insert the following YAML under the <strong>exporters</strong> section, taking care to indent by two spaces e.g.</p><p>We will also change the verbosity of the logging exporter to prevent the disk from filling up. The default of <code>detailed</code> is very noisy.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=l>otlphttp/splunk:</span></span></span></code></pre></div><p>Next, we need to define the <code>metrics_endpoint</code> and configure the target URL.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>If you are an attendee at a Splunk-hosted workshop, the instance you are using has already been configured with a Realm environment variable. We will reference that environment variable in our configuration file. Otherwise, you will need to create a new environment variable and set the Realm e.g.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>REALM</span><span class=o>=</span><span class=s2>&#34;us1&#34;</span></span></span></code></pre></div></div></details><p>The URL to use is <code>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</code>. (Splunk has Realms in key geographical locations around the world for data residency).</p><p>The <strong>otlphttp</strong> exporter can also be configured to send traces and logs by defining a target URL for <code>traces_endpoint</code> and <code>logs_endpoint</code> respectively. Configuring these is outside the scope of this workshop.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span></span></span></code></pre></div><p>By default, <code>gzip</code> compression is enabled for all endpoints. This can be disabled by setting <code>compression: none</code> in the exporter configuration. We will leave compression enabled for this workshop and accept the default as this is the most efficient way to send data.</p><p>To send metrics to Splunk Observability Cloud, we need to use an Access Token. This can be done by creating a new token in the Splunk Observability Cloud UI. For more information on how to create a token, see <a href=https://docs.splunk.com/Observability/admin/authentication-tokens/org-tokens.html rel=external>Create a token</a>. The token needs to be of type <strong>INGEST</strong>.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>If you are an attendee at a Splunk-hosted workshop, the instance you are using has already been configured with an Access Token (which has been set as an environment variable). We will reference that environment variable in our configuration file. Otherwise, you will need to create a new token and set it as an environment variable e.g.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ACCESS_TOKEN</span><span class=o>=</span>&lt;replace-with-your-token&gt;</span></span></code></pre></div></div></details><p>The token is defined in the configuration file by inserting <code>X-SF-TOKEN: ${env:ACCESS_TOKEN}</code> under a <code>headers:</code> section:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span></span></span></code></pre></div><h2 id=configuration-check-in>Configuration Check-in<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we&rsquo;ve covered exporters, let&rsquo;s check our configuration changes:</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-778642d0a1276a3a59e57e300b693338><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c4ccc6fe468cf1a2450740dc574c9de1 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-778642d0a1276a3a59e57e300b693338","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-c4ccc6fe468cf1a2450740dc574c9de1 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=hl><span class=lnt> 83
</span></span><span class=hl><span class=lnt> 84
</span></span><span class=hl><span class=lnt> 85
</span></span><span class=hl><span class=lnt> 86
</span></span><span class=hl><span class=lnt> 87
</span></span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-Token</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>Of course, you can easily configure the <code>metrics_endpoint</code> to point to any other solution that supports the <strong>OTLP</strong> protocol.</p><p>Next, we need to enable the receivers, processors and exporters we have just configured in the service section of the <code>config.yaml</code>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><p>The <strong>Service</strong> section is used to configure what components are enabled in the Collector based on the configuration found in the receivers, processors, exporters, and extensions sections.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>If a component is configured, but not defined within the <strong>Service</strong> section then it is <strong>not</strong> enabled.</p></div></details><p>The service section consists of three sub-sections:</p><ul><li>extensions</li><li>pipelines</li><li>telemetry</li></ul><p>In the default configuration, the extension section has been configured to enable <code>health_check</code>, <code>pprof</code> and <code>zpages</code>, which we configured in the Extensions module earlier.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></div><p>So lets configure our Metric Pipeline!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Service</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=hostmetrics-receiver>Hostmetrics Receiver<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you recall from the Receivers portion of the workshop, we defined the <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/3-receivers/index.html#host-metrics-receiver><strong>Host Metrics Receiver</strong></a> to generate metrics about the host system, which are scraped from various sources. To enable the receiver, we must include the <code>hostmetrics</code> receiver in the metrics pipeline.</p><p>In the <code>metrics</code> pipeline, add <code>hostmetrics</code> to the metrics <code>receivers</code> section.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=prometheus-internal-receiver>Prometheus Internal Receiver<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Earlier in the workshop, we also renamed the <code>prometheus</code> receiver to reflect that is was collecting metrics internal to the collector, renaming it to <code>prometheus/internal</code>.</p><p>We now need to enable the <code>prometheus/internal</code> receiver under the metrics pipeline. Update the <code>receivers</code> section to include <code>prometheus/internal</code> under the <code>metrics</code> pipeline:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=resource-detection-processor>Resource Detection Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We also added <code>resourcedetection/system</code> and <code>resourcedetection/ec2</code> processors so that the collector can capture the instance hostname and AWS/EC2 metadata. We now need to enable these two processors under the metrics pipeline.</p><p>Update the <code>processors</code> section to include <code>resourcedetection/system</code> and <code>resourcedetection/ec2</code> under the <code>metrics</code> pipeline:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=attributes-processor>Attributes Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Also in the Processors section of this workshop, we added the <code>attributes/conf</code> processor so that the collector will insert a new attribute called <code>participant.name</code> to all the metrics. We now need to enable this under the metrics pipeline.</p><p>Update the <code>processors</code> section to include <code>attributes/conf</code> under the <code>metrics</code> pipeline:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=otlp-http-exporter>OTLP HTTP Exporter<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the Exporters section of the workshop, we configured the <code>otlphttp</code> exporter to send metrics to Splunk Observability Cloud. We now need to enable this under the metrics pipeline.</p><p>Update the <code>exporters</code> section to include <code>otlphttp/splunk</code> under the <code>metrics</code> pipeline:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug, otlphttp/splunk]</span></span></span></code></pre></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Observing the collector internals</span></span></summary><div class=box-content><p>The collector captures internal signals about its behavior this also includes additional signals from running components.
The reason for this is that components that make decisions about the flow of data need a way to surface that information
as metrics or traces.</p><h2 id=why-monitor-the-collector>Why monitor the collector?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This is somewhat of a chicken and egg problem of, &ldquo;Who is watching the watcher?&rdquo;, but it is important that we can surface this information. Another interesting part of the collector&rsquo;s history is that it existed before the Go metrics&rsquo; SDK was considered stable so the collector exposes a Prometheus endpoint to provide this functionality for the time being.</p><h2 id=considerations>Considerations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Monitoring the internal usage of each running collector in your organization can contribute a significant amount of new Metric Time Series (MTS). The Splunk distribution has curated these metrics for you and would be able to help forecast the expected increases.</p><h2 id=the-ninja-zone>The Ninja Zone<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To expose the internal observability of the collector, some additional settings can be adjusted:</p><div class=tab-panel data-tab-group=R-tabs-b3bffb141d0c3965f832dbbedf4ebe88><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c317a8613e6f8d86acf97fd47db9035e aria-expanded=true data-tab-item=R-tab-b7b7f11d9c9c56d1979ca775dec8b62b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b3bffb141d0c3965f832dbbedf4ebe88","R-tab-b7b7f11d9c9c56d1979ca775dec8b62b")'>
<span class=tab-nav-text>telemetry schema</span>
</button>
<button aria-controls=R-tab-id-f6bcf47dfc27401b381fbce532b6e868 aria-expanded=false data-tab-item=R-tab-55b005c9d9b0488c209e03663dcdc6fa class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b3bffb141d0c3965f832dbbedf4ebe88","R-tab-55b005c9d9b0488c209e03663dcdc6fa")'>
<span class=tab-nav-text>example-config.yml</span></button></div><div class=tab-content-container><div id=R-tab-id-c317a8613e6f8d86acf97fd47db9035e data-tab-item=R-tab-b7b7f11d9c9c56d1979ca775dec8b62b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;info|warn|error&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>&lt;console|json&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_caller</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>error_output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;none|basic|normal|detailed&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Address binds the promethues endpoint to scrape</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;hostname:port&gt;</span></span></span></code></pre></div></div></div><div id=R-tab-id-f6bcf47dfc27401b381fbce532b6e868 data-tab-item=R-tab-55b005c9d9b0488c209e03663dcdc6fa class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>instance.name</span><span class=p>:</span><span class=w> </span><span class=l>${env:INSTANCE}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8888 </span></span></span></code></pre></div></div></div></div></div><h2 id=references>References<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#service rel=external>https://opentelemetry.io/docs/collector/configuration/#service</a></li></ol></div></details><hr><h2 id=final-configuration>Final configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your final configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-297a52cdaa73d8fe42b02eb98b9696ea><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-307c334f778cdfe1bda195a769441059 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-297a52cdaa73d8fe42b02eb98b9696ea","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-307c334f778cdfe1bda195a769441059 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>X-SF-Token</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug, otlphttp/splunk]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>It is recommended that you validate your configuration file before restarting the collector. You can do this by pasting the contents of your <code>config.yaml</code> file into <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>.</p><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><strong>Screenshot</strong></span><span class=badge-content style=background-color:green>OTelBin</span></span></summary><div class=box-content><p><a href=#R-image-f670286df1c2213095ff2b23625f48d9 class=lightbox-link><img alt=otelbin-validator class="lazy lightbox figure-image" loading=lazy src=../../images/otelbin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f670286df1c2213095ff2b23625f48d9><img alt=otelbin-validator class="lazy lightbox lightbox-image" loading=lazy src=../../images/otelbin.png></a></p></div></details></div></details><p>Now that we have a working configuration, let&rsquo;s start the collector and then check to see what <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/2-extensions/index.html#zpages>zPages</a> is reporting.</p><div class=tab-panel data-tab-group=R-tabs-7cf280ad9e6d7888b2df6463eb564247><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ae0aa844e84a5045189c718ab4499203 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7cf280ad9e6d7888b2df6463eb564247","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-ae0aa844e84a5045189c718ab4499203 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><p>Open up zPages in your browser: <a href=http://localhost:55679/debug/pipelinez rel=external><strong>http://localhost:55679/debug/pipelinez</strong></a> (change <code>localhost</code> to reflect your own environment).
<a href=#R-image-568bcf8940995f368f34535321016422 class=lightbox-link><img alt=pipelinez-full-config class="lazy lightbox figure-image" loading=lazy src=../../images/pipelinez-full-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-568bcf8940995f368f34535321016422><img alt=pipelinez-full-config class="lazy lightbox lightbox-image" loading=lazy src=../../images/pipelinez-full-config.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=data-visualisations>Data Visualisations</h1><h2 id=splunk-observability-cloud>Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we have configured the OpenTelemetry Collector to send metrics to Splunk Observability Cloud, let&rsquo;s take a look at the data in Splunk Observability Cloud. If you have not received an invite to Splunk Observability Cloud, your instructor will provide you with login credentials.</p><p>Before that, let&rsquo;s make things a little more interesting and run a stress test on the instance. This in turn will light up the dashboards.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install stress
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span> stress -c <span class=m>2</span> -t 40<span class=p>;</span> stress -d <span class=m>5</span> -t 40<span class=p>;</span> stress -m <span class=m>20</span> -t 40<span class=p>;</span> <span class=k>done</span></span></span></code></pre></div><p>Once you are logged into Splunk Observability Cloud, using the left-hand navigation, navigate to <strong>Dashboards</strong> from the main menu. This will take you to the Teams view. At the top of this view click on <strong>All Dashboards</strong> :</p><p><a href=#R-image-a3e77715423b7a948f51cf822832b3a3 class=lightbox-link><img alt=menu-dashboards class="lazy lightbox figure-image" loading=lazy src=../images/menu-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a3e77715423b7a948f51cf822832b3a3><img alt=menu-dashboards class="lazy lightbox lightbox-image" loading=lazy src=../images/menu-dashboards.png></a></p><p>In the search box, search for <strong>OTel Contrib</strong>:</p><p><a href=#R-image-cbdd70fb3e70f98598b50dc60977c322 class=lightbox-link><img alt=search-dashboards class="lazy lightbox figure-image" loading=lazy src=../images/search-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cbdd70fb3e70f98598b50dc60977c322><img alt=search-dashboards class="lazy lightbox lightbox-image" loading=lazy src=../images/search-dashboards.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>If the dashboard does not exist, then your instructor will be able to quickly add it. If you are not attending a Splunk hosted version of this workshop then the Dashboard Group to import can be found at the bottom of this page.</p></div></details><p>Click on the <strong>OTel Contrib Dashboard</strong> dashboard to open it, next click in the <strong>Participant Name</strong> box, at the top of the dashboard, and select the name you configured for <code>participant.name</code> in the <code>config.yaml</code> in the drop-down list or start typing the name to search for it:</p><p><a href=#R-image-8b710e8b4271b7fc74711f1ea174f3b4 class=lightbox-link><img alt=select-conf-attendee-name class="lazy lightbox figure-image" loading=lazy src=../images/select-participant-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b710e8b4271b7fc74711f1ea174f3b4><img alt=select-conf-attendee-name class="lazy lightbox lightbox-image" loading=lazy src=../images/select-participant-name.png></a></p><p>You can now see the host metrics for the host upon which you configured the OpenTelemetry Collector.</p><p><a href=#R-image-03a4f5c323feea0b18a09190a3504c03 class=lightbox-link><img alt=participant-dashboard class="lazy lightbox figure-image" loading=lazy src=../images/participant-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-03a4f5c323feea0b18a09190a3504c03><img alt=participant-dashboard class="lazy lightbox lightbox-image" loading=lazy src=../images/participant-dashboard.png></a></p><details open class="box cstyle attachments info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Download Dashboard Group JSON for importing</summary><div class=box-content><ul><li><a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/7-visualisation/OpenTelemetry-Contrib-Dashboard-Group.json>OpenTelemetry-Contrib-Dashboard-Group.json</a> (40 KB)</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h2 id=developing-a-custom-component>Developing a custom component<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Building a component for the Open Telemetry Collector requires three key parts:</p><ol><li>The Configuration - <em>What values are exposed to the user to configure</em></li><li>The Factory - <em>Make the component using the provided values</em></li><li>The Business Logic - <em>What the component needs to do</em></li></ol><p>For this, we will use the example of building a component that works with Jenkins so that we can track important DevOps metrics of our project(s).</p><p>The metrics we are looking to measure are:</p><ol><li>Lead time for changes - <em>&ldquo;How long it takes for a commit to get into production&rdquo;</em></li><li>Change failure rate - <em>&ldquo;The percentage of deployments causing a failure in production&rdquo;</em></li><li>Deployment frequency - <em>&ldquo;How often a [team] successfully releases to production&rdquo;</em></li><li>Mean time to recover - <em>&ldquo;How long does it take for a [team] to recover from a failure in production&rdquo;</em></li></ol><p>These indicators were identified Google&rsquo;s DevOps Research and Assesment (DORA)[^1] team to help
show performance of a software development team. The reason for choosing <em>Jenkins CI</em> is that we remain in the same Open Source Software ecosystem which we can serve as the example for the vendor managed CI tools to adopt in future.</p><h2 id=instrument-vs-component>Instrument Vs Component<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There is something to consider when improving level of Observability within your organisation
since there are some trade offs that get made.</p><table><thead><tr><th></th><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td><strong>(Auto) Instrumented</strong></td><td>Does not require an external API to be monitored in order to observe the system.</td><td>Changing instrumentation requires changes to the project.</td></tr><tr><td></td><td>Gives system owners/developers to make changes in their observability.</td><td>Requires additional runtime dependancies.</td></tr><tr><td></td><td>Understands system context and can corrolate captured data with <em>Exemplars</em>.</td><td>Can impact performance of the system.</td></tr><tr><td><strong>Component</strong></td><td>- Changes to data names or semantics can be rolled out independently of the system&rsquo;s release cycle.</td><td>Breaking API changes require a coordinated release between system and collector.</td></tr><tr><td></td><td>Updating/extending data collected is a seemless user facing change.</td><td>Captured data semantics can unexpectedly break that does not align with a new system release.</td></tr><tr><td></td><td>Does not require the supporting teams to have a deep understanding of observability practice.</td><td>Strictly external / exposed information can be surfaced from the system.</td></tr></tbody></table><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 8. Develop</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h2 id=project-setup-hahahugoshortcode271s0hbhb>Project Setup <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong></span></span><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>The time to finish this section of the workshop can vary depending on experience.</p><p>A complete solution can be found <a href=https://github.com/splunk/collector-workshop-example rel=external><strong>here</strong></a> in case you&rsquo;re stuck or want to follow
along with the instructor.</p></div></details><p>To get started developing the new <em>Jenkins CI</em> receiver, we first need to set up a Golang project.
The steps to create your new Golang project is:</p><ol><li>Create a new directory named <code>${HOME}/go/src/jenkinscireceiver</code> and change into it<ol><li>The actual directory name or location is not strict, you can choose your own development directory to make it in.</li></ol></li><li>Initialize the golang module by going <code>go mod init splunk.conf/workshop/example/jenkinscireceiver</code><ol><li>This will create a file named <code>go.mod</code> which is used to track our direct and indirect dependencies</li><li>Eventually, there will be a <code>go.sum</code> which is the checksum value of the dependencies being imported.</li></ol></li></ol><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your go.mod</span></span></summary><div class=box-content><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>module splunk.conf/workshop/example/jenkinscireceiver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.20</span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h2 id=building-the-configuration>Building The Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The configuration portion of the component is how the user is able to have their inputs over the component,
so the values that is used for the configuration need to be:</p><ol><li>Intuitive for users to understand what that field controls</li><li>Be explicit in what is required and what is optional</li><li>Reuse common names and fields</li><li>Keep the options simple</li></ol><div class=tab-panel data-tab-group=R-tabs-7f8bd4f25e081a5f34f8ac5746cf1a91><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-cb41578f0fabf154c613e8814e3635e6 aria-expanded=true data-tab-item=R-tab-ea614e7854d52692156e1a019727d7ea class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7f8bd4f25e081a5f34f8ac5746cf1a91","R-tab-ea614e7854d52692156e1a019727d7ea")'>
<span class=tab-nav-text>bad config</span>
</button>
<button aria-controls=R-tab-id-2d9203d494bcdb871c1c2633f40a9626 aria-expanded=false data-tab-item=R-tab-c4230d82955d70d5d9d9c8cd4bb074a6 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7f8bd4f25e081a5f34f8ac5746cf1a91","R-tab-c4230d82955d70d5d9d9c8cd4bb074a6")'>
<span class=tab-nav-text>good config</span></button></div><div class=tab-content-container><div id=R-tab-id-cb41578f0fabf154c613e8814e3635e6 data-tab-item=R-tab-ea614e7854d52692156e1a019727d7ea class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_addr</span><span class=p>:</span><span class=w> </span><span class=l>hostname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_api_port</span><span class=p>:</span><span class=w> </span><span class=m>8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>filter_builds_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-awesome-build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=l>amber</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>track</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w> </span><span class=kc>no</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w> </span><span class=kc>no</span></span></span></code></pre></div></div></div><div id=R-tab-id-2d9203d494bcdb871c1c2633f40a9626 data-tab-item=R-tab-c4230d82955d70d5d9d9c8cd4bb074a6 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Required Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=l>http://my-jenkins-server:8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>authenticator</span><span class=p>:</span><span class=w> </span><span class=l>basicauth/jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Optional Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></div></div></div></div><p>The bad configuration highlights how doing the opposite of the recommendations of configuration practices impacts the usability
of the component. It doesn&rsquo;t make it clear what field values should be, it includes features that can be pushed to existing processors,
and the field naming is not consistent with other components that exist in the collector.</p><p>The good configuration keeps the required values simple, reuses field names from other components, and ensures the component focuses on
just the interaction between Jenkins and the collector.</p><p>The code tab shows how much is required to be added by us and what is already provided for us by shared libraries within the collector.
These will be explained in more detail once we get to the business logic. The configuration should start off small and will change
once the business logic has started to include additional features that is needed.</p><h2 id=write-the-code>Write the code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In order to implement the code needed for the configuration, we are going to create a new file named <code>config.go</code> with the following content:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule </span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h2 id=component-review>Component Review<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To recap the type of component we will need to capture metrics from Jenkins:</p><div class=tab-panel data-tab-group=R-tabs-630631e25267679dad27f20c16179107><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-029c00bff6dacbee57de8758023e8407 aria-expanded=true data-tab-item=R-tab-63e4e92bb7d207ca577b11c07f827279 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-630631e25267679dad27f20c16179107","R-tab-63e4e92bb7d207ca577b11c07f827279")'>
<span class=tab-nav-text>Extension</span>
</button>
<button aria-controls=R-tab-id-98d078182c198e72bf923a7ae4e4285b aria-expanded=false data-tab-item=R-tab-a9d093d11bc6e98b0c8e586ffa545c85 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-630631e25267679dad27f20c16179107","R-tab-a9d093d11bc6e98b0c8e586ffa545c85")'>
<span class=tab-nav-text>Receiver</span>
</button>
<button aria-controls=R-tab-id-4ca9803ba3cd91b569bdaeb01de07deb aria-expanded=false data-tab-item=R-tab-e22b6495595f2c4ad67a830d1be05c6e class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-630631e25267679dad27f20c16179107","R-tab-e22b6495595f2c4ad67a830d1be05c6e")'>
<span class=tab-nav-text>Processor</span>
</button>
<button aria-controls=R-tab-id-117cf125fcb75e4f571091f54161f7af aria-expanded=false data-tab-item=R-tab-d353b8720fcbebe4385ef7a23a43aa22 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-630631e25267679dad27f20c16179107","R-tab-d353b8720fcbebe4385ef7a23a43aa22")'>
<span class=tab-nav-text>Exporter</span>
</button>
<button aria-controls=R-tab-id-53e9f99a101dfccd0998a8227057c8ce aria-expanded=false data-tab-item=R-tab-654b8c5e6c23b010e809ba5bb38a47cf class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-630631e25267679dad27f20c16179107","R-tab-654b8c5e6c23b010e809ba5bb38a47cf")'>
<span class=tab-nav-text><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Connectors</span></span></span></button></div><div class=tab-content-container><div id=R-tab-id-029c00bff6dacbee57de8758023e8407 data-tab-item=R-tab-63e4e92bb7d207ca577b11c07f827279 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>The business use case an extension helps solves for are:</p><ol><li>Having shared functionality that requires runtime configuration</li><li>Indirectly helps with observing the runtime of the collector</li></ol><p>See <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/2-extensions/index.html><strong>Extensions Overview</strong></a> for more details.</p></div></div><div id=R-tab-id-98d078182c198e72bf923a7ae4e4285b data-tab-item=R-tab-a9d093d11bc6e98b0c8e586ffa545c85 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>The business use case a receiver solves for:</p><ul><li>Fetching data from a remote source</li><li>Receiving data from remote source(s)</li></ul><p>This is commonly referred to <em>pull</em> vs <em>push</em> based data collection, and you read more about the details in the <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/3-receivers/index.html>Receiver Overview</a>.</p></div></div><div id=R-tab-id-4ca9803ba3cd91b569bdaeb01de07deb data-tab-item=R-tab-e22b6495595f2c4ad67a830d1be05c6e class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>The business use case a processor solves for is:</p><ul><li>Adding or removing data, fields, or values</li><li>Observing and making decisions on the data</li><li>Buffering, queueing, and reordering</li></ul><p>The thing to keep in mind is the data type flowing through a processor needs to forward
the same data type to its downstream components. Read through <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/4-processors/index.html>Processor Overview</a> for the details.</p></div></div><div id=R-tab-id-117cf125fcb75e4f571091f54161f7af data-tab-item=R-tab-d353b8720fcbebe4385ef7a23a43aa22 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>The business use case an exporter solves for:</p><ul><li>Send the data to a tool, service, or storage</li></ul><p>The OpenTelemetry collector does not want to be &ldquo;backend&rdquo;, an all-in-one observability suite, but rather
keep to the principles that founded OpenTelemetry to begin with; A vendor agnostic Observability for all.
To help revisit the details, please read through <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/5-exporters/index.html><strong>Exporter Overview</strong></a>.</p></div></div><div id=R-tab-id-53e9f99a101dfccd0998a8227057c8ce data-tab-item=R-tab-654b8c5e6c23b010e809ba5bb38a47cf class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>This is a component type that was missed in the workshop since it is a relatively new addition to the collector, but the best way to think about a connector is that it is like a processor that allows it to be used across different telemetry types and pipelines. Meaning that a connector can accept data as logs, and output metrics, or accept metrics from one pipeline and provide metrics on the data it has observed.</p><p>The business case that a connector solves for:</p><ul><li>Converting from different telemetry types<ul><li>logs to metrics</li><li>traces to metrics</li><li>metrics to logs</li></ul></li><li>Observing incoming data and producing its own data<ul><li>Accepting metrics and generating analytical metrics of the data.</li></ul></li></ul><p>There was a brief overview within the <strong>Ninja</strong> section as part of the <a href=/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/4-processors/index.html>Processor Overview</a>,
and be sure what the project for updates for new connector components.</p></div></div></div></div><p>From the component overviews, it is clear that developing a pull-based receiver for Jenkins.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h3 id=designing-the-metrics>Designing The Metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To help define and export the metrics captured by our receiver, we will be using, <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/cmd/mdatagen rel=external><strong>mdatagen</strong></a>, a tool developed for the collector that turns YAML defined metrics into code.</p><div class=tab-panel data-tab-group=R-tabs-857e1a4442671dc12e24f2a3835c7dee><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ea43e22a08ed4d328b027ec5ff9f1320 aria-expanded=true data-tab-item=R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-857e1a4442671dc12e24f2a3835c7dee","R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9")'>
<span class=tab-nav-text>metadata.yaml</span>
</button>
<button aria-controls=R-tab-id-782969eceeb6bc827f553b2353a88454 aria-expanded=false data-tab-item=R-tab-fa95711d3528c54a10a4bd5a3303bf8c class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-857e1a4442671dc12e24f2a3835c7dee","R-tab-fa95711d3528c54a10a4bd5a3303bf8c")'>
<span class=tab-nav-text>gen.go</span></button></div><div class=tab-content-container><div id=R-tab-id-ea43e22a08ed4d328b027ec5ff9f1320 data-tab-item=R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Type defines the name to reference the component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># in the configuration file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Status defines the component type and the stability level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class=l>receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>metrics]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Attributes are the expected fields reported</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># with the exported values.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The name of the associated Jenkins job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Shows if the job had passed, or failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>success</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>unknown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Metrics defines all the pontentially exported values from this receiver. </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.jobs.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Provides a count of the total number of configured jobs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{Count}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.duration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Show the duration of the job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.commit_delta</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The calculation difference of the time job was finished minus commit timestamp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span></span></span></code></pre></div></div></div><div id=R-tab-id-782969eceeb6bc827f553b2353a88454 data-tab-item=R-tab-fa95711d3528c54a10a4bd5a3303bf8c class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// To generate the additional code needed to capture metrics, </span>
</span></span><span class=line><span class=cl><span class=c1>// the following command to be run from the shell:</span>
</span></span><span class=line><span class=cl><span class=c1>//  go generate -x ./...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//go:generate go run github.com/open-telemetry/opentelemetry-collector-contrib/cmd/mdatagen@v0.80.0 metadata.yaml</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// There is no code defined within this file.</span></span></span></code></pre></div></div></div></div></div><p>Create these files within the project folder before continuing onto the next section.</p><h2 id=building-the-factory>Building The Factory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Factory is a software design pattern that effectively allows for an object, in this case a <code>jenkinscireceiver</code>, to be created dynamically with the provided configuration. To use a more real-world example, it would be going to a phone store, asking for a phone
that matches your exact description, and then providing it to you.</p><p>Run the following command <code>go generate -x ./...</code> , it will create a new folder, <code>jenkinscireceiver/internal/metadata</code>, that contains all code required to export the defined metrics. The required code is:</p><div class=tab-panel data-tab-group=R-tabs-766fb8f39322e3b0f82a8538aafb3b17><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a70e8648a5a5b7e7d80abb7a3eb76d00 aria-expanded=true data-tab-item=R-tab-5aa589ba734396f6c25f293ea24fc1d0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-766fb8f39322e3b0f82a8538aafb3b17","R-tab-5aa589ba734396f6c25f293ea24fc1d0")'>
<span class=tab-nav-text>factory.go</span>
</button>
<button aria-controls=R-tab-id-1f2e88dbdffe12eca059244843709551 aria-expanded=false data-tab-item=R-tab-b4bda758a2aef091432646c354b4dc59 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-766fb8f39322e3b0f82a8538aafb3b17","R-tab-b4bda758a2aef091432646c354b4dc59")'>
<span class=tab-nav-text>config.go</span>
</button>
<button aria-controls=R-tab-id-e2340c1d3926b7e2b31872cd8e6533f4 aria-expanded=false data-tab-item=R-tab-aafe740d5e6d08f015cd912160286b41 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-766fb8f39322e3b0f82a8538aafb3b17","R-tab-aafe740d5e6d08f015cd912160286b41")'>
<span class=tab-nav-text>scraper.go</span>
</button>
<button aria-controls=R-tab-id-6ee0a7cde7814ba374180157b43985a8 aria-expanded=false data-tab-item=R-tab-6f5be00aa7a4344a722aa8fc34d13ab9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-766fb8f39322e3b0f82a8538aafb3b17","R-tab-6f5be00aa7a4344a722aa8fc34d13ab9")'>
<span class=tab-nav-text>build-config.yaml</span>
</button>
<button aria-controls=R-tab-id-03d7db503e45b4640ec229d625caf1d6 aria-expanded=false data-tab-item=R-tab-5d31a174f263a0433738ed5261095688 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-766fb8f39322e3b0f82a8538aafb3b17","R-tab-5d31a174f263a0433738ed5261095688")'>
<span class=tab-nav-text>project layout</span></button></div><div class=tab-content-container><div id=R-tab-id-a70e8648a5a5b7e7d80abb7a3eb76d00 data-tab-item=R-tab-5aa589ba734396f6c25f293ea24fc1d0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewFactory</span><span class=p>()</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>Factory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>receiver</span><span class=p>.</span><span class=nf>NewFactory</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>newDefaultConfig</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>receiver</span><span class=p>.</span><span class=nf>WithMetrics</span><span class=p>(</span><span class=nx>newMetricsReceiver</span><span class=p>,</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsStability</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newMetricsReceiver</span><span class=p>(</span><span class=nx>_</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>,</span> <span class=nx>cfg</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>consumer</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>)</span> <span class=p>(</span><span class=nx>receiver</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Convert the configuration into the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>conf</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.(</span><span class=o>*</span><span class=nx>Config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;can not convert config&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>sc</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>conf</span><span class=p>,</span> <span class=nx>set</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraperControllerReceiver</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&amp;</span><span class=nx>conf</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>set</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>consumer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>AddScraper</span><span class=p>(</span><span class=nx>sc</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-1f2e88dbdffe12eca059244843709551 data-tab-item=R-tab-b4bda758a2aef091432646c354b4dc59 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule </span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newDefaultConfig</span><span class=p>()</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ScraperControllerSettings</span><span class=p>:</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewDefaultScraperControllerSettings</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>HTTPClientSettings</span><span class=p>:</span>        <span class=nx>confighttp</span><span class=p>.</span><span class=nf>NewDefaultHTTPClientSettings</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>MetricsBuilderConfig</span><span class=p>:</span>      <span class=nx>metadata</span><span class=p>.</span><span class=nf>DefaultMetricsBuilderConfig</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-e2340c1d3926b7e2b31872cd8e6533f4 data-tab-item=R-tab-aafe740d5e6d08f015cd912160286b41 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a our scraper with our values </span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// To be filled in later</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span> <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetrics</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-6ee0a7cde7814ba374180157b43985a8 data-tab-item=R-tab-6f5be00aa7a4344a722aa8fc34d13ab9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Conf workshop collector&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v0.0.0-experimental</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/basicauthextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>splunk.conf/workshop/example/jenkinscireceiver v0.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./jenkinscireceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlphttpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># This replace is a go directive that allows for redefine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># where to fetch the code to use since the default would be from a remote project.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>replaces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=l>splunk.conf/workshop/example/jenkinscireceiver =&gt; ./jenkinscireceiver</span></span></span></code></pre></div></div></div><div id=R-tab-id-03d7db503e45b4640ec229d625caf1d6 data-tab-item=R-tab-5d31a174f263a0433738ed5261095688 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>‚îú‚îÄ‚îÄ build-config.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ jenkinscireceiver
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ go.mod
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ config.go
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ factory.go
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ scraper.go
</span></span><span class=line><span class=cl>    ‚îî‚îÄ‚îÄ internal
</span></span><span class=line><span class=cl>      ‚îî‚îÄ‚îÄ metadata</span></span></code></pre></div></div></div></div></div><p>Once you have written these files into the project with the expected contents run, <code>go mod tidy</code>, which will fetch all the remote dependencies and update <code>go.mod</code> and generate the <code>go.sum</code> files.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-development>OpenTelemetry Collector Development</h1><h2 id=building-the-business-logic>Building The Business Logic<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>At this point, we have a custom component that currently does nothing so we need to add in the required
logic to capture this data from Jenkins.</p><p>From this point, the steps that we need to take are:</p><ol><li>Create a client that connect to Jenkins</li><li>Capture all the configured jobs</li><li>Report the status of the last build for the configured job</li><li>Calculate the time difference between commit timestamp and job completion.</li></ol><p>The changes will be made to <code>scraper.go</code>.</p><div class=tab-panel data-tab-group=R-tabs-9ea85ad1a0d1138d243dbb8547c611f0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-dc6a637cf62a0731a6cf5aa9ca8ddb64 aria-expanded=true data-tab-item=R-tab-e6caaeba69313021097a6d23f5219e15 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9ea85ad1a0d1138d243dbb8547c611f0","R-tab-e6caaeba69313021097a6d23f5219e15")'>
<span class=tab-nav-text><ol><li>Add Jenkins client</li></ol></span></button>
<button aria-controls=R-tab-id-163867a6b4d37d983a91ada5edd25d5d aria-expanded=false data-tab-item=R-tab-577ba80910e4dfcb4e3e9abe5506eace class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9ea85ad1a0d1138d243dbb8547c611f0","R-tab-577ba80910e4dfcb4e3e9abe5506eace")'>
<span class=tab-nav-text><ol start=2><li>Capture all configured jobs</li></ol></span></button>
<button aria-controls=R-tab-id-25ae6c7a7b85dc578d49eba178dd4792 aria-expanded=false data-tab-item=R-tab-244ea624a2547544c8f517690b672fd5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9ea85ad1a0d1138d243dbb8547c611f0","R-tab-244ea624a2547544c8f517690b672fd5")'>
<span class=tab-nav-text><ol start=3><li>Report the status of each job</li></ol></span></button>
<button aria-controls=R-tab-id-668866366222bc1d94007c9d804e2b23 aria-expanded=false data-tab-item=R-tab-938c78fab74f4685403ec8d68561f6d1 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9ea85ad1a0d1138d243dbb8547c611f0","R-tab-938c78fab74f4685403ec8d68561f6d1")'>
<span class=tab-nav-text><ol start=4><li>Report the delta</li></ol></span></button></div><div class=tab-content-container><div id=R-tab-id-dc6a637cf62a0731a6cf5aa9ca8ddb64 data-tab-item=R-tab-e6caaeba69313021097a6d23f5219e15 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>To be able to connect to the Jenkins server, we will be using the package,
<a href=https://pkg.go.dev/github.com/yosida95/golang-jenkins rel=external>&ldquo;github.com/yosida95/golang-jenkins&rdquo;</a>,
which provides the functionality required to read data from the jenkins server.</p><p>Then we are going to utilise some of the helper functions from the,
<a href=https://pkg.go.dev/go.opentelemetry.io/collector/receiver/scraperhelper rel=external>&ldquo;go.opentelemetry.io/collector/receiver/scraperhelper&rdquo;</a> ,
library to create a start function so that we can connect to the Jenkins server once component has finished starting.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>jenkins</span> <span class=s>&#34;github.com/yosida95/golang-jenkins&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/pdata/pmetric&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mb</span>     <span class=o>*</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilder</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span> <span class=o>*</span><span class=nx>jenkins</span><span class=p>.</span><span class=nx>Jenkins</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>mb</span> <span class=p>:</span> <span class=nx>metadata</span><span class=p>.</span><span class=nf>NewMetricsBuilder</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span><span class=p>,</span> <span class=nx>set</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>WithStart</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>h</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Host</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>client</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.</span><span class=nf>ToClient</span><span class=p>(</span><span class=nx>h</span><span class=p>,</span> <span class=nx>set</span><span class=p>.</span><span class=nx>TelemetrySettings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>// The collector provides a means of injecting authentication</span>
</span></span><span class=line><span class=cl>            <span class=c1>// on our behalf, so this will ignore the libraries approach</span>
</span></span><span class=line><span class=cl>            <span class=c1>// and use the configured http client with authentication.</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span> <span class=p>=</span> <span class=nx>jenkins</span><span class=p>.</span><span class=nf>NewJenkins</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Endpoint</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>SetHTTPClient</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This finishes all the setup code that is required in order to initialise a Jenkins receiver.</p></div></div><div id=R-tab-id-163867a6b4d37d983a91ada5edd25d5d data-tab-item=R-tab-577ba80910e4dfcb4e3e9abe5506eace class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>From this point on, we will be focuses on the <code>scrape</code> method that has been waiting to be filled in.
This method will be run on each interval that is configured within the configuration (by default, every minute).</p><p>The reason we want to capture the number of jobs configured so we can see the growth of our Jenkins server,
and measure of many projects have onboarded. To do this we will call the jenkins client to list all jobs,
and if it reports an error, return that with no metrics, otherwise, emit the data from the metric builder.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-25ae6c7a7b85dc578d49eba178dd4792 data-tab-item=R-tab-244ea624a2547544c8f517690b672fd5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>In the last step, we were able to capture all jobs ands report the number of jobs
there was. Within this step, we are going to examine each job and use the report values
to capture metrics.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// This will check the result of the job, however,</span>
</span></span><span class=line><span class=cl>        <span class=c1>// since the only defined attributes are </span>
</span></span><span class=line><span class=cl>        <span class=c1>// `success`, `failure`, and `unknown`. </span>
</span></span><span class=line><span class=cl>        <span class=c1>// it is assume that anything did not finish </span>
</span></span><span class=line><span class=cl>        <span class=c1>// with a success or failure to be an unknown status.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>build</span><span class=p>.</span><span class=nx>Result</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;aborted&#34;</span><span class=p>,</span> <span class=s>&#34;not_built&#34;</span><span class=p>,</span> <span class=s>&#34;unstable&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;success&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusSuccess</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;failure&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusFailed</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobDurationDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span><span class=p>.</span><span class=nx>Duration</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-668866366222bc1d94007c9d804e2b23 data-tab-item=R-tab-938c78fab74f4685403ec8d68561f6d1 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>The final step is to calculate how long it took from
commit to job completion to help infer our DORA metrics.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Previous step here</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure that the `ChangeSet` has values</span>
</span></span><span class=line><span class=cl>        <span class=c1>// set so there is a valid value for us to reference</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Making the assumption that the first changeset</span>
</span></span><span class=line><span class=cl>        <span class=c1>// item is the most recent change.</span>
</span></span><span class=line><span class=cl>        <span class=nx>change</span> <span class=o>:=</span> <span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Record the difference from the build time</span>
</span></span><span class=line><span class=cl>        <span class=c1>// compared against the change timestamp.</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobCommitDeltaDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>Timestamp</span><span class=o>-</span><span class=nx>change</span><span class=p>.</span><span class=nx>Timestamp</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>Once all of these steps have been completed, you now have built a custom Jenkins CI receiver!</p><h2 id=whats-next>Whats next?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There are more than likely features that would be desired from component that you can think of, like:</p><ul><li>Can I include the branch name that the job used?</li><li>Can I include the project name for the job?</li><li>How I calculate the collective job durations for project?</li><li>How do I validate the changes work?</li></ul><p>Please take this time to play around, break it, change things around, or even try to capture logs from the builds.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 3, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=advanced-opentelemetry-collector>Advanced OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>75 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Authors
</span><span class=badge-content>Robert Castley, Charity Anderson, Pieter Hagen, & Geoff Higginbottom</span></span><p>The goal of this workshop is to help you gain confidence in creating and modifying OpenTelemetry Collector configuration files. You‚Äôll start with a minimal <code>agent.yaml</code> and <code>gateway.yaml</code> file and progressively build them out to handle several advanced, real-world scenarios.</p><p>A key focus of this workshop is learning how to configure the OpenTelemetry Collector to store telemetry data locally, rather than sending it to a third-party vendor backend. This approach not only simplifies debugging and troubleshooting but is also ideal for testing and development environments where you want to avoid sending data to production systems.</p><p>To make the most of this workshop, you should have:</p><ul><li>A basic understanding of the OpenTelemetry Collector and its configuration file structure.</li><li>Proficiency in editing YAML files.</li></ul><p>Everything in this workshop is designed to run locally, ensuring a hands-on and accessible learning experience. Let‚Äôs dive in and start building!</p><h2 id=workshop-overview>Workshop Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>During this workshop, we will cover the following topics:</p><ul><li><strong>Setting up the agent and gateway locally</strong>: Test that metrics, traces, and logs go via the agent to the gateway.</li><li><strong>Enhancing agent resilience</strong>: Basic configurations for fault tolerance.</li><li><strong>Configuring processors</strong>:<ul><li>Filter out noise by dropping specific spans (e.g., health checks).</li><li>Remove unnecessary tags, and handle sensitive data.</li><li>Transform data using OTTL (OpenTelemetry Transformation Language) in the pipeline before exporting.</li></ul></li><li><strong>Configuring Connectors</strong>:<ul><li>Route data to different endpoints based on the values received.</li></ul></li></ul><p>By the end of this workshop, you&rsquo;ll be familiar with configuring the OpenTelemetry Collector for a variety of real-world use cases.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 28, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Advanced OpenTelemetry Collector</h1><article class=default><header class=headline></header><h1 id=pre-requisites>Pre-requisites</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h3 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Proficiency in editing YAML files using <code>vi</code>, <code>vim</code>, <code>nano</code>, or your preferred text editor.</li><li>Supported Environments:<ul><li>A provided Splunk Workshop Instance (preferred). Outbound access to port <code>2222</code> is required for <code>ssh</code> access.</li><li>Apple Mac (Apple Silicon). Installation of <code>jq</code> is required - <a href=https://jqlang.org/download/ rel=external><strong>https://jqlang.org/download/</strong></a></li></ul></li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Create a directory</strong>: In your environment create a new directory and change into it:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir advanced-otel-workshop <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=nb>cd</span> advanced-otel-workshop</span></span></code></pre></div><p>We will refer to this directory as <code>[WORKSHOP]</code> for the remainder of the workshop.</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Remove any existing OpenTelemetry Collectors</summary><div class=box-content><p>If you have completed the Splunk IM workshop, please ensure you have deleted the collector running in Kubernetes before continuing. This can be done by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div><p>The EC2 instance in that case may also run some services that can interfere with this workshop , so run the following command to make sure they are stopped if present:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl delete ~/workshop/apm/deployment.yaml</span></span></code></pre></div></div></details><p><strong>Download workshop binaries</strong>: Change into your <code>[WORKSHOP]</code> directory and download the OpenTelemetry Collector, Load Generator binaries and setup script:</p><div class=tab-panel data-tab-group=R-tabs-af492f6c63f660ee5b9be5ef4f0bcc6d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-71cab5a46b40ab8267a28557d94a6f5d aria-expanded=true data-tab-item=R-tab-82857c7966640c0cfd614ba8cc6f34f0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-af492f6c63f660ee5b9be5ef4f0bcc6d","R-tab-82857c7966640c0cfd614ba8cc6f34f0")'>
<span class=tab-nav-text>Splunk Workshop Instance</span>
</button>
<button aria-controls=R-tab-id-6360f6483884610c5e3a3552e21537e6 aria-expanded=false data-tab-item=R-tab-720c44a46151d66d4db2d011603e7e1f class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-af492f6c63f660ee5b9be5ef4f0bcc6d","R-tab-720c44a46151d66d4db2d011603e7e1f")'>
<span class=tab-nav-text>Apple Silicon</span></button></div><div class=tab-content-container><div id=R-tab-id-71cab5a46b40ab8267a28557d94a6f5d data-tab-item=R-tab-82857c7966640c0cfd614ba8cc6f34f0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L https://github.com/signalfx/splunk-otel-collector/releases/download/v0.136.0/otelcol_linux_amd64 -o otelcol <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/loadgen/build/loadgen-linux-amd64 -o loadgen <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/setup-workshop.sh -o setup-workshop.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>chmod +x setup-workshop.sh</span></span></code></pre></div></div></div><div id=R-tab-id-6360f6483884610c5e3a3552e21537e6 data-tab-item=R-tab-720c44a46151d66d4db2d011603e7e1f class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L https://github.com/signalfx/splunk-otel-collector/releases/download/v0.136.0/otelcol_darwin_arm64 -o otelcol <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/loadgen/build/loadgen-darwin-arm64 -o loadgen <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/setup-workshop.sh -o setup-workshop.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>chmod +x setup-workshop.sh</span></span></code></pre></div></div></div></div></div><p>Run the <code>setup-workshop.sh</code> script which will configure the correct permissions and also create the initial configurations for the <strong>Agent</strong> and the <strong>Gateway</strong>:</p><div class=tab-panel data-tab-group=R-tabs-f8cacfe21ba2080d467498e3904ce64c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2286016195ff42d9218f8650ff17d2d5 aria-expanded=true data-tab-item=R-tab-ed1ba283b4cfb63aa90843a7e81a1de7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f8cacfe21ba2080d467498e3904ce64c","R-tab-ed1ba283b4cfb63aa90843a7e81a1de7")'>
<span class=tab-nav-text>Setup Workshop</span>
</button>
<button aria-controls=R-tab-id-37c6a8d64101ead406cb8f773440a5dc aria-expanded=false data-tab-item=R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f8cacfe21ba2080d467498e3904ce64c","R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24")'>
<span class=tab-nav-text>Verify Setup</span></button></div><div class=tab-content-container><div id=R-tab-id-2286016195ff42d9218f8650ff17d2d5 data-tab-item=R-tab-ed1ba283b4cfb63aa90843a7e81a1de7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./setup-workshop.sh</span></span></code></pre></div></div></div><div id=R-tab-id-37c6a8d64101ead406cb8f773440a5dc data-tab-item=R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù    ‚ïö‚ñà‚ñà‚ïó
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù      ‚ïö‚ñà‚ñà‚ïó
</span></span><span class=line><span class=cl>‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ïî‚ïù
</span></span><span class=line><span class=cl>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïî‚ïù
</span></span><span class=line><span class=cl>‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïù
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Welcome to the Splunk Advanced OpenTelemetry Workshop!
</span></span><span class=line><span class=cl>======================================================
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>macOS detected. Removing quarantine attributes...
</span></span><span class=line><span class=cl>otelcol version v0.126.0
</span></span><span class=line><span class=cl>Usage: loadgen [OPTIONS]
</span></span><span class=line><span class=cl>Options:
</span></span><span class=line><span class=cl>  -base       Send base traces (enabled by default)
</span></span><span class=line><span class=cl>  -health     Send health traces
</span></span><span class=line><span class=cl>  -security   Send security traces
</span></span><span class=line><span class=cl>  -logs       Enable logging of random quotes to quotes.log
</span></span><span class=line><span class=cl>  -json       Output logs in JSON format (only applicable with -logs)
</span></span><span class=line><span class=cl>  -count      Number of traces or logs to send (default: infinite)
</span></span><span class=line><span class=cl>  -h, --help  Display this help message
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Example:
</span></span><span class=line><span class=cl>  loadgen -health -security -count 10   Send 10 health and security traces
</span></span><span class=line><span class=cl>  loadgen -logs -json -count 5          Write 5 random quotes in JSON format to quotes.log
</span></span><span class=line><span class=cl>Creating workshop directories...
</span></span><span class=line><span class=cl>‚úì Created subdirectories:
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 1-agent-gateway
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 2-building-resilience
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 3-dropping-spans
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 4-sensitive-data
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 5-transform-data
</span></span><span class=line><span class=cl>  ‚îú‚îÄ‚îÄ 6-routing-data
</span></span><span class=line><span class=cl>  ‚îî‚îÄ‚îÄ 7-sum-count
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating configuration files for 1-agent-gateway...
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector agent configuration file: 1-agent-gateway/agent.yaml
</span></span><span class=line><span class=cl>‚úì Configuration file created successfully: 1-agent-gateway/agent.yaml
</span></span><span class=line><span class=cl>‚úì File size:     4355 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector gateway configuration file: 1-agent-gateway/gateway.yaml
</span></span><span class=line><span class=cl>‚úì Configuration file created successfully: 1-agent-gateway/gateway.yaml
</span></span><span class=line><span class=cl>‚úì File size:     3376 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>‚úì Completed configuration files for 1-agent-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating configuration files for 2-building-resilience...
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector agent configuration file: 2-building-resilience/agent.yaml
</span></span><span class=line><span class=cl>‚úì Configuration file created successfully: 2-building-resilience/agent.yaml
</span></span><span class=line><span class=cl>‚úì File size:     4355 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector gateway configuration file: 2-building-resilience/gateway.yaml
</span></span><span class=line><span class=cl>‚úì Configuration file created successfully: 2-building-resilience/gateway.yaml
</span></span><span class=line><span class=cl>‚úì File size:     3376 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>‚úì Completed configuration files for 2-building-resilience
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Workshop environment setup complete!
</span></span><span class=line><span class=cl>Configuration files created in the following directories:
</span></span><span class=line><span class=cl>  1-agent-gateway/
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>    ‚îî‚îÄ‚îÄ gateway.yaml
</span></span><span class=line><span class=cl>  2-building-resilience/
</span></span><span class=line><span class=cl>    ‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>    ‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-fe27d5f23ec828f23e8661e1eed3e790><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7b862c3f5cae3838364e84d917363172 aria-expanded=true data-tab-item=R-tab-b40a1b49bd294b76ac2b8778c756092f class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fe27d5f23ec828f23e8661e1eed3e790","R-tab-b40a1b49bd294b76ac2b8778c756092f")'>
<span class=tab-nav-text>Initial Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-7b862c3f5cae3838364e84d917363172 data-tab-item=R-tab-b40a1b49bd294b76ac2b8778c756092f class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[WORKSHOP]
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 1-agent-gateway
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 2-building-resilience
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 3-dropping-spans
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 4-sensitive-data
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 5-transform-data
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 6-routing-data
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ 7-sum-count
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ loadgen
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ otelcol
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ setup-workshop.sh</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=1-verify-agent-configuration>1. Verify Agent Configuration</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Welcome! In this section, we‚Äôll begin with a fully functional OpenTelemetry setup that includes both an <strong>Agent</strong> and a <strong>Gateway</strong>.</p><p>We‚Äôll start by quickly reviewing their configuration files to get familiar with the overall structure and to highlight key sections that control the telemetry pipeline.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Throughout the workshop, you‚Äôll work with multiple terminal windows. To keep things organized, give each terminal a unique name or color. This will help you easily recognize and switch between them during the exercises.</p><p>We will refer to these terminals as: <strong>Agent</strong>, <strong>Gateway</strong>, <strong>Loadgen</strong>, and <strong>Test</strong>.</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ol><li><p>Create your first terminal window and name it <strong>Agent</strong>. Navigate to the directory for the first exercise <code>[WORKSHOP]/1-agent-gateway</code> and verify that the required files have been generated:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> 1-agent-gateway
</span></span><span class=line><span class=cl>ls -l</span></span></code></pre></div></li><li><p>You should see the following files in the directory. If not, re-run the <code>setup-workshop.sh</code> script as described in the <strong>Pre-requisites</strong> section:</p><div class=tab-panel data-tab-group=R-tabs-1f1e33dceeb8fdd483ef3641cca5e7e1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4e248087c55b45120d696bb7b748828c aria-expanded=true data-tab-item=R-tab-3ea4b283eb322e1c6373d63f91d032be class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1f1e33dceeb8fdd483ef3641cca5e7e1","R-tab-3ea4b283eb322e1c6373d63f91d032be")'>
<span class=tab-nav-text>Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-4e248087c55b45120d696bb7b748828c data-tab-item=R-tab-3ea4b283eb322e1c6373d63f91d032be class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div></li></ol></div></details><h3 id=understanding-the-agent-configuration>Understanding the Agent configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Let‚Äôs review the key components of the <code>agent.yaml</code> file used in this workshop. We‚Äôve made some important additions to support metrics, traces, and logs.</p><h4 id=receivers>Receivers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>The <code>receivers</code> section defines how the <strong>Agent</strong> ingests telemetry data. In this setup, three types of receivers have been configured:</p><ul><li><p><strong>Host Metrics Receiver</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>                         </span><span class=c># Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>3600s        </span><span class=w> </span><span class=c># Collection Interval (1hr)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w>                             </span><span class=c># CPU Scraper</span></span></span></code></pre></div><p>Collects CPU usage from the local system every hour. We‚Äôll use this to generate example metric data.</p></li><li><p><strong>OTLP Receiver (HTTP protocol)</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otlp</span><span class=p>:</span><span class=w>                                </span><span class=c># OTLP Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>http</span><span class=p>:</span><span class=w>                            </span><span class=c># Configure HTTP protocol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.0.0.0:4318&#34;</span><span class=w>       </span><span class=c># Endpoint to bind to</span></span></span></code></pre></div><p>Enables the agent to receive metrics, traces, and logs over HTTP on port <code>4318</code>. This is used to send data to the collector in future exercises.</p></li><li><p><strong>FileLog Receiver</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>filelog/quotes</span><span class=p>:</span><span class=w>                      </span><span class=c># Receiver Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include</span><span class=p>:</span><span class=w> </span><span class=l>./quotes.log             </span><span class=w> </span><span class=c># The file to read log data from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include_file_path</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>            </span><span class=c># Include file path in the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include_file_name</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>           </span><span class=c># Exclude file name from the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resource</span><span class=p>:</span><span class=w>                          </span><span class=c># Add custom resource attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>com.splunk.source</span><span class=p>:</span><span class=w> </span><span class=l>./quotes.log </span><span class=w> </span><span class=c># Source of the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>com.splunk.sourcetype</span><span class=p>:</span><span class=w> </span><span class=l>quotes   </span><span class=w> </span><span class=c># Source type of the log data</span></span></span></code></pre></div><p>Enables the agent to tail a local log file (<code>quotes.log</code>) and convert it to structured log events, enriched with metadata such as <code>source</code> and <code>sourceType</code>.</p></li></ul><h4 id=exporters>Exporters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p><strong>Debug Exporter</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>                               </span><span class=c># Exporter Type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed               </span><span class=w> </span><span class=c># Enabled detailed debug output</span></span></span></code></pre></div></li><li><p><strong>OTLPHTTP Exporter</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp</span><span class=p>:</span><span class=w>                            </span><span class=c># Exporter Type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://localhost:5318&#34;</span><span class=w>  </span><span class=c># Gateway OTLP endpoint  </span></span></span></code></pre></div><p>The <code>debug</code> exporter sends data to the console for visibility and debugging during the workshop while the <code>otlphttp</code> exporter forwards all telemetry to the local <strong>Gateway</strong> instance.</p><p><strong>This dual-export strategy ensures you can see the raw data locally while also sending it downstream for further processing and export.</strong></p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Agent Configuration</h1><article class=default><header class=headline></header><h1 id=11-verify-gateway-configuration>1.1 Verify Gateway Configuration</h1><p>The <strong>OpenTelemetry Gateway</strong> serves as a central hub for receiving, processing, and exporting telemetry data. It sits between your telemetry sources (such as applications and services) and your observability backends like Splunk Observability Cloud.</p><p>By centralizing telemetry traffic, the gateway enables advanced features such as data filtering, enrichment, transformation, and routing to one or more destinations. It helps reduce the burden on individual services by offloading telemetry processing and ensures consistent, standardized data across distributed systems.</p><p>This makes your observability pipeline easier to manage, scale, and analyze‚Äîespecially in complex, multi-service environments.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Open or create your second terminal window and name it <strong>Gateway</strong>. Navigate to the first exercise directory <code>[WORKSHOP]/1-agent-gateway</code>
then check the contents of the <code>gateway.yaml</code> file.</p><p>This file outlines the core structure of the OpenTelemetry Collector as deployed in <strong>Gateway</strong> mode.</p></div></details><h3 id=understanding-the-gateway-configuration>Understanding the Gateway Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Let‚Äôs explore the <code>gateway.yaml</code> file that defines how the OpenTelemetry Collector is configured in <strong>Gateway</strong> mode during this workshop. This <strong>Gateway</strong> is responsible for receiving telemetry from the <strong>Agent</strong>, then processing and exporting it for inspection or forwarding.</p><ul><li><p><strong>OTLP Receiver (Custom Port)</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.0.0.0:5318&#34;</span></span></span></code></pre></div><p>The port <code>5318</code> matches the <code>otlphttp</code> exporter in the <strong>Agent</strong> configuration, ensuring that all telemetry data sent by the <strong>Agent</strong> is accepted by the <strong>Gateway</strong>.</p></li></ul><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>This separation of ports avoids conflicts and keeps responsibilities clear between agent and gateway roles.</p></div></details><ul><li><p><strong>File Exporters</strong></p><p>The <strong>Gateway</strong> uses three file exporters to output telemetry data to local files. These exporters are defined as:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>                        </span><span class=c># List of exporters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>                          </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed          </span><span class=w> </span><span class=c># Enable detailed debug output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces</span><span class=p>:</span><span class=w>                    </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces.out&#34;</span><span class=w>  </span><span class=c># Path for OTLP JSON output for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/metrics</span><span class=p>:</span><span class=w>                   </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-metrics.out&#34;</span><span class=w> </span><span class=c># Path for OTLP JSON output for metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/logs</span><span class=p>:</span><span class=w>                      </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-logs.out&#34;</span><span class=w>    </span><span class=c># Path for OTLP JSON output for logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span></span></span></code></pre></div><p>Each exporter writes a specific signal type to its corresponding file.</p><p>These files are created once the gateway is started and will be populated with real telemetry as the agent sends data. You can monitor these files in real time to observe the flow of telemetry through your pipeline.</p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=12-validate--test-configuration>1.2 Validate & Test Configuration</h1><p>Now, we can start the <strong>Gateway</strong> and the <strong>Agent</strong>, which is configured to automatically send <strong>Host Metrics</strong> at startup. We do this to verify that data is properly routed from the <strong>Agent</strong> to the <strong>Gateway</strong>.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway</strong>: In the <strong>Gateway terminal</strong> window, run the following command to start the <strong>Gateway</strong>:</p><div class=tab-panel data-tab-group=R-tabs-cb1d9c15970125ce76fb43f7017e7abe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fb33d44bfa89767de74f4f0a417676bd aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-cb1d9c15970125ce76fb43f7017e7abe","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-fb33d44bfa89767de74f4f0a417676bd data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p>If everything is configured correctly, the collector will start and state <code>Everything is ready. Begin running and processing data.</code> in the output, similar to the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-06-09T09:22:11.944+0100    info    service@v0.126.0/service.go:289 Everything is ready. Begin running and processing data. {&#34;resource&#34;: {}}</span></span></code></pre></div><p>Once the <strong>Gateway</strong> is running, it will listen for incoming data on port <code>5318</code> and export the received data to the following files:</p><ul><li><code>gateway-traces.out</code></li><li><code>gateway-metrics.out</code></li><li><code>gateway-logs.out</code></li></ul><p><strong>Start the Agent</strong>: In the <strong>Agent terminal</strong> window start the agent with the agent configuration:</p><div class=tab-panel data-tab-group=R-tabs-6a60d4d4a376e92f8b2599e1a7650edd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-93307a9e464cad6627dd1e9a2e86a01a aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6a60d4d4a376e92f8b2599e1a7650edd","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-93307a9e464cad6627dd1e9a2e86a01a data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Verify CPU Metrics</strong>:</p><ol><li>Check that when the <strong>Agent</strong> starts, it immediately starts sending <strong>CPU</strong> metrics.</li><li>Both the <strong>Agent</strong> and the <strong>Gateway</strong> will display this activity in their debug output. The output should resemble the following snippet:</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>NumberDataPoints #31
</span></span><span class=line><span class=cl>Data point attributes:
</span></span><span class=line><span class=cl>     -&gt; cpu: Str(cpu3)
</span></span><span class=line><span class=cl>     -&gt; state: Str(wait)
</span></span><span class=line><span class=cl>StartTimestamp: 2025-07-07 16:49:42 +0000 UTC
</span></span><span class=line><span class=cl>Timestamp: 2025-07-09 09:36:21.190226459 +0000 UTC
</span></span><span class=line><span class=cl>Value: 77.380000
</span></span><span class=line><span class=cl>        {&#34;resource&#34;: {}, &#34;otelcol.component.id&#34;: &#34;debug&#34;, &#34;otelcol.component.kind&#34;: &#34;exporter&#34;, &#34;otelcol.signal&#34;: &#34;metrics&#34;}</span></span></code></pre></div><p>At this stage, the <strong>Agent</strong> continues to collect <strong>CPU</strong> metrics once per hour or upon each restart and sends them to the gateway. The <strong>Gateway</strong> processes these metrics and exports them to a file named <code>gateway-metrics.out</code>. This file stores the exported metrics as part of the pipeline service.</p><p><strong>Verify Data arrived at Gateway</strong>: To confirm that CPU metrics, specifically for <code>cpu0</code>, have successfully reached the gateway, we‚Äôll inspect the <code>gateway-metrics.out</code> file using the <code>jq</code> command.</p><p>The following command filters and extracts the <code>system.cpu.time</code> metric, focusing on <code>cpu0</code>. It displays the metric‚Äôs state (e.g., <code>user</code>, <code>system</code>, <code>idle</code>, <code>interrupt</code>) along with the corresponding values.</p><p>Open or create your third terminal window and name it <strong>Tests</strong>. Run the command below in the <strong>Tests terminal</strong> to check the <code>system.cpu.time</code> metric:</p><div class=tab-panel data-tab-group=R-tabs-26303a226698b3624949998fb8d2335e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-368531f80fecc2a25da19c91d4002ed6 aria-expanded=true data-tab-item=R-tab-fe622e84764bc6f08467fa0eea9b5ec6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-26303a226698b3624949998fb8d2335e","R-tab-fe622e84764bc6f08467fa0eea9b5ec6")'>
<span class=tab-nav-text>Check CPU Metrics</span>
</button>
<button aria-controls=R-tab-id-bf5d2dbf9b90e09149eef5ad5a8f8b15 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-26303a226698b3624949998fb8d2335e","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-368531f80fecc2a25da19c91d4002ed6 data-tab-item=R-tab-fe622e84764bc6f08467fa0eea9b5ec6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[] | select(.name == &#34;system.cpu.time&#34;) | .sum.dataPoints[] | select(.attributes[0].value.stringValue == &#34;cpu0&#34;) | {cpu: .attributes[0].value.stringValue, state: .attributes[1].value.stringValue, value: .asDouble}&#39;</span> gateway-metrics.out</span></span></code></pre></div></div></div><div id=R-tab-id-bf5d2dbf9b90e09149eef5ad5a8f8b15 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>123407.02</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>64866.6</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;idle&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>216427.87</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;interrupt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=2-building-in-resilience>2. Building In Resilience</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>The OpenTelemetry Collector‚Äôs <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/19bc7d6ee854c0c1b5c97d8d348e5b9d1199e8aa/extension/storage/filestorage/README.md rel=external><strong>FileStorage Extension</strong></a> is a critical component for building a more resilient telemetry pipeline. It enables the Collector to reliably checkpoint in-flight data, manage retries efficiently, and gracefully handle temporary failures without losing valuable telemetry.</p><p>With FileStorage enabled, the Collector can persist intermediate states to disk, ensuring that your traces, metrics, and logs are not lost during network disruptions, backend outages, or Collector restarts. This means that even if your network connection drops or your backend becomes temporarily unavailable, the Collector will continue to receive and buffer telemetry, resuming delivery seamlessly once connectivity is restored.</p><p>By integrating the FileStorage Extension into your pipeline, you can strengthen the durability of your observability stack and maintain high-quality telemetry ingestion, even in environments where connectivity may be unreliable.<details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>This solution will work for metrics as long as the connection downtime is brief, up to 15 minutes. If the downtime exceeds this, Splunk Observability Cloud might drop data to make sure no data-point is out of order.</p><p>For logs, there are plans to implement a full enterprise-ready solution in one of the upcoming Splunk OpenTelemetry Collector releases.</p></div></details></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Building Resilience</h1><article class=default><header class=headline></header><h1 id=21-file-storage-configuration>2.1 File Storage Configuration</h1><p>In this exercise, we will update the <code>extensions:</code> section of the <code>agent.yaml</code> file. This section is part of the OpenTelemetry configuration YAML and defines optional components that enhance or modify the OpenTelemetry Collector‚Äôs behavior.</p><p>While these components do not process telemetry data directly, they provide valuable capabilities and services to improve the Collector‚Äôs functionality.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>2-building-resilience</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Your directory structure will look like this:</p><div class=tab-panel data-tab-group=R-tabs-9b54ab84666c2cc49c391d6ade9bd334><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0c5148aa334cf4e79463f6ea5e91b0cd aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9b54ab84666c2cc49c391d6ade9bd334","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-0c5148aa334cf4e79463f6ea5e91b0cd data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Update the <code>agent.yaml</code></strong>: In the <strong>Agent terminal</strong> window, add the <code>file_storage</code> extension under the existing <code>health_check</code> extension:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>file_storage/checkpoint</span><span class=p>:</span><span class=w>             </span><span class=c># Extension Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./checkpoint-dir&#34;</span><span class=w>      </span><span class=c># Define directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>create_directory</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>             </span><span class=c># Create directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>1s                       </span><span class=w> </span><span class=c># Timeout for file operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>compaction</span><span class=p>:</span><span class=w>                        </span><span class=c># Compaction settings</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_start</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                   </span><span class=c># Start compaction at Collector startup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Define compaction directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./checkpoint-dir/tmp&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>max_transaction_size</span><span class=p>:</span><span class=w> </span><span class=m>65536</span><span class=w>      </span><span class=c># Max. size limit before compaction occurs</span></span></span></code></pre></div><p><strong>Add <code>file_storage</code> to the exporter</strong>: Modify the <code>otlphttp</code> exporter to configure retry and queuing mechanisms, ensuring data is retained and resent if failures occur. Add the following under the <code>endpoint: "http://localhost:5318"</code> and make sure the indentation matches <code>endpoint</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>retry_on_failure</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                    </span><span class=c># Enable retry on failure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>sending_queue</span><span class=p>:</span><span class=w>                     </span><span class=c># </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                    </span><span class=c># Enable sending queue</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>num_consumers</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>                </span><span class=c># No. of consumers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>queue_size</span><span class=p>:</span><span class=w> </span><span class=m>10000</span><span class=w>                </span><span class=c># Max. queue size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>file_storage/checkpoint</span><span class=w> </span><span class=c># File storage extension</span></span></span></code></pre></div><p><strong>Update the <code>services</code> section</strong>: Add the <code>file_storage/checkpoint</code> extension to the existing <code>extensions:</code> section and the configuration needs to look like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>health_check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>file_storage/checkpoint           </span><span class=w> </span><span class=c># Enabled extensions for this collector</span></span></span></code></pre></div><p><strong>Update the <code>metrics</code> pipeline</strong>: For this exercise we are going to comment out the <code>hostmetrics</code> receiver from the Metric pipeline to reduce debug and log noise, again the configuration needs to look like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># - hostmetrics                    # Hostmetric reciever (cpu only)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span></span></span></code></pre></div></div></details><p>Validate the <strong>Agent</strong> configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>metrics:</code> section of your pipelines will look similar to this:</p><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO2(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      EXP1(&amp;ensp;debug&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(otlphttp&lt;br&gt;fa:fa-upload):::exporter
      EXP3(&amp;ensp;file&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    %% Links
    subID1:::sub-metrics
    subgraph &#34; &#34;
      subgraph subID1[**Metrics**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO2
      PRO2 --&gt; PRO3
      PRO3 --&gt; EXP1
      PRO3 --&gt; EXP3
      PRO3 --&gt; EXP2
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 7, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=22-setup-environment-for-resilience-testing>2.2 Setup environment for Resilience Testing</h1><p>Next, we will configure our environment to be ready for testing the <strong>File Storage</strong> configuration.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>: In the <strong>Gateway terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-68342f01f82acfdab5b08b8b1436713c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0c120cb897c9121d6704cefb77d1c08e aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-68342f01f82acfdab5b08b8b1436713c","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-0c120cb897c9121d6704cefb77d1c08e data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Agent</strong>: In the <strong>Agent terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-2b677fbe519fba4c27232a35a8f501b8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-51abcb8007b0ab6819299d98046be407 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2b677fbe519fba4c27232a35a8f501b8","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-51abcb8007b0ab6819299d98046be407 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Send five test spans</strong>: In the <strong>Loadgen terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-a817409b54508439e9acb0ca3cfa5dd8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-25e7f6a100e6db7bd8a9e49d9ea5f0cf aria-expanded=true data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a817409b54508439e9acb0ca3cfa5dd8","R-tab-5386e98c2a18696103b86ab3f8520915")'>
<span class=tab-nav-text>Start Load Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-25e7f6a100e6db7bd8a9e49d9ea5f0cf data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p>Both the <strong>Agent</strong> and <strong>Gateway</strong> should display debug logs, and the <strong>Gateway</strong> should create a <code>./gateway-traces.out</code> file.</p><p>If everything functions correctly, we can proceed with testing system resilience.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=23-simulate-failure>2.3 Simulate Failure</h1><p>To assess the <strong>Agent&rsquo;s</strong> resilience, we&rsquo;ll simulate a temporary <strong>Gateway</strong> outage and observe how the <strong>Agent</strong> handles it:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Simulate a network failure</strong>: In the <strong>Gateway terminal</strong> stop the <strong>Gateway</strong> with <code>Ctrl-C</code> and wait until the gateway console shows that it has stopped. The <strong>Agent</strong> will continue running, but it will not be able to send data to the gateway. The output in the <strong>Gateway terminal</strong> should look similar to this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-09T10:22:37.941Z        info    service@v0.126.0/service.go:345 Shutdown complete.      {&#34;resource&#34;: {}}</span></span></code></pre></div><p><strong>Send traces</strong>: In the <strong>Loadgen terminal</strong> window send five more traces using the <code>loadgen</code>.</p><div class=tab-panel data-tab-group=R-tabs-3bdad418f3aeaddfc983e5bb6bdd5b83><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8c81029b654d8238fc461fc334ca5d8d aria-expanded=true data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3bdad418f3aeaddfc983e5bb6bdd5b83","R-tab-5386e98c2a18696103b86ab3f8520915")'>
<span class=tab-nav-text>Start Load Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-8c81029b654d8238fc461fc334ca5d8d data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p>Notice that the agent‚Äôs retry mechanism is activated as it continuously attempts to resend the data. In the agent‚Äôs console output, you will see repeated messages similar to the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-01-28T14:22:47.020+0100  info  internal/retry_sender.go:126  Exporting failed. Will retry the request after interval.  {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;traces&#34;, &#34;name&#34;: &#34;otlphttp&#34;, &#34;error&#34;: &#34;failed to make an HTTP request: Post \&#34;http://localhost:5318/v1/traces\&#34;: dial tcp 127.0.0.1:5318: connect: connection refused&#34;, &#34;interval&#34;: &#34;9.471474933s&#34;}</span></span></code></pre></div><p><strong>Stop the Agent</strong>: In the <strong>Agent terminal</strong> window, use <code>Ctrl-C</code> to stop the agent. Wait until the agent‚Äôs console confirms it has stopped:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-09T10:25:59.344Z        info    service@v0.126.0/service.go:345 Shutdown complete.      {&#34;resource&#34;: {}}</span></span></code></pre></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>When you stop the agent, any metrics, traces, or logs held in memory for retry will be lost. However, because we have configured the FileStorage Extension, all telemetry that has not yet been accepted by the target endpoint are safely checkpointed on disk.</p><p>Stopping the agent is a crucial step to clearly demonstrate how the system recovers when the agent is restarted.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=24-recovery>2.4 Recovery</h1><p>In this exercise, we‚Äôll test how the <strong>OpenTelemetry Collector</strong> recovers from a network outage by restarting the <strong>Gateway</strong> collector. When the <strong>Gateway</strong> becomes available again, the <strong>Agent</strong> will resume sending data from its last check-pointed state, ensuring no data loss.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Restart the Gateway</strong>: In the <strong>Gateway terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-99787b1f30419dca935fb772a4d5df3a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e9e851430fd19941d3b632d16b744fd6 aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-99787b1f30419dca935fb772a4d5df3a","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-e9e851430fd19941d3b632d16b744fd6 data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Restart the Agent</strong>: In the <strong>Agent terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-79deb4a8fcd32c4816071f5d5652c876><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c42ecf55a0798f2a8a38d0248233a46a aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-79deb4a8fcd32c4816071f5d5652c876","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-c42ecf55a0798f2a8a38d0248233a46a data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><blockquote><p>After the <strong>Agent</strong> is up and running, the <strong>File_Storage</strong> extension will detect buffered data in the checkpoint folder. It will start to dequeue the stored spans from the last checkpoint folder, ensuring no data is lost.</p></blockquote><p><strong>Verify the Agent Debug output:</strong> Note that the <strong>Agent</strong> debug output does <strong>NOT</strong> change and still shows the following line indicating no new data is being exported:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-11T08:31:58.176Z        info    service@v0.126.0/service.go:289 Everything is ready. Begin running and processing data.   {&#34;resource&#34;: {}}</span></span></code></pre></div><p><strong>Watch the Gateway Debug output</strong><br>You should see from the <strong>Gateway</strong> debug screen, it has started receiving the previously missed traces without requiring any additional action on your part e.g.:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>   -&gt; user.name: Str(Luke Skywalker)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>   -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(75.75)
</span></span><span class=line><span class=cl>      {&#34;resource&#34;: {}, &#34;otelcol.component.id&#34;: &#34;debug&#34;, &#34;otelcol.component.kind&#34;: &#34;exporter&#34;, &#34;otelcol.signal&#34;: &#34;traces&#34;}</span></span></code></pre></div><p><strong>Check the <code>gateway-traces.out</code> file:</strong> Using <code>jq</code>, count the number of traces in the recreated <code>gateway-traces.out</code>. It should match the number you send when the <strong>Gateway</strong> was down.</p><div class=tab-panel data-tab-group=R-tabs-0de2eb5b7d68e8274b9e705b4483cc35><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-aca3c420756e25efe58b045bd93d5935 aria-expanded=true data-tab-item=R-tab-4e2ba08c3a1a44c321b4ef1ba3812149 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0de2eb5b7d68e8274b9e705b4483cc35","R-tab-4e2ba08c3a1a44c321b4ef1ba3812149")'>
<span class=tab-nav-text>Check Gateway Traces Out File</span>
</button>
<button aria-controls=R-tab-id-ba688ea4d6c8aa172ae9afdc111ac970 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-0de2eb5b7d68e8274b9e705b4483cc35","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-aca3c420756e25efe58b045bd93d5935 data-tab-item=R-tab-4e2ba08c3a1a44c321b4ef1ba3812149 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans | length | &#34;\(.) resourceSpans found&#34;&#39;</span> gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-ba688ea4d6c8aa172ae9afdc111ac970 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;5 resourceSpans found&#34;</span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details><h3 id=conclusion>Conclusion<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This exercise demonstrated how to enhance the resilience of the OpenTelemetry Collector by configuring the <code>file_storage</code> extension, enabling retry mechanisms for the <code>otlp</code> exporter, and using a file-backed queue for temporary data storage.</p><p>By implementing file-based check-pointing and queue persistence, you ensure the telemetry pipeline can gracefully recover from temporary interruptions, making it a more robust and reliable for production environments.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=3-dropping-spans>3. Dropping Spans</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this section, we will explore how to use the <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/filterprocessor/README.md rel=external><strong>Filter Processor</strong></a> to selectively drop spans based on certain conditions.</p><p>Specifically, we will drop traces based on the span name, which is commonly used to filter out unwanted spans such as health checks or internal communication traces. In this case, we will be filtering out spans that contain <code>"/_healthz"</code>, typically associated with health check requests and usually are quite &ldquo;<strong>noisy</strong>&rdquo;.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>3-dropping-spans</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Copy <code>*.yaml</code> from the <code>2-building-resilience</code> directory into <code>3-dropping-spans</code>. Your updated directory structure will now look like this:</p><div class=tab-panel data-tab-group=R-tabs-3e155035bfdca4dc650c1e9175c42650><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fe77d609e5585dd9866378907fa5015e aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3e155035bfdca4dc650c1e9175c42650","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-fe77d609e5585dd9866378907fa5015e data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><p>Next, we will configure the <strong>filter processor</strong> and the respective pipelines.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Dropping Spans</h1><article class=default><header class=headline></header><h1 id=31-configuration>3.1 Configuration</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Switch to your <strong>Gateway terminal</strong> window and open the <code>gateway.yaml</code> file. Update the <code>processors</code> section with the following configuration:</p><ol><li><p><strong>Add a <code>filter</code> processor</strong>:<br>Configure the gateway to exclude spans with the name <code>/_healthz</code>. The <code>error_mode: ignore</code> directive ensures that any errors encountered during filtering are ignored, allowing the pipeline to continue running smoothly. The <code>traces</code> section defines the filtering rules, specifically targeting spans named <code>/_healthz</code> for exclusion.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>filter/health</span><span class=p>:</span><span class=w>                       </span><span class=c># Defines a filter processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>error_mode</span><span class=p>:</span><span class=w> </span><span class=l>ignore                </span><span class=w> </span><span class=c># Ignore errors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>                            </span><span class=c># Filtering rules for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>span</span><span class=p>:</span><span class=w>                            </span><span class=c># Exclude spans named &#34;/_healthz&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span>- <span class=s1>&#39;name == &#34;/_healthz&#34;&#39;</span></span></span></code></pre></div></li><li><p><strong>Add the <code>filter</code> processor to the <code>traces</code> pipeline</strong>:<br>Include the <code>filter/health</code> processor in the <code>traces</code> pipeline. For optimal performance, place the filter as early as possible‚Äîright after the <code>memory_limiter</code> and before the <code>batch</code> processor. Here‚Äôs how the configuration should look:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filter/health            </span><span class=w> </span><span class=c># Filters data based on rules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces</span></span></span></code></pre></div></li></ol><p>This setup ensures that health check related spans (<code>/_healthz</code>) are filtered out early in the pipeline, reducing unnecessary noise in your telemetry data.</p></div></details><p>Validate the agent configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>traces:</code> section of your pipelines will look similar to this:</p><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(filter&lt;br&gt;fa:fa-microchip&lt;br&gt;health):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(&amp;ensp;debug&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;ensp;&amp;ensp;file&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
    %% Links
    subID1:::sub-traces
    subgraph &#34; &#34;
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO4
      PRO4 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=32-test-filter-processor>3.2 Test Filter Processor</h1><p>To test your configuration, you&rsquo;ll need to generate some trace data that includes a span named <code>"/_healthz"</code>.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>: In your <strong>Gateway terminal</strong> window start the <strong>Gateway</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config ./gateway.yaml</span></span></code></pre></div><p><strong>Start the Agent</strong>: In your <strong>Agent terminal</strong> window start the <strong>Agent</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config ./agent.yaml</span></span></code></pre></div><p><strong>Start the Loadgen</strong>: In the <strong>Loadgen terminal</strong> window, execute the following command to start the load generator with health check spans enabled:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -health -count <span class=m>5</span></span></span></code></pre></div><p>The debug output in the <strong>Agent terminal</strong> will show <code>_healthz</code> spans:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>InstrumentationScope healthz 1.0.0
</span></span><span class=line><span class=cl>Span #0
</span></span><span class=line><span class=cl>   Trace ID       : 0cce8759b5921c8f40b346b2f6e2f4b6
</span></span><span class=line><span class=cl>   Parent ID      :
</span></span><span class=line><span class=cl>   ID             : bc32bd0e4ddcb174
</span></span><span class=line><span class=cl>   Name           : /_healthz
</span></span><span class=line><span class=cl>   Kind           : Server
</span></span><span class=line><span class=cl>   Start time     : 2025-07-11 08:47:50.938703979 +0000 UTC
</span></span><span class=line><span class=cl>   End time       : 2025-07-11 08:47:51.938704091 +0000 UTC
</span></span><span class=line><span class=cl>   Status code    : Ok
</span></span><span class=line><span class=cl>   Status message : Success</span></span></code></pre></div><p>They will not be present in the <strong>Gateway</strong> debug as they are dropped by the filter processor that was configured earlier.</p><p><strong>Verify <code>agent.out</code></strong>: Using <code>jq</code>, in the <strong>Test terminal</strong>, confirm the name of the spans received by the <strong>Agent</strong>:</p><div class=tab-panel data-tab-group=R-tabs-429b968e3e7d8d89c566cc7ad2942272><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c8aa969917ef58b57f549efa1283aa75 aria-expanded=true data-tab-item=R-tab-acf06dfba3409686305aa9022a3341eb class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-429b968e3e7d8d89c566cc7ad2942272","R-tab-acf06dfba3409686305aa9022a3341eb")'>
<span class=tab-nav-text>Check spans in agent.out</span>
</button>
<button aria-controls=R-tab-id-563717bc7a6593a499dbd5c889a510c5 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-429b968e3e7d8d89c566cc7ad2942272","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-c8aa969917ef58b57f549efa1283aa75 data-tab-item=R-tab-acf06dfba3409686305aa9022a3341eb class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[] | &#34;Span \(input_line_number) found with name \(.name)&#34;&#39;</span> ./agent.out</span></span></code></pre></div></div></div><div id=R-tab-id-563717bc7a6593a499dbd5c889a510c5 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;Span 1 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 2 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 3 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 4 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 5 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 6 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 7 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 8 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 9 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 10 found with name /_healthz&#34;</span></span></code></pre></div></div></div></div></div><p><strong>Check the Gateway Debug output</strong>: Using <code>jq</code> confirm the name of the spans received by the <strong>Gateway</strong>:</p><div class=tab-panel data-tab-group=R-tabs-c3a726fc21e9fc7800f68ca44f153eed><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-829541f9cf0d0e38b076d626651c665b aria-expanded=true data-tab-item=R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c3a726fc21e9fc7800f68ca44f153eed","R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3")'>
<span class=tab-nav-text>Check spans in gateway-traces.out</span>
</button>
<button aria-controls=R-tab-id-2c4c4ef1e3f7f4ef251dc7b15e3491a6 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c3a726fc21e9fc7800f68ca44f153eed","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-829541f9cf0d0e38b076d626651c665b data-tab-item=R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[] | &#34;Span \(input_line_number) found with name \(.name)&#34;&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-2c4c4ef1e3f7f4ef251dc7b15e3491a6 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>The <code>gateway-metrics.out</code> file will not contain any spans named <code>/_healthz</code>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;Span 1 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 2 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 3 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 4 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 5 found with name /movie-validator&#34;</span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>To ensure optimal performance with the Filter processor, thoroughly understand your incoming data format and rigorously test your configuration. <strong>Use the most specific filtering criteria possible</strong> to minimize the risk of inadvertently dropping important data.</p><p>This configuration can be extended to filter spans based on various attributes, tags, or custom criteria, enhancing the OpenTelemetry Collector&rsquo;s flexibility and efficiency for your specific observability requirements.</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=4-redacting-sensitive-data>4. Redacting Sensitive Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, you&rsquo;ll learn how to configure the OpenTelemetry Collector to remove specific tags and redact sensitive data from telemetry spans. This is crucial for protecting sensitive information such as credit card numbers, personal data, or other security-related details that must be anonymized before being processed or exported.</p><p>We&rsquo;ll walk through configuring key processors in the OpenTelemetry Collector, including:</p><ul><li><strong><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/attributesprocessor/README.md rel=external>Attributes Processor</a></strong>: Modifies or removes specific span attributes.</li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/redactionprocessor/README.md rel=external><strong>Redaction Processor</strong></a>: Ensures sensitive data is sanitized before being stored or transmitted.</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>4-sensitive-data</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Copy <code>*.yaml</code> from the <code>3-dropping-spans</code> directory into <code>4-sensitive-data</code>. Your updated directory structure will now look like this:</p><div class=tab-panel data-tab-group=R-tabs-fac61410b1d4a8275f3bd3920c110eba><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-526922e2b856f6effedf337716f1540b aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fac61410b1d4a8275f3bd3920c110eba","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-526922e2b856f6effedf337716f1540b data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Sensitive Data</h1><article class=default><header class=headline></header><h1 id=41-configuration>4.1 Configuration</h1><p>In this step, we&rsquo;ll modify <code>agent.yaml</code> to include the <code>attributes</code> and <code>redaction</code> processors. These processors will help ensure that sensitive data within span attributes is properly handled before being logged or exported.</p><p>Previously, you may have noticed that some span attributes displayed in the console contained personal and sensitive data. We&rsquo;ll now configure the necessary processors to filter out and redact this information effectively.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>     -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>     -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>     -&gt; user.account_password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>     -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>     -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>     -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>  {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;traces&#34;, &#34;name&#34;: &#34;debug&#34;}</span></span></code></pre></div><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Switch to your <strong>Agent terminal</strong> window and open the <code>agent.yaml</code> file in your editor. We‚Äôll add two processors to enhance the security and privacy of your telemetry data.</p><p><strong>1. Add an <code>attributes</code> Processor</strong>: The <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/attributesprocessor rel=external><strong>Attributes Processor</strong></a> allows you to modify span attributes (tags) by updating, deleting, or hashing their values. This is particularly useful for obfuscating sensitive information before it is exported.</p><p>In this step, we‚Äôll:</p><ol><li><strong>Update</strong> the <code>user.phone_number</code> attribute to a static value <code>("UNKNOWN NUMBER")</code>.</li><li><strong>Hash</strong> the <code>user.email</code> attribute to ensure the original email is not exposed.</li><li><strong>Delete</strong> the <code>user.password</code> attribute to remove it entirely from the span.</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/update</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>                           </span><span class=c># Actions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.phone_number        </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update                </span><span class=w> </span><span class=c># Update action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;UNKNOWN NUMBER&#34;</span><span class=w>        </span><span class=c># New value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.email               </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>hash                  </span><span class=w> </span><span class=c># Hash the email value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.password            </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>delete                </span><span class=w> </span><span class=c># Delete the password</span></span></span></code></pre></div><p><strong>2. Add a <code>redaction</code> Processor</strong>: The <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/redactionprocessor rel=external><strong>Redaction Processor</strong></a> detects and redacts sensitive data in span attributes based on predefined patterns, such as credit card numbers or other personally identifiable information (PII).</p><p>In this step:</p><ul><li><p>We set <code>allow_all_keys: true</code> to ensure all attributes are processed (if set to <code>false</code>, only explicitly allowed keys are retained).</p></li><li><p>We define <code>blocked_values</code> with regular expressions to detect and redact <strong>Visa</strong> and <strong>MasterCard</strong> credit card numbers.</p></li><li><p>The <code>summary: debug</code> option logs detailed information about the redaction process for debugging purposes.</p></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>redaction/redact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>allow_all_keys</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>               </span><span class=c># If false, only allowed keys will be retained</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>blocked_values</span><span class=p>:</span><span class=w>                    </span><span class=c># List of regex patterns to block</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;\b4[0-9]{3}[\s-]?[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}\b&#39;</span><span class=w>       </span><span class=c># Visa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;\b5[1-5][0-9]{2}[\s-]?[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}\b&#39;</span><span class=w>  </span><span class=c># MasterCard</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=l>debug                    </span><span class=w> </span><span class=c># Show debug details about redaction</span></span></span></code></pre></div><p><strong>Update the <code>traces</code> Pipeline</strong>: Integrate both processors into the <code>traces</code> pipeline. Make sure that you comment out the redaction processor at first (we will enable it later in a separate exercise). Your configuration should look like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- redaction/redact               # Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div></div></details><p>Validate the agent configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>traces:</code> section of your pipelines will look similar to this:</p><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRML(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRRD(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
      PRRS(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRUP(attributes&lt;br&gt;fa:fa-microchip&lt;br&gt;update):::processor
      EXP1(otlphttp&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;ensp;&amp;ensp;debug&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP3(file&lt;br&gt;fa:fa-upload):::exporter

    %% Links
    subID1:::sub-traces
    subgraph &#34; &#34;
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRML
      PRML --&gt; PRUP
      PRUP --&gt; PRRD
      PRRD --&gt; PRRS
      PRRS --&gt; EXP2
      PRRS --&gt; EXP3
      PRRS --&gt; EXP1
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=42-test-attribute-processor>4.2 Test Attribute Processor</h1><p>In this exercise, we will <strong>delete</strong> the <code>user.account_password</code>, <strong>update</strong> the <code>user.phone_number</code> <strong>attribute</strong> and <strong>hash</strong> the <code>user.email</code> in the span data before it is exported by the <strong>Agent</strong>.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>: In your <strong>Gateway terminal</strong> window start the <strong>Gateway</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div><p><strong>Start the Agent</strong>: In your <strong>Agent terminal</strong> window start the <strong>Agent</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div><p><strong>Start the Load Generator</strong>: In the <strong>Loadgen terminal</strong> window start the <code>loadgen</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p><strong>Check the debug output</strong>: For both the <strong>Agent</strong> and <strong>Gateway</strong> confirm that <code>user.account_password</code> has been removed, and both <code>user.phone_number</code> & <code>user.email</code> have been updated:</p><div class=tab-panel data-tab-group=R-tabs-bd3573aa1f9b68096332c8f0343c2eb5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-dfd22f7a5eab444d5825cd5cf78549a4 aria-expanded=true data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bd3573aa1f9b68096332c8f0343c2eb5","R-tab-544b1806b43b802fec2d6ad565a4b9ad")'>
<span class=tab-nav-text>New Debug Output</span>
</button>
<button aria-controls=R-tab-id-00f0bcb3127df066e4547f9b0a71666a aria-expanded=false data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-bd3573aa1f9b68096332c8f0343c2eb5","R-tab-8269dab52767aefab4c11aaa5d8bb8c8")'>
<span class=tab-nav-text>Original Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-dfd22f7a5eab444d5825cd5cf78549a4 data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>   -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(UNKNOWN NUMBER)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(51.71)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(5555 5555 5555 4444)</span></span></code></pre></div></div></div><div id=R-tab-id-00f0bcb3127df066e4547f9b0a71666a data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>    -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>    -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>    -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>    -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>    -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>    -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>    -&gt; payment.amount: Double(95.22)</span></span></code></pre></div></div></div></div></div><p><strong>Check file output</strong>: Using <code>jq</code> validate that <code>user.account_password</code> has been removed, and <code>user.phone_number</code> & <code>user.email</code> have been updated in <code>gateway-taces.out</code>:</p><div class=tab-panel data-tab-group=R-tabs-7215faea24aa961cbbefa18074628fd1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-d1e3ad3c5a248c886cbf0daecbd0501c aria-expanded=true data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7215faea24aa961cbbefa18074628fd1","R-tab-a1f23743b82743728073a9be5706f4e0")'>
<span class=tab-nav-text>Validate attribute changes</span>
</button>
<button aria-controls=R-tab-id-ce3abd20b1144c16b246b01d1b34297b aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7215faea24aa961cbbefa18074628fd1","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-d1e3ad3c5a248c886cbf0daecbd0501c data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[].attributes[] | select(.key == &#34;user.password&#34; or .key == &#34;user.phone_number&#34; or .key == &#34;user.email&#34;) | {key: .key, value: .value.stringValue}&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-ce3abd20b1144c16b246b01d1b34297b data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Notice that the <code>user.account_password</code> has been removed, and the <code>user.phone_number</code> & <code>user.email</code> have been updated:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.phone_number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;UNKNOWN NUMBER&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.email&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=43-test-redaction-processor>4.3 Test Redaction Processor</h1><p>The <code>redaction</code> processor gives precise control over which attributes and values are <strong>permitted</strong> or <strong>removed</strong> from telemetry data.</p><p>In this exercise, we will <strong>redact</strong> the <code>user.visa</code> & <code>user.mastercard</code> values in the span data before it is exported by the <strong>Agent</strong>.<details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>: In your <strong>Gateway terminal</strong> window start the <strong>Gateway</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div><p><strong>Enable the <code>redaction/redact</code> processor</strong>: In the <strong>Agent terminal</strong> window, edit <code>agent.yaml</code> and remove the <code>#</code> we inserted in the previous exercise.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div><p><strong>Start the Agent</strong>: In your <strong>Agent terminal</strong> window start the <strong>Agent</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div><p><strong>Start the Load Generator</strong>: In the <strong>Loadgen terminal</strong> window start the <code>loadgen</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p><strong>Check the debug output</strong>: For both the <strong>Agent</strong> and <strong>Gateway</strong> confirm the values for <code>user.visa</code> & <code>user.mastercard</code> have been updated. Notice <code>user.amex</code> attribute value was <strong>NOT</strong> redacted because a matching regex pattern was not added to <code>blocked_values</code></p><div class=tab-panel data-tab-group=R-tabs-ebe7d7f684bd0d344693b8631a17dc16><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f791cb12a87b536da08a2a8cc58a04f4 aria-expanded=true data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ebe7d7f684bd0d344693b8631a17dc16","R-tab-544b1806b43b802fec2d6ad565a4b9ad")'>
<span class=tab-nav-text>New Debug Output</span>
</button>
<button aria-controls=R-tab-id-22dadc2f87e435ed1c821ec1f5a1b266 aria-expanded=false data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ebe7d7f684bd0d344693b8631a17dc16","R-tab-8269dab52767aefab4c11aaa5d8bb8c8")'>
<span class=tab-nav-text>Original Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f791cb12a87b536da08a2a8cc58a04f4 data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>   -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(UNKNOWN NUMBER)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(69.71)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(****)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(****)
</span></span><span class=line><span class=cl>   -&gt; redaction.masked.keys: Str(user.mastercard,user.visa)
</span></span><span class=line><span class=cl>   -&gt; redaction.masked.count: Int(2)</span></span></code></pre></div></div></div><div id=R-tab-id-22dadc2f87e435ed1c821ec1f5a1b266 data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>    -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>    -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>    -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>    -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>    -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>    -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>    -&gt; payment.amount: Double(65.54)</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>By including <code>summary:debug</code> in the redaction processor, the debug output will include summary information about which matching key values were redacted, along with the count of values that were masked.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>     -&gt; redaction.masked.keys: Str(user.mastercard,user.visa)
</span></span><span class=line><span class=cl>     -&gt; redaction.masked.count: Int(2)</span></span></code></pre></div></div></details><p><strong>Check file output</strong>: Using <code>jq</code> verify that <code>user.visa</code> & <code>user.mastercard</code> have been updated in the <code>gateway-traces.out</code>.</p><div class=tab-panel data-tab-group=R-tabs-5d25a76d10259b77640f38e0153eb5eb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ad6db0b3de0d4c683862cad25d293ca1 aria-expanded=true data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5d25a76d10259b77640f38e0153eb5eb","R-tab-a1f23743b82743728073a9be5706f4e0")'>
<span class=tab-nav-text>Validate attribute changes</span>
</button>
<button aria-controls=R-tab-id-0c646d07121857bad38a1e09b31cedaf aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5d25a76d10259b77640f38e0153eb5eb","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-ad6db0b3de0d4c683862cad25d293ca1 data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[].attributes[] | select(.key == &#34;user.visa&#34; or .key == &#34;user.mastercard&#34; or .key == &#34;user.amex&#34;) | {key: .key, value: .value.stringValue}&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-0c646d07121857bad38a1e09b31cedaf data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Notice that <code>user.amex</code> has not been redacted because a matching regex pattern was not added to <code>blocked_values</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.visa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;****&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.amex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;3782 822463 10005&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.mastercard&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;****&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>These are just a couple of examples of how <code>attributes</code> and <code>redaction</code> processors can be configured to protect sensitive data.</p></div></details></p><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=5-transform-data>5. Transform Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>The <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/transformprocessor/README.md rel=external><strong>Transform Processor</strong></a> lets you modify telemetry data‚Äîlogs, metrics, and traces‚Äîas it flows through the pipeline. Using the <strong>OpenTelemetry Transformation Language (OTTL)</strong>, you can filter, enrich, and transform data on the fly without touching your application code.</p><p>In this exercise we‚Äôll update <code>gateway.yaml</code> to include a <strong>Transform Processor</strong> that will:</p><ul><li><strong>Filter</strong> log resource attributes.</li><li><strong>Parse</strong> JSON structured log data into attributes.</li><li><strong>Set</strong> log severity levels based on the log message body.</li></ul><p>You may have noticed that in previous logs, fields like <code>SeverityText</code> and <code>SeverityNumber</code> were undefined. This is typical of the <code>filelog</code> receiver. However, the severity is embedded within the log body e.g.:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>SeverityText: 
</span></span><span class=line><span class=cl>SeverityNumber: Unspecified(0)
</span></span><span class=line><span class=cl>Body: Str(2025-01-31 15:49:29 [WARN] - Do or do not, there is no try.)</span></span></code></pre></div><p>Logs often contain structured data encoded as JSON within the log body. Extracting these fields into attributes allows for better indexing, filtering, and querying. Instead of manually parsing JSON in downstream systems, OTTL enables automatic transformation at the telemetry pipeline level.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>5-transform-data</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Copy <code>*.yaml</code> from the <code>4-sensitve-data</code> directory into <code>5-transform-data</code>. Your updated directory structure will now look like this:</p><div class=tab-panel data-tab-group=R-tabs-63ab7063e510c87ae53a4b03805dbf40><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-66be0315fba52e2f221593a6b1179cb4 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-63ab7063e510c87ae53a4b03805dbf40","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-66be0315fba52e2f221593a6b1179cb4 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Transform Data</h1><article class=default><header class=headline></header><h1 id=51-configuration>5.1 Configuration</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Add a <code>transform</code> processor</strong>: Switch to your <strong>Gateway terminal</strong> window and edit the <code>gateway.yaml</code> and add the following <code>transform</code> processor:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>transform/logs</span><span class=p>:</span><span class=w>                      </span><span class=c># Processor Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>log_statements</span><span class=p>:</span><span class=w>                    </span><span class=c># Log Processing Statements</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>resource             </span><span class=w> </span><span class=c># Log Context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>statements</span><span class=p>:</span><span class=w>                    </span><span class=c># List of attribute keys to keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>keep_keys(attributes, [&#34;com.splunk.sourcetype&#34;, &#34;host.name&#34;, &#34;otelcol.service.mode&#34;])</span></span></span></code></pre></div><p>By using the <code>-context: resource</code> key we are targeting the <code>resourceLog</code> attributes of logs.</p><p>This configuration ensures that only the relevant resource attributes (<code>com.splunk.sourcetype</code>, <code>host.name</code>, <code>otelcol.service.mode</code>) are retained, improving log efficiency and reducing unnecessary metadata.</p><p><strong>Adding a Context Block for Log Severity Mapping</strong>: To properly set the <code>severity_text</code> and <code>severity_number</code> fields of a log record, we add a <code>log</code> context block within <code>log_statements</code>. This configuration extracts the <code>level</code> value from the log body, maps it to <code>severity_text</code>, and assigns the corresponding <code>severity_number</code> based on the log level:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span>- <span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>log                  </span><span class=w> </span><span class=c># Log Context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>statements</span><span class=p>:</span><span class=w>                    </span><span class=c># Transform Statements Array</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(cache, ParseJSON(body)) where IsMatch(body, &#34;^\\{&#34;) </span><span class=w> </span><span class=c># Parse JSON log body into a cache object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>flatten(cache, &#34;&#34;)                                       </span><span class=w> </span><span class=c># Flatten nested JSON structure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>merge_maps(attributes, cache, &#34;upsert&#34;)                  </span><span class=w> </span><span class=c># Merge cache into attributes, updating existing keys</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_text, attributes[&#34;level&#34;])                  </span><span class=w> </span><span class=c># Set severity_text from the &#34;level&#34; attribute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 1) where severity_text == &#34;TRACE&#34;   </span><span class=w> </span><span class=c># Map severity_text to severity_number</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 5) where severity_text == &#34;DEBUG&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 9) where severity_text == &#34;INFO&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 13) where severity_text == &#34;WARN&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 17) where severity_text == &#34;ERROR&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 21) where severity_text == &#34;FATAL&#34;</span></span></span></code></pre></div><p>The <code>merge_maps</code> function is used to combine two maps (dictionaries) into one. In this case, it merges the <code>cache</code> object (containing parsed JSON data from the log body) into the <code>attributes</code> map.</p><ul><li><strong>Parameters</strong>:<ul><li><code>attributes</code>: The target map where the data will be merged.</li><li><code>cache</code>: The source map containing the parsed JSON data.</li><li><code>"upsert"</code>: This mode ensures that if a key already exists in the <code>attributes</code> map, its value will be updated with the value from <code>cache</code>. If the key does not exist, it will be inserted.</li></ul></li></ul><p>This step is crucial because it ensures that all relevant fields from the log body (e.g., <code>level</code>, <code>message</code>, etc.) are added to the <code>attributes</code> map, making them available for further processing or exporting.</p><p><strong>Summary of Key Transformations</strong>:</p><ul><li><strong>Parse JSON</strong>: Extracts structured data from the log body.</li><li><strong>Flatten JSON</strong>: Converts nested JSON objects into a flat structure.</li><li><strong>Merge Attributes</strong>: Integrates extracted data into log attributes.</li><li><strong>Map Severity Text</strong>: Assigns severity_text from the log‚Äôs level attribute.</li><li><strong>Assign Severity Numbers</strong>: Converts severity levels into standardized numerical values.</li></ul><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>You should have a <strong>single</strong> <code>transform</code> processor containing two context blocks: one whose context is for <code>resource</code> and one whose context is for <code>log</code>.</p></div></details><p>This configuration ensures that log severity is correctly extracted, standardized, and structured for efficient processing.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>This method of mapping all JSON fields to top-level attributes should only be used for <strong>testing and debugging OTTL</strong>. It will result in high cardinality in a production scenario.</p></div></details><p><strong>Update the <code>logs</code> pipeline</strong>: Add the <code>transform/logs:</code> processor into the <code>logs:</code> pipeline so your configuration looks like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>                         </span><span class=c># Logs pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp                     </span><span class=w> </span><span class=c># OTLP receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>                 </span><span class=c># Processors for logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                    </span><span class=w> </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/logs</span></span></span></code></pre></div></div></details><p>Validate the agent configuration using <a href=https://otelbin.io/ rel=external><strong>https://otelbin.io</strong></a>. For reference, the <code>logs:</code> section of your pipelines will look similar to this:</p><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(transform&lt;br&gt;fa:fa-microchip&lt;br&gt;logs):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(file&lt;br&gt;fa:fa-upload&lt;br&gt;logs):::exporter
      EXP2(&amp;ensp;&amp;ensp;debug&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    %% Links
    subID1:::sub-logs
    subgraph &#34; &#34;
      subgraph subID1[**Logs**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO3
      PRO3 --&gt; PRO4
      PRO4 --&gt; PRO5
      PRO5 --&gt; EXP2
      PRO5 --&gt; EXP1
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=52-setup-environment>5.2 Setup Environment</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>: In the <strong>Gateway terminal</strong> run:</p><div class=tab-panel data-tab-group=R-tabs-1d0cfd1cf125c3880327809f96fba192><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3183c08bb947207e418d3b2930a9e420 aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1d0cfd1cf125c3880327809f96fba192","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-3183c08bb947207e418d3b2930a9e420 data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Agent</strong>: In the <strong>Agent terminal</strong> run:</p><div class=tab-panel data-tab-group=R-tabs-39d21eb85918c0aa819b65aa11b090e6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f33370d05a4355cd6b222803f53b2182 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-39d21eb85918c0aa819b65aa11b090e6","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-f33370d05a4355cd6b222803f53b2182 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Load Generator</strong>: In the <strong>Loadgen terminal</strong> window, execute the following command to start the load generator with <strong>JSON enabled</strong>:</p><div class=tab-panel data-tab-group=R-tabs-2844582e7f1f1c5825fad1c723ac8a57><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2def8c54a90967195d0e82afb85c1adb aria-expanded=true data-tab-item=R-tab-f39d270d077420f218253d70fb4d013a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2844582e7f1f1c5825fad1c723ac8a57","R-tab-f39d270d077420f218253d70fb4d013a")'>
<span class=tab-nav-text>Log Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-2def8c54a90967195d0e82afb85c1adb data-tab-item=R-tab-f39d270d077420f218253d70fb4d013a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -logs -json -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p>The <code>loadgen</code> will write 5 log lines to <code>./quotes.log</code> in JSON format.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=53-test-transform-processor>5.3 Test Transform Processor</h1><p>This test verifies that the <code>com.splunk/source</code> and <code>os.type</code> metadata have been <strong>removed</strong> from the log resource attributes before being exported by the <strong>Agent</strong>. Additionally, the test ensures that:</p><ol><li>The log body is parsed to extract severity information.<ul><li><code>SeverityText</code> and <code>SeverityNumber</code> are set on the <code>LogRecord</code>.</li></ul></li><li>JSON fields from the log body are promoted to log <code>attributes</code>.</li></ol><p>This ensures proper metadata filtering, severity mapping, and structured log enrichment before exporting.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Check the debug output</strong>: For both the <strong>Agent</strong> and <strong>Gateway</strong> confirm that <code>com.splunk/source</code> and <code>os.type</code> have been removed:</p><div class=tab-panel data-tab-group=R-tabs-96c04650e4be37a6bff52a9fde8909ce><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4ed891d3a39f4dfd79db527379fdea1f aria-expanded=true data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-96c04650e4be37a6bff52a9fde8909ce","R-tab-e35301d59bcd0f79d44c5c0a86f077c6")'>
<span class=tab-nav-text>Gateway Debug Output</span>
</button>
<button aria-controls=R-tab-id-faf94541cdccfa41defafde4810132bd aria-expanded=false data-tab-item=R-tab-42538fea3c4f3a8e2d3b752dbdb349e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-96c04650e4be37a6bff52a9fde8909ce","R-tab-42538fea3c4f3a8e2d3b752dbdb349e9")'>
<span class=tab-nav-text>Agent Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-4ed891d3a39f4dfd79db527379fdea1f data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Resource attributes:
</span></span><span class=line><span class=cl>   -&gt; com.splunk.sourcetype: Str(quotes)
</span></span><span class=line><span class=cl>   -&gt; host.name: Str(workshop-instance)
</span></span><span class=line><span class=cl>   -&gt; otelcol.service.mode: Str(agent)</span></span></code></pre></div></div></div><div id=R-tab-id-faf94541cdccfa41defafde4810132bd data-tab-item=R-tab-42538fea3c4f3a8e2d3b752dbdb349e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Resource attributes:
</span></span><span class=line><span class=cl>   -&gt; com.splunk.source: Str(./quotes.log)
</span></span><span class=line><span class=cl>   -&gt; com.splunk.sourcetype: Str(quotes)
</span></span><span class=line><span class=cl>   -&gt; host.name: Str(workshop-instance)
</span></span><span class=line><span class=cl>   -&gt; os.type: Str(linux)
</span></span><span class=line><span class=cl>   -&gt; otelcol.service.mode: Str(agent)</span></span></code></pre></div></div></div></div></div><p>For both the <strong>Agent</strong> and <strong>Gateway</strong> confirm that <code>SeverityText</code> and <code>SeverityNumber</code> in the <code>LogRecord</code> is now defined with the severity <code>level</code> from the log body. Confirm that the JSON fields from the body can be accessed as top-level log <code>Attributes</code>:</p><div class=tab-panel data-tab-group=R-tabs-48394eaf2d0063fe9a82b43c0c6130d2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-72fd095bb78733b57b1153e3c238b448 aria-expanded=true data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-48394eaf2d0063fe9a82b43c0c6130d2","R-tab-e35301d59bcd0f79d44c5c0a86f077c6")'>
<span class=tab-nav-text>Gateway Debug Output</span>
</button>
<button aria-controls=R-tab-id-372e4f4cbfb940be2e9fe09e12a03697 aria-expanded=false data-tab-item=R-tab-ead80b063f3a982e1fec2398ed5eb0e3 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-48394eaf2d0063fe9a82b43c0c6130d2","R-tab-ead80b063f3a982e1fec2398ed5eb0e3")'>
<span class=tab-nav-text>Agemt Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-72fd095bb78733b57b1153e3c238b448 data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>SeverityText: WARN
</span></span><span class=line><span class=cl>SeverityNumber: Warn(13)
</span></span><span class=line><span class=cl>Body: Str({&#34;level&#34;:&#34;WARN&#34;,&#34;message&#34;:&#34;Your focus determines your reality.&#34;,&#34;movie&#34;:&#34;SW&#34;,&#34;timestamp&#34;:&#34;2025-03-07 11:17:26&#34;})
</span></span><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; log.file.path: Str(quotes.log)
</span></span><span class=line><span class=cl>     -&gt; level: Str(WARN)
</span></span><span class=line><span class=cl>     -&gt; message: Str(Your focus determines your reality.)
</span></span><span class=line><span class=cl>     -&gt; movie: Str(SW)
</span></span><span class=line><span class=cl>     -&gt; timestamp: Str(2025-03-07 11:17:26)
</span></span><span class=line><span class=cl>&lt;/snip&gt;</span></span></code></pre></div></div></div><div id=R-tab-id-372e4f4cbfb940be2e9fe09e12a03697 data-tab-item=R-tab-ead80b063f3a982e1fec2398ed5eb0e3 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>SeverityText:
</span></span><span class=line><span class=cl>SeverityNumber: Unspecified(0)
</span></span><span class=line><span class=cl>Body: Str({&#34;level&#34;:&#34;WARN&#34;,&#34;message&#34;:&#34;Your focus determines your reality.&#34;,&#34;movie&#34;:&#34;SW&#34;,&#34;timestamp&#34;:&#34;2025-03-07 11:17:26&#34;})
</span></span><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; log.file.path: Str(quotes.log)
</span></span><span class=line><span class=cl>&lt;/snip&gt;</span></span></code></pre></div></div></div></div></div><p><strong>Check file output</strong>: In the new <code>gateway-logs.out</code> file verify the data has been transformed:</p><div class=tab-panel data-tab-group=R-tabs-cd77128420a9cc71fe75a9043b963b43><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fe8ee2151e916575d7c2269bc7bf2ff5 aria-expanded=true data-tab-item=R-tab-58659ac8bbb7a3ec80b7df1029812298 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-cd77128420a9cc71fe75a9043b963b43","R-tab-58659ac8bbb7a3ec80b7df1029812298")'>
<span class=tab-nav-text>jq Query</span>
</button>
<button aria-controls=R-tab-id-761753e3b192ec7d7afa4a451d90ec29 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-cd77128420a9cc71fe75a9043b963b43","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-fe8ee2151e916575d7c2269bc7bf2ff5 data-tab-item=R-tab-58659ac8bbb7a3ec80b7df1029812298 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;[.resourceLogs[].scopeLogs[].logRecords[] | {severityText, severityNumber, body: .body.stringValue}]&#39;</span> gateway-logs.out</span></span></code></pre></div></div></div><div id=R-tab-id-761753e3b192ec7d7afa4a451d90ec29 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;DEBUG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;DEBUG\&#34;,\&#34;message\&#34;:\&#34;All we have to decide is what to do with the time that is given us.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;WARN&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;WARN\&#34;,\&#34;message\&#34;:\&#34;The Force will be with you. Always.\&#34;,\&#34;movie\&#34;:\&#34;SW\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;ERROR&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;ERROR\&#34;,\&#34;message\&#34;:\&#34;One does not simply walk into Mordor.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;DEBUG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;DEBUG\&#34;,\&#34;message\&#34;:\&#34;Do or do not, there is no try.\&#34;,\&#34;movie\&#34;:\&#34;SW\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;ERROR&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;ERROR\&#34;,\&#34;message\&#34;:\&#34;There is some good in this world, and it&#39;s worth fighting for.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=6-routing-data>6. Routing Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>The <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/routingconnector rel=external><strong>Routing Connector</strong></a> in OpenTelemetry is a powerful feature that allows you to direct data (<code>traces</code>, <code>metrics</code>, or <code>logs</code>) to different pipelines/destinations based on specific criteria. This is especially useful in scenarios where you want to apply different processing or exporting logic to subsets of your telemetry data.</p><p>For example, you might want to send <em>production</em> data to one exporter while directing <em>test</em> or <em>development</em> data to another. Similarly, you could route certain spans based on their attributes, such as service name, environment, or span name, to apply custom processing or storage logic.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>6-routing-data</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Copy <code>*.yaml</code> from the <code>5-transform-data</code> directory into <code>6-routing-data</code>. Your updated directory structure will now look like this:</p><div class=tab-panel data-tab-group=R-tabs-454a9c3cac78380402546734f703e23c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fe8da3b9e9e164980fc9accef57d312d aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-454a9c3cac78380402546734f703e23c","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-fe8da3b9e9e164980fc9accef57d312d data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><p>Next, we will configure the routing connector and the respective pipelines.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Routing Data</h1><article class=default><header class=headline></header><h1 id=61-configure-the-routing-connector>6.1 Configure the Routing Connector</h1><p>In this exercise, you will configure the <strong>Routing Connector</strong> in the <code>gateway.yaml</code>. The Routing Connector can route metrics, traces, and logs based on any attributes, we will focus exclusively on trace routing based on the <code>deployment.environment</code> attribute (though any span/log/metirc attribute can be used).</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Add new <code>file</code> exporters</strong>: The <code>routing</code> connector requires different targets for routing. In the <strong>Gateway terminal</strong> create two new file exporters, <code>file/traces/route1-regular</code> and <code>file/traces/route2-security</code>, to ensure data is directed correctly in the <code>exporters</code> section of the <code>gateway.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces/route1-regular</span><span class=p>:</span><span class=w>                     </span><span class=c># Exporter for regular traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces-route1-regular.out&#34;</span><span class=w>   </span><span class=c># Path for saving trace data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces/route2-security</span><span class=p>:</span><span class=w>                    </span><span class=c># Exporter for security traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces-route2-security.out&#34;</span><span class=w>  </span><span class=c># Path for saving trace data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                                 </span><span class=c># Overwrite the file each time </span></span></span></code></pre></div><p><strong>Enable Routing</strong> by adding the <code>routing</code> connector. In OpenTelemetry configuration files, <code>connectors</code> have their own dedicated section, similar to receivers and processors.</p><p>Find and uncomment the <code>#connectors:</code> section. Then, add the following below the <code>connectors:</code> section:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>routing</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>default_pipelines</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>traces/route1-regular] </span><span class=w> </span><span class=c># Default pipeline if no rule matches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>error_mode</span><span class=p>:</span><span class=w> </span><span class=l>ignore                         </span><span class=w> </span><span class=c># Ignore errors in routing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>table</span><span class=p>:</span><span class=w>                                      </span><span class=c># Define routing rules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Routes spans to a target pipeline if the resourceSpan attribute matches the rule</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>statement</span><span class=p>:</span><span class=w> </span><span class=l>route() where attributes[&#34;deployment.environment&#34;] == &#34;security-applications&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pipelines</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>traces/route2-security]    </span><span class=w> </span><span class=c># Security target pipeline </span></span></span></code></pre></div></div></details><p>The default pipeline in the configuration file works at a Catch all. It will be the routing target for any data (spans in our case) that do not match a rule in the routing rules table, In this table you find the pipeline that is the target for any span that matches the following rule: <code>["deployment.environment"] == "security-applications"</code></p><p>With the <code>routing</code> configuration complete, the next step is to configure the <code>pipelines</code> to apply these routing rules.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=62-configuring-the-pipelines>6.2 Configuring the Pipelines</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Update the original <code>traces</code> pipeline to use routing</strong>:</p><ol><li><p>To enable <code>routing</code>, update the original <code>traces</code> pipeline to use <code>routing</code> as the only exporter. This ensures all span data is sent through the <strong>Routing Connector</strong> for evaluation and then onwards to connected pipelines. Also, remove <strong>all</strong> processors and replace it with an empty array (<code>[]</code>) as this will now behandeld in the <code>traces/route1-regular</code> and <code>traces/route2-security</code> pipelines, allowing for custom behaviour for each route. Your <code>traces:</code> configuration should look like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>traces</span><span class=p>:</span><span class=w>                       </span><span class=c># Traces pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>otlp                     </span><span class=w> </span><span class=c># OTLP receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>              </span><span class=c># Processors for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>routing</span></span></span></code></pre></div></li></ol><p><strong>Add both the <code>route1-regular</code> and <code>route2-security</code> traces pipelines</strong> below the existing <code>traces</code> pipeline:</p><ol><li><p><strong>Configure Route1-regular pipeline</strong>: This pipeline will handle all spans that have <strong>no match</strong> in the routing table in the connector.
Notice this uses <code>routing</code> as its only receiver and will recieve data thought its <code>connection</code> from the original traces pipeline.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces/route1-regular</span><span class=p>:</span><span class=w>         </span><span class=c># Default pipeline for unmatched spans</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>routing                   </span><span class=w> </span><span class=c># Receive data from the routing connector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter            </span><span class=w> </span><span class=c># Memory Limiter Processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode         </span><span class=w> </span><span class=c># Adds collector mode metadata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                     </span><span class=w> </span><span class=c># Debug Exporter </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces/route1-regular</span><span class=w> </span><span class=c># File Exporter for unmatched spans </span></span></span></code></pre></div></li><li><p><strong>Add the route2-security pipeline</strong>: This pipeline processes all spans that do match our rule <code>"[deployment.environment"] == "security-applications"</code> in the the routing rule. This pipeline is also using <code>routing</code> as its receiver. Add this pipline below the <code>traces/route1-regular</code> one.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces/route2-security</span><span class=p>:</span><span class=w>         </span><span class=c># Default pipeline for unmatched spans</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>routing                    </span><span class=w> </span><span class=c># Receive data from the routing connector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter             </span><span class=w> </span><span class=c># Memory Limiter Processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode          </span><span class=w> </span><span class=c># Adds collector mode metadata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                      </span><span class=w> </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces/route2-security</span><span class=w> </span><span class=c># File exporter for unmatched spans</span></span></span></code></pre></div></li></ol></div></details><p>Validate the agent configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>traces:</code> section of your pipelines will look similar to this:</p><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO2(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      PRO6(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
      EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP4(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
      ROUTE1(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-export
      ROUTE2(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive
      ROUTE3(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive
    %% Links
    subID1:::sub-traces
    subID2:::sub-traces
    subID3:::sub-traces
    subgraph &#34; &#34;
    direction LR
      subgraph subID1[**Traces**]
      REC1 --&gt; ROUTE1
      end
      subgraph subID2[**Traces/route2-security**]
      ROUTE1 --&gt; ROUTE2
      ROUTE2 --&gt; PRO1
      PRO1 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end
      subgraph subID3[**Traces/route1-regular**]
      ROUTE1 --&gt; ROUTE3
      ROUTE3 --&gt; PRO2
      PRO2 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=63-test-routing-connector>6.3 Test Routing Connector</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>In this section, we will test the <code>routing</code> rule configured for the <strong>Gateway</strong>. The expected result is that a <code>span</code> generated by the <code>loadgen</code> that match the <code>"[deployment.environment"] == "security-applications"</code> rule will be sent to the <code>gateway-traces-route2-security.out</code> file.</p><p><strong>Start the Gateway</strong>: In your <strong>Gateway terminal</strong> window start the <strong>Gateway</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config gateway.yaml</span></span></code></pre></div><p><strong>Start the Agent</strong>: In your <strong>Agent terminal</strong> window start the <strong>Agent</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config agent.yaml</span></span></code></pre></div><p><strong>Send a Regular Span</strong>: In the <strong>Loadgen terminal</strong> window send a regular span using the <code>loadgen</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p>Both the <strong>Agent</strong> and <strong>Gateway</strong> will display debug information. The gateway will also generate a new <code>gateway-traces-route1-regular.out</code> file, as this is now the designated destination for regular spans.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you check <code>gateway-traces-route1-regular.out</code>, it will contain the <code>span</code> sent by <code>loadgen</code>. You will also see an empty <code>gateway-traces-route2-security..out</code> file, as the routing configuration creates output files immediately, even if no matching spans have been processed yet.</p></div></details><p><strong>Send a Security Span</strong>: In the <strong>Loadgen terminal</strong> window send a security span using the <code>security</code> flag:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -security -count <span class=m>1</span></span></span></code></pre></div><p>Again, both the <strong>Agent</strong> and <strong>Gateway</strong> should display debug information, including the span you just sent. This time, the <strong>Gateway</strong> will write a line to the <code>gateway-traces-route2-security.out</code> file, which is designated for spans where the <code>deployment.environment</code> resource attribute matches <code>"security-applications"</code>.</p><div class=tab-panel data-tab-group=R-tabs-0129eea9cac538e382f8c65cd431b06b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-5e2c44cfb20d3d8bff19c8a052dabdc9 aria-expanded=true data-tab-item=R-tab-ad0c2b09920ec6396d478d255cb39b4d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0129eea9cac538e382f8c65cd431b06b","R-tab-ad0c2b09920ec6396d478d255cb39b4d")'>
<span class=tab-nav-text>Validate resource attribute matches</span>
</button>
<button aria-controls=R-tab-id-721c38dec68b472b330d8a19021ce2c6 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-0129eea9cac538e382f8c65cd431b06b","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-5e2c44cfb20d3d8bff19c8a052dabdc9 data-tab-item=R-tab-ad0c2b09920ec6396d478d255cb39b4d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[] as $resource | $resource.scopeSpans[].spans[] | {spanId: .spanId, deploymentEnvironment: ($resource.resource.attributes[] | select(.key == &#34;deployment.environment&#34;) | .value.stringValue)}&#39;</span> gateway-traces-route2-security.out</span></span></code></pre></div></div></div><div id=R-tab-id-721c38dec68b472b330d8a19021ce2c6 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;spanId&#34;</span><span class=p>:</span><span class=s2>&#34;cb799e92e26d5782&#34;</span><span class=p>,</span><span class=nt>&#34;deploymentEnvironment&#34;</span><span class=p>:</span><span class=s2>&#34;security-applications&#34;</span><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>You can repeat this scenario multiple times, and each trace will be written to its corresponding output file.</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details><h2 id=conclusion>Conclusion<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this section, we successfully tested the routing connector in the gateway by sending different spans and verifying their destinations.</p><ul><li><p><strong>Regular spans</strong> were correctly routed to <code>gateway-traces-route1-regular.out</code>, confirming that spans without a matching <code>deployment.environment</code> attribute follow the default pipeline.</p></li><li><p><strong>Security-related spans</strong> were routed to <code>gateway-traces-route2-security.out</code>, demonstrating that the routing rule based on <code>"deployment.environment": "security-applications"</code> works as expected.</p></li></ul><p>By inspecting the output files, we confirmed that the OpenTelemetry Collector <em>correctly evaluates span attributes and routes them to the appropriate destinations</em>. This validates that routing rules can effectively separate and direct telemetry data for different use cases.</p><p>You can now extend this approach by defining additional routing rules to further categorize spans, metrics, and logs based on different attributes.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=7-create-metrics-with-count-connector>7. Create metrics with Count Connector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll explore how to use the <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external><strong>Count Connector</strong></a> to extract attribute values from logs and convert them into meaningful metrics.</p><p>Specifically, we&rsquo;ll use the Count Connector to track the number of &ldquo;Star Wars&rdquo; and &ldquo;Lord of the Rings&rdquo; quotes appearing in our logs, turning them into measurable data points.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Change <em>ALL</em> terminal windows to the <code>7-sum-count</code> directory and run the <code>clear</code> command.</strong></p></div></details><p>Copy <code>*.yaml</code> from the <code>6-routing-data</code> directory into <code>7-sum-count</code>. Your updated directory structure will now look like this:</p><div class=tab-panel data-tab-group=R-tabs-ca6469a8bee81b3ccc7953bfbcec250a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-30a2766a3546cbbbf45b66ea4e1fe000 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ca6469a8bee81b3ccc7953bfbcec250a","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-30a2766a3546cbbbf45b66ea4e1fe000 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agent.yaml
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ gateway.yaml</span></span></code></pre></div></div></div></div></div><ul><li><strong>Update the agent.yaml</strong> to change the frequency that we read logs.
Find the <code>filelog/quotes</code> receiver in the <code>agent.yaml</code> and add a <code>poll_interval</code> attribute:</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>filelog/quotes</span><span class=p>:</span><span class=w>                      </span><span class=c># Receiver Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>poll_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s                </span><span class=w> </span><span class=c># Only read every ten seconds </span></span></span></code></pre></div></div></details><p>The reason for the delay is that the Count Connector in the OpenTelemetry Collector counts logs only within each processing interval. This means that every time the data is read, the count resets to zero for the next interval. With the default <code>Filelog reciever</code> interval of 200ms, it reads every line the loadgen writes, giving us counts of 1. With this interval we make sure we have multiple entries to count.</p><p>The Collector can maintain a running count for each read interval by omitting conditions, as shown below. However, it‚Äôs best practice to let your backend handle running counts since it can track them over a longer time period.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>Add the Count Connector</strong></li></ul><p>Include the Count Connector in the connector&rsquo;s section of your configuration and define the metrics counters we want to use:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>connectors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.full.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Running count of all logs read in interval&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.sw.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;StarWarsCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;SW&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.lotr.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;LOTRCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;LOTR&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.error.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;ErrorCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;level&#34;] == &#34;ERROR&#34;</span></span></span></code></pre></div><ul><li><p><strong>Explanation of the Metrics Counters</strong></p><ul><li><code>logs.full.count</code>: Tracks the total number of logs processed during each read interval.<br>Since this metric has no filtering conditions, every log that passes through the system is included in the count.</li><li><code>logs.sw.count</code> Counts logs that contain a quote from a Star Wars movie.</li><li><code>logs.lotr.count</code>: Counts logs that contain a quote from a Lord of the Rings movie.</li><li><code>logs.error.count</code>: Represents a real-world scenario by counting logs with a severity level of ERROR for the read interval.</li></ul></li><li><p><strong>Configure the Count Connector in the pipelines</strong><br>In the pipeline configuration below, the connector exporter is added to the <code>logs</code> section, while the connector receiver is added to the <code>metrics</code> section.</p></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                          </span><span class=w> </span><span class=c># Count Connector that receives count metric from logs count exporter in logs pipeline. </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                    # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div></div></details><p>We count logs based on their attributes. If your log data is stored in the log body instead of attributes, you‚Äôll need to use a <code>Transform</code> processor in your pipeline to extract key/value pairs and add them as attributes.</p><p>In this workshop, we‚Äôve already added <code>merge_maps(attributes, cache, "upsert")</code> in the <code>05-transform-data</code> section. This ensures that all relevant data is included in the log attributes for processing.</p><p>When selecting fields to create attributes from, be mindful‚Äîadding all fields indiscriminately is generally not ideal for production environments. Instead, choose only the fields that are truly necessary to avoid unnecessary data clutter.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>Validate</strong> the agent configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>logs</code> and <code>metrics:</code> sections of your pipelines will look like this:</li></ul><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download):::receiver
    REC2(filelog&lt;br&gt;fa:fa-download&lt;br&gt;quotes):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO9(transfrom&lt;br&gt;fa:fa-microchip&lt;br&gt;logs):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP2(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    ROUTE1(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive

    %% Links
    subID1:::sub-logs
    subID2:::sub-metrics
    subgraph &#34; &#34; 
      direction LR
      subgraph subID1[**Logs**]
      direction LR
      REC1 --&gt; PRO1
      REC2 --&gt; PRO1
      PRO1 --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO9
      PRO9 --&gt; PRO5
      PRO5 --&gt; ROUTE1
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end
      
      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE2       
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 7. Count & Sum Connector</h1><article class=default><header class=headline></header><h1 id=71-testing-the-count-connector>7.1 Testing the Count Connector</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>:<br>In the <strong>Gateway terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-45611e4cd7943147b40796ca84907f0d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1f89e1cda98edca2e791d66a2f70f31a aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-45611e4cd7943147b40796ca84907f0d","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-1f89e1cda98edca2e791d66a2f70f31a data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Agent</strong>:<br>In the <strong>Agent terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-4bcf50e2e808d9236736017d98645982><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-50e3987e1fd1f4a0980596142334c64b aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4bcf50e2e808d9236736017d98645982","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-50e3987e1fd1f4a0980596142334c64b data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Send 12 Logs lines with the Loadgen</strong>:<br>In the <strong>Spans terminal</strong> window send 12 log lines, they should be read in two intervals. Do this with the following <code>loadgen</code> command:</p><div class=tab-panel data-tab-group=R-tabs-f2c3cd373368091634dc26a8cb371349><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4a4a8306e6fb8739f0ef9f6c531eda92 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f2c3cd373368091634dc26a8cb371349","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-4a4a8306e6fb8739f0ef9f6c531eda92 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -logs -json -count <span class=m>12</span></span></span></code></pre></div></div></div></div></div><p>Both the <strong>Agent</strong> and <strong>Gateway</strong> will display debug information, showing they are processing data. Wait until the <code>loadgen</code> completes.</p><p><strong>Verify metrics have been generated</strong><br>As the logs are processed, the <strong>Agent</strong> generates metrics and forwards them to the <strong>Gateway</strong>, which then writes them to <code>gateway-metrics.out</code>.</p><p>To check if the metrics <code>logs.full.count</code>, <code>logs.sw.count</code>, <code>logs.lotr.count</code>, and <code>logs.error.count</code> are present in the output, run the following <strong>jq</strong> query:</p><div class=tab-panel data-tab-group=R-tabs-11ae55f69b99f8fb8694190d3da902ae><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-585ffde4bc10de9f570ec676ce5345ce aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-11ae55f69b99f8fb8694190d3da902ae","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-671d3d6fc60b0e8604bf847cdf2f977f aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-11ae55f69b99f8fb8694190d3da902ae","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-585ffde4bc10de9f570ec676ce5345ce data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[]
</span></span></span><span class=line><span class=cl><span class=s1>    | select(.name == &#34;logs.full.count&#34; or .name == &#34;logs.sw.count&#34; or .name == &#34;logs.lotr.count&#34; or .name == &#34;logs.error.count&#34;)
</span></span></span><span class=line><span class=cl><span class=s1>    | {name: .name, value: (.sum.dataPoints[0].asInt // &#34;-&#34;)}&#39;</span> gateway-metrics.out</span></span></code></pre></div></div></div><div id=R-tab-id-671d3d6fc60b0e8604bf847cdf2f977f data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;4&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;6&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Note: the <code>logs.full.count</code> normally is equal to <code>logs.sw.count</code> + <code>logs.lotr.count</code>, while the <code>logs.error.count</code> will be a random number.</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=72-create-metrics-with-sum-connector>7.2 Create metrics with Sum Connector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we‚Äôll explore how the <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/sumconnector rel=external><strong>Sum Connector</strong></a> can extract values from spans and convert them into metrics.</p><p>We‚Äôll specifically use the credit card charges from our base spans and leverage the Sum Connector to retrieve the total charges as a metric.</p><p>The connector can be used to collect (<strong>sum</strong>) attribute values from spans, span events, metrics, data points, and log records. It captures each individual value, transforms it into a metric, and passes it along. However, it‚Äôs the <strong>backend‚Äôs</strong> job to use these metrics and their attributes for calculations and further processing.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Switch to your <strong>Agent terminal</strong> window and open the <code>agent.yaml</code> file in your editor.</p><ul><li><strong>Add the Sum Connector</strong><br>Include the Sum Connector in the connectors section of your configuration and define the metrics counters:</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>sum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spans</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=nt>user.card-charge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>source_attribute</span><span class=p>:</span><span class=w> </span><span class=l>payment.amount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>attributes[&#34;payment.amount&#34;] != &#34;NULL&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span></span></span></code></pre></div></div></details><p>In the example above, we check for the <code>payment.amount</code> attribute in spans. If it has a valid value, the <strong>Sum</strong> connector generates a metric called <code>user.card-charge</code> and includes the <code>user.name</code> as an attribute. This enables the backend to track and display a user‚Äôs total charges over an extended period, such as a billing cycle.</p><p>In the pipeline configuration below, the connector exporter is added to the traces section, while the connector receiver is added to the metrics section.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>Configure the Count Connector in the pipelines</strong></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Sum connector which aggregates payment.amount from spans and sends to metrics pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Receives metrics from the sum exporter in the traces pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Receives count metric from logs count exporter in logs pipeline. </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                   # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div><ul><li><strong>Validate</strong> the agent configuration using <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong>. For reference, the <code>traces</code> and <code>metrics:</code> sections of your pipelines will look like this:</li></ul><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt;):::processor

    PROA(attributes&lt;br&gt;fa:fa-microchip&lt;br&gt;redact):::processor
    PROB(redaction&lt;br&gt;fa:fa-microchip&lt;br&gt;update):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP2(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP5(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    ROUTE1(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive
    ROUTE3(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive

    %% Links
    subID1:::sub-traces
    subID2:::sub-metrics
    subgraph &#34; &#34; 
      direction LR
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PROA
      PROA --&gt; PROB
      PROB --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO5 
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      PRO5 --&gt; EXP5
      PRO5 --&gt; ROUTE1
      end
      
      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE3
      ROUTE3 --&gt; PRO2       
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=73-testing-the-count-connector>7.3 Testing the Count Connector</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Start the Gateway</strong>:<br>In the <strong>Gateway terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-c79d507823f5001b76c5a155a0b223cd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-730210e9d7045c1395bde3fa1ab7b79b aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c79d507823f5001b76c5a155a0b223cd","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-730210e9d7045c1395bde3fa1ab7b79b data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Agent</strong>:<br>In the <strong>Agent terminal</strong> window run:</p><div class=tab-panel data-tab-group=R-tabs-f3204fc046104e90f37acfb283475e0f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-50e66e9abda46483ef2c7544a4bdb158 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f3204fc046104e90f37acfb283475e0f","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-50e66e9abda46483ef2c7544a4bdb158 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Start the Loadgen</strong>:<br>In the <strong>Spans terminal</strong> window send 8 spans with the following <code>loadgen</code> command:</p><div class=tab-panel data-tab-group=R-tabs-41e9e40bc9df82a472bbc80dae03ca65><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e9d7298493b8fb5639410dd872ccf9c4 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-41e9e40bc9df82a472bbc80dae03ca65","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-e9d7298493b8fb5639410dd872ccf9c4 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>8</span></span></span></code></pre></div></div></div></div></div><p>Both the <strong>Agent</strong> and <strong>Gateway</strong> will display debug information, showing they are processing data. Wait until the loadgen completes.</p><p><strong>Verify the metrics</strong>:<br>While processing the span, the <strong>Agent</strong>, has generated metrics and passed them on to the <strong>Gateway</strong>. The <strong>Gateway</strong> has written them into <code>gateway-metrics.out</code>.</p><p>To confirm the presence of <code>user.card-charge</code>and verify each one has an attribute <code>user.name</code> in the metrics output, run the following jq query:</p><div class=tab-panel data-tab-group=R-tabs-845ca369af4934d44f52a8c706fef312><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c2ff8574052b7a019c9738481c551756 aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-845ca369af4934d44f52a8c706fef312","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-3bc13dfe41f88c1e1ef8ebc59cd092f1 aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-845ca369af4934d44f52a8c706fef312","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-c2ff8574052b7a019c9738481c551756 data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -r <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[] | select(.name == &#34;user.card-charge&#34;) | .sum.dataPoints[] | &#34;\(.attributes[] | select(.key == &#34;user.name&#34;).value.stringValue)\t\(.asDouble)&#34;&#39;</span> gateway-metrics.out <span class=p>|</span> <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span><span class=s1>$&#39;\t&#39;</span> <span class=nb>read</span> -r name charge<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>printf</span> <span class=s2>&#34;%-20s %s\n&#34;</span> <span class=s2>&#34;</span><span class=nv>$name</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$charge</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>    </span></span></code></pre></div></div></div><div id=R-tab-id-3bc13dfe41f88c1e1ef8ebc59cd092f1 data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>George Lucas         67.49
</span></span><span class=line><span class=cl>Frodo Baggins        87.14
</span></span><span class=line><span class=cl>Thorin Oakenshield   90.98
</span></span><span class=line><span class=cl>Luke Skywalker       51.37
</span></span><span class=line><span class=cl>Luke Skywalker       65.56
</span></span><span class=line><span class=cl>Thorin Oakenshield   67.5
</span></span><span class=line><span class=cl>Thorin Oakenshield   66.66
</span></span><span class=line><span class=cl>Peter Jackson        94.39</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Stop the <strong>Agent</strong> and the <strong>Gateway</strong> processes by pressing <code>Ctrl-C</code> in their respective terminals.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=8-wrap-up>8. Wrap-up</h1><p><a href=#R-image-68d4ca461bd5466960d941751150be34 class=lightbox-link><img alt="Well done" class="lazy lightbox figure-image" loading=lazy src=../images/welldone.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-68d4ca461bd5466960d941751150be34><img alt="Well done" class="lazy lightbox lightbox-image" loading=lazy src=../images/welldone.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=splunk-synthetic-scripting>Splunk Synthetic Scripting</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>Proactively monitor the performance of your web app before problems affect your users. With <strong>Splunk Synthetic Monitoring</strong>, technical and business teams create detailed tests to proactively monitor the speed and reliability of websites, web apps, and resources over time, at any stage in the development cycle.</p><p><strong>Splunk Synthetic Monitoring</strong> offers the most comprehensive and in-depth capabilities for uptime and web performance optimization as part of the only complete observability suite, Splunk Observability Cloud.</p><p>Easily set up monitoring for APIs, service endpoints and end-user experience. With <strong>Splunk Synthetic Monitoring</strong>, go beyond basic uptime and performance monitoring and focus on proactively finding and fixing issues, optimizing web performance, and ensuring customers get the best user experience.</p><p>With <strong>Splunk Synthetic Monitoring</strong> you can:</p><ul><li>Detect and resolve issues fast across critical user flows, business transactions and API endpoints</li><li>Prevent web performance issues from affecting customers with an intelligent web optimization engine</li><li>And improve the performance of all page resources and third-party dependencies</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk Synthetic Scripting</h1><article class=default><header class=headline></header><h1 id=1-real-browser-test>1. Real Browser Test</h1><h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop walks you through using the <a href=https://developer.chrome.com/docs/devtools/recorder/ rel=external>Chrome DevTools Recorder</a> to create a synthetic transaction against a Splunk demonstration instance.</p><p>The exported JSON from the Chrome DevTools Recorder will then be used to create a Splunk Synthetic Monitoring Real Browser Test.</p><p>In addition, you will also get to learn other Splunk Synthetic Monitoring checks like <a href=https://docs.splunk.com/Observability/synthetics/api-test/api-test.html rel=external>API Test</a> and <a href=https://docs.splunk.com/Observability/synthetics/uptime-test/uptime-test.html rel=external>Uptime Test</a>.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Google Chrome Browser installed</li><li>Access to Splunk Observability Cloud</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Real Browser Test</h1><article class=default><header class=headline></header><h1 id=11-recording-a-test>1.1 Recording a test</h1><h2 id=open-the-starting-url>Open the starting URL<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Open the starting URL for the workshop in Chrome. Click on the appropriate link below to open the site in a new tab.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>The starting URL for the workshop is different for <strong>EMEA</strong> and <strong>AMER/APAC</strong>. Please use the correct URL for your region.</p><div class=tab-panel data-tab-group=R-tabs-9e4fdfc6ceddeaf4c535aadc739fe675><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-654b7326a64f08b8fe4098d0d6b1a973 aria-expanded=true data-tab-item=R-tab-5b8e181ae4ed60064b941335c8f8d52d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9e4fdfc6ceddeaf4c535aadc739fe675","R-tab-5b8e181ae4ed60064b941335c8f8d52d")'>
<span class=tab-nav-text>EMEA Workshop URL</span>
</button>
<button aria-controls=R-tab-id-b5933bd417da0f549ac4906b51aa6589 aria-expanded=false data-tab-item=R-tab-150c518dae317cc990820080b7da7358 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9e4fdfc6ceddeaf4c535aadc739fe675","R-tab-150c518dae317cc990820080b7da7358")'>
<span class=tab-nav-text>AMER/APAC Workshop URL</span></button></div><div class=tab-content-container><div id=R-tab-id-654b7326a64f08b8fe4098d0d6b1a973 data-tab-item=R-tab-5b8e181ae4ed60064b941335c8f8d52d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><a href=https://online-boutique-eu.splunko11y.com/ rel=external>https://online-boutique-eu.splunko11y.com/</a></p></div></div><div id=R-tab-id-b5933bd417da0f549ac4906b51aa6589 data-tab-item=R-tab-150c518dae317cc990820080b7da7358 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><a href=https://online-boutique-us.splunko11y.com/ rel=external>https://online-boutique-us.splunko11y.com/</a></p></div></div></div></div></div></details><h2 id=open-the-chrome-devtools-recorder>Open the Chrome DevTools Recorder<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Next, open the Developer Tools (in the new tab that was opened above) by pressing <code>Ctrl + Shift + I</code> on Windows or <code>Cmd + Option + I</code> on a Mac, then select <strong>Recorder</strong> from the top-level menu or the <strong>More tools</strong> flyout menu.</p><p><a href=#R-image-c886da2bc09583f10084f9750f6ecde0 class=lightbox-link><img alt="Open Recorder" class="lazy lightbox figure-image" loading=lazy src=../../img/open-recorder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c886da2bc09583f10084f9750f6ecde0><img alt="Open Recorder" class="lazy lightbox lightbox-image" loading=lazy src=../../img/open-recorder.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Site elements might change depending on viewport width. Before recording, set your browser window to the correct width for the test you want to create (Desktop, Tablet, or Mobile). Change the DevTools &ldquo;dock side&rdquo; to pop out as a separate window if it helps.</p></div></details><h2 id=create-a-new-recording>Create a new recording<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With the Recorder panel open in the DevTools window. Click on the <span class="btn cstyle button blue noicon"><span><span class=title>Create a new recording</span></span></span> button to start.</p><p><a href=#R-image-0267354b9b228f73cd9f522e438f83d9 class=lightbox-link><img alt=Recorder class="lazy lightbox figure-image" loading=lazy src=../../img/recorder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0267354b9b228f73cd9f522e438f83d9><img alt=Recorder class="lazy lightbox lightbox-image" loading=lazy src=../../img/recorder.png></a></p><p>For the <strong>Recording Name</strong> use your initials to prefix the name of the recording e.g. <strong><code>&lt;your initials></code> - Online Boutique</strong>. Click on <strong>Start Recording</strong> to start recording your actions.</p><p><a href=#R-image-28d7f385f9c004e62c4acd0e0e971f26 class=lightbox-link><img alt="Recording Name" class="lazy lightbox figure-image" loading=lazy src=../../img/recording-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-28d7f385f9c004e62c4acd0e0e971f26><img alt="Recording Name" class="lazy lightbox lightbox-image" loading=lazy src=../../img/recording-name.png></a></p><p>Now that we are recording, complete the following actions on the site:</p><ul><li>Click on <strong>Vintage Camera Lens</strong></li><li>Click on <strong>Add to Cart</strong></li><li>Click on <strong>Place Order</strong></li><li>Click on <strong>End recording</strong> in the Recorder panel.</li></ul><p><a href=#R-image-0aa6ce1eda89bf923a0202e1127147af class=lightbox-link><img alt="End Recording" class="lazy lightbox figure-image" loading=lazy src=../../img/end-recording.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0aa6ce1eda89bf923a0202e1127147af><img alt="End Recording" class="lazy lightbox lightbox-image" loading=lazy src=../../img/end-recording.png></a></p><h2 id=exporting-the-recording>Exporting the recording<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the <strong>Export</strong> button:</p><p><a href=#R-image-17704db9ed68455ebb8c7528dec099ea class=lightbox-link><img alt="Export button" class="lazy lightbox figure-image" loading=lazy src=../../img/export-button.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-17704db9ed68455ebb8c7528dec099ea><img alt="Export button" class="lazy lightbox lightbox-image" loading=lazy src=../../img/export-button.png></a></p><p>Select <strong>JSON</strong> as the format, then click on <strong>Save</strong></p><p><a href=#R-image-52f3cbf14fe74a38983596fc99a497e0 class=lightbox-link><img alt="Export JSON" class="lazy lightbox figure-image" loading=lazy src=../../img/export-json.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-52f3cbf14fe74a38983596fc99a497e0><img alt="Export JSON" class="lazy lightbox lightbox-image" loading=lazy src=../../img/export-json.png></a></p><p><a href=#R-image-9e24c3122d07152f63d09366582be5df class=lightbox-link><img alt="Save JSON" class="lazy lightbox figure-image" loading=lazy src=../../img/save-json.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e24c3122d07152f63d09366582be5df><img alt="Save JSON" class="lazy lightbox lightbox-image" loading=lazy src=../../img/save-json.png></a></p><p><strong>Congratulations!</strong> You have successfully created a recording using the Chrome DevTools Recorder. Next, we will use this recording to create a Real Browser Test in Splunk Synthetic Monitoring.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
Click here to view the JSON file</summary><div class=box-content><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;RWC - Online Boutique&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;steps&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;setViewport&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;width&#34;</span><span class=p>:</span> <span class=mi>1430</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;height&#34;</span><span class=p>:</span> <span class=mi>1016</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;deviceScaleFactor&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;isMobile&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;hasTouch&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;isLandscape&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigate&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Online Boutique&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;div:nth-of-type(2) &gt; div:nth-of-type(2) a &gt; div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div/div/div[2]/div[2]/div/a/div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/div:nth-of-type(2) &gt; div:nth-of-type(2) a &gt; div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mi>170</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mi>180</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/product/66VCHSJNUP&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;aria/ADD TO CART&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div[1]/div/div[2]/div/form/div/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;text/Add to Cart&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mf>35.0078125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mf>46.4140625</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/cart&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;aria/PLACE ORDER&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;div &gt; div &gt; div.py-3 button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div/div/div[4]/div/form/div[4]/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/div &gt; div &gt; div.py-3 button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;text/Place order&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mf>29.8125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mf>66.8203125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/cart/checkout&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=12-create-real-browser-test>1.2 Create Real Browser Test</h1><p>In Splunk Observability Cloud, navigate to <strong>Synthetics</strong> and click on <span class="btn cstyle button blue noicon"><span><span class=title>Add new test</span></span></span>.</p><p>From the dropdown select <strong>Browser test</strong>.</p><p><a href=#R-image-0f9e601b00076336315d6a09596d3533 class=lightbox-link><img alt="Add new test" class="lazy lightbox figure-image" loading=lazy src=../../img/add-new-test.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0f9e601b00076336315d6a09596d3533><img alt="Add new test" class="lazy lightbox lightbox-image" loading=lazy src=../../img/add-new-test.png></a></p><p>You will then be presented with the <strong>Browser test content</strong> configuration page.</p><p><a href=#R-image-960c97dce827281a30a0ed138d849f7a class=lightbox-link><img alt="New Test" class="lazy lightbox figure-image" loading=lazy src=../../img/new-test.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-960c97dce827281a30a0ed138d849f7a><img alt="New Test" class="lazy lightbox lightbox-image" loading=lazy src=../../img/new-test.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=13-import-json>1.3 Import JSON</h1><p>To begin configuring our test, we need to import the JSON that we exported from the Chrome DevTools Recorder. To enable the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>Import</strong></span></span></span> button, we must first give our test a name e.g. <strong><code>&lt;your initials></code> - Online Boutique</strong>.</p><p><a href=#R-image-2a17ebe1a817004da0b995a6b4f18101 class=lightbox-link><img alt=Import class="lazy lightbox figure-image" loading=lazy src=../../img/import.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2a17ebe1a817004da0b995a6b4f18101><img alt=Import class="lazy lightbox lightbox-image" loading=lazy src=../../img/import.png></a></p><p>Once the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>Import</strong></span></span></span> button is enabled, click on it and either drop the JSON file that you exported from the Chrome DevTools Recorder or upload the file.</p><p><a href=#R-image-065743341db7298f02ab1608aaca470b class=lightbox-link><img alt="Import JSON" class="lazy lightbox figure-image" loading=lazy src=../../img/import-json.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-065743341db7298f02ab1608aaca470b><img alt="Import JSON" class="lazy lightbox lightbox-image" loading=lazy src=../../img/import-json.png></a></p><p>Once the JSON file has been uploaded, click on <span class="btn cstyle button blue noicon"><span><span class=title>Continue to edit steps</span></span></span></p><p><a href=#R-image-8304af8628097c75e96286fb56536256 class=lightbox-link><img alt="Import Complete" class="lazy lightbox figure-image" loading=lazy src=../../img/import-complete.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8304af8628097c75e96286fb56536256><img alt="Import Complete" class="lazy lightbox lightbox-image" loading=lazy src=../../img/import-complete.png></a></p><p><a href=#R-image-124f4866a8bcbdba9353eebf8ad8c3bd class=lightbox-link><img alt="Edit Steps" class="lazy lightbox figure-image" loading=lazy src=../../img/edit-steps.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-124f4866a8bcbdba9353eebf8ad8c3bd><img alt="Edit Steps" class="lazy lightbox lightbox-image" loading=lazy src=../../img/edit-steps.png></a></p><p>Before we make any edits to the test, let&rsquo;s first configure the settings, click on <span class="btn cstyle button blue noicon"><span><span class=title>&lt; Return to test</span></span></span></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=14-settings>1.4 Settings</h1><p>The simple settings allow you to configure the basics of the test:</p><ul><li><strong>Name</strong>: The name of the test (e.g. RWC - Online Boutique).</li><li><strong>Details</strong>:<ul><li><strong>Locations</strong>: The locations where the test will run from.</li><li><strong>Device</strong>: Emulate different devices and connection speeds. Also, the viewport will be adjusted to match the chosen device.</li><li><strong>Frequency</strong>: How often the test will run.</li><li><strong>Round-robin</strong>: If multiple locations are selected, the test will run from one location at a time, rather than all locations at once.</li><li><strong>Active</strong>: Set the test to active or inactive.</li></ul></li></ul><p>![Return to Test]For this workshop, we will configure the locations that we wish to monitor from. Click in the <strong>Locations</strong> field and you will be presented with a list of global locations (over 50 in total).</p><p><a href=#R-image-9ad209e16d56e4566ccd44623c145fb4 class=lightbox-link><img alt="Global Locations" class="lazy lightbox figure-image" loading=lazy src=../../img/global-locations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9ad209e16d56e4566ccd44623c145fb4><img alt="Global Locations" class="lazy lightbox lightbox-image" loading=lazy src=../../img/global-locations.png></a></p><p>Select the following locations:</p><ul><li><strong>AWS - N. Virginia</strong></li><li><strong>AWS - London</strong></li><li><strong>AWS - Melbourne</strong></li></ul><p>Once complete, scroll down and click on Click on <span class="btn cstyle button blue noicon"><span><span class=title>Submit</span></span></span> to save the test.</p><p>The test will now be scheduled to run every 5 minutes from the 3 locations that we have selected. This does take a few minutes for the schedule to be created.</p><p>So whilst we wait for the test to be scheduled, click on <span class="btn cstyle button transparent noicon"><span><span class=title>Edit test</span></span></span> so we can go through the Advanced settings.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=15-advanced-settings>1.5 Advanced Settings</h1><p>Click on <strong>Advanced</strong>, these settings are optional and can be used to further configure the test.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>In the case of this workshop, we will <strong>not</strong> be using any of these settings as this is for informational purposes only.</p></div></details><p><a href=#R-image-b18778cbabadbbf302eb5372c7dd46f1 class=lightbox-link><img alt="Advanced Settings" class="lazy lightbox figure-image" loading=lazy src=../../img/advanced-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b18778cbabadbbf302eb5372c7dd46f1><img alt="Advanced Settings" class="lazy lightbox lightbox-image" loading=lazy src=../../img/advanced-settings.png></a></p><ul><li><strong>Security</strong>:<ul><li><strong>TLS/SSL validation</strong>: When activated, this feature is used to enforce the validation of expired, invalid hostname, or untrusted issuer on SSL/TLS certificates.</li><li><strong>Authentication</strong>: Add credentials to authenticate with sites that require additional security protocols, for example from within a corporate network. By using <a href=https://docs.splunk.com/Observability/synthetics/test-config/global-variables.html rel=external>concealed global variables</a> in the Authentication field, you create an additional layer of security for your credentials and simplify the ability to share credentials across checks.</li></ul></li><li><strong>Custom Content</strong>:<ul><li><strong>Custom headers</strong>: Specify custom headers to send with each request. For example, you can add a header in your request to filter out requests from analytics on the back end by sending a specific header in the requests. You can also use custom headers to set cookies.</li><li><strong>Cookies</strong>: Set cookies in the browser before the test starts. For example, to prevent a popup modal from randomly appearing and interfering with your test, you can set cookies. Any cookies that are set will apply to the domain of the starting URL of the check. Splunk Synthetics Monitoring uses the public suffix list to determine the domain.</li><li><strong>Host overrides</strong>: Add host override rules to reroute requests from one host to another. For example, you can create a host override to test an existing production site against page resources loaded from a development site or a specific CDN edge node.</li></ul></li></ul><p>Next, we will edit the test steps to provide more meaningful names for each step.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=16-edit-test-steps>1.6 Edit test steps</h1><p>To edit the steps click on the <span class="btn cstyle button transparent noicon"><span><span class=title>+ Edit steps or synthetic transactions</span></span></span> button. From here, we are going to give meaningful names to each step.</p><p><a href=#R-image-d219e6ecfb82cc69ba5c3b4ca4216605 class=lightbox-link><img alt="Edit steps" class="lazy lightbox figure-image" loading=lazy src=../../img/edit-steps.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d219e6ecfb82cc69ba5c3b4ca4216605><img alt="Edit steps" class="lazy lightbox lightbox-image" loading=lazy src=../../img/edit-steps.png></a></p><p>For each of the four steps, we are going to give them a meaningful name.</p><ul><li><strong>Step 1</strong> replace the text <strong>Go to URL</strong> with <strong>HomePage - Online Boutique</strong></li><li><strong>Step 2</strong> enter the text <strong>Select Vintage Camera Lens</strong>.</li><li><strong>Step 3</strong> enter <strong>Add to Cart</strong>.</li><li><strong>Step 4</strong> enter <strong>Place Order</strong>.</li></ul><p><a href=#R-image-9f5bff2c59bd436673f752304ba7988f class=lightbox-link><img alt="Step names" class="lazy lightbox figure-image" loading=lazy src=../../img/step-names.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f5bff2c59bd436673f752304ba7988f><img alt="Step names" class="lazy lightbox lightbox-image" loading=lazy src=../../img/step-names.png></a></p><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>&lt; Return to test</span></span></span> to return to the test configuration page and click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span> to save the test.</p><p>You will be returned to the test dashboard where you will see test results start to appear.</p><p><a href=#R-image-c8d4132ea0a46a464b895872f32eedc9 class=lightbox-link><img alt=Scatterplot class="lazy lightbox figure-image" loading=lazy src=../../img/scatterplot.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8d4132ea0a46a464b895872f32eedc9><img alt=Scatterplot class="lazy lightbox lightbox-image" loading=lazy src=../../img/scatterplot.png></a></p><p><strong>Congratulations!</strong> You have successfully created a Real Browser Test in Splunk Synthetic Monitoring. Next, we will look into a test result in more detail.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=17-view-test-results>1.7 View test results</h1><p>In the Scatterplot from the previous step, click on one of the dots to drill into the test run data. Preferably, select the most recent test run (farthest to the right).</p><p><a href=#R-image-3796e22c365ab36d63faf26e00f6faf1 class=lightbox-link><img alt=Drilldown class="lazy lightbox figure-image" loading=lazy src=../../img/drilldown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3796e22c365ab36d63faf26e00f6faf1><img alt=Drilldown class="lazy lightbox lightbox-image" loading=lazy src=../../img/drilldown.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=api-test>API Test</h1><p>The API Test provides a flexible way to check the functionality and performance of API endpoints. The shift toward API-first development has magnified the necessity to monitor the back-end services that provide your core front-end functionality.</p><p>Whether you&rsquo;re interested in testing the multi-step API interactions or you want to gain visibility into the performance of your endpoints, the API Test can help you accomplish your goals.</p><p><a href=#R-image-eed0a8133c780bab4efee964942d1250 class=lightbox-link><img alt="API test result" class="lazy lightbox figure-image" loading=lazy src=../img/api-test-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eed0a8133c780bab4efee964942d1250><img alt="API test result" class="lazy lightbox lightbox-image" loading=lazy src=../img/api-test-result.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. API Test</h1><article class=default><header class=headline></header><h1 id=global-variables>Global Variables</h1><h2 id=global-variables>Global Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>View the global variable that we&rsquo;ll use to perform our API test. Click on <strong>Global Variables</strong> under the cog. The global variable named <code>env.encoded_auth</code> will be the one that we&rsquo;ll use to build the spotify API transaction.</p><p><a href=#R-image-01c10a090ed460f5ba902d981465f5c6 class=lightbox-link><img alt=placeholder class="lazy lightbox figure-image" loading=lazy src=../../img/global-variables.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-01c10a090ed460f5ba902d981465f5c6><img alt=placeholder class="lazy lightbox lightbox-image" loading=lazy src=../../img/global-variables.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-new-api-test>Create new API test</h1><h2 id=create-a-new-api-test>Create a new API test<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a new API test by clicking on the <span class="btn cstyle button blue noicon"><span><span class=title>Add new test</span></span></span> button and select <strong>API test</strong> from the dropdown. Name the test using <strong>your initials</strong> followed by <strong>Spotify API</strong> e.g. <strong>RWC - Spotify API</strong></p><p><a href=#R-image-200fc2bccd8bafa3f60aaebf2133e24f class=lightbox-link><img alt=placeholder class="lazy lightbox figure-image" loading=lazy src=../../img/new-api-check.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-200fc2bccd8bafa3f60aaebf2133e24f><img alt=placeholder class="lazy lightbox lightbox-image" loading=lazy src=../../img/new-api-check.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=authentication-request>Authentication Request</h1><h2 id=add-authentication-request>Add Authentication Request<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on <span class="btn cstyle button transparent noicon"><span><span class=title>+ Add requests</span></span></span> and enter the request step name e.g. <strong>Authenticate with Spotify API</strong>.</p><p><a href=#R-image-0a2fe9978aaf6c2daaf816cad9f0ba1e class=lightbox-link><img alt=placeholder class="lazy lightbox figure-image" loading=lazy src=../../img/add-request.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0a2fe9978aaf6c2daaf816cad9f0ba1e><img alt=placeholder class="lazy lightbox lightbox-image" loading=lazy src=../../img/add-request.png></a></p><p>Expand the Request section, from the drop-down change the request method to <strong>POST</strong> and enter the following URL:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>https://accounts.spotify.com/api/token</span></span></code></pre></div><p>In the <strong>Payload body</strong> section enter the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>grant_type=client_credentials</span></span></code></pre></div><p>Next, add two request headers with the following key/value pairings:</p><ul><li><strong>CONTENT-TYPE: application/x-www-form-urlencoded</strong></li><li><strong>AUTHORIZATION: Basic {{env.encoded_auth}}</strong></li></ul><p>Expand the <strong>Validation</strong> section and add the following extraction:</p><ul><li><strong>Extract</strong> from <strong>Response body</strong> <strong>JSON</strong> <strong>$.access_token</strong> <strong>as</strong> <strong>access_token</strong>.</li></ul><p>This will parse the JSON payload that is received from the Spotify API, extract the access token and store it as a custom variable.</p><p><a href=#R-image-8b2abe1e883926ea20e9a99848cb55fa class=lightbox-link><img alt="Add payload token" class="lazy lightbox figure-image" loading=lazy src=../../img/add-payload-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b2abe1e883926ea20e9a99848cb55fa><img alt="Add payload token" class="lazy lightbox lightbox-image" loading=lazy src=../../img/add-payload-token.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=search-request>Search Request</h1><h2 id=add-search-request>Add Search Request<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on <span class="btn cstyle button transparent noicon"><span><span class=title>+ Add Request</span></span></span> to add the next step. Name the step <strong>Search for Tracks named &ldquo;Up around the bend&rdquo;</strong>.</p><p>Expand the <strong>Request</strong> section and change the request method to <strong>GET</strong> and enter the following URL:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>https://api.spotify.com/v1/search?q=Up%20around%20the%20bend&amp;type=track&amp;offset=0&amp;limit=5</span></span></code></pre></div><p>Next, add two request headers with the following key/value pairings:</p><ul><li><strong>CONTENT-TYPE: application/json</strong></li><li><strong>AUTHORIZATION: Bearer {{custom.access_token}}</strong></li></ul><p><a href=#R-image-c9b6eccd5b43a56c64525ea7ba728c4b class=lightbox-link><img alt="Add search request" class="lazy lightbox figure-image" loading=lazy src=../../img/add-search-request.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c9b6eccd5b43a56c64525ea7ba728c4b><img alt="Add search request" class="lazy lightbox lightbox-image" loading=lazy src=../../img/add-search-request.png></a></p><p>Expand the <strong>Validation</strong> section and add the following extraction:</p><ul><li><strong>Extract</strong> from <strong>Response body</strong> <strong>JSON</strong> <strong>$.tracks.items[0].id</strong> <strong>as</strong> <strong>track.id</strong>.</li></ul><p><a href=#R-image-2dd9334ec1bed5cae7ba5d34971e446c class=lightbox-link><img alt="Add search payload" class="lazy lightbox figure-image" loading=lazy src=../../img/add-search-payload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2dd9334ec1bed5cae7ba5d34971e446c><img alt="Add search payload" class="lazy lightbox lightbox-image" loading=lazy src=../../img/add-search-payload.png></a></p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>< Return to test</span></span></span> to return to the test configuration page. And then click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span> to save the API test.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=view-results>View results</h1><h2 id=view-results>View results<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Wait for a few minutes for the test to provision and run. Once you see the test has run successfully, click on the run to view the test results:</p><p><a href=#R-image-dd96f6f27be2d6dcaf7b670ed75fb3ad class=lightbox-link><img alt="API test result" class="lazy lightbox figure-image" loading=lazy src=../../img/api-test-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dd96f6f27be2d6dcaf7b670ed75fb3ad><img alt="API test result" class="lazy lightbox lightbox-image" loading=lazy src=../../img/api-test-result.png></a></p><h2 id=6-resources>6. Resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><p><a href=https://docs.splunk.com/Observability/synthetics/api-test/set-up-api-test.html rel=external>How to Create an API Test</a></p></li><li><p><a href=https://docs.splunk.com/Observability/synthetics/api-test/api-test.html rel=external>API Test Overview</a></p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=distributed-tracing-for-aws-lambda-functions>Distributed Tracing for AWS Lambda Functions</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Guy-Francis Kono</span></span><p>This workshop will equip you to build a distributed trace for a small serverless application that runs on AWS Lambda, producing and consuming a message via AWS Kinesis.</p><p>First, we will see how OpenTelemetry&rsquo;s auto-instrumentation captures traces and exports them to your target of choice.</p><p>Then, we will see how we can enable context propagation with manual instrumentation.</p><p>For this workshop Splunk has prepared an Ubuntu Linux instance in AWS/EC2 all pre-configured for you. To get access to that instance, please visit the URL provided by the workshop leader.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 16, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Lambda Tracing</h1><article class=default><header class=headline></header><h1 id=setup>Setup</h1><p><a href=#R-image-6abf565f77e8bbd96459dc4c681d1fb1 class=lightbox-link><img alt="Lambda application, not yet manually instrumented" class="lazy lightbox figure-image" loading=lazy src=../images/01-Architecture.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6abf565f77e8bbd96459dc4c681d1fb1><img alt="Lambda application, not yet manually instrumented" class="lazy lightbox lightbox-image" loading=lazy src=../images/01-Architecture.png></a></p><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=observability-workshop-instance>Observability Workshop Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The Observability Workshop uses the <code>Splunk4Ninjas - Observability</code> workshop template in Splunk Show,
which provides a pre-configured EC2 instance running Ubuntu.</p><p>Your workshop instructor will provide you with the credentials to your assigned workshop instance.</p><p>Your instance should have the following environment variables already set:</p><ul><li><strong>ACCESS_TOKEN</strong></li><li><strong>REALM</strong><ul><li><em>These are the Splunk Observability Cloud <strong>Access Token</strong> and <strong>Realm</strong> for your workshop.</em></li><li><em>They will be used by the OpenTelemetry Collector to forward your data to the correct Splunk Observability Cloud organization.</em></li></ul></li></ul><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p><em>Alternatively, you can deploy a local observability workshop instance using Multipass.</em></p></div></details><h3 id=aws-command-line-interface-awscli>AWS Command Line Interface (awscli)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The AWS Command Line Interface, or <code>awscli</code>, is an API used to interact with AWS resources. In this workshop, it is used by certain scripts to interact with the resource you&rsquo;ll deploy.</p><p>Your Splunk-issued workshop instance should already have the <strong>awscli</strong> installed.</p><ul><li><p>Check if the <strong>aws</strong> command is installed on your instance with the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>which aws</span></span></code></pre></div><ul><li><em>The expected output would be <strong>/usr/local/bin/aws</strong></em></li></ul></li><li><p>If the <strong>aws</strong> command is not installed on your instance, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install awscli</span></span></code></pre></div></li></ul><h3 id=terraform>Terraform<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Terraform is an Infrastructure as Code (IaC) platform, used to deploy, manage and destroy resource by defining them in configuration files. Terraform employs HCL to define those resources, and supports multiple providers for various platforms and technologies.</p><p>We will be using Terraform at the command line in this workshop to deploy the following resources:</p><ol><li>AWS API Gateway</li><li>Lambda Functions</li><li>Kinesis Stream</li><li>CloudWatch Log Groups</li><li>S3 Bucket<ul><li><em>and other supporting resources</em></li></ul></li></ol><p>Your Splunk-issued workshop instance should already have <strong>terraform</strong> installed.</p><ul><li><p>Check if the <strong>terraform</strong> command is installed on your instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>which terraform</span></span></code></pre></div><ul><li><em>The expected output would be <strong>/usr/local/bin/terraform</strong></em></li></ul></li><li><p>If the <strong>terraform</strong> command is not installed on your instance, follow Terraform&rsquo;s recommended installation commands listed below:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget -O- https://apt.releases.hashicorp.com/gpg <span class=p>|</span> sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com </span><span class=k>$(</span>lsb_release -cs<span class=k>)</span><span class=s2> main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/hashicorp.list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo apt update <span class=o>&amp;&amp;</span> sudo apt install terraform</span></span></code></pre></div></li></ul><h3 id=workshop-directory-lambda>Workshop Directory (lambda)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The Workshop Directory <code>lambda</code> is a repository that contains all the configuration files and scripts to complete both the auto-instrumentation and manual instrumentation of the example Lambda-based application we will be using today.</p><ul><li>Confirm you have the workshop directory in your home directory:<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop <span class=o>&amp;&amp;</span> ls</span></span></code></pre></div><ul><li><em>The expected output would include <strong>lambda</strong></em></li></ul></li></ul><h3 id=aws--terraform-variables>AWS & Terraform Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=aws>AWS<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><blockquote><p>Note to the workshop instructor: create a new user in the target AWS account called <code>lambda-workshop-user</code>.
Ensure it has full permissions to perform the required actions via Terraform. Create an access token for the <code>lambda-workshop-user</code>
user and share the Access Key ID and Secret Access Key with the workshop participants. Delete the user
when the workshop is complete.</p></blockquote><p>The AWS CLI requires that you have credentials to be able to access and manage resources deployed by their services. Both Terraform and the Python scripts in this workshop require these variables to perform their tasks.</p><ul><li><p>Configure the <strong>awscli</strong> with the <em><strong>access key ID</strong></em>, <em><strong>secret access key</strong></em> and <em><strong>region</strong></em> for this workshop:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws configure</span></span></code></pre></div><ul><li><em>This command should provide a prompt similar to the one below:</em><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>AWS Access Key ID <span class=o>[</span>None<span class=o>]</span>: XXXXXXXXXXXXXXXX
</span></span><span class=line><span class=cl>AWS Secret Access Key <span class=o>[</span>None<span class=o>]</span>: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
</span></span><span class=line><span class=cl>Default region name <span class=o>[</span>None<span class=o>]</span>: us-east-1
</span></span><span class=line><span class=cl>Default outoput format <span class=o>[</span>None<span class=o>]</span>:</span></span></code></pre></div></li></ul></li><li><p>If the <strong>awscli</strong> is not configured on your instance, run the following command and provide the values your instructor would provide you with.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws configure</span></span></code></pre></div></li></ul><h4 id=create-an-iam-role-workshop-instructor-only>Create an IAM Role (Workshop Instructor Only)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><blockquote><p>Note to the workshop instructor: This step only needs to be completed once, as the IAM role created
in this step will be shared by all workshop participants:</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/iam_role
</span></span><span class=line><span class=cl>terraform init
</span></span><span class=line><span class=cl>terraform plan
</span></span><span class=line><span class=cl>terraform apply </span></span></code></pre></div><blockquote><p>Note to the workshop instructor: After the workshop is complete, cleanup the role as follows:</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/iam_role
</span></span><span class=line><span class=cl>terraform destroy</span></span></code></pre></div><h4 id=terraform-1>Terraform<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Terraform supports the passing of variables to ensure sensitive or dynamic data is not hard-coded in your .tf configuration files, as well as to make those values reusable throughout your resource definitions.</p><p>In our workshop, Terraform requires variables necessary for deploying the Lambda functions with the right values for the OpenTelemetry Lambda layer; For the ingest values for Splunk Observability Cloud; And to make your environment and resources unique and immediatley recognizable.</p><p>Terraform variables are defined in the following manner:</p><ul><li>Define the variables in your <em><strong>main.tf</strong></em> file or a <em><strong>variables.tf</strong></em></li><li>Set the values for those variables in either of the following ways:<ul><li>setting environment variables at the host level, with the same variable names as in their definition, and with <em><strong>TF_VAR</strong></em>_ as a prefix</li><li>setting the values for your variables in a <em><strong>terraform.tfvars</strong></em> file</li><li>passing the values as arguments when running terraform apply</li></ul></li></ul><p>We will be using a combination of <em><strong>variables.tf</strong></em> and <em><strong>terraform.tfvars</strong></em> files to set our variables in this workshop.</p><ul><li>Using either <strong>vi</strong> or <strong>nano</strong>, open the <em><strong>terraform.tfvars</strong></em> file in either the <strong>auto</strong> or <strong>manual</strong> directory<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi ~/workshop/lambda/auto/terraform.tfvars</span></span></code></pre></div></li><li>Set the variables with their values. Replace the <strong>CHANGEME</strong> placeholders with those provided by your instructor.<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>o11y_access_token</span> <span class=o>=</span> <span class=s2>&#34;CHANGEME&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>o11y_realm</span>        <span class=o>=</span> <span class=s2>&#34;CHANGEME&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>otel_lambda_layer</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;CHANGEME&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>prefix</span>            <span class=o>=</span> <span class=s2>&#34;CHANGEME&#34;</span></span></span></code></pre></div><ul><li><em>Ensure you change only the placeholders, leaving the quotes and brackets intact, where applicable.</em></li><li>_For the <strong>otel_lambda_layer</strong>, use the value for <strong>us-east-1</strong> found <a href=https://github.com/signalfx/lambda-layer-versions/blob/main/splunk-apm/splunk-apm.md rel=external>here</a></li><li><em>The <em><strong>prefix</strong></em> is a unique identifier you can choose for yourself, to make your resources distinct from other participants&rsquo; resources. We suggest using a short form of your name, for example.</em></li><li><em>Also, please only lowercase letters for the <strong>prefix</strong>. Certain resources in AWS, such as S3, would through an error if you use uppercase letters.</em></li></ul></li><li>Save your file and exit the editor.</li><li>Finally, copy the <em><strong>terraform.tfvars</strong></em> file you just edited to the other directory.<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp ~/workshop/lambda/auto/terraform.tfvars ~/workshop/lambda/manual</span></span></code></pre></div><ul><li><em>We do this as we will be using the same values for both the autoinstrumentation and manual instrumentation protions of the workshop</em></li></ul></li></ul><h3 id=file-permissions>File Permissions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>While all other files are fine as they are, the <strong>send_message.py</strong> script in both the <code>auto</code> and <code>manual</code> will have to be executed as part of our workshop. As a result, it needs to have the appropriate permissions to run as expected. Follow these instructions to set them.</p><ul><li><p>First, ensure you are in the <code>lambda</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda</span></span></code></pre></div></li><li><p>Next, run the following command to set executable permissions on the <code>send_message.py</code> script:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chmod <span class=m>755</span> auto/send_message.py manual/send_message.py</span></span></code></pre></div></li></ul><p>Now that we&rsquo;ve squared off the prerequisites, we can get started with the workshop!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=auto-instrumentation>Auto-Instrumentation</h1><p>The first part of our workshop will demonstrate how auto-instrumentation with OpenTelemetry allows the OpenTelemetry Collector to auto-detect what language your function is written in, and start capturing traces for those functions.</p><h3 id=the-auto-instrumentation-workshop-directory--contents>The Auto-Instrumentation Workshop Directory & Contents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>First, let us take a look at the <code>workshop/lambda/auto</code> directory, and some of its files. This is where all the content for the auto-instrumentation portion of our workshop resides.</p><h4 id=the-auto-directory>The <code>auto</code> Directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p>Run the following command to get into the <strong>workshop/lambda/auto</strong> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/auto</span></span></code></pre></div></li><li><p>Inspect the contents of this directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ls</span></span></code></pre></div><ul><li><p><em>The output should include the following files and directories:</em></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>handler             outputs.tf          terraform.tf        variables.tf
</span></span><span class=line><span class=cl>main.tf             send_message.py     terraform.tfvars</span></span></code></pre></div></li><li><p><em>The output should include the following files and directories:</em></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>get_logs.py    main.tf       send_message.py
</span></span><span class=line><span class=cl>handler        outputs.tf    terraform.tf</span></span></code></pre></div></li></ul></li></ul><h4 id=the-maintf-file>The <code>main.tf</code> file<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Take a closer look at the <code>main.tf</code> file:<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat main.tf</span></span></code></pre></div></li></ul><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Questions</summary><div class=box-content><ul><li>Can you identify which AWS resources are being created by this template?</li><li>Can you identify where OpenTelemetry instrumentation is being set up?<ul><li><em>Hint: study the lambda function definitions</em></li></ul></li><li>Can you determine which instrumentation information is being provided by the environment variables we set earlier?</li></ul></div></details><p>You should see a section where the environment variables for each lambda function are being set.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>environment <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>variables</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>SPLUNK_ACCESS_TOKEN</span> <span class=o>=</span> var.o11y_access_token
</span></span><span class=line><span class=cl>    <span class=nv>SPLUNK_REALM</span> <span class=o>=</span> var.o11y_realm
</span></span><span class=line><span class=cl>    <span class=nv>OTEL_SERVICE_NAME</span> <span class=o>=</span> <span class=s2>&#34;producer-lambda&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>OTEL_RESOURCE_ATTRIBUTES</span> <span class=o>=</span> <span class=s2>&#34;deployment.environment=</span><span class=si>${</span><span class=nv>var</span><span class=p>.prefix</span><span class=si>}</span><span class=s2>-lambda-shop&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>AWS_LAMBDA_EXEC_WRAPPER</span> <span class=o>=</span> <span class=s2>&#34;/opt/nodejs-otel-handler&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>KINESIS_STREAM</span> <span class=o>=</span> aws_kinesis_stream.lambda_streamer.name
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>By using these environment variables, we are configuring our auto-instrumentation in a few ways:</p><ul><li><p>We are setting environment variables to inform the OpenTelemetry collector of which Splunk Observability Cloud organization we would like to have our data exported to.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>SPLUNK_ACCESS_TOKEN</span> <span class=o>=</span> var.o11y_access_token
</span></span><span class=line><span class=cl><span class=nv>SPLUNK_ACCESS_TOKEN</span> <span class=o>=</span> var.o11y_realm</span></span></code></pre></div></li><li><p>We are also setting variables that help OpenTelemetry identify our function/service, as well as the environment/application it is a part of.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>OTEL_SERVICE_NAME</span> <span class=o>=</span> <span class=s2>&#34;producer-lambda&#34;</span> <span class=c1># consumer-lambda in the case of the consumer function</span>
</span></span><span class=line><span class=cl><span class=nv>OTEL_RESOURCE_ATTRIBUTES</span> <span class=o>=</span> <span class=s2>&#34;deployment.environment=</span><span class=si>${</span><span class=nv>var</span><span class=p>.prefix</span><span class=si>}</span><span class=s2>-lambda-shop&#34;</span></span></span></code></pre></div></li><li><p>We are setting an environment variable that lets OpenTelemetry know what wrappers it needs to apply to our function&rsquo;s handler so as to capture trace data automatically, based on our code language.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>AWS_LAMBDA_EXEC_WRAPPER - <span class=s2>&#34;/opt/nodejs-otel-handler&#34;</span></span></span></code></pre></div></li><li><p>In the case of the <code>producer-lambda</code> function, we are setting an environment variable to let the function know what Kinesis Stream to put our record to.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>KINESIS_STREAM</span> <span class=o>=</span> aws_kinesis_stream.lambda_streamer.name</span></span></code></pre></div></li><li><p>These values are sourced from the environment variables we set in the Prerequisites section, as well as resources that will be deployed as a part of this Terraform configuration file.</p></li></ul><p>You should also see an argument for setting the Splunk OpenTelemetry Lambda layer on each function</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>layers</span> <span class=o>=</span> var.otel_lambda_layer</span></span></code></pre></div><ul><li><p>The OpenTelemetry Lambda layer is a package that contains the libraries and dependencies necessary to collector, process and export telemetry data for Lambda functions at the moment of invocation.</p></li><li><p>While there is a general OTel Lambda layer that has all the libraries and dependencies for all OpenTelemetry-supported languages, there are also language-specific Lambda layers, to help make your function even more lightweight.</p><ul><li><em>You can see the relevant Splunk OpenTelemetry Lambda layer ARNs (Amazon Resource Name) and latest versions for each AWS region <a href=https://github.com/signalfx/lambda-layer-versions/blob/main/splunk-apm/splunk-apm.md rel=external>HERE</a></em></li></ul></li></ul><h4 id=the-producermjs-file>The <code>producer.mjs</code> file<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Next, let&rsquo;s take a look at the <code>producer-lambda</code> function code:</p><ul><li>Run the following command to view the contents of the <code>producer.mjs</code> file:<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/lambda/auto/handler/producer.mjs</span></span></code></pre></div><ul><li>This NodeJS module contains the code for the producer function.</li><li>Essentially, this function receives a message, and puts that message as a record to the targeted Kinesis Stream</li></ul></li></ul><h3 id=deploying-the-lambda-functions--generating-trace-data>Deploying the Lambda Functions & Generating Trace Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Now that we are familiar with the contents of our <code>auto</code> directory, we can deploy the resources for our workshop, and generate some trace data from our Lambda functions.</p><h4 id=initialize-terraform-in-the-auto-directory>Initialize Terraform in the <code>auto</code> directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>In order to deploy the resources defined in the <code>main.tf</code> file, you first need to make sure that Terraform is initialized in the same folder as that file.</p><ul><li><p>Ensure you are in the <code>auto</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/auto</strong></em></li></ul></li><li><p>If you are not in the <code>auto</code> directory, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/auto</span></span></code></pre></div></li><li><p>Run the following command to initialize Terraform in this directory</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init</span></span></code></pre></div><ul><li>This command will create a number of elements in the same folder:<ul><li><code>.terraform.lock.hcl</code> file: to record the providers it will use to provide resources</li><li><code>.terraform</code> directory: to store the provider configurations</li></ul></li><li>In addition to the above files, when terraform is run using the <code>apply</code> subcommand, the <code>terraform.tfstate</code> file will be created to track the state of your deployed resources.</li><li>These enable Terraform to manage the creation, state and destruction of resources, as defined within the <code>main.tf</code> file of the <code>auto</code> directory</li></ul></li></ul><h4 id=deploy-the-lambda-functions-and-other-aws-resources>Deploy the Lambda functions and other AWS resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Once we&rsquo;ve initialized Terraform in this directory, we can go ahead and deploy our resources.</p><ul><li><p>First, run the <strong>terraform plan</strong> command to ensure that Terraform will be able to create your resources without encountering any issues.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform plan</span></span></code></pre></div><ul><li><em>This will result in a plan to deploy resources and output some data, which you can review to ensure everything will work as intended.</em></li><li><em>Do note that a number of the values shown in the plan will be known post-creation, or are masked for security purposes.</em></li></ul></li><li><p>Next, run the <strong>terraform apply</strong> command to deploy the Lambda functions and other supporting resources from the <strong>main.tf</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply</span></span></code></pre></div><ul><li><p><em>Respond <strong>yes</strong> when you see the <strong>Enter a value:</strong> prompt</em></p></li><li><p>This will result in the following outputs:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Outputs:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>base_url</span> <span class=o>=</span> <span class=s2>&#34;https://______.amazonaws.com/serverless_stage/producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_function_name</span> <span class=o>=</span> <span class=s2>&#34;_____-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_log_group_arn</span> <span class=o>=</span> <span class=s2>&#34;arn:aws:logs:us-east-1:############:log-group:/aws/lambda/______-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_log_group_name</span> <span class=o>=</span> <span class=s2>&#34;/aws/lambda/______-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>environment</span> <span class=o>=</span> <span class=s2>&#34;______-lambda-shop&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>lambda_bucket_name</span> <span class=o>=</span> <span class=s2>&#34;lambda-shop-______-______&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_function_name</span> <span class=o>=</span> <span class=s2>&#34;______-producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_log_group_arn</span> <span class=o>=</span> <span class=s2>&#34;arn:aws:logs:us-east-1:############:log-group:/aws/lambda/______-producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_log_group_name</span> <span class=o>=</span> <span class=s2>&#34;/aws/lambda/______-producer&#34;</span></span></span></code></pre></div><ul><li><em>Terraform outputs are defined in the <strong>outputs.tf</strong> file.</em></li><li><em>These outputs will be used programmatically in other parts of our workshop, as well.</em></li></ul></li></ul></li></ul><h4 id=send-some-traffic-to-the-producer-lambda-url-base_url>Send some traffic to the <code>producer-lambda</code> URL (<code>base_url</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>To start getting some traces from our deployed Lambda functions, we would need to generate some traffic. We will send a message to our <code>producer-lambda</code> function&rsquo;s endpoint, which should be put as a record into our Kinesis Stream, and then pulled from the Stream by the <code>consumer-lambda</code> function.</p><ul><li><p>Ensure you are in the <code>auto</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/auto</strong></em></li></ul></li><li><p>If you are not in the <code>auto</code> directory, run the following command</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/auto</span></span></code></pre></div></li></ul><p>The <code>send_message.py</code> script is a Python script that will take input at the command line, add it to a JSON dictionary, and send it to your <code>producer-lambda</code> function&rsquo;s endpoint repeatedly, as part of a while loop.</p><ul><li><p>Run the <code>send_message.py</code> script as a background process</p><ul><li><em>It requires the <code>--name</code> and <code>--superpower</code> arguments</em></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nohup ./send_message.py --name CHANGEME --superpower CHANGEME <span class=p>&amp;</span></span></span></code></pre></div><ul><li>You should see an output similar to the following if your message is successful<div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>1<span class=o>]</span> <span class=m>79829</span>
</span></span><span class=line><span class=cl>user@host manual % appending output to nohup.out</span></span></code></pre></div><ul><li><em>The two most import bits of information here are:</em><ul><li><em>The process ID on the first line (<code>79829</code> in the case of my example), and</em></li><li><em>The <code>appending output to nohup.out</code> message</em></li></ul></li><li><em>The <code>nohup</code> command ensures the script will not hang up when sent to the background. It also captures the curl output from our command in a nohup.out file in the same folder as the one you&rsquo;re currently in.</em></li><li><em>The <code>&</code> tells our shell process to run this process in the background, thus freeing our shell to run other commands.</em></li></ul></li></ul></li><li><p>Next, check the contents of the <code>response.logs</code> file, to ensure your output confirms your requests to your <code>producer-lambda</code> endpoint are successful:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat response.logs</span></span></code></pre></div><ul><li>You should see the following output among the lines printed to your screen if your message is successful:</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Message placed in the Event Stream: {prefix}-lambda_stream&#34;</span><span class=o>}</span></span></span></code></pre></div><ul><li>If unsuccessful, you will see:</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Internal server error&#34;</span><span class=o>}</span></span></span></code></pre></div></li></ul><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>If this occurs, ask one of the workshop facilitators for assistance.</p></div></details><h4 id=view-the-lambda-function-logs>View the Lambda Function Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Next, let&rsquo;s take a look at the logs for our Lambda functions.</p><ul><li><p>To view your <strong>producer-lambda</strong> logs, check the <strong>producer.logs</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat producer.logs</span></span></code></pre></div></li><li><p>To view your <strong>consumer-lambda</strong> logs, check the <strong>consumer.logs</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat consumer.logs</span></span></code></pre></div></li></ul><p>Examine the logs carefully.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><ul><li>Do you see OpenTelemetry being loaded? Look out for the lines with <code>splunk-extension-wrapper</code><ul><li><ul><li><em>Consider running <code>head -n 50 producer.logs</code> or <code>head -n 50 consumer.logs</code> to see the <strong>splunk-extension-wrapper</strong> being loaded.</em></li></ul></li></ul></li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-apm-lambda-functions--traces>Splunk APM, Lambda Functions & Traces</h1><p>The Lambda functions should be generating a sizeable amount of trace data, which we would need to take a look at. Through the combination of environment variables and the OpenTelemetry Lambda layer configured in the resource definition for our Lambda functions, we should now be ready to view our functions and traces in Splunk APM.</p><h4 id=view-your-environment-name-in-the-splunk-apm-overview>View your Environment name in the Splunk APM Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Let&rsquo;s start by making sure that Splunk APM is aware of our <code>Environment</code> from the trace data it is receiving. This is the <code>deployment.name</code> we set as part of the <code>OTEL_RESOURCE_ATTRIBUTES</code> variable we set on our Lambda function definitions in <code>main.tf</code>. It was also one of the outputs from the <code>terraform apply</code> command we ran earlier.</p><p>In Splunk Observability Cloud:</p><ul><li><p>Click on the <code>APM</code> Button from the Main Menu on the left. This will take you to the Splunk APM Overview.</p></li><li><p>Select your APM Environment from the <code>Environment:</code> dropdown.</p><ul><li><em>Your APM environment should be in the <code>PREFIX-lambda-shop</code> format, where the <code>PREFIX</code> is obtained from the environment variable you set in the Prerequisites section</em></li></ul></li></ul><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>It may take a few minutes for your traces to appear in Splunk APM. Try hitting refresh on your browser until you find your environment name in the list of environments.</p></div></details><p><a href=#R-image-fbfdcfe4954e3f62fbe5e0b6d278c3d0 class=lightbox-link><img alt="Splunk APM, Environment Name" class="lazy lightbox figure-image" loading=lazy src=../images/02-Auto-APM-EnvironmentName.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fbfdcfe4954e3f62fbe5e0b6d278c3d0><img alt="Splunk APM, Environment Name" class="lazy lightbox lightbox-image" loading=lazy src=../images/02-Auto-APM-EnvironmentName.png></a></p><h4 id=view-your-environments-service-map>View your Environment&rsquo;s Service Map<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Once you&rsquo;ve selected your Environment name from the Environment drop down, you can take a look at the Service Map for your Lambda functions.</p><ul><li>Click the <code>Service Map</code> Button on the right side of the APM Overview page. This will take you to your Service Map view.</li></ul><p><a href=#R-image-fde6ee097e24e73f81a64317e636b66e class=lightbox-link><img alt="Splunk APM, Service Map Button" class="lazy lightbox figure-image" loading=lazy src=../images/03-Auto-ServiceMapButton.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fde6ee097e24e73f81a64317e636b66e><img alt="Splunk APM, Service Map Button" class="lazy lightbox lightbox-image" loading=lazy src=../images/03-Auto-ServiceMapButton.png></a></p><p>You should be able to see the <code>producer-lambda</code> function and the call it is making to the Kinesis Stream to put your record.</p><p><a href=#R-image-c1edaf01520b90b354dbc08a3066ce7a class=lightbox-link><img alt="Splunk APM, Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/04-Auto-ServiceMap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c1edaf01520b90b354dbc08a3066ce7a><img alt="Splunk APM, Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/04-Auto-ServiceMap.png></a></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What about your <code>consumer-lambda</code> function?</p></div></details><h4 id=explore-the-traces-from-your-lambda-functions>Explore the Traces from your Lambda Functions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Click the <code>Traces</code> button to view the Trace Analyzer.</li></ul><p><a href=#R-image-9d3217ff5c5ba82c462e04cd8b06e5a9 class=lightbox-link><img alt="Splunk APM, Trace Button" class="lazy lightbox figure-image" loading=lazy src=../images/05-Auto-TraceButton.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d3217ff5c5ba82c462e04cd8b06e5a9><img alt="Splunk APM, Trace Button" class="lazy lightbox lightbox-image" loading=lazy src=../images/05-Auto-TraceButton.png></a></p><p>On this page, we can see the traces that have been ingested from the OpenTelemetry Lambda layer of your <code>producer-lambda</code> function.</p><p><a href=#R-image-b8adf8765428f6c9c00bad18cfd68624 class=lightbox-link><img alt="Splunk APM, Trace Analyzer" class="lazy lightbox figure-image" loading=lazy src=../images/06-Auto-TraceAnalyzer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b8adf8765428f6c9c00bad18cfd68624><img alt="Splunk APM, Trace Analyzer" class="lazy lightbox lightbox-image" loading=lazy src=../images/06-Auto-TraceAnalyzer.png></a></p><ul><li>Select a trace from the list to examine by clicking on its hyperlinked <code>Trace ID</code>.</li></ul><p><a href=#R-image-e045a915fe16a836db42426bc49733e9 class=lightbox-link><img alt="Splunk APM, Trace and Spans" class="lazy lightbox figure-image" loading=lazy src=../images/07-Auto-TraceNSpans.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e045a915fe16a836db42426bc49733e9><img alt="Splunk APM, Trace and Spans" class="lazy lightbox lightbox-image" loading=lazy src=../images/07-Auto-TraceNSpans.png></a></p><p>We can see that the <code>producer-lambda</code> function is putting a record into the Kinesis Stream. But the action of the <code>consumer-lambda</code> function is missing!</p><p>This is because the trace context is not being propagated. Trace context propagation is not supported out-of-the-box by Kinesis service at the time of this workshop. Our distributed trace stops at the Kinesis service, and because its context isn&rsquo;t automatically propagated through the stream, we can&rsquo;t see any further.</p><p>Not yet, at least&mldr;</p><p>Let&rsquo;s see how we work around this in the next section of this workshop. But before that, let&rsquo;s clean up after ourselves!</p><h3 id=clean-up>Clean Up<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The resources we deployed as part of this auto-instrumenation exercise need to be cleaned. Likewise, the script that was generating traffice against our <code>producer-lambda</code> endpoint needs to be stopped, if it&rsquo;s still running. Follow the below steps to clean up.</p><h4 id=kill-the-send_message>Kill the <code>send_message</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p>If the <code>send_message.py</code> script is still running, stop it with the follwing commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>fg</span></span></code></pre></div><ul><li>This brings your background process to the foreground.</li><li>Next you can hit <code>[CONTROL-C]</code> to kill the process.</li></ul></li></ul><h4 id=destroy-all-aws-resources>Destroy all AWS resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Terraform is great at managing the state of our resources individually, and as a deployment. It can even update deployed resources with any changes to their definitions. But to start afresh, we will destroy the resources and redeploy them as part of the manual instrumentation portion of this workshop.</p><p>Please follow these steps to destroy your resources:</p><ul><li><p>Ensure you are in the <code>auto</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/auto</strong></em></li></ul></li><li><p>If you are not in the <code>auto</code> directory, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/auto</span></span></code></pre></div></li><li><p>Destroy the Lambda functions and other AWS resources you deployed earlier:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy</span></span></code></pre></div><ul><li>respond <code>yes</code> when you see the <code>Enter a value:</code> prompt</li><li>This will result in the resources being destroyed, leaving you with a clean environment</li></ul></li></ul><p>This process will leave you with the files and directories created as a result of our activity. Do not worry about those.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=manual-instrumentation>Manual Instrumentation</h1><p>The second part of our workshop will focus on demonstrating how manual instrumentation with OpenTelemetry empowers us to enhance telemetry collection. More specifically, in our case, it will enable us to propagate trace context data from the <code>producer-lambda</code> function to the <code>consumer-lambda</code> function, thus enabling us to see the relationship between the two functions, even across Kinesis Stream, which currently does not support automatic context propagation.</p><h3 id=the-manual-instrumentation-workshop-directory--contents>The Manual Instrumentation Workshop Directory & Contents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Once again, we will first start by taking a look at our operating directory, and some of its files. This time, it will be <code>workshop/lambda/manual</code> directory. This is where all the content for the manual instrumentation portion of our workshop resides.</p><h4 id=the-manual-directory>The <code>manual</code> directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p>Run the following command to get into the <code>workshop/lambda/manual</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/manual</span></span></code></pre></div></li><li><p>Inspect the contents of this directory with the <code>ls</code> command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ls</span></span></code></pre></div><ul><li><p><em>The output should include the following files and directories:</em></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>handler             outputs.tf          terraform.tf        variables.tf
</span></span><span class=line><span class=cl>main.tf             send_message.py     terraform.tfvars</span></span></code></pre></div></li></ul></li></ul><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Do you see any difference between this directory and the auto directory when you first started?</p></div></details><h4 id=compare-auto-and-manual-files>Compare <code>auto</code> and <code>manual</code> files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Let&rsquo;s make sure that all these files that LOOK the same, are actually the same.</p><ul><li><p>Compare the <code>main.tf</code> files in the <code>auto</code> and <code>manual</code> directories:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>diff ~/workshop/lambda/auto/main.tf ~/workshop/lambda/manual/main.tf</span></span></code></pre></div><ul><li>There is no difference! <em>(Well, there shouldn&rsquo;t be. Ask your workshop facilitator to assist you if there is)</em></li></ul></li><li><p>Now, let&rsquo;s compare the <code>producer.mjs</code> files:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>diff ~/workshop/lambda/auto/handler/producer.mjs ~/workshop/lambda/manual/handler/producer.mjs</span></span></code></pre></div><ul><li>There&rsquo;s quite a few differences here!</li></ul></li><li><p>You may wish to view the entire file and examine its content</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/workshop/lambda/manual/handler/producer.mjs</span></span></code></pre></div><ul><li>Notice how we are now importing some OpenTelemetry objects directly into our function to handle some of the manual instrumentation tasks we require.</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>propagation</span><span class=p>,</span> <span class=nx>trace</span><span class=p>,</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@opentelemetry/api&#34;</span><span class=p>;</span></span></span></code></pre></div><ul><li>We are importing the following objects from <a href=https://www.npmjs.com/package/@opentelemetry/api rel=external>@opentelemetry/api</a> to propagate our context in our producer function:<ul><li>context</li><li>propagation</li><li>trace</li></ul></li></ul></li><li><p>Finally, compare the <code>consumer.mjs</code> files:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>diff ~/workshop/lambda/auto/handler/consumer.mjs ~/workshop/lambda/manual/handler/consumer.mjs</span></span></code></pre></div><ul><li><p>Here also, there are a few differences of note. Let&rsquo;s take a closer look</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat handler/consumer.mjs</span></span></code></pre></div><ul><li>In this file, we are importing the following <a href=https://www.npmjs.com/package/@opentelemetry/api rel=external>@opentelemetry/api</a> objects:<ul><li>propagation</li><li>trace</li><li>ROOT_CONTEXT</li></ul></li><li>We use these to extract the trace context that was propagated from the producer function</li><li>Then to add new span attributes based on our <code>name</code> and <code>superpower</code> to the extracted trace context</li></ul></li></ul></li></ul><h4 id=propagating-the-trace-context-from-the-producer-function>Propagating the Trace Context from the Producer Function<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>The below code executes the following steps inside the producer function:</p><ol><li>Get the tracer for this trace</li><li>Initialize a context carrier object</li><li>Inject the context of the active span into the carrier object</li><li>Modify the record we are about to pu on our Kinesis stream to include the carrier that will carry the active span&rsquo;s context to the consumer</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>propagation</span><span class=p>,</span> <span class=nx>trace</span><span class=p>,</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@opentelemetry/api&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>tracer</span> <span class=o>=</span> <span class=nx>trace</span><span class=p>.</span><span class=nx>getTracer</span><span class=p>(</span><span class=s1>&#39;lambda-app&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>tracer</span><span class=p>.</span><span class=nx>startActiveSpan</span><span class=p>(</span><span class=s1>&#39;put-record&#39;</span><span class=p>,</span> <span class=kr>async</span><span class=p>(</span><span class=nx>span</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>carrier</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>    <span class=nx>propagation</span><span class=p>.</span><span class=nx>inject</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>active</span><span class=p>(),</span> <span class=nx>carrier</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>eventBody</span> <span class=o>=</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>body</span><span class=p>,</span> <span class=s1>&#39;base64&#39;</span><span class=p>).</span><span class=nx>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=s2>&#34;{\&#34;tracecontext\&#34;: &#34;</span> <span class=o>+</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>carrier</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;, \&#34;record\&#34;: &#34;</span> <span class=o>+</span> <span class=nx>eventBody</span> <span class=o>+</span> <span class=s2>&#34;}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=sb>`Record with Trace Context added:
</span></span></span><span class=line><span class=cl><span class=sb>      </span><span class=si>${</span><span class=nx>data</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>await</span> <span class=nx>kinesis</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=nx>PutRecordCommand</span><span class=p>({</span>
</span></span><span class=line><span class=cl>          <span class=nx>StreamName</span><span class=o>:</span> <span class=nx>streamName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>PartitionKey</span><span class=o>:</span> <span class=s2>&#34;1234&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>Data</span><span class=o>:</span> <span class=nx>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>        <span class=nx>message</span> <span class=o>=</span> <span class=sb>`Message placed in the Event Stream: </span><span class=si>${</span><span class=nx>streamName</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>      <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=nx>span</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span></span></span></code></pre></div><h4 id=extracting-trace-context-in-the-consumer-function>Extracting Trace Context in the Consumer Function<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>The below code executes the following steps inside the consumer function:</p><ol><li>Extract the context that we obtained from <code>producer-lambda</code> into a carrier object.</li><li>Extract the tracer from current context.</li><li>Start a new span with the tracer within the extracted context.</li><li>Bonus: Add extra attributes to your span, including custom ones with the values from your message!</li><li>Once completed, end the span.</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>propagation</span><span class=p>,</span> <span class=nx>trace</span><span class=p>,</span> <span class=nx>ROOT_CONTEXT</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@opentelemetry/api&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>carrier</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span> <span class=nx>message</span> <span class=p>).</span><span class=nx>tracecontext</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>parentContext</span> <span class=o>=</span> <span class=nx>propagation</span><span class=p>.</span><span class=nx>extract</span><span class=p>(</span><span class=nx>ROOT_CONTEXT</span><span class=p>,</span> <span class=nx>carrier</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>tracer</span> <span class=o>=</span> <span class=nx>trace</span><span class=p>.</span><span class=nx>getTracer</span><span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>OTEL_SERVICE_NAME</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>span</span> <span class=o>=</span> <span class=nx>tracer</span><span class=p>.</span><span class=nx>startSpan</span><span class=p>(</span><span class=s2>&#34;Kinesis.getRecord&#34;</span><span class=p>,</span> <span class=kc>undefined</span><span class=p>,</span> <span class=nx>parentContext</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>span</span><span class=p>.</span><span class=nx>setAttribute</span><span class=p>(</span><span class=s2>&#34;span.kind&#34;</span><span class=p>,</span> <span class=s2>&#34;server&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span> <span class=nx>message</span> <span class=p>).</span><span class=nx>record</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>body</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>span</span><span class=p>.</span><span class=nx>setAttribute</span><span class=p>(</span><span class=s2>&#34;custom.tag.name&#34;</span><span class=p>,</span> <span class=nx>body</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>body</span><span class=p>.</span><span class=nx>superpower</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>span</span><span class=p>.</span><span class=nx>setAttribute</span><span class=p>(</span><span class=s2>&#34;custom.tag.superpower&#34;</span><span class=p>,</span> <span class=nx>body</span><span class=p>.</span><span class=nx>superpower</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>      <span class=nx>span</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span></span></span></code></pre></div><p>Now let&rsquo;s see the different this makes!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploying-lambda-functions--generating-trace-data>Deploying Lambda Functions & Generating Trace Data</h1><p>Now that we know how to apply manual instrumentation to the functions and services we wish to capture trace data for, let&rsquo;s go about deploying our Lambda functions again, and generating traffic against our <code>producer-lambda</code> endpoint.</p><h4 id=initialize-terraform-in-the-manual-directory>Initialize Terraform in the <code>manual</code> directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Seeing as we&rsquo;re in a new directory, we will need to initialize Terraform here once again.</p><ul><li><p>Ensure you are in the <code>manual</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/manual</strong></em></li></ul></li><li><p>If you are not in the <code>manual</code> directory, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/manual</span></span></code></pre></div></li><li><p>Run the following command to initialize Terraform in this directory</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init</span></span></code></pre></div></li></ul><h4 id=deploy-the-lambda-functions-and-other-aws-resources>Deploy the Lambda functions and other AWS resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Let&rsquo;s go ahead and deploy those resources again as well!</p><ul><li><p>Run the <strong>terraform plan</strong> command, ensuring there are no issues.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform plan</span></span></code></pre></div></li><li><p>Follow up with the <strong>terraform apply</strong> command to deploy the Lambda functions and other supporting resources from the <strong>main.tf</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply</span></span></code></pre></div><ul><li><p><em>Respond <strong>yes</strong> when you see the <strong>Enter a value:</strong> prompt</em></p></li><li><p>This will result in the following outputs:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Outputs:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>base_url</span> <span class=o>=</span> <span class=s2>&#34;https://______.amazonaws.com/serverless_stage/producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_function_name</span> <span class=o>=</span> <span class=s2>&#34;_____-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_log_group_arn</span> <span class=o>=</span> <span class=s2>&#34;arn:aws:logs:us-east-1:############:log-group:/aws/lambda/______-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>consumer_log_group_name</span> <span class=o>=</span> <span class=s2>&#34;/aws/lambda/______-consumer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>environment</span> <span class=o>=</span> <span class=s2>&#34;______-lambda-shop&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>lambda_bucket_name</span> <span class=o>=</span> <span class=s2>&#34;lambda-shop-______-______&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_function_name</span> <span class=o>=</span> <span class=s2>&#34;______-producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_log_group_arn</span> <span class=o>=</span> <span class=s2>&#34;arn:aws:logs:us-east-1:############:log-group:/aws/lambda/______-producer&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>producer_log_group_name</span> <span class=o>=</span> <span class=s2>&#34;/aws/lambda/______-producer&#34;</span></span></span></code></pre></div></li></ul></li></ul><p>As you can tell, aside from the first portion of the base_url and the log gropu ARNs, the output should be largely the same as when you ran the auto-instrumentation portion of this workshop up to this same point.</p><h4 id=send-some-traffic-to-the-producer-lambda-endpoint-base_url>Send some traffic to the <code>producer-lambda</code> endpoint (base_url)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Once more, we will send our <code>name</code> and <code>superpower</code> as a message to our endpoint. This will then be added to a record in our Kinesis Stream, along with our trace context.</p><ul><li><p>Ensure you are in the <code>manual</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/manual</strong></em></li></ul></li><li><p>If you are not in the <code>manual</code> directory, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/manual</span></span></code></pre></div></li><li><p>Run the <code>send_message.py</code> script as a background process:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nohup ./send_message.py --name CHANGEME --superpower CHANGEME <span class=p>&amp;</span></span></span></code></pre></div></li><li><p>Next, check the contents of the response.logs file for successful calls to our<strong>producer-lambda</strong> endpoint:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat response.logs</span></span></code></pre></div><ul><li><p>You should see the following output among the lines printed to your screen if your message is successful:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Message placed in the Event Stream: hostname-eventStream&#34;</span><span class=o>}</span></span></span></code></pre></div></li><li><p>If unsuccessful, you will see:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Internal server error&#34;</span><span class=o>}</span></span></span></code></pre></div></li></ul></li></ul><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>If this occurs, ask one of the workshop facilitators for assistance.</p></div></details><h4 id=view-the-lambda-function-logs>View the Lambda Function Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Let&rsquo;s see what our logs look like now.</p><ul><li><p>Check the <strong>producer.logs</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat producer.logs</span></span></code></pre></div></li><li><p>And the <strong>consumer.logs</strong> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat consumer.logs</span></span></code></pre></div></li></ul><p>Examine the logs carefully.</p><h5 id=workshop-question><em>Workshop Question</em><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h5><blockquote><p>Do you notice the difference?</p></blockquote><h4 id=copy-the-trace-id-from-the-consumerlogs-file>Copy the Trace ID from the <code>consumer.logs</code> file<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>This time around, we can see that the consumer-lambda log group is logging our message as a <code>record</code> together with the <code>tracecontext</code> that we propagated.</p><p>To copy the Trace ID:</p><ul><li>Take a look at one of the <code>Kinesis Message</code> logs. Within it, there is a <code>data</code> dictionary</li><li>Take a closer look at <code>data</code> to see the nested <code>tracecontext</code> dictionary</li><li>Within the <code>tracecontext</code> dictionary, there is a <code>traceparent</code> key-value pair</li><li>The <code>traceparent</code> key-value pair holds the Trace ID we seek<ul><li>There are 4 groups of values, separated by <code>-</code>. The Trace ID is the 2nd group of characters</li></ul></li><li><strong>Copy the Trace ID, and save it.</strong> We will need it for a later step in this workshop</li></ul><p><a href=#R-image-157c39f1b0a1131c70eb3b8751065b47 class=lightbox-link><img alt="Lambda Consumer Logs, Manual Instruamentation" class="lazy lightbox figure-image" loading=lazy src=../images/08-Manual-ConsumerLogs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-157c39f1b0a1131c70eb3b8751065b47><img alt="Lambda Consumer Logs, Manual Instruamentation" class="lazy lightbox lightbox-image" loading=lazy src=../images/08-Manual-ConsumerLogs.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-apm-lambda-functions-and-traces-again>Splunk APM, Lambda Functions and Traces, Again!</h1><p>In order to see the result of our context propagation outside of the logs, we&rsquo;ll once again consult the <a href=https://app.us1.signalfx.com/#/apm rel=external>Splunk APM UI</a>.</p><h4 id=view-your-lambda-functions-in-the-splunk-apm-service-map>View your Lambda Functions in the Splunk APM Service Map<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Let&rsquo;s take a look at the Service Map for our environment in APM once again.</p><p>In Splunk Observability Cloud:</p><ul><li><p>Click on the <code>APM</code> Button in the Main Menu.</p></li><li><p>Select your APM Environment from the <code>Environment:</code> dropdown.</p></li><li><p>Click the <code>Service Map</code> Button on the right side of the APM Overview page. This will take you to your Service Map view.</p></li></ul><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p><em>Reminder: It may take a few minutes for your traces to appear in Splunk APM. Try hitting refresh on your browser until you find your environment name in the list of environments.</em></p></div></details><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Notice the difference?</p></div></details><ul><li>You should be able to see the <code>producer-lambda</code> and <code>consumer-lambda</code> functions linked by the propagated context this time!</li></ul><p><a href=#R-image-1d41976f333d76da84dcac0459e5430b class=lightbox-link><img alt="Splunk APM, Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/09-Manual-ServiceMap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1d41976f333d76da84dcac0459e5430b><img alt="Splunk APM, Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/09-Manual-ServiceMap.png></a></p><h4 id=explore-a-lambda-trace-by-trace-id>Explore a Lambda Trace by Trace ID<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Next, we will take another look at a trace related to our Environment.</p><ul><li>Paste the Trace ID you copied from the consumer function&rsquo;s logs into the <code>View Trace ID</code> search box under Traces and click <code>Go</code></li></ul><p><a href=#R-image-d2a8f535eb0c3290ded2b5cb121c34df class=lightbox-link><img alt="Splunk APM, Trace Button" class="lazy lightbox figure-image" loading=lazy src=../images/10-Manual-TraceButton.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d2a8f535eb0c3290ded2b5cb121c34df><img alt="Splunk APM, Trace Button" class="lazy lightbox lightbox-image" loading=lazy src=../images/10-Manual-TraceButton.png></a></p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>The Trace ID was a part of the trace context that we propagated.</p></div></details><p>You can read up on two of the most common propagation standards:</p><ol><li><a href=https:///www.w3.org/TR/trace-context/#traceparent-header rel=external>W3C</a></li><li><a href=https://github.com/openzipkin/b3-propagation#overall-process rel=external>B3</a></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Which one are we using?</p><ul><li><em>The Splunk Distribution of Opentelemetry JS, which supports our NodeJS functions, <a href=https://docs.splunk.com/observability/en/gdi/get-data-in/application/nodejs/splunk-nodejs-otel-distribution.html#defaults-of-the-splunk-distribution-of-opentelemetry-js rel=external>defaults</a> to the <code>W3C</code> standard</em></li></ul></div></details><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Bonus Question: What happens if we mix and match the W3C and B3 headers?</p></div></details><p><a href=#R-image-f408a95dcb25ba0e890ac92585db11ca class=lightbox-link><img alt="Splunk APM, Trace by ID" class="lazy lightbox figure-image" loading=lazy src=../images/11-Manual-TraceByID.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f408a95dcb25ba0e890ac92585db11ca><img alt="Splunk APM, Trace by ID" class="lazy lightbox lightbox-image" loading=lazy src=../images/11-Manual-TraceByID.png></a></p><p>Click on the <code>consumer-lambda</code> span.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Can you find the attributes from your message?</p></div></details><p><a href=#R-image-914ec0feb920282dcaf01f03323d306b class=lightbox-link><img alt="Splunk APM, Span Tags" class="lazy lightbox figure-image" loading=lazy src=../images/12-Manual-SpanTags.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-914ec0feb920282dcaf01f03323d306b><img alt="Splunk APM, Span Tags" class="lazy lightbox lightbox-image" loading=lazy src=../images/12-Manual-SpanTags.png></a></p><h3 id=clean-up>Clean Up<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We are finally at the end of our workshop. Kindly clean up after yourself!</p><h4 id=kill-the-send_message>Kill the <code>send_message</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p>If the <code>send_message.py</code> script is still running, stop it with the follwing commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>fg</span></span></code></pre></div><ul><li>This brings your background process to the foreground.</li><li>Next you can hit <code>[CONTROL-C]</code> to kill the process.</li></ul></li></ul><h4 id=destroy-all-aws-resources>Destroy all AWS resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Terraform is great at managing the state of our resources individually, and as a deployment. It can even update deployed resources with any changes to their definitions. But to start afresh, we will destroy the resources and redeploy them as part of the manual instrumentation portion of this workshop.</p><p>Please follow these steps to destroy your resources:</p><ul><li><p>Ensure you are in the <code>manual</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pwd</span></span></code></pre></div><ul><li><em>The expected output would be <strong>~/workshop/lambda/manual</strong></em></li></ul></li><li><p>If you are not in the <code>manual</code> directory, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/lambda/manual</span></span></code></pre></div></li><li><p>Destroy the Lambda functions and other AWS resources you deployed earlier:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy</span></span></code></pre></div><ul><li>respond <code>yes</code> when you see the <code>Enter a value:</code> prompt</li><li>This will result in the resources being destroyed, leaving you with a clean environment</li></ul></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 8, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=conclusion>Conclusion</h1><p>Congratulations on finishing the Lambda Tracing Workshop! You have seen how we can complement auto-instrumentation with manual steps to have the <code>producer-lambda</code> function&rsquo;s context be sent to the <code>consumer-lambda</code> function via a record in a Kinesis stream. This allowed us to build the expected Distributed Trace, and to contextualize the relationship between both functions in Splunk APM.</p><p><a href=#R-image-95339d88e1f1280a1cc52318f4e07d1d class=lightbox-link><img alt="Lambda application, fully instrumented" class="lazy lightbox figure-image" loading=lazy src=../images/13-Architecture_Instrumented.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95339d88e1f1280a1cc52318f4e07d1d><img alt="Lambda application, fully instrumented" class="lazy lightbox lightbox-image" loading=lazy src=../images/13-Architecture_Instrumented.png></a></p><p>You can now build out a trace manually by linking two different functions together. This comes in handy when your auto-instrumentation, or 3rd-party systems, do not support context propagation out of the box, or when you wish to add custom attributes to a trace for more relevant trace analaysis.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 16, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=dashboard-workshop>Dashboard Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Pieter Hagen</span></span><p>Welcome to the workshop on <strong>Dashboards</strong> in the Splunk Observability Cloud. This session is designed to help you get hands-on experience with building insightful visualizations.</p><p>We‚Äôll be working with existing demo data available in the Splunk Observability Suite. You can follow along using any <strong>trial</strong> or <strong>production</strong> Splunk Observability organization that you have access to.</p><h3 id=what-youll-learn>What You‚Äôll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h3 id=dashboards>Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>In the first part of the workshop, we‚Äôll focus on dashboards and charts:</p><ul><li>Understanding dashboards and the role of charts</li><li>Editing existing charts and creating new ones</li><li>Applying filters and using analytical functions</li><li>Building and customizing formulas</li><li>Saving charts into a dashboard for reuse</li><li>An introduction to SignalFlow for advanced charting</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Dashboard Workshop</h1><article class=default><header class=headline></header><h1 id=intro-to-dashboards>Intro to Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=1-dashboards>1. Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Dashboards are collections of charts and visualizations that display key metrics in one place. A well-designed dashboard gives you quick, actionable insights into the health and performance of your system. They can be as simple or as detailed as needed‚Äîranging from a few focused charts to complex views across multiple services.</p><p>In this module, you‚Äôll build several charts and bring them together into the following custom dashboard.</p><p><a href=#R-image-53d4b762b2c5cb93c603b346f0053754 class=lightbox-link><img alt="Example Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/example-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-53d4b762b2c5cb93c603b346f0053754><img alt="Example Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/example-dashboard.png></a></p><hr><h2 id=2-accessing-dashboards>2. Accessing Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To begin, let‚Äôs locate the dashboards in Splunk Observability suite.</p><p>Click the <strong>Dashboards (1)</strong> button in the left-hand navigation menu. If the menu is collapsed, you can expand it by clicking the hamburger icon in the top-left corner of the screen.</p><p>This will take you to the main Dashboard view, where you‚Äôll see all available dashboards‚Äîincluding the pre-built ones provided by Splunk Observability.</p><p>If your organization is already ingesting data from a Cloud API integration or through the Splunk OpenTelemetry Agent, you may also see additional dashboards relevant to those services.</p><p><a href=#R-image-de1f580813fac7f591e8951d2d189e08 class=lightbox-link><img alt="Sample Data" class="lazy lightbox figure-image" loading=lazy src=../images/sample-data.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-de1f580813fac7f591e8951d2d189e08><img alt="Sample Data" class="lazy lightbox lightbox-image" loading=lazy src=../images/sample-data.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 9, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Dashboards</h1><article class=default><header class=headline></header><h1 id=locating-our-sample-data>Locating our Sample Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=1-exploring-the-sample-data>1. Exploring the Sample Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the list of available dashboards, look for a group called <strong>Sample Data (2)</strong>.</p><p>This group contains dashboards that showcase visualizations built from sample metrics. These will give you a sense of how different data can be represented using charts and dashboards in Splunk Observability.</p><p><a href=#R-image-d01bcda5f00de63155e6c52ee66b3b79 class=lightbox-link><img alt="Sample Data" class="lazy lightbox figure-image" loading=lazy src=../../images/sample-data.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d01bcda5f00de63155e6c52ee66b3b79><img alt="Sample Data" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sample-data.png></a></p><hr><p>Expand the <strong>Sample Data</strong> dashboard group by clicking on it, then select the <strong>Sample Charts (3)</strong> dashboard.</p><p>This dashboard showcases a variety of chart types, styles, and formatting options available in Splunk Observability. It‚Äôs a great way to get a feel for how flexible and customizable your dashboards can be.</p><p>The sample data runs on a 10-minute cycle, generating different patterns and behaviors over time.<br>To see these changes in action, adjust the time range in the top-right corner of the dashboard to <strong>Last 15 minutes</strong> or, for a better overview, select <strong>Last 1 hour</strong>. This will help you observe how the data updates and cycles through different conditions.</p><p>Take a moment to explore the charts in this dashboard, each one provides a different perspective on how sample data can be visualized.</p><p><a href=#R-image-83cae847beb4bed348f623956a709ec8 class=lightbox-link><img alt="Sample Charts" class="lazy lightbox figure-image" loading=lazy src=../../images/sample-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-83cae847beb4bed348f623956a709ec8><img alt="Sample Charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sample-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=exploring-charts>Exploring Charts</h1><p>In this section, we‚Äôll start by exploring how charts are built and displayed in Splunk Observability. By examining and interacting with an existing chart, you‚Äôll get a feel for how the chart editor works‚Äîhow data sources are selected, how visual options are configured, and how different settings shape what you see.</p><h2 id=1-select-a-chart>1. Select a chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To get started, make sure you have the <strong>SAMPLE CHARTS</strong> dashboard open and adjust the time range in the top-right corner of the dashboard back to <strong>-5M</strong> for Last 5 Minutes or select <strong>reset to default</strong></p><p>Find the <strong>Latency histogram</strong> chart, then click on the <strong>three dots</strong> (&mldr;) <strong>(1)</strong> in the upper-right corner of the chart. From the menu, select <strong>Open (3)</strong>. You can also simply click on the chart title (<strong>Latency histogram</strong>) <strong>(2)</strong> to open it directly.</p><p><a href=#R-image-b5d88aa2538046d2444e578afbe50828 class=lightbox-link><img alt="Sample Charts" class="lazy lightbox figure-image" loading=lazy src=../../images/latency-histogram-open.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5d88aa2538046d2444e578afbe50828><img alt="Sample Charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/latency-histogram-open.png></a></p><hr><p>Once the chart editor opens, you‚Äôll see the configuration settings for the Latency histogram chart.</p><p>The chart editor is where you can control how your data is visualized. You can change the chart type, apply transformation functions, adjust time settings, and customize other visual and data-related options to match your specific needs.</p><p><a href=#R-image-7dc188dc352711c34b9baf63516f0651 class=lightbox-link><img alt="Latency Histogram" class="lazy lightbox figure-image" loading=lazy src=../../images/latency-histogram.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7dc188dc352711c34b9baf63516f0651><img alt="Latency Histogram" class="lazy lightbox lightbox-image" loading=lazy src=../../images/latency-histogram.png></a></p><hr><p>In the <strong>Plot Editor (1)</strong> tab, under the <strong>Signal (2)</strong> section, you‚Äôll find the metric currently being used: <code>demo.trans.latency</code> <strong>(3)</strong>. This signal represents the latency data that the chart is plotting. You can use this area to edit or add additional signals to compare or enrich the visualization.</p><p>You‚Äôll notice several <strong>Line</strong> plots displayed in the chart. The label <code>18 ts</code> <strong>(4)</strong> indicates that the chart is currently plotting <strong>18 individual metric time series</strong>.
<a href=#R-image-6b17a0f063e771bc387af22794352e05 class=lightbox-link><img alt="Plot Editor" class="lazy lightbox figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6b17a0f063e771bc387af22794352e05><img alt="Plot Editor" class="lazy lightbox lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>To explore different visualization styles, try clicking on the various chart type icons in the editor. As you hover over each icon, its name will appear‚Äîhelping you understand what each type represents.</p><p><a href=#R-image-9dc3065088c8f98ce1303f9f871b5f5b class=lightbox-link><img alt="Chart Types" class="lazy lightbox figure-image" loading=lazy src=../../images/chartbartypes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9dc3065088c8f98ce1303f9f871b5f5b><img alt="Chart Types" class="lazy lightbox lightbox-image" loading=lazy src=../../images/chartbartypes.png></a></p><p>For example, click on the <strong>Heat Map</strong> icon to see how the same data is represented in a different format.</p><p><a href=#R-image-e5dd5d2d20b76d854f9d16a45bcf4a16 class=lightbox-link><img alt="Change to Heatmap" class="lazy lightbox figure-image" loading=lazy src=../../images/change-to-heatmap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e5dd5d2d20b76d854f9d16a45bcf4a16><img alt="Change to Heatmap" class="lazy lightbox lightbox-image" loading=lazy src=../../images/change-to-heatmap.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>You can visualize your metrics using a variety of chart types‚Äîchoose the one that best represents the insights you want to highlight.</p><p>For a detailed overview of available chart types and when to use them, check out <a href=https://docs.splunk.com/Observability/data-visualization/charts/chart-types.html#chart-types rel=external>Choosing a chart type.</a></p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 18, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=editing-charts>Editing Charts</h1><p>In this section, we‚Äôll start exploring how charts are structured by editing an existing one. This is a great way to get hands-on experience with the chart editor and understand how chart settings, data sources, and visualization options all come together.</p><hr><p>With the <strong>Latency histogram</strong> chart open in the chart editor, let‚Äôs begin configuring it for our workshop.</p><p>Click on the <strong>Line chart</strong> type icon <strong>(1)</strong> in the <strong>visualization</strong> pane to change the chart type. The data will now be displayed as a line plot.</p><p><a href=#R-image-b147b7f9dfed9f1ed51cb3fb523a7053 class=lightbox-link><img alt="Line Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/change-to-line.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b147b7f9dfed9f1ed51cb3fb523a7053><img alt="Line Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/change-to-line.png></a></p><h2 id=2-changing-the-charts-time-window>2. Changing the Chart‚Äôs Time Window<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can adjust the time range for the chart to view more historical data. To do this, click on the <strong>Time (1)</strong> dropdown in the top-right corner of the chart editor and select <strong>Past 15 minutes (2)</strong>.</p><p>This will expand the time window and allow you to see more of the metric trends over a longer period.</p><p><a href=#R-image-c516473a5461aedada989dec84474caf class=lightbox-link><img alt="Line Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/time_window.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c516473a5461aedada989dec84474caf><img alt="Line Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/time_window.png></a></p><h2 id=3--exploring-the-data-table>3. Exploring the Data Table<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the <strong>Data Table (1)</strong> tab in the chart editor.</p><p>The <strong>Data Table</strong> gives you a behind-the-scenes look at the metric time series powering the chart.</p><p><a href=#R-image-17ab745e37dcabffeb5292f6b9c73b5b class=lightbox-link><img alt="Data Table" class="lazy lightbox figure-image" loading=lazy src=../../images/data-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-17ab745e37dcabffeb5292f6b9c73b5b><img alt="Data Table" class="lazy lightbox lightbox-image" loading=lazy src=../../images/data-table.png></a></p><p>Each row in the table represents a single time series, and each column shows a dimension associated with that series. For the metric <code>demo.trans.latency</code>, you‚Äôll see the following dimensions:</p><ul><li><code>demo_datacenter</code> <strong>(2)</strong></li><li><code>demo_customer</code> <strong>(3)</strong></li><li><code>demo_host</code> <strong>(4)</strong></li></ul><p>In the <strong><code>demo_datacenter</code></strong> column, you‚Äôll notice there are two data centers: <strong>Paris (5)</strong> and <strong>Tokyo (6)</strong><br>Each has multiple associated time series.</p><p>As you move your cursor across the chart (horizontally through time), the <strong>Data Table</strong> updates in real time to reflect the values at the current time point. If you click on a specific line in the chart, it will pin that time series in the table, showing a fixed value‚Äîthis is indicated with a <strong>pinned value (7)</strong>.</p><hr><p>When you‚Äôre ready, click back on the <strong>Plot editor (8)</strong> tab to close the data table.</p><p>Next, let‚Äôs save this chart to a dashboard, so we can reuse it later!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=saving-charts-and-dashboards>Saving Charts and Dashboards</h1><p>Once you‚Äôve customized a chart to fit your needs, the next step is to save it as part of a dashboard. Saving your work lets you reuse, share, and monitor key visualizations over time. In this section, you‚Äôll learn how to name and describe your chart, and how to add it to a dashboard for easy access later.</p><h2 id=1-saving-a-chart>1. Saving a Chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To begin saving your chart, let‚Äôs give it a clear name and description.</p><p>Click on the chart title, currently labeled <strong>Copy of Latency Histogram</strong>, and rename it to <strong>‚ÄúActive Latency‚Äù (1)</strong>.</p><p>Next, update the chart description. Click on the existing text, <strong>Spread of latency values across time</strong>, and change it to:
<strong>Overview of latency values in real-time</strong>. <strong>(2)</strong></p><p>These updates help make the chart easier to identify and understand when it‚Äôs part of a larger dashboard or shared with others.</p><p><a href=#R-image-50efd5a12255e5dca36e43cfa1c9e156 class=lightbox-link><img alt="Save Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/save-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-50efd5a12255e5dca36e43cfa1c9e156><img alt="Save Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save-chart.png></a></p><p>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Save As</span></span></span> <strong>(3</strong>) button to begin the saving process. The chart will use the name <strong>Active Latency</strong> that you set earlier, but you can update the name here if needed.</p><p>Once you‚Äôre ready, click the <span class="btn cstyle button blue noicon"><span><span class=title>Ok</span></span></span> <strong>(1)</strong>
button to confirm and continue.</p><p><a href=#R-image-6052e8bd78ee1854ef89d3e0277092aa class=lightbox-link><img alt="Name Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/name-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6052e8bd78ee1854ef89d3e0277092aa><img alt="Name Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/name-chart.png></a></p><h2 id=2-creating-a-dashboard>2. Creating a dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we‚Äôre saving the chart, we need somewhere to store it‚Äî<strong>a dashboard</strong>.</p><p>Dashboards help organize and group related charts together, making it easier to monitor key metrics in one view. For this workshop, we‚Äôll create a <strong>new dashboard</strong> to hold the charts we are building.</p><p>In the <strong>Choose dashboard</strong> dialog, click the <span class="btn cstyle button blue noicon"><span><span class=title>New Dashboard</span></span></span> <strong>(1)</strong> button.</p><p><strong>Important</strong>: Do not select an existing dashboard‚Äîmake sure to create a new one for this exercise.</p><p><a href=#R-image-d9aaf67a4acf8800b8f53f5285fbd29a class=lightbox-link><img alt="Create Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/create-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9aaf67a4acf8800b8f53f5285fbd29a><img alt="Create Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create-dashboard.png></a></p><p>You‚Äôll now see the <strong>New Dashboard</strong> dialog, where you can configure the details of your new dashboard.</p><p>Start by giving your dashboard a name. For this workshop, use the following format: <strong>YOUR_NAME-Dashboard</strong>
Replace <strong>YOUR_NAME</strong> with your actual name to make your dashboard easy to identify.</p><p>Next, update the <strong>permissions</strong>. Set them to <strong>Restricted Read and Write access</strong>, to ensure that only you (or specific users) can view and modify the dashboard. Make sure your user account is included and has both read and write access.</p><p><a href=#R-image-7611f9c09d4906adc294c499867a6b5a class=lightbox-link><img alt="Secure Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/secure-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7611f9c09d4906adc294c499867a6b5a><img alt="Secure Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/secure-dashboard.png></a></p><p>You should now see your own user account listed in the permissions, which means <strong>you are currently the only one who can edit this dashboard</strong>.</p><p>If needed, you can add additional users or teams by selecting them from the dropdown below.</p><p>For the purposes of this workshop, let‚Äôs remove the restrictions. Change the permissions setting to <em><strong>Everyone can Read and Write</strong></em> so that access isn‚Äôt limited during the session.</p><p><a href=#R-image-21becc03be732a50b8d23d99a7d00b9e class=lightbox-link><img alt="Name Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/name-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-21becc03be732a50b8d23d99a7d00b9e><img alt="Name Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/name-dashboard.png></a></p><p>Now, click the <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span> button to continue.
Your new dashboard will be created and automatically selected, allowing you to save your chart directly into it</p><p><a href=#R-image-2996ab11d14a877c15c4654d164ab106 class=lightbox-link><img alt="Choose Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/choose-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2996ab11d14a877c15c4654d164ab106><img alt="Choose Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/choose-dashboard.png></a></p><p>Make sure your newly created dashboard is selected <strong>(1)</strong>, then click the <span class="btn cstyle button blue noicon"><span><span class=title>Ok</span></span></span> button <strong>(2)</strong> to proceed.</p><p>You‚Äôll now be taken to your dashboard. In the top-left corner, you‚Äôll see that <strong>YOUR_NAME-DASHBOARD</strong> is part of a Dashboard Group is part of a dashboard group with the same name. You can add additional dashboards to this dashboard group to organize charts around different use cases, systems, or projects.</p><p><a href=#R-image-5303385d9afa37deef16113eb324d969 class=lightbox-link><img alt="New Dashboard Group" class="lazy lightbox figure-image" loading=lazy src=../../images/new-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5303385d9afa37deef16113eb324d969><img alt="New Dashboard Group" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new-dashboard-group.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-new-chart>Create New Chart</h1><h3 id=1-creating-a-new-chart>1 Creating a New Chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Now let‚Äôs create a new chart and add it to the dashboard we‚Äôve been working on!</p><p>To get started, click the plus icon <strong>(1)</strong> in the top-middle part of the interface. From the dropdown, select <strong>Chart (2)</strong>.
Alternatively, you can click the <span class="btn cstyle button blue noicon"><span><span class=title>+ New Chart</span></span></span> Button <strong>(3)</strong> button to create a new chart directly.</p><p><a href=#R-image-6961f886007ed473776d5af1c90120ef class=lightbox-link><img alt="Create new chart" class="lazy lightbox figure-image" loading=lazy src=../../images/new-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6961f886007ed473776d5af1c90120ef><img alt="Create new chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new-chart.png></a></p><p>You‚Äôll now see a blank chart template, ready for configuration:</p><p><a href=#R-image-03ea7685524f2c2d7e840beb16fdbd77 class=lightbox-link><img alt="Empty Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/empty-new-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-03ea7685524f2c2d7e840beb16fdbd77><img alt="Empty Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/empty-new-chart.png></a></p><p>Let‚Äôs begin by adding a metric to visualize. For this example, we‚Äôll continue working with <strong><code>demo.trans.latency</code></strong>, the same metric we used earlier.</p><p>In the <strong>Plot Editor (1)</strong>, go to the <strong>Signal (2)</strong> section, and enter <strong><code>demo.trans.latency</code>(3)</strong> into the input field. This will load the latency time series data into the chart, so we can start building and customizing our visualization.</p><p><a href=#R-image-00894c3121122c69d9b21884ba49c58a class=lightbox-link><img alt=Signal class="lazy lightbox figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-00894c3121122c69d9b21884ba49c58a><img alt=Signal class="lazy lightbox lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>You should now see a familiar line chart displaying <strong>18 time series (4)</strong>. To view recent activity, change the time range to <strong>Past 15 minutes</strong> by selecting it from the <strong>Time dropdown (1)</strong></p><p><a href=#R-image-06fa91aa4002b7ecedb5386dc7900e8b class=lightbox-link><img alt=Signal class="lazy lightbox figure-image" loading=lazy src=../../images/line-chart-15-mins.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-06fa91aa4002b7ecedb5386dc7900e8b><img alt=Signal class="lazy lightbox lightbox-image" loading=lazy src=../../images/line-chart-15-mins.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=using-filters--analytics>Using Filters & Analytics</h1><h3 id=1-filtering-and-analytics>1. Filtering and Analytics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Splunk Observability</strong> makes it easy to explore large volumes of metric data by using <strong>filters</strong> and <strong>analytics functions</strong>. Filters help you focus on specific segments of your data‚Äîsuch as a particular service, host, or location‚Äîwhile analytics functions let you transform and analyze that data for deeper insights.</p><p>Now let‚Äôs narrow down our data to focus on the <strong>Paris data center</strong>, which will allow us to apply more targeted analytics. We‚Äôll do this by using a <strong>Filter</strong>.</p><p>Start by returning to the <strong>Plot Editor</strong> tab. Click the <span class="btn cstyle button blue noicon"><span><span class=title>Add Filter</span></span></span> button <strong>(2)</strong> as shown in the screenshot below.</p><p>Wait a moment for the available dimensions to populate. Then:</p><ul><li>Select <strong>demo_datacenter (1)</strong> as the filter dimension.</li><li>Choose <strong>Paris (2)</strong> as the value to filter on.</li></ul><p>This filter will limit the chart to show only the time series coming from the Paris data center, making your analysis more focused and meaningful.</p><p><a href=#R-image-769f4eb50a67d17be43c68e0279f2a49 class=lightbox-link><img alt=Filter class="lazy lightbox figure-image" loading=lazy src=../../images/select-filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-769f4eb50a67d17be43c68e0279f2a49><img alt=Filter class="lazy lightbox lightbox-image" loading=lazy src=../../images/select-filter.png></a></p><hr><p>In the <strong>F(x) (1)</strong> column of the chart editor, click the <span class="btn cstyle button blue noicon"><span><span class=title>Add Analytics</span></span></span> button o apply an analytic function.
From the dropdown list, select <strong><code>Percentile</code> (2)</strong>, and then choose the <strong><code>Percentile:Aggregation</code> (3)</strong> option.
In the follow-up panel, leave the percentile value set to 90, which tells the chart to display the 90th percentile of the selected time series.</p><p>In this context, the 90th percentile represents the value below which 90% of the latency measurements fall, in other words, only <strong>the highest 10%</strong> of values exceed this point. This is a useful way to understand ‚Äúworst-case normal‚Äù performance‚Äîfiltering out occasional spikes while still showing when latency is approaching unacceptable levels.</p><p>To apply the function, simply click anywhere outside the panel to confirm your selection <strong>(4)</strong>.</p><p><a href=#R-image-4bd4064598c08ea6b28131f698525276 class=lightbox-link><img alt=Analytics class="lazy lightbox figure-image" loading=lazy src=../../images/prepare_filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4bd4064598c08ea6b28131f698525276><img alt=Analytics class="lazy lightbox lightbox-image" loading=lazy src=../../images/prepare_filter.png></a></p><p>For info on the <strong>Percentile</strong> function and the other functions see <a href=https://docs.splunk.com/Observability/data-visualization/charts/gain-insights-through-chart-analytics.html#gain-insights-through-chart-analytics rel=external>Chart Analytics</a>.</p><hr><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 18, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=using-timeshift--formulas>Using TimeShift & Formula's</h1><h3 id=1-using-timeshift-analytical-function>1. Using Timeshift Analytical Function<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>In many cases, it‚Äôs useful to compare current performance against historical data‚Äîfor example, to identify trends, regressions, or improvements over time. The <strong>Timeshift</strong> function makes this easy by shifting a time series backward in time, letting you see past values side by side with the present.</p><p>To get started, clone <strong>Signal A</strong> by clicking the <strong><code>...</code></strong> menu <strong>(1)</strong> next to it and selecting <strong>Clone (2)</strong> from the dropdown.</p><p><strong>Cloning</strong> a signal creates an identical copy with the same metric, filters, and settings. This duplicate‚Äî<strong>Signal B</strong>‚Äîcan then be used for further calculations or comparisons, such as applying a <strong>Timeshif</strong>t to visualize what the metric looked like one week ago, without altering the original signal.
<a href=#R-image-eaf100e6163ac0405613887afde9e761 class=lightbox-link><img alt="Clone Signal" class="lazy lightbox figure-image" loading=lazy src=../../images/timeshift-filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eaf100e6163ac0405613887afde9e761><img alt="Clone Signal" class="lazy lightbox lightbox-image" loading=lazy src=../../images/timeshift-filter.png></a></p><hr><p>After cloning, you‚Äôll see a new signal labeled <strong>Signal B (1)</strong>. Since it‚Äôs an exact copy of <strong>Signal A</strong>, both signals display the same data over the same time range. As a result, they appear to <strong>overlap completely</strong> on the chart, making it look like there‚Äôs only one line.</p><p>To make the comparison meaningful, we‚Äôll apply a <strong>Timeshift</strong> to <strong>Signal B</strong>, shifting its data one week into the past. This allows us to see how current latency trends compare to those from the same time last week.</p><p>In the <strong>F(x)</strong> column next to Signal B, click the <span class="btn cstyle button blue noicon"><span><span class=title><strong>+</strong></span></span></span> <strong>(2)</strong>, then choose the <strong>Timeshift (3)</strong> function from the list.
<a href=#R-image-82334a0ef52be9c944684a5be39a4e97 class=lightbox-link><img alt="Plot Editor" class="lazy lightbox figure-image" loading=lazy src=../../images/ab-plot-full.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-82334a0ef52be9c944684a5be39a4e97><img alt="Plot Editor" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ab-plot-full.png></a></p><hr><p>When prompted, enter <strong>1w</strong> (or <strong>7d</strong> for 7 days) <strong>(4)</strong> as the time shift value. Click anywhere outside the panel <strong>(5)</strong> to confirm the change.</p><p>This will shift <strong>Signal B</strong>‚Äôs data one week into the past, allowing you to visually compare current latency trends with those from the same time last week.<br><a href=#R-image-caaa97d2200b6eb6da3cc74aa4364ef7 class=lightbox-link><img alt=Timeshift class="lazy lightbox figure-image" loading=lazy src=../../images/b-shifted.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-caaa97d2200b6eb6da3cc74aa4364ef7><img alt=Timeshift class="lazy lightbox lightbox-image" loading=lazy src=../../images/b-shifted.png></a></p><hr><p>To change the color of <strong>Signal B</strong>, click the ‚öôÔ∏è settings icon <strong>(1)</strong> on the far right of its row to open the settings menu. Then, select a <strong>Plot Color</strong>, such as pink <strong>(2)</strong>, to visually distinguish <strong>Signal B</strong> from the original signal on the chart.
When you are done, click on the<span class="btn cstyle button noicon" style=--VARIABLE-BOX-color:gray><span><span class=title>Close</span></span></span> <strong>(3)</strong>
<a href=#R-image-c930ca12209fc1337eaf5b7e10234901 class=lightbox-link><img alt="Change Plot Color" class="lazy lightbox figure-image" loading=lazy src=../../images/b-pink.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c930ca12209fc1337eaf5b7e10234901><img alt="Change Plot Color" class="lazy lightbox lightbox-image" loading=lazy src=../../images/b-pink.png></a></p><hr><p>You should now see two plots on the chart: the <em>p90</em> of current latency (<strong>Signal A</strong>) shown in blue, and the <em>p90</em> from one week ago (<strong>Signal B</strong>) shown in pink.</p><p>To make the difference between them easier to interpret, click the <strong>Area chart</strong> icon <strong>(1)</strong> to change the visualization style. This highlights the areas under the curves, making it easier to spot when last week‚Äôs latency was higher than the current values.</p><p>Next, update the time range by clicking the field next to <strong>Time (2)</strong> in the Override bar and selecting <strong>Past Hour (3)</strong> from the dropdown.
<a href=#R-image-56430476de46c496908561b55a47af16 class=lightbox-link><img alt=Timeframe class="lazy lightbox figure-image" loading=lazy src=../../images/a-b-area.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-56430476de46c496908561b55a47af16><img alt=Timeframe class="lazy lightbox lightbox-image" loading=lazy src=../../images/a-b-area.png></a></p><hr><h3 id=2-using-formulas>2. Using Formulas<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Now let‚Äôs take it a step further by calculating the difference between two time-shifted metric values‚Äîfor example, comparing today‚Äôs data with data from exactly one week ago.</p><p>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Enter Formula</span></span></span> button one line <strong>C (1)</strong>, then type in <strong>A - B</strong> <strong>(2)</strong> to subtract <strong>Signal B</strong> from <strong>Signal A</strong>. This creates a new calculated signal, labeled <strong>C</strong>.</p><p>To focus only on the result of this formula, hide the other signals by clicking the eye icon next to <strong>A (3)</strong> and <strong>B (4)</strong>, leaving only <strong>C</strong> visible.</p><p><a href=#R-image-069a39a375b501e111009fcad59058ac class=lightbox-link><img alt="C only" class="lazy lightbox figure-image" loading=lazy src=../../images/c-only.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-069a39a375b501e111009fcad59058ac><img alt="C only" class="lazy lightbox lightbox-image" loading=lazy src=../../images/c-only.png></a></p><p>You should now see a single line that represents the difference between the current metric values (<strong>A</strong>) and those from a week ago (<strong>B</strong>). In the chart, some values may appear negative‚Äîthis happens when the older metric (<strong>B</strong>) was higher than the current one (<strong>A</strong>) at that point in time.</p><p>Now that we‚Äôve explored visual chart analytics, let‚Äôs take a look under the hood at the SignalFlow powering our charts and detectors in the next section!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=using-signalflow>Using SignalFlow</h1><h2 id=1-introduction-to-signalflow>1. Introduction to SignalFlow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now let‚Äôs take a closer look at <strong>SignalFlow</strong>, the powerful analytics language behind Splunk Observability Cloud. SignalFlow enables you to define monitoring logic as code, offering a flexible and real-time way to work with metrics and automate alerting.</p><p>At the core of <strong>Splunk Infrastructure Monitoring</strong> is the <strong>SignalFlow analytics engine</strong>, which processes streaming metric data in real time. SignalFlow is written in a Python-like syntax and allows you to build computations that take in <strong>metric time series (MTS)</strong>, perform transformations or calculations, and output new MTS.</p><p>Some common use cases for SignalFlow include:</p><ul><li>Comparing current values with historical trends, such as week-over-week comparisons</li><li>Creating population-level insights using distributed percentile charts</li><li>Monitoring rates of change or thresholds, such as detecting when a Service Level Objective (SLO) is breached</li><li>Identifying correlated dimensions, like pinpointing which service is linked to an increase in low disk space alerts</li></ul><p>You can create SignalFlow based computations directly in the <strong>Chart Builder</strong> interface by selecting metrics and applying analytical functions visually. For more advanced use cases, you can also write and execute SignalFlow programs directly using the <strong>SignalFlow API</strong>.</p><p>SignalFlow includes a robust set of built-in functions that operate on time series data‚Äîmaking it ideal for dynamic, real-time monitoring across complex systems.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>For more information on SignalFlow see <a href=https://docs.splunk.com/Observability/infrastructure/analytics/signalflow.html rel=external>Analyze incoming data using SignalFlow</a>.</p></div></details><h2 id=2-view-signalflow>2. View SignalFlow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the Chart Builder, click on <strong>View SignalFlow</strong>, to open the underlying code that powers your chart.</p><p><a href=#R-image-f467c344f249090128f100e2b943e4a3 class=lightbox-link><img alt=SignalFlow class="lazy lightbox figure-image" loading=lazy src=../../images/view-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f467c344f249090128f100e2b943e4a3><img alt=SignalFlow class="lazy lightbox lightbox-image" loading=lazy src=../../images/view-signalflow.png></a></p><p>When you click <strong>View SignalFlow</strong>, you‚Äôll see the <strong>SignalFlow program (1)</strong> that defines the logic and transformations behind your chart. This view gives you direct access to the code powering your visualization, allowing you to fine-tune or extend it beyond what‚Äôs possible in the visual editor.</p><p>Below is an example of the SignalFlow code for the chart we just created. This snippet shows how we defined the two percentile signals (current and one week ago), applied a timeshift, and calculated the difference between them. Reviewing the code helps clarify how each step contributes to the final chart.</p><div class=tab-panel data-tab-group=R-tabs-3647e9f44ce5c958c0aec255375eabfa><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7eda471189c3c93ec7f7354d70a6dedd aria-expanded=true data-tab-item=R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3647e9f44ce5c958c0aec255375eabfa","R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6")'>
<span class=tab-nav-text>SignalFlow</span></button></div><div class=tab-content-container><div id=R-tab-id-7eda471189c3c93ec7f7354d70a6dedd data-tab-item=R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>A</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>B</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>timeshift</span><span class=p>(</span><span class=s1>&#39;1w&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>C</span> <span class=o>=</span> <span class=p>(</span><span class=n>A</span><span class=o>-</span><span class=n>B</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;C&#39;</span><span class=p>)</span></span></span></code></pre></div></div></div></div></div><p>Click on <strong>View Builder (2)</strong> to go back to the Chart <strong>Builder</strong> UI.</p><p><a href=#R-image-30c422949903ce67e8cbc94e3c2d8b7e class=lightbox-link><img alt="View Builder" class="lazy lightbox figure-image" loading=lazy src=../../images/show-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-30c422949903ce67e8cbc94e3c2d8b7e><img alt="View Builder" class="lazy lightbox lightbox-image" loading=lazy src=../../images/show-signalflow.png></a></p><p>Let&rsquo;s save this new chart to our Dashboard!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Apr 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-charts-to-dashboards>Adding charts to dashboards</h1><h2 id=1-saving-to-an-existing-dashboard>1. Saving to an Existing Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before saving your chart, check the top-left corner to confirm that <strong>YOUR_NAME-Dashboard: YOUR_NAME-Dashboard (1)</strong> is selected. This ensures that your chart will be saved to the correct dashboard.</p><p>Next, give your chart a name. Enter <strong>Latency History</strong> <strong>(2)</strong>, and if you‚Äôd like, add a brief description in the <strong>Chart Description (3)</strong> if you wish like in our example.
<a href=#R-image-8bf129b87bd4e5755ae0af4e446a4e9e class=lightbox-link><img alt="Save Chart 1" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8bf129b87bd4e5755ae0af4e446a4e9e><img alt="Save Chart 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-1.png></a></p><hr><p>When you‚Äôre ready, click the <span class="btn cstyle button blue noicon"><span><span class=title>Save And Close</span></span></span> button <strong>(4)</strong>. You‚Äôll be returned to your dashboard, which now contains two charts.
<a href=#R-image-58cf72a099fb2fbc593eb40a5a361964 class=lightbox-link><img alt="Save Chart 2" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-58cf72a099fb2fbc593eb40a5a361964><img alt="Save Chart 2" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-2.png></a></p><hr><h2 id=2-copy-and-paste-a-chart>2. Copy and Paste a chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now let‚Äôs quickly add another chart by duplicating the one we just created.</p><p>In your dashboard, locate the <strong>Latency History</strong> chart and click the three dots <strong><code>...</code></strong> <strong>(1)</strong> in the upper-right corner of the chart. From the menu, select <strong>Copy (2)</strong>.</p><p>After copying, you‚Äôll notice a small white <strong>1</strong> appear in front of the <strong>+</strong> icon <strong>(3)</strong> at the top of the page. This indicates that one chart is ready to be pasted.
<a href=#R-image-dd80abd6144706cecaceb3199b18d7ae class=lightbox-link><img alt="Copy chart" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dd80abd6144706cecaceb3199b18d7ae><img alt="Copy chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-3.png></a></p><hr><p>Click the <strong>+</strong> icon <strong>()1</strong> at the top of the page, and in the dropdown menu, select <strong>(2)</strong>.<br>You should also see a <strong>1</strong> at the end of that line, confirming that the copied chart is ready to be added.
<a href=#R-image-e7047cca25cb41ecb8be074050b77b33 class=lightbox-link><img alt="Past charts" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7047cca25cb41ecb8be074050b77b33><img alt="Past charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-4.png></a></p><p>This will place a copy of the previous chart in your dashboard.
<a href=#R-image-e0c5f5104b27254dc7eeb841587f6948 class=lightbox-link><img alt="Three Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e0c5f5104b27254dc7eeb841587f6948><img alt="Three Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-5.png></a></p><hr><h2 id=3-edit-the-pasted-chart>3. Edit the pasted chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To edit the duplicated chart, click the three dots <strong><code>...</code></strong> on one of the <strong>Latency History</strong> charts in your dashboard and then select <strong>Open</strong>. Alternatively, you can click directly on the chart‚Äôs title, <strong>Latency History</strong>, to open it in the editor.</p><p>This will bring you to the editor environment again.</p><p>Start by adjusting the time range in the top-right corner of the chart. Set it to <strong>Past 1 Hour (1)</strong> to give you a broader view of recent data.</p><p>Next, let‚Äôs customize the chart to make it unique. Click the eye icon next to <strong>Signal A (2)</strong> to make it visible again.<br>Then hide <strong>Signal C (3)</strong> by clicking its eye icon.</p><p>Update the chart title from <em>Latency history</em> to <strong>Latency vs Load (4)</strong>, and optionally add or edit the chart description to reflect the updated focus <strong>(5)</strong>.
<a href=#R-image-5c8b6ba87c539475db33eeb038450aff class=lightbox-link><img alt="Set Visibility" class="lazy lightbox figure-image" loading=lazy src=../../images/morecharts-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c8b6ba87c539475db33eeb038450aff><img alt="Set Visibility" class="lazy lightbox lightbox-image" loading=lazy src=../../images/morecharts-6.png></a></p><hr><p>Click on the <span class="btn cstyle button blue noicon"><span><span class=title>Add Metric Or Event</span></span></span> button to create a new signal. In the input field that appears, type and select <code>demo.trans.count</code> <strong>(1)</strong> to add it as <strong>Signal D</strong>.</p><p>This adds a new signal, <strong>Signal D</strong>, to your chart. It represents the number of active requests being processed.</p><p>To focus on the <strong>Paris data center</strong>, add a filter for <strong>demo_datacenter: Paris (2)</strong>. Then, click the Configure Plot ‚öôÔ∏è <strong>(3)</strong> button to adjust how the data is displayed. Change the <strong>rollup</strong> type from <strong>Auto (Delta)</strong> to <strong>Rate/sec (4)</strong> to show the rate of incoming requests per second.</p><p>Finally, rename the signal from <code>demo.trans.count</code> to <code>Latency vs Load</code> <strong>(5)</strong> to reflect its role in the chart more clearly.</p><p><a href=#R-image-54054519ca2d0e558cff07aba6d0c17b class=lightbox-link><img alt="rollup change" class="lazy lightbox figure-image" loading=lazy src=../../images/rollout-change.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-54054519ca2d0e558cff07aba6d0c17b><img alt="rollup change" class="lazy lightbox lightbox-image" loading=lazy src=../../images/rollout-change.png></a></p><p>Finally press the <span class="btn cstyle button transparent noicon"><span><span class=title>Save And Close</span></span></span> button. This returns you to your dashboard that now has three different charts!</p><p><a href=#R-image-f7225d2a3fabb28a474cfe15439ccdfc class=lightbox-link><img alt="three charts" class="lazy lightbox figure-image" loading=lazy src=../../images/3-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f7225d2a3fabb28a474cfe15439ccdfc><img alt="three charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/3-charts.png></a></p><p>Let&rsquo;s add an &ldquo;instruction&rdquo; note and arrange the charts!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 19, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-notes-and-dashboard-layout>Adding Notes and Dashboard Layout</h1><h2 id=1-adding-notes>1. Adding Notes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Often on dashboards it makes sense to place a short &ldquo;instruction&rdquo; pane that helps users of a dashboard. Lets add one now by clicking on the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>New Text Note</strong></span></span></span>
Button.</p><p><a href=#R-image-a3a245f273b92ebfb6c823f31cc544e7 class=lightbox-link><img alt="three charts" class="lazy lightbox figure-image" loading=lazy src=../../images/add-notes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a3a245f273b92ebfb6c823f31cc544e7><img alt="three charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/add-notes.png></a></p><p>This will open the notes editor.</p><p><a href=#R-image-34e2906904e3f219852b8b4747d7df04 class=lightbox-link><img alt="Notes 1" class="lazy lightbox figure-image" loading=lazy src=../../images/notes-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34e2906904e3f219852b8b4747d7df04><img alt="Notes 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images/notes-editor.png></a></p><p>To allow you to add more then just text to you notes, Splunk is allowing you to use Markdown in these notes/panes.
Markdown is a lightweight markup language for creating formatted text using plain-text often used in Webpages.</p><p>This includes (but not limited to):</p><ul><li>Headers. (in various sizes)</li><li>Emphasis styles.</li><li>Lists and Tables.</li><li>Links. These can be external webpages (for documentation for example) or directly to other Splunk IM Dashboards</li></ul><p>Below is an example of above Markdown options you can use in your note.</p><div class=tab-panel data-tab-group=R-tabs-7fb5862caed2b5df61965bbbd62510a8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1dfc742bb3ca405f9e18b48ab690d938 aria-expanded=true data-tab-item=R-tab-a704b0867831f74a891c7b2fbe8fa296 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7fb5862caed2b5df61965bbbd62510a8","R-tab-a704b0867831f74a891c7b2fbe8fa296")'>
<span class=tab-nav-text>Sample Markdown text</span></button></div><div class=tab-content-container><div id=R-tab-id-1dfc742bb3ca405f9e18b48ab690d938 data-tab-item=R-tab-a704b0867831f74a891c7b2fbe8fa296 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=gh># h1 Big headings
</span></span></span><span class=line><span class=cl><span class=gh></span>
</span></span><span class=line><span class=cl><span class=gu>###### h6 To small headings
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gu>##### Emphasis
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gs>**This is bold text**</span>, <span class=ge>*This is italic text*</span> , <span class=gd>~~Strikethrough~~</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Lists
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>Unordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>+ Create a list by starting a line with <span class=sb>`+`</span>, <span class=sb>`-`</span>, or <span class=sb>`*`</span>
</span></span><span class=line><span class=cl><span class=k>-</span> Sub-lists are made by indenting 2 spaces:
</span></span><span class=line><span class=cl><span class=k>-</span> Marker character change forces new list start:
</span></span><span class=line><span class=cl>    <span class=k>*</span> Ac tristique libero volutpat at
</span></span><span class=line><span class=cl>    + Facilisis in pretium nisl aliquet
</span></span><span class=line><span class=cl><span class=k>*</span> Very easy!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>1.</span> Lorem ipsum dolor sit amet
</span></span><span class=line><span class=cl><span class=k>2.</span> Consectetur adipiscing elit
</span></span><span class=line><span class=cl><span class=k>3.</span> Integer molestie lorem at massa
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Tables
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>| Option | Description |
</span></span><span class=line><span class=cl>| ------ | ----------- |
</span></span><span class=line><span class=cl>| chart  | path to data files to supply the data that will be passed into templates. |
</span></span><span class=line><span class=cl>| engine | engine to be used for processing templates. Handlebars is the default. |
</span></span><span class=line><span class=cl>| ext    | extension to be used for dest files. |
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>#### Links
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>[<span class=nt>link to webpage</span>](<span class=na>https://www.splunk.com</span>)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[<span class=nt>link to dashboard with title</span>](<span class=na>https://app.eu0.signalfx.com/#/dashboard/EaJHrbPAEAA?groupId=EaJHgrsAIAA&amp;configId=EaJHsHzAEAA &#34;Link to the Sample chart Dashboard!&#34;</span>)</span></span></code></pre></div></div></div></div></div><p>Copy the above by using the copy button and paste it in the <em>Edit</em> box.
the preview will show you how it will look.</p><hr><h2 id=2-saving-our-chart>2. Saving our chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Give the Note chart a name, in our example we used <em>Example text chart</em>, then press the <span class="btn cstyle button blue noicon"><span><span class=title>Save And Close</span></span></span> Button.</p><p><a href=#R-image-715274908fbfa6eb6883d1cfdc138696 class=lightbox-link><img alt="saving note" class="lazy lightbox figure-image" loading=lazy src=../../images/notes-with-example.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-715274908fbfa6eb6883d1cfdc138696><img alt="saving note" class="lazy lightbox lightbox-image" loading=lazy src=../../images/notes-with-example.png></a></p><p>This will bring you back to you Dashboard, that now includes the note.</p><p><a href=#R-image-686cdce74a8501d0fbca4827eded299e class=lightbox-link><img alt="three charts and note" class="lazy lightbox figure-image" loading=lazy src=../../images/3-charts-and-note.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-686cdce74a8501d0fbca4827eded299e><img alt="three charts and note" class="lazy lightbox lightbox-image" loading=lazy src=../../images/3-charts-and-note.png></a></p><hr><h2 id=3-ordering--sizing-of-charts>3. Ordering & sizing of charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you do not like the default order and sizes of your charts you can simply use window dragging technique to move and size them to the desired location.</p><p>Grab the <strong>top</strong> border of a chart and you should see the mouse pointer change to a drag icon (see picture below).</p><p><a href=#R-image-f0d93c86a609d33e0ad90262f46b2131 class=lightbox-link><img alt="dragging charts" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0d93c86a609d33e0ad90262f46b2131><img alt="dragging charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-4.png></a></p><p>Now drag the <strong>Latency vs Load</strong> chart to sit between the <strong>Latency History</strong> Chart and the <strong>Example text chart</strong>.</p><p><a href=#R-image-6b30f6bc35c19019e567614224cb395f class=lightbox-link><img alt=sizing class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6b30f6bc35c19019e567614224cb395f><img alt=sizing class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-5.png></a></p><p>You can also resize windows by dragging from the left, right and bottom edges.</p><p>As a last exercise reduce the width of the note chart to about a third of the other charts. The chart will automatically snap to one of the sizes it supports. Widen the 3 other charts to about a third of the Dashboard. Drag the notes to the right of the others and resize it to match it to the 3 others. Set the <strong>Time</strong> to <strong>-1h</strong> and you should have the following dashboard!</p><p><a href=#R-image-55f3675ef000d2de009754805d736357 class=lightbox-link><img alt=TaDA! class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-55f3675ef000d2de009754805d736357><img alt=TaDA! class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-6.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 1, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=hands-on-opentelemetry-docker-and-k8s>Hands-On OpenTelemetry, Docker, and K8s</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p>In this workshop, you&rsquo;ll get hands-on experience with the following:</p><ul><li>Practice deploying the collector and instrumenting a .NET application with the Splunk distribution of OpenTelemetry .NET in Linux and Kubernetes environments.</li><li>Practice ‚Äúdockerizing‚Äù a .NET application, running it in Docker, and then adding Splunk OpenTelemetry instrumentation.</li><li>Practice deploying the Splunk distro of the collector in a K8s environment using Helm. Then customize the collector config and troubleshoot an issue.</li></ul><p>The workshop uses a simple .NET application to illustrate these concepts. Let&rsquo;s get started!</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Hands-On OpenTelemetry, Docker, and K8s</h1><article class=default><header class=headline></header><h1 id=connect-to-ec2-instance>Connect to EC2 Instance</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=connect-to-your-ec2-instance>Connect to your EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We‚Äôve prepared an Ubuntu Linux instance in AWS/EC2 for each attendee.</p><p>Using the IP address and password provided by your instructor, connect to your EC2 instance
using one of the methods below:</p><ul><li>Mac OS / Linux<ul><li>ssh splunk@IP address</li></ul></li><li>Windows 10+<ul><li>Use the OpenSSH client</li></ul></li><li>Earlier versions of Windows<ul><li>Use Putty</li></ul></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=uninstall-the-opentelemetry-collector>Uninstall the OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Our EC2 instance may already have an older version the Splunk Distribution of the OpenTelemetry Collector
installed. Before proceeding further, let&rsquo;s uninstall it using the following command:</p><div class=tab-panel data-tab-group=R-tabs-8de02d501ba4a113bd9ee6035c4d81b3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2f9f2727cded0c718cf011a64a9d31d8 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-8de02d501ba4a113bd9ee6035c4d81b3","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-9d7e7636c6724e8ec2f6e366ca7416b5 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-8de02d501ba4a113bd9ee6035c4d81b3","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-2f9f2727cded0c718cf011a64a9d31d8 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh<span class=p>;</span>
</span></span><span class=line><span class=cl>sudo sh /tmp/splunk-otel-collector.sh --uninstall</span></span></code></pre></div></div></div><div id=R-tab-id-9d7e7636c6724e8ec2f6e366ca7416b5 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Reading package lists... Done
</span></span><span class=line><span class=cl>Building dependency tree... Done
</span></span><span class=line><span class=cl>Reading state information... Done
</span></span><span class=line><span class=cl>The following packages will be REMOVED:
</span></span><span class=line><span class=cl>  splunk-otel-collector*
</span></span><span class=line><span class=cl><span class=m>0</span> upgraded, <span class=m>0</span> newly installed, <span class=m>1</span> to remove and <span class=m>167</span> not upgraded.
</span></span><span class=line><span class=cl>After this operation, <span class=m>766</span> MB disk space will be freed.
</span></span><span class=line><span class=cl><span class=o>(</span>Reading database ... <span class=m>157441</span> files and directories currently installed.<span class=o>)</span>
</span></span><span class=line><span class=cl>Removing splunk-otel-collector <span class=o>(</span>0.92.0<span class=o>)</span> ...
</span></span><span class=line><span class=cl><span class=o>(</span>Reading database ... <span class=m>147373</span> files and directories currently installed.<span class=o>)</span>
</span></span><span class=line><span class=cl>Purging configuration files <span class=k>for</span> splunk-otel-collector <span class=o>(</span>0.92.0<span class=o>)</span> ...
</span></span><span class=line><span class=cl>Scanning processes...                                                                                                                                                                                              
</span></span><span class=line><span class=cl>Scanning candidates...                                                                                                                                                                                             
</span></span><span class=line><span class=cl>Scanning linux images...                                                                                                                                                                                           
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Running kernel seems to be up-to-date.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Restarting services...
</span></span><span class=line><span class=cl> systemctl restart fail2ban.service falcon-sensor.service
</span></span><span class=line><span class=cl>Service restarts being deferred:
</span></span><span class=line><span class=cl> systemctl restart networkd-dispatcher.service
</span></span><span class=line><span class=cl> systemctl restart unattended-upgrades.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No containers need to be restarted.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No user sessions are running outdated binaries.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No VM guests are running outdated hypervisor <span class=o>(</span>qemu<span class=o>)</span> binaries on this host.
</span></span><span class=line><span class=cl>Successfully removed the splunk-otel-collector package</span></span></code></pre></div></div></div></div></div><h2 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let‚Äôs deploy the latest version of the Splunk Distribution of the OpenTelemetry Collector on our Linux EC2 instance.</p><p>We can do this by downloading the collector binary using <code>curl</code>, and then running it<br>with specific arguments that tell the collector which realm to report data into, which access
token to use, and which deployment environment to report into.</p><blockquote><p>A deployment environment in Splunk Observability Cloud is a distinct deployment of your system
or application that allows you to set up configurations that don‚Äôt overlap with configurations
in other deployments of the same application.</p></blockquote><div class=tab-panel data-tab-group=R-tabs-b31a74c4e3739b6e6ae9948238900cbe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-848efda4d94561426a4f716f91eb7bd6 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b31a74c4e3739b6e6ae9948238900cbe","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-a61335b56772f9f9967902b3b02d4865 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b31a74c4e3739b6e6ae9948238900cbe","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-848efda4d94561426a4f716f91eb7bd6 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh<span class=p>;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>sudo sh /tmp/splunk-otel-collector.sh <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--realm <span class=nv>$REALM</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--mode agent <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--without-instrumentation <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--deployment-environment otel-<span class=nv>$INSTANCE</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-- <span class=nv>$ACCESS_TOKEN</span></span></span></code></pre></div></div></div><div id=R-tab-id-a61335b56772f9f9967902b3b02d4865 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Splunk OpenTelemetry Collector Version: latest
</span></span><span class=line><span class=cl>Memory Size in MIB: <span class=m>512</span>
</span></span><span class=line><span class=cl>Realm: us1
</span></span><span class=line><span class=cl>Ingest Endpoint: https://ingest.us1.signalfx.com
</span></span><span class=line><span class=cl>API Endpoint: https://api.us1.signalfx.com
</span></span><span class=line><span class=cl>HEC Endpoint: https://ingest.us1.signalfx.com/v1/log
</span></span><span class=line><span class=cl>etc. </span></span></code></pre></div></div></div></div></div><p>Refer to <a href=https://docs.splunk.com/observability/en/gdi/opentelemetry/collector-linux/install-linux.html#otel-install-linux rel=external>Install the Collector for Linux with the installer script</a>
for further details on how to install the collector.</p><h2 id=confirm-the-collector-is-running>Confirm the Collector is Running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s confirm that the collector is running successfully on our instance.</p><blockquote><p>Press Ctrl + C to exit out of the status command.</p></blockquote><div class=tab-panel data-tab-group=R-tabs-03baae3734f8f78aca7d10c9a2b14aa0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-bd27721d7981de7929ceda4789694207 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-03baae3734f8f78aca7d10c9a2b14aa0","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-e749324ab6be8ef36b667ec94ab392aa aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-03baae3734f8f78aca7d10c9a2b14aa0","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-bd27721d7981de7929ceda4789694207 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl status splunk-otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-e749324ab6be8ef36b667ec94ab392aa data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>‚óè splunk-otel-collector.service - Splunk OpenTelemetry Collector
</span></span><span class=line><span class=cl>     Loaded: loaded <span class=o>(</span>/lib/systemd/system/splunk-otel-collector.service<span class=p>;</span> enabled<span class=p>;</span> vendor preset: enabled<span class=o>)</span>
</span></span><span class=line><span class=cl>    Drop-In: /etc/systemd/system/splunk-otel-collector.service.d
</span></span><span class=line><span class=cl>             ‚îî‚îÄservice-owner.conf
</span></span><span class=line><span class=cl>     Active: active <span class=o>(</span>running<span class=o>)</span> since Fri 2024-12-20 00:13:14 UTC<span class=p>;</span> 45s ago
</span></span><span class=line><span class=cl>   Main PID: <span class=m>14465</span> <span class=o>(</span>otelcol<span class=o>)</span>
</span></span><span class=line><span class=cl>      Tasks: <span class=m>9</span> <span class=o>(</span>limit: 19170<span class=o>)</span>
</span></span><span class=line><span class=cl>     Memory: 117.4M
</span></span><span class=line><span class=cl>        CPU: 681ms
</span></span><span class=line><span class=cl>     CGroup: /system.slice/splunk-otel-collector.service
</span></span><span class=line><span class=cl>             ‚îî‚îÄ14465 /usr/bin/otelcol</span></span></code></pre></div></div></div></div></div><h2 id=how-do-we-view-the-collector-logs>How do we view the collector logs?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can view the collector logs using <code>journalctl</code>:</p><blockquote><p>Press Ctrl + C to exit out of tailing the log.</p></blockquote><div class=tab-panel data-tab-group=R-tabs-eb5dd8cbc566c9ffe1c90e61950272b5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2bd9bd2fbf60652c11e3447d4f18ad69 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-eb5dd8cbc566c9ffe1c90e61950272b5","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-3c8ca9eb7d65a1d90243aeccc60fd0dc aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-eb5dd8cbc566c9ffe1c90e61950272b5","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-2bd9bd2fbf60652c11e3447d4f18ad69 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo journalctl -u splunk-otel-collector -f -n <span class=m>100</span></span></span></code></pre></div></div></div><div id=R-tab-id-3c8ca9eb7d65a1d90243aeccc60fd0dc data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 systemd<span class=o>[</span>1<span class=o>]</span>: Started Splunk OpenTelemetry Collector.
</span></span><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 otelcol<span class=o>[</span>14465<span class=o>]</span>: 2024/12/20 00:13:14 settings.go:483: Set config to /etc/otel/collector/agent_config.yaml
</span></span><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 otelcol<span class=o>[</span>14465<span class=o>]</span>: 2024/12/20 00:13:14 settings.go:539: Set memory limit to <span class=m>460</span> MiB
</span></span><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 otelcol<span class=o>[</span>14465<span class=o>]</span>: 2024/12/20 00:13:14 settings.go:524: Set soft memory limit <span class=nb>set</span> to <span class=m>460</span> MiB
</span></span><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 otelcol<span class=o>[</span>14465<span class=o>]</span>: 2024/12/20 00:13:14 settings.go:373: Set garbage collection target percentage <span class=o>(</span>GOGC<span class=o>)</span> to <span class=m>400</span>
</span></span><span class=line><span class=cl>Dec <span class=m>20</span> 00:13:14 derek-1 otelcol<span class=o>[</span>14465<span class=o>]</span>: 2024/12/20 00:13:14 settings.go:414: <span class=nb>set</span> <span class=s2>&#34;SPLUNK_LISTEN_INTERFACE&#34;</span> to <span class=s2>&#34;127.0.0.1&#34;</span>
</span></span><span class=line><span class=cl>etc. </span></span></code></pre></div></div></div></div></div><h2 id=collector-configuration>Collector Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Where do we find the configuration that is used by this collector?</p><p>It&rsquo;s available in the <code>/etc/otel/collector</code> directory. Since we installed the
collector in <code>agent</code> mode, the collector configuration can be found in the
<code>agent_config.yaml</code> file.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-a-net-application>Deploy a .NET Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before deploying the application, we&rsquo;ll need to install the .NET 8 SDK on our instance.</p><div class=tab-panel data-tab-group=R-tabs-9945701d0849549415a053fc63fbd113><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c87c9561fb2908f888eb837454a25412 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9945701d0849549415a053fc63fbd113","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-bade48237bd39555d685c3a1cb236c2f aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9945701d0849549415a053fc63fbd113","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-c87c9561fb2908f888eb837454a25412 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  sudo apt-get install -y dotnet-sdk-8.0</span></span></code></pre></div></div></div><div id=R-tab-id-bade48237bd39555d685c3a1cb236c2f data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Hit:1 http://us-west-1.ec2.archive.ubuntu.com/ubuntu jammy InRelease
</span></span><span class=line><span class=cl>Hit:2 http://us-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates InRelease                                               
</span></span><span class=line><span class=cl>Hit:3 http://us-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports InRelease                                             
</span></span><span class=line><span class=cl>Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease                                                           
</span></span><span class=line><span class=cl>Ign:5 https://splunk.jfrog.io/splunk/otel-collector-deb release InRelease
</span></span><span class=line><span class=cl>Hit:6 https://splunk.jfrog.io/splunk/otel-collector-deb release Release
</span></span><span class=line><span class=cl>Reading package lists... Done
</span></span><span class=line><span class=cl>Reading package lists... Done
</span></span><span class=line><span class=cl>Building dependency tree... Done
</span></span><span class=line><span class=cl>Reading state information... Done
</span></span><span class=line><span class=cl>The following additional packages will be installed:
</span></span><span class=line><span class=cl>  aspnetcore-runtime-8.0 aspnetcore-targeting-pack-8.0 dotnet-apphost-pack-8.0 dotnet-host-8.0 dotnet-hostfxr-8.0 dotnet-runtime-8.0 dotnet-targeting-pack-8.0 dotnet-templates-8.0 liblttng-ust-common1
</span></span><span class=line><span class=cl>  liblttng-ust-ctl5 liblttng-ust1 netstandard-targeting-pack-2.1-8.0
</span></span><span class=line><span class=cl>The following NEW packages will be installed:
</span></span><span class=line><span class=cl>  aspnetcore-runtime-8.0 aspnetcore-targeting-pack-8.0 dotnet-apphost-pack-8.0 dotnet-host-8.0 dotnet-hostfxr-8.0 dotnet-runtime-8.0 dotnet-sdk-8.0 dotnet-targeting-pack-8.0 dotnet-templates-8.0
</span></span><span class=line><span class=cl>  liblttng-ust-common1 liblttng-ust-ctl5 liblttng-ust1 netstandard-targeting-pack-2.1-8.0
</span></span><span class=line><span class=cl><span class=m>0</span> upgraded, <span class=m>13</span> newly installed, <span class=m>0</span> to remove and <span class=m>0</span> not upgraded.
</span></span><span class=line><span class=cl>Need to get <span class=m>138</span> MB of archives.
</span></span><span class=line><span class=cl>After this operation, <span class=m>495</span> MB of additional disk space will be used.
</span></span><span class=line><span class=cl>etc. </span></span></code></pre></div></div></div></div></div><p>Refer to <a href="https://learn.microsoft.com/en-us/dotnet/core/install/linux-ubuntu-install?tabs=dotnet8&pivots=os-linux-ubuntu-2404" rel=external>Install .NET SDK or .NET Runtime on Ubuntu</a>
for further details.</p><h2 id=review-the-net-application>Review the .NET Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the terminal, navigate to the application directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/docker-k8s-otel/helloworld</span></span></code></pre></div><p>We&rsquo;ll use a simple &ldquo;Hello World&rdquo; .NET application for this workshop. The main logic is found
in the HelloWorldController.cs file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HelloWorldController</span> <span class=p>:</span> <span class=n>ControllerBase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>ILogger</span><span class=p>&lt;</span><span class=n>HelloWorldController</span><span class=p>&gt;</span> <span class=n>logger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>HelloWorldController</span><span class=p>(</span><span class=n>ILogger</span><span class=p>&lt;</span><span class=n>HelloWorldController</span><span class=p>&gt;</span> <span class=n>logger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>logger</span> <span class=p>=</span> <span class=n>logger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [HttpGet(&#34;/hello/{name?}&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Hello</span><span class=p>(</span><span class=kt>string</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=kt>string</span><span class=p>.</span><span class=n>IsNullOrEmpty</span><span class=p>(</span><span class=n>name</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;/hello endpoint invoked anonymously&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>           <span class=k>return</span> <span class=s>&#34;Hello, World!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;/hello endpoint invoked by {name}&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>String</span><span class=p>.</span><span class=n>Format</span><span class=p>(</span><span class=s>&#34;Hello, {0}!&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=build-and-run-the-net-application>Build and Run the .NET Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can build the application using the following command:</p><div class=tab-panel data-tab-group=R-tabs-8f7269c01bf55dcea3e34cf5a146e839><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3e08748982f55ef556f2e7bdd509c783 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-8f7269c01bf55dcea3e34cf5a146e839","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-9319940657ac4c4a8185bd102b183f4f aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-8f7269c01bf55dcea3e34cf5a146e839","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-3e08748982f55ef556f2e7bdd509c783 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet build</span></span></code></pre></div></div></div><div id=R-tab-id-9319940657ac4c4a8185bd102b183f4f data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>MSBuild version 17.8.5+b5265ef37 <span class=k>for</span> .NET
</span></span><span class=line><span class=cl>  Determining projects to restore...
</span></span><span class=line><span class=cl>  All projects are up-to-date <span class=k>for</span> restore.
</span></span><span class=line><span class=cl>  helloworld -&gt; /home/splunk/workshop/docker-k8s-otel/helloworld/bin/Debug/net8.0/helloworld.dll
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Build succeeded.
</span></span><span class=line><span class=cl>    <span class=m>0</span> Warning<span class=o>(</span>s<span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=m>0</span> Error<span class=o>(</span>s<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Time Elapsed 00:00:02.04</span></span></code></pre></div></div></div></div></div><p>If that&rsquo;s successful, we can run it as follows:</p><div class=tab-panel data-tab-group=R-tabs-83a8268b6570549b1b6f32a4056e89d5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0495be0001cf9875cb21556f9aa8fdc7 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-83a8268b6570549b1b6f32a4056e89d5","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-e2146f3a3c7cfb27aa6765f7bfcf5ba7 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-83a8268b6570549b1b6f32a4056e89d5","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0495be0001cf9875cb21556f9aa8fdc7 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet run</span></span></code></pre></div></div></div><div id=R-tab-id-e2146f3a3c7cfb27aa6765f7bfcf5ba7 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Building...
</span></span><span class=line><span class=cl>info: Microsoft.Hosting.Lifetime<span class=o>[</span>14<span class=o>]</span>
</span></span><span class=line><span class=cl>      Now listening on: http://localhost:8080
</span></span><span class=line><span class=cl>info: Microsoft.Hosting.Lifetime<span class=o>[</span>0<span class=o>]</span>
</span></span><span class=line><span class=cl>      Application started. Press Ctrl+C to shut down.
</span></span><span class=line><span class=cl>info: Microsoft.Hosting.Lifetime<span class=o>[</span>0<span class=o>]</span>
</span></span><span class=line><span class=cl>      Hosting environment: Development
</span></span><span class=line><span class=cl>info: Microsoft.Hosting.Lifetime<span class=o>[</span>0<span class=o>]</span>
</span></span><span class=line><span class=cl>      Content root path: /home/splunk/workshop/docker-k8s-otel/helloworld</span></span></code></pre></div></div></div></div></div><p>Once it&rsquo;s running, open a second SSH terminal to your Ubuntu instance and access the application using curl:</p><div class=tab-panel data-tab-group=R-tabs-68d1d4d046b43158b76252e3296f7575><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-66acfb01d7db11dd959b3e76badddf25 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-68d1d4d046b43158b76252e3296f7575","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-78ae081ae0ead10a4f1ce918afac10ea aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-68d1d4d046b43158b76252e3296f7575","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-66acfb01d7db11dd959b3e76badddf25 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/hello</span></span></code></pre></div></div></div><div id=R-tab-id-78ae081ae0ead10a4f1ce918afac10ea data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Hello, World! </span></span></code></pre></div></div></div></div></div><p>You can also pass in your name:</p><div class=tab-panel data-tab-group=R-tabs-4bc5a7b8186440daae4e217c3186bddd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c263bbb5cbb9b0499eee6ffcee5dbf3d aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4bc5a7b8186440daae4e217c3186bddd","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-f65f778e46122077d71ffba28040f23d aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4bc5a7b8186440daae4e217c3186bddd","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-c263bbb5cbb9b0499eee6ffcee5dbf3d data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/hello/Tom</span></span></code></pre></div></div></div><div id=R-tab-id-f65f778e46122077d71ffba28040f23d data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Hello, Tom! </span></span></code></pre></div></div></div></div></div><blockquote><p>Press Ctrl + C to quit your Helloworld app before moving to the next step.</p></blockquote><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>What are the three methods that we can use to instrument our application with OpenTelemetry?</p><p><a href=#R-image-44eba8db712a81d8f62d040b8e139bca class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/NetInstrumentation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44eba8db712a81d8f62d040b8e139bca><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/NetInstrumentation.png></a></p><p>See: <a href=https://docs.splunk.com/observability/en/gdi/get-data-in/application/otel-dotnet/instrumentation/instrument-dotnet-application.html rel=external>Instrument your .NET application for Splunk Observability Cloud</a>
for a discussion of the options.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 4, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=instrument-a-net-application-with-opentelemetry>Instrument a .NET Application with OpenTelemetry</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<h2 id=download-the-splunk-distribution-of-opentelemetry>Download the Splunk Distribution of OpenTelemetry<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For this workshop, we&rsquo;ll install the Splunk Distribution of OpenTelemetry manually rather than
using the NuGet packages.</p><p>We&rsquo;ll start by downloading the latest <code>splunk-otel-dotnet-install.sh</code> file,
which we&rsquo;ll use to instrument our .NET application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/docker-k8s-otel/helloworld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -sSfL https://github.com/signalfx/splunk-otel-dotnet/releases/latest/download/splunk-otel-dotnet-install.sh -O</span></span></code></pre></div><p>Refer to <a href=https://docs.splunk.com/observability/en/gdi/get-data-in/application/otel-dotnet/instrumentation/instrument-dotnet-application.html#install-the-splunk-distribution-of-opentelemetry-net-manually rel=external>Install the Splunk Distribution of OpenTelemetry .NET manually</a>
for further details on the installation process.</p><h2 id=install-the-distribution>Install the Distribution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the terminal, install the distribution as follows</p><div class=tab-panel data-tab-group=R-tabs-00de69e6cb8f98f06ed05af19a91ab47><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8ae020ac8ff173909985fcce97da155b aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-00de69e6cb8f98f06ed05af19a91ab47","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-8d3ba5b0c5342e86628fa7e909fddd81 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-00de69e6cb8f98f06ed05af19a91ab47","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8ae020ac8ff173909985fcce97da155b data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sh ./splunk-otel-dotnet-install.sh</span></span></code></pre></div></div></div><div id=R-tab-id-8d3ba5b0c5342e86628fa7e909fddd81 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Downloading v1.8.0 <span class=k>for</span> linux-glibc <span class=o>(</span>/tmp/tmp.m3tSdtbmge/splunk-opentelemetry-dotnet-linux-glibc-x64.zip<span class=o>)</span>...</span></span></code></pre></div></div></div></div></div><blockquote><p>Note: we may need to include the ARCHITECTURE environment when running the command above:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>ARCHITECTURE</span><span class=o>=</span>x64 sh ./splunk-otel-dotnet-install.sh</span></span></code></pre></div></blockquote><h2 id=activate-the-instrumentation>Activate the Instrumentation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Next, we can activate the OpenTelemetry instrumentation:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. <span class=nv>$HOME</span>/.splunk-otel-dotnet/instrument.sh</span></span></code></pre></div><h2 id=set-the-deployment-environment>Set the Deployment Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s set the deployment environment, to ensure our data flows into its own
environment within Splunk Observability Cloud:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OTEL_RESOURCE_ATTRIBUTES</span><span class=o>=</span>deployment.environment<span class=o>=</span>otel-<span class=nv>$INSTANCE</span></span></span></code></pre></div><h2 id=run-the-application-with-instrumentation>Run the Application with Instrumentation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can run the application as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>dotnet run</code></pre></div><h2 id=a-challenge-for-you>A Challenge For You<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>How can we see what traces are being exported by the .NET application from our Linux instance?</p><details><summary><b>Click here to see the answer</b></summary><p>There are two ways we can do this:</p><ol><li>We could add <code>OTEL_TRACES_EXPORTER=otlp,console</code> at the start of the <code>dotnet run</code> command, which ensures that traces are both written to collector via OTLP as well as the console.</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>OTEL_TRACES_EXPORTER</span><span class=o>=</span>otlp,console dotnet run </span></span></code></pre></div><ol start=2><li>Alternatively, we could add the debug exporter to the collector configuration, and add it to the traces pipeline, which ensures the traces are written to the collector logs.</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>jaeger, otlp, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlphttp, signalfx, debug]</span></span></span></code></pre></div></details><h2 id=access-the-application>Access the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once the application is running, use a second SSH terminal and access it using curl:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/hello</span></span></code></pre></div><p>As before, it should return <code>Hello, World!</code>.</p><p>If you enabled trace logging, you should see a trace written the console or collector logs such as the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>info: Program[0]
      /hello endpoint invoked anonymously
Activity.TraceId:            c7bbf57314e4856447508cd8addd49b0
Activity.SpanId:             1c92ac653c3ece27
Activity.TraceFlags:         Recorded
Activity.ActivitySourceName: Microsoft.AspNetCore
Activity.DisplayName:        GET /hello/{name?}
Activity.Kind:               Server
Activity.StartTime:          2024-12-20T00:45:25.6551267Z
Activity.Duration:           00:00:00.0006464
Activity.Tags:
    server.address: localhost
    server.port: 8080
    http.request.method: GET
    url.scheme: http
    url.path: /hello
    network.protocol.version: 1.1
    user_agent.original: curl/7.81.0
    http.route: /hello/{name?}
    http.response.status_code: 200
Resource associated with Activity:
    splunk.distro.version: 1.8.0
    telemetry.distro.name: splunk-otel-dotnet
    telemetry.distro.version: 1.8.0
    service.name: helloworld
    os.type: linux
    os.description: Ubuntu 22.04.5 LTS
    os.build_id: 6.8.0-1021-aws
    os.name: Ubuntu
    os.version: 22.04
    host.name: derek-1
    host.id: 20cf15fcc7054b468647b73b8f87c556
    process.owner: splunk
    process.pid: 16997
    process.runtime.description: .NET 8.0.11
    process.runtime.name: .NET
    process.runtime.version: 8.0.11
    container.id: 2
    telemetry.sdk.name: opentelemetry
    telemetry.sdk.language: dotnet
    telemetry.sdk.version: 1.9.0
    deployment.environment: otel-derek-1</code></pre></div><h2 id=view-your-application-in-splunk-observability-cloud>View your application in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that the setup is complete, let&rsquo;s confirm that traces are sent to <strong>Splunk Observability Cloud</strong>. Note that when the application is deployed for the first time, it may take a few minutes for the data to appear.</p><p>Navigate to APM, then use the Environment dropdown to select your environment (i.e. <code>otel-instancename</code>).</p><p>If everything was deployed correctly, you should see <code>helloworld</code> displayed in the list of services:</p><p><a href=#R-image-7b474661054f5e296aa544f1279484d6 class=lightbox-link><img alt="APM Overview" class="lazy lightbox figure-image" loading=lazy src=../images/apm_overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7b474661054f5e296aa544f1279484d6><img alt="APM Overview" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm_overview.png></a></p><p>Click on <strong>Service Map</strong> on the right-hand side to view the service map.</p><p><a href=#R-image-33a3795e6655aa0c259078889b135ba8 class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/service_map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-33a3795e6655aa0c259078889b135ba8><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map.png></a></p><p>Next, click on <strong>Traces</strong> on the right-hand side to see the traces captured for this application.</p><p><a href=#R-image-30cd2bbdc389c71acedd105112822535 class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/traces.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-30cd2bbdc389c71acedd105112822535><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/traces.png></a></p><p>An individual trace should look like the following:</p><p><a href=#R-image-9e9f5e00b0df551aa7ad453b6552bcd1 class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e9f5e00b0df551aa7ad453b6552bcd1><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/trace.png></a></p><blockquote><p>Press Ctrl + C to quit your Helloworld app before moving to the next step.</p></blockquote><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=dockerize-the-application>Dockerize the Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Later on in this workshop, we&rsquo;re going to deploy our .NET application into a Kubernetes cluster.</p><p>But how do we do that?</p><p>The first step is to create a Docker image for our application. This is known as
&ldquo;dockerizing&rdquo; and application, and the process begins with the creation of a <code>Dockerfile</code>.</p><p>But first, let&rsquo;s define some key terms.</p><h2 id=key-terms>Key Terms<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=what-is-docker>What is Docker?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><em>&ldquo;Docker provides the ability to package and run an application in a loosely isolated environment
called a container. The isolation and security lets you run many containers simultaneously on
a given host. Containers are lightweight and contain everything needed to run the application,
so you don&rsquo;t need to rely on what&rsquo;s installed on the host.&rdquo;</em></p><p>Source: <a href=https://docs.docker.com/get-started/docker-overview/ rel=external>https://docs.docker.com/get-started/docker-overview/</a></p><h3 id=what-is-a-container>What is a container?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><em>&ldquo;Containers are isolated processes for each of your app&rsquo;s components. Each component
&mldr;runs in its own isolated environment,
completely isolated from everything else on your machine.&rdquo;</em></p><p>Source: <a href=https://docs.docker.com/get-started/docker-concepts/the-basics/what-is-a-container/ rel=external>https://docs.docker.com/get-started/docker-concepts/the-basics/what-is-a-container/</a></p><h3 id=what-is-a-container-image>What is a container image?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><em>&ldquo;A container image is a standardized package that includes all of the files, binaries,
libraries, and configurations to run a container.&rdquo;</em></p><h3 id=dockerfile>Dockerfile<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><em>&ldquo;A Dockerfile is a text-based document that&rsquo;s used to create a container image. It provides
instructions to the image builder on the commands to run, files to copy, startup command, and more.&rdquo;</em></p><h2 id=create-a-dockerfile>Create a Dockerfile<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s create a file named <code>Dockerfile</code> in the <code>/home/splunk/workshop/docker-k8s-otel/helloworld</code> directory.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/workshop/docker-k8s-otel/helloworld</span></span></code></pre></div><p>You can use vi or nano to create the file. We will show an example using vi:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi Dockerfile</span></span></code></pre></div><p>Copy and paste the following content into the newly opened file:</p><blockquote><p>Press &lsquo;i&rsquo; to enter into insert mode in vi before pasting the text below.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/aspnet:8.0 AS base</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>USER</span><span class=s> app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 8080</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/sdk:8.0 AS build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=s> /src</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> <span class=o>[</span><span class=s2>&#34;helloworld.csproj&#34;</span>, <span class=s2>&#34;helloworld/&#34;</span><span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet restore <span class=s2>&#34;./helloworld/./helloworld.csproj&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;/src/helloworld&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet build <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/build<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> build AS publish</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>RUN</span> dotnet publish <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/publish /p:UseAppHost<span class=o>=</span>false<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> base AS final</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>publish /app/publish .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;helloworld.dll&#34;</span><span class=p>]</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><p>What does all this mean? Let&rsquo;s break it down.</p><h2 id=walking-through-the-dockerfile>Walking through the Dockerfile<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ve used a multi-stage Dockerfile for this example, which separates the Docker image creation process into the following stages:</p><ul><li>Base</li><li>Build</li><li>Publish</li><li>Final</li></ul><p>While a multi-stage approach is more complex, it allows us to create a
lighter-weight runtime image for deployment. We&rsquo;ll explain the purpose of
each of these stages below.</p><h3 id=the-base-stage>The Base Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The base stage defines the user that will
be running the app, the working directory, and exposes
the port that will be used to access the app.
It&rsquo;s based off of Microsoft&rsquo;s <code>mcr.microsoft.com/dotnet/aspnet:8.0</code> image:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/aspnet:8.0 AS base</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>USER</span><span class=s> app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 8080</span></span></span></code></pre></div><p>Note that the <code>mcr.microsoft.com/dotnet/aspnet:8.0</code> image includes the .NET runtime only,
rather than the SDK, so is relatively lightweight. It&rsquo;s based off of the Debian 12 Linux
distribution. You can find more information about the ASP.NET Core Runtime Docker images
in <a href=https://github.com/dotnet/dotnet-docker/blob/main/README.aspnet.md rel=external>GitHub</a>.</p><h3 id=the-build-stage>The Build Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The next stage of the Dockerfile is the build stage. For this stage, the
<code>mcr.microsoft.com/dotnet/sdk:8.0</code> image is used, which is also based off of
Debian 12 but includes the full <a href=https://github.com/dotnet/dotnet-docker/blob/main/README.sdk.md rel=external>.NET SDK</a> rather than just the runtime.</p><p>This stage copies the <code>.csproj</code> file to the build image, and then uses <code>dotnet restore</code> to
download any dependencies used by the application.</p><p>It then copies the application code to the build image and
uses <code>dotnet build</code> to build the project and its dependencies into a
set of <code>.dll</code> binaries:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/sdk:8.0 AS build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=s> /src</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> <span class=o>[</span><span class=s2>&#34;helloworld.csproj&#34;</span>, <span class=s2>&#34;helloworld/&#34;</span><span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet restore <span class=s2>&#34;./helloworld/./helloworld.csproj&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;/src/helloworld&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet build <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/build</span></span></code></pre></div><h3 id=the-publish-stage>The Publish Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The third stage is publish, which is based on build stage image rather than a Microsoft image. In this stage, <code>dotnet publish</code> is used to
package the application and its dependencies for deployment:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> build AS publish</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>RUN</span> dotnet publish <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/publish /p:UseAppHost<span class=o>=</span>false</span></span></code></pre></div><h3 id=the-final-stage>The Final Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The fourth stage is our final stage, which is based on the base
stage image (which is lighter-weight than the build and publish stages). It copies the output from the publish stage image and
defines the entry point for our application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> base AS final</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>publish /app/publish .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;helloworld.dll&#34;</span><span class=p>]</span></span></span></code></pre></div><h2 id=build-a-docker-image>Build a Docker Image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we have the <code>Dockerfile</code>, we can use it to build a Docker image containing
our application:</p><div class=tab-panel data-tab-group=R-tabs-12ee012ded9b407d38026e888ee639fe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-987ca212e7f55bac427c9cdd19102e4e aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-12ee012ded9b407d38026e888ee639fe","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-d519545a224ec916ed1b3b2c4a37f872 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-12ee012ded9b407d38026e888ee639fe","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-987ca212e7f55bac427c9cdd19102e4e data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -t helloworld:1.0 .</span></span></code></pre></div></div></div><div id=R-tab-id-d519545a224ec916ed1b3b2c4a37f872 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
</span></span><span class=line><span class=cl>            Install the buildx component to build images with BuildKit:
</span></span><span class=line><span class=cl>            https://docs.docker.com/go/buildx/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Sending build context to Docker daemon  281.1kB
</span></span><span class=line><span class=cl>Step 1/19 : FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base
</span></span><span class=line><span class=cl>8.0: Pulling from dotnet/aspnet
</span></span><span class=line><span class=cl>af302e5c37e9: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>91ab5e0aabf0: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>1c1e4530721e: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>1f39ca6dcc3a: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>ea20083aa801: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>64c242a4f561: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>Digest: sha256:587c1dd115e4d6707ff656d30ace5da9f49cec48e627a40bbe5d5b249adc3549
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> mcr.microsoft.com/dotnet/aspnet:8.0
</span></span><span class=line><span class=cl> ---&gt; 0ee5d7ddbc3b
</span></span><span class=line><span class=cl>Step 2/19 : USER app
</span></span><span class=line><span class=cl>etc,</span></span></code></pre></div></div></div></div></div><p>This tells Docker to build an image using a tag of <code>helloworld:1.0</code> using the <code>Dockerfile</code> in the current directory.</p><p>We can confirm it was created successfully with the following command:</p><div class=tab-panel data-tab-group=R-tabs-7c4275584499b46b55b61690a6f39745><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fbbfbccfd2ce93a2463eb821d7f9ed02 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7c4275584499b46b55b61690a6f39745","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-4539d9a301aefbf3ede8e9ad56c8b839 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7c4275584499b46b55b61690a6f39745","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-fbbfbccfd2ce93a2463eb821d7f9ed02 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker images</span></span></code></pre></div></div></div><div id=R-tab-id-4539d9a301aefbf3ede8e9ad56c8b839 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>REPOSITORY   TAG       IMAGE ID       CREATED          SIZE
</span></span><span class=line><span class=cl>helloworld   1.0       db19077b9445   <span class=m>20</span> seconds ago   217MB</span></span></code></pre></div></div></div></div></div><h2 id=test-the-docker-image>Test the Docker Image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><blockquote><p>Before proceeding, ensure the application we started before is no longer running on your instance.</p></blockquote><p>We can run our application using the Docker image as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run --name helloworld <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--detach <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--expose <span class=m>8080</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--network<span class=o>=</span>host <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>helloworld:1.0</span></span></code></pre></div><blockquote><p>Note: we&rsquo;ve included the <code>--network=host</code> parameter to ensure our Docker container
is able to access resources on our instance, which is important later on when we need
our application to send data to the collector running on localhost.</p></blockquote><p>Let&rsquo;s ensure that our Docker container is running:</p><div class=tab-panel data-tab-group=R-tabs-ff9650dd8fd46a50ef3da23dcabc53c7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-005837382ee8c47b85293df782545759 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ff9650dd8fd46a50ef3da23dcabc53c7","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-942e3580a498062a7b9268c4fe696f24 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ff9650dd8fd46a50ef3da23dcabc53c7","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-005837382ee8c47b85293df782545759 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker ps <span class=p>|</span> grep helloworld</span></span></code></pre></div></div></div><div id=R-tab-id-942e3580a498062a7b9268c4fe696f24 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker ps <span class=p>|</span> grep helloworld
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE            COMMAND                  CREATED       STATUS       PORTS     NAMES
</span></span><span class=line><span class=cl>5f5b9cd56ac5   helloworld:1.0   <span class=s2>&#34;dotnet helloworld.d‚Ä¶&#34;</span>   <span class=m>2</span> mins ago    Up <span class=m>2</span> mins              helloworld</span></span></code></pre></div></div></div></div></div><p>We can access our application as before:</p><div class=tab-panel data-tab-group=R-tabs-c42151d9a8a2e0a1ff8b0d48e1bfa533><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-616d3c14ea5750e1163ce4dbb8588f4c aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c42151d9a8a2e0a1ff8b0d48e1bfa533","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-0051e5662e130e919bdbc715afdbcc70 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c42151d9a8a2e0a1ff8b0d48e1bfa533","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-616d3c14ea5750e1163ce4dbb8588f4c data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/hello/Docker</span></span></code></pre></div></div></div><div id=R-tab-id-0051e5662e130e919bdbc715afdbcc70 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Hello, Docker! </span></span></code></pre></div></div></div></div></div><p>Congratulations, if you&rsquo;ve made it this far, you&rsquo;ve successfully Dockerized a .NET application.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=add-instrumentation-to-dockerfile>Add Instrumentation to Dockerfile</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Now that we&rsquo;ve successfully Dockerized our application, let&rsquo;s add in OpenTelemetry instrumentation.</p><p>This is similar to the steps we took when instrumenting the application running on Linux, but there
are some key differences to be aware of.</p><h2 id=update-the-dockerfile>Update the Dockerfile<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s update the <code>Dockerfile</code> in the <code>/home/splunk/workshop/docker-k8s-otel/helloworld</code> directory.</p><p>After the .NET application is built in the Dockerfile, we want to:</p><ul><li>Add dependencies needed to download and execute <code>splunk-otel-dotnet-install.sh</code></li><li>Download the Splunk OTel .NET installer</li><li>Install the distribution</li></ul><p>We can add the following to the build stage of the Dockerfile. Let&rsquo;s open the Dockerfile in vi:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/workshop/docker-k8s-otel/helloworld/Dockerfile</span></span></code></pre></div><blockquote><p>Press the i key to enter edit mode in vi</p></blockquote><blockquote><p>Paste the lines marked with &lsquo;NEW CODE&rsquo; into your Dockerfile in the build stage section:</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># CODE ALREADY IN YOUR DOCKERFILE:</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/sdk:8.0 AS build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=s> /src</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> <span class=o>[</span><span class=s2>&#34;helloworld.csproj&#34;</span>, <span class=s2>&#34;helloworld/&#34;</span><span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet restore <span class=s2>&#34;./helloworld/./helloworld.csproj&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;/src/helloworld&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet build <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/build<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: add dependencies for splunk-otel-dotnet-install.sh</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apt-get update <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	apt-get install -y unzip<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: download Splunk OTel .NET installer</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> curl -sSfL https://github.com/signalfx/splunk-otel-dotnet/releases/latest/download/splunk-otel-dotnet-install.sh -O<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: install the distribution</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> sh ./splunk-otel-dotnet-install.sh</span></span></code></pre></div><p>Next, we&rsquo;ll update the final stage of the Dockerfile with the following changes:</p><ul><li>Copy the /root/.splunk-otel-dotnet/ from the build image to the final image</li><li>Copy the entrypoint.sh file as well</li><li>Set the <code>OTEL_SERVICE_NAME</code> and <code>OTEL_RESOURCE_ATTRIBUTES</code> environment variables</li><li>Set the <code>ENTRYPOINT</code> to <code>entrypoint.sh</code></li></ul><p>It&rsquo;s easiest to simply replace the entire final stage with the following:</p><blockquote><p><strong>IMPORTANT</strong> replace <code>$INSTANCE</code> in your Dockerfile with your instance name,
which can be determined by running <code>echo $INSTANCE</code>.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># CODE ALREADY IN YOUR DOCKERFILE</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> base AS final</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: Copy instrumentation file tree</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;//home/app/.splunk-otel-dotnet&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>build /root/.splunk-otel-dotnet/ .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># CODE ALREADY IN YOUR DOCKERFILE</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>publish /app/publish .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: copy the entrypoint.sh script</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> entrypoint.sh .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: set OpenTelemetry environment variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>OTEL_SERVICE_NAME</span><span class=o>=</span>helloworld
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>OTEL_RESOURCE_ATTRIBUTES</span><span class=o>=</span><span class=s1>&#39;deployment.environment=otel-$INSTANCE&#39;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: replace the prior ENTRYPOINT command with the following two lines </span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;sh&#34;</span><span class=p>,</span> <span class=s2>&#34;entrypoint.sh&#34;</span><span class=p>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;helloworld.dll&#34;</span><span class=p>]</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><p>After all of these changes, the Dockerfile should look like the following:</p><blockquote><p><strong>IMPORTANT</strong> if you&rsquo;re going to copy and paste this content into your own Dockerfile,
replace <code>$INSTANCE</code> in your Dockerfile with your instance name,
which can be determined by running <code>echo $INSTANCE</code>.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/aspnet:8.0 AS base</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>USER</span><span class=s> app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 8080</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> mcr.microsoft.com/dotnet/sdk:8.0 AS build</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=s> /src</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> <span class=o>[</span><span class=s2>&#34;helloworld.csproj&#34;</span>, <span class=s2>&#34;helloworld/&#34;</span><span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet restore <span class=s2>&#34;./helloworld/./helloworld.csproj&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;/src/helloworld&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> dotnet build <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/build<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: add dependencies for splunk-otel-dotnet-install.sh</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apt-get update <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	apt-get install -y unzip<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: download Splunk OTel .NET installer</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> curl -sSfL https://github.com/signalfx/splunk-otel-dotnet/releases/latest/download/splunk-otel-dotnet-install.sh -O<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: install the distribution</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> sh ./splunk-otel-dotnet-install.sh<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> build AS publish</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> <span class=nv>BUILD_CONFIGURATION</span><span class=o>=</span>Release
</span></span><span class=line><span class=cl><span class=k>RUN</span> dotnet publish <span class=s2>&#34;./helloworld.csproj&#34;</span> -c <span class=nv>$BUILD_CONFIGURATION</span> -o /app/publish /p:UseAppHost<span class=o>=</span>false<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> base AS final</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: Copy instrumentation file tree</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> &#34;//home/app/.splunk-otel-dotnet&#34;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>build /root/.splunk-otel-dotnet/ .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>publish /app/publish .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: copy the entrypoint.sh script</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> entrypoint.sh .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: set OpenTelemetry environment variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>OTEL_SERVICE_NAME</span><span class=o>=</span>helloworld
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>OTEL_RESOURCE_ATTRIBUTES</span><span class=o>=</span><span class=s1>&#39;deployment.environment=otel-$INSTANCE&#39;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># NEW CODE: replace the prior ENTRYPOINT command with the following two lines </span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;sh&#34;</span><span class=p>,</span> <span class=s2>&#34;entrypoint.sh&#34;</span><span class=p>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;dotnet&#34;</span><span class=p>,</span> <span class=s2>&#34;helloworld.dll&#34;</span><span class=p>]</span></span></span></code></pre></div><h2 id=create-the-entrypointsh-file>Create the entrypoint.sh file<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We also need to create a file named <code>entrypoint.sh</code> in the <code>/home/splunk/workshop/docker-k8s-otel/helloworld</code> folder
with the following content:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/workshop/docker-k8s-otel/helloworld/entrypoint.sh</span></span></code></pre></div><p>Then paste the following code into the newly created file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># Read in the file of environment settings</span>
</span></span><span class=line><span class=cl>. /<span class=nv>$HOME</span>/.splunk-otel-dotnet/instrument.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Then run the CMD</span>
</span></span><span class=line><span class=cl><span class=nb>exec</span> <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><p>The <code>entrypoint.sh</code> script is required for sourcing environment variables from the instrument.sh script,
which is included with the instrumentation. This ensures the correct setup of environment variables
for each platform.</p><blockquote><p>You may be wondering, why can&rsquo;t we just include the following command in the Dockerfile to do this,
like we did when activating OpenTelemetry .NET instrumentation on our Linux host?</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>RUN</span> . <span class=nv>$HOME</span>/.splunk-otel-dotnet/instrument.sh</span></span></code></pre></div><p>The problem with this approach is that each Dockerfile RUN step runs a new container and a new shell.
If you try to set an environment variable in one shell, it will not be visible later on.
This problem is resolved by using an entry point script, as we&rsquo;ve done here.
Refer to this <a href=https://stackoverflow.com/questions/55921914/how-to-source-a-script-with-environment-variables-in-a-docker-build-process rel=external>Stack Overflow post</a>
for further details on this issue.</p></blockquote><h2 id=build-the-docker-image>Build the Docker Image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s build a new Docker image that includes the OpenTelemetry .NET instrumentation:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -t helloworld:1.1 .</span></span></code></pre></div><blockquote><p>Note: we&rsquo;ve used a different version (1.1) to distinguish the image from our earlier version.
To clean up the older versions, run the following command to get the container id:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker ps -a <span class=p>|</span> grep helloworld</span></span></code></pre></div><p>Then run the following command to delete the container:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker rm &lt;old container id&gt; --force</span></span></code></pre></div><p>Now we can get the container image id:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker images <span class=p>|</span> grep 1.0</span></span></code></pre></div><p>Finally, we can run the following command to delete the old image:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker image rm &lt;old image id&gt;</span></span></code></pre></div></blockquote><h2 id=run-the-application>Run the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s run the new Docker image:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run --name helloworld <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--detach <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--expose <span class=m>8080</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--network<span class=o>=</span>host <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>helloworld:1.1</span></span></code></pre></div><p>We can access the application using:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/hello</span></span></code></pre></div><p>Execute the above command a few times to generate some traffic.</p><p>After a minute or so, confirm that you see new traces in Splunk Observability Cloud.</p><blockquote><p>Remember to look for traces in your particular Environment.</p></blockquote><h2 id=troubleshooting>Troubleshooting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you don&rsquo;t see traces appear in Splunk Observability Cloud, here&rsquo;s how you can troubleshoot.</p><p>First, open the collector config file for editing:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otel/collector/agent_config.yaml</span></span></code></pre></div><p>Next, add the debug exporter to the traces pipeline, which ensures the traces are written to the collector logs:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>headers_setter, health_check, http_forwarder, zpages, smartagent]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>jaeger, otlp, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- resource/add_environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># NEW CODE: add the debug exporter here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlphttp, signalfx, debug]</span></span></span></code></pre></div><p>Then, restart the collector to apply the configuration changes:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart splunk-otel-collector</span></span></code></pre></div><p>We can then view the collector logs using <code>journalctl</code>:</p><blockquote><p>Press Ctrl + C to exit out of tailing the log.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo journalctl -u splunk-otel-collector -f -n <span class=m>100</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=install-the-opentelemetry-collector-in-k8s>Install the OpenTelemetry Collector in K8s</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=recap-of-part-1-of-the-workshop>Recap of Part 1 of the Workshop<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>At this point in the workshop, we&rsquo;ve successfully:</p><ul><li>Deployed the Splunk distribution of the OpenTelemetry Collector on our Linux Host</li><li>Configured it to send traces and metrics to Splunk Observability Cloud</li><li>Deployed a .NET application and instrumented it with OpenTelemetry</li><li>Dockerized the .NET application and ensured traces are flowing to o11y cloud</li></ul><p>If you <strong>haven&rsquo;t</strong> completed the steps listed above, please execute the following commands before proceeding with
the remainder of the workshop:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp /home/splunk/workshop/docker-k8s-otel/docker/Dockerfile /home/splunk/workshop/docker-k8s-otel/helloworld/
</span></span><span class=line><span class=cl>cp /home/splunk/workshop/docker-k8s-otel/docker/entrypoint.sh /home/splunk/workshop/docker-k8s-otel/helloworld/</span></span></code></pre></div><blockquote><p><strong>IMPORTANT</strong> once these files are copied, open <code>/home/splunk/workshop/docker-k8s-otel/helloworld/Dockerfile</code><br>with an editor and replace <code>$INSTANCE</code> in your Dockerfile with your instance name,
which can be determined by running <code>echo $INSTANCE</code>.</p></blockquote><h2 id=introduction-to-part-2-of-the-workshop>Introduction to Part 2 of the Workshop<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the next part of the workshop, we want to run the application in Kubernetes,
so we&rsquo;ll need to deploy the Splunk distribution of the OpenTelemetry Collector
in our Kubernetes cluster.</p><p>Let&rsquo;s define some key terms first.</p><h3 id=key-terms>Key Terms<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=what-is-kubernetes>What is Kubernetes?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><em>&ldquo;Kubernetes is a portable, extensible, open source platform for managing containerized
workloads and services, that facilitates both declarative configuration and automation.&rdquo;</em></p><p>Source: <a href=https://kubernetes.io/docs/concepts/overview/ rel=external>https://kubernetes.io/docs/concepts/overview/</a></p><p>We&rsquo;ll deploy the Docker image we built earlier for our application into our Kubernetes cluster, after making
a small modification to the Dockerfile.</p><h4 id=what-is-helm>What is Helm?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Helm is a package manager for Kubernetes.</p><p><em>‚ÄúIt helps you define, install, and upgrade even the most complex Kubernetes application.‚Äù</em></p><p>Source: <a href=https://helm.sh/ rel=external>https://helm.sh/</a></p><p>We&rsquo;ll use Helm to deploy the OpenTelemetry collector in our K8s cluster.</p><h4 id=benefits-of-helm>Benefits of Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Manage Complexity<ul><li>deal with a single values.yaml file rather than dozens of manifest files</li></ul></li><li>Easy Updates<ul><li>in-place upgrades</li></ul></li><li>Rollback support<ul><li>Just use helm rollback to roll back to an older version of a release</li></ul></li></ul><h2 id=uninstall-the-host-collector>Uninstall the Host Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before moving forward, let‚Äôs remove the collector we installed earlier on the Linux host:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh<span class=p>;</span>
</span></span><span class=line><span class=cl>sudo sh /tmp/splunk-otel-collector.sh --uninstall</span></span></code></pre></div><h2 id=install-the-collector-using-helm>Install the Collector using Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let‚Äôs use the command line rather than the in-product wizard to create our own
<code>helm</code> command to install the collector.</p><p>We first need to add the helm repo:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart</span></span></code></pre></div><p>And ensure the repo is up-to-date:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update</span></span></code></pre></div><p>To configure the helm chart deployment, let&rsquo;s create a new file named <code>values.yaml</code> in
the <code>/home/splunk</code> directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># swith to the /home/splunk dir</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /home/splunk
</span></span><span class=line><span class=cl><span class=c1># create a values.yaml file in vi</span>
</span></span><span class=line><span class=cl>vi values.yaml</span></span></code></pre></div><blockquote><p>Press ‚Äòi‚Äô to enter into insert mode in vi before pasting the text below.</p></blockquote><p>Then paste the following contents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>logsEngine</span><span class=p>:</span><span class=w> </span><span class=l>otel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>root_path</span><span class=p>:</span><span class=w> </span><span class=l>/hostfs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>disk</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>exclude_mount_points</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>regexp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>mount_points</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/var/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/snap/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/boot/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/boot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/opt/orbstack/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/mnt/machines/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>/Users/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>load</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>network</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>paging</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processes</span><span class=p>:</span><span class=w> </span><span class=kc>null</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><p>Now we can use the following command to install the collector:</p><div class=tab-panel data-tab-group=R-tabs-dddb8f141f8d45b23f7192f7706ee703><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-801a7f250edc1efbc417ede914b4c280 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-dddb8f141f8d45b23f7192f7706ee703","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-040a46c239c18d4c54fce0f6c19bdded aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-dddb8f141f8d45b23f7192f7706ee703","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-801a7f250edc1efbc417ede914b4c280 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=otel-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector </span></span></code></pre></div></div></div><div id=R-tab-id-040a46c239c18d4c54fce0f6c19bdded data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri Dec <span class=m>20</span> 01:01:43 <span class=m>2024</span>
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>1</span>
</span></span><span class=line><span class=cl>TEST SUITE: None
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm us1.</span></span></code></pre></div></div></div></div></div><h2 id=confirm-the-collector-is-running>Confirm the Collector is Running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can confirm whether the collector is running with the following command:</p><div class=tab-panel data-tab-group=R-tabs-642323be03db3ff1033530bb0f87eb92><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-65d42ae2580395c38a704119578c07f9 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-642323be03db3ff1033530bb0f87eb92","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-43ae16c4088e2e76d09c8a888537d95f aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-642323be03db3ff1033530bb0f87eb92","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-65d42ae2580395c38a704119578c07f9 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-43ae16c4088e2e76d09c8a888537d95f data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-dkn88                            1/1     Running   <span class=m>0</span>          53s
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-ksmh4                            1/1     Running   <span class=m>0</span>          53s
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-lc2lf                            1/1     Running   <span class=m>0</span>          53s
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-dbf64995b-xgm9b   1/1     Running   <span class=m>0</span>          53s</span></span></code></pre></div></div></div></div></div><h2 id=confirm-your-k8s-cluster-is-in-o11y-cloud>Confirm your K8s Cluster is in O11y Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In Splunk Observability Cloud, navigate to <strong>Infrastructure</strong> -> <strong>Kubernetes</strong> -> <strong>Kubernetes Clusters</strong>,
and then search for your cluster name (which is <code>$INSTANCE-cluster</code>):</p><p><a href=#R-image-aa1fc0d6fe63235b0f001fe82887b3ed class=lightbox-link><img alt="Kubernetes node" class="lazy lightbox figure-image" loading=lazy src=../images/k8snode.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aa1fc0d6fe63235b0f001fe82887b3ed><img alt="Kubernetes node" class="lazy lightbox lightbox-image" loading=lazy src=../images/k8snode.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-application-to-k8s>Deploy Application to K8s</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=update-the-dockerfile>Update the Dockerfile<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With Kubernetes, environment variables are typically managed in the <code>.yaml</code> manifest files rather
than baking them into the Docker image. So let&rsquo;s remove the following two environment variables from the Dockerfile:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/workshop/docker-k8s-otel/helloworld/Dockerfile</span></span></code></pre></div><p>Then remove the following two environment variables:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>OTEL_SERVICE_NAME</span><span class=o>=</span>helloworld
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>OTEL_RESOURCE_ATTRIBUTES</span><span class=o>=</span><span class=s1>&#39;deployment.environment=otel-$INSTANCE&#39;</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><h2 id=build-a-new-docker-image>Build a new Docker Image<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s build a new Docker image that excludes the environment variables:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/workshop/docker-k8s-otel/helloworld 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker build -t helloworld:1.2 .</span></span></code></pre></div><blockquote><p>Note: we&rsquo;ve used a different version (1.2) to distinguish the image from our earlier version.
To clean up the older versions, run the following command to get the container id:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker ps -a <span class=p>|</span> grep helloworld</span></span></code></pre></div><p>Then run the following command to delete the container:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker rm &lt;old container id&gt; --force</span></span></code></pre></div><p>Now we can get the container image id:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker images <span class=p>|</span> grep 1.1</span></span></code></pre></div><p>Finally, we can run the following command to delete the old image:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker image rm &lt;old image id&gt;</span></span></code></pre></div></blockquote><h2 id=import-the-docker-image-to-local-container-repository>Import the Docker Image to Local Container Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Normally we‚Äôd push our Docker image to a repository such as Docker Hub.
But for this workshop, we‚Äôll push the Docker image to the local container
repository running on our EC2 instance at <code>localhost:9999</code></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Update the image tag</span>
</span></span><span class=line><span class=cl>docker tag helloworld:1.2 localhost:9999/helloworld:1.2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Import the image into the local repository</span>
</span></span><span class=line><span class=cl>docker push localhost:9999/helloworld:1.2</span></span></code></pre></div><h2 id=deploy-the-net-application>Deploy the .NET Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><blockquote><p>Hint: To enter edit mode in vi, press the &lsquo;i&rsquo; key. To save changes, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the <code>enter/return</code> key.</p></blockquote><p>To deploy our .NET application to K8s, let&rsquo;s create a file named <code>deployment.yaml</code> in <code>/home/splunk</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/deployment.yaml</span></span></code></pre></div><p>And paste in the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:9999/helloworld:1.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span></span></span></code></pre></div><details class="box cstyle notices tip expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<i class="fa-fw fas fa-lightbulb"></i>
What is a Deployment in Kubernetes?</summary><div class=box-content><p>The deployment.yaml file is a kubernetes config file that is used to define a deployment resource. This file is the cornerstone of managing applications in Kubernetes! The deployment config defines the deployment‚Äôs <em><strong>desired state</strong></em> and Kubernetes then ensures the <em><strong>actual</strong></em> state matches it. This allows application pods to self-heal and also allows for easy updates or roll backs to applications.</p></div></details><p>Then, create a second file in the same directory named <code>service.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/service.yaml</span></span></code></pre></div><p>And paste in the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span></span></span></code></pre></div><details class="box cstyle notices tip expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<i class="fa-fw fas fa-lightbulb"></i>
What is a Service in Kubernetes?</summary><div class=box-content><p>A Service in Kubernetes is an abstraction layer, working like a middleman, giving you a fixed IP address or DNS name to access your Pods, which stays the same, even if Pods are added, removed, or replaced over time.</p></div></details><p>Then, create a third file in the same directory named <code>ingress.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/ingress.yaml</span></span></code></pre></div><p>And paste in the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld-ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traefik.ingress.kubernetes.io/router.entrypoints</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingressClassName</span><span class=p>:</span><span class=w> </span><span class=l>traefik</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>helloworld.localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class=l>Prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>backend</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>8080</span></span></span></code></pre></div><p>We can then use these manifest files to deploy our application:</p><div class=tab-panel data-tab-group=R-tabs-9ff6497dc672cc1737304a6bd4fc5617><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-aca51392d567fd17c50b06eab8e77c84 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9ff6497dc672cc1737304a6bd4fc5617","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-0944811c955184631746679027472ca8 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9ff6497dc672cc1737304a6bd4fc5617","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-aca51392d567fd17c50b06eab8e77c84 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># create the deployment</span>
</span></span><span class=line><span class=cl>kubectl apply -f deployment.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># create the service</span>
</span></span><span class=line><span class=cl>kubectl apply -f service.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># create the ingress</span>
</span></span><span class=line><span class=cl>kubectl apply -f ingress.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-0944811c955184631746679027472ca8 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/helloworld created
</span></span><span class=line><span class=cl>service/helloworld created
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/helloworld-ingress created</span></span></code></pre></div></div></div></div></div><h2 id=test-the-application>Test the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following command to access the application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://helloworld.localhost/hello/Kubernetes</span></span></code></pre></div><h2 id=configure-opentelemetry>Configure OpenTelemetry<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The .NET OpenTelemetry instrumentation was already baked into the Docker image. But we need to set a few
environment variables to tell it where to send the data.</p><p>Add the following to <code>deployment.yaml</code> file you created earlier:</p><blockquote><p><strong>IMPORTANT</strong> replace <code>$INSTANCE</code> in the YAML below with your instance name,
which can be determined by running <code>echo $INSTANCE</code>.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>NODE_IP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(NODE_IP):4318&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;helloworld&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=otel-$INSTANCE&#34;</span><span class=w> </span></span></span></code></pre></div><p>The complete <code>deployment.yaml</code> file should be as follows (with <strong>your</strong> instance name rather than <code>$INSTANCE</code>):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:9999/helloworld:1.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>NODE_IP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(NODE_IP):4318&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;helloworld&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=otel-$INSTANCE&#34;</span><span class=w> </span></span></span></code></pre></div><p>Apply the changes with:</p><div class=tab-panel data-tab-group=R-tabs-f5591f28ea0a1a34ea6199fd8fc6ff81><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b3ad969fc29425833f04cdd0954d2062 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f5591f28ea0a1a34ea6199fd8fc6ff81","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-927856369bf399d4d3d9baa0a90e41d0 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f5591f28ea0a1a34ea6199fd8fc6ff81","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-b3ad969fc29425833f04cdd0954d2062 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-927856369bf399d4d3d9baa0a90e41d0 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/helloworld configured</span></span></code></pre></div></div></div></div></div><p>Then use the following command to generate some traffic:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://helloworld.localhost/hello/Kubernetes</span></span></code></pre></div><p>After a minute or so, you should see traces flowing in the o11y cloud. But, if you want to see your trace sooner, we have &mldr;</p><h2 id=a-challenge-for-you>A Challenge For You<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you are a developer and just want to quickly grab the trace id or see console feedback, what environment variable could you add to the deployment.yaml file?</p><details><summary><b>Click here to see the answer</b></summary><p>If you recall in our challenge from Section 4, <em>Instrument a .NET Application with OpenTelemetry</em>, we showed you a trick to write traces to the console using the <code>OTEL_TRACES_EXPORTER</code> environment variable. We can add this variable to our deployment.yaml, redeploy our application, and tail the logs from our helloworld app so that we can grab the trace id to then find the trace in Splunk Observability Cloud. (In the next section of our workshop, we will also walk through using the debug exporter, which is how you would typically debug your application in a K8s environment.)</p><p>First, open the deployment.yaml file in vi:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi deployment.yaml</span></span></code></pre></div><p>Then, add the <code>OTEL_TRACES_EXPORTER</code> environment variable:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>NODE_IP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(NODE_IP):4318&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;helloworld&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=YOURINSTANCE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c># NEW VALUE HERE:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_TRACES_EXPORTER</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;otlp,console&#34;</span><span class=w> </span></span></span></code></pre></div><p>Save your changes then redeploy the application:</p><div class=tab-panel data-tab-group=R-tabs-e7f4e6b6ed7e803de3db456ee2bf0171><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ce926b77fcfc8bff0813283f50efaffa aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e7f4e6b6ed7e803de3db456ee2bf0171","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-4d33bf50fdde959be35e6030b6bfc47d aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-e7f4e6b6ed7e803de3db456ee2bf0171","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-ce926b77fcfc8bff0813283f50efaffa data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-4d33bf50fdde959be35e6030b6bfc47d data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/helloworld configured</span></span></code></pre></div></div></div></div></div><p>Tail the helloworld logs:</p><div class=tab-panel data-tab-group=R-tabs-e18aed42c1c821ff34efb4a572eba970><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a3af221df9050795082c424cffa47c19 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e18aed42c1c821ff34efb4a572eba970","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-51c928d00e4e5942a6e6304b3f46abbf aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-e18aed42c1c821ff34efb4a572eba970","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a3af221df9050795082c424cffa47c19 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>helloworld -f</span></span></code></pre></div></div></div><div id=R-tab-id-51c928d00e4e5942a6e6304b3f46abbf data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>info: HelloWorldController<span class=o>[</span>0<span class=o>]</span>
</span></span><span class=line><span class=cl>      /hello endpoint invoked by K8s9
</span></span><span class=line><span class=cl>Activity.TraceId:            5bceb747cc7b79a77cfbde285f0f09cb
</span></span><span class=line><span class=cl>Activity.SpanId:             ac67afe500e7ad12
</span></span><span class=line><span class=cl>Activity.TraceFlags:         Recorded
</span></span><span class=line><span class=cl>Activity.ActivitySourceName: Microsoft.AspNetCore
</span></span><span class=line><span class=cl>Activity.DisplayName:        GET hello/<span class=o>{</span>name?<span class=o>}</span>
</span></span><span class=line><span class=cl>Activity.Kind:               Server
</span></span><span class=line><span class=cl>Activity.StartTime:          2025-02-04T15:22:48.2381736Z
</span></span><span class=line><span class=cl>Activity.Duration:           00:00:00.0027334
</span></span><span class=line><span class=cl>Activity.Tags:
</span></span><span class=line><span class=cl>    server.address: 10.43.226.224
</span></span><span class=line><span class=cl>    server.port: <span class=m>8080</span>
</span></span><span class=line><span class=cl>    http.request.method: GET
</span></span><span class=line><span class=cl>    url.scheme: http
</span></span><span class=line><span class=cl>    url.path: /hello/K8s9
</span></span><span class=line><span class=cl>    network.protocol.version: 1.1
</span></span><span class=line><span class=cl>    user_agent.original: curl/7.81.0
</span></span><span class=line><span class=cl>    http.route: hello/<span class=o>{</span>name?<span class=o>}</span>
</span></span><span class=line><span class=cl>    http.response.status_code: <span class=m>200</span>
</span></span><span class=line><span class=cl>Resource associated with Activity:
</span></span><span class=line><span class=cl>    splunk.distro.version: 1.8.0
</span></span><span class=line><span class=cl>    telemetry.distro.name: splunk-otel-dotnet
</span></span><span class=line><span class=cl>    telemetry.distro.version: 1.8.0
</span></span><span class=line><span class=cl>    os.type: linux
</span></span><span class=line><span class=cl>    os.description: Debian GNU/Linux <span class=m>12</span> <span class=o>(</span>bookworm<span class=o>)</span>
</span></span><span class=line><span class=cl>    os.build_id: 6.2.0-1018-aws
</span></span><span class=line><span class=cl>    os.name: Debian GNU/Linux
</span></span><span class=line><span class=cl>    os.version: <span class=m>12</span>
</span></span><span class=line><span class=cl>    host.name: helloworld-69f5c7988b-dxkwh
</span></span><span class=line><span class=cl>    process.owner: app
</span></span><span class=line><span class=cl>    process.pid: <span class=m>1</span>
</span></span><span class=line><span class=cl>    process.runtime.description: .NET 8.0.12
</span></span><span class=line><span class=cl>    process.runtime.name: .NET
</span></span><span class=line><span class=cl>    process.runtime.version: 8.0.12
</span></span><span class=line><span class=cl>    container.id: 39c2061d7605d8c390b4fe5f8054719f2fe91391a5c32df5684605202ca39ae9
</span></span><span class=line><span class=cl>    telemetry.sdk.name: opentelemetry
</span></span><span class=line><span class=cl>    telemetry.sdk.language: dotnet
</span></span><span class=line><span class=cl>    telemetry.sdk.version: 1.9.0
</span></span><span class=line><span class=cl>    service.name: helloworld
</span></span><span class=line><span class=cl>    deployment.environment: otel-jen-tko-1b75</span></span></code></pre></div></div></div></div></div><p>Then, in your other terminal window, generate a trace with your curl command. You will see the trace id in the console in which you are tailing the logs. Copy the <code>Activity.TraceId:</code> value and paste it into the Trace search field in APM.</p></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=customize-the-opentelemetry-collector-configuration>Customize the OpenTelemetry Collector Configuration</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>We deployed the Splunk Distribution of the OpenTelemetry Collector in our K8s cluster
using the default configuration. In this section, we&rsquo;ll walk through several examples
showing how to customize the collector config.</p><h2 id=get-the-collector-configuration>Get the Collector Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before we customize the collector config, how do we determine what the current configuration
looks like?</p><p>In a Kubernetes environment, the collector configuration is stored using a Config Map.</p><p>We can see which config maps exist in our cluster with the following command:</p><div class=tab-panel data-tab-group=R-tabs-be2b6f428a3ba68c18934f1478eef50b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6adc27529ae131417630c868f54a80a8 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-be2b6f428a3ba68c18934f1478eef50b","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-e96688728496153817bc04a48fcb6075 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-be2b6f428a3ba68c18934f1478eef50b","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6adc27529ae131417630c868f54a80a8 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get cm -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-e96688728496153817bc04a48fcb6075 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                 DATA   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-otel-k8s-cluster-receiver   <span class=m>1</span>      3h37m
</span></span><span class=line><span class=cl>splunk-otel-collector-otel-agent                  <span class=m>1</span>      3h37m</span></span></code></pre></div></div></div></div></div><blockquote><p>Why are there two config maps?</p></blockquote><p>We can then view the config map of the collector agent as follows:</p><div class=tab-panel data-tab-group=R-tabs-641f0f06241b100cc6af9bdc0c237e3c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ab3bcad6234ed18ff2c2d55dc313b928 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-641f0f06241b100cc6af9bdc0c237e3c","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-629eb24efffc09353632725dfef0af89 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-641f0f06241b100cc6af9bdc0c237e3c","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-ab3bcad6234ed18ff2c2d55dc313b928 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-agent</span></span></code></pre></div></div></div><div id=R-tab-id-629eb24efffc09353632725dfef0af89 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Name:         splunk-otel-collector-otel-agent
</span></span><span class=line><span class=cl>Namespace:    default
</span></span><span class=line><span class=cl>Labels:       <span class=nv>app</span><span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/instance<span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/managed-by<span class=o>=</span>Helm
</span></span><span class=line><span class=cl>              app.kubernetes.io/name<span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/version<span class=o>=</span>0.136.1
</span></span><span class=line><span class=cl>              <span class=nv>chart</span><span class=o>=</span>splunk-otel-collector-0.136.0
</span></span><span class=line><span class=cl>              helm.sh/chart<span class=o>=</span>splunk-otel-collector-0.136.0
</span></span><span class=line><span class=cl>              <span class=nv>release</span><span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>Annotations:  meta.helm.sh/release-name: splunk-otel-collector
</span></span><span class=line><span class=cl>              meta.helm.sh/release-namespace: default
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Data</span>
</span></span><span class=line><span class=cl><span class=o>====</span>
</span></span><span class=line><span class=cl>relay:
</span></span><span class=line><span class=cl>----
</span></span><span class=line><span class=cl>exporters:
</span></span><span class=line><span class=cl>  otlphttp:
</span></span><span class=line><span class=cl>    auth:
</span></span><span class=line><span class=cl>      authenticator: headers_setter
</span></span><span class=line><span class=cl>    metrics_endpoint: https://ingest.us1.signalfx.com/v2/datapoint/otlp
</span></span><span class=line><span class=cl>    traces_endpoint: https://ingest.us1.signalfx.com/v2/trace/otlp
</span></span><span class=line><span class=cl>    <span class=o>(</span>followed by the rest of the collector config in yaml format<span class=o>)</span> </span></span></code></pre></div></div></div></div></div><h2 id=how-to-update-the-collector-configuration-in-k8s>How to Update the Collector Configuration in K8s<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In our earlier example running the collector on a Linux instance,
the collector configuration was available in the <code>/etc/otel/collector/agent_config.yaml</code> file. If we
needed to make changes to the collector config in that case, we&rsquo;d simply edit this file,
save the changes, and then restart the collector.</p><p>In K8s, things work a bit differently. Instead of modifying the <code>agent_config.yaml</code> directly, we&rsquo;ll
instead customize the collector configuration by making changes to the <code>values.yaml</code> file used to deploy
the helm chart.</p><p>The values.yaml file in <a href=https://github.com/signalfx/splunk-otel-collector-chart/blob/main/helm-charts/splunk-otel-collector/values.yaml rel=external>GitHub</a>
describes the customization options that are available to us.</p><p>Let&rsquo;s look at an example.</p><h2 id=add-infrastructure-events-monitoring>Add Infrastructure Events Monitoring<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For our first example, let&rsquo;s enable infrastructure events monitoring for our K8s cluster.</p><blockquote><p>This will allow us to see Kubernetes events as part of the Events Feed section in charts.
The cluster receiver will be configured with a Smart Agent receiver using the kubernetes-events
monitor to send custom events. See <a href=https://docs.splunk.com/observability/en/gdi/opentelemetry/collector-kubernetes/kubernetes-config-logs.html#collect-kubernetes-events rel=external>Collect Kubernetes events</a>
for further details.</p></blockquote><p>This is done by adding the following line to the <code>values.yaml</code> file:</p><blockquote><p>Hint: steps to open and save in vi are in previous steps.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>logsEngine</span><span class=p>:</span><span class=w> </span><span class=l>otel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>infrastructureMonitoringEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span></span></span></code></pre></div><p>Once the file is saved, we can apply the changes with:</p><div class=tab-panel data-tab-group=R-tabs-c79cb0c4bf575e7d2f39fcbc52e967f4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-627e02c029253378cf509b2f4b5e1598 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c79cb0c4bf575e7d2f39fcbc52e967f4","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-89629833e0ad5bece9089e9ef4f9bc39 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c79cb0c4bf575e7d2f39fcbc52e967f4","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-627e02c029253378cf509b2f4b5e1598 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=otel-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-89629833e0ad5bece9089e9ef4f9bc39 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Release <span class=s2>&#34;splunk-otel-collector&#34;</span> has been upgraded. Happy Helming!
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri Dec <span class=m>20</span> 01:17:03 <span class=m>2024</span>
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>2</span>
</span></span><span class=line><span class=cl>TEST SUITE: None
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm us1.</span></span></code></pre></div></div></div></div></div><p>We can then view the config map and ensure the changes were applied:</p><div class=tab-panel data-tab-group=R-tabs-abc900ab980d7cccc27e3d9e92d95fa2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-439b036d876bbf4fefbfd27ab5ec4645 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-abc900ab980d7cccc27e3d9e92d95fa2","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-19fcd95a2e67cf5963c18017ad9049b0 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-abc900ab980d7cccc27e3d9e92d95fa2","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-439b036d876bbf4fefbfd27ab5ec4645 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-k8s-cluster-receiver</span></span></code></pre></div></div></div><div id=R-tab-id-19fcd95a2e67cf5963c18017ad9049b0 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Ensure <code>smartagent/kubernetes-events</code> is included in the agent config now:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  smartagent/kubernetes-events:
</span></span><span class=line><span class=cl>    alwaysClusterReporter: <span class=nb>true</span>
</span></span><span class=line><span class=cl>    type: kubernetes-events
</span></span><span class=line><span class=cl>    whitelistedEvents:
</span></span><span class=line><span class=cl>    - involvedObjectKind: Pod
</span></span><span class=line><span class=cl>      reason: Created
</span></span><span class=line><span class=cl>    - involvedObjectKind: Pod
</span></span><span class=line><span class=cl>      reason: Unhealthy
</span></span><span class=line><span class=cl>    - involvedObjectKind: Pod
</span></span><span class=line><span class=cl>      reason: Failed
</span></span><span class=line><span class=cl>    - involvedObjectKind: Job
</span></span><span class=line><span class=cl>      reason: FailedCreate</span></span></code></pre></div></div></div></div></div><blockquote><p>Note that we specified the cluster receiver config map since that&rsquo;s
where these particular changes get applied.</p></blockquote><h2 id=add-the-debug-exporter>Add the Debug Exporter<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Suppose we want to see the traces and logs that are sent to the collector, so we can
inspect them before sending them to Splunk. We can use the debug exporter for this purpose, which
can be helpful for troubleshooting OpenTelemetry-related issues.</p><p>Let&rsquo;s add the debug exporter to the bottom of the values.yaml file as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>logsEngine</span><span class=p>:</span><span class=w> </span><span class=l>otel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>infrastructureMonitoringEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span></span></span></code></pre></div><p>Once the file is saved, we can apply the changes with:</p><div class=tab-panel data-tab-group=R-tabs-c643bda34dcce07bdfc1405c68bbf0cc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-452d976b13bbfd19fbb381b7cf90097b aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c643bda34dcce07bdfc1405c68bbf0cc","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-9a435fbb6e3fb074bd99c210ed13a393 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c643bda34dcce07bdfc1405c68bbf0cc","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-452d976b13bbfd19fbb381b7cf90097b data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=otel-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-9a435fbb6e3fb074bd99c210ed13a393 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Release <span class=s2>&#34;splunk-otel-collector&#34;</span> has been upgraded. Happy Helming!
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri Dec <span class=m>20</span> 01:32:03 <span class=m>2024</span>
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>3</span>
</span></span><span class=line><span class=cl>TEST SUITE: None
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm us1.</span></span></code></pre></div></div></div></div></div><p>Exercise the application a few times using curl, then tail the agent collector logs with the
following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>component</span><span class=o>=</span>otel-collector-agent -f</span></span></code></pre></div><p>You should see traces written to the agent collector logs such as the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>2024-12-20T01:43:52.929Z	info	Traces	{&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;traces&#34;, &#34;name&#34;: &#34;debug&#34;, &#34;resource spans&#34;: 1, &#34;spans&#34;: 2}
2024-12-20T01:43:52.929Z	info	ResourceSpans #0
Resource SchemaURL: https://opentelemetry.io/schemas/1.6.1
Resource attributes:
     -&gt; splunk.distro.version: Str(1.8.0)
     -&gt; telemetry.distro.name: Str(splunk-otel-dotnet)
     -&gt; telemetry.distro.version: Str(1.8.0)
     -&gt; os.type: Str(linux)
     -&gt; os.description: Str(Debian GNU/Linux 12 (bookworm))
     -&gt; os.build_id: Str(6.8.0-1021-aws)
     -&gt; os.name: Str(Debian GNU/Linux)
     -&gt; os.version: Str(12)
     -&gt; host.name: Str(derek-1)
     -&gt; process.owner: Str(app)
     -&gt; process.pid: Int(1)
     -&gt; process.runtime.description: Str(.NET 8.0.11)
     -&gt; process.runtime.name: Str(.NET)
     -&gt; process.runtime.version: Str(8.0.11)
     -&gt; container.id: Str(78b452a43bbaa3354a3cb474010efd6ae2367165a1356f4b4000be031b10c5aa)
     -&gt; telemetry.sdk.name: Str(opentelemetry)
     -&gt; telemetry.sdk.language: Str(dotnet)
     -&gt; telemetry.sdk.version: Str(1.9.0)
     -&gt; service.name: Str(helloworld)
     -&gt; deployment.environment: Str(otel-derek-1)
     -&gt; k8s.pod.ip: Str(10.42.0.15)
     -&gt; k8s.pod.labels.app: Str(helloworld)
     -&gt; k8s.pod.name: Str(helloworld-84865965d9-nkqsx)
     -&gt; k8s.namespace.name: Str(default)
     -&gt; k8s.pod.uid: Str(38d39bc6-1309-4022-a569-8acceef50942)
     -&gt; k8s.node.name: Str(derek-1)
     -&gt; k8s.cluster.name: Str(derek-1-cluster)</code></pre></div><p>And log entries such as:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>2024-12-20T01:43:53.215Z	info	Logs	{&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;logs&#34;, &#34;name&#34;: &#34;debug&#34;, &#34;resource logs&#34;: 1, &#34;log records&#34;: 2}
2024-12-20T01:43:53.215Z	info	ResourceLog #0
Resource SchemaURL: https://opentelemetry.io/schemas/1.6.1
Resource attributes:
     -&gt; splunk.distro.version: Str(1.8.0)
     -&gt; telemetry.distro.name: Str(splunk-otel-dotnet)
     -&gt; telemetry.distro.version: Str(1.8.0)
     -&gt; os.type: Str(linux)
     -&gt; os.description: Str(Debian GNU/Linux 12 (bookworm))
     -&gt; os.build_id: Str(6.8.0-1021-aws)
     -&gt; os.name: Str(Debian GNU/Linux)
     -&gt; os.version: Str(12)
     -&gt; host.name: Str(derek-1)
     -&gt; process.owner: Str(app)
     -&gt; process.pid: Int(1)
     -&gt; process.runtime.description: Str(.NET 8.0.11)
     -&gt; process.runtime.name: Str(.NET)
     -&gt; process.runtime.version: Str(8.0.11)
     -&gt; container.id: Str(78b452a43bbaa3354a3cb474010efd6ae2367165a1356f4b4000be031b10c5aa)
     -&gt; telemetry.sdk.name: Str(opentelemetry)
     -&gt; telemetry.sdk.language: Str(dotnet)
     -&gt; telemetry.sdk.version: Str(1.9.0)
     -&gt; service.name: Str(helloworld)
     -&gt; deployment.environment: Str(otel-derek-1)
     -&gt; k8s.node.name: Str(derek-1)
     -&gt; k8s.cluster.name: Str(derek-1-cluster)</code></pre></div><p>If you return to Splunk Observability Cloud though, you&rsquo;ll notice that traces and logs are
no longer being sent there by the application.</p><p>Why do you think that is? We&rsquo;ll explore it in the next section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=troubleshoot-opentelemetry-collector-issues>Troubleshoot OpenTelemetry Collector Issues</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>In the previous section, we added the debug exporter to the collector configuration,
and made it part of the pipeline for traces and logs. We see the debug output
written to the agent collector logs as expected.</p><p>However, traces are no longer sent to o11y cloud. Let&rsquo;s figure out why and fix it.</p><h2 id=review-the-collector-config>Review the Collector Config<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Whenever a change to the collector config is made via a <code>values.yaml</code> file, it&rsquo;s helpful
to review the actual configuration applied to the collector by looking at the config map:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-agent</span></span></code></pre></div><p>Let&rsquo;s review the pipelines for logs and traces in the agent collector config. They should look
like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>k8sattributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filter/logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>k8sattributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>zipkin</span></span></span></code></pre></div><p>Do you see the problem? Only the debug exporter is included in the traces and logs pipelines.
The <code>otlphttp</code> and <code>signalfx</code> exporters that were present in the traces pipeline configuration previously are gone.
This is why we no longer see traces in o11y cloud. And for the logs pipeline, the <code>splunk_hec/platform_logs</code>
exporter has been removed.</p><blockquote><p>How did we know what specific exporters were included before? To find out,
we could have reverted our earlier customizations and then checked the config
map to see what was in the traces pipeline originally. Alternatively, we can refer
to the examples in the <a href=https://github.com/signalfx/splunk-otel-collector-chart/blob/main/examples/default/rendered_manifests/configmap-agent.yaml rel=external>GitHub repo for splunk-otel-collector-chart</a>
which shows us what default agent config is used by the Helm chart.</p></blockquote><h2 id=how-did-these-exporters-get-removed>How did these exporters get removed?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s review the customizations we added to the <code>values.yaml</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>logsEngine</span><span class=p>:</span><span class=w> </span><span class=l>otel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>infrastructureMonitoringEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span></span></span></code></pre></div><p>When we applied the <code>values.yaml</code> file to the collector using <code>helm upgrade</code>, the
custom configuration got merged with the previous collector configuration.
When this happens, the sections of the <code>yaml</code> configuration that contain lists,
such as the list of exporters in the pipeline section, get replaced with what we
included in the <code>values.yaml</code> file (which was only the debug exporter).</p><h2 id=lets-fix-the-issue>Let&rsquo;s Fix the Issue<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>So when customizing an existing pipeline, we need to fully redefine that part of the configuration.
Our <code>values.yaml</code> file should thus be updated as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>logsEngine</span><span class=p>:</span><span class=w> </span><span class=l>otel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>infrastructureMonitoringEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>splunk_hec/platform_logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span></span></span></code></pre></div><p>Let&rsquo;s apply the changes:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=otel-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><p>And then check the agent config map:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-agent</span></span></code></pre></div><p>This time, we should see a fully defined exporters pipeline for both logs and traces:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  pipelines:
</span></span><span class=line><span class=cl>    logs:
</span></span><span class=line><span class=cl>      exporters:
</span></span><span class=line><span class=cl>      - splunk_hec/platform_logs
</span></span><span class=line><span class=cl>      - debug
</span></span><span class=line><span class=cl>      processors:
</span></span><span class=line><span class=cl>      ...
</span></span><span class=line><span class=cl>    traces:
</span></span><span class=line><span class=cl>      exporters:
</span></span><span class=line><span class=cl>      - otlphttp
</span></span><span class=line><span class=cl>      - signalfx
</span></span><span class=line><span class=cl>      - debug
</span></span><span class=line><span class=cl>      processors:
</span></span><span class=line><span class=cl>      ...</span></span></code></pre></div><h2 id=reviewing-the-log-output>Reviewing the Log Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <strong>Splunk Distribution of OpenTelemetry .NET</strong> automatically exports logs enriched with tracing context
from applications that use <code>Microsoft.Extensions.Logging</code> for logging (which our sample app does).</p><p>Application logs are enriched with tracing metadata and then exported to a local instance of
the OpenTelemetry Collector in OTLP format.</p><p>Let&rsquo;s take a closer look at the logs that were captured by the debug exporter to see if that&rsquo;s happening.<br>To tail the collector logs, we can use the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>component</span><span class=o>=</span>otel-collector-agent -f</span></span></code></pre></div><p>Once we&rsquo;re tailing the logs, we can use curl to generate some more traffic. Then we should see
something like the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>2024-12-20T21:56:30.858Z	info	Logs	{&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;logs&#34;, &#34;name&#34;: &#34;debug&#34;, &#34;resource logs&#34;: 1, &#34;log records&#34;: 1}
2024-12-20T21:56:30.858Z	info	ResourceLog #0
Resource SchemaURL: https://opentelemetry.io/schemas/1.6.1
Resource attributes:
     -&gt; splunk.distro.version: Str(1.8.0)
     -&gt; telemetry.distro.name: Str(splunk-otel-dotnet)
     -&gt; telemetry.distro.version: Str(1.8.0)
     -&gt; os.type: Str(linux)
     -&gt; os.description: Str(Debian GNU/Linux 12 (bookworm))
     -&gt; os.build_id: Str(6.8.0-1021-aws)
     -&gt; os.name: Str(Debian GNU/Linux)
     -&gt; os.version: Str(12)
     -&gt; host.name: Str(derek-1)
     -&gt; process.owner: Str(app)
     -&gt; process.pid: Int(1)
     -&gt; process.runtime.description: Str(.NET 8.0.11)
     -&gt; process.runtime.name: Str(.NET)
     -&gt; process.runtime.version: Str(8.0.11)
     -&gt; container.id: Str(5bee5b8f56f4b29f230ffdd183d0367c050872fefd9049822c1ab2aa662ba242)
     -&gt; telemetry.sdk.name: Str(opentelemetry)
     -&gt; telemetry.sdk.language: Str(dotnet)
     -&gt; telemetry.sdk.version: Str(1.9.0)
     -&gt; service.name: Str(helloworld)
     -&gt; deployment.environment: Str(otel-derek-1)
     -&gt; k8s.node.name: Str(derek-1)
     -&gt; k8s.cluster.name: Str(derek-1-cluster)
ScopeLogs #0
ScopeLogs SchemaURL: 
InstrumentationScope HelloWorldController 
LogRecord #0
ObservedTimestamp: 2024-12-20 21:56:28.486804 +0000 UTC
Timestamp: 2024-12-20 21:56:28.486804 +0000 UTC
SeverityText: Information
SeverityNumber: Info(9)
Body: Str(/hello endpoint invoked by {name})
Attributes:
     -&gt; name: Str(Kubernetes)
Trace ID: 78db97a12b942c0252d7438d6b045447
Span ID: 5e9158aa42f96db3
Flags: 1
	{&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;logs&#34;, &#34;name&#34;: &#34;debug&#34;}</code></pre></div><p>In this example, we can see that the Trace ID and Span ID were automatically written to the log output
by the OpenTelemetry .NET instrumentation. This allows us to correlate logs with traces in
Splunk Observability Cloud.</p><p>You might remember though that if we deploy the OpenTelemetry collector in a K8s cluster using Helm,
and we include the log collection option, then the OpenTelemetry collector will use the File Log receiver
to automatically capture any container logs.</p><p>This would result in duplicate logs being captured for our application. For example, in the following screenshot we
can see two log entries for each request made to our service:</p><p><a href=#R-image-3d70d8a7db22c8604fc995df52e685a4 class=lightbox-link><img alt="Duplicate Log Entries" class="lazy lightbox figure-image" loading=lazy src=../images/duplicate_logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3d70d8a7db22c8604fc995df52e685a4><img alt="Duplicate Log Entries" class="lazy lightbox lightbox-image" loading=lazy src=../images/duplicate_logs.png></a></p><p>How do we avoid this?</p><h2 id=avoiding-duplicate-logs-in-k8s>Avoiding Duplicate Logs in K8s<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To avoid capturing duplicate logs, we can set the <code>OTEL_LOGS_EXPORTER</code> environment variable to <code>none</code>,
to tell the Splunk Distribution of OpenTelemetry .NET to avoid exporting logs to the collector using OTLP.
We can do this by adding the <code>OTEL_LOGS_EXPORTER</code> environment variabl to the <code>deployment.yaml</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>NODE_IP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(NODE_IP):4318&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;helloworld&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=otel-$INSTANCE&#34;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_LOGS_EXPORTER </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;none&#34;</span><span class=w> </span></span></span></code></pre></div><p>And then running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># update the deployment</span>
</span></span><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div><p>Setting the <code>OTEL_LOGS_EXPORTER</code> environment variable to <code>none</code> is straightforward. However, the Trace ID
and Span ID are not written to the stdout logs generated by the application,
which would prevent us from correlating logs with traces.</p><p>To resolve this, we will need to define a custom logger, such as the example defined in<br><code>/home/splunk/workshop/docker-k8s-otel/helloworld/SplunkTelemetryConfigurator.cs</code>.</p><p>We could include this in our application by updating the <code>Program.cs</code> file as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=k>using</span> <span class=nn>SplunkTelemetry</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>Microsoft.Extensions.Logging.Console</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>builder</span> <span class=p>=</span> <span class=n>WebApplication</span><span class=p>.</span><span class=n>CreateBuilder</span><span class=p>(</span><span class=n>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>builder</span><span class=p>.</span><span class=n>Services</span><span class=p>.</span><span class=n>AddControllers</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SplunkTelemetryConfigurator</span><span class=p>.</span><span class=n>ConfigureLogger</span><span class=p>(</span><span class=n>builder</span><span class=p>.</span><span class=n>Logging</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>app</span> <span class=p>=</span> <span class=n>builder</span><span class=p>.</span><span class=n>Build</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>MapControllers</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>Run</span><span class=p>();</span></span></span></code></pre></div><p>Then we&rsquo;ll build a new Docker image that includes the custom logging configuration:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/workshop/docker-k8s-otel/helloworld 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker build -t helloworld:1.3 .</span></span></code></pre></div><p>And then we&rsquo;ll import the updated image into our local container repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tag the image </span>
</span></span><span class=line><span class=cl>docker tag helloworld:1.3 localhost:9999/helloworld:1.3
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Import the image into our local container repo</span>
</span></span><span class=line><span class=cl>docker push localhost:9999/helloworld:1.3</span></span></code></pre></div><p>Finally, we&rsquo;ll need to update the `deployment.yaml&rsquo; file to use the 1.3 version
of the container image:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>helloworld</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:9999/helloworld:1.3</span></span></span></code></pre></div><p>And then apply the changes:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># update the deployment</span>
</span></span><span class=line><span class=cl>kubectl apply -f deployment.yaml</span></span></code></pre></div><p>Now we can see that the duplicate log entries have been eliminated. And the
remaining log entries have been formatted as JSON, and include the span and trace IDs:</p><p><a href=#R-image-6798ee9f06082c100be98ad348774cdb class=lightbox-link><img alt="JSON Format Logs" class="lazy lightbox figure-image" loading=lazy src=../images/logs_json_format.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6798ee9f06082c100be98ad348774cdb><img alt="JSON Format Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/logs_json_format.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 22, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>This workshop provided hands-on experience with the following concepts:</p><ul><li>How to deploy the <strong>Splunk Distribution of the OpenTelemetry Collector</strong> on a Linux host.</li><li>How to instrument a .NET application with the <strong>Splunk Distribution of OpenTelemetry .NET</strong>.</li><li>How to &ldquo;dockerize&rdquo; a .NET application and instrument it with the <strong>Splunk Distribution of OpenTelemetry .NET</strong>.</li><li>How to deploy the <strong>Splunk Distribution of the OpenTelemetry Collector</strong> in a Kubernetes cluster using Helm.</li><li>How to customize the collector configuration and troubleshoot an issue.</li></ul><p>To see how other languages and environments are instrumented with OpenTelemetry,
explore the <a href=https://github.com/signalfx/splunk-opentelemetry-examples rel=external>Splunk OpenTelemetry Examples GitHub repository</a>.</p><p>To run this workshop on your own in the future, refer back to these instructions and use the <strong>Splunk4Rookies - Observability</strong>
workshop template in Splunk Show to provision an EC2 instance.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 10, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=solving-problems-with-o11y-cloud>Solving Problems with O11y Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p>In this workshop, you&rsquo;ll get hands-on experience with the following:</p><ul><li>Deploy the <strong>OpenTelemetry Collector</strong> and customize the collector config</li><li>Deploy an application and instrument it with <strong>OpenTelemetry</strong></li><li>See how tags are captured using an <strong>OpenTelemetry SDK</strong></li><li>Create a <strong>Troubleshooting MetricSet</strong></li><li>Troubleshoot a problem and determine root cause using <strong>Tag Spotlight</strong></li></ul><p>Let&rsquo;s get started!</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Solving Problems with O11y Cloud</h1><article class=default><header class=headline></header><h1 id=connect-to-ec2-instance>Connect to EC2 Instance</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=connect-to-your-ec2-instance>Connect to your EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We‚Äôve prepared an Ubuntu Linux instance in AWS/EC2 for each attendee. Using the IP address and password provided by your instructor, connect to your EC2 instance using one of the methods below:</p><ul><li>macOS / Linux<ul><li><code>ssh splunk@IP address</code></li></ul></li><li>Windows 10+<ul><li>Use the OpenSSH client</li></ul></li><li>Earlier versions of Windows<ul><li>Use Putty</li></ul></li></ul><h2 id=editing-files>Editing Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll use <code>vi</code> to edit files during the workshop. Here&rsquo;s a quick primer.</p><p>To open a file for editing:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi &lt;filename&gt; </span></span></code></pre></div><ul><li>To edit the file, click <code>i</code> to switch to <strong>Insert mode</strong> and begin entering text as normal. Use <code>Esc</code> to return to <strong>Command mode</strong>.</li><li>To save your changes without exiting the editor, enter <code>Esc</code> to return to command mode then enter <code>:w</code>.</li><li>To exit the editor without saving changes, enter <code>Esc</code> to return to command mode then enter <code>:q!</code>.</li><li>To save your changes and exist the editor, enter <code>Esc</code> to return to command mode then enter <code>:wq</code>.</li></ul><p>See <a href=https://www.redhat.com/en/blog/introduction-vi-editor rel=external><strong>An introduction to the vi editor</strong></a> for a comprehensive introduction to <code>vi</code>.</p><p>If you&rsquo;d prefer using another editor, you can use <code>nano</code> instead:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nano &lt;filename&gt; </span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-opentelemetry-collector-and-customize-config>Deploy the OpenTelemetry Collector and Customize Config</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>The first step to &ldquo;getting data in&rdquo; is to deploy an OpenTelemetry collector, which receives and processes telemetry data in our environment before exporting it to Splunk Observability Cloud.</p><p>We&rsquo;ll be using Kubernetes for this workshop, and will deploy the collector in our K8s cluster using Helm.</p><h2 id=what-is-helm>What is Helm?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Helm is a package manager for Kubernetes which provides the following benefits:</p><ul><li>Manage Complexity<ul><li>deal with a single values.yaml file rather than dozens of manifest files</li></ul></li><li>Easy Updates<ul><li>in-place upgrades</li></ul></li><li>Rollback support<ul><li>Just use helm rollback to roll back to an older version of a release</li></ul></li></ul><h2 id=install-the-collector-using-helm>Install the Collector using Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s change into the correct directory and run a script to install the collector:</p><div class=tab-panel data-tab-group=R-tabs-b3d5ad4e1c87e03cf498a19e1569f52c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a6855b0fb96bc391a6585dc9fd9dbbf6 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b3d5ad4e1c87e03cf498a19e1569f52c","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-f528aa309514d9c966907c8389169594 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b3d5ad4e1c87e03cf498a19e1569f52c","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a6855b0fb96bc391a6585dc9fd9dbbf6 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/workshop/tagging
</span></span><span class=line><span class=cl>./1-deploy-otel-collector.sh</span></span></code></pre></div></div></div><div id=R-tab-id-f528aa309514d9c966907c8389169594 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s2>&#34;splunk-otel-collector-chart&#34;</span> has been added to your repositories
</span></span><span class=line><span class=cl>Hang tight <span class=k>while</span> we grab the latest from your chart repositories...
</span></span><span class=line><span class=cl>...Successfully got an update from the <span class=s2>&#34;splunk-otel-collector-chart&#34;</span> chart repository
</span></span><span class=line><span class=cl>Update Complete. ‚éàHappy Helming!‚éà
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Mon Dec <span class=m>23</span> 18:47:38 <span class=m>2024</span>
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>1</span>
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm us1.</span></span></code></pre></div></div></div></div></div><blockquote><p>Note that the script may take a minute or so to run.</p></blockquote><p>How did this script install the collector? It first ensured that the environment variables set in the <code>~./profile</code> file are read:</p><blockquote><p>Important: There is no need to run the following commands, as they were already run
by the <code>1-deploy-otel-collector.sh</code> script.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> ~/.profile</span></span></code></pre></div><p>It then installed the <code>splunk-otel-collector-chart</code> Helm chart and ensured it&rsquo;s up-to-date:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart
</span></span><span class=line><span class=cl>  helm repo update</span></span></code></pre></div><p>And finally, it used <code>helm install</code> to install the collector:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=tagging-workshop-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f otel/values.yaml</span></span></code></pre></div><blockquote><p>Note that the <code>helm install</code> command references a <code>values.yaml</code> file, which is used
to customize the collector configuration. We&rsquo;ll explore this is more detail below.</p></blockquote><h2 id=confirm-the-collector-is-running>Confirm the Collector is Running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can confirm whether the collector is running with the following command:</p><div class=tab-panel data-tab-group=R-tabs-07b91968bb47107cdcc66953654b685f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e250b0c1a7e7f5bfb9127fa07bae7728 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-07b91968bb47107cdcc66953654b685f","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-ccdcc9c913428eb59d7608a1d5a7dfdf aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-07b91968bb47107cdcc66953654b685f","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-e250b0c1a7e7f5bfb9127fa07bae7728 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-ccdcc9c913428eb59d7608a1d5a7dfdf data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                            READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-kfvjb                               1/1     Running   <span class=m>0</span>          2m33s
</span></span><span class=line><span class=cl>splunk-otel-collector-certmanager-7d89558bc9-2fqnx              1/1     Running   <span class=m>0</span>          2m33s
</span></span><span class=line><span class=cl>splunk-otel-collector-certmanager-cainjector-796cc6bd76-hz4sp   1/1     Running   <span class=m>0</span>          2m33s
</span></span><span class=line><span class=cl>splunk-otel-collector-certmanager-webhook-6959cd5f8-qd5b6       1/1     Running   <span class=m>0</span>          2m33s
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-57569b58c8-8ghds     1/1     Running   <span class=m>0</span>          2m33s
</span></span><span class=line><span class=cl>splunk-otel-collector-operator-6fd9f9d569-wd5mn                 2/2     Running   <span class=m>0</span>          2m33s</span></span></code></pre></div></div></div></div></div><h2 id=confirm-your-k8s-cluster-is-in-o11y-cloud>Confirm your K8s Cluster is in O11y Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In Splunk Observability Cloud, navigate to <strong>Infrastructure</strong> ‚Üí <strong>Kubernetes</strong> ‚Üí <strong>Kubernetes Clusters</strong>,
and then search for your Cluster Name (which is <code>$INSTANCE-k3s-cluster</code>):</p><p><a href=#R-image-3f441d493fdbb53df65224db2609ba19 class=lightbox-link><img alt="Kubernetes node" class="lazy lightbox figure-image" loading=lazy src=../images/k8snode.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3f441d493fdbb53df65224db2609ba19><img alt="Kubernetes node" class="lazy lightbox lightbox-image" loading=lazy src=../images/k8snode.png></a></p><h2 id=get-the-collector-configuration>Get the Collector Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before we customize the collector config, how do we determine what the current configuration
looks like?</p><p>In a Kubernetes environment, the collector configuration is stored using a Config Map.</p><p>We can see which config maps exist in our cluster with the following command:</p><div class=tab-panel data-tab-group=R-tabs-6a79901233684b0956cc04973ff5b005><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3e23e49673a8250a7c49d2d85d88fc9f aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6a79901233684b0956cc04973ff5b005","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-a7c5f333069ad0cba00eed9d6d063600 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-6a79901233684b0956cc04973ff5b005","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-3e23e49673a8250a7c49d2d85d88fc9f data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get cm -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-a7c5f333069ad0cba00eed9d6d063600 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                 DATA   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-otel-k8s-cluster-receiver   <span class=m>1</span>      3h37m
</span></span><span class=line><span class=cl>splunk-otel-collector-otel-agent                  <span class=m>1</span>      3h37m</span></span></code></pre></div></div></div></div></div><p>We can then view the config map of the collector agent as follows:</p><div class=tab-panel data-tab-group=R-tabs-4fb918f4acdd5d3bab2df521f2f63542><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a460091befe1e174cfc902c9456044b4 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4fb918f4acdd5d3bab2df521f2f63542","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-a4ab0f311c534ed662caa8dc15529045 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4fb918f4acdd5d3bab2df521f2f63542","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a460091befe1e174cfc902c9456044b4 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-agent</span></span></code></pre></div></div></div><div id=R-tab-id-a4ab0f311c534ed662caa8dc15529045 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Name:         splunk-otel-collector-otel-agent
</span></span><span class=line><span class=cl>Namespace:    default
</span></span><span class=line><span class=cl>Labels:       <span class=nv>app</span><span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/instance<span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/managed-by<span class=o>=</span>Helm
</span></span><span class=line><span class=cl>              app.kubernetes.io/name<span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>              app.kubernetes.io/version<span class=o>=</span>0.113.0
</span></span><span class=line><span class=cl>              <span class=nv>chart</span><span class=o>=</span>splunk-otel-collector-0.113.0
</span></span><span class=line><span class=cl>              helm.sh/chart<span class=o>=</span>splunk-otel-collector-0.113.0
</span></span><span class=line><span class=cl>              <span class=nv>heritage</span><span class=o>=</span>Helm
</span></span><span class=line><span class=cl>              <span class=nv>release</span><span class=o>=</span>splunk-otel-collector
</span></span><span class=line><span class=cl>Annotations:  meta.helm.sh/release-name: splunk-otel-collector
</span></span><span class=line><span class=cl>              meta.helm.sh/release-namespace: default
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Data</span>
</span></span><span class=line><span class=cl><span class=o>====</span>
</span></span><span class=line><span class=cl>relay:
</span></span><span class=line><span class=cl>----
</span></span><span class=line><span class=cl>exporters:
</span></span><span class=line><span class=cl>  otlphttp:
</span></span><span class=line><span class=cl>    headers:
</span></span><span class=line><span class=cl>      X-SF-Token: <span class=si>${</span><span class=nv>SPLUNK_OBSERVABILITY_ACCESS_TOKEN</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    metrics_endpoint: https://ingest.us1.signalfx.com/v2/datapoint/otlp
</span></span><span class=line><span class=cl>    traces_endpoint: https://ingest.us1.signalfx.com/v2/trace/otlp
</span></span><span class=line><span class=cl>    <span class=o>(</span>followed by the rest of the collector config in yaml format<span class=o>)</span> </span></span></code></pre></div></div></div></div></div><h2 id=how-to-update-the-collector-configuration-in-k8s>How to Update the Collector Configuration in K8s<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can customize the collector configuration in K8s using the <code>values.yaml</code> file.</p><blockquote><p>See <a href=https://github.com/signalfx/splunk-otel-collector-chart/blob/main/helm-charts/splunk-otel-collector/values.yaml rel=external>this file</a>
for a comprehensive list of customization options that are available in the <code>values.yaml</code> file.</p></blockquote><p>Let&rsquo;s look at an example.</p><h3 id=add-the-debug-exporter>Add the Debug Exporter<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Suppose we want to see the traces that are sent to the collector. We can use the debug exporter for this purpose, which can be helpful for troubleshooting OpenTelemetry related issues.</p><p>You can use <code>vi</code> or <code>nano</code> to edit the <code>values.yaml</code> file. We will show an example using vi:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /home/splunk/workshop/tagging/otel/values.yaml</span></span></code></pre></div><p>Add the debug exporter by copying and pasting the following text to the bottom of the <code>values.yaml</code> file:</p><blockquote><p>Press &lsquo;i&rsquo; to enter into insert mode in vi before adding the text below.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=c># NEW CONTENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span></span></span></code></pre></div><p>After these changes, the <code>values.yaml</code> file should include the following contents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>profilingEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>infrastructureMonitoringEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>certmanager</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>operator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>operatorcrds</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>install</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kubeletstats</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>insecure_skip_verify</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>auth_type</span><span class=p>:</span><span class=w> </span><span class=l>serviceAccount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=l>${K8S_NODE_IP}:10250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metric_groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>node</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>k8s_api_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>auth_type</span><span class=p>:</span><span class=w> </span><span class=l>serviceAccount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>extra_metadata_labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>container.id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>k8s.volume.type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># NEW CONTENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>debug</span></span></span></code></pre></div><blockquote><p>To save your changes in vi, press the <code>esc</code> key to enter command mode, then type <code>:wq!</code> followed by pressing the
<code>enter/return</code> key.</p></blockquote><p>Once the file is saved, we can apply the changes with:</p><div class=tab-panel data-tab-group=R-tabs-cf93546cded91419b4ef7439300d015e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-62e73588bcafca8ea4e4b82846c5776a aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-cf93546cded91419b4ef7439300d015e","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-90a1b5648b3b2043c8644c5710d40bb6 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-cf93546cded91419b4ef7439300d015e","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-62e73588bcafca8ea4e4b82846c5776a data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/workshop/tagging
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>helm upgrade splunk-otel-collector  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=tagging-workshop-</span><span class=nv>$INSTANCE</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f otel/values.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-90a1b5648b3b2043c8644c5710d40bb6 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Release <span class=s2>&#34;splunk-otel-collector&#34;</span> has been upgraded. Happy Helming!
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Mon Dec <span class=m>23</span> 19:08:08 <span class=m>2024</span>
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: <span class=m>2</span>
</span></span><span class=line><span class=cl>NOTES:
</span></span><span class=line><span class=cl>Splunk OpenTelemetry Collector is installed and configured to send data to Splunk Observability realm us1.</span></span></code></pre></div></div></div></div></div><p>Whenever a change to the collector config is made via a <code>values.yaml</code> file, it&rsquo;s helpful
to review the actual configuration applied to the collector by looking at the config map:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe cm splunk-otel-collector-otel-agent</span></span></code></pre></div><p>We can see that the debug exporter was added to the traces pipeline, as desired:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>debug</span></span></span></code></pre></div><p>We&rsquo;ll explore the output of the debug exporter once we deploy an application
in our cluster and start capturing traces.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 21, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-sample-application-and-instrument-with-opentelemetry>Deploy the Sample Application and Instrument with OpenTelemetry</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>At this point, we&rsquo;ve deployed an OpenTelemetry collector in our K8s cluster, and it&rsquo;s
successfully collecting infrastructure metrics.</p><p>The next step is to deploy a sample application and instrument
with OpenTelemetry to capture traces.</p><p>We&rsquo;ll use a microservices-based application written in Python. To keep the workshop simple,
we&rsquo;ll focus on two services: a credit check service and a credit processor service.</p><h2 id=deploy-the-application>Deploy the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To save time, we&rsquo;ve built Docker images for both of these services already which are available in Docker Hub.
We can deploy the credit check service in our K8s cluster with the following command:</p><div class=tab-panel data-tab-group=R-tabs-80050bc3b4174dbdbae2416d8b815ffb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f3b0bf07af1eb0f0274281349f2c270d aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-80050bc3b4174dbdbae2416d8b815ffb","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-1134b354f54a291ad14dc63dcc5b9eec aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-80050bc3b4174dbdbae2416d8b815ffb","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f3b0bf07af1eb0f0274281349f2c270d data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f /home/splunk/workshop/tagging/creditcheckservice-py-with-tags/creditcheckservice-dockerhub.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-1134b354f54a291ad14dc63dcc5b9eec data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/creditcheckservice created
</span></span><span class=line><span class=cl>service/creditcheckservice created</span></span></code></pre></div></div></div></div></div><p>Next, let&rsquo;s deploy the credit processor service:</p><div class=tab-panel data-tab-group=R-tabs-91fbb6ecf0d8d2524128d78f0bfeaa2d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8abc90e3643873bab9aaa8e74dc0f605 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-91fbb6ecf0d8d2524128d78f0bfeaa2d","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-c6b0696a50536d8b5db7722c600800a0 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-91fbb6ecf0d8d2524128d78f0bfeaa2d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8abc90e3643873bab9aaa8e74dc0f605 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f /home/splunk/workshop/tagging/creditprocessorservice/creditprocessorservice-dockerhub.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-c6b0696a50536d8b5db7722c600800a0 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/creditprocessorservice created
</span></span><span class=line><span class=cl>service/creditprocessorservice created</span></span></code></pre></div></div></div></div></div><p>Finally, let&rsquo;s deploy a load generator to generate traffic:</p><div class=tab-panel data-tab-group=R-tabs-9d88d60ee6cb6eca9df0d3258afaa70c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4ccce2ef09d0d1130136f542281d2394 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9d88d60ee6cb6eca9df0d3258afaa70c","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-37b4835611bfc38ad1797ed4f2c21896 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9d88d60ee6cb6eca9df0d3258afaa70c","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-4ccce2ef09d0d1130136f542281d2394 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f /home/splunk/workshop/tagging/loadgenerator/loadgenerator-dockerhub.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-37b4835611bfc38ad1797ed4f2c21896 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deployment.apps/loadgenerator created</span></span></code></pre></div></div></div></div></div><h2 id=explore-the-application>Explore the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll provide an overview of the application in this section. If you&rsquo;d like to see the complete source
code for the application, refer to the <a href=https://github.com/splunk/observability-workshop/tree/main/workshop/tagging rel=external>Observability Workshop repository in GitHub</a></p><h3 id=opentelemetry-instrumentation>OpenTelemetry Instrumentation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If we look at the Dockerfile&rsquo;s used to build the credit check and credit processor services, we
can see that they&rsquo;ve already been instrumented with OpenTelemetry. For example, let&rsquo;s look at
<code>/home/splunk/workshop/tagging/creditcheckservice-py-with-tags/Dockerfile</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.11-slim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Set working directory</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Copy requirements over</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> requirements.txt .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apt-get update <span class=o>&amp;&amp;</span> apt-get install --yes gcc python3-dev<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>PIP_ROOT_USER_ACTION</span><span class=o>=</span>ignore
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Install Python dependencies</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install --no-cache-dir -r requirements.txt<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Copy main app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> main.py .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Bootstrap OTel</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> splunk-py-trace-bootstrap<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Set the entrypoint command to run the application</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;splunk-py-trace&#34;</span><span class=p>,</span> <span class=s2>&#34;python3&#34;</span><span class=p>,</span> <span class=s2>&#34;main.py&#34;</span><span class=p>]</span></span></span></code></pre></div><p>We can see that <code>splunk-py-trace-bootstrap</code> was included, which installs OpenTelemetry instrumentation
for supported packages used by our applications. We can also see that <code>splunk-py-trace</code> is used as part
of the command to start the application.</p><p>And if we review the <code>/home/splunk/workshop/tagging/creditcheckservice-py-with-tags/requirements.txt</code> file,
we can see that <code>splunk-opentelemetry[all]</code> was included in the list of packages.</p><p>Finally, if we review the Kubernetes manifest that we used to deploy this service (<code>/home/splunk/workshop/tagging/creditcheckservice-py-with-tags/creditcheckservice-dockerhub.yaml</code>),
we can see that environment variables were set in the container to tell OpenTelemetry
where to export OTLP data to:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PORT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8888&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>NODE_IP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(NODE_IP):4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;creditcheckservice&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_PROPAGATORS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;tracecontext,baggage&#34;</span></span></span></code></pre></div><p>This is all that&rsquo;s needed to instrument the service with OpenTelemetry!</p><h3 id=explore-the-application-1>Explore the Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We&rsquo;ve captured several custom tags with our application, which we&rsquo;ll explore shortly. Before we do that, let&rsquo;s
introduce the concept of tags and why they&rsquo;re important.</p><h3 id=what-are-tags>What are tags?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Tags are key-value pairs that provide additional metadata about spans in a trace, allowing you to enrich the context of the spans you send to <strong>Splunk APM</strong>.</p><p>For example, a payment processing application would find it helpful to track:</p><ul><li>The payment type used (i.e. credit card, gift card, etc.)</li><li>The ID of the customer that requested the payment</li></ul><p>This way, if errors or performance issues occur while processing the payment, we have the context we need for troubleshooting.</p><p>While some tags can be added with the OpenTelemetry collector, the ones we‚Äôll be working with in this workshop are more granular, and are added by application developers using the OpenTelemetry SDK.</p><h3 id=why-are-tags-so-important>Why are tags so important?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Tags are essential for an application to be truly observable. They add the context to the traces to help us
understand why some users get a great experience and others don&rsquo;t. And powerful features in
<strong>Splunk Observability Cloud</strong> utilize tags to help you jump quickly to root cause.</p><blockquote><p>A note about terminology before we proceed. While we discuss <strong>tags</strong> in this workshop,
and this is the terminology we use in <strong>Splunk Observability Cloud</strong>, OpenTelemetry
uses the term <strong>attributes</strong> instead. So when you see tags mentioned throughout this
workshop, you can treat them as synonymous with attributes.</p></blockquote><h3 id=how-are-tags-captured>How are tags captured?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To capture tags in a Python application, we start by importing the trace module by adding an
import statement to the top of the <code>/home/splunk/workshop/tagging/creditcheckservice-py-with-tags/main.py</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>waitress</span> <span class=kn>import</span> <span class=n>serve</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>opentelemetry</span> <span class=kn>import</span> <span class=n>trace</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl><span class=o>...</span></span></span></code></pre></div><p>Next, we need to get a reference to the current span so we can add an attribute (aka tag) to it:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>credit_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span> <span class=o>=</span> <span class=n>trace</span><span class=o>.</span><span class=n>get_current_span</span><span class=p>()</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>    <span class=n>customerNum</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;customernum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;customer.num&#34;</span><span class=p>,</span> <span class=n>customerNum</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl><span class=o>...</span></span></span></code></pre></div><p>That was pretty easy, right? We&rsquo;ve captured a total of four tags in the credit check service, with the final result looking like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>credit_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span> <span class=o>=</span> <span class=n>trace</span><span class=o>.</span><span class=n>get_current_span</span><span class=p>()</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>    <span class=n>customerNum</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;customernum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;customer.num&#34;</span><span class=p>,</span> <span class=n>customerNum</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Get Credit Score</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span> <span class=o>+</span> <span class=n>customerNum</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScore</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>creditScoreReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.score&#34;</span><span class=p>,</span> <span class=n>creditScore</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreCategory</span> <span class=o>=</span> <span class=n>getCreditCategoryFromScore</span><span class=p>(</span><span class=n>creditScore</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.score.category&#34;</span><span class=p>,</span> <span class=n>creditScoreCategory</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Run Credit Check</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/runCreditCheck?customernum=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>customerNum</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;&amp;score=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditScore</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>checkResult</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditCheckReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.check.result&#34;</span><span class=p>,</span> <span class=n>checkResult</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>checkResult</span></span></span></code></pre></div><h2 id=review-trace-data>Review Trace Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before looking at the trace data in Splunk Observability Cloud,
let&rsquo;s review what the debug exporter has captured by tailing the agent collector logs with the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>component</span><span class=o>=</span>otel-collector-agent -f</span></span></code></pre></div><p>Hint: use <code>CTRL+C</code> to stop tailing the logs.</p><p>You should see traces written to the agent collector logs such as the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>InstrumentationScope opentelemetry.instrumentation.flask 0.44b0
Span #0
    Trace ID       : 9f9fc109903f25ba57bea9b075aa4833
    Parent ID      : 
    ID             : 6d71519f454f6059
    Name           : /check
    Kind           : Server
    Start time     : 2024-12-23 19:55:25.815891965 +0000 UTC
    End time       : 2024-12-23 19:55:27.824664949 +0000 UTC
    Status code    : Unset
    Status message : 
Attributes:
     -&gt; http.method: Str(GET)
     -&gt; http.server_name: Str(waitress.invalid)
     -&gt; http.scheme: Str(http)
     -&gt; net.host.port: Int(8888)
     -&gt; http.host: Str(creditcheckservice:8888)
     -&gt; http.target: Str(/check?customernum=30134241)
     -&gt; net.peer.ip: Str(10.42.0.19)
     -&gt; http.user_agent: Str(python-requests/2.31.0)
     -&gt; net.peer.port: Str(47248)
     -&gt; http.flavor: Str(1.1)
     -&gt; http.route: Str(/check)
     -&gt; customer.num: Str(30134241)
     -&gt; credit.score: Int(443)
     -&gt; credit.score.category: Str(poor)
     -&gt; credit.check.result: Str(OK)
     -&gt; http.status_code: Int(200)</code></pre></div><p>Notice how the trace includes the tags (aka attributes) that we captured in the code, such as
<code>credit.score</code> and <code>credit.score.category</code>. We&rsquo;ll use these in the next section, when
we analyze the traces in Splunk Observability Cloud to find the root cause of a performance issue.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-a-troubleshooting-metricset>Create a Troubleshooting MetricSet</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=index-tags>Index Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To use advanced features in <strong>Splunk Observability Cloud</strong> such as <strong>Tag Spotlight</strong>, we&rsquo;ll need to first index one or more tags.</p><p>To do this, navigate to <strong>Settings</strong> -> <strong>MetricSets</strong> and ensure the <strong>APM</strong> tab is selected. Then click the <strong>+ Add Custom MetricSet</strong> button.</p><p>Let&rsquo;s index the <code>credit.score.category</code> tag by entering the following details (<strong>note</strong>: since everyone in the workshop is using the same organization, the instructor will do this step on your behalf):</p><p><a href=#R-image-975b3cba44f1d6fc92b4d1887c857aa0 class=lightbox-link><img alt="Create Troubleshooting MetricSet" class="lazy lightbox figure-image" loading=lazy src=../images/create_troubleshooting_metric_set.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-975b3cba44f1d6fc92b4d1887c857aa0><img alt="Create Troubleshooting MetricSet" class="lazy lightbox lightbox-image" loading=lazy src=../images/create_troubleshooting_metric_set.png></a></p><p>Click <strong>Start Analysis</strong> to proceed.</p><p>The tag will appear in the list of <strong>Pending MetricSets</strong> while analysis is performed.</p><p><a href=#R-image-2e36e96dcd9c1d87c388948370c01d7a class=lightbox-link><img alt="Pending MetricSets" class="lazy lightbox figure-image" loading=lazy src=../images/pending_metric_set.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e36e96dcd9c1d87c388948370c01d7a><img alt="Pending MetricSets" class="lazy lightbox lightbox-image" loading=lazy src=../images/pending_metric_set.png></a></p><p>Once analysis is complete, click on the checkmark in the <strong>Actions</strong> column.</p><h2 id=troubleshooting-vs-monitoring-metricsets>Troubleshooting vs. Monitoring MetricSets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You may have noticed that, to index this tag, we created something called a <strong>Troubleshooting MetricSet</strong>. It&rsquo;s named this way because a Troubleshooting MetricSet, or TMS, allows us to troubleshoot issues with this tag using features such as <strong>Tag Spotlight</strong>.</p><p>You may have also noticed that there&rsquo;s another option which we didn&rsquo;t choose called a <strong>Monitoring MetricSet</strong> (or MMS). Monitoring MetricSets go beyond troubleshooting and allow us to use tags for alerting and dashboards. While we won&rsquo;t be
exploring this capability as part of this workshop, it&rsquo;s a powerful feature that I encourage you to explore on your own.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 10, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=troubleshoot-a-problem-using-tag-spotlight>Troubleshoot a Problem Using Tag Spotlight</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=explore-apm-data>Explore APM Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s explore some of the APM data we&rsquo;ve captured to see how our application is performing.</p><p>Navigate to <strong>APM</strong>, then use the <strong>Environment</strong> dropdown to select your environment (i.e. <code>tagging-workshop-instancename</code>).</p><p>You should see <code>creditprocessorservice</code> and <code>creditcheckservice</code> displayed in the list of services:</p><p><a href=#R-image-c422c2166874ff0c2c6dfb848a17e074 class=lightbox-link><img alt="APM Overview" class="lazy lightbox figure-image" loading=lazy src=../images/apm_overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c422c2166874ff0c2c6dfb848a17e074><img alt="APM Overview" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm_overview.png></a></p><p>Click on <strong>Service Map</strong> on the right-hand side to view the service map. We can see that the <code>creditcheckservice</code> makes calls to the <code>creditprocessorservice</code>, with an average response time of at least 3 seconds:</p><p><a href=#R-image-1b32fb5654c479a0f0c2014d194396c6 class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/service_map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1b32fb5654c479a0f0c2014d194396c6><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map.png></a></p><p>Next, click on <strong>Traces</strong> on the right-hand side to see the traces captured for this application. You&rsquo;ll see that some traces run relatively fast (i.e. just a few milliseconds), whereas others take a few seconds.</p><p><a href=#R-image-a16e427c5ac8c07a200e3d49bf394a18 class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/traces.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a16e427c5ac8c07a200e3d49bf394a18><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/traces.png></a></p><p>Click on one of the longer running traces. In this example, the trace took five seconds, and we can see that most of the time was spent calling the <code>/runCreditCheck</code> operation, which is part of the <code>creditprocessorservice</code>:</p><p><a href=#R-image-52f43a078451f93b0b0a221959cc00c3 class=lightbox-link><img alt="Long Running Trace" class="lazy lightbox figure-image" loading=lazy src=../images/long_running_trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-52f43a078451f93b0b0a221959cc00c3><img alt="Long Running Trace" class="lazy lightbox lightbox-image" loading=lazy src=../images/long_running_trace.png></a></p><p>But why are some traces slow, and others are relatively quick?</p><p>Close the trace and return to the Trace Analyzer. If you toggle <strong>Errors only</strong> to <code>on</code>, you&rsquo;ll also notice that some traces have errors:</p><p><a href=#R-image-0eb0be1666b5bac107be904e89846ef3 class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/traces_with_errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0eb0be1666b5bac107be904e89846ef3><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/traces_with_errors.png></a></p><p>If we look at one of the error traces, we can see that the error occurs when the <code>creditprocessorservice</code> attempts to call another service named <code>otherservice</code>. But why do some requests result in a call to <code>otherservice</code>, and others don&rsquo;t?</p><p><a href=#R-image-109932923a54eff86e539c0288e71705 class=lightbox-link><img alt="Trace with Errors" class="lazy lightbox figure-image" loading=lazy src=../images/error_trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-109932923a54eff86e539c0288e71705><img alt="Trace with Errors" class="lazy lightbox lightbox-image" loading=lazy src=../images/error_trace.png></a></p><p>To determine why some requests perform slowly, and why some requests result in errors, we could look through the
traces one by one and try to find a pattern behind the issues.</p><p><strong>Splunk Observability Cloud</strong> provides a better way to find the root cause of an issue. We&rsquo;ll explore this next.</p><h2 id=using-tag-spotlight>Using Tag Spotlight<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Since we indexed the <code>credit.score.category</code> tag, we can use it with <strong>Tag Spotlight</strong> to troubleshoot our application.</p><p>Navigate to <strong>APM</strong> then click on <strong>Tag Spotlight</strong> on the right-hand side. Ensure the <code>creditcheckservice</code> service is selected from the <strong>Service</strong> drop-down (if not already selected).</p><p>With <strong>Tag Spotlight</strong>, we can see 100% of credit score requests that result in a score of <code>impossible</code> have an error, yet requests for all other credit score types have no errors at all!</p><p><strong><a href=#R-image-7d09c0b582cf0f0f786ece1c334783ed class=lightbox-link><img alt="Tag Spotlight with Errors" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7d09c0b582cf0f0f786ece1c334783ed><img alt="Tag Spotlight with Errors" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_errors.png></a></strong></p><p>This illustrates the power of <strong>Tag Spotlight</strong>! Finding this pattern would be time-consuming without it, as we&rsquo;d have to manually look through hundreds of traces to identify the pattern (and even then, there&rsquo;s no guarantee we&rsquo;d find it).</p><p>We&rsquo;ve looked at errors, but what about latency? Let&rsquo;s click on the <strong>Requests & errors distribution</strong> dropdown and change it to <strong>Latency distribution</strong>.</p><blockquote><p>IMPORTANT: Click on the settings icon beside <strong>Cards display</strong> to add the P50 and P99 metrics.</p></blockquote><p>Here, we can see that the requests with a <code>poor</code> credit score request are running slowly, with P50, P90, and P99 times of around 3 seconds, which is too long for our users to wait, and much slower than other requests.</p><p>We can also see that some requests with an <code>exceptional</code> credit score request are running slowly, with P99 times of around 5 seconds, though the P50 response time is relatively quick.</p><p><strong><a href=#R-image-697b95864da23b21d97d16071201b97f class=lightbox-link><img alt="Tag Spotlight with Latency" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_latency.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-697b95864da23b21d97d16071201b97f><img alt="Tag Spotlight with Latency" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_latency.png></a></strong></p><h2 id=using-dynamic-service-maps>Using Dynamic Service Maps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we know the credit score category associated with the request can impact performance and error rates, let&rsquo;s explore another feature that utilizes indexed tags: <strong>Dynamic Service Maps</strong>.</p><p>With Dynamic Service Maps, we can breakdown a particular service by a tag. For example, let&rsquo;s click on <strong>APM</strong>, then click <strong>Service Map</strong> to view the service map.</p><p>Click on <code>creditcheckservice</code>. Then, on the right-hand menu, click on the drop-down that says <strong>Breakdown</strong>, and select the <code>credit.score.category</code> tag.</p><p>At this point, the service map is updated dynamically, and we can see the performance of requests hitting <code>creditcheckservice</code> broken down by the credit score category:</p><p><strong><a href=#R-image-c319d98845326cd4e6d17a6090911dd0 class=lightbox-link><img alt="Service Map Breakdown" class="lazy lightbox figure-image" loading=lazy src=../images/service_map_breakdown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c319d98845326cd4e6d17a6090911dd0><img alt="Service Map Breakdown" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map_breakdown.png></a></strong></p><p>This view makes it clear that performance for <code>good</code> and <code>fair</code> credit scores is excellent, while <code>poor</code> and <code>exceptional</code> scores are much slower, and <code>impossible</code> scores result in errors.</p><h2 id=our-findings>Our Findings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Tag Spotlight</strong> has uncovered several interesting patterns for the engineers that own this service to explore further:</p><ul><li>Why are all the <code>impossible</code> credit score requests resulting in error?</li><li>Why are all the <code>poor</code> credit score requests running slowly?</li><li>Why do some of the <code>exceptional</code> requests run slowly?</li></ul><p>As an SRE, passing this context to the engineering team would be extremely helpful for their investigation, as it would allow them to track down the issue much more quickly than if we simply told them that the service was &ldquo;sometimes slow&rdquo;.</p><p>If you&rsquo;re curious, have a look at the source code for the <code>creditprocessorservice</code>. You&rsquo;ll see that requests with impossible, poor, and exceptional credit scores are handled differently, thus resulting in the differences in error rates and latency that we uncovered.</p><p>The behavior we saw with our application is typical for modern cloud-native applications, where different inputs passed to a service lead to different code paths, some of which result in slower performance or errors. For example, in a real credit check service, requests resulting in low credit scores may be sent to another downstream service to further evaluate risk, and may perform more slowly than requests resulting in higher scores, or encounter higher error rates.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 5, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>This workshop provided hands-on experience with the following concepts:</p><ul><li>How to deploy the <strong>Splunk Distribution of the OpenTelemetry Collector</strong> using Helm.</li><li>How instrument an application with <a href=https://opentelemetry.io rel=external><strong>OpenTelemetry</strong></a>.</li><li>How to capture tags of interest from your application using an OpenTelemetry SDK.</li><li>How to index tags in <strong>Splunk Observability Cloud</strong> using <strong>Troubleshooting MetricSets</strong>.</li><li>How to utilize tags in <strong>Splunk Observability Cloud</strong> to find ‚Äúunknown unknowns‚Äù using the <strong>Tag Spotlight</strong> and <strong>Dynamic Service Map</strong> features.</li></ul><p>Collecting tags aligned with the best practices shared in this workshop will let you get even more value from the data you‚Äôre sending to <strong>Splunk Observability Cloud</strong>. Now that you‚Äôve completed this workshop, you have the knowledge you need to start collecting tags from your own applications!</p><p>To get started with capturing tags today, check out <a href=https://docs.splunk.com/observability/en/apm/span-tags/add-context-trace-span.html#instrument-your-application-code-to-add-tags-to-spans rel=external>how to add tags in various supported languages</a>, and then <a href=https://docs.splunk.com/observability/en/apm/span-tags/index-span-tags.html#apm-index-span-tags rel=external>how to use them to create Troubleshooting MetricSets</a> so they can be analyzed in Tag Spotlight. For more help, feel free to <a href=https://www.splunk.com/en_us/about-splunk/contact-us.html rel=external>ask a Splunk Expert</a>.</p><p>And to see how other languages and environments are instrumented with OpenTelemetry,
explore the <a href=https://github.com/signalfx/splunk-opentelemetry-examples rel=external>Splunk OpenTelemetry Examples GitHub repository</a>.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip for Workshop Facilitator(s)</summary><div class=box-content><p>Once the workshop is complete, remember to delete the APM MetricSet you created earlier for the <code>credit.score.category</code> tag.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 23, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=ingest-processor-for-observability-cloud>Ingest Processor for Observability Cloud</h1><span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>As infrastructure and application environments become exceedingly complex, the volume of data they generate continues to grow significantly. This increase in data volume and variety makes it challenging to gain actionable insights and can impact problem identification and troubleshooting efficiencies. Additionally, the cost of storing and accessing this data can skyrocket. Many data sources, particularly logs and events, provide critical visibility into system operations. However, in most cases, only a few details from these extensive logs are actually needed for effective monitoring and alerting.</p><p><strong>Common Challenges:</strong></p><ul><li>Increasing complexity of infrastructure and application environments.</li><li>Significant growth in data volume generated by these environments.</li><li>Challenges in gaining actionable insights from large volumes of data.</li><li>High costs associated with storing and accessing extensive data.</li><li>Logs and events provide critical visibility but often contain only a few essential details.</li></ul><p>To address these challenges, Splunk Ingest Processor provides a powerful new feature: the ability to convert log events into metrics. Metrics are more efficient to store and process, allowing for faster identification of issues, thereby reducing Mean Time to Detection (MTTD). When retaining the original log or event is necessary, they can be stored in cheaper storage solutions such as S3, reducing the overall cost of data ingestion and computation required for searching them.</p><p><strong>Solution:</strong></p><ul><li>Convert log events into metrics where possible.</li><li>Retain original logs or events in cheaper storage solutions if needed.</li><li>Utilize federated search for accessing and analyzing retained logs.</li></ul><p><strong>Outcomes:</strong></p><ul><li>Metrics are more efficient to store and process.</li><li>Faster identification of problems, reducing Mean Time to Detection (MTTD).</li><li>Lower overall data ingestion and computation costs.</li><li>Enhanced monitoring efficiency and resource optimization.</li><li>Maintain high visibility into system operations with reduced operational costs.</li></ul><p>In this workshop you&rsquo;ll have the opportunity to get hands on with Ingest Processor and Splunk Observability Cloud to see how it can be used to address the challenges outlined above.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Ingest Processor for Observability Cloud</h1><article class=default><header class=headline></header><h1 id=getting-started>Getting Started</h1><p>During this <em><strong>technical</strong></em> Ingest Processor<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for Splunk Observability Cloud workshop you will have the opportunity to get hands-on with Ingest Processor in Splunk Enterprise Cloud.</p><p>To simplify the workshop modules, a pre-configured Splunk Enterprise Cloud instance is provided.</p><p>The instance is pre-configured with all the requirements for creating an Ingest Processor pipeline.</p><p>This workshop will introduce you to the benefits of using Ingest Processor to convert robust logs to metrics and send those metrics to Splunk Observability Cloud. By the end of these technical workshops, you will have a good understanding of some key features and capabilities of Ingest Processor in Splunk Enterprise Cloud and the value of using Splunk Observability Cloud as a destination within an Ingest Processor pipeline.</p><p>Here are the instructions on how to access your pre-configured <a href=/observability-workshop/en/ninja-workshops/11-ingest-processor-for-observability-cloud/1-getting-started/1-access-cloud-instances/index.html>Splunk Enterprise Cloud</a> instance.</p><p><a href=#R-image-e8fd3b96b33fe500f1e7b03ef07726ee class=lightbox-link><img alt="Splunk Ingest Processor Architecture" class="lazy lightbox figure-image" loading=lazy src=../images/IngestProcessor-architecture-diagram_release_updated2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e8fd3b96b33fe500f1e7b03ef07726ee><img alt="Splunk Ingest Processor Architecture" class="lazy lightbox lightbox-image" loading=lazy src=../images/IngestProcessor-architecture-diagram_release_updated2.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://docs.splunk.com/Documentation/SplunkCloud/9.3.2408/IngestProcessor/AboutIngestProcessorSolution rel=external><strong>Ingest Processor</strong></a> is a data processing capability that works within your Splunk Cloud Platform deployment. Use the Ingest Processor to configure data flows, control data format, apply transformation rules prior to indexing, and route to destinations.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=how-to-connect-to-your-workshop-environment>How to connect to your workshop environment</h1><ol><li>How to retrieve the URL for your Splunk Enterprise Cloud instances.</li><li>How to access the Splunk Observability Cloud workshop organization.</li></ol><hr><h2 id=1-splunk-cloud-instances>1. Splunk Cloud Instances<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There are three instances that will be used throughout this workshop which have already been provisioned for you:</p><ol><li>Splunk Enterprise Cloud</li><li>Splunk Ingest Processor (SCS Tenant)</li><li>Splunk Observability Cloud</li></ol><p>The Splunk Enterprise Cloud and Ingest Processor instances are hosted in <a href=https://show.splunk.com rel=external>Splunk Show</a>. If you were invited to the workshop, you should have received an email with an invite to the event in <a href=https://show.splunk.com rel=external>Splunk Show</a> or a link to the event will have been provided at the beginning of the workshop.</p><p>Login to Splunk Show using your <a href=https://login.splunk.com/ rel=external>splunk.com</a> credentials. You should see the event for this workshop. Open the event to see the instance details for your Splunk Cloud and Ingest Processor instances.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p>Take note of the <code>User Id</code> provided in your Splunk Show event details. This number will be included in the <code>sourcetype</code> that you will use for searching and filtering the Kubernetes data. Because this is a shared environment only use the participant number provided so that other participants data is not effected.</p></div></details><p><a href=#R-image-4dd7f8e8b65c2e04f2e2d4255f871ab6 class=lightbox-link><img alt="Splunk Show Instance Information" class="lazy lightbox figure-image" loading=lazy src=../../images/show_instance_information.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4dd7f8e8b65c2e04f2e2d4255f871ab6><img alt="Splunk Show Instance Information" class="lazy lightbox lightbox-image" loading=lazy src=../../images/show_instance_information.png></a></p><h2 id=2-splunk-observability-cloud-instances>2. Splunk Observability Cloud Instances<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You should have also received an email to access the Splunk Observability Cloud workshop organization (You may need to check your spam folder). If you have not received an email, let your workshop instructor know. To access the environment click the <strong>Join Now</strong> button.</p><p><a href=#R-image-52a97efc7df3dd1a6264b5ac269b97c6 class=lightbox-link><img alt="Splunk Observability Cloud Invitation" class="lazy lightbox figure-image" loading=lazy src=../../images/workshop_invitation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-52a97efc7df3dd1a6264b5ac269b97c6><img alt="Splunk Observability Cloud Invitation" class="lazy lightbox lightbox-image" loading=lazy src=../../images/workshop_invitation.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>If you access the event before the workshop start time, your instances may not be available yet. Don&rsquo;t worry, they will be provided once the workshop begins.</p></div></details><p>Additionally, you have been invited to a Splunk Observability Cloud workshop organization. The invitation includes a link to the environment. If you don&rsquo;t have a Splunk Observability Cloud account already, you will be asked to create one. If you already have one, you can log in to the instance and, you will see the workshop organization in your available organizations.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=how-ingest-processor-works>How Ingest Processor Works</h1><h6 id=system-architecture>System architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><p>The primary components of the Ingest Processor service include the Ingest Processor service and SPL2 pipelines that support data processing. The following diagram provides an overview of how the components of the Ingest Processor solution work together:</p><p><a href=#R-image-afe00fe578f3b9ae499f4f733d85dbac class=lightbox-link><img alt="Splunk Ingest Processor Architecture" class="lazy lightbox figure-image" loading=lazy src=../images/IngestProcessor-architecture-diagram_release_updated2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-afe00fe578f3b9ae499f4f733d85dbac><img alt="Splunk Ingest Processor Architecture" class="lazy lightbox lightbox-image" loading=lazy src=../images/IngestProcessor-architecture-diagram_release_updated2.png></a></p><h6 id=ingest-processor-service>Ingest Processor service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><p>The Ingest Processor service is a cloud service hosted by Splunk. It is part of the data management experience, which is a set of services that fulfill a variety of data ingest and processing use cases.</p><p>You can use the Ingest Processor service to do the following:</p><ul><li>Create and apply SPL2 pipelines that determine how each Ingest Processor processes and routes the data that it receives.</li><li>Define source types to identify the kind of data that you want to process and determine how the Ingest Processor breaks and merges that data into distinct events.</li><li>Create connections to the destinations that you want your Ingest Processor to send processed data to.</li></ul><h6 id=pipelines>Pipelines<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><p>A pipeline is a set of data processing instructions written in SPL2. When you create a pipeline, you write a specialized SPL2 statement that specifies which data to process, how to process it, and where to send the results. When you apply a pipeline, the Ingest Processor uses those instructions to process all the data that it receives from data sources such as Splunk forwarders, HTTP clients, and logging agents.</p><p>Each pipeline selects and works with a subset of all the data that the Ingest Processor receives. For example, you can create a pipeline that selects events with the source type <code>cisco_syslog</code> from the incoming data, and then sends them to a specified index in Splunk Cloud Platform. This subset of selected data is called a partition. For more information, see <a href=http://docs.splunk.com/Documentation/SplunkCloud/latest/IngestProcessor/Architecture#Partitions rel=external>Partitions</a>.</p><p>The Ingest Processor solution supports only the commands and functions that are part of the <code>IngestProcessor</code> profile. For information about the specific SPL2 commands and functions that you can use to write pipelines for Ingest Processor, see <a href=http://docs.splunk.com/Documentation/SplunkCloud/latest/IngestProcessor/PipelinesOverview rel=external>Ingest Processor pipeline syntax</a>. For a summary of how the <code>IngestProcessor</code> profile supports different commands and functions compared to other SPL2 profiles, see the following pages in the <em>SPL2 Search Reference</em>:</p><ul><li><a href=http://docs.splunk.com/Documentation/SCS/current/SearchReference/CompatibilityQuickReferenceforSPL2commands rel=external>Compatibility Quick Reference for SPL2 commands</a></li><li><a href=http://docs.splunk.com/Documentation/SCS/current/SearchReference/CompatibilityQuickReferenceforSPL2evaluationfunctions rel=external>Compatibility Quick Reference for SPL2 evaluation functions</a></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-an-ingest-pipeline>Create an Ingest Pipeline</h1><h2 id=scenario-overview>Scenario Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this scenario you will be playing the role of a Splunk Admin responsible for managing your organizations Splunk Enterprise Cloud environment. You recently worked with an internal application team on instrumenting their Kubernetes environment with Splunk APM and Infrastructure monitoring using OpenTelemetry to monitor their critical microservice applications.</p><p>The logs from the Kubernetes environment are also being collected and sent to Splunk Enter Prize Cloud. These logs include:</p><ul><li>Pod logs (application logs)</li><li>Kubernetes Events</li><li>Kubernetes Cluster Logs<ul><li>Control Plane Node logs</li><li>Worker Node logs</li><li>Audit Logs</li></ul></li></ul><p>As a Splunk Admin you want to ensure that the data you are collecting is optimized, so it can be analyzed in the most efficient way possible. Taking this approach accelerates troubleshooting and ensures efficient license utilization.</p><p>One way to accomplish this is by using Ingest Processor to convert robust logs to metrics and use Splunk Observability Cloud as the destination for those metrics. Not only does this make collecting the logs more efficient, you have the added ability of using the newly created metrics in Splunk Observability which can then be correlated with Splunk APM data (traces) and Splunk Infrastructure Monitoring data providing additional troubleshooting context. Because Splunk Observability Cloud uses a streaming metrics pipeline, the metrics can be alerted on in real-time speeding up problem identification. Additionally, you can use the Metrics Pipeline Management functionality to further optimize the data by aggregating, dropping unnecessary fields, and archiving less important or unneeded metrics.</p><p>In the next step you&rsquo;ll create an Ingest Processor Pipeline which will convert Kubernetes Audit Logs to metrics that will be sent to Observability Cloud.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Create an Ingest Pipeline</h1><article class=default><header class=headline></header><h1 id=login-to-splunk-cloud>Login to Splunk Cloud</h1><p>In this section you will create an Ingest Pipeline which will convert Kubernetes Audit Logs to metrics which are sent to the Splunk Observability Cloud workshop organization. Before getting started you will need to access the Splunk Cloud and Ingest Processor SCS Tenant environments provided in the Splunk Show event details.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Pre-requisite: Login to Splunk Enterprise Cloud</summary><div class=box-content><p><strong>1.</strong> Open the <strong>Ingest Processor Cloud Stack</strong> URL provided in the Splunk Show event details.</p><p><a href=#R-image-9eb621a8b24972c69f2b2d6d4c67dd5d class=lightbox-link><img alt="Splunk Cloud Instance Details" class="lazy lightbox figure-image" loading=lazy src=../../images/show_instances_sec.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9eb621a8b24972c69f2b2d6d4c67dd5d><img alt="Splunk Cloud Instance Details" class="lazy lightbox lightbox-image" loading=lazy src=../../images/show_instances_sec.png></a></p><p><strong>2.</strong> In the Connection info click on the <strong>Stack URL</strong> link to open your Splunk Cloud stack.</p><p><a href=#R-image-3500b24deba330775b8778a96f2b7d26 class=lightbox-link><img alt="Splunk Cloud Connection Details" class="lazy lightbox figure-image" loading=lazy src=../../images/sec_connection_details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3500b24deba330775b8778a96f2b7d26><img alt="Splunk Cloud Connection Details" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sec_connection_details.png></a></p><p><strong>3.</strong> Use the <code>admin</code> username and password to login to Splunk Cloud.</p><p><a href=#R-image-2ad7aa902a213a939b50e4e707a57093 class=lightbox-link><img alt="Splunk Cloud Login" class="lazy lightbox figure-image" loading=lazy src=../../images/sec_login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2ad7aa902a213a939b50e4e707a57093><img alt="Splunk Cloud Login" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sec_login.png></a></p><p><strong>4.</strong> After logging in, if prompted, accept the Terms of Service and click <strong>OK</strong></p><p><a href=#R-image-fd3c8fb4170f8d790561d7661ab8ad97 class=lightbox-link><img alt="Splunk Cloud Login" class="lazy lightbox figure-image" loading=lazy src=../../images/sec_terms.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fd3c8fb4170f8d790561d7661ab8ad97><img alt="Splunk Cloud Login" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sec_terms.png></a></p><p><strong>5.</strong> Navigate back to the Splunk Show event details and select the Ingest Processor SCS Tenant</p><p><a href=#R-image-5783d5b7aefc8657e77839eb1b7404ce class=lightbox-link><img alt="Ingest Processor Connection Details" class="lazy lightbox figure-image" loading=lazy src=../../images/show_instances_scs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5783d5b7aefc8657e77839eb1b7404ce><img alt="Ingest Processor Connection Details" class="lazy lightbox lightbox-image" loading=lazy src=../../images/show_instances_scs.png></a></p><p><strong>6.</strong> Click on the <strong>Console URL</strong> to access the <strong>Ingest Processor SCS Tenant</strong></p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p><strong>Single Sign-On (SSO)</strong>
Single Sign-on (SSO) is configured between the Splunk Data Management service (‚ÄòSCS Tenant‚Äô) and Splunk Cloud environments, so if you already logged in to your Splunk Cloud stack you should automatically be logged in to Splunk Data Management service. If you are prompted for credentials, use the credentials provided in the Splunk Cloud Stack on Splunk Show event (listed under the ‚ÄòSplunk Cloud Stack‚Äô section.)</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=review-kubernetes-audit-logs>Review Kubernetes Audit Logs</h1><p>In this section you will review the Kubernetes Audit Logs that are being collected. You can see that the events are quite robust, which can make charting them inefficient. To address this, you will create an Ingest Pipeline in Ingest Processor that will convert these events to metrics that will be sent to Splunk Observability Cloud. This will allow you to chart the events much more efficiently and take advantage of the real-time streaming metrics in Splunk Observability Cloud.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create Ingest Pipeline</summary><div class=box-content><p><strong>1.</strong> Open your <strong>Ingest Processor Cloud Stack</strong> instance using the URL provided in the Splunk Show workshop details.</p><p><strong>2.</strong> Navigate to <strong>Apps</strong> ‚Üí <strong>Search and Reporting</strong></p><p><a href=#R-image-94bb9d25113caa2ea1a75d7b516eb9db class=lightbox-link><img alt="Search and Reporting" class="lazy lightbox figure-image" loading=lazy src="../../images/search_and_reporting.png?width=20vw" style=height:auto;width:20vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-94bb9d25113caa2ea1a75d7b516eb9db><img alt="Search and Reporting" class="lazy lightbox lightbox-image" loading=lazy src="../../images/search_and_reporting.png?width=20vw"></a></p><p><strong>3.</strong> In the search bar, enter the following SPL search string.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p>Make sure to replace <code>USER_ID</code> with the User ID provided in your Splunk Show instance information.</p></div></details><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1>### Replace USER_ID with the User ID provided in your Splunk Show instance information</span>
</span></span><span class=line><span class=cl><span class=nv>index</span><span class=o>=</span>main <span class=nv>sourcetype</span><span class=o>=</span><span class=s2>&#34;kube:apiserver:audit:USER_ID&#34;</span></span></span></code></pre></div><p><strong>4.</strong> Press <strong>Enter</strong> or click the green magnifying glass to run the search.</p><p><a href=#R-image-d91cd6450246e4ffc80313cbc646fcf8 class=lightbox-link><img alt="Kubernetes Audit Log" class="lazy lightbox figure-image" loading=lazy src=../../images/k8s_audit_log.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d91cd6450246e4ffc80313cbc646fcf8><img alt="Kubernetes Audit Log" class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s_audit_log.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>You should now see the Kubernetes Audit Logs for your environment. Notice that the events are fairly robust. Explore the available fields and start to think about what information would be good candidates for metrics and dimensions. Ask yourself: What fields would I like to chart, and how would I like to be able to filter, group, or split those fields?</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-an-ingest-pipeline>Create an Ingest Pipeline</h1><p>In this section you will create an Ingest Pipeline which will convert Kubernetes Audit Logs to metrics which are sent to the Splunk Observability Cloud workshop organization.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create Ingest Pipeline</summary><div class=box-content><p><strong>1.</strong> Open the <strong>Ingest Processor SCS Tenant</strong> using the connection details provided in the Splunk Show event.</p><p><a href=#R-image-597562b1f3e8069b3f4f7fe2835e1980 class=lightbox-link><img alt="Launch Splunk Cloud Platform" class="lazy lightbox figure-image" loading=lazy src="../../images/data_management_home.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-597562b1f3e8069b3f4f7fe2835e1980><img alt="Launch Splunk Cloud Platform" class="lazy lightbox lightbox-image" loading=lazy src="../../images/data_management_home.png?width=40vw"></a></p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p>When you open the <strong>Ingest Processor SCS Tenant</strong>, if you are taken to a welcome page, click on <strong>Launch</strong> under <strong>Splunk Cloud Platform</strong> to be taken to the Data Management page where you will configure the Ingest Pipeline.</p><p><a href=#R-image-a402ba7c1d29c87b62066ddeab96d1bb class=lightbox-link><img alt="Launch Splunk Cloud Platform" class="lazy lightbox figure-image" loading=lazy src=../../images/launch_scp.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a402ba7c1d29c87b62066ddeab96d1bb><img alt="Launch Splunk Cloud Platform" class="lazy lightbox lightbox-image" loading=lazy src=../../images/launch_scp.png></a></p></div></details><p><strong>2.</strong> From the Splunk Data Management console select <strong>Pipelines</strong> ‚Üí <strong>New pipeline</strong> ‚Üí <strong>Ingest Processor pipeline</strong>.</p><p><a href=#R-image-5e52895eafa91aaf4e10c22c66d97c1d class=lightbox-link><img alt="New Ingest Processor Pipeline" class="lazy lightbox figure-image" loading=lazy src="../../images/new_pipeline.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5e52895eafa91aaf4e10c22c66d97c1d><img alt="New Ingest Processor Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../../images/new_pipeline.png?width=40vw"></a></p><p><strong>3.</strong> In the <strong>Get started</strong> step of the Ingest Processor configuration page select <strong>Blank Pipeline</strong> and click <strong>Next</strong>.</p><p><a href=#R-image-ec8e9efd1513b3842f022810ed179c1a class=lightbox-link><img alt="Blank Ingest Processor Pipeline" class="lazy lightbox figure-image" loading=lazy src="../../images/blank_pipeline.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec8e9efd1513b3842f022810ed179c1a><img alt="Blank Ingest Processor Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../../images/blank_pipeline.png?width=40vw"></a></p><p><strong>4.</strong> In the <strong>Define your pipeline‚Äôs partition</strong> step of the Ingest Processor configuration page select <strong>Partition by sourcetype</strong>. Select the <strong>= equals</strong> Operator and enter <code>kube:apiserver:audit:USER_ID</code> (Be sure to replace USER_ID with the User ID you were assigned) for the value. Click <strong>Apply</strong>.</p><p><a href=#R-image-9c782ffc98c729d23492a37de0082646 class=lightbox-link><img alt="Add Partition" class="lazy lightbox figure-image" loading=lazy src="../../images/add_partition.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c782ffc98c729d23492a37de0082646><img alt="Add Partition" class="lazy lightbox lightbox-image" loading=lazy src="../../images/add_partition.png?width=40vw"></a></p><p><strong>5.</strong> Click <strong>Next</strong></p><p><strong>6.</strong> In the <strong>Add sample data</strong> step of the Ingest Processor configuration page select <strong>Capture new snapshot</strong>. Enter <code>k8s_audit_USER_ID</code> (Be sure to replace USER_ID with the User ID you were assigned) for the Snapshot name and click <strong>Capture</strong>.</p><p><a href=#R-image-10de98812d749b6477323debc63a0d8e class=lightbox-link><img alt="Capture Snapshot" class="lazy lightbox figure-image" loading=lazy src="../../images/capture_snapshot.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-10de98812d749b6477323debc63a0d8e><img alt="Capture Snapshot" class="lazy lightbox lightbox-image" loading=lazy src="../../images/capture_snapshot.png?width=40vw"></a></p><p><strong>7.</strong> Make sure your newly created snapshot (<code>k8s_audit_USER_ID</code>) is selected and then click <strong>Next</strong>.</p><p><a href=#R-image-b17cc2dbdb95e499417fba4e63fd027a class=lightbox-link><img alt="Configure Snapshot Sourcetype" class="lazy lightbox figure-image" loading=lazy src="../../images/capture_snapshot_sourcetype.png?width=20vw" style=height:auto;width:20vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b17cc2dbdb95e499417fba4e63fd027a><img alt="Configure Snapshot Sourcetype" class="lazy lightbox lightbox-image" loading=lazy src="../../images/capture_snapshot_sourcetype.png?width=20vw"></a></p><p><strong>8.</strong> In the <strong>Select a metrics destination</strong> step of the Ingest Processor configuration page select <strong>show_o11y_org</strong>. Click <strong>Next</strong>.</p><p><a href=#R-image-9812164e6fd415bf4768d1114e0248d0 class=lightbox-link><img alt="Metrics Destination" class="lazy lightbox figure-image" loading=lazy src="../../images/metrics_destination.png?width=20vw" style=height:auto;width:20vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9812164e6fd415bf4768d1114e0248d0><img alt="Metrics Destination" class="lazy lightbox lightbox-image" loading=lazy src="../../images/metrics_destination.png?width=20vw"></a></p><p><strong>9.</strong> In the <strong>Select a data destination</strong> step of the Ingest Processor configuration page select <strong>splunk_indexer</strong>. Under <strong>Specify how you want your events to be routed to an index</strong> select <strong>Default</strong>. Click <strong>Done</strong>.</p><p><a href=#R-image-395e5d8d6d3a1a6587281bab8780fa4a class=lightbox-link><img alt="Event Routing" class="lazy lightbox figure-image" loading=lazy src="../../images/event_routing.png?width=20vw" style=height:auto;width:20vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-395e5d8d6d3a1a6587281bab8780fa4a><img alt="Event Routing" class="lazy lightbox lightbox-image" loading=lazy src="../../images/event_routing.png?width=20vw"></a></p><p><strong>10.</strong> In the <strong>Pipeline search field</strong> replace the default search with the following.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p><strong>Replace <code>UNIQUE_FIELD</code> in the metric name with a unique value (such as your initials) which will be used to identify your metric in Observability Cloud.</strong></p></div></details><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/*A valid SPL2 statement for a pipeline must start with &#34;$pipeline&#34;, and include &#34;from $source&#34; and &#34;into $destination&#34;.*/
</span></span><span class=line><span class=cl>/* Import logs_to_metrics */
</span></span><span class=line><span class=cl>import logs_to_metrics from /splunk/ingest/commands
</span></span><span class=line><span class=cl>$pipeline =
</span></span><span class=line><span class=cl>| from $source
</span></span><span class=line><span class=cl>| thru [
</span></span><span class=line><span class=cl>        //define the metric name, type, and value for the Kubernetes Events
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        // REPLACE UNIQUE_FIELD WITH YOUR INITIALS
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        | logs_to_metrics name=&#34;k8s_audit_UNIQUE_FIELD&#34; metrictype=&#34;counter&#34; value=1 time=_time
</span></span><span class=line><span class=cl>        | into $metrics_destination
</span></span><span class=line><span class=cl>    ]
</span></span><span class=line><span class=cl>| eval index = &#34;kube_logs&#34;
</span></span><span class=line><span class=cl>| into $destination;</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
New to SPL2?</summary><div class=box-content><p>Here is a breakdown of what the SPL2 query is doing:</p><ul><li>First, you are importing the built-in <code>logs_to_metrics</code> command which will be used to convert the kubernetes events to metrics.</li><li>You&rsquo;re using the source data, which you can see on the right is any event from the <code>kube:apiserver:audit</code> sourcetype.</li><li>Now, you use the <code>thru</code> command which writes the source dataset to the following command, in this case <code>logs_to_metrics</code>.</li><li>You can see that the metric name (<code>k8s_audit</code>), metric type (<code>counter</code>), value, and timestamp are all provided for the metric. You‚Äôre using a value of 1 for this metric because we want to count the number of times the event occurs.</li><li>Next, you choose the destination for the metric using the into <code>$metrics_destintation</code> command, which is our Splunk Observability Cloud organization</li><li>Finally, you can send the raw log events to another destination, in this case another index, so they are retained if we ever need to access them.</li></ul></div></details><p><strong>11.</strong> In the upper-right corner click the <strong>Preview</strong> button <a href=#R-image-6ccbcf5ed9ebc7f7779b51810dcb6476 class=lightbox-link><img alt="Preview Button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/preview.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ccbcf5ed9ebc7f7779b51810dcb6476><img alt="Preview Button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/preview.png?height=20px&classes=inline"></a> or press CTRL+Enter (CMD+Enter on Mac). From the <strong>Previewing $pipeline</strong> dropdown select <strong>$metrics_destination</strong>. Confirm you are seeing a preview of the metrics that will be sent to Splunk Observability Cloud.</p><p><a href=#R-image-674053dcd5767cbcef3bd6f172f3d7b3 class=lightbox-link><img alt="Preview Pipeline" class="lazy lightbox figure-image" loading=lazy src="../../images/preview_pipeline.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-674053dcd5767cbcef3bd6f172f3d7b3><img alt="Preview Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../../images/preview_pipeline.png?width=40vw"></a></p><p><strong>12.</strong> In the upper-right corner click the <strong>Save pipeline</strong> button <a href=#R-image-eea4494e5393abc32f9462d7c85cf822 class=lightbox-link><img alt="Save Pipeline Button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/save_pipeline_btn.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eea4494e5393abc32f9462d7c85cf822><img alt="Save Pipeline Button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/save_pipeline_btn.png?height=20px&classes=inline"></a>. Enter <code>Kubernetes Audit Logs2Metrics USER_ID</code> for your pipeline name and click <strong>Save</strong>.</p><p><a href=#R-image-8a3225299da322735a83ab251d64b8dd class=lightbox-link><img alt="Save Pipeline Dialog" class="lazy lightbox figure-image" loading=lazy src="../../images/save_pipeline_dialog.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8a3225299da322735a83ab251d64b8dd><img alt="Save Pipeline Dialog" class="lazy lightbox lightbox-image" loading=lazy src="../../images/save_pipeline_dialog.png?width=40vw"></a></p><p><strong>13.</strong> After clicking save you will be asked if you would like to apply the newly created pipeline. Click <strong>Yes, apply</strong>.</p><p><a href=#R-image-54fbbbaad20a3ea249fd2eedd74b85b3 class=lightbox-link><img alt="Apply Pipeline Dialog" class="lazy lightbox figure-image" loading=lazy src="../../images/apply_pipeline_dialog.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-54fbbbaad20a3ea249fd2eedd74b85b3><img alt="Apply Pipeline Dialog" class="lazy lightbox lightbox-image" loading=lazy src="../../images/apply_pipeline_dialog.png?width=40vw"></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>The Ingest Pipeline should now be sending metrics to Splunk Observability Cloud. Keep this tab open as it will be used it again in the next section.</p><p>In the next step you&rsquo;ll confirm the pipeline is working by viewing the metrics you just created in Splunk Observability Cloud.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=confirm-metrics-in-observability-cloud>Confirm Metrics in Observability Cloud</h1><p>Now that an Ingest Pipeline has been configured to convert Kubernetes Audit Logs into metrics and send them to Splunk Observability Cloud the metrics should be available. To confirm the metrics are being collected complete the following steps:</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Confirm Metrics in Splunk Observability Cloud</summary><div class=box-content><p><strong>1.</strong> Login to the <strong>Splunk Observability Cloud</strong> organization you were invited for the workshop. In the upper-right corner, click the <strong>+</strong> Icon ‚Üí <strong>Chart</strong> to create a new chart.</p><p><a href=#R-image-7271e8be5e5918e09f705216ced9fd30 class=lightbox-link><img alt="Create New Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/create_new_chart.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7271e8be5e5918e09f705216ced9fd30><img alt="Create New Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/create_new_chart.png?width=40vw"></a></p><p><strong>2.</strong> In the <strong>Plot Editor</strong> of the newly created chart enter the metric name you used while configuring the <strong>Ingest Pipeline</strong>.</p><p><a href=#R-image-30c8bf622d92e291c8274cbfecb88cfa class=lightbox-link><img alt="Review Metric" class="lazy lightbox figure-image" loading=lazy src="../../images/review_metric.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-30c8bf622d92e291c8274cbfecb88cfa><img alt="Review Metric" class="lazy lightbox lightbox-image" loading=lazy src="../../images/review_metric.png?width=40vw"></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>You should see the metric you created in the Ingest Pipeline. Keep this tab open as it will be used again in the next section.</p><p>In the next step you will update the ingest pipeline to add dimensions to the metric, so you have additional context for alerting and troubleshooting.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=update-pipeline-and-visualize-metrics>Update Pipeline and Visualize Metrics</h1><h2 id=context-matters>Context Matters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the previous section, you reviewed the raw Kubernetes audit logs and created an Ingest Processor Pipeline to convert them to metrics and send those metrics to Splunk Observability Cloud.</p><p>Now that this pipeline is defined we are collecting the new metrics in Splunk Observability Cloud. This is a great start; however, you will only see a single metric showing the total number of Kubernetes audit events for a given time period. It would be much more valuable to add dimensions so that you can split the metric by the event type, user, response status, and so on.</p><p>In this section you will update the Ingest Processor Pipeline to include additional dimensions from the Kubernetes audit logs to the metrics that are being collected. This will allow you to further filter, group, visualize, and alert on specific aspects of the audit logs. After updating the metric, you will create a new dashboard showing the status of the different types of actions associated with the logs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Update Pipeline and Visualize Metrics</h1><article class=default><header class=headline></header><h1 id=update-ingest-pipeline>Update Ingest Pipeline</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Update Ingest Pipeline</summary><div class=box-content><p><strong>1.</strong> Navigate back to the configuration page for the Ingest Pipeline you created in the previous step.</p><p><a href=#R-image-31bca233d6f15b2af6939d9bceddbd13 class=lightbox-link><img alt="Ingest Pipeline" class="lazy lightbox figure-image" loading=lazy src="../../images/ingest_pipeline.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31bca233d6f15b2af6939d9bceddbd13><img alt="Ingest Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../../images/ingest_pipeline.png?width=40vw"></a></p><p><strong>2.</strong> To add dimensions to the metric from the raw Kubernetes audit logs update the SPL2 query you created for the pipeline by replacing the <code>logs_to_metrics</code> portion of the query with the following:</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Note</summary><div class=box-content><p><strong>Be sure to update the metric name field (<code>name="k8s_audit_UNIQUE_FIELD"</code>) to the name you provided in the original pipeline</strong></p></div></details><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>| logs_to_metrics name=&#34;k8s_audit_UNIQUE_FIELD&#34; metrictype=&#34;counter&#34; value=1 time=_time dimensions={&#34;level&#34;: _raw.level, &#34;response_status&#34;: _raw.responseStatus.code, &#34;namespace&#34;: _raw.objectRef.namespace, &#34;resource&#34;: _raw.objectRef.resource, &#34;user&#34;: _raw.user.username, &#34;action&#34;: _raw.verb}</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info"></i>
Note</summary><div class=box-content><p>Using the <code>dimensions</code> field in the SPL2 query you can add dimensions from the raw events to the metrics that will be sent to Splunk Observability Cloud. In this case you are adding the event response status, namespace, Kubernetes resource, user, and verb (action that was performed). These dimensions can be used to create more granular dashboards and alerts.</p><p>You should consider adding any common tags across your services so that you can take advantage of context propagation and related content in Splunk Observability Cloud.</p></div></details><p>The updated pipeline should now be the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/*A valid SPL2 statement for a pipeline must start with &#34;$pipeline&#34;, and include &#34;from $source&#34; and &#34;into $destination&#34;.*/
</span></span><span class=line><span class=cl>/* Import logs_to_metrics */
</span></span><span class=line><span class=cl>import logs_to_metrics from /splunk/ingest/commands
</span></span><span class=line><span class=cl>$pipeline =
</span></span><span class=line><span class=cl>| from $source
</span></span><span class=line><span class=cl>| thru [
</span></span><span class=line><span class=cl>        //define the metric name, type, and value for the Kubernetes Events
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        // REPLACE UNIQUE_FIELD WITH YOUR INITIALS
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        | logs_to_metrics name=&#34;k8s_audit_UNIQUE_FIELD&#34; metrictype=&#34;counter&#34; value=1 time=_time dimensions={&#34;level&#34;: _raw.level, &#34;response_status&#34;: _raw.responseStatus.code, &#34;namespace&#34;: _raw.objectRef.namespace, &#34;resource&#34;: _raw.objectRef.resource, &#34;user&#34;: _raw.user.username, &#34;action&#34;: _raw.verb}
</span></span><span class=line><span class=cl>        | into $metrics_destination
</span></span><span class=line><span class=cl>    ]
</span></span><span class=line><span class=cl>| eval index = &#34;kube_logs&#34;
</span></span><span class=line><span class=cl>| into $destination;</span></span></code></pre></div><p><strong>3.</strong> In the upper-right corner click the <strong>Preview</strong> button <a href=#R-image-269c36edd0e9171ab640403a62ccd827 class=lightbox-link><img alt="Preview Button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/preview.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-269c36edd0e9171ab640403a62ccd827><img alt="Preview Button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/preview.png?height=20px&classes=inline"></a> or press CTRL+Enter (CMD+Enter on Mac). From the <strong>Previewing $pipeline</strong> dropdown select <strong>$metrics_destination</strong>. Confirm you are seeing a preview of the metrics that will be sent to Splunk Observability Cloud.</p><p><a href=#R-image-9385f0deb2277ca006de06f914ee7f46 class=lightbox-link><img alt="Ingest Pipeline Dimensions" class="lazy lightbox figure-image" loading=lazy src="../../images/ingest_pipeline_dimensions.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9385f0deb2277ca006de06f914ee7f46><img alt="Ingest Pipeline Dimensions" class="lazy lightbox lightbox-image" loading=lazy src="../../images/ingest_pipeline_dimensions.png?width=40vw"></a></p><p><strong>4.</strong> Confirm you are seeing the dimensions in the dimensions column of the preview table. You can view the entire dimensions object by clicking into the table.</p><p><a href=#R-image-2153cf44c6611caf04a9d943200a66bb class=lightbox-link><img alt="Ingest Pipeline Dimensions Review" class="lazy lightbox figure-image" loading=lazy src="../../images/ingest_pipeline_dimensions_field.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2153cf44c6611caf04a9d943200a66bb><img alt="Ingest Pipeline Dimensions Review" class="lazy lightbox lightbox-image" loading=lazy src="../../images/ingest_pipeline_dimensions_field.png?width=40vw"></a></p><p><strong>5.</strong> In the upper-right corner click the <strong>Save pipeline</strong> button <a href=#R-image-99356c965a01d15f966147b2908cd092 class=lightbox-link><img alt="Save Pipeline Button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/save_pipeline_btn.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-99356c965a01d15f966147b2908cd092><img alt="Save Pipeline Button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/save_pipeline_btn.png?height=20px&classes=inline"></a>. On the ‚ÄúYou are editing an active pipeline modal‚Äù click <strong>Save</strong>.</p><p><a href=#R-image-95f391708dfdd9236c5fe0e82e534e03 class=lightbox-link><img alt="Save Updated Pipeline" class="lazy lightbox figure-image" loading=lazy src="../../images/save_updated_pipeline.png?width=30vw" style=height:auto;width:30vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95f391708dfdd9236c5fe0e82e534e03><img alt="Save Updated Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../../images/save_updated_pipeline.png?width=30vw"></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Because this pipeline is already active, the changes you made will take effect immediately. Your metric should now be split into multiple metric timeseries using the dimensions you added.</p><p>In the next step you will create a visualization using different dimensions from the Kubernetes audit events.</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=visualize-kubernetes-audit-event-metrics>Visualize Kubernetes Audit Event Metrics</h1><p>Now that your metric has dimensions you will create a chart showing the health of different Kubernetes actions using the <code>verb</code> dimension from the events.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Visualize Kubernetes Audit Event Metrics</summary><div class=box-content><p><strong>1.</strong> If you closed the chart you created in the previous section, in the upper-right corner, click the <strong>+</strong> Icon ‚Üí <strong>Chart</strong> to create a new chart.</p><p><a href=#R-image-f4ac24aab3dffdb494df1265aab67591 class=lightbox-link><img alt="Create New Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/create_new_chart.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f4ac24aab3dffdb494df1265aab67591><img alt="Create New Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/create_new_chart.png?width=40vw"></a></p><p><strong>2.</strong> In the <strong>Plot Editor</strong> of the newly created chart enter <code>k8s_audit*</code> in the metric name field. You will use a wildcard here so that you can see all the metrics that are being ingested.</p><p><a href=#R-image-decb2529fa627ae443193c5a36fba1fe class=lightbox-link><img alt="Review Metric" class="lazy lightbox figure-image" loading=lazy src="../../images/review_metric.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-decb2529fa627ae443193c5a36fba1fe><img alt="Review Metric" class="lazy lightbox lightbox-image" loading=lazy src="../../images/review_metric.png?width=40vw"></a></p><p><strong>3.</strong> Notice the change from one to many metrics, which is when you updated the pipeline to include the dimensions. Now that we have this metric available, let&rsquo;s adjust the chart to show us if any of our actions have errors associated with them.</p><p><a href=#R-image-fc8e670d47fa7c6b6a625b998e0351a6 class=lightbox-link><img alt="Metric Timeseries" class="lazy lightbox figure-image" loading=lazy src="../../images/metric_timeseries.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fc8e670d47fa7c6b6a625b998e0351a6><img alt="Metric Timeseries" class="lazy lightbox lightbox-image" loading=lazy src="../../images/metric_timeseries.png?width=40vw"></a></p><p>First you&rsquo;ll filter the Kubernetes events to only those that were not successful using the HTTP response code which is available in the <strong>response_status</strong> field. We only want events that have a response code of <strong>409</strong>, which indicates that there was a conflict (for example a trying to create a resource that already exists) or <strong>503</strong>, which indicates that the API was unresponsive for the request.</p><p><strong>4.</strong> In the plot editor of your chart click the <strong>Add filter</strong>, use <strong>response_status</strong> for the field and select <strong>409.0</strong> and <strong>503.0</strong> for the values.</p><p>Next, you‚Äôll add a function to the chart which will calculate the total number of events grouped by the <strong>resource</strong>, <strong>action</strong>, and <strong>response status</strong>. This will allow us to see exactly which actions and the associated resources had errors. Now we are only looking at Kubernetes events that were not successful.</p><p><strong>5.</strong> Click <strong>Add analytics</strong> ‚Üí <strong>Sum</strong> ‚Üí <strong>Sum:Aggregation</strong> and add <strong>resource</strong>, <strong>action</strong>, and <strong>response_status</strong> in the <strong>Group by</strong> field.</p><p><a href=#R-image-35f33c82349ab0cceb0e673c8d8624f3 class=lightbox-link><img alt="Add Metric Filters" class="lazy lightbox figure-image" loading=lazy src="../../images/add_metric_filters.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-35f33c82349ab0cceb0e673c8d8624f3><img alt="Add Metric Filters" class="lazy lightbox lightbox-image" loading=lazy src="../../images/add_metric_filters.png?width=40vw"></a></p><p><strong>6.</strong> Using the chart type along the top buttons, change the chart to a <strong>heatmap</strong>. Next to the <strong>Plot editor</strong>, click <strong>Chart options</strong>. In the <strong>Group by</strong> section select <strong>response_status</strong> then <strong>action</strong>. Change the <strong>Color threshold</strong> from <strong>Auto</strong> to <strong>Fixed</strong>. Click the blue <strong>+ button</strong> to add another threshold. Change the <strong>Down arrow to Yellow</strong>, the <strong>Middle to orange</strong>. Leave the <strong>Up arrow as red</strong>. Enter <strong>5 for the middle threshold</strong> and <strong>20 for the upper threshold</strong>.</p><p><a href=#R-image-bac704c0ece2efc0d9097ea0bac57dbb class=lightbox-link><img alt="Configure Thresholds" class="lazy lightbox figure-image" loading=lazy src="../../images/configure_thresholds.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bac704c0ece2efc0d9097ea0bac57dbb><img alt="Configure Thresholds" class="lazy lightbox lightbox-image" loading=lazy src="../../images/configure_thresholds.png?width=40vw"></a></p><p><strong>7.</strong> In the upper right corner of the chart click the blue <strong>Save as&mldr;</strong> <a href=#R-image-c6f17ac05f627f1db9fb1d746f54906c class=lightbox-link><img alt="Preview Button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/save_as_btn.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c6f17ac05f627f1db9fb1d746f54906c><img alt="Preview Button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/save_as_btn.png?height=20px&classes=inline"></a> button. Enter a name for your chart (For Example: Kubernetes Audit Logs - Conflicts and Failures).</p><p><a href=#R-image-39ca7dd5ed03caf92d76a2979f83389e class=lightbox-link><img alt="Chart Name" class="lazy lightbox figure-image" loading=lazy src=../../images/chart_name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-39ca7dd5ed03caf92d76a2979f83389e><img alt="Chart Name" class="lazy lightbox lightbox-image" loading=lazy src=../../images/chart_name.png></a></p><p><strong>8.</strong> On the <strong>Choose a dashboard</strong> select <strong>New dashboard</strong>.</p><p><a href=#R-image-26b803f6a13e359afa3289e5d32324e6 class=lightbox-link><img alt="New Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/new_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-26b803f6a13e359afa3289e5d32324e6><img alt="New Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new_dashboard.png></a></p><p><strong>9.</strong> Enter a name for your dashboard that includes your initials, so you can easily find it later. Click <strong>Save</strong>.</p><p><a href=#R-image-7def2ff91be5c40359497446e9e69963 class=lightbox-link><img alt="New Dashboard Name" class="lazy lightbox figure-image" loading=lazy src=../../images/dashboard_name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7def2ff91be5c40359497446e9e69963><img alt="New Dashboard Name" class="lazy lightbox lightbox-image" loading=lazy src=../../images/dashboard_name.png></a></p><p><strong>10.</strong> Make sure the new dashboard you just created is selected and click <strong>Ok</strong>.</p><p><a href=#R-image-5d8818075c2e4e34180cc6c28c9318a3 class=lightbox-link><img alt="Save New Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/save_new_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5d8818075c2e4e34180cc6c28c9318a3><img alt="Save New Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save_new_dashboard.png></a></p><p>You should now be taken to your new Kubernetes Audit Events dashboard with the chart you created. You can add new charts from other metrics in your environment, such as application errors and response times from the applications running in the Kubernetes cluster, or other Kubernetes metrics such as pod phase, pod memory utilization, etc. giving you a correlated view of your Kubernetes environment from cluster events to application health.</p><p><a href=#R-image-b000e3952cbda41a516541c884903d20 class=lightbox-link><img alt="Audit Dashboard" class="lazy lightbox figure-image" loading=lazy src="../../images/audit_dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b000e3952cbda41a516541c884903d20><img alt="Audit Dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../../images/audit_dashboard.png?width=40vw"></a></p><p>Make a copy of this chart using the three dots <code>...</code> in the top right of your chart&rsquo;s visualization box</p><p><a href=#R-image-468cc3d261a44f3ca7acf59c27fd8a6b class=lightbox-link><img alt="Copy chart button" class="lazy lightbox figure-image" loading=lazy src="../../images/copy_chart_button.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-468cc3d261a44f3ca7acf59c27fd8a6b><img alt="Copy chart button" class="lazy lightbox lightbox-image" loading=lazy src="../../images/copy_chart_button.png?width=40vw"></a></p><p>Paste into the same dashboard you&rsquo;ve been working in using the <code>+</code> icon in the top right of the UI</p><p><a href=#R-image-866cccf7c21acefce110cbd04bdb41a7 class=lightbox-link><img alt="Paste chart into dashboard" class="lazy lightbox figure-image" loading=lazy src="../../images/paste_chart_into_dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-866cccf7c21acefce110cbd04bdb41a7><img alt="Paste chart into dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../../images/paste_chart_into_dashboard.png?width=40vw"></a></p><p>Click into your pasted chart and change the visualization to a <strong>Column</strong> chart.</p><p><a href=#R-image-1aaf75c60198fdc66a868ad4a68ce949 class=lightbox-link><img alt="Change to column chart visualization" class="lazy lightbox figure-image" loading=lazy src="../../images/change_to_column_chart_visualization.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1aaf75c60198fdc66a868ad4a68ce949><img alt="Change to column chart visualization" class="lazy lightbox lightbox-image" loading=lazy src="../../images/change_to_column_chart_visualization.png?width=40vw"></a></p><p>Change SUM to just <code>resource</code>, <code>namespace</code> (our filters filter down to just problem codes)</p><p><a href=#R-image-e1998dcbdac8f9a6c05761f7034abff7 class=lightbox-link><img alt="Group chart by resource and namespace" class="lazy lightbox figure-image" loading=lazy src="../../images/group_chart_by_resource_and_namespace.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e1998dcbdac8f9a6c05761f7034abff7><img alt="Group chart by resource and namespace" class="lazy lightbox lightbox-image" loading=lazy src="../../images/group_chart_by_resource_and_namespace.png?width=40vw"></a></p><p>In Chart options change title to <code>Kubernetes Audit Logs - Conflicts by Namespace</code></p><p><a href=#R-image-44965c0ca5399071805c08a49d8e454f class=lightbox-link><img alt="Change chart title" class="lazy lightbox figure-image" loading=lazy src="../../images/change_chart_title.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44965c0ca5399071805c08a49d8e454f><img alt="Change chart title" class="lazy lightbox lightbox-image" loading=lazy src="../../images/change_chart_title.png?width=40vw"></a></p><p>Click <strong>Save</strong> and close</p><p><a href=#R-image-d5ceb295552609cc646d6047584c1fff class=lightbox-link><img alt="Save and close chart" class="lazy lightbox figure-image" loading=lazy src=../../images/save_and_close_chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5ceb295552609cc646d6047584c1fff><img alt="Save and close chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save_and_close_chart.png></a></p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create a detector based on Kubernetes Audit Logs</summary><div class=box-content><p>On your Conflicts by Namespace chart click the little bell icon and New detector from chart</p><p><a href=#R-image-4f4b388403c86d3d80489ee426b69539 class=lightbox-link><img alt="Bell icon to create detector" class="lazy lightbox figure-image" loading=lazy src="../../images/bell_icon_create_detector.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4f4b388403c86d3d80489ee426b69539><img alt="Bell icon to create detector" class="lazy lightbox lightbox-image" loading=lazy src="../../images/bell_icon_create_detector.png?width=40vw"></a></p><p>Choose a name and click <strong>Create alert rule</strong></p><p><a href=#R-image-bb0a374aa3f585acd8085192103ef206 class=lightbox-link><img alt="Enter name for alert rule" class="lazy lightbox figure-image" loading=lazy src="../../images/enter_name_alert_rule.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bb0a374aa3f585acd8085192103ef206><img alt="Enter name for alert rule" class="lazy lightbox lightbox-image" loading=lazy src="../../images/enter_name_alert_rule.png?width=40vw"></a></p><p>For Alert condition click <strong>Static Threshold</strong> and click Proceed to <strong>Alert Settings</strong></p><p><a href=#R-image-12e80ffa6ce54f4c99b83336f1799959 class=lightbox-link><img alt="Select static threshold condition" class="lazy lightbox figure-image" loading=lazy src="../../images/select_static_threshold_condition.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-12e80ffa6ce54f4c99b83336f1799959><img alt="Select static threshold condition" class="lazy lightbox lightbox-image" loading=lazy src="../../images/select_static_threshold_condition.png?width=40vw"></a></p><p>Enter a <strong>Threshold</strong> of <code>20</code></p><p><a href=#R-image-5db2efea488f60441581689b9daef78b class=lightbox-link><img alt="Enter threshold value" class="lazy lightbox figure-image" loading=lazy src="../../images/enter_threshold_value.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5db2efea488f60441581689b9daef78b><img alt="Enter threshold value" class="lazy lightbox lightbox-image" loading=lazy src="../../images/enter_threshold_value.png?width=40vw"></a></p><p>We wont choose any recipients for this alert so click into <strong>Activate</strong> and choose <strong>Activate Alert Rule</strong> and <strong>Save</strong></p><p><a href=#R-image-a65905845511bf9159ba5e9764bbf6a7 class=lightbox-link><img alt="Activate alert rule and save" class="lazy lightbox figure-image" loading=lazy src="../../images/activate_alert_rule_and_save.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a65905845511bf9159ba5e9764bbf6a7><img alt="Activate alert rule and save" class="lazy lightbox lightbox-image" loading=lazy src="../../images/activate_alert_rule_and_save.png?width=40vw"></a></p><p>Click <strong>Save</strong> one final time in the top right to save your detector</p><p><a href=#R-image-6778ede4574b01e82a8dafe295a6e451 class=lightbox-link><img alt="Final save for detector" class="lazy lightbox figure-image" loading=lazy src="../../images/final_save_detector.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6778ede4574b01e82a8dafe295a6e451><img alt="Final save for detector" class="lazy lightbox lightbox-image" loading=lazy src="../../images/final_save_detector.png?width=40vw"></a></p><p>Navigate back to your dashboard and you will see a detector associated with the chart denoted by a lit up bell icon on the chart</p><p><a href=#R-image-7771468c17314e5380b045e89b98ed07 class=lightbox-link><img alt="Detector bell icon on chart" class="lazy lightbox figure-image" loading=lazy src="../../images/detector_bell_icon_on_chart.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7771468c17314e5380b045e89b98ed07><img alt="Detector bell icon on chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/detector_bell_icon_on_chart.png?width=40vw"></a></p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Visualize your time series data in Splunk Cloud - Dashboard Studio</summary><div class=box-content><p>Now that we have our time series metrics ingested to the Splunk Observability Cloud data store we can easily visualize these time series metrics in Splunk Cloud!</p><p>In your Splunk Cloud instance browse to <strong>Dashboards</strong> and select <strong>Create New Dashboard</strong></p><p><a href=#R-image-6fbf4fd88d57a634128aa9a8e04c82cb class=lightbox-link><img alt="Create new dashboard in Splunk Cloud" class="lazy lightbox figure-image" loading=lazy src=../../images/create_new_dashboard_splunk_cloud.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6fbf4fd88d57a634128aa9a8e04c82cb><img alt="Create new dashboard in Splunk Cloud" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create_new_dashboard_splunk_cloud.png></a></p><p>Choose a Dashboard title, permissions and <strong>Dashboard Studio</strong> along with any Layout Mode.
Click <strong>Create</strong>.</p><p><a href=#R-image-e7b8f0f6fd92f0a854dd4bb24b064f18 class=lightbox-link><img alt="Dashboard title and layout options" class="lazy lightbox figure-image" loading=lazy src=../../images/dashboard_title_layout_options.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7b8f0f6fd92f0a854dd4bb24b064f18><img alt="Dashboard title and layout options" class="lazy lightbox lightbox-image" loading=lazy src=../../images/dashboard_title_layout_options.png></a></p><p>In Dashboard Studio click the chart icon and choose <strong>Column</strong></p><p><a href=#R-image-de2879bf5890def728b655637bf9da19 class=lightbox-link><img alt="Select column chart in Dashboard Studio" class="lazy lightbox figure-image" loading=lazy src=../../images/select_column_chart_dashboard_studio.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-de2879bf5890def728b655637bf9da19><img alt="Select column chart in Dashboard Studio" class="lazy lightbox lightbox-image" loading=lazy src=../../images/select_column_chart_dashboard_studio.png></a></p><p>In <strong>Select data source</strong> choose <strong>Create splunk observability cloud metric search</strong></p><p><a href=#R-image-11013fbd8da0f95b2ea0aaada036d285 class=lightbox-link><img alt="Choose observability cloud metric search as data source" class="lazy lightbox figure-image" loading=lazy src=../../images/choose_observability_cloud_metric_search.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-11013fbd8da0f95b2ea0aaada036d285><img alt="Choose observability cloud metric search as data source" class="lazy lightbox lightbox-image" loading=lazy src=../../images/choose_observability_cloud_metric_search.png></a></p><p>Choose a name for your new datasource and click the <strong>Content Import</strong> link under <strong>Search for metric or metadata</strong></p><p>Copy and paste the URL for your chart into the <strong>Content URL</strong> field</p><p><a href=#R-image-cd1b00e1642c37f291db76e5aaeb9d1c class=lightbox-link><img alt="Paste chart URL and import" class="lazy lightbox figure-image" loading=lazy src="../../images/paste_chart_url_and_import.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd1b00e1642c37f291db76e5aaeb9d1c><img alt="Paste chart URL and import" class="lazy lightbox lightbox-image" loading=lazy src="../../images/paste_chart_url_and_import.png?width=40vw"></a></p><p>Click <strong>Import</strong></p><p><a href=#R-image-7abf2f7c722990c040b1d87d06a0cadd class=lightbox-link><img alt="Chart imported to dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/chart_imported_to_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7abf2f7c722990c040b1d87d06a0cadd><img alt="Chart imported to dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/chart_imported_to_dashboard.png></a></p><p><a href=#R-image-7560d7c17cd6dfaa4245511db6e1f7e3 class=lightbox-link><img alt="Chart visible in dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/chart_visible_in_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7560d7c17cd6dfaa4245511db6e1f7e3><img alt="Chart visible in dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/chart_visible_in_dashboard.png></a></p><p>Size your chart to your dashboard</p><p><a href=#R-image-96788c8c6bae01240300f4da287ab42c class=lightbox-link><img alt="Resize chart in dashboard" class="lazy lightbox figure-image" loading=lazy src="../../images/resize_chart_in_dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-96788c8c6bae01240300f4da287ab42c><img alt="Resize chart in dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../../images/resize_chart_in_dashboard.png?width=40vw"></a></p><p>Expand <strong>Interactions</strong> in the right side of your charts <strong>Configuration</strong> and click <strong>Add Interaction</strong></p><p><a href=#R-image-1f4bf4e897361847d7dc8415fd982356 class=lightbox-link><img alt="Expand interactions and add interaction" class="lazy lightbox figure-image" loading=lazy src=../../images/expand_interactions_add_interaction.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1f4bf4e897361847d7dc8415fd982356><img alt="Expand interactions and add interaction" class="lazy lightbox lightbox-image" loading=lazy src=../../images/expand_interactions_add_interaction.png></a></p><p>Copy the URL from your dashboard in Splunk Observability</p><p><a href=#R-image-7b02974f5bf0ec246aaa5576520a265d class=lightbox-link><img alt="Apply interaction settings" class="lazy lightbox figure-image" loading=lazy src="../../images/apply_interaction_settings.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7b02974f5bf0ec246aaa5576520a265d><img alt="Apply interaction settings" class="lazy lightbox lightbox-image" loading=lazy src="../../images/apply_interaction_settings.png?width=40vw"></a></p><p>In <strong>On click</strong> choose <strong>Link to custom URL</strong> and add the URL for your dashboard in Splunk Observability Cloud for easy navigation back to the source data.
Also choose <strong>Open in new tab</strong> for friendly navigation.</p><p><a href=#R-image-8b8b337236411d1fbd9c159e7daf20d8 class=lightbox-link><img alt="Interaction added" class="lazy lightbox figure-image" loading=lazy src=../../images/interaction_added.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b8b337236411d1fbd9c159e7daf20d8><img alt="Interaction added" class="lazy lightbox lightbox-image" loading=lazy src=../../images/interaction_added.png></a></p><p>Click <strong>Save</strong> in the top right to save your Dashboard.</p><p><a href=#R-image-21d07742f4702be7785c6d72256debd8 class=lightbox-link><img alt="Save dashboard in Splunk Cloud" class="lazy lightbox figure-image" loading=lazy src=../../images/save_dashboard_splunk_cloud.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-21d07742f4702be7785c6d72256debd8><img alt="Save dashboard in Splunk Cloud" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save_dashboard_splunk_cloud.png></a></p><p>Highlight and click a Column or name in your chart</p><p><a href=#R-image-6ce199b487ffec8071f50a8caadcbed1 class=lightbox-link><img alt="Click column or name in chart" class="lazy lightbox figure-image" loading=lazy src=../../images/click_column_or_name_in_chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ce199b487ffec8071f50a8caadcbed1><img alt="Click column or name in chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/click_column_or_name_in_chart.png></a></p><p>You will be told you are navigating back to Splunk Observability. Click <strong>Continue</strong></p><p><a href=#R-image-c0fe36774f4674cca448e2a26530973a class=lightbox-link><img alt="Continue navigation to Splunk Observability" class="lazy lightbox figure-image" loading=lazy src=../../images/continue_navigation_splunk_observability.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c0fe36774f4674cca448e2a26530973a><img alt="Continue navigation to Splunk Observability" class="lazy lightbox lightbox-image" loading=lazy src=../../images/continue_navigation_splunk_observability.png></a></p><p>You&rsquo;ve now navigated back to your corresponding Splunk Observability dashboard from Splunk Cloud.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Aug 6, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=conclusion>Conclusion</h1><p>In this workshop, you walked through the entire process of optimizing Kubernetes log management by converting detailed log events into actionable metrics using <strong>Splunk Ingest Pipelines</strong>. You started by defining a pipeline that efficiently converts Kubernetes audit logs into metrics, drastically reducing the data volume while retaining critical information. You then ensured the raw log events were securely stored in S3 for long-term retention and deeper analysis.</p><p><a href=#R-image-700d220fa51011992097aecc2419feb0 class=lightbox-link><img alt="Kubernetes Audit Event" class="lazy lightbox figure-image" loading=lazy src="../images/audit_event.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-700d220fa51011992097aecc2419feb0><img alt="Kubernetes Audit Event" class="lazy lightbox lightbox-image" loading=lazy src="../images/audit_event.png?width=40vw"></a></p><p>Next, you demonstrated how to enhance these metrics by adding key dimensions from the raw events, enabling us to drill down into specific actions and resources. you created a chart that filtered the metrics to focus on errors, breaking them out by resource and action. This allowed us to pinpoint exactly where issues were occurring in real-time.</p><p><a href=#R-image-8d3272ee77db9d8612488a9551d9ee1e class=lightbox-link><img alt="Ingest Pipeline" class="lazy lightbox figure-image" loading=lazy src="../images/ingest_pipeline_dimensions.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8d3272ee77db9d8612488a9551d9ee1e><img alt="Ingest Pipeline" class="lazy lightbox lightbox-image" loading=lazy src="../images/ingest_pipeline_dimensions.png?width=40vw"></a></p><p>The real-time architecture of <strong>Splunk Observability Cloud</strong> means that these metrics can trigger alerts the moment an issue is detected, significantly reducing the Mean Time to Detection (MTTD). Additionally, you showed how this chart can be easily saved to new or existing dashboards, ensuring ongoing visibility and monitoring of critical metrics.</p><p><a href=#R-image-cc55197c088d69337db961546eb51c46 class=lightbox-link><img alt="Audit Dashboard" class="lazy lightbox figure-image" loading=lazy src="../images/audit_dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cc55197c088d69337db961546eb51c46><img alt="Audit Dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../images/audit_dashboard.png?width=40vw"></a></p><p>The value behind this approach is clear: by converting logs to metrics using <strong>Ingest Processor</strong>, you not only streamline data processing and reduce storage costs but also gain the ability to monitor and respond to issues in real-time using <strong>Splunk Observability Cloud</strong>. This results in faster problem resolution, improved system reliability, and more efficient resource utilization, all while maintaining the ability to retain and access the original logs for compliance or deeper analysis.</p><center><h1>Happy Splunking!</h1></center><p><a href=#R-image-61f00e6fa0068d666a4a5081b0e27135 class=lightbox-link><img alt="Dancing Buttercup" class="lazy lightbox figure-image" loading=lazy src="../images/Splunk-dancing-buttercup-GIF-103.gif?width=30vw" style=height:auto;width:30vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-61f00e6fa0068d666a4a5081b0e27135><img alt="Dancing Buttercup" class="lazy lightbox lightbox-image" loading=lazy src="../images/Splunk-dancing-buttercup-GIF-103.gif?width=30vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=alerting-and-monitoring-with-splunk-it-service-intelligence>Alerting and Monitoring with Splunk IT Service Intelligence</h1><span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Doug Erkkila</span></span><h1 id=workshop-monitoring-and-alerting-with-splunk-it-service-intelligence>Workshop: Monitoring and Alerting with Splunk IT Service Intelligence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This hands-on workshop is designed specifically for anyone looking to effectively demonstrate and position the combined power of Splunk Enterprise, AppDynamics, Splunk Observability Cloud, and Splunk IT Service Intelligence (ITSI). Participants will gain practical experience integrating these platforms, focusing on real-world scenarios and use cases that resonate with potential clients. The workshop emphasizes translating technical capabilities into business value, enabling Solution Architects to confidently showcase how these solutions address critical customer challenges.</p><h2 id=introduction-and-overview>Introduction and Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In today&rsquo;s complex IT landscape, ensuring the performance and availability of applications and services is paramount. This workshop will introduce you to a powerful combination of tools ‚Äì Splunk, AppDynamics, Splunk Observability Cloud, and Splunk IT Service Intelligence (ITSI) ‚Äì that work together to provide comprehensive monitoring and alerting capabilities.</p><h3 id=the-challenge-of-modern-monitoring>The Challenge of Modern Monitoring<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Modern applications often rely on distributed architectures, microservices, and cloud infrastructure. This complexity makes it challenging to pinpoint the root cause of performance issues or outages. Traditional monitoring tools often focus on individual components, leaving gaps in understanding the overall health and performance of a service.</p><h3 id=the-solution-integrated-observability>The Solution: Integrated Observability<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>A comprehensive observability strategy requires integrating data from various sources and correlating it to gain actionable insights. This workshop will demonstrate how Splunk, AppDynamics, Splunk Observability Cloud, and ITSI work together to achieve this:</p><ul><li><p><strong>AppDynamics:</strong> Provides deep Application Performance Monitoring (APM). It instruments applications to capture detailed performance metrics, including transaction traces, code-level diagnostics, and user experience data. AppDynamics excels at identifying performance bottlenecks <em>within</em> the application.</p></li><li><p><strong>Splunk Observability Cloud:</strong> Offers full-stack observability, encompassing infrastructure metrics, distributed traces, and logs. It provides a unified view of the health and performance of your entire infrastructure, from servers and containers to cloud services and custom applications. Splunk Observability Cloud helps correlate performance issues across the entire stack.</p></li><li><p><strong>Splunk:</strong> Acts as the central platform for log analytics, security information and event management (SIEM), and broader data analysis. It ingests data from AppDynamics, Splunk Observability Cloud, and other sources, enabling powerful search, visualization, and correlation capabilities. Splunk provides a holistic view of your IT environment.</p></li><li><p><strong>Splunk IT Service Intelligence (ITSI):</strong> Provides service intelligence by correlating data from all the other platforms. ITSI allows you to define services, map dependencies, and monitor Key Performance Indicators (KPIs) that reflect the overall health and performance of those services. ITSI is essential for understanding the <em>business impact</em> of IT issues.</p></li></ul><h2 id=workshop-objectives>Workshop Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By the end of this workshop, participants will be able to:</p><ul><li>Articulate the complementary value proposition of Splunk, AppDynamics, Splunk Observability Cloud, and Splunk IT Service Intelligence within a comprehensive observability strategy.</li><li>Confidently demonstrate the integration points between these platforms, highlighting data flow and correlation capabilities.</li><li>Create and configure basic alerts in Splunk Enterprise, AppDynamics, and Splunk Observability Cloud showcasing practical alerting scenarios.</li><li>Build and present compelling demonstrations of Key Performance Indicator (KPI) creation and alerting in Splunk ITSI, emphasizing service-centric monitoring.</li><li>Explain and demonstrate the value of episodes in Splunk ITSI for improved incident management and reduced MTTR.</li><li>Translate technical features into business outcomes, focusing on ROI and addressing specific customer pain points.</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 27, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Alerting and Monitoring with Splunk IT Service Intelligence</h1><article class=default><header class=headline></header><h1 id=getting-started>Getting Started</h1><h1 id=monitoring-and-alerting-with-splunk-appdynamics-and-splunk-observability-cloud>Monitoring and Alerting with Splunk, AppDynamics, and Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><h2 id=introduction-and-overview>Introduction and Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In today&rsquo;s complex IT landscape, ensuring the performance and availability of applications and services is paramount. This workshop will introduce you to a powerful combination of tools ‚Äì Splunk, AppDynamics, Splunk Observability Cloud, and Splunk IT Service Intelligence (ITSI) ‚Äì that work together to provide comprehensive monitoring and alerting capabilities.</p><h3 id=the-challenge-of-modern-monitoring>The Challenge of Modern Monitoring<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Modern applications often rely on distributed architectures, microservices, and cloud infrastructure. This complexity makes it challenging to pinpoint the root cause of performance issues or outages. Traditional monitoring tools often focus on individual components, leaving gaps in understanding the overall health and performance of a service.</p><h3 id=the-solution-integrated-observability>The Solution: Integrated Observability<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>A comprehensive observability strategy requires integrating data from various sources and correlating it to gain actionable insights. This workshop will demonstrate how Splunk, AppDynamics, Splunk Observability Cloud, and ITSI work together to achieve this:</p><ul><li><p><strong>Splunk:</strong> Acts as the central platform for log analytics, security information and event management (SIEM), and broader data analysis. It ingests data from AppDynamics, Splunk Observability Cloud, and other sources, enabling powerful search, visualization, and correlation capabilities. Splunk provides a holistic view of your IT environment.</p></li><li><p><strong>Splunk Observability Cloud:</strong> Offers full-stack observability, encompassing infrastructure metrics, distributed traces, and logs. It provides a unified view of the health and performance of your entire infrastructure, from servers and containers to cloud services and custom applications. Splunk Observability Cloud helps correlate performance issues across the entire stack.</p></li><li><p><strong>AppDynamics:</strong> Provides deep Application Performance Monitoring (APM). It instruments applications to capture detailed performance metrics, including transaction traces, code-level diagnostics, and user experience data. AppDynamics excels at identifying performance bottlenecks <em>within</em> the application.</p></li><li><p><strong>Splunk IT Service Intelligence (ITSI):</strong> Provides service intelligence by correlating data from all the other platforms. ITSI allows you to define services, map dependencies, and monitor Key Performance Indicators (KPIs) that reflect the overall health and performance of those services. ITSI is essential for understanding the <em>business impact</em> of IT issues.</p></li></ul><h3 id=data-flow-and-integration>Data Flow and Integration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>A key concept to understand is how data flows between these platforms:</p><ol><li><p><strong>Splunk Observability Cloud and AppDynamics collect data:</strong> They monitor applications and infrastructure, gathering performance metrics and traces.</p></li><li><p><strong>Data is sent to Splunk:</strong> AppDynamics and Splunk Observability Cloud integrate with Splunk to forward their collected data alongside logs sent directly to Splunk.</p></li><li><p><strong>Splunk analyzes and indexes data:</strong> Splunk processes and stores the data, making it searchable and analyzable.</p></li><li><p><strong>ITSI leverages Splunk data:</strong> ITSI uses the data in Splunk to create services, define KPIs, and monitor the overall health of your IT operations.</p></li></ol><h3 id=workshop-objectives>Workshop Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>By the end of this workshop, you will:</p><ul><li>Understand the complementary roles of Splunk, AppDynamics, Splunk Observability Cloud, and ITSI.</li><li>Create basic alerts in Splunk, Observability Cloud and AppDynamics.</li><li>Configure a new Service and a simple KPI and alerting in ITSI.</li><li>Understand the concept of episodes in ITSI.</li></ul><p>This workshop provides a foundation for building a robust observability practice. We will focus on the alerting configuration workflows, preparing you to explore more advanced features and configurations in your own environment. We will <strong>not</strong> be covering ITSI or Add-On installation and configuration.</p><p>Here are the instructions on how to access your pre-configured <a href=/observability-workshop/en/ninja-workshops/12-alerting-monitoring-with-itsi/1-getting-started/1-access-cloud-instances/index.html>Splunk Enterprise Cloud</a> instance.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=how-to-connect-to-your-workshop-environment>How to connect to your workshop environment</h1><h1 id=starting-up-your-workshop>Starting up your Workshop<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This workshop is available on Splunk Show and will take some time to start up all of your resources. It contains a Splunk environment with IT Service Intelligence, the Splunk Infrastructure Monitoring Add-On, as well as the recently updated AppDynamics Add-on all preconfigured.</p><p>The Workshop is titled <strong>&ldquo;Tech Summit 2025: OBS-122&rdquo;</strong> or you can go directly to it&rsquo;s entry on <a href=https://show.splunk.com/template/646/ rel=external>Splunk Show</a>. It takes approximately 15 minutes to start up however data generation and ingestion will take up to a half hour.</p><p><a href=#R-image-db5d60ac29ecafa475da630f88fdfc86 class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/show_entry.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-db5d60ac29ecafa475da630f88fdfc86><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/show_entry.png?classes=inline"></a></p><h1 id=splunk-observability-cloud-access>Splunk Observability Cloud Access<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>Creating an alert in Observability Cloud should be done in the Observability Cloud US1 <a href=https://app.us1.signalfx.com/#/home rel=external>Show Playground</a> Org.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=creating-basic-alerts>Creating Basic Alerts</h1><h1 id=setting-up-basic-alerts-in-splunk-enterprise-appdynamics-and-splunk-observability-cloud>Setting Up Basic Alerts in Splunk Enterprise, AppDynamics, and Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This section covers the creation of basic alerts in Splunk Enterprise, AppDynamics, and Splunk Observability Cloud. These examples focus on simplicity and demonstrating the core concepts. Remember that real-world alerting scenarios often require more complex configurations and thresholds.</p><h2 id=1-splunk-enterprise-alerts>1. Splunk Enterprise Alerts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Splunk alerts are triggered by search results that match specific criteria. We&rsquo;ll create a real-time alert that notifies us when a certain condition is met.</p><p><strong>Scenario:</strong> Alert when the number of &ldquo;Invalid user&rdquo; events in the &ldquo;main&rdquo; index exceeds 100 in the last 5 minutes.</p><p><strong>Steps:</strong></p><ol><li><p><strong>Create a Search:</strong> Start by creating a Splunk search that identifies the events you want to alert on. For example:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code class=language-splunk data-lang=splunk>index=main &#34;Invalid user&#34;</code></pre></div><p>Use the time picker to select &ldquo;Last 15 minutes&rdquo;".</p></li><li><p><strong>Configure the Alert:</strong></p><ul><li>Click &ldquo;Save As&rdquo; and select &ldquo;Alert.&rdquo;</li><li>Give your alert a descriptive name (e.g., &ldquo;Numerous Invalid User Logins Attempted&rdquo;).</li><li><strong>Alert type:</strong><ul><li><strong>Scheduled:</strong> Choose &ldquo;Scheduled&rdquo; to evaluate the search on a set schedule. Below scheduled will be the button to select the frequency, select &ldquo;Run on Cron Schedule&rdquo;.</li><li><strong>Cron Expression:</strong> */15 * * * *</li><li><strong>Triggered when:</strong> Select &ldquo;Number of results&rdquo; &ldquo;is greater than&rdquo; &ldquo;100.&rdquo;</li><li><strong>Time Range:</strong> Set to &ldquo;15 minutes.&rdquo;</li></ul></li><li><strong>Trigger Actions:</strong><ul><li>For this basic example, choose &ldquo;Add to Triggered Alerts.&rdquo; In a real-world scenario, you&rsquo;d configure email notifications, Slack integrations, or other actions.</li></ul></li><li><strong>Save:</strong> Save the alert.</li></ul></li></ol><p><a href=#R-image-4696edc05e98858d3e699d532728066a class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/save_as_alert.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4696edc05e98858d3e699d532728066a><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/save_as_alert.png?classes=inline"></a></p><p><strong>Explanation:</strong> This alert runs the search every 15 minutes and triggers if the search returns more than 100 results. The &ldquo;Add to Triggered Alerts&rdquo; action simply adds a Alert to the Splunk Triggered Alerts list.</p><p><strong>Time Ranges and Frequency:</strong> Since everything in Splunk core is a search, you need to consider the search timespan and frequency so that you are not a) searching the same data multiple times with an overlap timespan, b) missing events because of a gap between timespan and frequency, c) running too frequently and adding overhead or d) running too infrequently and experiencing delays in alerting.</p><h2 id=2-splunk-observability-cloud-alerts-detectors>2. Splunk Observability Cloud Alerts (Detectors)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Create a Detector:</strong></p><ul><li>Click &ldquo;Detectors & SLOs&rdquo; in the lefthand menu</li><li>Click &ldquo;Create Detector -> Custom Detector&rdquo;</li><li>Give the detector a descriptive name (e.g., &ldquo;High CPU Utilization Alert - INITIALS&rdquo;).</li><li><strong>Signal:</strong><ul><li>Select the metric you want to monitor (&ldquo;cpu.utilization&rdquo;).</li><li>Add any necessary filters to specify the host (<code>service.name:otelshop-loadgenerator</code>).</li><li>Click &ldquo;Proceed to Alert Condition&rdquo;</li></ul></li><li><strong>Condition:</strong><ul><li>Select Static Threshold</li><li>Set the threshold: &ldquo;is above&rdquo; &ldquo;90&rdquo;</li></ul></li><li><strong>Notifications:</strong><ul><li>For this example, choose a simple notification method (e.g., a test webhook). In a real-world scenario, you would configure integrations with PagerDuty, Slack, or other notification systems.</li></ul></li><li><strong>Save:</strong> Save the detector.</li></ul><p><a href=#R-image-f00bf9d96241ee1035beb77faf53f045 class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/detector_preview.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f00bf9d96241ee1035beb77faf53f045><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/detector_preview.png?classes=inline"></a></p><p><strong>Explanation:</strong> This detector monitors the CPU utilization metric for the specified service. If the CPU utilization exceeds 90% for the configured &ldquo;for&rdquo; duration, the detector triggers the alert and sends a notification.</p><p><strong>Important Considerations for All Platforms:</strong></p><ul><li><strong>Thresholds:</strong> Carefully consider the thresholds you set for your alerts. Too sensitive thresholds can lead to alert fatigue, while thresholds that are too high might miss critical issues.</li><li><strong>Notification Channels:</strong> Integrate your alerting systems with appropriate notification channels (email, SMS, Slack, PagerDuty) to ensure that alerts are delivered to the right people at the right time.</li><li><strong>Alert Grouping and Correlation:</strong> For complex systems, implement alert grouping and correlation to reduce noise and focus on actionable insights. ITSI plays a critical role in this.</li><li><strong>Documentation:</strong> Document your alerts clearly, including the conditions that trigger them and the appropriate response procedures.</li></ul><p>These examples provide a starting point for creating basic alerts. As you become more familiar with these platforms, you can explore more advanced alerting features and configurations to meet your specific monitoring needs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=creating-services-in-itsi>Creating Services in ITSI</h1><h1 id=creating-services-in-itsi-with-dependencies-based-on-entity-type>Creating Services in ITSI with Dependencies Based on Entity Type<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This workshop outlines how to create a service in Splunk IT Service Intelligence (ITSI) using an existing entity and establishing dependencies based on the entity&rsquo;s type. We&rsquo;ll differentiate between entities representing business workflows from Splunk Observability Cloud and those representing AppDynamics Business Transactions.</p><p><strong>Scenario:</strong></p><p>We have two existing services: &ldquo;Online-Boutique-US&rdquo; (representing an application running in Kubernetes and being monitored by Splunk Observability Cloud) and &ldquo;AD.ECommerce&rdquo; (representing an application monitored by AppDynamics). We want to create a new service and add it as a dependent of one of those services. It is not necessary to create a service for both during your first run through this workshop so pick one that you are more interested in to start with.</p><p><a href=#R-image-93f7be64d207639f808771e2e53b350e class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/service_tree_start.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-93f7be64d207639f808771e2e53b350e><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/service_tree_start.png?classes=inline"></a></p><p><strong>Return to your Splunk Environment and under Apps, select IT Service Intelligence</strong></p><p>In the Default Analyzer update the Filter to &ldquo;Buttercup Business Health&rdquo;</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Creating Services in ITSI</h1><article class=default><header class=headline></header><h1 id=creating-an-o11y-based-service>Creating an O11y Based Service</h1><h1 id=starting-with-an-observability-cloud-based-service>Starting with an Observability Cloud Based Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><ol><li><p><strong>Access Services:</strong> In ITSI click &ldquo;Configuration&rdquo;, click on &ldquo;Services&rdquo;.</p></li><li><p><strong>Create New Service: PaymentService2:</strong> Click &ldquo;Create New Service&rdquo;.</p></li><li><p><strong>Service Details (PaymentService2):</strong></p><ul><li><strong>Title:</strong> &ldquo;PaymentService2&rdquo;</li><li><strong>Description (Optional):</strong> e.g., &ldquo;Payment Service for Hipster Shop - version 2&rdquo;</li></ul></li><li><p><strong>Select Template:</strong> Choose &ldquo;Link service to a service template&rdquo; and search for &ldquo;Splunk APM Business Workflow KPIs&rdquo; from the template dropdown. Click <strong>Create</strong> to save the new service.</p></li><li><p><strong>Entity Assignment:</strong></p><ul><li>The page will load and display the new Service and you will be on the Entities page. This demo defaults to selecting the <em>paymentservice:grpc.hipstershop.PaymentService/Charge</em> entity. In a real world situation you would need to match the workflow to the entity name manually.</li><li><strong>Direct Entity Selection (If Available):</strong> Search for the entity using <code>sf_workflow="paymentservice:grpc.hipstershop.PaymentService/Charge"</code> and select it.</li></ul></li><li><p><strong>Save Service (PaymentService2):</strong> Click &ldquo;Save&rdquo; to create &ldquo;PaymentService2&rdquo;.</p></li><li><p><strong>Settings:</strong> Click the &ldquo;Settings&rdquo; tab, enable <em>Backfill</em> and keep that standard 7 days. Enable the Service, and click &ldquo;Save&rdquo;</p></li></ol><h2 id=setting-paymentservice2s-service-health-as-a-dependency-for-online-boutique-us>Setting PaymentService2&rsquo;s Service Health as a Dependency for Online-Boutique-US<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p><strong>Locate Online-Boutique-US:</strong> Find the &ldquo;Online-Boutique-US&rdquo; service in the service list.</p></li><li><p><strong>Edit Online-Boutique-US:</strong> Click &ldquo;Edit&rdquo;.</p></li><li><p><strong>Service Dependencies:</strong> Look for the &ldquo;Service Dependencies&rdquo; section.</p></li><li><p><strong>Add Dependency:</strong> There should be an option to add a dependent service. Search for &ldquo;PaymentService2&rdquo;.</p></li><li><p><strong>Select KPI:</strong> Check the box next to ServiceHealthScore for PaymentService2.</p></li><li><p><strong>Save Changes:</strong> Save the changes to the &ldquo;Online-Boutique-US&rdquo; service.</p></li></ol><h2 id=verification>Verification<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Click on &ldquo;Service Analyzer&rdquo; and select the &ldquo;Default Analyzer&rdquo;</li><li>Filter the service to just &ldquo;Buttercup Business Health&rdquo;</li><li>Verify that <em>PaymentService2</em> is now present below <em>Online-Boutique-US</em> and should be in a grey status.</li></ul><p><a href=#R-image-cace773a7b1d3eba621621940eae2353 class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/service_tree_o11y.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cace773a7b1d3eba621621940eae2353><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/service_tree_o11y.png?classes=inline"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=creating-an-appd-based-service>Creating an AppD Based Service</h1><h1 id=starting-with-an-appdynamics-based-service>Starting with an AppDynamics Based Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><ol><li><p><strong>Access Services:</strong> In ITSI click &ldquo;Configuration&rdquo;, click on &ldquo;Services&rdquo;.</p></li><li><p><strong>Create Service: AD-Ecommerce2:</strong> Click &ldquo;Create Service -> Create Service&rdquo;.</p></li><li><p><strong>Service Details (AD-Ecommerce2):</strong></p><ul><li><strong>Title:</strong> &ldquo;AD-Ecommerce2&rdquo;</li><li><strong>Description (Optional):</strong> e.g., &ldquo;Ecommerce Service - version 2&rdquo;</li></ul></li><li><p><strong>Select Template:</strong> Choose &ldquo;Link service to a service template&rdquo; and search for &ldquo;AppDynamics App Performance Monitoring&rdquo; from the template dropdown. Click <strong>Create</strong> to save the new service.</p></li><li><p><strong>Entity Assignment:</strong></p><ul><li>The page will load and display the new Service and you will be on the Entities page. This demo defaults to selecting the <em>AD-Ecommerce:18112:demo1.saas.appdynamics.com</em> entity. In a real world situation you would need to match the entity_name to the entity name manually.</li><li><strong>Direct Entity Selection (If Available):</strong> Search for the entity using <code>entity_name="AD-Ecommerce:18112:demo1.saas.appdynamics.com"</code> and select it.</li></ul></li><li><p><strong>Settings:</strong> Click the &ldquo;Settings&rdquo; tab, enable <em>Backfill</em> and keep that standard 7 days. Enable the Service, and click &ldquo;Save&rdquo;</p></li></ol><h2 id=setting-ad-ecommerce2s-service-health-as-a-dependency-for-adecommerce>Setting AD-Ecommerce2&rsquo;s Service Health as a Dependency for AD.Ecommerce<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p><strong>Navigate back to Services page:</strong> Click &ldquo;Configuration -> Services&rdquo;</p></li><li><p><strong>Locate AD.Ecommerce:</strong> Find the &ldquo;AD.Ecommerce&rdquo; service in the service list.</p></li><li><p><strong>Edit AD.Ecommerce:</strong> Click &ldquo;Edit&rdquo;.</p></li><li><p><strong>Service Dependencies:</strong> Look for the &ldquo;Service Dependencies&rdquo; section.</p></li><li><p><strong>Add Dependency:</strong> There should be an option to add a dependent service. Search for &ldquo;AD-Ecommerce2&rdquo;.</p></li><li><p><strong>Select KPI:</strong> Check the box next to ServiceHealthScore for AD-Ecommerce2.</p></li><li><p><strong>Save Changes:</strong> Save the changes to the &ldquo;AD.Ecommerce&rdquo; service.</p></li></ol><h2 id=verification>Verification<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Click on &ldquo;Service Analyzer&rdquo; and select the &ldquo;Default Analyzer&rdquo;</li><li>Filter the service to just &ldquo;Buttercup Business Health&rdquo;</li><li>Verify that <em>AD-Ecommerce2</em> is now present below <em>AD.Ecommerce</em> and should be in a grey status.</li></ul><p><a href=#R-image-a0a51b9a15a626fcf666d32e08124f2d class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/service_tree_appd.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a0a51b9a15a626fcf666d32e08124f2d><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/service_tree_appd.png?classes=inline"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=creating-alerts-in-itsi>Creating Alerts in ITSI</h1><h1 id=configuring-a-basic-alert-in-splunk-itsi>Configuring a Basic Alert in Splunk ITSI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This section guides you through configuring a basic alert in Splunk IT Service Intelligence (ITSI). We&rsquo;ll set up an alert that triggers when our previously created Service breaches a KPI threshold.</p><p><strong>Depending on the Service You Created, the KPI we use for this alert will change. In the instruction steps below replace Service Name and KPI appropriately</strong></p><ul><li><strong>PaymentService2:</strong> Business Workflow Error Rate</li><li><strong>AD-Ecommerce2:</strong> Availability</li></ul><p><strong>Steps:</strong></p><ol><li><p><strong>Navigate to the KPI:</strong></p><ul><li>In ITSI, go to &ldquo;Configuration&rdquo; -> &ldquo;Correlation Searches&rdquo;</li><li>Click &ldquo;Create New Search&rdquo;</li></ul></li><li><p><strong>Configure the new search:</strong></p><ul><li><strong>Search Title:</strong> <em>Service Name</em> <em>KPI</em> Critical</li><li><strong>Description:</strong> <em>Service Name</em> <em>KPI</em> Critical</li><li><strong>Search:</strong></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>index=itsi_summary kpi=&#34;*KPI*&#34; alert_severity=critical</code></pre></div><ul><li><strong>Time Range:</strong> Last 15 minutes</li><li><strong>Service:</strong> <em>Service Name</em></li><li><strong>Entity Lookup Field:</strong> itsi_service_id</li><li><strong>Run Every:</strong> minutes</li><li><strong>Notable Event Title:</strong> <em>Service Name</em> <em>KPI</em> Critical</li><li><strong>Severity:</strong> Critical</li><li><strong>Notable Event Identified Fields:</strong> source</li></ul></li></ol><p><strong>After Creating the Alert:</strong></p><ul><li>You will need to wait 5-10 minutes for the alert to run</li><li>The alert will be listed in the &ldquo;Alerts and Episodes&rdquo; Pane in ITSI.</li></ul><p><a href=#R-image-cbf324e8414b3720e1a79706c964c071 class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/alerts.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cbf324e8414b3720e1a79706c964c071><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/alerts.png?classes=inline"></a></p><p><strong>Important Considerations:</strong></p><ul><li><strong>Alert Fatigue:</strong> Avoid setting up too many alerts or alerts with overly sensitive thresholds. This can lead to alert fatigue, where people become desensitized to alerts and might miss critical issues.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=creating-episodes-in-itsi>Creating Episodes in ITSI</h1><h1 id=creating-an-aggregation-policy-in-splunk-itsi>Creating an Aggregation Policy in Splunk ITSI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1><p>This section outlines the steps to create an aggregation policy in Splunk ITSI that matches the alerts we just set up. This policy will group related alerts, reducing noise and improving incident management.</p><p><strong>Depending on the Alert You Created, the title we use for this alert will change. In the instruction steps below replace AlertName with the Service Name used</strong></p><ul><li><strong>PaymentService2</strong> or</li><li><strong>AD-Ecommerce2</strong></li></ul><h2 id=steps>Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p><strong>Navigate to Notable Event Aggregation Policies:</strong> In Splunk, go to &ldquo;Configuration&rdquo; -> &ldquo;Notable Event Aggregation Policies&rdquo;.</p></li><li><p><strong>Create New Policy:</strong> click the green &ldquo;Create Notable Event Aggregation Policy&rdquo; button in the upper right corner.</p></li><li><p><strong>Filtering Criteria:</strong> This is the most important part. You&rsquo;ll define the criteria for alerts to be grouped by this policy. Click &ldquo;Add Rule (OR)&rdquo;</p><ul><li><strong>Field:</strong> Select &ldquo;title&rdquo; from the dropdown menu.</li><li><strong>Operator:</strong> Choose &ldquo;matches&rdquo;.</li><li><strong>Value:</strong> Enter the string &ldquo;<em>Service Name</em>*&rdquo;. (make sure to include the *)</li></ul></li><li><p><strong>Splitting Events:</strong> Remove the &ldquo;hosts&rdquo; field that is provided by default and update it to use the &ldquo;service&rdquo; field. We want this generating new episodes for each Service that is found. In our example, it should only be 1.</p></li><li><p><strong>Breaking Criteria:</strong> Configure how Episodes are broken or ended. We&rsquo;ll leave it as the default <em>&ldquo;If an event occurs for which severity = Normal&rdquo;</em>. Click Preview on the right to confirm it is picking up our Alert</p></li><li><p><strong>Click Next</strong></p></li><li><p><strong>Actions (Optional):</strong> Define actions to be taken on aggregated alerts. For example, you can automatically create a ticket in ServiceNow or send an email notification. We&rsquo;re going to skip this part.</p></li><li><p><strong>Click Next</strong></p></li><li><p><strong>Policy Title and Description:</strong></p><ul><li><strong>Policy Title:</strong> <em>Service Name</em> Alert Grouping</li><li><strong>Description:</strong> Grouping <em>Service Name</em> alerts together.</li></ul></li><li><p><strong>Save Policy:</strong> Click the &ldquo;Next&rdquo; button to create the aggregation policy.</p></li></ol><h2 id=verification>Verification<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After saving the policy, navigate to the &ldquo;Go to Episode Review&rdquo; page and filter alerts for last 15 minutes and add a filter to status=New and search for our Service Name in the search box.</p><p>There may already be an episode named after our specific alert already, if so, close it out and wait for a new one to be generated with our new Title.</p><p><a href=#R-image-8dd6a8bd205375bfab3fb265e4f8dab9 class=lightbox-link><img alt=show-entry class="inline lazy lightbox figure-image" loading=lazy src="../images/episode.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8dd6a8bd205375bfab3fb265e4f8dab9><img alt=show-entry class="inline lazy lightbox lightbox-image" loading=lazy src="../images/episode.png?classes=inline"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=using-observability-cloud-detectors-in-itsi>Using Observability Cloud Detectors in ITSI</h1><h2 id=part-2-sending-alerts-from-splunk-observability-cloud-to-splunk-itsi>Part 2: Sending Alerts from Splunk Observability Cloud to Splunk ITSI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Since we have a detector configured in Splunk Observability Cloud that we set up earlier, the next step is to ensure that when it triggers an alert, this alert is sent to Splunk IT Service Intelligence (ITSI). This integration allows ITSI to ingest these alerts as notable events, which can then be correlated with other events and contribute to service health scores. The most common method to achieve this is by using a webhook in Splunk Observability Cloud to send alert data to an HTTP Event Collector (HEC) endpoint configured in Splunk ITSI.</p><p><strong>Step 1: Configure an HTTP Event Collector (HEC) in Splunk (ITSI)</strong></p><p>Before Splunk Observability Cloud can send alerts to ITSI, you need an HEC endpoint in your Splunk instance (where ITSI is running) to receive them.</p><ol><li>Log in to your Splunk Enterprise or Splunk Cloud instance that hosts ITSI.</li><li>Navigate to <strong>Settings > Data Inputs</strong>.</li><li>Click on <strong>HTTP Event Collector</strong>.</li><li>Click <strong>Global Settings</strong>. Ensure HEC is enabled. If not, enable it and specify a default port (e.g., 8088, though this might be managed differently in Splunk Cloud).</li><li>Click <strong>New Token</strong>.</li><li>Give your HEC token a descriptive name, for example, <code>o11y_alerts_for_itsi</code>.</li><li>For <strong>Source name override</strong>, you can optionally specify a sourcetype, or leave it blank to specify it in Observability Cloud or let it default.</li><li>For <strong>Default Index</strong>, select an appropriate index where ITSI can access these events. Often, there&rsquo;s a dedicated index for ITSI events, or you might use a general events index like <code>main</code> or <code>itsi_event_management</code>.</li><li>Ensure the token is enabled and click <strong>Submit</strong>.</li><li>Copy the <strong>Token Value</strong> that is generated. You will need this for the webhook configuration in Splunk Observability Cloud.</li></ol><p><strong>Step 2: Configure a Webhook Integration in Splunk Observability Cloud</strong></p><p>Now, return to Splunk Observability Cloud to set up the webhook that will use the HEC token you just created.</p><ol><li>In Splunk Observability Cloud, navigate to <strong>Data Management > Available Integrations</strong>.</li><li>Look for an option to add a new <strong>Splunk platform</strong>.</li><li>Give the Integration a name, for example, <code>Splunk ITSI HEC</code>.</li><li>In the <strong>URL</strong> field, enter the HEC endpoint URI for your Splunk instance. This will typically be in the format <code>https://&lt;your-splunk-hec-host-or-ip>:&lt;hec-port>/services/collector/event</code>.</li><li>You will need to add an <strong>HEC token</strong> that you created earlier.</li><li>For the <strong>Payload</strong>, you need to construct a JSON payload that ITSI can understand. Splunk Observability Cloud provides an out of the box payload configured to include fields needed for ITSI event correlation.</li><li>Review the Integration and click <strong>Save</strong></li></ol><p><strong>Step 3: Update the Detector to Use the Webhook</strong></p><p>Now, go back to the detector you created in Part 1 and update its notification settings to use the newly configured webhook.</p><ol><li>Navigate to <strong>Detectors & SLOs</strong> in Splunk Observability Cloud.</li><li>Find and edit the detector you created for EC2 CPU utilization.</li><li>Click the Alert rule that we created earlier</li><li>Go to the <strong>Alert Recipients</strong> section.</li><li>Click <strong>Add recipient > Splunk platform</strong> and select the integration you just configured (<code>Splunk ITSI HEC</code>) for the desired alert severities (e.g., Critical, Warning).</li><li>Save the changes to your detector.</li></ol><p><strong>Step 4: Validate</strong></p><p>To test the integration, you can wait for a genuine alert to trigger or, if your detector settings allow, you might be able to manually trigger a test alert or temporarily lower the threshold to force an alert. Once an alert triggers in Splunk Observability Cloud, it should send the payload via the webhook to your Splunk HEC endpoint.</p><p>Verify in Splunk by searching your target index (e.g., <code>index=itsi_event_management sourcetype=o11y:itsi:alert host=&lt;your-ec2-instance-id></code>). You should see the event data arriving from Splunk Observability Cloud.</p><p>With these steps, alerts from your Splunk Observability Cloud detector are now being sent to Splunk ITSI. Correlating Events and generating Notables all function exactly the same as we covered earlier in this workshop.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=monitoring-cisco-ai-pods-with-splunk-observability-cloud>Monitoring Cisco AI Pods with Splunk Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p><strong>Cisco‚Äôs AI-ready PODs</strong> combine the best of hardware and software technologies to create a robust, scalable, and efficient AI-ready infrastructure tailored to diverse needs.</p><p><strong>Splunk Observability Cloud</strong> provides comprehensive visibility into all of this infrastructure along with all the application components that are running on this stack.</p><p>The steps to configure Splunk Observability Cloud for a Cisco AI POD environment are fully documented (see <a href=https://github.com/signalfx/splunk-opentelemetry-examples/tree/main/collector/cisco-ai-ready-pods rel=external>here</a> for details).</p><p>However, it&rsquo;s not always possible to get access to a Cisco AI POD environment to practice the installation steps.</p><p>This workshop provides hands-on experience deploying and working with several of the technologies that are used to monitor Cisco AI PODs with Splunk Observability Cloud, without requiring access to an actual Cisco AI POD. This includes:</p><ul><li>Practice deploying the <strong>OpenTelemetry Collector</strong> in the Red Hat OpenShift cluster.</li><li>Practice adding <strong>Prometheus</strong> receivers to the collector to ingest infrastructure metrics.</li><li>Practice deploying the <strong>Weaviate</strong> vector database to the cluster.</li><li>Practice instrumenting Python services that interact with Large Language Models (LLMs) with <strong>OpenTelemetry</strong>.</li><li>Understanding which details which OpenTelemetry captures in the trace from applications that interact with LLMs.</li></ul><blockquote><p>Note: the workshop setup section only needs to be executed by the workshop organizer</p></blockquote><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Monitoring Cisco AI Pods with Splunk Observability Cloud</h1><article class=default><header class=headline></header><h1 id=workshop-setup>Workshop Setup</h1><p>This section includes the steps that the workshop organizer should follow to setup the workshop:</p><ul><li>AWS account setup</li><li>OpenShift prerequisites</li><li>Deploy a <strong>RedHat OpenShift</strong> cluster with GPU-based worker nodes using AWS ROSA.</li><li>Deploy the <strong>NVIDIA NIM Operator</strong> and <strong>NVIDIA GPU Operator</strong>.</li><li>Deploy a <strong>Large Language Model (LLM)</strong> using NVIDIA NIM to the cluster.</li><li>Create OpenShift logins and namespaces for each workshop user, with appropriate permissions.</li><li>Install the Cluster Receiver component of the <strong>Splunk OpenTelemetry collector</strong>.</li><li>Deploy a <strong>Weviate vector database</strong> to the cluster.</li><li>Deploy a service that mimics the <strong>Portworx Prometheus exporter</strong>.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 21, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Workshop Setup</h1><article class=default><header class=headline></header><h1 id=aws-setup>AWS Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=enable-the-red-hat-openshift-service-in-aws>Enable the Red Hat OpenShift Service in AWS<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To deploy OpenShift in your AWS account, we&rsquo;ll need to first enable the
Red Hat OpenShift service using the <a href="https://us-east-1.console.aws.amazon.com/rosa/home?region=us-east-1#/" rel=external>AWS console</a>.</p><p>Next, follow the instructions to connect your AWS account with your Red Hat account.</p><h2 id=provision-an-ec2-instance>Provision an EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s provision an EC2 instance that we&rsquo;ll use to deploy the Red Hat cluster. This avoids
the limitations running the ROSA command-line interface on Mac OS.</p><p>We used a t3.xlarge instance type using Ubuntu 24.04 LTS while creating the workshop,
but a smaller instance type can also be used.</p><p>ssh into the instance once it&rsquo;s up and running.</p><h2 id=clone-the-github-repository>Clone the GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Clone the GitHub repository to your EC2 instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/splunk/observability-workshop.git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>cd</span> observability-workshop/workshop/cisco-ai-pods </span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=openshift-prerequisites>OpenShift Prerequisites</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>The steps below are required before deploying the OpenShift cluster in AWS.</p><h2 id=create-a-red-hat-login>Create a Red Hat Login<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The first thing we&rsquo;ll need to do is create an account with Red Hat, which we can do by
filling out the form
<a href="https://www.redhat.com/wapps/ugc/register.html?_flowId=register-flow&_flowExecutionKey=e1s1" rel=external>here</a>.</p><h2 id=install-the-aws-cli>Install the AWS CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To install the AWS CLI on the EC2 instance provisioned previously, run the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s2>&#34;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&#34;</span> -o <span class=s2>&#34;awscliv2.zip&#34;</span>
</span></span><span class=line><span class=cl>sudo apt install unzip
</span></span><span class=line><span class=cl>unzip awscliv2.zip
</span></span><span class=line><span class=cl>sudo ./aws/install</span></span></code></pre></div><p>Use the following command to ensure it was installed successfully:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws --version</span></span></code></pre></div><p>It should return something like the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>aws-cli/2.30.5 Python/3.13.7 Linux/6.14.0-1011-aws exe/x86_64.ubuntu.24</code></pre></div><p>Login to your AWS account using your preferred method. Refer to the
<a href=https://docs.aws.amazon.com/signin/latest/userguide/command-line-sign-in.html rel=external>documentation</a>
for guidance. For example, you can login by running the <code>aws configure</code> command.</p><p>Confirm you&rsquo;re logged in successfully by running a command such as <code>aws ec2 describe-instances</code>.</p><p>Then, verify your account identity with:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws sts get-caller-identity</span></span></code></pre></div><p>Check whether the service role for ELB (Elastic Load Balancing) exists:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws iam get-role --role-name <span class=s2>&#34;AWSServiceRoleForElasticLoadBalancing&#34;</span></span></span></code></pre></div><p>If the role does not exist, create it by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws iam create-service-linked-role --aws-service-name <span class=s2>&#34;elasticloadbalancing.amazonaws.com&#34;</span></span></span></code></pre></div><h2 id=install-the-rosa-cli>Install the ROSA CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll use the ROSA command-line interface (CLI) for the deployment. The instructions are
based on <a href=https://docs.redhat.com/en/documentation/red_hat_openshift_service_on_aws_classic_architecture/4/html-single/install_rosa_classic_clusters/index#rosa-installing-and-configuring-the-rosa-cli_rosa-installing-cli rel=external>Red Hat documentation</a>.</p><p>You can download the latest release of the ROSA CLI for your operating system
<a href=https://console.redhat.com/openshift/downloads rel=external>here</a>.</p><p>Alternatively, we can use the following command to download the CLI binary directly
to our EC2 instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>curl -L -O https://mirror.openshift.com/pub/cgw/rosa/latest/rosa-linux.tar.gz</code></pre></div><p>Extract the contents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>tar -xvzf rosa-linux.tar.gz</code></pre></div><p>Move the resulting file (<code>rosa</code>) to a location that&rsquo;s included as part of your path. For example:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mv rosa /usr/local/bin/rosa</span></span></code></pre></div><p>Log in to your Red Hat account by running the command below, then follow the instructions
in the command output:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>rosa login --use-device-code</code></pre></div><h2 id=install-the-openshift-cli-oc>Install the OpenShift CLI (oc)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can use the following command to download the OpenShift CLI binary directly
to our EC2 instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>curl -L -O https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-client-linux.tar.gz</code></pre></div><p>Extract the contents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>tar -xvzf openshift-client-linux.tar.gz</code></pre></div><p>Move the resulting files (<code>oc</code> and <code>kubectl</code>) to a location that&rsquo;s included as part of your path. For example:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mv oc /usr/local/bin/oc
</span></span><span class=line><span class=cl>sudo mv kubectl /usr/local/bin/kubectl</span></span></code></pre></div><h2 id=create-account-wide-roles-and-policies>Create Account-Wide Roles and Policies<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following command to create the necessary account-wide roles and policies:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create account-roles --mode auto</span></span></code></pre></div><h2 id=create-an-aws-vpc-for-rosa-hcp>Create an AWS VPC for ROSA HCP<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;re going to use the Hosted Control Plane (HCP) deployment option to
deploy our OpenShift cluster. To do this, we&rsquo;ll need to
create a new VPC in our AWS account using the following command:</p><blockquote><p>Note: update the region as appropriate for your environment.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create network network-template --param <span class=nv>Region</span><span class=o>=</span>us-east-2 --param <span class=nv>Name</span><span class=o>=</span>rosa-network-stack --template-dir<span class=o>=</span><span class=s1>&#39;.&#39;</span></span></span></code></pre></div><blockquote><p>Important: make note of the subnet ids created as a result of this command
as you&rsquo;ll need them when creating the cluster. Make a note of the CloudFormation
stack name as well, which will be needed later if you want to delete the network.</p></blockquote><blockquote><p>Note: by default, each AWS region is limited to 5 elastic IP addresses.<br>If you receive the following error:
&ldquo;The maximum number of addresses has been reached.&rdquo;
then you&rsquo;ll need to contact AWS to request an increase to this limit,
or choose another AWS region to create the VPC for ROSA.</p></blockquote><h2 id=create-an-openid-connect-configuration>Create an OpenID Connect configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before creating a Red Hat OpenShift Service on AWS cluster, let&rsquo;s create the OpenID Connect (OIDC)
configuration with the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create oidc-config --mode<span class=o>=</span>auto --yes</span></span></code></pre></div><blockquote><p>Important: make note of the oidc-provider id that is created.</p></blockquote><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-openshift-cluster-in-aws>Deploy OpenShift Cluster in AWS</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>25 minutes</span>
</span>&nbsp;<h2 id=deploy-an-openshift-cluster>Deploy an OpenShift Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll use the ROSA CLI to deploy an OpenShift Cluster.</p><p>First, we&rsquo;ll need to set a few environment variables:</p><blockquote><p>Note: be sure to fill in the Subnet IDs and OIDC ID before running the EXPORT commands</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CLUSTER_NAME</span><span class=o>=</span>rosa-test
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>AWS_REGION</span><span class=o>=</span>us-east-2
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>AWS_INSTANCE_TYPE</span><span class=o>=</span>g5.4xlarge
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SUBNET_IDS</span><span class=o>=</span>&lt;comma separated list of subnet IDs from earlier rosa create network command&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OIDC_ID</span><span class=o>=</span>&lt;the oidc-provider id returned from the rosa create oidc-config command&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OPERATOR_ROLES_PREFIX</span><span class=o>=</span>rosa-test-a6x9</span></span></code></pre></div><p>Create operator roles for the OIDC configuration using the following command:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create operator-roles --hosted-cp --prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span> --oidc-config-id <span class=nv>$OIDC_ID</span></span></span></code></pre></div><p>Then we can create the cluster as follows:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create cluster <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cluster-name <span class=nv>$CLUSTER_NAME</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --mode auto <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --hosted-cp <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --sts <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --create-admin-user <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --operator-roles-prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --oidc-config-id <span class=nv>$OIDC_ID</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --subnet-ids <span class=nv>$SUBNET_IDS</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --compute-machine-type <span class=nv>$AWS_INSTANCE_TYPE</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --replicas <span class=m>2</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --region <span class=nv>$AWS_REGION</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --tags <span class=s2>&#34;splunkit_environment_type:non-prd,splunkit_data_classification:private&#34;</span></span></span></code></pre></div><blockquote><p>Note that we&rsquo;ve specified the <code>g5.4xlarge</code> instance type, which includes NVIDIA
GPUs that we&rsquo;ll be using later in the workshop. This instance type is relatively expensive,
about $1.64 per hour at the time of writing, and we&rsquo;ve requested 2 replicas,
so be mindful of how long your cluster is running for, as costs will accumulate quickly.</p></blockquote><p>To determine when your cluster is Ready, run:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa describe cluster -c <span class=nv>$CLUSTER_NAME</span></span></span></code></pre></div><p>To watch your cluster installation logs, run:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa logs install -c <span class=nv>$CLUSTER_NAME</span> --watch</span></span></code></pre></div><h2 id=connect-to-the-openshift-cluster>Connect to the OpenShift Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the command below to connect the oc CLI to your OpenShift cluster:</p><blockquote><p>Note: Run the <code>rosa describe cluster -c $CLUSTER_NAME</code> command and substitute the
resulting API Server URL into the command below before running it. For example,
the server name might be something like <code>https://api.rosa-test.aaa.bb.openshiftapps.com:443</code>.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> oc login &lt;API Server URL&gt; -u cluster-admin</span></span></code></pre></div><p>Once connected to your cluster, confirm that the nodes are up and running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                       STATUS   ROLES    AGE   VERSION
</span></span><span class=line><span class=cl>ip-10-0-1-184.us-east-2.compute.internal   Ready    worker   14m   v1.31.11
</span></span><span class=line><span class=cl>ip-10-0-1-50.us-east-2.compute.internal    Ready    worker   20m   v1.31.11</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-nvidia-nim-operator>Deploy the NVIDIA NIM Operator</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>The <strong>NVIDIA GPU Operator</strong> is a Kubernetes Operator that automates the deployment, configuration,
and management of all necessary NVIDIA software components to provision GPUs within a Kubernetes cluster.</p><p>The <strong>NVIDIA NIM Operator</strong> is used to deploy LLMs in Kubernetes environments, such
as the OpenShift cluster we created earlier in this workshop.</p><p>This section of the workshop walks through the steps necessary to deploy both the
NVIDIA GPU and NIM operators in our OpenShift cluster.</p><h2 id=create-a-nvidia-ngc-account>Create a NVIDIA NGC Account<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>An NVIDIA GPU CLOUD (NGC) account is required to download LLMs and deploy them
using the NVIDIA NIM operator. You can register <a href=https://ngc.nvidia.com/signin rel=external>here</a>
to create an account.</p><h2 id=register-with-the-nvidia-developer-program>Register with the NVIDIA Developer Program<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Registering with the <a href=https://developer.nvidia.com/ rel=external>NVIDIA Developer Program</a> allows us
to get access to NVIDIA NIM, which we&rsquo;ll use later in the workshop to deploy LLMs.</p><p>Ensure that <code>NVIDIA Developer Program</code> appears on your list of NVIDIA subscriptions in NGC:</p><p><a href=#R-image-e4d1731e1b1101b0e825fbf6eaa7025d class=lightbox-link><img alt="NVIDIA Subscriptions" class="lazy lightbox figure-image" loading=lazy src=../../images/NVIDIA-Subscriptions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e4d1731e1b1101b0e825fbf6eaa7025d><img alt="NVIDIA Subscriptions" class="lazy lightbox lightbox-image" loading=lazy src=../../images/NVIDIA-Subscriptions.png></a></p><h2 id=generate-an-ngc-api-key>Generate an NGC API Key<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once you&rsquo;re logged in to the NGC website, click on your user account icon on the
top-right corner of the screen and select <strong>Setup</strong>.</p><p>Then click <strong>Generate API Key</strong> and follow the instructions. Ensure the key is associated
with the <strong>NGC Catalog</strong> and <strong>Secrets Manager</strong> services.</p><p>Save the generated key in a safe place as we&rsquo;ll use it later in the workshop.</p><p>Refer to <a href=https://docs.nvidia.com/ngc/gpu-cloud/ngc-user-guide/index.html#generating-api-key rel=external>NVIDIA Documentation</a>
for further details on generating an NGC API key.</p><h2 id=install-the-node-feature-discovery-operator>Install the Node Feature Discovery Operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/specialized_hardware_and_driver_enablement/psap-node-feature-discovery-operator#install-operator-cli_psap-node-feature-discovery-operator rel=external>Installing the NFD Operator using the CLI </a>.</p><p>Run the following script to install the Node Feature Discovery Operator:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> nvidia
</span></span><span class=line><span class=cl>./install-nfd-operator.sh</span></span></code></pre></div><p>To verify that the Operator deployment is successful, run:</p><div class=tab-panel data-tab-group=R-tabs-f84cf896c51280c6162b2182f5cf19d4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-bb9b96270cec806f2e4569e59cd540d0 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f84cf896c51280c6162b2182f5cf19d4","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-278f0803d9ba45f012ef98a76a654b71 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f84cf896c51280c6162b2182f5cf19d4","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-bb9b96270cec806f2e4569e59cd540d0 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods</span></span></code></pre></div></div></div><div id=R-tab-id-278f0803d9ba45f012ef98a76a654b71 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>nfd-controller-manager-7f86ccfb58-vgr4x   2/2     Running   <span class=m>0</span>          10m</span></span></code></pre></div></div></div></div></div><h2 id=create-a-nodefeaturediscovery-cr>Create a NodeFeatureDiscovery CR<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/specialized_hardware_and_driver_enablement/psap-node-feature-discovery-operator#creating-nfd-cr-cli_psap-node-feature-discovery-operator rel=external>Creating a NodeFeatureDiscovery CR by using the CLI </a>.</p><p>Run the following script to create the Node Feature Discovery CR:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./create-nfd-cr.sh</span></span></code></pre></div><h2 id=install-the-nvidia-gpu-operator>Install the NVIDIA GPU Operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/datacenter/cloud-native/openshift/latest/install-gpu-ocp.html#installing-the-nvidia-gpu-operator-on-openshift rel=external>Installing the NVIDIA GPU Operator on OpenShift</a>.</p><p>Run the following script to install the NVIDIA GPU Operator:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-nvidia-gpu-operator.sh</span></span></code></pre></div><p>Wait until the install plan has been created:</p><div class=tab-panel data-tab-group=R-tabs-714d328fb0c0810d2615076052f211e7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-79ecaa74350ba66232d97145ee8b307f aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-714d328fb0c0810d2615076052f211e7","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-df2a061511e77345d22c5825cc5657b2 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-714d328fb0c0810d2615076052f211e7","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-79ecaa74350ba66232d97145ee8b307f data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get installplan -n nvidia-gpu-operator</span></span></code></pre></div></div></div><div id=R-tab-id-df2a061511e77345d22c5825cc5657b2 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME            CSV                              APPROVAL   APPROVED
</span></span><span class=line><span class=cl>install-mmlxq   gpu-operator-certified.v25.3.4   Manual     false</span></span></code></pre></div></div></div></div></div><p>Approve the install plan with the following commands:</p><div class=tab-panel data-tab-group=R-tabs-d785fd3e8eae3aade48d617b1831821e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3c617ae2db25601e8ee6cc43a16855d2 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d785fd3e8eae3aade48d617b1831821e","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-6842b19a8385c426791487f5890f95f5 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d785fd3e8eae3aade48d617b1831821e","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-3c617ae2db25601e8ee6cc43a16855d2 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>INSTALL_PLAN</span><span class=o>=</span><span class=k>$(</span>oc get installplan -n nvidia-gpu-operator -oname<span class=k>)</span>
</span></span><span class=line><span class=cl>oc patch <span class=nv>$INSTALL_PLAN</span> -n nvidia-gpu-operator --type merge --patch <span class=s1>&#39;{&#34;spec&#34;:{&#34;approved&#34;:true }}&#39;</span></span></span></code></pre></div></div></div><div id=R-tab-id-6842b19a8385c426791487f5890f95f5 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>installplan.operators.coreos.com/install-rc9xq patched</span></span></code></pre></div></div></div></div></div><h2 id=create-the-cluster-policy>Create the Cluster Policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/datacenter/cloud-native/openshift/latest/install-gpu-ocp.html#create-the-cluster-policy-using-the-cli rel=external>Create the cluster policy using the CLI</a>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./create-cluster-policy.sh</span></span></code></pre></div><h2 id=verify-the-nvidia-gpu-operator-installation>Verify the NVIDIA GPU Operator Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Verify the successful installation of the NVIDIA GPU Operator using the following command:</p><div class=tab-panel data-tab-group=R-tabs-e61814746f0a5d7b4c90a6ec84799f0d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-d0d8ff08a5a5c673b8d090248e36df94 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e61814746f0a5d7b4c90a6ec84799f0d","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-ac46817233640b8f06325ba923d6b849 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-e61814746f0a5d7b4c90a6ec84799f0d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-d0d8ff08a5a5c673b8d090248e36df94 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods,daemonset -n nvidia-gpu-operator</span></span></code></pre></div></div></div><div id=R-tab-id-ac46817233640b8f06325ba923d6b849 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                      READY   STATUS      RESTARTS      AGE
</span></span><span class=line><span class=cl>pod/gpu-feature-discovery-sblkn                           1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/gpu-feature-discovery-zpt94                           1/1     Running     <span class=m>0</span>             4m58s
</span></span><span class=line><span class=cl>pod/gpu-operator-6579bc6fdc-cp28l                         1/1     Running     <span class=m>0</span>             23m
</span></span><span class=line><span class=cl>pod/nvidia-container-toolkit-daemonset-qfcl9              1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-container-toolkit-daemonset-zbwb6              1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-cuda-validator-f7tl2                           0/1     Completed   <span class=m>0</span>             78s
</span></span><span class=line><span class=cl>pod/nvidia-cuda-validator-t7n9g                           0/1     Completed   <span class=m>0</span>             71s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-exporter-gk66x                            1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-exporter-w8kr8                            1/1     Running     <span class=m>2</span> <span class=o>(</span>52s ago<span class=o>)</span>   5m5s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-lrnzr                                     1/1     Running     <span class=m>0</span>             4m58s
</span></span><span class=line><span class=cl>pod/nvidia-dcgm-tvrdm                                     1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-device-plugin-daemonset-d62nk                  1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-device-plugin-daemonset-fnv4j                  1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>pod/nvidia-driver-daemonset-418.94.202509100653-0-5xbvq   2/2     Running     <span class=m>0</span>             5m48s
</span></span><span class=line><span class=cl>pod/nvidia-driver-daemonset-418.94.202509100653-0-hmkdl   2/2     Running     <span class=m>0</span>             5m48s
</span></span><span class=line><span class=cl>pod/nvidia-node-status-exporter-2kqwr                     1/1     Running     <span class=m>0</span>             5m44s
</span></span><span class=line><span class=cl>pod/nvidia-node-status-exporter-n8d9s                     1/1     Running     <span class=m>0</span>             5m44s
</span></span><span class=line><span class=cl>pod/nvidia-operator-validator-r2nm2                       1/1     Running     <span class=m>0</span>             5m5s
</span></span><span class=line><span class=cl>pod/nvidia-operator-validator-w2fpn                       1/1     Running     <span class=m>0</span>             4m59s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                                           DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                                                                                                         AGE
</span></span><span class=line><span class=cl>daemonset.apps/gpu-feature-discovery                           <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.gpu-feature-discovery<span class=o>=</span><span class=nb>true</span>                                                                      5m45s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-container-toolkit-daemonset              <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.container-toolkit<span class=o>=</span><span class=nb>true</span>                                                                          5m48s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-dcgm                                     <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.dcgm<span class=o>=</span><span class=nb>true</span>                                                                                       5m46s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-dcgm-exporter                            <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.dcgm-exporter<span class=o>=</span><span class=nb>true</span>                                                                              5m46s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-device-plugin-daemonset                  <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.device-plugin<span class=o>=</span><span class=nb>true</span>                                                                              5m47s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-device-plugin-mps-control-daemon         <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       <span class=m>0</span>            <span class=m>0</span>           nvidia.com/gpu.deploy.device-plugin<span class=o>=</span>true,nvidia.com/mps.capable<span class=o>=</span><span class=nb>true</span>                                                  5m47s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-driver-daemonset-418.94.202509100653-0   <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           feature.node.kubernetes.io/system-os_release.OSTREE_VERSION<span class=o>=</span>418.94.202509100653-0,nvidia.com/gpu.deploy.driver<span class=o>=</span><span class=nb>true</span>   5m48s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-mig-manager                              <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       <span class=m>0</span>            <span class=m>0</span>           nvidia.com/gpu.deploy.mig-manager<span class=o>=</span><span class=nb>true</span>                                                                                5m45s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-node-status-exporter                     <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.node-status-exporter<span class=o>=</span><span class=nb>true</span>                                                                       5m44s
</span></span><span class=line><span class=cl>daemonset.apps/nvidia-operator-validator                       <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           nvidia.com/gpu.deploy.operator-validator<span class=o>=</span><span class=nb>true</span>                                                                         5m48s</span></span></code></pre></div></div></div></div></div><h2 id=install-the-operator-sdk>Install the Operator SDK<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://sdk.operatorframework.io/docs/installation/#install-from-github-release rel=external>Install from GitHub release</a>.</p><h3 id=download-the-release-binary>Download the release binary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Set platform information:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ARCH</span><span class=o>=</span><span class=k>$(case</span> <span class=k>$(</span>uname -m<span class=k>)</span> in x86_64<span class=k>)</span> <span class=nb>echo</span> -n amd64 <span class=p>;;</span> aarch64<span class=o>)</span> <span class=nb>echo</span> -n arm64 <span class=p>;;</span> *<span class=o>)</span> <span class=nb>echo</span> -n <span class=k>$(</span>uname -m<span class=k>)</span> <span class=p>;;</span> <span class=k>esac</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OS</span><span class=o>=</span><span class=k>$(</span>uname <span class=p>|</span> awk <span class=s1>&#39;{print tolower($0)}&#39;</span><span class=k>)</span></span></span></code></pre></div><p>Download the binary for your platform:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>OPERATOR_SDK_DL_URL</span><span class=o>=</span>https://github.com/operator-framework/operator-sdk/releases/download/v1.41.1
</span></span><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span></span></span></code></pre></div><h3 id=verify-the-downloaded-binary>Verify the downloaded binary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Import the operator-sdk release GPG key from keyserver.ubuntu.com:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --keyserver keyserver.ubuntu.com --recv-keys 052996E2A20B5C7E</span></span></code></pre></div><p>Download the checksums file and its signature, then verify the signature:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/checksums.txt
</span></span><span class=line><span class=cl>curl -LO <span class=si>${</span><span class=nv>OPERATOR_SDK_DL_URL</span><span class=si>}</span>/checksums.txt.asc
</span></span><span class=line><span class=cl>gpg -u <span class=s2>&#34;Operator SDK (release) &lt;cncf-operator-sdk@cncf.io&gt;&#34;</span> --verify checksums.txt.asc</span></span></code></pre></div><p>You should see something similar to the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg: assuming signed data in <span class=s1>&#39;checksums.txt&#39;</span>
</span></span><span class=line><span class=cl>gpg: Signature made Fri <span class=m>30</span> Oct <span class=m>2020</span> 12:15:15 PM PDT
</span></span><span class=line><span class=cl>gpg:                using RSA key ADE83605E945FA5A1BD8639C59E5B47624962185
</span></span><span class=line><span class=cl>gpg: Good signature from <span class=s2>&#34;Operator SDK (release) &lt;cncf-operator-sdk@cncf.io&gt;&#34;</span> <span class=o>[</span>ultimate<span class=o>]</span></span></span></code></pre></div><p>Make sure the checksums match:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> checksums.txt <span class=p>|</span> sha256sum -c -</span></span></code></pre></div><p>You should see something similar to the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>operator-sdk_linux_amd64: OK</span></span></code></pre></div><h3 id=install-the-release-binary-in-your-path>Install the release binary in your PATH<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> <span class=o>&amp;&amp;</span> sudo mv operator-sdk_<span class=si>${</span><span class=nv>OS</span><span class=si>}</span>_<span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span> /usr/local/bin/operator-sdk</span></span></code></pre></div><h2 id=install-the-ngc-cli>Install the NGC CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://org.ngc.nvidia.com/setup/installers/cli rel=external>NGC CLI Install</a>.</p><p>Click Download CLI to download the zip file that contains the binary, then transfer the zip file to a directory where you have permissions and then unzip and execute the binary. You can also download, unzip, and install from the command line by moving to a directory where you have execute permissions and then running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget --content-disposition https://api.ngc.nvidia.com/v2/resources/nvidia/ngc-apps/ngc_cli/versions/4.3.0/files/ngccli_linux.zip -O ngccli_linux.zip <span class=o>&amp;&amp;</span> unzip ngccli_linux.zip</span></span></code></pre></div><p>Check the binary&rsquo;s md5 hash to ensure the file wasn&rsquo;t corrupted during download:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find ngc-cli/ -type f -exec md5sum <span class=o>{}</span> + <span class=p>|</span> <span class=nv>LC_ALL</span><span class=o>=</span>C sort <span class=p>|</span> md5sum -c ngc-cli.md5</span></span></code></pre></div><p>Check the binary&rsquo;s SHA256 hash to ensure the file wasn&rsquo;t corrupted during download. Run the following command</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sha256sum ngccli_linux.zip</span></span></code></pre></div><p>Compare with the following value, which can also be found in the Release Notes of the Resource:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>5f01eff85a66c895002f3c87db2933c462f3b86e461e60d515370f647b4ffc21</span></span></code></pre></div><p>After verifying value, make the NGC CLI binary executable and add your current directory to path:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod u+x ngc-cli/ngc
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;export PATH=\&#34;\$PATH:</span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span><span class=s2>/ngc-cli\&#34;&#34;</span> &gt;&gt; ~/.bash_profile <span class=o>&amp;&amp;</span> <span class=nb>source</span> ~/.bash_profile</span></span></code></pre></div><p>You must configure NGC CLI for your use so that you can run the commands.</p><p>Enter the following command, including your API key when prompted:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ngc config set</span></span></code></pre></div><p>Define an environment variable with your NGC API key:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>NGC_API_KEY</span><span class=o>=</span>&lt;your NGC API key&gt; </span></span></code></pre></div><h2 id=install-the-nvidia-nim-operator>Install the NVIDIA NIM Operator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The steps in this section are based on <a href=https://docs.nvidia.com/nim-operator/latest/install.html#installing-nim-operator-on-red-hat-openshift-using-operator-sdk-for-development-only rel=external>Installing NIM Operator on Red Hat OpenShift Using operator-sdk (for Development-Only)</a>.</p><p>Run the following script to install the NIM operator:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install-nim-operator.sh</span></span></code></pre></div><p>Confirm the controller pod is running:</p><div class=tab-panel data-tab-group=R-tabs-3b3e4e4d250964374eb8a6fb3b625f78><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-632e736eb6f1c830e5b1662f3411e379 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3b3e4e4d250964374eb8a6fb3b625f78","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-fcb88d71799d87599c35f9f3dd4b3ab8 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3b3e4e4d250964374eb8a6fb3b625f78","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-632e736eb6f1c830e5b1662f3411e379 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pods -n nvidia-nim-operator</span></span></code></pre></div></div></div><div id=R-tab-id-fcb88d71799d87599c35f9f3dd4b3ab8 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                              READY   STATUS      RESTARTS   AGE
</span></span><span class=line><span class=cl>ec60a4439c710b89fc2582f5384382b4241f9aee62bb3182b8d128e69dx54dc   0/1     Completed   <span class=m>0</span>          61s
</span></span><span class=line><span class=cl>ghcr-io-nvidia-k8s-nim-operator-bundle-latest-main                1/1     Running     <span class=m>0</span>          71s
</span></span><span class=line><span class=cl>k8s-nim-operator-86d478b55c-w5cf5                                 1/1     Running     <span class=m>0</span>          50s</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-an-llm>Deploy an LLM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll use the NVIDIA NIM Operator to deploy two Large Language Models
to our OpenShift Cluster.</p><h2 id=create-a-namespace>Create a Namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace nim-service</span></span></code></pre></div><h2 id=add-secrets-with-ngc-api-key>Add Secrets with NGC API Key<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Add a Docker registry secret for downloading container images from NVIDIA NGC:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create secret -n nim-service docker-registry ngc-secret <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-server<span class=o>=</span>nvcr.io <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-username<span class=o>=</span><span class=s1>&#39;$oauthtoken&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --docker-password<span class=o>=</span><span class=nv>$NGC_API_KEY</span></span></span></code></pre></div><p>Add a generic secret that model puller containers use to download the model from NVIDIA NGC:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create secret -n nim-service generic ngc-api-secret <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --from-literal<span class=o>=</span><span class=nv>NGC_API_KEY</span><span class=o>=</span><span class=nv>$NGC_API_KEY</span></span></span></code></pre></div><h2 id=deploy-an-llm>Deploy an LLM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Run the following command to create the NIMCache and NIMService:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -n nim-service -f nvidia-llm.yaml</span></span></code></pre></div><p>Confirm that the Persistent Volume was created and the Persistent Volume Claim
was bound to is successfully:</p><blockquote><p>Note: this can take several minutes to occur</p></blockquote><div class=tab-panel data-tab-group=R-tabs-a6f72dd93575df8e6c540132e0ca52a1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0a5161f49c13a58f4ec355fca07d8635 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a6f72dd93575df8e6c540132e0ca52a1","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-1663da15b49528e7db71da867457ae8a aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-a6f72dd93575df8e6c540132e0ca52a1","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0a5161f49c13a58f4ec355fca07d8635 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get pv,pvc -n nim-service</span></span></code></pre></div></div></div><div id=R-tab-id-1663da15b49528e7db71da867457ae8a data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                                   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
</span></span><span class=line><span class=cl>persistentvolume/pvc-1af12c04-29ad-497f-b018-7d9a3aea3019   100Gi      RWO            Delete           Bound    openshift-monitoring/prometheus-data-prometheus-k8s-1   gp3-csi        &lt;unset&gt;                          4h15m
</span></span><span class=line><span class=cl>persistentvolume/pvc-9c389d79-13fb-4169-9d99-a77efd6e7919   100Gi      RWO            Delete           Bound    openshift-monitoring/prometheus-data-prometheus-k8s-0   gp3-csi        &lt;unset&gt;                          4h15m
</span></span><span class=line><span class=cl>persistentvolume/pvc-a603b8a7-1445-4b03-945a-3ed68338834c   50Gi       RWO            Delete           Bound    nim-service/meta-llama-3-2-1b-instruct-pvc              gp3-csi        &lt;unset&gt;                          114s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
</span></span><span class=line><span class=cl>persistentvolumeclaim/meta-llama-3-2-1b-instruct-pvc   Bound    pvc-a603b8a7-1445-4b03-945a-3ed68338834c   50Gi       RWO            gp3-csi        &lt;unset&gt;                 7m8s</span></span></code></pre></div></div></div></div></div><p>Confirm that the NIMCache is Ready:</p><div class=tab-panel data-tab-group=R-tabs-bd2c427c7e06b523a840dd10a7bbd36d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-26872b5daf4e47c1b14e88de01ea1c17 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bd2c427c7e06b523a840dd10a7bbd36d","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-c65f8c1bc7269ca2ff1bfd3c9c920cb9 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-bd2c427c7e06b523a840dd10a7bbd36d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-26872b5daf4e47c1b14e88de01ea1c17 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimcache.apps.nvidia.com -n nim-service</span></span></code></pre></div></div></div><div id=R-tab-id-c65f8c1bc7269ca2ff1bfd3c9c920cb9 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                         STATUS   PVC                              AGE
</span></span><span class=line><span class=cl>meta-llama-3-2-1b-instruct   Ready    meta-llama-3-2-1b-instruct-pvc   9m50s</span></span></code></pre></div></div></div></div></div><p>Confirm that the NIMService is Ready:</p><div class=tab-panel data-tab-group=R-tabs-81c4fe507392db652da3ca16fd944f66><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e16bc50c86587a8e98e0812ba109c2f5 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-81c4fe507392db652da3ca16fd944f66","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-05f4318c894ae7de676aeab8db59ba40 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-81c4fe507392db652da3ca16fd944f66","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-e16bc50c86587a8e98e0812ba109c2f5 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimservices.apps.nvidia.com -n nim-service</span></span></code></pre></div></div></div><div id=R-tab-id-05f4318c894ae7de676aeab8db59ba40 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                         STATUS   AGE
</span></span><span class=line><span class=cl>meta-llama-3-2-1b-instruct   Ready    11m</span></span></code></pre></div></div></div></div></div><h2 id=test-the-llm>Test the LLM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s ensure the LLM is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a prompt to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-20667573d3e43954d508a97cec62462e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8cb040c583f46e4f3d8d0b5237a7de49 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-20667573d3e43954d508a97cec62462e","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-46f20051ca6d6363efe8f81b50c12ead aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-20667573d3e43954d508a97cec62462e","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8cb040c583f46e4f3d8d0b5237a7de49 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X <span class=s2>&#34;POST&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> <span class=s1>&#39;http://meta-llama-3-2-1b-instruct.nim-service:8000/v1/chat/completions&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;model&#34;: &#34;meta/llama-3.2-1b-instruct&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;messages&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>        {
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;content&#34;:&#34;What is the capital of Canada?&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;role&#34;: &#34;user&#34;
</span></span></span><span class=line><span class=cl><span class=s1>        }],
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;top_p&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;n&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;max_tokens&#34;: 1024,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stream&#34;: false,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;frequency_penalty&#34;: 0.0,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stop&#34;: [&#34;STOP&#34;]
</span></span></span><span class=line><span class=cl><span class=s1>      }&#39;</span></span></span></code></pre></div></div></div><div id=R-tab-id-46f20051ca6d6363efe8f81b50c12ead data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;chatcmpl-2ccfcd75a0214518aab0ef0375f8ca21&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;object&#34;</span>: <span class=s2>&#34;chat.completion&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;created&#34;</span>: 1758919002,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;model&#34;</span>: <span class=s2>&#34;meta/llama-3.2-1b-instruct&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;choices&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;index&#34;</span>: 0,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;message&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;role&#34;</span>: <span class=s2>&#34;assistant&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reasoning_content&#34;</span>: null,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;content&#34;</span>: <span class=s2>&#34;The capital of Canada is Ottawa.&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;tool_calls&#34;</span>: <span class=o>[]</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;logprobs&#34;</span>: null,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;finish_reason&#34;</span>: <span class=s2>&#34;stop&#34;</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;stop_reason&#34;</span>: null
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>]</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;usage&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens&#34;</span>: 42,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;total_tokens&#34;</span>: 50,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;completion_tokens&#34;</span>: 8,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens_details&#34;</span>: null
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;prompt_logprobs&#34;</span>: null
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div></div><h2 id=deploy-an-embeddings-model>Deploy an Embeddings Model<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;re also going to deploy an <a href=https://build.nvidia.com/nvidia/llama-3_2-nv-embedqa-1b-v2/deploy rel=external>embeddings model</a>
in our cluster, which will be used later in the workshop to implement Retrieval Augmented Generation (RAG).</p><p>Run the following command to deploy the embeddings model:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -n nim-service -f nvidia-embeddings.yaml</span></span></code></pre></div><p>Confirm that the NIMService is Ready:</p><div class=tab-panel data-tab-group=R-tabs-fc29103e17fb1c57cc255c00064dbb92><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7c130183d232942dc81214532e6f803b aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fc29103e17fb1c57cc255c00064dbb92","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-3bd386ac32f14451da92b99768cf156b aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-fc29103e17fb1c57cc255c00064dbb92","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-7c130183d232942dc81214532e6f803b data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc get nimservices.apps.nvidia.com llama-32-nv-embedqa-1b-v2 -n nim-service</span></span></code></pre></div></div></div><div id=R-tab-id-3bd386ac32f14451da92b99768cf156b data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>NAME                        STATUS   AGE
</span></span><span class=line><span class=cl>llama-32-nv-embedqa-1b-v2   Ready    82s</span></span></code></pre></div></div></div></div></div><h2 id=test-the-embeddings-model>Test the Embeddings Model<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s ensure the embeddings is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a prompt to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-2ada3a438c4461097871a791c7589b89><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-844505f0352a80f4ad5580cfffbeb649 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2ada3a438c4461097871a791c7589b89","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-a060b6ac92c620d8fa21374ba334af06 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-2ada3a438c4461097871a791c7589b89","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-844505f0352a80f4ad5580cfffbeb649 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  curl -X POST http://llama-32-nv-embedqa-1b-v2.nim-service:8000/v1/embeddings <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;input&#34;: [&#34;What is the capital of France?&#34;],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;model&#34;: &#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;input_type&#34;: &#34;query&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;encoding_format&#34;: &#34;float&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;truncate&#34;: &#34;NONE&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div></div></div><div id=R-tab-id-a060b6ac92c620d8fa21374ba334af06 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;object&#34;</span>:<span class=s2>&#34;list&#34;</span>,<span class=s2>&#34;data&#34;</span>:<span class=o>[{</span><span class=s2>&#34;index&#34;</span>:0,<span class=s2>&#34;embedding&#34;</span>:<span class=o>[</span>-0.016632080078125,0.041259765625,-0.0156707763671875,0.032379150390625,0.045074462890625,0.0169830322265625,-0.03546142578125,-0.0003402233123779297,-0.038909912109375,-0.0023651123046875,-0.0001741647720336914,-0.01377105712890625,-0.01200103759765625,-0.00659942626953125,0.002536773681640625,0.0185394287109375,0.01546478271484375,0.0216827392578125,0.0139923095703125,-0.0121612548828125,-0.015869140625,0.005313873291015625,-0.020599365234375,0.02984619140625,-0.031982421875,0.0005679130554199219,-0.021697998046875,-0.0305938720703125,0.027618408203125,0.005340576171875,0.011993408203125,0.0135345458984375,-0.015625,0.036651611328125,-0.0210113525390625,0.0033321380615234375,0.033172607421875,-0.009552001953125,0.0226287841796875,0.01448822021484375,-0.05474853515625,-0.00861358642578125,-0.01513671875,-0.028656005859375,-0.0095977783203125,-0.025146484375,-0.0352783203125,0.03106689453125,-0.00726318359375,0.0157623291015625,0.01319122314453125,-0.005218505859375,-0.0013561248779296875,0.01277923583984375,-0.007328033447265625,0.01486968994140625,-0.05413818359375,-0.022125244140625,-0.015869140625,-0.00917816162109375,0.0186309814453125,-0.00814056396484375,-0.04730224609375,0.01406097412109375,-0.0248260498046875,0.0094757080078125,0.0309600830078125,0.0196533203125,-0.0270843505859375,-0.01113128662109375,-0.0056915283203125,-0.01154327392578125,0.037750244140625,-0.0028896331787109375,-0.00376129150390625,0.03692626953125,0.020416259765625,0.00200653076171875,0.0396728515625,0.004985809326171875,-0.04425048828125,-0.034820556640625,-0.0102386474609375,0.0218505859375,0.003604888916015625,0.00940704345703125,0.01468658447265625,0.0089111328125,-0.0032196044921875,-0.043243408203125,0.015411376953125,-0.00653839111328125,-0.01128387451171875,-0.052734375,0.032684326171875,-0.0101470947265625,-0.018218994140625,-0.003955841064453125,0.007648468017578125,-0.02044677734375,-0.0285186767578125,0.0153350830078125,0.03692626953125,0.0147247314453125,0.01043701171875,0.0007462501525878906,0.0261077880859375,0.024169921875,-0.040283203125,-0.005828857421875,0.00736236572265625,-0.00909423828125,0.00920867919921875,-0.00243377685546875,-0.03204345703125,-0.0232696533203125,0.01131439208984375,-0.0192413330078125,-0.025482177734375,-0.0267333984375,-0.03350830078125,-0.0008440017700195312,-0.040496826171875,0.0281982421875,-0.03533935546875,-0.0005216598510742188,0.061859130859375,0.0439453125,-0.00656890869140625,0.004627227783203125,-0.05615234375,0.027801513671875,-0.0027790069580078125,-0.011322021484375,-0.00841522216796875,0.027191162109375,-0.0018453598022460938,-0.00560760498046875,0.020263671875,-0.0295867919921875,0.03759765625,-0.00951385498046875,0.014190673828125,-0.039764404296875,-0.0199127197265625,-0.007427215576171875,-0.021392822265625,0.00946807861328125,0.03955078125,0.0015478134155273438,0.0227203369140625,0.020843505859375,-0.00531768798828125,0.0087432861328125,-0.01617431640625,0.002574920654296875,0.0104217529296875,0.01215362548828125,0.00970458984375,0.003803253173828125,0.005451202392578125,-0.001972198486328125,-0.01171875,-0.0216217041015625,0.033355712890625,-0.007137298583984375,0.00890350341796875,-0.01293182373046875,0.0189666748046875,-0.0168609619140625,-0.0153350830078125,0.0113525390625,-0.0123443603515625,0.046905517578125,0.0082244873046875,-0.019500732421875,0.004482269287109375,0.01007080078125,0.0037708282470703125,0.053619384765625,0.0171051025390625,-0.0305023193359375,-0.0240478515625,0.007648468017578125,-0.03973388671875,0.00847625732421875,-0.0207061767578125,-0.025115966796875,0.0168914794921875,0.03619384765625,0.00720977783203125,0.00803375244140625,0.022064208984375,-0.01111602783203125,-0.0024890899658203125,0.0047760009765625,-0.02374267578125,-0.0197296142578125,0.0203704833984375,0.00572967529296875,0.0254058837890625,0.0186920166015625,-0.022796630859375,-0.02191162109375,-0.0182952880859375,-0.00365447998046875,-0.01262664794921875,-0.0128326416015625,0.0157318115234375,-0.004596710205078125,0.033843994140625,0.01313018798828125,0.00656890869140625,0.0004596710205078125,-0.020355224609375,0.03411865234375,0.00034546852111816406,0.0205230712890625,0.02960205078125,-0.0157318115234375,-0.051483154296875,-0.0255584716796875,0.039825439453125,0.0258636474609375,0.038238525390625,-0.03424072265625,0.0188140869140625,0.03216552734375,-0.048126220703125,-0.0227203369140625,0.0032215118408203125,-0.0156097412109375,-0.003170013427734375,0.01444244384765625,-0.0232086181640625,0.002437591552734375,0.012451171875,-0.0066680908203125,0.01158905029296875,0.026397705078125,-0.00373077392578125,0.008087158203125,-0.00798797607421875,-0.0173187255859375,-0.013580322265625,0.033660888671875,-0.0028629302978515625,0.046295166015625,0.0299530029296875,-0.0159759521484375,-0.005580902099609375,0.0015277862548828125,0.01123046875,0.0031585693359375,-0.01151275634765625,0.00814056396484375,-0.0369873046875,0.0267181396484375,0.0013856887817382812,0.028656005859375,0.01409149169921875,0.035614013671875,-0.01189422607421875,-0.01190185546875,-0.053619384765625,0.037139892578125,-0.02288818359375,-0.024139404296875,0.01678466796875,-0.01020050048828125,-0.0222930908203125,-0.01059722900390625,0.044525146484375,0.006526947021484375,0.006084442138671875,-0.0015411376953125,-0.040618896484375,0.027801513671875,-0.00839996337890625,-0.01126861572265625,-0.01000213623046875,0.01197052001953125,-0.01062774658203125,-0.0155487060546875,0.011688232421875,0.01044464111328125,-0.0528564453125,0.031005859375,-0.0007734298706054688,8.52346420288086e-6,-0.00894927978515625,-0.005870819091796875,0.04254150390625,-0.03216552734375,0.0215911865234375,-0.01029205322265625,-0.01015472412109375,-0.036285400390625,0.0111083984375,0.0018520355224609375,-0.01177215576171875,0.01256561279296875,-0.004901885986328125,-0.006866455078125,-0.0084381103515625,-0.01160430908203125,-0.044891357421875,0.00632476806640625,0.0015001296997070312,-0.0016727447509765625,-0.013031005859375,-0.01404571533203125,-0.035888671875,-0.013397216796875,-0.0006346702575683594,0.00981903076171875,-0.0134735107421875,-0.022705078125,-0.02606201171875,-0.018402099609375,-0.046966552734375,-0.012542724609375,0.0183563232421875,0.0179901123046875,-0.0225067138671875,0.02801513671875,-0.032379150390625,-0.0079803466796875,0.0070953369140625,0.017333984375,0.026611328125,-0.03778076171875,-0.023590087890625,-0.005245208740234375,0.024383544921875,-0.02105712890625,0.020843505859375,0.033905029296875,0.0225372314453125,0.00942230224609375,0.0005245208740234375,-0.0284881591796875,0.01499176025390625,-0.0124664306640625,-0.0267333984375,0.023040771484375,0.01265716552734375,-0.0026264190673828125,0.00955963134765625,-0.0036773681640625,-0.0394287109375,0.015716552734375,-0.01300048828125,0.0187225341796875,-0.01275634765625,-0.0273590087890625,0.045562744140625,-0.00913238525390625,-0.004268646240234375,-0.005107879638671875,-0.026702880859375,0.0015077590942382812,-0.02862548828125,0.0003228187561035156,0.0099334716796875,-0.0305328369140625,-0.0362548828125,0.0114898681640625,-0.00025653839111328125,-0.0022735595703125,0.0106201171875,0.01090240478515625,0.00992584228515625,0.00998687744140625,-0.00634002685546875,0.00711822509765625,-0.02337646484375,-0.01367950439453125,-0.006389617919921875,-0.006000518798828125,0.01027679443359375,-0.00838470458984375,0.004673004150390625,0.002841949462890625,0.014404296875,-0.02838134765625,0.023834228515625,-0.00823974609375,-0.038970947265625,0.003002166748046875,-0.04510498046875,-0.0265655517578125,-0.0036182403564453125,-0.046661376953125,-0.01062774658203125,-0.05804443359375,-0.02117919921875,-0.029815673828125,0.036712646484375,-0.0069122314453125,0.0079345703125,0.0164794921875,-0.007534027099609375,-0.01111602783203125,0.0135650634765625,-0.0017242431640625,0.009490966796875,-0.0222320556640625,0.043853759765625,0.054718017578125,-0.003208160400390625,-0.004199981689453125,0.01529693603515625,-0.007190704345703125,0.00637054443359375,-0.004749298095703125,-0.0217132568359375,-0.0093841552734375,-0.0335693359375,-0.0017490386962890625,0.0081939697265625,0.0247802734375,0.0148468017578125,0.026763916015625,0.002079010009765625,0.0292816162109375,0.04705810546875,0.02166748046875,-0.0120697021484375,0.01050567626953125,0.0131988525390625,0.0169525146484375,0.0291595458984375,-0.00270843505859375,-0.0095062255859375,-0.0211944580078125,-0.035980224609375,0.006805419921875,0.002735137939453125,0.043731689453125,-0.01515960693359375,0.0010576248168945312,-0.00913238525390625,0.001293182373046875,-0.00027489662170410156,-0.00868988037109375,0.007389068603515625,0.0023212432861328125,-0.01528167724609375,0.017852783203125,-0.03643798828125,0.045623779296875,-0.0030364990234375,-0.0271453857421875,0.0268402099609375,-0.0033473968505859375,0.0186920166015625,-0.0225067138671875,0.0125732421875,-0.01386260986328125,-0.0218658447265625,0.01248931884765625,0.025848388671875,0.021453857421875,0.008056640625,0.025421142578125,0.01224517822265625,0.0208740234375,-0.003856658935546875,-0.021209716796875,-0.00545501708984375,-0.0254058837890625,0.04388427734375,0.0204315185546875,-0.0072174072265625,-0.0110626220703125,0.0007481575012207031,-0.0022411346435546875,-0.046905517578125,-0.028472900390625,0.0196533203125,0.014129638671875,0.0130615234375,-0.01288604736328125,-0.03607177734375,-0.01568603515625,-0.00814056396484375,-0.01499176025390625,0.0112152099609375,-0.00360870361328125,0.024688720703125,-0.0189361572265625,-0.007122039794921875,0.00634002685546875,-0.00626373291015625,-0.000766754150390625,0.0193939208984375,-0.002841949462890625,0.041717529296875,-0.00016701221466064453,-0.043365478515625,-0.023773193359375,0.0283660888671875,0.0245208740234375,-0.055450439453125,0.01096343994140625,-0.0180511474609375,0.0189056396484375,0.0164947509765625,-0.033111572265625,0.0262603759765625,0.0294189453125,0.00084686279296875,0.0279388427734375,-0.003910064697265625,0.002910614013671875,0.00890350341796875,-0.033843994140625,0.004856109619140625,0.00033974647521972656,-0.056549072265625,-0.0110626220703125,-0.0178375244140625,0.006381988525390625,0.018798828125,0.0205230712890625,-0.05609130859375,-0.01023101806640625,-0.001201629638671875,-0.02227783203125,0.01910400390625,0.006931304931640625,0.0017032623291015625,-0.01849365234375,-0.0249786376953125,-0.0176849365234375,0.007389068603515625,-0.01025390625,0.036407470703125,-0.0275421142578125,0.021514892578125,-0.0198822021484375,-0.0189056396484375,-0.0156402587890625,0.01025390625,0.02197265625,-0.007740020751953125,-0.034515380859375,0.0011262893676757812,0.024566650390625,0.0229339599609375,0.004810333251953125,-0.01171875,-0.0238189697265625,0.021392822265625,0.0008301734924316406,0.019378662109375,-0.00894927978515625,-0.01496124267578125,0.01558685302734375,-0.0229339599609375,0.00020587444305419922,-0.0202178955078125,0.0298919677734375,0.00969696044921875,-0.0011949539184570312,-0.007144927978515625,-0.0198211669921875,0.0030422210693359375,-0.037811279296875,-0.039306640625,-0.027587890625,-0.0274810791015625,0.025390625,-0.0333251953125,-0.0062103271484375,-0.016876220703125,0.002651214599609375,-0.0020275115966796875,0.042144775390625,0.013092041015625,0.01690673828125,0.0268707275390625,0.0082244873046875,0.066650390625,0.0053253173828125,0.08526611328125,-0.0146331787109375,-0.0261688232421875,-0.04266357421875,0.004474639892578125,-0.005229949951171875,-0.01806640625,0.00479888916015625,0.00183868408203125,-0.01030731201171875,0.0028285980224609375,-0.0239410400390625,0.0166778564453125,0.0006723403930664062,-0.00923919677734375,-0.00504302978515625,0.0159759521484375,-0.0248260498046875,0.03179931640625,-0.01517486572265625,-0.0006771087646484375,-0.0117645263671875,0.016510009765625,0.00168609619140625,-0.016387939453125,0.0421142578125,-0.00951385498046875,-0.00388336181640625,-0.04559326171875,-0.0194091796875,0.043853759765625,-0.007541656494140625,0.0275421142578125,-0.005645751953125,0.003803253173828125,-0.01438140869140625,0.018218994140625,-0.006381988525390625,-0.012664794921875,-0.011962890625,0.035186767578125,0.0225067138671875,-0.005321502685546875,-0.007659912109375,0.0022792816162109375,-0.00830078125,-0.0092926025390625,-0.0278778076171875,-0.00011402368545532227,0.0027523040771484375,0.0082855224609375,0.0175933837890625,0.0029430389404296875,0.0721435546875,0.01525115966796875,-0.059967041015625,-0.0626220703125,0.0222625732421875,-0.05810546875,-0.01192474365234375,-0.0056610107421875,0.0173492431640625,-0.0008497238159179688,-0.01050567626953125,-0.01558685302734375,0.0032196044921875,0.00745391845703125,-0.05029296875,0.00310516357421875,0.0333251953125,-0.01166534423828125,-0.0347900390625,-0.00830078125,0.01305389404296875,0.01030731201171875,0.017730712890625,-0.007415771484375,-0.00287628173828125,0.01197052001953125,-0.004016876220703125,-0.038421630859375,0.000743865966796875,-0.006237030029296875,0.0511474609375,-0.003826141357421875,-0.00838470458984375,-0.007572174072265625,0.00522613525390625,0.01514434814453125,0.00557708740234375,-0.035186767578125,0.0077056884765625,-0.0330810546875,-0.0043487548828125,-0.0307464599609375,-0.00670623779296875,0.01395416259765625,-0.0247039794921875,-0.03399658203125,0.0176849365234375,-0.00827789306640625,-0.0132293701171875,0.011016845703125,0.00740814208984375,-0.022735595703125,0.01110076904296875,-0.0127105712890625,-0.01074981689453125,-0.04150390625,-0.05438232421875,-0.0014743804931640625,-0.00507354736328125,-0.05291748046875,-0.0126800537109375,0.032135009765625,0.0266571044921875,-0.0240020751953125,-0.0033702850341796875,0.0021076202392578125,0.0206756591796875,0.01454925537109375,-0.00954437255859375,0.0178680419921875,0.004734039306640625,-0.0014028549194335938,0.0109710693359375,-0.0200042724609375,-0.030029296875,0.04022216796875,-0.0190887451171875,0.028594970703125,0.0205841064453125,-0.0028095245361328125,0.0024242401123046875,-0.0151214599609375,0.0025386810302734375,-0.006633758544921875,0.01265716552734375,-0.019073486328125,0.0030384063720703125,-0.024871826171875,-0.01148223876953125,0.00914764404296875,-0.004367828369140625,-0.0186920166015625,0.021514892578125,-0.027435302734375,0.00736236572265625,0.037872314453125,-0.00222015380859375,0.0041351318359375,-0.0224151611328125,-0.0255279541015625,0.03271484375,-0.0242919921875,0.0097198486328125,-0.02008056640625,-0.01003265380859375,-0.0215606689453125,-0.00974273681640625,-0.0428466796875,-0.0343017578125,-0.0006017684936523438,-0.0230865478515625,0.020782470703125,0.01134490966796875,0.0107421875,-0.0165863037109375,-0.0043487548828125,0.0165252685546875,0.0276947021484375,0.0051116943359375,0.03497314453125,0.0288848876953125,0.0205230712890625,-0.0099029541015625,0.0014505386352539062,-0.045074462890625,-0.0226898193359375,0.002422332763671875,0.0013151168823242188,-0.0031642913818359375,-0.0247344970703125,0.013885498046875,-0.002410888671875,0.046051025390625,0.0328369140625,0.04193115234375,0.006710052490234375,-0.004138946533203125,-0.031768798828125,0.024658203125,0.00417327880859375,-0.01116943359375,0.0097198486328125,-0.021270751953125,0.0285491943359375,0.02581787109375,0.0167083740234375,0.0206298828125,0.009185791015625,0.00794219970703125,-0.0022792816162109375,0.004337310791015625,-0.01166534423828125,-0.01227569580078125,0.00905609130859375,0.0156707763671875,-0.04217529296875,0.025054931640625,-0.01058197021484375,0.0171356201171875,0.001369476318359375,0.003917694091796875,-0.00817108154296875,0.026123046875,0.0200042724609375,-0.0294189453125,0.032440185546875,-0.0297393798828125,-0.0109100341796875,-0.00856781005859375,0.0034465789794921875,0.0186920166015625,0.0199737548828125,-0.03558349609375,-0.025146484375,-0.009307861328125,0.0081024169921875,0.0131378173828125,0.0117340087890625,0.0063018798828125,0.0000546574592590332,0.01898193359375,-0.0167694091796875,0.01666259765625,0.0374755859375,0.02374267578125,-0.0103912353515625,0.01207733154296875,-0.032989501953125,-0.004108428955078125,-0.0026798248291015625,0.01166534423828125,0.0257568359375,-0.056732177734375,0.0282745361328125,-0.0034351348876953125,-0.007415771484375,0.0081634521484375,0.029998779296875,0.0019369125366210938,-0.0014734268188476562,0.004573822021484375,0.04296875,0.025665283203125,-0.0121307373046875,0.029266357421875,0.016815185546875,-0.002536773681640625,-0.015045166015625,-0.0211334228515625,0.0020351409912109375,0.008087158203125,-0.004528045654296875,-0.0172882080078125,0.023712158203125,0.0305633544921875,0.0213470458984375,-0.0154266357421875,-0.035675048828125,0.0002543926239013672,0.01149749755859375,0.00833892822265625,0.01506805419921875,0.019500732421875,-0.01265716552734375,0.01947021484375,0.0242767333984375,-0.017486572265625,-0.01294708251953125,-0.012603759765625,-0.0093994140625,-0.00226593017578125,0.020355224609375,-0.0369873046875,0.0166168212890625,0.034332275390625,-0.0240631103515625,-0.03558349609375,0.036376953125,-0.009246826171875,0.0041656494140625,0.0439453125,-0.023284912109375,0.004749298095703125,-0.0232391357421875,-0.0105743408203125,-0.01030731201171875,-0.01318359375,0.0220184326171875,0.005840301513671875,0.0217437744140625,-0.01007080078125,0.01398468017578125,0.0019063949584960938,-0.011383056640625,-0.00424957275390625,-0.0208282470703125,0.012237548828125,0.01526641845703125,0.00959014892578125,0.027191162109375,0.001735687255859375,0.0177154541015625,-0.01139068603515625,0.0218963623046875,0.03814697265625,-0.018951416015625,0.011016845703125,-0.01287078857421875,0.046875,-0.007415771484375,0.01198577880859375,-0.02532958984375,0.00311279296875,0.018524169921875,0.005390167236328125,-0.01435089111328125,0.0018949508666992188,0.0421142578125,0.0045928955078125,-0.006099700927734375,0.007049560546875,0.00502777099609375,-0.00963592529296875,0.00894927978515625,-0.034515380859375,-0.0035114288330078125,-0.0142974853515625,-0.034515380859375,-0.02142333984375,0.017608642578125,-0.014892578125,-0.01244354248046875,-0.017486572265625,0.00013899803161621094,0.00011283159255981445,-0.00756072998046875,-0.0132293701171875,0.0108489990234375,0.0305328369140625,-0.001163482666015625,-0.002880096435546875,-0.0007386207580566406,0.00370025634765625,0.00797271728515625,-0.010528564453125,-0.0073089599609375,-0.0279693603515625,-0.01343536376953125,-0.005908966064453125,-0.0003764629364013672,0.053955078125,0.0237884521484375,-0.053497314453125,-0.01165771484375,-0.037628173828125,0.0099639892578125,-0.02386474609375,0.032958984375,0.0239715576171875,0.0016231536865234375,-0.033111572265625,0.0007448196411132812,0.0245819091796875,-0.0094757080078125,-0.03131103515625,-0.02459716796875,0.021453857421875,0.01398468017578125,-0.0017442703247070312,0.054107666015625,0.0193328857421875,0.0057373046875,0.03485107421875,0.0258636474609375,0.004131317138671875,-0.02239990234375,-0.002368927001953125,0.01102447509765625,-0.017181396484375,0.01454925537109375,-0.0119781494140625,-0.0017871856689453125,-0.0166778564453125,0.008544921875,-0.0135345458984375,-0.03192138671875,0.0030956268310546875,-0.0279083251953125,0.0235595703125,-0.017974853515625,0.0108184814453125,0.0031032562255859375,-0.003093719482421875,-0.014129638671875,0.01361083984375,-0.03619384765625,-0.00826263427734375,0.033477783203125,-0.004150390625,0.0157012939453125,0.0011501312255859375,0.059844970703125,-0.01555633544921875,0.031219482421875,0.0177001953125,-0.0307464599609375,0.01264190673828125,0.0291290283203125,0.01045989990234375,-0.0097503662109375,0.01226806640625,0.00598907470703125,0.01849365234375,-0.02801513671875,-0.0112152099609375,-0.006011962890625,-0.006664276123046875,0.00928497314453125,0.0002186298370361328,-0.0012874603271484375,-0.0233001708984375,-0.0065155029296875,-0.0220947265625,-0.00310516357421875,0.049041748046875,-0.04925537109375,0.0262451171875,-0.0028095245361328125,-0.0091400146484375,0.0240631103515625,-0.002864837646484375,0.0120391845703125,-0.021942138671875,0.0347900390625,0.023834228515625,-0.0134429931640625,0.00028228759765625,0.0277557373046875,0.03082275390625,0.006237030029296875,-0.015350341796875,-0.005039215087890625,0.0145416259765625,0.01226806640625,-0.01474761962890625,-0.004917144775390625,-0.005733489990234375,-0.010986328125,0.0223236083984375,0.0224609375,-0.035736083984375,-0.008544921875,-0.0009150505065917969,-0.0119476318359375,0.0178070068359375,-0.005352020263671875,-0.01558685302734375,-0.0208740234375,-0.0160675048828125,0.0069122314453125,-0.0357666015625,0.01319122314453125,-0.00457000732421875,0.00502777099609375,-0.0006170272827148438,0.0032196044921875,-0.008209228515625,0.0026721954345703125,-0.022705078125,0.01666259765625,-0.0217132568359375,-0.024017333984375,-0.00527191162109375,0.0005908012390136719,0.0028228759765625,-0.0205841064453125,-0.05108642578125,0.02947998046875,-0.00861358642578125,-0.035552978515625,-0.0090484619140625,-0.044464111328125,-0.0284881591796875,0.004901885986328125,0.00669097900390625,0.020538330078125,0.01218414306640625,0.01477813720703125,0.0011930465698242188,0.027587890625,-0.037811279296875,0.0273284912109375,-0.0006680488586425781,0.0179901123046875,0.047393798828125,0.033355712890625,-0.018646240234375,-0.031585693359375,-0.0190887451171875,0.0059051513671875,-0.005916595458984375,0.0247802734375,0.00881195068359375,-0.004108428955078125,-0.0091552734375,0.021697998046875,-0.0207061767578125,0.0207977294921875,-0.048095703125,-0.01544189453125,0.015533447265625,0.0228424072265625,0.0255126953125,-0.0172119140625,-0.0450439453125,0.0005936622619628906,0.0027103424072265625,0.03704833984375,-0.018218994140625,-0.00972747802734375,0.0067901611328125,-0.000598907470703125,-0.00482940673828125,-0.00786590576171875,0.0011510848999023438,0.0364990234375,-0.0128631591796875,-0.0198822021484375,0.0000896453857421875,-0.022735595703125,0.01479339599609375,-0.0034351348876953125,0.0120086669921875,0.0070037841796875,-0.01971435546875,0.04010009765625,0.0034389495849609375,-0.0109100341796875,0.01395416259765625,0.03509521484375,0.01096343994140625,-0.0209808349609375,-0.0009293556213378906,-0.00043487548828125,0.005519866943359375,-0.016448974609375,0.032470703125,0.0284881591796875,0.0144195556640625,-0.0307464599609375,0.0217437744140625,-0.0303497314453125,-0.05926513671875,0.01444244384765625,-0.01264190673828125,0.040313720703125,-0.012603759765625,-0.0178375244140625,-0.04339599609375,0.01222991943359375,-0.0025005340576171875,-0.010406494140625,-0.003086090087890625,-0.0214385986328125,0.01045989990234375,0.005886077880859375,-0.0175933837890625,0.04840087890625,-0.0168914794921875,0.01800537109375,-0.01354217529296875,-0.01383209228515625,0.04083251953125,0.034271240234375,0.021514892578125,0.04022216796875,0.0231781005859375,-0.01110076904296875,-0.0224151611328125,0.0021991729736328125,-0.01206207275390625,-0.01557159423828125,0.0548095703125,0.02618408203125,0.023956298828125,-0.00994110107421875,-0.004299163818359375,0.007030487060546875,-0.0113372802734375,0.0140228271484375,-0.01084136962890625,0.010711669921875,-0.0236358642578125,0.01776123046875,0.04461669921875,-0.0460205078125,-0.012969970703125,0.0078277587890625,-0.040313720703125,-0.004344940185546875,-0.00681304931640625,-0.00937652587890625,0.00601959228515625,-0.0086669921875,0.038238525390625,-0.00726318359375,-0.00667572021484375,-0.0282745361328125,-0.01448822021484375,-0.004566192626953125,0.002193450927734375,0.0408935546875,-0.018951416015625,-0.0347900390625,-0.0038661956787109375,0.0011167526245117188,0.00603485107421875,0.004985809326171875,0.004299163818359375,0.009552001953125,-0.04736328125,0.018310546875,0.004238128662109375,0.028839111328125,-0.02349853515625,0.00798797607421875,0.021270751953125,-0.01384735107421875,-0.02392578125,0.03662109375,0.0032825469970703125,0.056182861328125,-0.007129669189453125,-0.0014019012451171875,0.030426025390625,-0.017974853515625,-0.0118560791015625,0.0104827880859375,-0.0132293701171875,0.01959228515625,-0.0006871223449707031,-0.038055419921875,0.03125,0.01332855224609375,0.0675048828125,0.0005002021789550781,0.0117950439453125,0.0179901123046875,-0.0034618377685546875,-0.029205322265625,0.0136871337890625,-0.01409149169921875,-0.020111083984375,-0.06976318359375,-0.03985595703125,-0.020965576171875,0.002532958984375,-0.000797271728515625,0.00029206275939941406,-0.04278564453125,0.01293182373046875,-0.0178375244140625,-0.01496124267578125,-0.0289154052734375,-0.00551605224609375,-0.0135498046875,-0.0019350051879882812,-0.0008111000061035156,0.032958984375,0.005794525146484375,-0.00988006591796875,0.0147247314453125,0.0008878707885742188,-0.0347900390625,0.04827880859375,0.03656005859375,0.0005245208740234375,0.0078887939453125,0.0218048095703125,0.0177764892578125,0.02093505859375,-0.028656005859375,0.0273284912109375,-0.038818359375,0.01300811767578125,0.0174102783203125,0.01216888427734375,-0.0258941650390625,0.028778076171875,-0.024658203125,0.00337982177734375,-0.00594329833984375,-0.00948333740234375,0.036773681640625,-0.006595611572265625,-0.01033782958984375,0.001506805419921875,-0.03656005859375,-0.0239105224609375,0.041229248046875,-0.04071044921875,-0.0152435302734375,0.0151214599609375,0.037994384765625,-0.01058197021484375,-0.01062774658203125,0.002964019775390625,0.0294189453125,0.01041412353515625,0.038299560546875,-0.036163330078125,-0.036346435546875,-0.00850677490234375,-0.0098876953125,-0.051788330078125,0.02398681640625,-0.0219268798828125,0.023406982421875,0.008941650390625,0.010772705078125,-0.0265960693359375,-0.0099639892578125,-0.00727081298828125,0.0234222412109375,0.0023441314697265625,-0.01409912109375,0.01169586181640625,0.0023250579833984375,-0.0189208984375,-0.01013946533203125,-0.01739501953125,-0.0309295654296875,-0.00823974609375,0.029205322265625,0.01111602783203125,-0.01509857177734375,-0.01160430908203125,0.0173187255859375,0.0169830322265625,-0.00464630126953125,0.0253448486328125,0.0095062255859375,-0.0179443359375,0.0223846435546875,-0.0219879150390625,-0.0004260540008544922,-0.025421142578125,-0.007659912109375,-0.01485443115234375,-0.0166168212890625,0.011444091796875,0.0185394287109375,-0.02984619140625,0.061767578125,0.0189971923828125,-0.016693115234375,0.002613067626953125,-0.01242828369140625,0.0262298583984375,0.029388427734375,-0.0711669921875,-0.0263519287109375,0.01184844970703125,0.00977325439453125,-0.0232696533203125,-0.0131072998046875,0.00910186767578125,0.0251617431640625,0.04644775390625,-0.00033926963806152344,0.00894927978515625,0.01216888427734375,-0.00942230224609375,0.01220703125,0.002918243408203125,0.0167694091796875,0.0286865234375,0.01436614990234375,-0.02581787109375,-0.0123138427734375,-0.0143890380859375,0.0200042724609375,-0.020660400390625,-0.017791748046875,-0.006740570068359375,0.02484130859375,-0.028472900390625,-0.0142364501953125,-0.007534027099609375,0.021697998046875,-0.013580322265625,-0.003910064697265625,0.01214599609375,-0.01267242431640625,-0.005466461181640625,0.0239410400390625,0.01348876953125,0.0171661376953125,-0.00982666015625,-0.009613037109375,0.0189208984375,-0.01146697998046875,-0.01364898681640625,-0.021820068359375,-0.017181396484375,0.0097503662109375,-0.0240478515625,0.031829833984375,0.0172271728515625,0.01308441162109375,0.006938934326171875,0.0212249755859375,-0.007843017578125,-0.041839599609375,0.003757476806640625,-0.01332855224609375,-0.0081024169921875,-0.0252227783203125,0.0125732421875,0.00164794921875,-0.009490966796875,-0.0182647705078125,-0.03497314453125,-0.0187225341796875,-0.001026153564453125,-0.06793212890625,-0.05291748046875,-0.0297393798828125,-0.005031585693359375,-0.026519775390625,-0.00891876220703125,0.0096893310546875,-0.0189056396484375,0.01444244384765625,-0.0270233154296875,-0.0010528564453125,0.006771087646484375,-0.00942230224609375,0.03399658203125,-0.0203094482421875,-0.004795074462890625,0.0025959014892578125,0.01538848876953125,-0.00620269775390625,-0.035675048828125,-0.01142120361328125,0.0011234283447265625,-0.0278778076171875,0.00807952880859375,-0.017547607421875,0.0211639404296875,0.037139892578125,-0.0108642578125,-0.0287017822265625,-0.0008664131164550781,-0.00862884521484375,-0.006320953369140625,-0.00901031494140625,-0.012451171875,0.017913818359375,0.005092620849609375,-0.04345703125,-0.027801513671875,0.023040771484375,0.007328033447265625,-0.013916015625,-0.007678985595703125,-0.0031185150146484375,0.01546478271484375,0.02020263671875,-0.01259613037109375,0.0040130615234375,0.005023956298828125,0.00421142578125,-0.0018835067749023438,0.0369873046875,-0.0006284713745117188,0.007049560546875,-0.0213165283203125,-0.02215576171875,-0.05023193359375,-0.006420135498046875,0.001811981201171875,0.01995849609375,0.007694244384765625,-0.0081329345703125,-0.0347900390625,0.01042938232421875,-0.03131103515625,0.0312042236328125,-0.00971221923828125,-0.0352783203125,0.021209716796875,-0.009490966796875,0.00710296630859375,-0.004848480224609375,-0.01030731201171875,0.0037136077880859375,0.0234222412109375,0.004337310791015625,-0.03436279296875,0.0008835792541503906,-0.036712646484375,0.007740020751953125,0.003978729248046875,-0.0178985595703125,-0.0027065277099609375,0.035491943359375,0.01148223876953125,0.01496124267578125,-0.0025386810302734375,0.014404296875,0.007572174072265625,0.016876220703125,-0.0023212432861328125,0.002727508544921875,-0.005374908447265625,0.01690673828125,-0.020599365234375,-0.00002384185791015625,0.0305328369140625,-0.052734375,0.01496124267578125,0.0039215087890625,-0.00762176513671875,0.031585693359375,-0.01617431640625,-0.01222991943359375,0.00873565673828125,-0.033966064453125,0.01061248779296875,-0.0209197998046875,-0.0198516845703125,0.035247802734375,0.0244598388671875,0.0082550048828125,-0.00787353515625,-0.01544952392578125,0.01302337646484375,-0.0166168212890625,-0.0147247314453125,0.02618408203125,-0.0158233642578125,-0.0394287109375,0.0151214599609375,-0.004146575927734375,-0.035369873046875,0.045928955078125,0.04241943359375,0.01354217529296875,0.0343017578125,-0.007183074951171875,0.0129241943359375,-0.004955291748046875,0.025299072265625,0.01538848876953125,-0.0054779052734375,-0.00630950927734375,-0.010711669921875,0.043914794921875,-0.004856109619140625,0.05169677734375,-0.020111083984375,0.023406982421875,-0.0021114349365234375,-0.039215087890625,-0.01314544677734375,-0.0036773681640625,0.01031494140625,-0.00981903076171875,0.01366424560546875,0.0101776123046875,0.0274658203125,-0.0386962890625,0.0194244384765625,-0.04803466796875,0.033172607421875,0.0269775390625,-0.0176849365234375,-0.0016927719116210938,-0.02783203125,0.0015516281127929688,0.01325225830078125,-0.028472900390625,0.01470947265625,0.036773681640625,-0.038482666015625,-0.0009303092956542969,0.0236053466796875,-0.00498199462890625,0.0165557861328125,0.00003445148468017578,-0.03741455078125,-0.0517578125,-0.0090179443359375,-0.033966064453125,-0.0170440673828125,0.0013637542724609375,-0.04473876953125,-0.059478759765625,-0.0165557861328125,-0.047119140625,-0.033721923828125,0.018890380859375,0.00160980224609375,0.050811767578125,-0.0221099853515625,0.0306396484375,-0.01096343994140625,-0.007175445556640625,0.01580810546875,-0.00650787353515625,-0.00467681884765625,0.0256500244140625,0.006931304931640625,0.00316619873046875,-0.0170745849609375,-0.003265380859375,0.00554656982421875,-0.0166473388671875,0.0006661415100097656,0.0297393798828125,-0.00568389892578125,0.01043701171875,-0.03863525390625,0.01531982421875,0.021087646484375,0.002185821533203125,0.00977325439453125,-0.028594970703125,-0.0166473388671875,-0.00018537044525146484,-0.0014066696166992188,0.014312744140625,0.025299072265625,-0.0149383544921875,0.001495361328125,0.03692626953125,0.00438690185546875,0.05572509765625,-0.00350189208984375,0.0156402587890625,0.005992889404296875,-0.005748748779296875,-0.01739501953125,0.017059326171875,0.0006203651428222656,-0.0163726806640625,-0.0203704833984375,-0.005962371826171875,0.006130218505859375,-0.00022983551025390625,-0.014007568359375,-0.0025844573974609375,-0.0171356201171875,0.0130157470703125,-0.005809783935546875,0.0174560546875,-0.0196075439453125,-0.017486572265625,-0.035369873046875,0.0016012191772460938,-0.02008056640625,-0.0213775634765625,0.04119873046875,-0.0125732421875,-0.00983428955078125,0.01010894775390625,-0.01099395751953125,-0.009613037109375,-0.01091766357421875,0.0032520294189453125,-0.004924774169921875,-0.041656494140625,0.01227569580078125,0.011077880859375,-0.040740966796875,0.002017974853515625,-0.0193023681640625,0.014739990234375,-0.0018491744995117188,0.008636474609375,0.017791748046875,-0.0012598037719726562,-0.004123687744140625,-0.006511688232421875,-0.0179443359375,-0.03619384765625,-0.0009822845458984375,0.0066680908203125,-0.0012950897216796875,0.0031185150146484375,-0.05401611328125,0.0266876220703125,-0.035308837890625,-0.0234375,0.0234222412109375,-0.037384033203125,0.002349853515625,0.01290130615234375,-0.0321044921875,0.019622802734375,-0.052337646484375,-0.00556182861328125,0.005496978759765625,0.0078125,0.010101318359375,-0.0055084228515625,0.021087646484375,0.016754150390625,0.0192413330078125,-0.024261474609375,0.0457763671875,-0.0185394287109375,0.0007729530334472656,0.0173187255859375,0.0224456787109375,0.0283355712890625,0.00576019287109375,0.04150390625,-0.005279541015625,0.01000213623046875,0.01496124267578125,0.003604888916015625,-0.033447265625,0.013824462890625,-0.0014410018920898438,-0.0225067138671875,-0.0017547607421875,0.0235443115234375,0.0171966552734375,0.0234375,-0.00482177734375,-0.0062103271484375,0.01885986328125,-0.003917694091796875,0.0172119140625,0.0240478515625,-0.006069183349609375,-0.0166015625,-0.00955963134765625,-0.01861572265625,0.0198822021484375,-0.046875,-0.0011920928955078125,-0.00972747802734375,0.01349639892578125,-0.00629425048828125,-0.0087738037109375,0.01393890380859375,0.0006022453308105469,-0.007038116455078125,-0.017181396484375,-0.00965118408203125,0.0133514404296875,-0.0025787353515625,0.017547607421875,-0.0276641845703125,0.018890380859375,0.01517486572265625,-0.0311737060546875,-0.016815185546875,0.00264739990234375,-0.0214080810546875,0.0181884765625,-0.01145172119140625,-0.0011072158813476562,0.02880859375,0.00782012939453125,-0.0238037109375,0.039031982421875,-0.00690460205078125,0.0018301010131835938,0.0305023193359375,0.005344390869140625,-0.003803253173828125,-0.033782958984375,0.01241302490234375,0.0206146240234375,0.00766754150390625,0.0177459716796875,-0.002201080322265625,-0.01444244384765625,0.031402587890625,-0.04498291015625,-0.02203369140625,-0.017486572265625,0.031341552734375,0.032562255859375,-0.031951904296875,0.0182037353515625,-0.01207733154296875,0.0235748291015625,0.0391845703125,0.00971221923828125,0.029388427734375,-0.038360595703125,0.025726318359375,-0.0040435791015625,0.020233154296875,0.0009427070617675781,0.0347900390625,-0.0226287841796875,0.01318359375,0.01505279541015625,0.01042938232421875,-0.011749267578125,-0.022705078125,-0.006938934326171875,0.008087158203125,-0.00205230712890625,-0.018463134765625,0.02960205078125,-0.0309600830078125,-0.024749755859375,0.004817962646484375,-0.01258087158203125,0.00850677490234375,-0.00560760498046875,-0.021881103515625,-0.004638671875,0.0244903564453125,-0.020416259765625,0.02655029296875,-0.0226287841796875,0.030029296875,0.024139404296875,0.03497314453125,0.0161285400390625,0.0206756591796875,-0.040924072265625,0.01042938232421875,0.048126220703125,0.006565093994140625,-0.00260162353515625,0.037139892578125,0.0006361007690429688,-0.01007843017578125,0.0282745361328125,-0.013702392578125,0.044525146484375,-0.006237030029296875,0.034637451171875,0.0285186767578125,0.0124053955078125,-0.034423828125,0.0007100105285644531,-0.045501708984375,-0.0219268798828125,-0.00836181640625,-0.03704833984375,-0.07000732421875,0.006748199462890625,-0.0036602020263671875,0.00751495361328125,-0.0162353515625,-0.0137176513671875,0.0227203369140625,0.001644134521484375,-0.028656005859375,-0.00397491455078125,-0.0088043212890625,-0.0007772445678710938,0.035797119140625,0.0389404296875,0.0380859375,-0.005031585693359375,0.0059967041015625,-0.016815185546875,-0.0027980804443359375,0.0127410888671875,0.03399658203125,-0.0003867149353027344,0.00679779052734375,-0.0079193115234375,-0.02294921875,0.023101806640625,0.0009560585021972656,0.042694091796875,-0.031768798828125,-0.00247955322265625,0.0197296142578125,0.0196075439453125,-0.0229339599609375,-0.0250396728515625,-0.0006723403930664062,0.011871337890625,0.0308990478515625,0.002803802490234375,0.003803253173828125,-0.0112762451171875,0.0016689300537109375,-0.040985107421875,0.0175933837890625,0.029083251953125,-0.00962066650390625,-0.0384521484375,-0.006683349609375,0.00439453125,0.0269012451171875,0.02252197265625,-0.027587890625,0.003749847412109375,-0.004119873046875,-0.015228271484375,-0.031036376953125,-0.0042724609375,-0.043853759765625,-0.0016918182373046875,-0.015411376953125,0.03643798828125,-0.03814697265625,0.020599365234375,-0.007030487060546875,-0.02532958984375,-0.0216522216796875,0.0016412734985351562,0.00982666015625,0.0205230712890625,0.02484130859375,0.0078887939453125,-0.0261077880859375,0.0247039794921875,-0.01251983642578125,0.0090789794921875,0.013092041015625,0.0082550048828125,0.006603240966796875,-0.00423431396484375,0.01424407958984375,0.01349639892578125,-0.02264404296875,0.0236358642578125,-0.001506805419921875,0.007030487060546875,-0.01727294921875,-0.0249481201171875,-0.00611114501953125,0.0177459716796875,-0.0077056884765625,0.023773193359375,0.01357269287109375,0.012237548828125,0.0338134765625,-0.029022216796875,0.02880859375,-0.0018472671508789062,-0.024139404296875,-0.032989501953125,0.055084228515625,0.02984619140625,0.040618896484375,0.0006160736083984375,0.03814697265625,0.022552490234375,-0.01071929931640625,0.0250091552734375,0.033782958984375,0.00806427001953125,-0.005443572998046875,-0.00899505615234375,-0.00969696044921875,0.01045989990234375,0.037384033203125,0.01308441162109375,-0.01435089111328125,-0.0032367706298828125,0.0186004638671875,-0.0330810546875,-0.014617919921875,0.01088714599609375,-0.00847625732421875,0.02984619140625,-0.0283355712890625,0.023162841796875,0.019134521484375,-0.01218414306640625,-0.033966064453125,-0.028839111328125,-0.022552490234375,-0.02001953125,0.005214691162109375,-0.01418304443359375,0.0035915374755859375,-0.011993408203125,0.0076751708984375,-0.0098876953125,-0.002002716064453125,-0.0008831024169921875,-0.01294708251953125,-0.05120849609375,0.0008082389831542969,0.0205535888671875,-0.0017843246459960938,0.006366729736328125,0.0137939453125,0.060699462890625,-0.0177459716796875,-0.005641937255859375,0.0170440673828125,0.0026397705078125,0.009857177734375,-0.024658203125,0.006175994873046875,0.04205322265625,0.0253143310546875,0.00972747802734375,0.0031375885009765625,-0.022064208984375,0.0006480216979980469,-0.004180908203125,-0.00794219970703125,-0.015106201171875,-0.00901031494140625,-0.00812530517578125,-0.01406097412109375,-0.0247039794921875,-0.0221405029296875,0.025543212890625,0.037353515625,-0.01702880859375,-0.0021762847900390625,0.0237274169921875,0.016632080078125,-0.0335693359375,0.002178192138671875,-0.022705078125,-0.011810302734375,0.01666259765625,0.0287628173828125,-0.02313232421875,-0.011199951171875,0.026702880859375,-0.0195770263671875,0.0278778076171875,0.0106658935546875,-0.0199432373046875,-0.035919189453125,0.028656005859375,0.0009784698486328125,-0.004291534423828125,-0.0309906005859375,0.03277587890625,0.011260986328125,0.0112457275390625,-0.034698486328125,-0.01111602783203125,0.0309906005859375,0.042236328125<span class=o>]</span>,<span class=s2>&#34;object&#34;</span>:<span class=s2>&#34;embedding&#34;</span><span class=o>}]</span>,<span class=s2>&#34;model&#34;</span>:<span class=s2>&#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;</span>,<span class=s2>&#34;usage&#34;</span>:<span class=o>{</span><span class=s2>&#34;prompt_tokens&#34;</span>:10,<span class=s2>&#34;total_tokens&#34;</span>:10<span class=o>}}</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=setup-users>Setup Users</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll create users for each workshop participant, with a namespace and resource
quota for each.</p><h2 id=create-user-namespaces-and-resource-quotas>Create User Namespaces and Resource Quotas<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> user-setup
</span></span><span class=line><span class=cl>./create-namespaces.sh</span></span></code></pre></div><h2 id=create-users>Create Users<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create an HTPasswd file with participant credentials, then replace
the ROSA-managed HTPasswd IdP with a custom one:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./create-users.sh</span></span></code></pre></div><h2 id=re-create-the-cluster-admin-user-then-login-again>Re-create the cluster-admin user then login again<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Re-create the cluster-admin user then login again:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa create admin -c rosa-test
</span></span><span class=line><span class=cl>oc login &lt;Cluster API URL&gt; --username cluster-admin --password &lt;cluster admin password&gt;</span></span></code></pre></div><h2 id=add-role-to-users>Add Role to Users<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Grant each user access to their namespace only:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./add-role-to-users.sh</span></span></code></pre></div><p>Note: if you see errors such as the following, they can be safely ignored</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Warning: User &#39;participant1&#39; not found
clusterrole.rbac.authorization.k8s.io/admin added: &#34;participant1&#34;</code></pre></div><h2 id=test-login>Test Login<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=install-the-openshift-cli>Install the OpenShift CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To test the logins from our local machine, we&rsquo;ll need to install the OpenShift CLI.</p><p>For MacOS, we can install the OpenShift CLI using the Homebrew package manager:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install openshift-cli</span></span></code></pre></div><p>For other installation options, please refer to the <a href=https://docs.redhat.com/en/documentation/openshift_container_platform/4.8/html/cli_tools/openshift-cli-oc rel=external>OpenShift documentation</a>.</p><h3 id=login-as-workshop-user>Login as Workshop User<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Try logging in as one of the workshop users from your local machine:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc login https://api.&lt;cluster-domain&gt;:443 -u participant1 -p <span class=s1>&#39;TempPass123!&#39;</span></span></span></code></pre></div><p>It should say something like:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Login successful.

You have one project on this server: &#34;workshop-participant-1&#34;</code></pre></div><h3 id=confirm-access-to-the-llm>Confirm Access to the LLM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Let&rsquo;s ensure we can access the LLM from the workshop user account.</p><p>Start a pod that has access to the curl command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run curl --rm -it --image<span class=o>=</span>curlimages/curl:latest <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --overrides<span class=o>=</span><span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;spec&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;containers&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;name&#34;: &#34;curl&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;image&#34;: &#34;curlimages/curl:latest&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stdin&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;tty&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;command&#34;: [&#34;sh&#34;],
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;resources&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;limits&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;cpu&#34;: &#34;50m&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;memory&#34;: &#34;100Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          },
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;requests&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;cpu&#34;: &#34;50m&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;memory&#34;: &#34;100Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          }
</span></span></span><span class=line><span class=cl><span class=s1>        }
</span></span></span><span class=line><span class=cl><span class=s1>      }]
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><p>Then run the following command to send a prompt to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-d334615059c7f140a28e7d976c0910e8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6ba2f2dfb172d9dc7d990e72dbb60709 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d334615059c7f140a28e7d976c0910e8","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-ab50f0472f26f72b3004ae36b6dc484a aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d334615059c7f140a28e7d976c0910e8","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6ba2f2dfb172d9dc7d990e72dbb60709 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X <span class=s2>&#34;POST&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> <span class=s1>&#39;http://meta-llama-3-2-1b-instruct.nim-service:8000/v1/chat/completions&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;model&#34;: &#34;meta/llama-3.2-1b-instruct&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;messages&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>        {
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;content&#34;:&#34;What is the capital of Canada?&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;role&#34;: &#34;user&#34;
</span></span></span><span class=line><span class=cl><span class=s1>        }],
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;top_p&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;n&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;max_tokens&#34;: 1024,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stream&#34;: false,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;frequency_penalty&#34;: 0.0,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stop&#34;: [&#34;STOP&#34;]
</span></span></span><span class=line><span class=cl><span class=s1>      }&#39;</span></span></span></code></pre></div></div></div><div id=R-tab-id-ab50f0472f26f72b3004ae36b6dc484a data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;chatcmpl-2ccfcd75a0214518aab0ef0375f8ca21&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;object&#34;</span>: <span class=s2>&#34;chat.completion&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;created&#34;</span>: 1758919002,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;model&#34;</span>: <span class=s2>&#34;meta/llama-3.2-1b-instruct&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;choices&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;index&#34;</span>: 0,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;message&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;role&#34;</span>: <span class=s2>&#34;assistant&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reasoning_content&#34;</span>: null,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;content&#34;</span>: <span class=s2>&#34;The capital of Canada is Ottawa.&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;tool_calls&#34;</span>: <span class=o>[]</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;logprobs&#34;</span>: null,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;finish_reason&#34;</span>: <span class=s2>&#34;stop&#34;</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;stop_reason&#34;</span>: null
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>]</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;usage&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens&#34;</span>: 42,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;total_tokens&#34;</span>: 50,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;completion_tokens&#34;</span>: 8,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;prompt_tokens_details&#34;</span>: null
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;prompt_logprobs&#34;</span>: null
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 2, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=install-the-opentelemetry-collector>Install the OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll install the OpenTelemetry collector with only the clusterReceiver enabled
(as the workshop participants will install their own agent in their namespace).
We&rsquo;ll then take the ClusterRole created by this collector installation and bind it to
each of the workshop participant namespaces.</p><h2 id=install-the-opentelemetry-collector>Install the OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>First, we&rsquo;ll create a new project for the collector and switch to that project:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc new-project admin-otel </span></span></code></pre></div><p>Add the Splunk OpenTelemetry Collector for Kubernetes&rsquo; Helm chart repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart</span></span></code></pre></div><p>Ensure the repository is up-to-date:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update</span></span></code></pre></div><p>Review the file named <code>./admin-otel-collector/admin-otel-collector-values.yaml</code> as we&rsquo;ll be using it
to install the OpenTelemetry collector.</p><p>Set environment variables to configure the Splunk environment you&rsquo;d like
the collector to send data to:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CLUSTER_NAME</span><span class=o>=</span>ai-pod-workshop-admin
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENVIRONMENT_NAME</span><span class=o>=</span>ai-pod-workshop-admin
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_ACCESS_TOKEN</span><span class=o>=</span>&lt;your access token <span class=k>for</span> Splunk Observability Cloud&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_REALM</span><span class=o>=</span>&lt;your realm <span class=k>for</span> Splunk Observability Cloud i.e. us0, us1, eu0, etc.&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_HEC_URL</span><span class=o>=</span>&lt;HEC endpoint to send logs to Splunk platform i.e. https://&lt;hostname&gt;:443/services/collector/event&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_HEC_TOKEN</span><span class=o>=</span>&lt;HEC token to send logs to Splunk platform&gt; 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_INDEX</span><span class=o>=</span>splunk4rookies-workshop</span></span></code></pre></div><p>Then install the collector using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$SPLUNK_ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$SPLUNK_REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$SPLUNK_HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$SPLUNK_HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./admin-otel-collector/admin-otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n admin-otel <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><p>Run the following command to confirm that all of the collector pods are running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>oc get pods -n admin-otel

NAME                                                          READY   STATUS    RESTARTS   AGE
splunk-otel-collector-k8s-cluster-receiver-7b7f5cdc5b-rhxsj   1/1     Running   0          6m40s</code></pre></div><h2 id=create-service-account-for-each-workshop-participant-and-bind-to-cluster-role>Create Service Account for each Workshop Participant and Bind to Cluster Role<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span> i in <span class=o>{</span>1..30<span class=o>}</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nv>ns</span><span class=o>=</span><span class=s2>&#34;workshop-participant-</span><span class=nv>$i</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  oc get ns <span class=s2>&#34;</span><span class=nv>$ns</span><span class=s2>&#34;</span> &gt;/dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=o>||</span> <span class=k>continue</span>
</span></span><span class=line><span class=cl>  oc -n <span class=s2>&#34;</span><span class=nv>$ns</span><span class=s2>&#34;</span> create sa splunk-otel-collector 2&gt;/dev/null <span class=o>||</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  oc apply -f - <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span class=line><span class=cl><span class=s>kind: ClusterRoleBinding
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  name: splunk-otel-collector-${ns}
</span></span></span><span class=line><span class=cl><span class=s>roleRef:
</span></span></span><span class=line><span class=cl><span class=s>  apiGroup: rbac.authorization.k8s.io
</span></span></span><span class=line><span class=cl><span class=s>  kind: ClusterRole
</span></span></span><span class=line><span class=cl><span class=s>  name: splunk-otel-collector
</span></span></span><span class=line><span class=cl><span class=s>subjects:
</span></span></span><span class=line><span class=cl><span class=s>- kind: ServiceAccount
</span></span></span><span class=line><span class=cl><span class=s>  name: splunk-otel-collector
</span></span></span><span class=line><span class=cl><span class=s>  namespace: ${ns}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><p>We also need to grant the SecurityContextConstraint (SCC) to each namespace ServiceAccount:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span> i in <span class=o>{</span>1..30<span class=o>}</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nv>ns</span><span class=o>=</span><span class=s2>&#34;workshop-participant-</span><span class=nv>$i</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  oc get ns <span class=s2>&#34;</span><span class=nv>$ns</span><span class=s2>&#34;</span> &gt;/dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=o>||</span> <span class=k>continue</span>
</span></span><span class=line><span class=cl>  oc -n <span class=s2>&#34;</span><span class=nv>$ns</span><span class=s2>&#34;</span> adm policy add-scc-to-user splunk-otel-collector -z splunk-otel-collector
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-vector-database>Deploy the Vector Database</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this step, we&rsquo;ll deploy a vector database to the OpenShift cluster and populate it with
test data that will be used by workshop participants.</p><h2 id=deploy-a-vector-database>Deploy a Vector Database<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For the workshop, we&rsquo;ll deploy an open-source vector database named
<a href=https://weaviate.io/ rel=external>Weaviate</a>.</p><p>First, add the Weaviate helm repo that contains the Weaviate helm chart:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add weaviate https://weaviate.github.io/weaviate-helm
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><p>The <code>weaviate/weaviate-values.yaml</code> file includes the configuration we&rsquo;ll use to deploy
the Weviate vector database.</p><p>We&rsquo;ve set the following environment variables to <code>TRUE</code>, to ensure Weaviate exposes
metrics that we can scrape later with the Prometheus receiver:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>  PROMETHEUS_MONITORING_ENABLED: true
  PROMETHEUS_MONITORING_GROUP: true</code></pre></div><p>Review <a href=https://docs.weaviate.io/deploy/installation-guides/k8s-installation rel=external>Weaviate documentation</a>
to explore additional customization options available.</p><p>Let&rsquo;s create a new namespace:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace weaviate</span></span></code></pre></div><p>Run the following command to allow Weaviate to run a privileged container:</p><blockquote><p>Note: this approach is not recommended for production environments</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc adm policy add-scc-to-user privileged -z default -n weaviate</span></span></code></pre></div><p>Then deploy Weaviate:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade --install <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;weaviate&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  weaviate/weaviate <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace <span class=s2>&#34;weaviate&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --values ./weaviate/weaviate-values.yaml</span></span></code></pre></div><h2 id=populate-the-vector-database>Populate the Vector Database<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that Weaviate is up and running, let&rsquo;s add some data to it
that we&rsquo;ll use in the workshop with a custom application.</p><p>The application used to do this is based on
<a href=https://docs.nvidia.com/nim/nemo-retriever/text-embedding/latest/playbook.html#generate-embeddings-with-text-embedding-nim rel=external>LangChain Playbook for NeMo Retriever Text Embedding NIM</a>.</p><p>Per the configuration in <code>./load-embeddings/k8s-job.yaml</code>, we&rsquo;re going to load
a <a href=https://nvdam.widen.net/content/udc6mzrk7a/original/hpc-datasheet-sc23-h200-datasheet-3002446.pdf rel=external>datasheet for the NVIDIA H200 Tensor Core GPU</a>
into our vector database.</p><p>This document includes information about NVIDIA&rsquo;s H200 GPUs that our large language model
isn&rsquo;t trained on. And in the next part of the workshop, we&rsquo;ll build an application that
uses an LLM to answer questions using the context from this document, which will be loaded
into the vector database.</p><p>We&rsquo;ll deploy a Kubernetes Job to our OpenShift cluster to load the embeddings.
A Kubernetes Job is used rather than a Pod to ensure that this process runs only once:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc create namespace llm-app
</span></span><span class=line><span class=cl>oc apply -f ./load-embeddings/k8s-job.yaml</span></span></code></pre></div><blockquote><p>Note: to build a Docker image for the Python application that loads the embeddings
into Weaviate, we executed the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/cisco-ai-pods/load-embeddings
</span></span><span class=line><span class=cl>docker build --platform linux/amd64 -t derekmitchell399/load-embeddings:1.0 .
</span></span><span class=line><span class=cl>docker push derekmitchell399/load-embeddings:1.0</span></span></code></pre></div></blockquote><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 19, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-portworx-metrics-endpoint>Deploy the Portworx Metrics Endpoint</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this step, we&rsquo;ll deploy a Python service that mimics the Portworx metrics endpoint.
This will be used in the workshop to configure monitoring for Pure Storage.</p><h2 id=deploy-the-portworx-metrics-endpoint>Deploy the Portworx Metrics Endpoint<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Run the following command to deploy the Portworx metrics endpoint service:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc new-project portworx
</span></span><span class=line><span class=cl>oc apply -f ./portworx/k8s.yaml -n portworx</span></span></code></pre></div><h2 id=test-the-portworx-metrics-endpoint>Test the Portworx Metrics Endpoint<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s ensure the Portworx metrics endpoint is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run --rm -it -n default curl --image<span class=o>=</span>curlimages/curl:latest -- sh</span></span></code></pre></div><p>Then run the following command to send a prompt to the endpoint:</p><div class=tab-panel data-tab-group=R-tabs-ecb4b996ca3d6bc5b8a3c8146f63cfc4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f407d862b7143bf12c171bdcc20da167 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ecb4b996ca3d6bc5b8a3c8146f63cfc4","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-42e42af0598c1085338f4c6d897e3335 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ecb4b996ca3d6bc5b8a3c8146f63cfc4","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f407d862b7143bf12c171bdcc20da167 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://portworx-metrics-sim.portworx:17001/metrics</span></span></code></pre></div></div></div><div id=R-tab-id-42e42af0598c1085338f4c6d897e3335 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># HELP px_cluster_cpu_percent Percentage of CPU Used</span>
</span></span><span class=line><span class=cl><span class=c1># TYPE px_cluster_cpu_percent gauge</span>
</span></span><span class=line><span class=cl>px_cluster_cpu_percent<span class=o>{</span><span class=nv>cluster</span><span class=o>=</span><span class=s2>&#34;ocp-pxclus-32430549-ad99-4839-bf9b-d6beb8ddc2d6&#34;</span>,clusterUUID<span class=o>=</span><span class=s2>&#34;e870909b-6150-4d72-87cb-a012630e42ae&#34;</span>,node<span class=o>=</span><span class=s2>&#34;worker2.flashstack.local&#34;</span>,nodeID<span class=o>=</span><span class=s2>&#34;f63312a2-0884-4878-be4e-51935613aa80&#34;</span><span class=o>}</span> 1.91
</span></span><span class=line><span class=cl>...</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=clean-up>Clean Up</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=clean-up-steps>Clean Up Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once the workshop is complete, follow the steps in this section to uninstall the OpenShift cluster.</p><p>Get the cluster ID, the Amazon Resource Names (ARNs) for the cluster-specific Operator roles,
and the endpoint URL for the OIDC provider by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa describe cluster --cluster<span class=o>=</span><span class=nv>$CLUSTER_NAME</span></span></span></code></pre></div><p>Delete the cluster using the following command</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete cluster --cluster<span class=o>=</span><span class=nv>$CLUSTER_NAME</span> --watch</span></span></code></pre></div><p>Delete the cluster-specific Operator IAM roles:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete operator-roles --prefix <span class=nv>$OPERATOR_ROLES_PREFIX</span></span></span></code></pre></div><p>Delete the OIDC provider:</p><blockquote><p>Note: just accept the default values when prompted.</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rosa delete oidc-provider --oidc-config-id <span class=nv>$OIDC_ID</span></span></span></code></pre></div><p>Delete the network:</p><blockquote><p>Note: add the name of the CloudFormation stack used to create the network before
running the following command</p></blockquote><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws cloudformation delete-stack --region <span class=nv>$AWS_REGION</span> --stack-name &lt;stack name i.e. rosa-network-stack-nnnnnnnnnnn&gt;</span></span></code></pre></div><p>Refer to <a href=https://docs.redhat.com/en/documentation/red_hat_openshift_service_on_aws/4/html/install_clusters/rosa-hcp-deleting-cluster rel=external>OpenShift documentation</a>
if you&rsquo;d like to completely remove the Red Hat OpenShift Service from your AWS account.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 21, 2026</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=workshop>Workshop</h1><p>This section includes the steps that workshop attendees will follow:</p><ul><li>Practice deploying the <strong>OpenTelemetry Collector</strong> in the Red Hat OpenShift cluster.</li><li>Practice adding <strong>Prometheus</strong> receivers to the collector to ingest infrastructure metrics.</li><li>Practice monitoring the <strong>Weaviate</strong> vector database in the cluster.</li><li>Practice gathering the <strong>Pure Storage</strong> metrics using Prometheus.</li><li>Practice instrumenting Python services that interact with Large Language Models (LLMs) with <strong>OpenTelemetry</strong>.</li><li>Understanding which details which OpenTelemetry captures in the trace from applications that interact with LLMs.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Workshop</h1><article class=default><header class=headline></header><h1 id=overview-of-the-workshop-environment>Overview of the Workshop Environment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p><strong>Cisco&rsquo;s AI-ready PODs</strong> combine cutting-edge hardware and software to
deliver a robust, scalable, and efficient AI infrastructure.
<strong>Splunk Observability Cloud</strong> provides comprehensive visibility
into this entire stack: from infrastructure to application components.</p><p>This hands-on workshop teaches you how to monitor AI infrastructure
using OpenTelemetry and Prometheus, <strong>without requiring
access to an actual Cisco AI POD</strong>. You&rsquo;ll gain practical experience
deploying and configuring monitoring technologies in a realistic environment.</p><h2 id=lab-environment>Lab Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The workshop uses a shared <strong>OpenShift Cluster</strong> running in AWS, equipped
with NVIDIA GPUs and NVIDIA AI Enterprise software.</p><h3 id=pre-deployed-infrastructure>Pre-Deployed Infrastructure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The workshop instructor has deployed the following shared components to the
workshop environment:</p><ul><li><strong>NVIDIA NIM models</strong>:<ul><li><code>meta/llama-3.2-1b-instruct</code> - Processes user prompts</li><li><code>nvidia/llama-3.2-nv-embedqa-1b-v2</code> - Generates embeddings</li></ul></li><li><strong>Weaviate</strong> - A vector database for semantic search and retrieval</li><li><strong>Prometheus exporter</strong> - Simulates Pure Storage metrics typical of production AI PODs</li></ul><h3 id=your-workspace>Your Workspace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Each participant receives a dedicated namespace within the shared cluster,
ensuring isolated environments for independent work.</p><h2 id=workshop-activities>Workshop Activities<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>During the workshop, each participant will execute the following tasks:</p><ol><li>Deploy and configure an <strong>OpenTelemetry collector</strong> in your namespace</li><li>Integrate observability data collection with the cluster infrastructure</li><li>Deploy a <strong>Python application</strong> that leverages the NVIDIA NIM models</li><li>Monitor application performance and infrastructure metrics using Splunk Observability Cloud</li></ol><h2 id=what-is-prometheus>What is Prometheus?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>While <strong>Prometheus</strong> typically refers to a full-stack monitoring system
used for storage and alerting, this workshop focuses on the Prometheus
ecosystem&rsquo;s data standards.</p><p>We will be leveraging <strong>Prometheus Exporters</strong>, which are small utilities
that translate a component&rsquo;s internal health into a standardized
metrics endpoint (e.g., http://localhost:9100/metrics).</p><p>Instead of using a full Prometheus server to collect this data, we will use
the <strong>OpenTelemetry Collector</strong>. By using its <strong>Prometheus receiver</strong>,
the collector can <strong>scrape</strong> these endpoints, allowing us to gather
rich telemetry data using a widely-supported industry format.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=connect-to-the-openshift-cluster>Connect to the OpenShift Cluster</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=connect-to-your-ec2-instance>Connect to your EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We‚Äôve prepared an Ubuntu Linux instance in AWS/EC2 for each attendee.</p><p>Using the IP address and password provided by your instructor, connect to your EC2 instance
using one of the methods below:</p><ul><li>Mac OS / Linux<ul><li>ssh splunk@IP address</li></ul></li><li>Windows 10+<ul><li>Use the OpenSSH client</li></ul></li><li>Earlier versions of Windows<ul><li>Use Putty</li></ul></li></ul><h2 id=set-the-workshop-participant-number>Set the Workshop Participant Number<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The instructor will provide each participant with a number from 1 to 30.
Store this in an environment variable, and remember what it is, as
it will be used throughout the workshop:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PARTICIPANT_NUMBER</span><span class=o>=</span>&lt;your participant number&gt;</span></span></code></pre></div><h2 id=install-the-openshift-cli>Install the OpenShift CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To access the OpenShift cluster, we&rsquo;ll need to install the OpenShift CLI.</p><p>We can use the following command to download the OpenShift CLI binary directly
to our EC2 instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>curl -L -O https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-client-linux.tar.gz</code></pre></div><p>Extract the contents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>tar -xvzf openshift-client-linux.tar.gz</code></pre></div><p>Move the resulting files (<code>oc</code> and <code>kubectl</code>) to a location that&rsquo;s included as part of your path. For example:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mv oc /usr/local/bin/oc
</span></span><span class=line><span class=cl>sudo mv kubectl /usr/local/bin/kubectl</span></span></code></pre></div><h2 id=connect-to-the-openshift-cluster>Connect to the OpenShift Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Ensure the Kube config file is modifiable by the splunk user:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> /home/splunk/.kube/config</span></span></code></pre></div><p>Use the cluster API URL and password provided by the workshop
organizer to log in to the OpenShift cluster:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc login https://api.&lt;cluster-domain&gt;:443 -u participant<span class=nv>$PARTICIPANT_NUMBER</span> -p <span class=s1>&#39;&lt;password&gt;&#39;</span></span></span></code></pre></div><p>Ensure you&rsquo;re connected to the OpenShift cluster:</p><div class=tab-panel data-tab-group=R-tabs-461d87bdd02b26d78c29770fefb1c81b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-5c7dae4bd482def7c3e85750d8481476 aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-461d87bdd02b26d78c29770fefb1c81b","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-4d34d22d34f36c19b9038ea5bc162cb3 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-461d87bdd02b26d78c29770fefb1c81b","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-5c7dae4bd482def7c3e85750d8481476 data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc whoami --show-server </span></span></code></pre></div></div></div><div id=R-tab-id-4d34d22d34f36c19b9038ea5bc162cb3 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://api.***.openshiftapps.com:443</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section we&rsquo;ll deploy the OpenTelemetry Collector in our OpenShift namespace,
which gathers metrics, logs, and traces from the infrastructure and applications
running in the cluster, and sends the resulting data to Splunk Observability Cloud.</p><h2 id=deploy-the-opentelemetry-collector>Deploy the OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=ensure-helm-is-installed>Ensure Helm is installed<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Run the following command to confirm that Helm is installed:</p><div class=tab-panel data-tab-group=R-tabs-ffce6c02faae7d984d9bfaa46b6cce94><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0ad0efc92fbd58582320233f89adc84f aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ffce6c02faae7d984d9bfaa46b6cce94","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-4c1990ed09347f3afc298b730ca33fd4 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ffce6c02faae7d984d9bfaa46b6cce94","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0ad0efc92fbd58582320233f89adc84f data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm version</span></span></code></pre></div></div></div><div id=R-tab-id-4c1990ed09347f3afc298b730ca33fd4 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>version.BuildInfo<span class=o>{</span>Version:<span class=s2>&#34;v3.19.4&#34;</span>, GitCommit:<span class=s2>&#34;7cfb6e486dac026202556836bb910c37d847793e&#34;</span>, GitTreeState:<span class=s2>&#34;clean&#34;</span>, GoVersion:<span class=s2>&#34;go1.24.11&#34;</span><span class=o>}</span></span></span></code></pre></div></div></div></div></div><p>If it&rsquo;s not installed, execute the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install curl gpg apt-transport-https --yes
</span></span><span class=line><span class=cl>curl -fsSL https://packages.buildkite.com/helm-linux/helm-debian/gpgkey <span class=p>|</span> gpg --dearmor <span class=p>|</span> sudo tee /usr/share/keyrings/helm.gpg &gt; /dev/null
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [signed-by=/usr/share/keyrings/helm.gpg] https://packages.buildkite.com/helm-linux/helm-debian/any/ any main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install helm</span></span></code></pre></div><h3 id=add-the-splunk-opentelemetry-collector-helm-chart>Add the Splunk OpenTelemetry Collector Helm Chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Add the Splunk OpenTelemetry Collector for Kubernetes&rsquo; Helm chart repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart</span></span></code></pre></div><p>Ensure the repository is up-to-date:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update</span></span></code></pre></div><h3 id=configure-environment-variables>Configure Environment Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Set environment variables to configure the Splunk environment you&rsquo;d like
the collector to send data to:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>USER_NAME</span><span class=o>=</span>workshop-participant-<span class=nv>$PARTICIPANT_NUMBER</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CLUSTER_NAME</span><span class=o>=</span>ai-pod-<span class=nv>$USER_NAME</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ENVIRONMENT_NAME</span><span class=o>=</span>ai-pod-<span class=nv>$USER_NAME</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>SPLUNK_INDEX</span><span class=o>=</span>splunk4rookies-workshop</span></span></code></pre></div><h3 id=deploy-the-collector>Deploy the Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Navigate to the workshop directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/cisco-ai-pods</span></span></code></pre></div><p>Then install the collector in your namespace using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./otel-collector/otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n <span class=nv>$USER_NAME</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><blockquote><p>Note that we&rsquo;re referencing a configuration file named
<code>otel-collector-values.yaml</code> when installing the collector,
which includes custom configuration.</p></blockquote><p>Run the following command to confirm that the collector pods are running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>oc get pods

NAME                                                          READY   STATUS    RESTARTS   AGE
splunk-otel-collector-agent-58rwm                             1/1     Running   0          6m40s
splunk-otel-collector-agent-8dndr                             1/1     Running   0          6m40s</code></pre></div><blockquote><p>Note: in OpenShift environments, the collector takes about three minutes to
start and transition to the <code>Running</code> state.</p></blockquote><h3 id=review-collector-data-in-splunk-observability-cloud>Review Collector Data in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Confirm that you can see your cluster in <strong>Splunk Observability Cloud</strong> by navigating to
<strong>Infrastructure Monitoring</strong> -> <strong>Kubernetes</strong> -> <strong>Kubernetes Clusters</strong> and then
adding a filter on <code>k8s.cluster.name</code> with your cluster name (i.e. <code>ai-pod-workshop-participant-1</code>):</p><p><a href=#R-image-98ff145075c580624a35aebbce04d1f3 class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../../images/KubernetesPods.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-98ff145075c580624a35aebbce04d1f3><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../../images/KubernetesPods.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-nvidia-components>Monitor NVIDIA Components</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll use the Prometheus receiver with the OpenTelemetry collector
to monitor the NVIDIA components running in the OpenShift cluster. We&rsquo;ll start by
navigating to the directory where the collector configuration file is stored:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> otel-collector</span></span></code></pre></div><h2 id=capture-the-nvidia-dcgm-exporter-metrics>Capture the NVIDIA DCGM Exporter metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <a href=https://github.com/NVIDIA/dcgm-exporter rel=external>NVIDIA DCGM exporter</a> is running
in our OpenShift cluster. It exposes GPU metrics that we can send to Splunk.</p><p>To do this, let&rsquo;s customize the configuration of the collector by editing the
<code>otel-collector-values.yaml</code> file that we used earlier when deploying the collector.</p><p>Add the following content, just below the <code>kubeletstats</code> receiver:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator/nvidia</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Name of the extensions to watch for endpoints to start and stop.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>k8s_observer ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/dcgm</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>gpu-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>60s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:9400&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;nvidia-dcgm-exporter&#34;</span></span></span></code></pre></div><p>This tells the collector to look for pods with a label of <code>app=nvidia-dcgm-exporter</code>.
And when it finds a pod with this label, it will connect to port 9400 of the pod and scrape
the default metrics endpoint (<code>/v1/metrics</code>).</p><blockquote><p>Why are we using the <strong>receiver_creator</strong> receiver instead of just the <strong>Prometheus</strong> receiver?</p><ul><li>The <strong>Prometheus</strong> receiver uses a static configuration that scrapes metrics from predefined endpoints.</li><li>The <strong>receiver_creator</strong> receiver enables dynamic creation of receivers (including Prometheus receivers) based on runtime information, allowing for scalable and flexible scraping setups.</li><li>Using <strong>receiver_creator</strong> can simplify configurations in dynamic environments by automating the management of multiple Prometheus scraping targets.</li></ul></blockquote><p>To ensure this new receiver is used, we&rsquo;ll need to add a new pipeline to the
<code>otel-collector-values.yaml</code> file as well.</p><p>Add the following code to the bottom of the file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics/nvidia-metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>receiver_creator/nvidia</span></span></span></code></pre></div><p>We&rsquo;ll add one more Prometheus receiver related to NVIDIA in the next section.</p><h2 id=capture-the-nvidia-nim-metrics>Capture the NVIDIA NIM metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>meta-llama-3-2-1b-instruct</code> large language model was deployed to the
OpenShift cluster using NVIDIA NIM. It includes a Prometheus endpoint
that we can scrape with the collector. Let&rsquo;s add the following to the
<code>otel-collector-values.yaml</code> file, just below the <code>prometheus/dcgm</code> receiver
we added earlier:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/nim-llm</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>nim-for-llm-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>60s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/v1/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:8000&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;meta-llama-3-2-1b-instruct&#34;</span></span></span></code></pre></div><p>This tells the collector to look for pods with a label of <code>app=meta-llama-3-2-1b-instruct</code>.
And when it finds a pod with this label, it will connect to port 8000 of the pod and scrape
the <code>/v1/metrics</code> metrics endpoint.</p><p>There&rsquo;s no need to make changes to the pipeline, as this receiver will already be picked up
as part of the <code>receiver_creator/nvidia</code> receiver.</p><h2 id=add-a-filter-processor>Add a Filter Processor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Scraping Prometheus endpoints can result in a large number of metrics, sometimes
with high cardinality.</p><p>Let&rsquo;s add a filter processor that defines exactly what metrics we want to send to Splunk.
Specifically, we&rsquo;ll send <strong>only</strong> the metrics that are utilized by a dashboard chart or an
alert detector.</p><p>Add the following code to the <code>otel-collector-values.yaml</code> file, after the exporters section
but before the receivers section:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/metrics_to_be_included</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Include only metrics used in charts and detectors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_FREE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_USED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_GPU_TEMP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_GPU_UTIL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEM_CLOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEM_COPY_UTIL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_MEMORY_TEMP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_POWER_USAGE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_SM_CLOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_DRAM_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_GR_ENGINE_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PCIE_RX_BYTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PCIE_TX_BYTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_PROF_PIPE_TENSOR_ACTIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>generation_tokens_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_alloc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_alloc_bytes_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_buck_hash_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_frees_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_gc_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_alloc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_idle_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_objects</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_released_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_heap_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_last_gc_time_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_lookups_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mallocs_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mcache_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mcache_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mspan_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_mspan_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_next_gc_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_other_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_stack_inuse_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_stack_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_memstats_sys_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>go_sched_gomaxprocs_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>gpu_cache_usage_perc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>gpu_total_energy_consumption_joules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>http.server.active_requests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_request_max</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_requests_running</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>num_requests_waiting</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_cpu_seconds_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_max_fds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_open_fds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_resident_memory_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_start_time_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_virtual_memory_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>process_virtual_memory_max_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>promhttp_metric_handler_requests_in_flight</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>promhttp_metric_handler_requests_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>prompt_tokens_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_collections_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_objects_collected_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_gc_objects_uncollectable_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>python_info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_finish_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_success_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>system.cpu.time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>e2e_request_latency_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>time_to_first_token_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>time_per_output_token_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_prompt_tokens</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>request_generation_tokens</span></span></span></code></pre></div><p>Ensure the <code>filter/metrics_to_be_included</code> processor is included in the
<code>metrics/nvidia-metrics</code> pipeline we added earlier:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    service:
</span></span><span class=line><span class=cl>      pipelines:
</span></span><span class=line><span class=cl>        metrics/nvidia-metrics:
</span></span><span class=line><span class=cl>          exporters:
</span></span><span class=line><span class=cl>            - signalfx
</span></span><span class=line><span class=cl>          processors:
</span></span><span class=line><span class=cl>            - memory_limiter
</span></span><span class=line><span class=cl>            - filter/metrics_to_be_included
</span></span><span class=line><span class=cl>            - batch
</span></span><span class=line><span class=cl>            - resourcedetection
</span></span><span class=line><span class=cl>            - resource
</span></span><span class=line><span class=cl>          receivers:
</span></span><span class=line><span class=cl>            - receiver_creator/nvidia</span></span></code></pre></div><h2 id=verify-changes>Verify Changes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Take a moment to compare the contents of your modified <code>otel-collector-values.yaml</code>
file with the <code>otel-collector-values-with-nvidia.yaml</code> file.
Update your file if needed to ensure the contents match. Remember that indentation is important
for <code>yaml</code> files, and needs to be precise.</p><p>Because restarting the collector in an OpenShift environment takes about 3 minutes,
we&rsquo;ll wait until we&rsquo;ve completed all configuration changes before initiating a restart.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-the-vector-database>Monitor the Vector Database</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this step, we&rsquo;ll configure the Prometheus receiver to monitor the Weaviate vector database.</p><h2 id=what-is-a-vector-database>What is a Vector Database?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A <strong>vector database</strong> stores and indexes data as numerical &ldquo;vector embeddings,&rdquo; which capture
the <strong>semantic meaning</strong> of information like text or images. Unlike traditional databases,
they excel at <strong>similarity searches</strong>, finding conceptually related data points rather
than exact matches.</p><h2 id=how-is-a-vector-database-used>How is a Vector Database Used?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Vector databases play a key role in a pattern called
<strong>Retrieval Augmented Generation (RAG)</strong>, which is widely used by
applications that leverage Large Language Models (LLMs).</p><p>The pattern is as follows:</p><ul><li>The end-user asks a question to the application</li><li>The application takes the question and calculates a vector embedding for it</li><li>The app then performs a similarity search, looking for related documents in the vector database</li><li>The app then takes the original question and the related documents, and sends it to the LLM as context</li><li>The LLM reviews the context and returns a response to the application</li></ul><h2 id=capture-weaviate-metrics-with-prometheus>Capture Weaviate Metrics with Prometheus<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s modify the OpenTelemetry collector configuration to scrape Weaviate&rsquo;s Prometheus
metrics.</p><p>To do so, let&rsquo;s add an additional Prometheus receiver creator section
to the <code>otel-collector-values.yaml</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Name of the extensions to watch for endpoints to start and stop.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>k8s_observer ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>weaviate-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>60s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:2112&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;weaviate&#34;</span></span></span></code></pre></div><p>We&rsquo;ll need to ensure that Weaviate&rsquo;s metrics are added to the <code>filter/metrics_to_be_included</code> filter
processor configuration as well:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/metrics_to_be_included</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Include only metrics used in charts and detectors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_FREE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>object_count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstones</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstone_cleanup_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>vector_index_tombstone_cleanup_threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>requests_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>objects_durations_ms_sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>objects_durations_ms_count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>batch_delete_durations_ms_sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>batch_delete_durations_ms_count</span></span></span></code></pre></div><p>We also want to add a Resource processor to the configuration file, with the following configuration:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>resource/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>weaviate.instance.id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>from_attribute</span><span class=p>:</span><span class=w> </span><span class=l>service.instance.id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span></span></span></code></pre></div><p>This processor takes the <code>service.instance.id</code> property on the Weaviate metrics
and copies it into a new property called <code>weaviate.instance.id</code>. This is done so
that we can more easily distinguish Weaviate metrics from other metrics that use
<code>service.instance.id</code>, which is a standard OpenTelemetry property used in
Splunk Observability Cloud.</p><p>We&rsquo;ll need to add a new metrics pipeline for Weaviate metrics as well (we
need to use a separate pipeline since we don&rsquo;t want the <code>weaviate.instance.id</code>
metric to be added to non-Weaviate metrics):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics/weaviate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>filter/metrics_to_be_included</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource/weaviate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>receiver_creator/weaviate</span></span></span></code></pre></div><p>Take a moment to compare the
contents of your modified <code>otel-collector-values.yaml</code> file with the
<code>otel-collector-values-with-weaviate.yaml</code> file.
Update your file as needed to ensure the contents match. Remember that indentation is important
for <code>yaml</code> files, and needs to be precise.</p><p>Because restarting the collector in an OpenShift environment takes about 3 minutes,
we&rsquo;ll wait until we&rsquo;ve completed all configuration changes before initiating a restart.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-storage>Monitor Storage</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this step, we&rsquo;ll configure the Prometheus receiver to monitor the storage.</p><h2 id=what-storage-do-cisco-ai-pods-utilize>What storage do Cisco AI PODs utilize?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Cisco AI PODs have a number of different storage options, including Pure Storage,
VAST, and NetApp.</p><p>The workshop will focus on Pure Storage.</p><h2 id=how-do-we-capture-pure-storage-metrics>How do we capture Pure Storage metrics?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Cisco AI PODs that utilize Pure Storage also use a technology called Portworx,
which provides persistent storage for Kubernetes.</p><p>Portworx includes a metrics endpoint that we can scrape using the Prometheus receiver.</p><h2 id=capture-storage-metrics-with-prometheus>Capture Storage Metrics with Prometheus<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s modify the OpenTelemetry collector configuration to scrape Portworx metrics
with the Prometheus receiver.</p><p>To do so, let&rsquo;s add an additional Prometheus receiver creator section
to the <code>otel-collector-values.yaml</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver_creator/storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Name of the extensions to watch for endpoints to start and stop.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>k8s_observer ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prometheus/portworx</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=l>portworx-metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:17001&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span>- <span class=s1>&#39;`endpoint`:17018&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; labels[&#34;app&#34;] == &#34;portworx-metrics-sim&#34;</span></span></span></code></pre></div><p>We&rsquo;ll need to ensure that Portworx metrics are added to the <code>filter/metrics_to_be_included</code> filter
processor configuration as well:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/metrics_to_be_included</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Include only metrics used in charts and detectors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>DCGM_FI_DEV_FB_FREE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_cluster_cpu_percent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_cluster_disk_total_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_cluster_disk_utilized_bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_cluster_status_nodes_offline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_cluster_status_nodes_online</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_read_latency_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_reads_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_readthroughput</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_write_latency_seconds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_writes_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>px_volume_writethroughput</span></span></span></code></pre></div><p>We&rsquo;ll need to add a new metrics pipeline for Portworx metrics as well:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics/storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>filter/metrics_to_be_included</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>receiver_creator/storage</span></span></span></code></pre></div><p>Take a moment to compare the
contents of your modified <code>otel-collector-values.yaml</code> file with the
<code>otel-collector-values-with-portworx.yaml</code> file.
Update your file as needed to ensure the contents match. Remember that indentation is important
for <code>yaml</code> files, and needs to be precise.</p><p>Because restarting the collector in an OpenShift environment takes about 3 minutes,
we&rsquo;ll wait until we&rsquo;ve completed all configuration changes before initiating a restart.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=review-ai-pod-dashboards>Review AI POD Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll review the AI POD dashboards in Splunk Observability Cloud
to confirm that the data from NVIDIA, Pure Storage, and Weaviate is captured
as expected.</p><h2 id=update-the-opentelemetry-collector-config>Update the OpenTelemetry Collector Config<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can apply the collector configuration changes by running the following Helm command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$CLUSTER_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$ENVIRONMENT_NAME</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=</span><span class=nv>$SPLUNK_INDEX</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f ./otel-collector-values.yaml <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n <span class=nv>$USER_NAME</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><h2 id=review-the-ai-pod-overview-dashboard-tab>Review the AI POD Overview Dashboard Tab<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to <code>Dashboards</code> in Splunk Observability Cloud, then search for the
<code>Cisco AI PODs Dashboard</code>, which is included in the <code>Built-in dashboard groups</code>.
Ensure the dashboard is filtered on your OpenShift cluster name.
The charts should be populated as in the following example:</p><p><a href=#R-image-177ed8b36dbe6b71d451dc91c68f373a class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../../images/Cisco-AI-Pod-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-177ed8b36dbe6b71d451dc91c68f373a><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../../images/Cisco-AI-Pod-dashboard.png></a></p><h2 id=review-the-pure-storage-dashboard-tab>Review the Pure Storage Dashboard Tab<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to the <code>PURE STORAGE</code> tab and ensure the dashboard is filtered
on your OpenShift cluster name. The charts should be populated as in the
following example:</p><p><a href=#R-image-f35b763c1d0c6df6034269a45adca2ed class=lightbox-link><img alt="Pure Storage Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/PureStorage.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f35b763c1d0c6df6034269a45adca2ed><img alt="Pure Storage Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/PureStorage.png></a></p><h2 id=review-the-weaviate-infrastructure-navigator>Review the Weaviate Infrastructure Navigator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Since Weaviate isn&rsquo;t included by default with an AI POD, it&rsquo;s
not included on the out-of-the-box AI POD dashboard. Instead,
we can view Weaviate performance data using one of the infrastructure
navigators.</p><p>In Splunk Observability Cloud, navigate to <code>Infrastructure</code> -> <code>AI Frameworks</code> -> <code>Weaviate</code>.
Filter on the <code>k8s.cluster.name</code> of interest, and ensure the navigator is populated as in the
following example:</p><p><a href=#R-image-4888390c0c9dca39ce0ab645aedaa4f8 class=lightbox-link><img alt="Kubernetes Pods" class="lazy lightbox figure-image" loading=lazy src=../../images/WeaviateNavigator.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4888390c0c9dca39ce0ab645aedaa4f8><img alt="Kubernetes Pods" class="lazy lightbox lightbox-image" loading=lazy src=../../images/WeaviateNavigator.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=review-the-llm-application>Review the LLM Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>In the final step of the workshop, we&rsquo;ll deploy an application to our OpenShift cluster
that uses the instruct and embeddings models.</p><h2 id=what-is-langchain>What is LangChain?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Like most applications that interact with LLMs, our application is written in Python.
It also uses <a href=https://www.langchain.com/ rel=external>LangChain</a>, which is an open-source orchestration
framework that simplifies the development of applications powered by LLMs.</p><h2 id=application-overview>Application Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=connect-to-the-llms>Connect to the LLMs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Our application starts by connecting to two LLMs that we&rsquo;ll be using:</p><ul><li><code>meta/llama-3.2-1b-instruct</code>: used for responding to user prompts</li><li><code>nvidia/llama-3.2-nv-embedqa-1b-v2</code>: used to calculate embeddings</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># connect to a LLM NIM at the specified endpoint, specifying a specific model</span>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatNVIDIA</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=n>INSTRUCT_MODEL_URL</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;meta/llama-3.2-1b-instruct&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Initialize and connect to a NeMo Retriever Text Embedding NIM (nvidia/llama-3.2-nv-embedqa-1b-v2)</span>
</span></span><span class=line><span class=cl><span class=n>embeddings_model</span> <span class=o>=</span> <span class=n>NVIDIAEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&#34;nvidia/llama-3.2-nv-embedqa-1b-v2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                   <span class=n>base_url</span><span class=o>=</span><span class=n>EMBEDDINGS_MODEL_URL</span><span class=p>)</span></span></span></code></pre></div><blockquote><p>Why are there two models? Here&rsquo;s a helpful analogy:</p><ul><li>The Embedding model is the &ldquo;Librarian&rdquo; (it helps find the right books),</li><li>The Instruct model is the &ldquo;Writer&rdquo; (it reads the books and writes the answer).</li></ul></blockquote><h3 id=define-the-prompt-template>Define the Prompt Template<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The application then defines a prompt template that will be used in interactions
with the <code>meta/llama-3.2-1b-instruct</code> LLM:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_messages</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;You are a helpful and friendly AI!&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Your responses should be concise and no longer than two sentences.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Do not hallucinate. Say you don&#39;t know if you don&#39;t have this information.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Answer the question using only the context&#34;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>Question: </span><span class=si>{question}</span><span class=se>\n\n</span><span class=s2>Context: </span><span class=si>{context}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>{question}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>])</span></span></span></code></pre></div><blockquote><p>Note how we&rsquo;re explicitly instructing the LLM to just say it doesn&rsquo;t know the answer if
it doesn&rsquo;t know, which helps minimize hallucinations. There&rsquo;s also a placeholder for
us to provide context that the LLM can use to answer the question.</p></blockquote><h3 id=connect-to-the-vector-database>Connect to the Vector Database<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The application then connects to the vector database that was pre-populated
with NVIDIA data sheet documents:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=n>weaviate_client</span> <span class=o>=</span> <span class=n>weaviate</span><span class=o>.</span><span class=n>connect_to_custom</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>http_host</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;WEAVIATE_HTTP_HOST&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>http_port</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;WEAVIATE_HTTP_PORT&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>http_secure</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>grpc_host</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;WEAVIATE_GRPC_HOST&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>grpc_port</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;WEAVIATE_GRPC_PORT&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>grpc_secure</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=n>vector_store</span> <span class=o>=</span> <span class=n>WeaviateVectorStore</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>=</span><span class=n>weaviate_client</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>embedding</span><span class=o>=</span><span class=n>embeddings_model</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>index_name</span><span class=o>=</span><span class=s2>&#34;CustomDocs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>text_key</span><span class=o>=</span><span class=s2>&#34;page_content&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span></span></span></code></pre></div><h3 id=define-the-chain>Define the Chain<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The application uses <strong>LCEL (LangChain Expression Language)</strong> to define the chain.
The <code>|</code> (pipe) symbol works like an assembly line; the output of one step becomes
the input for the next.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=n>chain</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;context&#34;</span><span class=p>:</span> <span class=n>vector_store</span><span class=o>.</span><span class=n>as_retriever</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;question&#34;</span><span class=p>:</span> <span class=n>RunnablePassthrough</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>prompt</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>llm</span>
</span></span><span class=line><span class=cl>        <span class=o>|</span> <span class=n>StrOutputParser</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span></span></span></code></pre></div><p>Let&rsquo;s break this down step-by-step:</p><ul><li><strong>Step 1: The Input Map {‚Ä¶}</strong>: We are preparing the ingredients for our prompt.<ul><li>context: We turn our vector store into a retriever. This acts like a search engine that finds the most relevant snippets from our NVIDIA data sheets based on the user‚Äôs question.</li><li>question: We use RunnablePassthrough() to ensure the user‚Äôs original question is passed directly into the prompt.</li><li><strong>Note</strong>: These keys (context and question) map directly to the {context} and {question} placeholders we defined in our prompt template earlier.</li></ul></li><li><strong>Step 2: The prompt</strong>: This is the instruction manual. It takes the context and the question and formats them using the prompt template (e.g., &ldquo;Answer the question using only the context&mldr;&rdquo;).</li><li><strong>Step 3: The llm</strong>: This is the &ldquo;Engine&rdquo; (like GPT-4). It reads the formatted prompt and generates a response.</li><li><strong>Step 4: The StrOutputParser()</strong>: By default, AI models return complex objects. This &ldquo;cleaner&rdquo; ensures we get back a simple, readable string of text.</li></ul><h3 id=invoke-the-chain>Invoke the Chain<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Finally, the application invokes the chain by passing the end user&rsquo;s question in
as input:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>chain</span><span class=o>.</span><span class=n>invoke</span><span class=p>(</span><span class=n>question</span><span class=p>)</span></span></span></code></pre></div><p>This is the &ldquo;Start&rdquo; button. You drop the end users&rsquo; question into the beginning of the pipeline,
and it flows through the retriever, the prompt, and the LLM until the answer comes
out the other side.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=instrument-the-llm-application>Instrument the LLM Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=instrument-the-application-with-opentelemetry>Instrument the Application with OpenTelemetry<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=instrumentation-packages>Instrumentation Packages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To capture metrics, traces, and logs from our application, we&rsquo;ve instrumented it with OpenTelemetry.
This required adding the following package to the <code>requirements.txt</code> file (which ultimately gets
installed with <code>pip install</code>):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>splunk-opentelemetry==2.8.0</code></pre></div><p>We also added the following to the <code>Dockerfile</code> used to build the
container image for this application, to install additional OpenTelemetry
instrumentation packages:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># Add additional OpenTelemetry instrumentation packages</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> opentelemetry-bootstrap --action<span class=o>=</span>install</span></span></code></pre></div><p>Then we modified the <code>ENTRYPOINT</code> in the <code>Dockerfile</code> to call <code>opentelemetry-instrument</code>
when running the application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;opentelemetry-instrument&#34;</span><span class=p>,</span> <span class=s2>&#34;flask&#34;</span><span class=p>,</span> <span class=s2>&#34;run&#34;</span><span class=p>,</span> <span class=s2>&#34;-p&#34;</span><span class=p>,</span> <span class=s2>&#34;8080&#34;</span><span class=p>,</span> <span class=s2>&#34;--host&#34;</span><span class=p>,</span> <span class=s2>&#34;0.0.0.0&#34;</span><span class=p>]</span></span></span></code></pre></div><p>Finally, to enhance the traces and metrics collected with OpenTelemetry from this
LangChain application, we added additional Splunk instrumentation packages:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>splunk-otel-instrumentation-langchain==0.1.4
splunk-otel-util-genai==0.1.4</code></pre></div><h3 id=environment-variables>Environment Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To instrument the application with OpenTelemetry, we also included several
environment variables in the Kubernetes manifest file used to deploy the application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;llm-app&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://splunk-otel-collector-agent:4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_PROTOCOL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;grpc&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># filter out health check requests to the root URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_PYTHON_EXCLUDED_URLS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;^(https?://)?[^/]+(/)?$&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_PYTHON_DISABLED_INSTRUMENTATIONS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;httpx,requests&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_INSTRUMENTATION_LANGCHAIN_CAPTURE_MESSAGE_CONTENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_LOGS_EXPORTER</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;otlp&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_PYTHON_LOG_CORRELATION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;delta&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_PYTHON_LOGGING_AUTO_INSTRUMENTATION_ENABLED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_INSTRUMENTATION_GENAI_CAPTURE_MESSAGE_CONTENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_INSTRUMENTATION_GENAI_CAPTURE_MESSAGE_CONTENT_MODE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;SPAN_AND_EVENT&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_INSTRUMENTATION_GENAI_EMITTERS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;span_metric_event,splunk&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_INSTRUMENTATION_GENAI_EMITTERS_EVALUATION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;replace-category:SplunkEvaluationResults&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_PROFILER_ENABLED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span></span></span></code></pre></div><p>Note that the <code>OTEL_INSTRUMENTATION_LANGCHAIN_CAPTURE_MESSAGE_CONTENT</code> and
<code>OTEL_INSTRUMENTATION_GENAI_*</code> environment variables are specific to the
LangChain instrumentation we&rsquo;ve used.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-the-llm-application>Deploy the LLM Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=deploy-the-llm-application>Deploy the LLM Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following command to deploy this application to the OpenShift cluster:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc apply -f ./llm-app/k8s-manifest.yaml</span></span></code></pre></div><blockquote><p>Note: to build a Docker image for this Python application, we executed the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/cisco-ai-pods/llm-app
</span></span><span class=line><span class=cl>docker build --platform linux/amd64 -t ghcr.io/splunk/cisco-ai-pod-workshop-app:1.0 .
</span></span><span class=line><span class=cl>docker push ghcr.io/splunk/cisco-ai-pod-workshop-app:1.0</span></span></code></pre></div></blockquote><h2 id=test-the-llm-application>Test the LLM Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s ensure the application is working as expected.</p><p>Start a pod that has access to the curl command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>oc run curl --rm -it --image<span class=o>=</span>curlimages/curl:latest <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --overrides<span class=o>=</span><span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;spec&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;containers&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;name&#34;: &#34;curl&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;image&#34;: &#34;curlimages/curl:latest&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;stdin&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;tty&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;command&#34;: [&#34;sh&#34;],
</span></span></span><span class=line><span class=cl><span class=s1>        &#34;resources&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;limits&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;cpu&#34;: &#34;50m&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;memory&#34;: &#34;100Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          },
</span></span></span><span class=line><span class=cl><span class=s1>          &#34;requests&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;cpu&#34;: &#34;50m&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>            &#34;memory&#34;: &#34;100Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          }
</span></span></span><span class=line><span class=cl><span class=s1>        }
</span></span></span><span class=line><span class=cl><span class=s1>      }]
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><p>Then run the following command to send a question to the LLM:</p><div class=tab-panel data-tab-group=R-tabs-5181b1f9badfe2d13081ba2bd3a0a937><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-214afce38a58e51636259cbae30e9b5f aria-expanded=true data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5181b1f9badfe2d13081ba2bd3a0a937","R-tab-f907e651164789346ae0a1e257c462d8")'>
<span class=tab-nav-text>Script</span>
</button>
<button aria-controls=R-tab-id-e8536d839240ab04fd8e933727934497 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5181b1f9badfe2d13081ba2bd3a0a937","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-214afce38a58e51636259cbae30e9b5f data-tab-item=R-tab-f907e651164789346ae0a1e257c462d8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X <span class=s2>&#34;POST&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> <span class=s1>&#39;http://llm-app:8080/askquestion&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Accept: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;question&#34;: &#34;How much memory does the NVIDIA H200 have?&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div></div></div><div id=R-tab-id-e8536d839240ab04fd8e933727934497 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>The NVIDIA H200 has 141GB of HBM3e memory, which is twice the capacity of the NVIDIA H100 Tensor Core GPU with 1.4X more memory bandwidth.</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=review-metrics-traces-and-logs>Review Metrics, Traces, and Logs</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=view-trace-data-in-splunk-observability-cloud>View Trace Data in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In Splunk Observability Cloud, navigate to <code>APM</code> and then select <code>Service Map</code>.
Ensure your environment name is selected (e.g. <code>ai-pod-workshop-participant-1</code>).<br>You should see a service map that looks like the following:</p><p><a href=#R-image-9848474fab41ac4e40b2805825d7f242 class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../../images/ServiceMap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9848474fab41ac4e40b2805825d7f242><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ServiceMap.png></a></p><p>Click on <code>Traces</code> on the right-hand side menu. Then select one of the slower running
traces. It should look like the following example:</p><p><a href=#R-image-b301e5d2006823451d2daa05e35f68ca class=lightbox-link><img alt=Trace class="lazy lightbox figure-image" loading=lazy src=../../images/Trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b301e5d2006823451d2daa05e35f68ca><img alt=Trace class="lazy lightbox lightbox-image" loading=lazy src=../../images/Trace.png></a></p><p>The trace shows all the interactions that our application executed to return an answer
to the users question (i.e. &ldquo;How much memory does the NVIDIA H200 have?&rdquo;)</p><p>For example, we can see where our application performed a similarity search to look
for documents related to the question at hand in the Weaviate vector database.</p><p>We can also see how the application created a prompt to send to the LLM, including the
context that was retrieved from the vector database:</p><p><a href=#R-image-17e5c3e7ee241cac8d1882d7931e2301 class=lightbox-link><img alt="Prompt Template" class="lazy lightbox figure-image" loading=lazy src=../../images/PromptTemplate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-17e5c3e7ee241cac8d1882d7931e2301><img alt="Prompt Template" class="lazy lightbox lightbox-image" loading=lazy src=../../images/PromptTemplate.png></a></p><p>Finally, we can see the response from the LLM, the time it took, and the number of
input and output tokens utilized:</p><p><a href=#R-image-afa8e8a5e6fcbdbd7c7a25612c0827d2 class=lightbox-link><img alt="LLM Response" class="lazy lightbox figure-image" loading=lazy src=../../images/LLMResponse.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-afa8e8a5e6fcbdbd7c7a25612c0827d2><img alt="LLM Response" class="lazy lightbox lightbox-image" loading=lazy src=../../images/LLMResponse.png></a></p><h2 id=confirm-metrics-are-sent-to-splunk>Confirm Metrics are Sent to Splunk<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to <code>Dashboards</code> in Splunk Observability Cloud, then search for the
<code>Cisco AI PODs Dashboard</code>, which is included in the <code>Built-in dashboard groups</code>.
Navigate to the <code>NIM FOR LLMS</code> tab and ensure the dashboard is filtered
on your OpenShift cluster name. The charts should be populated as in the
following example:</p><p><a href=#R-image-8aa20847996a12c9b3bccf5e9a4972f6 class=lightbox-link><img alt="NIM LLMS Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/NIMLLM.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8aa20847996a12c9b3bccf5e9a4972f6><img alt="NIM LLMS Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/NIMLLM.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article><article class=default><header class=headline></header><h1 id=wrap-up>Wrap-Up</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=wrap-up>Wrap-Up<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We hope you enjoyed this workshop, which provided hands-on experience deploying and working
with several of the technologies that are used to monitor Cisco AI PODs with
Splunk Observability Cloud. Specifically, you had the opportunity to:</p><ul><li>Work with a RedHat OpenShift cluster with GPU-based worker nodes.</li><li>Work with the NVIDIA NIM Operator and NVIDIA GPU Operator.</li><li>Work with Large Language Models (LLMs) deployed using NVIDIA NIM to the cluster.</li><li>Deploy the OpenTelemetry Collector in the Red Hat OpenShift cluster.</li><li>Add Prometheus receivers to the collector to ingest infrastructure metrics.</li><li>Monitor the Weaviate vector database in the cluster.</li><li>Configure monitoring for Pure Storage metrics using Prometheus.</li><li>Instrument Python services that interact with Large Language Models (LLMs) with OpenTelemetry.</li><li>Understand which details which OpenTelemetry captures in the trace from applications that interact with LLMs.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Feb 6, 2026</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=splunk4ninjas-appdynamics>Splunk4Ninjas AppDynamics</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Splunk AppDynamics is a full-stack performance monitoring solution for your critical business applications that offers the following features:</p><ul><li>Consistent end-to-end application monitoring, regardless of environment, traditional, hybrid, or cloud-native.</li><li>Accelerated cloud migration and enterprise-grade, end-to-end insights for your applications regardless of where they are deployed.</li><li>Unified monitoring that enables you to quickly resolve performance issues before they become business problems, with three clicks to root cause.</li></ul><p>You can optimize the total cost of ownership by leveraging existing personnel, processes, and training on AppDynamics platform for traditional, cloud, or hybrid deployments.</p><p><a href=#R-image-d0a36a24d61789e05e7cec94a01add4a class=lightbox-link><img alt="Screenshot of AppDynamics Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d0a36a24d61789e05e7cec94a01add4a><img alt="Screenshot of AppDynamics Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/images/controller-vm.png></a></p><h2 id=workshop-overview>Workshop Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, we‚Äôll cover the fundamentals of Splunk AppDynamics. We&rsquo;ll demonstrate how Splunk AppDynamics enables you to monitor the health of your application services, Web Applications, Databases and more. When you have completed this workshop, you will be able to :</p><ul><li>Download and install the AppDynamics Java APM Agent.</li><li>Configure collection settings in the Controller.</li><li>Monitor and troubleshoot your application‚Äôs performance health.</li><li>Monitor alerts in AppDynamic‚Äôs monitoring service based off of data captured by AppDynamics.</li><li>Monitor server health and troubleshoot issues</li><li>Monitor the health of your browser based application with BRUM</li><li>Monitor and troubleshoot Database performance</li><li>Gain deeper visibility into your users with Splunk AppDynamics Business IQ</li></ul><h2 id=additional-work-to-be-done>Additional Work to be Done<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Add a section covering health rules, how to view existing ones, create new health rule</li><li>Application Security</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 4, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk4Ninjas AppDynamics</h1><article class=default><header class=headline></header><h1 id=application-performance-monitoring-apm>Application Performance Monitoring (APM)</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=objectives>Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this Lab you learn how to use AppDynamics to monitor the health of your application services. You will need to complete this lab first before you start the other labs in this Workshop.</p><p>When you have completed this lab, you will be able to:</p><ul><li>Download the AppDynamics Java APM Agent.</li><li>Install the AppDynamics Java APM Agent.</li><li>Initialize the sample application with load.</li><li>Understand the core concepts of AppDynamics APM</li><li>Configure collection settings in the Controller.</li><li>Monitor your application‚Äôs health.</li><li>Troubleshoot application performance issues to find root cause.</li><li>Monitor alerts in AppDynamic‚Äôs monitoring service based off of data captured by AppDynamics.</li></ul><h2 id=workshop-environment>Workshop Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The workshop environment has two hosts:</p><ul><li>The first host runs the AppDynamics Controller and will be referred to from this point on as the Controller.</li><li>The second host runs the Supercar Trader application used in the labs. It will be the host where you will install the AppDynamics agents and will be referred to from this point on as the Application VM.</li></ul><h2 id=controller>Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will be using the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> for this workshop.</p><p><a href=#R-image-5e957c789a9cd217f1f0756fd192a1d9 class=lightbox-link><img alt=Controller class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5e957c789a9cd217f1f0756fd192a1d9><img alt=Controller class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/images/controller-vm.png></a></p><h2 id=application-vm>Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Supercar Trader is a Java-based Web Application</p><p>The purpose of Supercar-Trader collection is to generate dynamic traffic (Business Transactions) for the AppDynamics Controller.</p><p><a href=#R-image-6089ba69d398056528ce71f7013c4b62 class=lightbox-link><img alt="Application VM" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/images/application-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6089ba69d398056528ce71f7013c4b62><img alt="Application VM" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/images/application-vm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Application Performance Monitoring (APM)</h1><article class=default><header class=headline></header><h1 id=1-download-java-agent>1. Download Java Agent</h1><p>In this exercise you will access the AppDynamics Controller from a web browser and download the Java APM agent from there.</p><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=configure-your-application>Configure your Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Select <strong>Overview</strong> on the left navigation panel</li><li>Click on <strong>Getting Started</strong> tab</li><li>Click on <strong>Getting Started Wizard</strong> button</li></ol><p><a href=#R-image-ae1ade2cccd3d81bfe703abc449aeb44 class=lightbox-link><img alt="Getting Started Wizard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/agent-wizard-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae1ade2cccd3d81bfe703abc449aeb44><img alt="Getting Started Wizard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/agent-wizard-rz.png></a></p><p>Select the Java Application Type</p><p><a href=#R-image-bfabf487e132eb1a91bb897bb92b1cd0 class=lightbox-link><img alt="Java Application" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/select-java-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bfabf487e132eb1a91bb897bb92b1cd0><img alt="Java Application" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/select-java-rz.png></a></p><h2 id=download-the-java-agent>Download the Java Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Select the <strong>Sun/JRockit - Legacy</strong> for the JVM type</li><li>Accept defaults for the Controller connection.</li><li>Under <strong>Set Application and Tier</strong>, select <strong>Create a new Application:</strong></li><li>Enter <strong>Supercar-Trader-YOURINITIALS</strong> as the application name.</li><li>Enter <strong>Web Portal</strong> for the new Tier</li><li>Enter <strong>Web-Portal_Node-01</strong> for the Node Name</li><li>Click <strong>Continue</strong></li><li>Click <strong>Click Here to Download</strong>.</li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Warning</summary><div class=box-content><p>The application name must be unique, make sure to append your initials or add a unique identifier to the application name</p></div></details><p><a href=#R-image-ee495cc61d4567b43e1853bbb583c0a9 class=lightbox-link><img alt="Agent Configuration1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/java-agent-config1-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ee495cc61d4567b43e1853bbb583c0a9><img alt="Agent Configuration1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/java-agent-config1-rz.png></a></p><p><a href=#R-image-c110a57773611574249d793b849dd62c class=lightbox-link><img alt="Agent Configuration2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/java-agent-config2-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c110a57773611574249d793b849dd62c><img alt="Agent Configuration2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/java-agent-config2-rz.png></a></p><p>Your browser should prompt you that the agent is being downloaded to your local file system. Make sure to take note of where the file was downloaded to and the full name of it.</p><p><a href=#R-image-6364d11d3e36522497b2c85ae61d778a class=lightbox-link><img alt="Agent Bundle" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/agent-bundle-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6364d11d3e36522497b2c85ae61d778a><img alt="Agent Bundle" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/1-download-agent/images/agent-bundle-rz.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-install-the-java-agent>2. Install the Java Agent</h1><p>In this exercise you will perform the following actions:</p><ul><li>Upload the Java agent file to your EC2 instance</li><li>Unzip the file into a specific directory</li><li>Update the Java agents XML configuration file (optional)</li><li>Modify the Apache Tomcat startup script to add the Java agent</li></ul><h2 id=upload-java-agent-to-application-vm>Upload Java Agent to Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By this point you should have received the information regarding the EC2 instance that you will be using for this workshop. Ensure you have the IP address of your EC2 instance, username and password required to ssh into the instance .</p><p>On your local machine, open a terminal window and change into the directory where the java agent file was downloaded to. Upload the file into the EC2 instance using the following command. This may take some time to complete.</p><ul><li>Update the IP address or public DNS for your instance.</li><li>Update the filename to match your exact version.</li></ul><div class=tab-panel data-tab-group=R-tabs-c75c8402298b0c966b36defba69b0a6d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2c5e438736554cd8897a298d4ba800bd aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c75c8402298b0c966b36defba69b0a6d","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-9337c05b9b0e75cad8c12b0925a0ec0d aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c75c8402298b0c966b36defba69b0a6d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-2c5e438736554cd8897a298d4ba800bd data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/Downloads
</span></span><span class=line><span class=cl>scp -P <span class=m>2222</span> AppServerAgent-22.4.0.33722.zip splunk@i-0b6e3c9790292be66.splunk.show:/home/splunk</span></span></code></pre></div></div></div><div id=R-tab-id-9337c05b9b0e75cad8c12b0925a0ec0d data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>splunk@44.247.206.254<span class=o>)</span> Password:
</span></span><span class=line><span class=cl>AppServerAgent-22.4.0.33722.zip                                                                    100%   22MB 255.5KB/s   01:26</span></span></code></pre></div></div></div></div></div><h2 id=unzip-the-java-agent>Unzip the Java Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>SSH into your EC2 instance using the instance and password assigned to you by the instructor.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -P <span class=m>2222</span> splunk@i-0b6e3c9790292be66.splunk.show</span></span></code></pre></div><p>Unzip the java agent bundle into a new directory.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics
</span></span><span class=line><span class=cl>mkdir javaagent
</span></span><span class=line><span class=cl>cp /home/splunk/AppServerAgent-*.zip /opt/appdynamics/javaagent
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/javaagent
</span></span><span class=line><span class=cl>unzip AppServerAgent-*.zip</span></span></code></pre></div><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>We pre-configured the Java agent using the Controller&rsquo;s Getting Started Wizard. If you download the agent from the AppDynamics Portal, you will need to manually update the Java agent‚Äôs XML configuration file.</p><p>There are three primary ways to set the configuration properties of the Java agent. These take precedence in the following order:</p><ol><li>System environment variables.</li><li>JVM properties passed on the command line.</li><li>Properties within the <code>controller-info.xml</code> file.</li></ol></div></details><h2 id=add-the-java-agent-to-the-tomcat-server>Add the Java Agent to the Tomcat Server<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>First we want to make sure that the Tomcat server is not running</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./shutdown.sh</span></span></code></pre></div><p>We will now modify the catalina script to set an environment variable with the java agent.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>nano catalina.sh</span></span></code></pre></div><p>Add the following line at 125 (after the initial comments) & save the file</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CATALINA_OPTS</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$CATALINA_OPTS</span><span class=s2> -javaagent:/opt/appdynamics/javaagent/javaagent.jar&#34;</span></span></span></code></pre></div><p>Restart the server</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./startup.sh</span></span></code></pre></div><p>Validate that the Tomcat server is running, this can take a few minutes</p><div class=tab-panel data-tab-group=R-tabs-fb2eb2b3cb7c8fc480578fe9d060c180><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ba238819412e09b56563ea38ed89e7ad aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fb2eb2b3cb7c8fc480578fe9d060c180","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-686a1b56979394c31ac79f12b087d675 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-fb2eb2b3cb7c8fc480578fe9d060c180","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-ba238819412e09b56563ea38ed89e7ad data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:8080</span></span></code></pre></div></div></div><div id=R-tab-id-686a1b56979394c31ac79f12b087d675 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;!DOCTYPE html&gt;
</span></span><span class=line><span class=cl>&lt;html <span class=nv>lang</span><span class=o>=</span><span class=s2>&#34;en&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;head&gt;
</span></span><span class=line><span class=cl>        &lt;meta <span class=nv>charset</span><span class=o>=</span><span class=s2>&#34;UTF-8&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;title&gt;Apache Tomcat/9.0.50&lt;/title&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;favicon.ico&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;icon&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;image/x-icon&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;tomcat.css&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;stylesheet&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;text/css&#34;</span> /&gt;
</span></span><span class=line><span class=cl>    &lt;/head&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;body&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;wrapper&#34;</span>
</span></span><span class=line><span class=cl>....</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-generate-application-load>3. Generate Application Load</h1><p>In this exercise you will perform the following actions:</p><ul><li>Verify the sample app is running.</li><li>Start the load generation for the sample application.</li><li>Confirm the transaction load in the Controller.</li></ul><h2 id=verify-that-the-sample-application-is-running>Verify that the Sample Application is Running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The sample application home page is accessible through your web browser with a URL in the format seen below. Enter that URL in your browser‚Äôs navigation bar, substituting the IP Address of your EC2 instance.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://<span class=o>[</span>ec2-ip-address<span class=o>]</span>:8080/Supercar-Trader/home.do</span></span></code></pre></div><p>You should be able to see the home page of the Supercar Trader application.
<a href=#R-image-b73bad4cbbe25823df59c93c57540ba1 class=lightbox-link><img alt="Supercar Trade Home Page" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/SuperCarHomePage-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b73bad4cbbe25823df59c93c57540ba1><img alt="Supercar Trade Home Page" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/SuperCarHomePage-rz.png></a></p><h2 id=start-the-load-generation>Start the Load Generation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>SSH into your ec2 instance and start the load generation. It may take a few minutes for all the scripts to run.</p><div class=tab-panel data-tab-group=R-tabs-e31b058d2bb53c8451a1481aad40360d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-429ab61c59e17473537e6fed2928c621 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e31b058d2bb53c8451a1481aad40360d","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-ca39d1f78b50de31da195f24ff6d8a33 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-e31b058d2bb53c8451a1481aad40360d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-429ab61c59e17473537e6fed2928c621 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./start_load.sh</span></span></code></pre></div></div></div><div id=R-tab-id-ca39d1f78b50de31da195f24ff6d8a33 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Cleaning up artifacts from previous load...
</span></span><span class=line><span class=cl>Starting home-init-01
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>1</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>2</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>3</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>4</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>5</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>6</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>7</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>8</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>9</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>10</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>11</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>12</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>13</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>14</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>15</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>16</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>17</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>18</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>19</span>
</span></span><span class=line><span class=cl>Waiting <span class=k>for</span> additional JVMs to initialize... <span class=m>20</span>
</span></span><span class=line><span class=cl>Starting slow-query-01
</span></span><span class=line><span class=cl>Starting slow-query-02
</span></span><span class=line><span class=cl>Starting slow-query-03
</span></span><span class=line><span class=cl>Starting slow-query-04
</span></span><span class=line><span class=cl>Starting sessions-01
</span></span><span class=line><span class=cl>Starting sessions-02
</span></span><span class=line><span class=cl>Starting sell-car-01
</span></span><span class=line><span class=cl>Starting sell-car-02
</span></span><span class=line><span class=cl>Starting sessions-03
</span></span><span class=line><span class=cl>Starting sessions-04
</span></span><span class=line><span class=cl>Starting search-01
</span></span><span class=line><span class=cl>Starting request-error-01
</span></span><span class=line><span class=cl>Starting mem-leak-insurance
</span></span><span class=line><span class=cl>Finished starting load generator scripts                                                                100%   22MB 255.5KB/s   01:26</span></span></code></pre></div></div></div></div></div><h2 id=confirm-transaction-load-in-the-controller>Confirm transaction load in the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you still have the Getting Started Wizard open in your web browser, you should see that the agent is now connected and that the Controller is receiving data.</p><p><a href=#R-image-c2356d369b8d3053b3b94811e0b7d5df class=lightbox-link><img alt="Agent Connected" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/agent_connected.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c2356d369b8d3053b3b94811e0b7d5df><img alt="Agent Connected" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/agent_connected.png></a></p><p>Click <strong>Continue</strong> and you will be taken to the <strong>Application Flow Map</strong> (you can jump to the Flow Map image below).</p><p>If you previously closed the Controller browser window, log back into the Controller.</p><ol><li><p>From the Overview page (Landing Page). Click on the <strong>Applications</strong> tab on the left navigation panel.</p><p><a href=#R-image-f0576e6abd06135cc29fffddfda6ab47 class=lightbox-link><img alt="Controller Overview Page" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ControllerOverviewPage.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0576e6abd06135cc29fffddfda6ab47><img alt="Controller Overview Page" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ControllerOverviewPage.png></a></p></li><li><p>Within the <strong>Applications</strong> page you can manually search for your application or you can use the search bar in the top right corner to narrow down your search.</p><p><a href=#R-image-a56cfbf96d4fd91941001de8270b89ab class=lightbox-link><img alt="Applications Search" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ApplicationsSearch.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a56cfbf96d4fd91941001de8270b89ab><img alt="Applications Search" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ApplicationsSearch.png></a></p></li></ol><p>Click in your application&rsquo;s name, this should bring you into the <strong>Application Flow Map</strong>, you should see all the application components appear after twelve minutes.</p><p>If you don‚Äôt see all the application components after twelve minutes, try waiting a few more minutes and refresh your browser tab.</p><p><a href=#R-image-ccf5e5eb36224cabe66a88986fe79c7e class=lightbox-link><img alt=FlowMap class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/SuperCarTrader_FlowMap-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ccf5e5eb36224cabe66a88986fe79c7e><img alt=FlowMap class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/SuperCarTrader_FlowMap-rz.png></a></p><p>During the agent download step we assigned the Tier name and Node name for the Tomcat server.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;tier-name&gt;Web-Portal&lt;/tier-name&gt;
</span></span><span class=line><span class=cl>&lt;node-name&gt;Web-Portal_Node-01&lt;/node-name&gt;</span></span></code></pre></div><p>You might be wondering how the other four services had their Tier and Node name assigned. The sample application dynamically creates four additional JVMs from the initial Tomcat JVM and assigns the Tier and Node names by passing those properties into the JVM startup command as -D properties for each of the four services. Any -D properties included on the JVM startup command line will supersede the properties defined in the Java agents <code>controller-info.xml</code> file.</p><p>To see the JVM startup parameters used for each of the four services that were dynamically started, issue the following command in your terminal window of your ec2 instance.</p><div class=tab-panel data-tab-group=R-tabs-0f6843c42b48957f3f6127ebdf4eed8e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-13fd808c24d13ec84caa0fe21f978985 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0f6843c42b48957f3f6127ebdf4eed8e","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-4d32fbee5987eba5521ee9587d3a13dc aria-expanded=false data-tab-item=R-tab-54a7ac992a5ca30f7ce891ff85a0ca52 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-0f6843c42b48957f3f6127ebdf4eed8e","R-tab-54a7ac992a5ca30f7ce891ff85a0ca52")'>
<span class=tab-nav-text>Loadgen Output</span></button></div><div class=tab-content-container><div id=R-tab-id-13fd808c24d13ec84caa0fe21f978985 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -ef <span class=p>|</span> grep appdynamics.agent.tierName</span></span></code></pre></div></div></div><div id=R-tab-id-4d32fbee5987eba5521ee9587d3a13dc data-tab-item=R-tab-54a7ac992a5ca30f7ce891ff85a0ca52 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>splunk     <span class=m>47131</span>   <span class=m>46757</span>  <span class=m>3</span> 15:34 pts/1    00:08:17 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -javaagent:/opt/appdynamics/javaagent/javaagent.jar -Dappdynamics.controller.hostName<span class=o>=</span>se-lab.saas.appdynamics.com -Dappdynamics.controller.port<span class=o>=</span><span class=m>443</span> -Dappdynamics.controller.ssl.enabled<span class=o>=</span><span class=nb>true</span> -Dappdynamics.agent.applicationName<span class=o>=</span>Supercar-Trader-AppD-Workshop -Dappdynamics.agent.tierName<span class=o>=</span>Api-Services -Dappdynamics.agent.nodeName<span class=o>=</span>Api-Services_Node-01 -Dappdynamics.agent.accountName<span class=o>=</span>se-lab -Dappdynamics.agent.accountAccessKey<span class=o>=</span>hj6a4d7h2cuq -Xms64m -Xmx512m -XX:MaxPermSize<span class=o>=</span>256m supercars.services.api.ApiService
</span></span><span class=line><span class=cl>splunk     <span class=m>47133</span>   <span class=m>46757</span>  <span class=m>2</span> 15:34 pts/1    00:08:11 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -javaagent:/opt/appdynamics/javaagent/javaagent.jar -Dappdynamics.controller.hostName<span class=o>=</span>se-lab.saas.appdynamics.com -Dappdynamics.controller.port<span class=o>=</span><span class=m>443</span> -Dappdynamics.controller.ssl.enabled<span class=o>=</span><span class=nb>true</span> -Dappdynamics.agent.applicationName<span class=o>=</span>Supercar-Trader-AppD-Workshop -Dappdynamics.agent.tierName<span class=o>=</span>Inventory-Services -Dappdynamics.agent.nodeName<span class=o>=</span>Inventory-Services_Node-01 -Dappdynamics.agent.accountName<span class=o>=</span>se-lab -Dappdynamics.agent.accountAccessKey<span class=o>=</span>hj6a4d7h2cuq -Xms64m -Xmx512m -XX:MaxPermSize<span class=o>=</span>256m supercars.services.inventory.InventoryService
</span></span><span class=line><span class=cl>splunk     <span class=m>47151</span>   <span class=m>46757</span>  <span class=m>1</span> 15:34 pts/1    00:04:58 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -javaagent:/opt/appdynamics/javaagent/javaagent.jar -Dappdynamics.controller.hostName<span class=o>=</span>se-lab.saas.appdynamics.com -Dappdynamics.controller.port<span class=o>=</span><span class=m>443</span> -Dappdynamics.controller.ssl.enabled<span class=o>=</span><span class=nb>true</span> -Dappdynamics.agent.applicationName<span class=o>=</span>Supercar-Trader-AppD-Workshop -Dappdynamics.agent.tierName<span class=o>=</span>Insurance-Services -Dappdynamics.agent.nodeName<span class=o>=</span>Insurance-Services_Node-01 -Dappdynamics.agent.accountName<span class=o>=</span>se-lab -Dappdynamics.agent.accountAccessKey<span class=o>=</span>hj6a4d7h2cuq -Xms64m -Xmx68m -XX:MaxPermSize<span class=o>=</span>256m supercars.services.insurance.InsuranceService
</span></span><span class=line><span class=cl>splunk     <span class=m>47153</span>   <span class=m>46757</span>  <span class=m>3</span> 15:34 pts/1    00:08:17 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -javaagent:/opt/appdynamics/javaagent/javaagent.jar -Dappdynamics.controller.hostName<span class=o>=</span>se-lab.saas.appdynamics.com -Dappdynamics.controller.port<span class=o>=</span><span class=m>443</span> -Dappdynamics.controller.ssl.enabled<span class=o>=</span><span class=nb>true</span> -Dappdynamics.agent.applicationName<span class=o>=</span>Supercar-Trader-AppD-Workshop -Dappdynamics.agent.tierName<span class=o>=</span>Enquiry-Services -Dappdynamics.agent.nodeName<span class=o>=</span>Enquiry-Services_Node-01 -Dappdynamics.agent.accountName<span class=o>=</span>se-lab -Dappdynamics.agent.accountAccessKey<span class=o>=</span>hj6a4d7h2cuq -Xms64m -Xmx512m -XX:MaxPermSize<span class=o>=</span>256m supercars.services.enquiry.EnquiryService
</span></span><span class=line><span class=cl>splunk    <span class=m>144789</span>   <span class=m>46722</span>  <span class=m>0</span> 20:09 pts/1    00:00:00 grep --color<span class=o>=</span>auto appdynamics.agent.tierName</span></span></code></pre></div></div></div></div></div><p>Once all of the components appear on the flow map, you should see an HTTP cloud icon that represents the three HTTP backends called by the Insurance-Services Tier.</p><p>Ungroup the the three HTTP backends by following these steps.</p><ol><li>Right click the HTTP cloud icon labeled 3 HTTP backends</li><li>From the drop down menu, select Ungroup Backends</li></ol><p><a href=#R-image-ed7f552ff61a81eaaada95a51e32b3fd class=lightbox-link><img alt="Ungroup Http" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ungroup-http-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ed7f552ff61a81eaaada95a51e32b3fd><img alt="Ungroup Http" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ungroup-http-rz.png></a></p><p>Once the HTTP backends have been ungrouped, you should see all three HTTP backends as shown in the following image.</p><p><a href=#R-image-8cb9b66e6b543bd99ba1dacc9bddeb68 class=lightbox-link><img alt="Ungroup flow" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ungrouped_flow-rz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8cb9b66e6b543bd99ba1dacc9bddeb68><img alt="Ungroup flow" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/3-generate-application-load/images/ungrouped_flow-rz.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-appdynamics-core-concepts>4. AppDynamics Core Concepts</h1><p>In this section you will learn about the core concepts of Splunk Appdynamics APM features. By the end of the section you will understand the following concepts:</p><ul><li>Application Flow Maps</li><li>Business Transactions (BTs)</li><li>Snapshots</li><li>Call Graphs</li></ul><h2 id=flow-maps>Flow Maps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>AppDynamics app agents automatically discover the most common application frameworks and services. Using built-in application detection and configuration settings, agents collect application data and metrics to build Flow Maps.</p><p>AppDynamics automatically captures and scores every transaction. Flow Maps present a dynamic visual representation of the components and activities of your monitored application environment in direct context of the time frame that you have selected.</p><p>Familiarize yourself with the some of the different features of the Flow Map.</p><ol><li>Try using the different layout options (you can also click and drag each icon on the Flow Map to reposition it).</li><li>Try using the slider and mouse scrollwheel to adjust the zoom level.</li><li>Look at the Transaction Scorecard.</li><li>Explore the options for editing the Flow Map.</li></ol><p>You can read more about Flow Maps <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/business-applications/flow-maps/flow-map-overview rel=external>here</a></p><p><a href=#R-image-8839ea5f701ee46840bdc16d9f65870e class=lightbox-link><img alt="Flow Map Components" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/FlowMapComponents.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8839ea5f701ee46840bdc16d9f65870e><img alt="Flow Map Components" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/FlowMapComponents.png></a></p><h2 id=business-transactions>Business Transactions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the AppDynamics model, a Business Transaction represents the data processing flow for a request, most often a user request. In real-world terms, many different components in your application may interact to provide services to fulfill the following types of requests:</p><ul><li>In an e-commerce application, a user logging in, searching for items or adding items to the cart.</li><li>In a content portal, a user requests content such as sports, business or entertainment news.</li><li>In a stock trading application, operations such as receiving a stock quote, buying or selling stocks.<br>Because AppDynamics orients performance monitoring around Business Transactions, you can focus on the performance of your application components from the user perspective. You can quickly identify whether a component is readily available or if it is having performance issues. For instance, you can check whether users are able to log in, check out or view their data. You can see response times for users, and the causes of problems when they occur.</li></ul><p>You can read more about Business Transactions <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/overview-of-application-monitoring/business-transactions rel=external>here</a> and <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/business-transactions rel=external>here</a></p><h2 id=verifying-business-transactions>Verifying Business Transactions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Verify that Business Transactions are being automatically detected by following these steps.</p><ol><li>Click the <strong>Business Transactions</strong> option on the left menu.</li><li>Look at the list of Business Transactions and their performance.</li></ol><p><a href=#R-image-988f4686fbe4cf9465e99888562a4afa class=lightbox-link><img alt="Business Transactions" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/business-transactions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-988f4686fbe4cf9465e99888562a4afa><img alt="Business Transactions" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/business-transactions.png></a></p><h2 id=snapshots>Snapshots<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>AppDynamics monitors every execution of a Business Transaction in the instrumented environment, and the metrics reflect all such executions. However, for troubleshooting purposes, AppDynamics takes snapshots (containing deep diagnostic information) of specific instances of transactions that are having problems.</p><p>Verify that transaction snapshots are being automatically collected by following these steps.</p><ol><li>Click the <strong>Application Dashboard</strong> option on the left menu.</li><li>Click the <strong>Transaction Snapshots</strong> tab.</li><li>Click the <strong>Exe Time (ms)</strong> column to sort the snapshots with the greatest execution time.</li><li>Double-click a Business Transaction snapshot to display the snapshot viewer</li></ol><p><a href=#R-image-8660ddc080888de1eba142af11d56ee1 class=lightbox-link><img alt=Snapshots class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/snapshots.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8660ddc080888de1eba142af11d56ee1><img alt=Snapshots class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/snapshots.png></a></p><p>A transaction snapshot gives you a cross-tier view of the processing flow for a single invocation of a transaction.</p><p>The <strong>Potential Issues</strong> panel highlights slow methods and slow remote service calls and help you investigate the root cause for performance issues.</p><h2 id=drill-downs--call-graphs>Drill Downs & Call Graphs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Call graphs and drill downs provide key information, including slowest methods, errors, and remote service calls for the transaction execution on a tier. A drill down may include a partial or complete call graph. Call graphs reflect the code-level view of the processing of the Business Transaction on a particular tier.</p><p>In the Flow Map for a Business Transaction snapshot, a tier with a Drill Down link indicates AppDynamics has taken a call graph for that tier.</p><p>Drill down into a call graph of the transaction snapshot by following these steps.</p><ol><li>Click on a slow call in the Potential Issues list on the left.</li><li>Click Drill Down into Call Graph.</li></ol><p><a href=#R-image-b5750a83970ed3c8a4ea79dba745cd31 class=lightbox-link><img alt="Snapshot Drill Down" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/SnapShotDrillDown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5750a83970ed3c8a4ea79dba745cd31><img alt="Snapshot Drill Down" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/SnapShotDrillDown.png></a></p><p>The call graph view shows you the following details.</p><ol><li>The method execution sequence shows the names of the classes and methods that participated in processing the Business Transaction on this node, in the order in which the flow of control proceeded.</li><li>For each method, you can see the time and percentage spent processing and the line number in the source code, enabling you to pinpoint the location in the code that could be affecting the performance of the transaction.</li><li>The call graph displays exit call links for methods that make outbound calls to other components such as database queries and web service calls.</li></ol><p>You can read more about Transaction Snapshots <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/business-transactions/troubleshoot-business-transaction-performance-with-transaction-snapshots rel=external>here</a></p><p>You can read more about Call Graphs <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/business-transactions/troubleshoot-business-transaction-performance-with-transaction-snapshots/call-graphs rel=external>here</a></p><p><a href=#R-image-d6139f0966131440740ea2d52e39284d class=lightbox-link><img alt="Call Graph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/call-graph.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d6139f0966131440740ea2d52e39284d><img alt="Call Graph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/4-apm-core-concepts/images/call-graph.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=5-configure-controller-settings>5. Configure Controller Settings</h1><p>In this exercise you will complete the following tasks:</p><ul><li>Adjust Business Transaction settings.</li><li>Adjust Call Graph settings.</li><li>Observe Business Transaction changes.</li></ul><h2 id=adjust-business-transaction-settings>Adjust Business Transaction Settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the last exercise, you validated that Business Transactions were being auto-detected. There are times when you want to adjust the Business Transaction auto-detection rules to get them to an optimal state. This is the case with our sample application, which is built on an older Apache Struts framework.</p><p>The business transactions highlighted in the following image show that each pair has a Struts Action (.execute) and a Servlet type (.jsp). You will be adjusting the settings of the transaction detection rules so that these two types of transactions will be combined into one.</p><p>Anytime you see the time frame selector visible in the AppDynamics UI, the view you see will represents the context of the time frame selected. You can choose one of the pre-defined time frames or create your own custom time frame with the specific date and time range you want to view.</p><ol><li>Select the last 1 hour time frame.</li><li>Use your mouse to hover over the blue icons to see the Entry Point Type of the transaction.</li></ol><p><a href=#R-image-587410ed78d92d057955c071949fa18a class=lightbox-link><img alt="List of Business Transactions" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/business-transactions-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-587410ed78d92d057955c071949fa18a><img alt="List of Business Transactions" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/business-transactions-list.png></a></p><p>Optimize the transaction detection by following these steps:</p><ol><li><p>Click the <strong>Configuration</strong> option toward the bottom left menu.</p></li><li><p>Click the <strong>Instrumentation</strong> link.</p><p><a href=#R-image-be4e8723797a1dbe6eba083c12aabaf4 class=lightbox-link><img alt="Configure Instrumentation" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/configure-instrumentation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be4e8723797a1dbe6eba083c12aabaf4><img alt="Configure Instrumentation" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/configure-instrumentation.png></a></p></li><li><p>Select <strong>Transaction Detection</strong> from the Instrumentation menu.</p></li><li><p>Select the <strong>Java Auto Discovery Rule</strong>.</p></li><li><p>Click <strong>Edit</strong>.</p><p><a href=#R-image-d91dd6547b51e4d1a9c39280ab41f9f3 class=lightbox-link><img alt="Edit Java Rules" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/edit-java-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d91dd6547b51e4d1a9c39280ab41f9f3><img alt="Edit Java Rules" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/edit-java-rule.png></a></p></li><li><p>Select the <strong>Rule Configuration</strong> tab on the Rule Editor.</p></li><li><p>Uncheck all the boxes on <strong>Struts Action</strong> section.</p></li><li><p>Uncheck all the boxes on <strong>Web Service</strong> section.</p></li><li><p>Scroll down to find the Servlet settings.</p></li><li><p>Check the box <strong>Enable Servlet Filter Detection</strong> (all three boxes should be checked on Servlet settings).</p></li><li><p>Click <strong>Save</strong> to save your changes.</p></li></ol><p>You can read more about Transaction Detection Rules <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/configure-instrumentation/transaction-detection-rules rel=external>here</a>.</p><p><a href=#R-image-f8d532d55671051c42cd826f56334c34 class=lightbox-link><img alt="Rule Configuration" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/rule-configuration1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f8d532d55671051c42cd826f56334c34><img alt="Rule Configuration" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/rule-configuration1.png></a><br><a href=#R-image-ca97ec5bd211641695c8e1af354a8525 class=lightbox-link><img alt="Rule Configuration Cont" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/rule-configuration2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ca97ec5bd211641695c8e1af354a8525><img alt="Rule Configuration Cont" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/rule-configuration2.png></a></p><h2 id=adjust-call-graph-settings>Adjust Call Graph settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can control the data captured in call graphs within transaction snapshots with the Call Graph Settings window seen below. In this step you will change the SQL Capture settings so the parameters of each SQL query are captured along with the full query. You can change the SQL Capture settings by following these steps.</p><ol><li>Select the <strong>Call Graph Settings</strong> tab from the Instrumentation window. This is within the <strong>Instrumentation</strong> settings which we navigated to from the previous exercise.</li><li>Ensure you have the <strong>Java</strong> tab selected within the settings.</li><li>Scroll down until you see the <strong>SQL Capture Settings</strong>.</li><li>Click the <strong>Capture Raw SQL</strong> option.</li><li>Click <strong>Save</strong>.</li></ol><p>You can read more about Call Graph settings <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/configure-instrumentation/call-graph-settings rel=external>here</a>.</p><p><a href=#R-image-3f812c9c75de590a4e1913c5cd20e946 class=lightbox-link><img alt="Call Graph Configuration" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/call-graph-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3f812c9c75de590a4e1913c5cd20e946><img alt="Call Graph Configuration" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/call-graph-config.png></a></p><h2 id=observe-business-transaction-changes>Observe Business Transaction changes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>It may take up to 30 minutes for the new business transactions to replace the prior transactions. The list of business transactions should look like the following example after the new transactions are detected.</p><ol><li>Click on <strong>Business Transactions</strong> on the left menu.</li><li>Adjust your time range picker to look at the <strong>last 15 minutes</strong></li></ol><p><a href=#R-image-4fa3f3c08b174ebe897be4357f8b8e1f class=lightbox-link><img alt="Updated BTs" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/updated_business_transactions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4fa3f3c08b174ebe897be4357f8b8e1f><img alt="Updated BTs" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/5-configure-controller/images/updated_business_transactions.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=6-troubleshooting-slow-transactions>6. Troubleshooting Slow Transactions</h1><p>In this exercise you will complete the following tasks:</p><ul><li>Monitor the application dashboard and flow map.</li><li>Troubleshoot a slow transaction snapshot.</li></ul><h2 id=monitor-the-application-dashboard-and-flow-map>Monitor the application dashboard and flow map<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the previous exercises we looked at some of the basic features of the Application Flow Map. Let‚Äôs take a deeper look at how we can use the Application Dashboard and Flow Map to immediately identify issues within the application.</p><ol><li><p>Health Rule Violations, Node Health issues, and the health of the Business Transactions will always show up in this area for the time frame you have selected. You can click the links available here to drill down to the details.</p></li><li><p>The Transaction Scorecard shows you the number and percentage of transactions that are normal, slow, very slow, stalled, and have errors. The scorecard also gives you the high level categories of exception types. You can click the links available here to drill down to the details.</p></li><li><p>Left-click (single-click) on any of the blue lines connecting the different application components to bring up an overview of the interactions between the two components.</p></li><li><p>Left-click (single-click) within the colored ring of a Tier to bring up detailed information about that Tier while remaining on the Flow Map.</p></li><li><p>Hover over the time series on one of the three charts at the bottom of the dashboard (Load, Response Time, Errors) to see the detail of the recorded metrics.</p><p><a href=#R-image-c3c485703b7b38741145fcb394dfbdd9 class=lightbox-link><img alt="Flow Map Components" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/flow-map-components.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c3c485703b7b38741145fcb394dfbdd9><img alt="Flow Map Components" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/flow-map-components.png></a></p></li></ol><p>Now let‚Äôs take look at Dynamics Baselines and options for the charts at the bottom of the dashboard.</p><ol><li><p>Compare the metrics on the charts to the Dynamic Baseline that has been automatically calculated for each of the metrics.</p></li><li><p>The Dynamic Baseline is shown in the load and response time charts as the blue dotted line seen in the following image.</p></li><li><p>Left-click and hold down your mouse button while dragging from left to right to highlight a spike seen in any of the three charts at the bottom of the dashboard.</p></li><li><p>Release your mouse button and select one of the three options in the pop-up menu.</p><p><a href=#R-image-f88f31adcf3e49d457338b9ef42db292 class=lightbox-link><img alt="Flow Map Components" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/flowmap_components2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f88f31adcf3e49d457338b9ef42db292><img alt="Flow Map Components" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/flowmap_components2.png></a></p></li></ol><p>The precision of AppDynamics unique Dynamic Baselining increases over time to provide you with an accurate picture of the state of your applications, their components, and their business transactions, so you can be proactively alerted before things get to a critical state and take action before your end users are impacted.</p><p>You can read more about AppDynamics Dynamic Baselines <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/business-transactions/monitor-the-business-transaction-performance/dynamic-baselines rel=external>here</a>.</p><h2 id=troubleshoot-a-slow-transaction-snapshot>Troubleshoot a slow transaction snapshot<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let‚Äôs look at our business transactions and find the one that has the highest number of very slow transactions by following these steps.</p><ol><li><p>Click the <strong>Business Transactions</strong> option on the left menu.</p></li><li><p>Click the <strong>View Options</strong> button.</p></li><li><p>Check and uncheck the boxes on the options to match what you see in the following image:</p><p><a href=#R-image-ff9de45b54595880d2ee9e1dc021dc7e class=lightbox-link><img alt="BTs Column Config" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/bt-configure-columns.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ff9de45b54595880d2ee9e1dc021dc7e><img alt="BTs Column Config" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/bt-configure-columns.png></a></p></li><li><p>Find the Business Transaction named /Supercar-Trader/car.do and drill into the very slow transaction snapshots by clicking on the number of Very Slow Transactions for the business transaction.</p></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If the /Supercar-Trader/car.do BT does not have any Very Slow Transactions, find a Business Transaction which has some and click in the number under that column. The screenshots may look slightly different moving forward but the concepts remain the same.</p></div></details><pre><code>![Very Slow Transaction](images/very-slow-transaction.png)
</code></pre><ol start=5><li><p>You should see the list of very slow transaction snapshots. Double-click on the snapshot that has the highest response time as seen below.</p><p><a href=#R-image-586d3d55e915ad5db420d936e8089ac2 class=lightbox-link><img alt="snapshot list" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/snapshot.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-586d3d55e915ad5db420d936e8089ac2><img alt="snapshot list" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/snapshot.png></a></p><p>When the transaction snapshot viewer opens, we see the flow map view of all the components that were part of this specific transaction. This snapshot shows the transaction traversed through the components below in order.</p><ul><li>The Web-Portal Tier.</li><li>The Api-Services Tier.</li><li>The Enquiry-Services Tier.</li><li>The MySQL Database.</li></ul><p>The Potential Issues panel on the left highlights slow methods and slow remote services. While we can use the Potential Issues panel to drill straight into the call graph, we will use the Flow Map within the snapshot to follow the complete transaction in this example.</p></li><li><p>Click on Drill Down on the Web-Portal Tier shown on the Flow Map of the snapshot.</p><p><a href=#R-image-c5a277551074fc0392e208822669cd24 class=lightbox-link><img alt="Web Portal Drilldown" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/webportal-drilldown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c5a277551074fc0392e208822669cd24><img alt="Web Portal Drilldown" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/webportal-drilldown.png></a></p><p>The tab that opens shows the call graph of the Web-Portal Tier. We can see that most of the time was from an outbound HTTP call.</p></li><li><p>Click on the block to drill down to the segment where the issue happening. Click the HTTP link to the details of the downstream call.</p><p><a href=#R-image-4a6a11958ef69a60397ecc869d6bd8e8 class=lightbox-link><img alt="Call Graph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/callgraph.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4a6a11958ef69a60397ecc869d6bd8e8><img alt="Call Graph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/callgraph.png></a></p><p>The detail panel for the downstream call shows that the Web-Portal Tier made an outbound HTTP call to the Api-Services Tier. Follow the HTTP call into the Api-Services Tier.</p></li><li><p>Click Drill Down into Downstream Call.</p><p><a href=#R-image-9f0c4eeb09d1a1dda7ac93f8b9b1facf class=lightbox-link><img alt="Call Graph Downstream" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/callgraph_downstream.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f0c4eeb09d1a1dda7ac93f8b9b1facf><img alt="Call Graph Downstream" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/callgraph_downstream.png></a></p><p>The next tab that opens shows the call graph of the Api-Services Tier. We can see that 100% of the time was due to an outbound HTTP call.</p></li><li><p>Click the HTTP link to open the detail panel for the downstream call.</p><p><a href=#R-image-60cac832537011dbba456efcdfdd0fe8 class=lightbox-link><img alt="Downstream Call Graph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/downstream_callgraph.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-60cac832537011dbba456efcdfdd0fe8><img alt="Downstream Call Graph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/downstream_callgraph.png></a></p><p>The detail panel for the downstream call shows that the Api-Services Tier made an outbound HTTP call to the Enquiry-Services Tier. Follow the HTTP call into the Enquiry-Services Tier.</p></li><li><p>Click Drill Down into Downstream Call.</p><p><a href=#R-image-eb05f972c516afa0c71d10de27b7b5af class=lightbox-link><img alt="API service downstream" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/apiservices-downstream.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eb05f972c516afa0c71d10de27b7b5af><img alt="API service downstream" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/apiservices-downstream.png></a></p><p>The next tab that opens shows the call graph of the Enquiry-Services Tier. We can see that there were JDBC calls to the database that caused issues with the transaction.</p></li><li><p>Click the JDBC link with the largest time to open the detail panel for the JDBC calls.</p><p><a href=#R-image-5943d1a84054912bf28976f0ab9b6644 class=lightbox-link><img alt="JDBC Callgraph" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/jdbc-callgraph.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5943d1a84054912bf28976f0ab9b6644><img alt="JDBC Callgraph" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/jdbc-callgraph.png></a></p><p>The detail panel for the JDBC exit calls shows the specific query that took most of the time. We can see the full SQL statement along with the SQL parameter values.</p><p><a href=#R-image-ec30cb4652e401a84bfbd8b9cf0bd2dc class=lightbox-link><img alt="DB Call Details" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/db-query-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec30cb4652e401a84bfbd8b9cf0bd2dc><img alt="DB Call Details" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/6-apm-part1/images/db-query-details.png></a></p></li></ol><h2 id=summary>Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this lab, we first used Business Transactions to identify a very slow transaction that required troubleshooting. We then examined the call graph to pinpoint the specific part of the code causing delays. Following that, we drilled down into downstream services and the database to further analyze the root cause of the slowness. Finally, we successfully identified the exact inefficient SQL query responsible for the performance issue. This comprehensive approach demonstrates how AppDynamics helps in isolating and resolving transaction bottlenecks effectively.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=7-troubleshooting-errors--exceptions>7. Troubleshooting Errors & Exceptions</h1><p>In this exercise, you will learn how to effectively detect and diagnose errors within your application to identify their root causes. Additionally, you will explore how to pinpoint specific nodes that may be underperforming or experiencing errors, and apply troubleshooting techniques to resolve these performance issues. This hands-on experience will enhance your ability to maintain application health and ensure optimal performance.</p><h2 id=find-specific-errors-within-your-application>Find Specific Errors Within Your Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>AppDynamics makes it easy to find errors and exceptions within your application. You can use the <strong>Errors</strong> dashboard to see transactions snapshots with errors and find the exceptions that are occurring most often. Identifying errors quickly helps prioritize fixes that improve application stability and user experience. Understanding the types and frequency of exceptions allows you to focus on the most impactful issues.</p><ol><li><p>Click on the <strong>Troubleshoot</strong> option on the left menu.</p></li><li><p>Click on the <strong>Errors</strong> option on the left menu. This navigates you to the Errors dashboard where you can quickly identify business transactions with errors</p></li><li><p>Explore a few of the error transaction snapshots. Reviewing snapshots helps you see the exact context and flow when errors occurred.</p></li><li><p>Click on the <strong>Exceptions</strong> tab to see exceptions grouped by type. Grouping by exception type helps identify recurring problems and patterns.</p><p><a href=#R-image-2f9014bdf3cb72cf3665361870bb1758 class=lightbox-link><img alt="Errors Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/errors-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f9014bdf3cb72cf3665361870bb1758><img alt="Errors Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/errors-dashboard.png></a></p><p>The <strong>Exceptions</strong> tab shows you what types of exceptions are occurring the most within the application so you can prioritize remediating the ones having the most impact.</p></li><li><p>Observe the <strong>Exceptions per minute</strong> and <strong>Exception count</strong> (6) to understand error frequency. High frequency exceptions often indicate critical issues needing immediate attention.</p></li><li><p>Note the <strong>Tier</strong> where exceptions occur to localize the problem within your application architecture. Knowing the affected tier helps narrow down the root cause.</p></li><li><p>Double-click on the MySQLIntegrityConstraintViolationException type to drill deeper.</p><p><a href=#R-image-2608b46649524d37f1881326cc0b4ad1 class=lightbox-link><img alt="Exception Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/exception-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2608b46649524d37f1881326cc0b4ad1><img alt="Exception Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/exception-dashboard.png></a></p></li><li><p>Review the overview dashboard showing snapshots that experienced this exception type.</p></li><li><p>The tab labeled <strong>Stack Traces for this Exception</strong> shows you an aggregated list of the unique stack traces generated by this exception type. Stack traces provide the exact code paths causing the error, essential for debugging.</p></li><li><p>Double-click a snapshot to open it and see the error in context.
This shows the transaction flow and pinpoints where the error happened.</p><p><a href=#R-image-3b08a18f0227f155c042e45b73d9994c class=lightbox-link><img alt="MySQL Exception" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/MySQL-exception.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3b08a18f0227f155c042e45b73d9994c><img alt="MySQL Exception" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/MySQL-exception.png></a></p><p>When you open an error snapshot from the exceptions screen, the snapshot opens to the specific segment within the snapshot where the error occurred.</p></li><li><p>Notice exit calls in red text indicating errors or exceptions.</p></li><li><p>Drill into the exit call to view detailed error information.</p></li><li><p>Click <strong>Error Details</strong> to see the full stack trace. Full stack traces are critical for developers to trace and fix bugs.</p></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you want to learn more about error handling and exceptions, refer to the official AppDynamics documentation in the following link: <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/troubleshooting-applications/errors-and-exceptions rel=external>here</a>.</p></div></details><p><a href=#R-image-89396fb24a913b11f72f9838dfaa0c7d class=lightbox-link><img alt="Call Graph Error" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/callgraph-error.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-89396fb24a913b11f72f9838dfaa0c7d><img alt="Call Graph Error" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/callgraph-error.png></a></p><h2 id=troubleshoot-node-issues>Troubleshoot Node Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Node health directly impacts application performance and availability. Early detection of node issues prevents outages and ensures smooth operation. AppDynamics provides visual indicators throughout the UI, making it easy to quickly identify issues.</p><p>You can see indicators of Node issues in three areas on the Application Dashboard.</p><ol><li><p>Observe the <strong>Application Dashboard</strong> for visual indicators of node problems. Color changes and icons provide immediate alerts to issues</p></li><li><p>The <strong>Events</strong> panel shows Health Rule Violations, including those related to Node Health.</p></li><li><p>The <strong>Node Health</strong> panel tells you how many critical or warning issues are occurring for Nodes. Click on the Node Health link in the <strong>Node Health</strong> panel to drill into the <strong>Tiers & Nodes dashboard</strong>.</p><p><a href=#R-image-110b2dc7a92e5abe7b113a970df7fd5a class=lightbox-link><img alt="Application Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/application-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-110b2dc7a92e5abe7b113a970df7fd5a><img alt="Application Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/application-dashboard.png></a></p></li><li><p>Alternatevely, you can click <strong>Tiers & Nodes</strong> on the left menu to reach the <strong>Tiers & Nodes dashboard</strong></p></li><li><p>Switch to Grid View for an organized list of nodes. Grid view makes it easier to scan and find nodes with warnings.</p></li><li><p>Click on the warning icon for the Insurance-Services_Node-01 Node.</p><p><a href=#R-image-a8112b8184bf9f5e7568ea3fcf358fab class=lightbox-link><img alt="Tiers and Nodes List" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/tiers-nodes-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a8112b8184bf9f5e7568ea3fcf358fab><img alt="Tiers and Nodes List" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/tiers-nodes-list.png></a></p></li><li><p>Review the Health Rule Violations summary and click on violation descriptions.</p></li><li><p>Click on the <strong>Details</strong> button to see the details.</p><p><a href=#R-image-1805a14452cd79a84f6e43c8732167fc class=lightbox-link><img alt="Health Rule Violation" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/health-rule-violations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1805a14452cd79a84f6e43c8732167fc><img alt="Health Rule Violation" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/health-rule-violations.png></a></p><p>The <strong>Health Rule Violation</strong> details viewer shows you:</p></li><li><p>The current state of the violation.</p></li><li><p>The timeline of when the violation was occurring.</p></li><li><p>The specifics of what the violation is and the conditions that triggered it.</p></li><li><p>Click on the <strong>View Dashboard During Health Rule Violation</strong> to see node metrics at the time of the issue. Correlating violations with performance metrics aids diagnosis.</p><p><a href=#R-image-cb81bb22feb4b2bd1e1ad6b5ff03f171 class=lightbox-link><img alt="Health Rule Violation Details" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/health-rule-violation-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb81bb22feb4b2bd1e1ad6b5ff03f171><img alt="Health Rule Violation Details" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/health-rule-violation-details.png></a></p><p>When you click on the <strong>View Dashboard During Health Rule Violation</strong> button, it opens the <strong>Server</strong> tab of the Node dashboard by default.</p><p>If you haven‚Äôt installed the AppDynamics Server Visibility Monitoring agent yet then you won‚Äôt see the resource metrics for the host of the Node. You will be able to see those metrics in the next lab. The AppDynamics Java agent collects memory metrics from the JVM via JMX.</p><p>Investigate the JVM heap data using the steps below.</p></li><li><p>Click on the <strong>Memory</strong> tab.</p></li><li><p>Look at the current heap utilization.</p></li><li><p>Notice the Major Garbage Collections that have been occurring.</p></li></ol><p>Note: If you have an issue seeing the Memory screen, try using an alternate browser (Firefox should render correctly for Windows, Linux, and Mac).</p><pre><code>![Memory Dashboard](images/memory-dashboard.png)  
</code></pre><ol start=16><li>Use the outer scroll bar to scroll to the bottom of the screen.</li><li>Note high <strong>PS Old Gen</strong> memory usage as a potential sign of memory leaks or inefficient garbage collection. Identifying memory pressure early can prevent outages.</li></ol><p>You can read more about Node and JVM monitoring <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/tiers-and-nodes/troubleshoot-node-problems rel=external>here</a> and <a href=https://help.splunk.com/en/appdynamics-saas/application-performance-monitoring/25.7.0/tiers-and-nodes/monitor-jvms rel=external>here</a>.</p><p><a href=#R-image-bf9c773fb32836876f420d958868820c class=lightbox-link><img alt="PS Old Gen" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/ps-old-gen.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bf9c773fb32836876f420d958868820c><img alt="PS Old Gen" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/1-application-performance-monitoring/7-apm-part2/images/ps-old-gen.png></a></p><h2 id=summary>Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this lab, you learned how to effectively use AppDynamics to identify and troubleshoot application errors and node health issues. You started by locating specific errors and exceptions using the Errors dashboard, understanding their frequency, types, and impact on your application. You drilled down into error snapshots and stack traces to pinpoint the root cause of failures.</p><p>Next, you explored node health monitoring by interpreting visual indicators on the Application Dashboard and investigating Health Rule Violations. You learned to analyze JVM memory metrics to detect potential performance bottlenecks related to garbage collection and heap usage.</p><p>Together, these skills enable proactive monitoring and rapid troubleshooting to maintain application performance and reliability.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=server-visibility-monitoring>Server Visibility Monitoring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Prerequsites</summary><div class=box-content><p>This is a continuation of the Application Performance Monitoring lab. Verify that your application is running and has load for the past hour. If needed return to the Generate Application Load section to restart the load generator.</p></div></details><h2 id=objectives>Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this Lab you will learn about AppDynamics Server Visibility Monitoring and Service Availability Monitoring.</p><p>When you have completed this lab, you will be able to:</p><ul><li>Download the AppDynamics Server Visibility Agent.</li><li>Install the AppDynamics Server Visibility Agent.</li><li>Monitor server health.</li><li>Understand the agent‚Äôs extended hardware metrics.</li><li>Quickly see underlying infrastructure issues impacting your application performance.</li></ul><h2 id=workshop-environment>Workshop Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The lab environment has two hosts:</p><ul><li>The first host runs the AppDynamics Controller and will be referred to from this point on as the Controller.</li><li>The second host runs the Supercar Trader application used in the labs. It will be the host where you will install the AppDynamics agents and will be referred to from this point on as the Application VM.</li></ul><h2 id=controller>Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will be using the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> for this workshop.</p><p><a href=#R-image-08c0800eaf55755c4d49d3b1e9e1fb74 class=lightbox-link><img alt=Controller class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-08c0800eaf55755c4d49d3b1e9e1fb74><img alt=Controller class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/images/controller-vm.png></a></p><h2 id=application-vm>Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Supercar Trader is a Java-based Web Application</p><p>The purpose of Supercar-Trader collection is to generate dynamic traffic (business transactions) for AppDynamics Controller.</p><p><a href=#R-image-e9c5e5e4f3825b0bd4e2aa01d9fc9f5a class=lightbox-link><img alt="Application VM" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/images/application-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e9c5e5e4f3825b0bd4e2aa01d9fc9f5a><img alt="Application VM" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/images/application-vm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Server Visibility Monitoring</h1><article class=default><header class=headline></header><h1 id=deploy-machine-agent>Deploy Machine Agent</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>In this exercise you will perform the following actions:</p><ol><li>Run a script that will install the Machine agent</li><li>Configure the Machine agent</li><li>Start the Machine agent</li></ol><details open class="box cstyle notices orange"><summary class=box-label tabindex=-1>Note</summary><div class=box-content><p>We will use a script to download the machine agent into your EC2 instance. Normally, you would have to download the machine agent by logging into <a href=https://accounts.appdynamics.com/ rel=external>https://accounts.appdynamics.com/</a> but due to potential access limitations we will use the script which downloads it directly from the portal. If you have access to the AppDynamics portal and would like to download the machine agent, you can follow the below steps to download it and reference the steps used in the Install Agent section of the APM lab to SCP it into your VM.</p><ol><li>Log into the <a href=https://accounts.appdynamics.com/ rel=external>AppDynamics Portal</a></li><li>On the left side menu click on <strong>Downloads</strong></li><li>Under <strong>Type</strong> select <strong>Machine Agent</strong></li><li>Under <strong>Operating System</strong> Select <strong>Linux</strong></li><li>Find the <strong>Machine Agent Bundle - 64-bit linux (zip)</strong> and click on the <strong>Download</strong> button.</li><li>Follow the steps in the Install Agent section to SCP the downloaded file into your EC2 instance.</li><li>Unbundle the zip file into the /opt/appdynamics/machineagent directory and proceed to the configuration section of this lab</li></ol></div></details><h2 id=run-the-install-script>Run the Install Script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the command below to change to the directrory where the script is located. The script will downlaod and unbundle the machine agent</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/machineagent/</span></span></code></pre></div><p>Use the command below to run the install script.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x install_machineagent.sh
</span></span><span class=line><span class=cl>./install_machineagent.sh</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-6736c4171419b1e4d083e412e29a8e14 class=lightbox-link><img alt="Install Output" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/install-script-output.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6736c4171419b1e4d083e412e29a8e14><img alt="Install Output" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/install-script-output.png></a></p><h2 id=configure-the-server-agent>Configure the Server Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Obtain the configuration property values listed below from the Java Agents ‚Äúcontroller-info.xml‚Äù and have them available for the next step.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /opt/appdynamics/javaagent/conf/controller-info.xml</span></span></code></pre></div><ul><li>controller-host</li><li>controller-port</li><li>controller-ssl-enabled</li><li>account-name</li><li>account-access-key</li></ul><p>Edit the ‚Äúcontroller-info.xml‚Äù file of the machine Agent and insert the values for the properties you obtained from the Java Agent configuration file, listed below.</p><ul><li>controller-host</li><li>controller-port</li><li>controller-ssl-enabled</li><li>account-name</li><li>account-access-key</li></ul><p>You will need to set the ‚Äúsim-enabled‚Äù property to true and then save the file which should look similar to the image below.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/machineagent/conf
</span></span><span class=line><span class=cl>nano controller-info.xml</span></span></code></pre></div><p><a href=#R-image-77fb5e97fa85c77c397f8044f5692255 class=lightbox-link><img alt="Example Config" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/controller-example.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-77fb5e97fa85c77c397f8044f5692255><img alt="Example Config" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/controller-example.png></a></p><h2 id=start-the-server-visibility-agent>Start the Server Visibility agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following commands to start the Server Visibility agent and verify that it started.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/machineagent/bin
</span></span><span class=line><span class=cl>nohup ./machine-agent <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>ps -ef <span class=p>|</span> grep machine</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-52edb1f5b338eac6ecec552277fe1d8f class=lightbox-link><img alt="Example Output" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/run-machine-agent.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-52edb1f5b338eac6ecec552277fe1d8f><img alt="Example Output" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/3-deploy-server-agent/images/run-machine-agent.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-server-health>Monitor Server Health</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Review the Server Main dashboard</li><li>Review the Server Processes dashboard</li><li>Review the Server Volumes dashboard</li><li>Review the Server Network dashboard</li><li>Navigate between Server and Application contexts</li></ul><h2 id=review-the-server-main-dashboard>Review the Server Main Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you have the Machine agent installed, let‚Äôs take a look at some of the features available in the Server Visibility module. From your <strong>Application Dashboard</strong>, click on the <strong>Servers</strong> tab and drill into the servers main dashboard by following these steps.</p><ol><li>Click the <strong>Servers</strong> tab on the left menu.</li><li>Check the <strong>checkbox</strong> on the left for your server.</li><li>Click <strong>View Details</strong>.</li></ol><p><a href=#R-image-423da1e295a98bf04487b30c0d216a9b class=lightbox-link><img alt="Server Dashboard" class="lazy lightbox figure-image" loading=lazy src=images/svm-viewDetails.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-423da1e295a98bf04487b30c0d216a9b><img alt="Server Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=images/svm-viewDetails.png></a></p><p>You can now explore the server dashboard. This dashboard enables you to perform the following tasks:</p><p>See charts of key performance metrics for the selected monitored servers, including:</p><ul><li>Server availability</li><li>CPU, memory, and network usage percentages</li><li>Server properties</li><li>Disk, partition, and volume metrics</li><li>Top 10 processes consuming CPU resources and memory.</li></ul><p>You can read more about the Server Main dashboard <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/server-visibility/monitor-your-servers-using-server-visibility/server-dashboard rel=external>here</a>.</p><p>Review the <strong>Top Pane</strong> of the dashboard which provides you the following information:</p><ul><li>Host Id: This is an ID for the server that is unique to the Splunk AppDynamics Controller</li><li>Health: Shows the overall health of the server.</li><li>Hierachy: Arbitrary hierarchy to group your severs together. See documentation for additional details <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/machine-agent/configure-the-machine-agent/machine-agent-configuration-properties rel=external>here</a></li></ul><ol><li>Click on the health server icon to view the <strong>Violations * Anomalies</strong> panel. Review the panel to identify potential issues</li><li>Click on the <strong>Current Health Rule Evaluation Status</strong> to see if there are any current issues being alerted on for this server</li></ol><p><a href=#R-image-3f56eb4a4eb360b00a3c2426a69a385b class=lightbox-link><img alt="Server Health" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-health.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3f56eb4a4eb360b00a3c2426a69a385b><img alt="Server Health" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-health.png></a>
<a href=#R-image-3a96ff5e1f81833fdaf1f1c6017d3f79 class=lightbox-link><img alt="Server violations" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-health-violations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3a96ff5e1f81833fdaf1f1c6017d3f79><img alt="Server violations" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-health-violations.png></a></p><ol start=3><li>Click on the <strong>CPU Usage too high</strong> rule</li><li>Click on <strong>Edit Health Rule</strong>. This will open the <strong>Edit Health Rule</strong> panel</li></ol><p><a href=#R-image-b8e2cc3513f88d3bdba9eb92b9015332 class=lightbox-link><img alt="Edit Health Rule" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-edit-hr.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b8e2cc3513f88d3bdba9eb92b9015332><img alt="Edit Health Rule" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-edit-hr.png></a></p><p>This panel gives us the ability to configure the Health Rule. A different lab will go into more details on creating and customizing health rules. For now we will just review the existing rule</p><ol start=5><li>Click on the <strong>Warning Criteria</strong></li></ol><p><a href=#R-image-9f1414cbda836143ffb7536b055e817b class=lightbox-link><img alt="Edit Health Rule - Warning" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-warning.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f1414cbda836143ffb7536b055e817b><img alt="Edit Health Rule - Warning" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-warning.png></a></p><p>In this example we can see that the warning criteria is set when the CPU is above 5%. This is the reason why our health rule is showing a warning and not a healthy state. Cancel out of the <strong>Edit Health Rule</strong> panel to get back to the <strong>Server Dashboard</strong></p><h2 id=review-the-server-processes-dashboard>Review the Server Processes Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Click the <strong>Processes</strong> tab.</li><li>Click <strong>View Options</strong> to select different data columns. Review the KPIs available to view</li></ol><p>You can now explore the server processes dashboard. This dashboard enables you to perform the following tasks:</p><ul><li>View all the processes active during the selected time period. The processes are grouped by class as specified in the ServerMonitoring.yml file.</li><li>View the full command line that started this process by hovering over the process entry in the Command Line column.</li><li>Expand a process class to see the processes associated with that class.</li><li>Use View Options to configure which columns to display in the chart.</li><li>Change the time period of the metrics displayed.</li><li>Sort the chart using the columns as a sorting key. You can not sort on sparkline charts: CPU Trend and Memory Trend.</li><li>See CPU and Memory usage trends at a glance.</li></ul><p>You can read more about the Server Processes dashboard <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/server-visibility/monitor-your-servers-using-server-visibility/server-process-metrics rel=external>here</a>.</p><p><a href=#R-image-0139d76267a9f54c698c69344f6378f8 class=lightbox-link><img alt="Dashboard Processes" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-process-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0139d76267a9f54c698c69344f6378f8><img alt="Dashboard Processes" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-process-dashboard.png></a></p><h2 id=review-the-server-volumes-dashboard>Review the Server Volumes Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Click the <strong>Volumes</strong> tab.</li></ol><p>You can now explore the server volumes dashboard. This dashboard enables you to perform the following tasks:</p><ul><li>See the list of volumes, the percentage used and total storage space available on the disk, partition or volume.</li><li>See disk usage and I/O utilization, rate, operations per second, and wait time.</li><li>Change the time period of the metrics collected and displayed.</li><li>Click on any point on a chart to see the metric value for that time.</li></ul><p>You can read more about the Server Volumes dashboard <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/server-visibility/monitor-your-servers-using-server-visibility/server-volumes-metrics rel=external>here</a>.</p><p><a href=#R-image-3b6522dd0713530af429748cc2e6ed75 class=lightbox-link><img alt="Dashboard Example" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-volumes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3b6522dd0713530af429748cc2e6ed75><img alt="Dashboard Example" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-volumes.png></a></p><h2 id=review-the-server-network-dashboard>Review the Server Network Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Click the Network tab.</li></ol><p>You can now explore the <strong>Server Network</strong> dashboard. This dashboard enables you to perform the following tasks:</p><ul><li>See the MAC, IPv4, and IPv6 address for each network interface.</li><li>See whether or not the network interface is enabled, functional, its operational state equipped with an ethernet cable that is plugged in, operating in full or half-full duplex mode, maximum transmission unit (MTU) or size (in bytes) of the largest protocol data unit that the network interface can pass, speed of the ethernet connection in Mbit/sec.</li><li>View network throughput in kilobytes/sec and packet traffic.</li><li>Change the time period of the metrics displayed.</li><li>Hover over on any point on a chart to see the metric value for that time.</li></ul><p>You can read more about the Server Network dashboard <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/server-visibility/monitor-your-servers-using-server-visibility/server-network-metrics rel=external>here</a>.</p><p><a href=#R-image-b04f58e4aa97a3d0609adee0690c5bb8 class=lightbox-link><img alt="Network Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-network.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b04f58e4aa97a3d0609adee0690c5bb8><img alt="Network Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/4-monitor-server-health/images/server-network.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=correlate-between-server-and-apm>Correlate Between Server and APM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<h2 id=navigate-between-server-and-application-contexts>Navigate between Server and Application Contexts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Server Visibility Monitoring agent automatically associates itself with any Splunk AppDynamics APM agents running on the same host.</p><p>With Server Visibility enabled, you can access server performance metrics in the context of your applications. You can switch between server and application contexts in different ways. Follow these steps to navigate from the server main dashboard to one of the Nodes running on the server.</p><ol><li>Click the <strong>Dashboard</strong> tab to return to the main Server Dashboard.</li><li>Click the <strong>APM Correlation</strong> link.</li></ol><p><a href=#R-image-d2a8e546699c379332c6e4dd80fdb8f0 class=lightbox-link><img alt="Server to APM" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-apm-link.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d2a8e546699c379332c6e4dd80fdb8f0><img alt="Server to APM" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-apm-link.png></a></p><ol start=2><li>Click the down arrow on one of the listed Tiers.</li><li>Click the Node of the Tier link.</li></ol><p><a href=#R-image-4e2128f2a5d9f1d0ef7020e7ab916212 class=lightbox-link><img alt="Dashboard Example" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-tier-link.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4e2128f2a5d9f1d0ef7020e7ab916212><img alt="Dashboard Example" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-tier-link.png></a></p><p>You are now on the <strong>Node Dashboard</strong>.</p><ol start=4><li>Click the <strong>Server</strong> tab to see the related host metrics</li></ol><p><a href=#R-image-6d2954bec6070f3d56d5c0651819fc39 class=lightbox-link><img alt="Dashboard Example" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-node-server.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d2954bec6070f3d56d5c0651819fc39><img alt="Dashboard Example" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/2-server-visibility-monitoring/5-apm-to-server/images/server-node-server.png></a></p><p>When you have the Server Visibility Monitoring agent installed, the host metrics are always available within the context of the related Node.</p><p>You can read more about navigating between Server and Application Contexts <a href=https://help.splunk.com/en/appdynamics-saas/infrastructure-visibility/25.7.0/server-visibility/monitor-your-servers-using-server-visibility/navigating-between-server-and-application-contexts rel=external>here</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=business-iq>Business iQ</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=objectives>Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this Learning Lab you learn about AppDynamics Business iQ.</p><p>When you have completed this lab, you will be able to:</p><ul><li>Enable analytics with the new Agentless Analytics Java Agent (v 4.5.15 +).</li><li>Configure HTTP data collectors.</li><li>Configure method invocation data collectors.</li><li>Understand dashboard components.</li><li>Build a business dashboard.</li></ul><h2 id=workshop-environment>Workshop Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The lab environment has two hosts:</p><ul><li>The first host runs the AppDynamics Controller and will be referred to from this point on as the Controller.</li><li>The second host runs the Supercar Trader application used in the labs. It will be the host where you will install the AppDynamics agents and will be referred to from this point on as the Application VM.</li></ul><h4 id=controller-vm>Controller VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><a href=#R-image-f8e8f0c3ef9aaea173c8f3d9edd05c9f class=lightbox-link><img alt=image class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f8e8f0c3ef9aaea173c8f3d9edd05c9f><img alt=image class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/images/controller-vm.png></a></p><h4 id=application-vm>Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><a href=#R-image-5c595670e42f40053ceaa49526761e65 class=lightbox-link><img alt=image class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/images/application-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c595670e42f40053ceaa49526761e65><img alt=image class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/images/application-vm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Business iQ</h1><article class=default><header class=headline></header><h1 id=lab-prerequisite>Lab Prerequisite</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Access your AppDynamics Controller from your web browser.</li><li>Verify transaction load to the application.</li><li>Restart the application and transaction load if needed.</li></ul><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=verify-transaction-load-to-the-application>Verify transaction load to the application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Check the application flow map:</p><ol><li>Select the <strong>last 1 hour</strong> time frame.</li><li>Verify you see the five different Tiers on the flow map.</li><li>Verify there has been consistent load over the last 1 hour.</li></ol><p><a href=#R-image-8dc18b6bc913b339021cca8ad1bcd580 class=lightbox-link><img alt="Verify Load 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereque-appload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8dc18b6bc913b339021cca8ad1bcd580><img alt="Verify Load 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereque-appload.png></a></p><p>Check the list of business transactions:</p><ol start=4><li>Click the <strong>Business Transactions</strong> option on the left menu.</li><li>Verify you see the eleven business transactions seen below.</li><li>Verify that they have some number of calls during the last hour.</li></ol><p><strong>Note:</strong> If you don‚Äôt see the <strong>Calls</strong> column, you can click the <strong>View Options</strong> toolbar button to show that column.</p><p><a href=#R-image-da02c42db4fa65f0b07bd6112e359188 class=lightbox-link><img alt="Verify Business transactions" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereq-bts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-da02c42db4fa65f0b07bd6112e359188><img alt="Verify Business transactions" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereq-bts.png></a></p><p>Check the agent status for the Nodes:</p><ol start=7><li>Click the <strong>Tiers & Nodes</strong> option on the left menu.</li><li>Click <strong>Grid View</strong>.</li><li>Verify that the <strong>App Agent Status</strong> for each Node is greater than 90% during the last hour.</li></ol><p><a href=#R-image-b23f249b925e8c49d4c44a4e5d97394d class=lightbox-link><img alt="Verify Agents" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereq-tiersnodes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b23f249b925e8c49d4c44a4e5d97394d><img alt="Verify Agents" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/01-prereq-tiersnodes.png></a></p><h2 id=restart-the-application-and-load-generation-if-needed>Restart the Application and Load Generation if Needed<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If any of the checks you performed in the previous steps could not be verified, SSH into your <strong>Application VM</strong> and follow these steps to restart the application and transaction load.</p><p>Use the following commands to stop the running instance of Apache Tomcat.<div class=tab-panel data-tab-group=R-tabs-4279fe66da1c591dd51ea91f6dc68756><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-56fc4b40f06d1a1b9cd7ea7378b03677 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4279fe66da1c591dd51ea91f6dc68756","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-56fc4b40f06d1a1b9cd7ea7378b03677 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./shutdown.sh</span></span></code></pre></div></div></div></div></div></p><p>Use the command below to check for remaining application JVMs still running.</p><div class=tab-panel data-tab-group=R-tabs-fb93284e1d9db96cdcd859b858647591><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-05bedc3e0060009a4b072c0fc6e79ff4 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-fb93284e1d9db96cdcd859b858647591","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-05bedc3e0060009a4b072c0fc6e79ff4 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -ef <span class=p>|</span> grep Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>If you find any remaining application JVMs still running, kill the remaining JVMs using the command below.</p><div class=tab-panel data-tab-group=R-tabs-7124cb06df3e01a3631304137080ea02><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4053802d89ec2cb8be8d2777f365c0fc aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7124cb06df3e01a3631304137080ea02","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-4053802d89ec2cb8be8d2777f365c0fc data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pkill -f Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>Use the following commands to stop the load generation for the application. Wait until all processes are stopped.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./stop_load.sh</span></span></code></pre></div><p>Restart the Tomcat server:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./startup.sh</span></span></code></pre></div><p>Wait for two minutes and use the following command to ensure Apache Tomcat is running on port 8080.</p><div class=tab-panel data-tab-group=R-tabs-8622c846388d34c530625b87cbea689e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3478918b2be98219ef22a99e8a5b44ed aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-8622c846388d34c530625b87cbea689e","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-617159ca010b68f3e40f1d5ec46b6b0e aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-8622c846388d34c530625b87cbea689e","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-3478918b2be98219ef22a99e8a5b44ed data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:8080</span></span></code></pre></div></div></div><div id=R-tab-id-617159ca010b68f3e40f1d5ec46b6b0e data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;!DOCTYPE html&gt;
</span></span><span class=line><span class=cl>&lt;html <span class=nv>lang</span><span class=o>=</span><span class=s2>&#34;en&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;head&gt;
</span></span><span class=line><span class=cl>        &lt;meta <span class=nv>charset</span><span class=o>=</span><span class=s2>&#34;UTF-8&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;title&gt;Apache Tomcat/9.0.50&lt;/title&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;favicon.ico&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;icon&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;image/x-icon&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;tomcat.css&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;stylesheet&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;text/css&#34;</span> /&gt;
</span></span><span class=line><span class=cl>    &lt;/head&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;body&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;wrapper&#34;</span>
</span></span><span class=line><span class=cl>....</span></span></code></pre></div></div></div></div></div><p>Use the following commands to start the load generation for the application.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./start_load.sh</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-286ad812d775a23920afb0e6af08be64 class=lightbox-link><img alt="Restart App 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/restart-app-and-load-03.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-286ad812d775a23920afb0e6af08be64><img alt="Restart App 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/1-lab-prerequisites/images/restart-app-and-load-03.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=enable-analytics-on-the-application>Enable Analytics on the Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>Analytics formerly required a separate agent that was bundled with Machine Agent. However, Analytics is now agentless and embedded in the APM Agent for both .NET Agent >= 20.10 and Java Agent >= 4.5.15 on Controllers >= 4.5.16</p><p>In this exercise you will access your AppDynamics Controller from your web browser and enable the Agentless Analytics from there.</p><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=navigate-to-the-analytics-configuration>Navigate to the Analytics Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>** Select the <strong>Analytics</strong> tab at the top left of the screen.</li><li>** Select the <strong>Configuration</strong> Left tab.</li><li>** Select the <strong>Transaction Analytics - Configuration</strong> tab.</li><li>** <strong>Mark the Checkbox</strong> next to Your Application <strong>Supercat-Trader-YOURINITIALS</strong></li><li>** Click the <strong>Save</strong> button</li></ol><p><a href=#R-image-6f9f9e3f29da7a72de7d05dfa3831654 class=lightbox-link><img alt="Enable Analytics" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/2-enable-analytics/images/05-biq-transaction-analytics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6f9f9e3f29da7a72de7d05dfa3831654><img alt="Enable Analytics" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/2-enable-analytics/images/05-biq-transaction-analytics.png></a></p><h2 id=validate-transaction-summary>Validate Transaction Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You want to verify that Analytics is working for that application and showing transactions.</p><ol><li>Select the <strong>Analytics tab</strong> tab on the left menu.</li><li>Select the <strong>Home</strong> tab.</li><li>Under <strong>Transactions from</strong> filter to your application <strong>Supercar-Trader-YOURINITIALS</strong></li></ol><p><a href=#R-image-dbb82d3dda561dc19f2fc16b36dfd818 class=lightbox-link><img alt="Validate Analytics" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/2-enable-analytics/images/05-biq-transaction-analytics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dbb82d3dda561dc19f2fc16b36dfd818><img alt="Validate Analytics" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/2-enable-analytics/images/05-biq-transaction-analytics.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-http-data-collectors>Configure HTTP Data Collectors</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>Data collectors enable you to supplement business transaction and transaction analytics data with application data. The application data can add context to business transaction performance issues. For example, they show the values of particular parameters or return value for business transactions affected by performance issues, such as the specific user, order, or product.</p><p>HTTP data collectors capture the URLs, parameter values, headers, and cookies of HTTP messages that are exchanged in a business transaction.</p><p>In this exercise you will perform the following tasks:</p><ul><li>Enable all HTTP data collectors.</li><li>Observe and Select relevant HTTP data collectors.</li><li>Capture Business Data in Analytics using HTTP Params.</li><li>Validate Analytics on HTTP Parameters.</li></ul><h2 id=enable-all-http-data-collectors>Enable all HTTP data collectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Initially, you can capture all HTTP data collectors to learn which useful parameters you can capture into Analytics and use it in your Dashboards</p><details open class="box cstyle notices orange"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>It is strongly recommended that you perform this step on a UAT environment, not production.</p></div></details><ol><li>Select the <strong>Applications</strong> tab at the top left of the screen.</li><li>Select the <strong>Supercar-Trader-YOURINITIALS</strong> Application.</li><li>Select the <strong>Configuration</strong> Left tab.</li><li>Click on the <strong>Instrumentation</strong> Link.</li><li>Select the <strong>Data Collectors</strong> tab.</li><li>Click on the <strong>Add</strong> Button in the <strong>HTTP Request Data Collectors</strong></li></ol><p><a href=#R-image-ec8765d66fc5b9c3436118a3cb44dd41 class=lightbox-link><img alt="HTTPDataCollectors 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-datacollectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec8765d66fc5b9c3436118a3cb44dd41><img alt="HTTPDataCollectors 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-datacollectors.png></a></p><p>You will now configure an HTTP data collector to capture all HTTP Parameters. You will only enable it on Transaction Snapshots to avoid any overheads until you identify the precise parameters that you need for Transaction Analytics</p><ol><li>For the <strong>Name</strong>, specify <strong>All HTTP Param</strong>.</li><li>Under <strong>Enable Data Collector for</strong> check the box for <strong>Transaction Snapshots</strong>.</li><li><strong>Do not</strong> enable Transaction Analytics.</li><li>Click on <strong>+ Add</strong> in the HTTP Parameters section.</li><li>For the new Parameter, specify <strong>All</strong> as the Display Name</li><li>Then specify an asterisk <strong>*</strong> in the HTTP Parameter name.</li><li>Click <strong>Save</strong></li></ol><p><a href=#R-image-6422d3211a958fd53cb9a3d694b43c19 class=lightbox-link><img alt="HTTPDataCollectors 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-http-collector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6422d3211a958fd53cb9a3d694b43c19><img alt="HTTPDataCollectors 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-http-collector.png></a></p><ol start=8><li>Click &ldquo;Ok&rdquo; to confirm the data collector.</li><li>Enable <strong>/Supercar-Trader/sell.do</strong> Transaction</li><li>Click <strong>Save</strong></li></ol><p><a href=#R-image-d8495f43f079ae5df89a4f0542d27119 class=lightbox-link><img alt="HTTPDataCollectors 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-bt-enble.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d8495f43f079ae5df89a4f0542d27119><img alt="HTTPDataCollectors 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-bt-enble.png></a></p><h2 id=observe-and-select-relevant-http-data-collectors>Observe and Select Relevant HTTP Data Collectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Apply load on the Application, specifically the <strong>SellCar</strong> transaction. Open one of its snapshots with Full Call Graph, and select the <strong>Data Collectors Tab</strong>.</li></ol><p>You can now see all HTTP Parameters. You will see a number of key metrics, such as Car Price, Color, Year, and more.</p><ol start=2><li>Note the exact Parameter names to add them again in the <strong>HTTP Parameters</strong> list and enable them in Transaction Analytics.</li><li>Once they are added, delete the <strong>All HTTP Param</strong> HTTP data collector.</li></ol><p><a href=#R-image-2d543fc5fd215dc0c9e63d4563c5fd36 class=lightbox-link><img alt="HTTPDataCollectors 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-snapshot-collector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2d543fc5fd215dc0c9e63d4563c5fd36><img alt="HTTPDataCollectors 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-snapshot-collector.png></a></p><h2 id=capture-business-data-in-analytics-with-http-params>Capture Business Data in Analytics with HTTP Params<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will now configure the HTTP data collector again, but this time you will capture only the useful HTTP Parameters and enable them in Transaction Analytics. Add a new HTTP Data Collector: Application -> Configuration -> Instrumentation -> Data Collector tab -> Click <strong>Add</strong> Under the <strong>HTTP Request Data Collectors</strong> section</p><ol><li>In the Name, specify <strong>CarDetails</strong>.</li><li>Enable <strong>Transaction Snapshots</strong>.</li><li>Enable <strong>Transaction Analytics</strong>.</li><li>Click <strong>+ Add</strong> in the HTTP Parameters section.</li><li>For the new Parameter, specify <strong>CarPrice_http</strong> as the Display Name</li><li>Then specify <strong>carPrice</strong> as the HTTP Parameter name.</li><li>Repeat for the rest of the Car Parameters as shown below.</li><li>Click <strong>Save</strong></li><li>Click <strong>Ok</strong> to acknowledge the Data Collector implementation</li></ol><p><a href=#R-image-bd2b510a039293432428ab66e94ea1fb class=lightbox-link><img alt=SaveHttpDataCollectors class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-httpcollector-cardetails.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bd2b510a039293432428ab66e94ea1fb><img alt=SaveHttpDataCollectors class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-httpcollector-cardetails.png></a>
<a href=#R-image-a6762c520e4fb7593b4b62beb8a55066 class=lightbox-link><img alt="Car Params" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-car-params.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a6762c520e4fb7593b4b62beb8a55066><img alt="Car Params" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-car-params.png></a></p><ol start=10><li>Enable <strong>/Supercar-Trader/sell.do</strong> Transaction</li><li>Click <strong>Save</strong></li></ol><p><a href=#R-image-69a4ce6e0a4f10d6df209038ddf01909 class=lightbox-link><img alt="HTTPDataCollectors 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-cardetails-bt.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-69a4ce6e0a4f10d6df209038ddf01909><img alt="HTTPDataCollectors 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-cardetails-bt.png></a></p><ol start=12><li>Delete the <strong>All HTTP Param</strong> Collector by Clicking on it, then click <strong>Delete</strong> button.</li></ol><h2 id=validate-analytics-on-http-parameters>Validate Analytics on HTTP Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will now validate whether the business data was captured by HTTP data collectors in AppDynamics Analytics.</p><ol><li>Select the <strong>Analytics</strong> tab at the top left of the screen.</li><li>Select the <strong>Searches</strong> tab</li><li>Click the <strong>+ Add</strong> button and create a new <strong>Drag and Drop Search</strong>.</li></ol><p><a href=#R-image-b9db655fb02293fa8358c45e9264e73a class=lightbox-link><img alt="Drag and Drop Search" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-search.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b9db655fb02293fa8358c45e9264e73a><img alt="Drag and Drop Search" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-search.png></a></p><ol start=4><li>Click <strong>+ Add Criteria</strong></li><li>Select <strong>Application</strong> and Search For Your Application Name <strong>Supercar-Trader-YOURINITIALS</strong></li><li>Under the <strong>Fields</strong> panel verify that the <strong>Business Parameters</strong> appear as a field in the Custom HTTP Request Data.</li><li>Check the box for <strong>CarPrice_http</strong> and Validate that the field has data.</li></ol><p><a href=#R-image-d1b4f510c606a760c09cfe63d6a957f3 class=lightbox-link><img alt=ValidateHttpDataCollectors class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-search-validation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d1b4f510c606a760c09cfe63d6a957f3><img alt=ValidateHttpDataCollectors class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/3-configure-http-data-collectors/images/05-biq-search-validation.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-method-data-collectors>Configure Method Data Collectors</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>Method invocation data collectors capture code data such as method arguments, variables, and return values. If HTTP data collectors don‚Äôt have sufficient business data, you can still capture these information from the code execution.</p><p>In this exercise you will perform the following tasks:</p><ul><li>Discover methods.</li><li>Open a discovery session.</li><li>Discover method parameters.</li><li>Drill down to an object within the code.</li><li>Create a method invocation data collector.</li><li>Validate analytics on method invocation data collectors.</li></ul><h2 id=open-a-discovery-session>Open a Discovery Session<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You may not have an application developer available to identify the method or parameters from the source code. However, there is an approach to discover the application methods and objects directly from AppDynamics.</p><ol><li>Select the <strong>Applications</strong> tab at the top left of the screen.</li><li>Select <strong>Supercar-Trader-YOURINITIALS</strong> application</li><li>Select the <strong>Configuration</strong> tab.</li><li>Click on the <strong>Instrumentation</strong> link.</li><li>Select the <strong>Transaction Detection</strong> tab.</li><li>Click on the <strong>Live Preview Button</strong> on the tight.</li></ol><p><a href=#R-image-d3977f8f1ccdeab5fb694c16ce3b29dd class=lightbox-link><img alt=OpenDiscoverySession class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-live-preview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d3977f8f1ccdeab5fb694c16ce3b29dd><img alt=OpenDiscoverySession class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-live-preview.png></a></p><ol start=7><li>Click on <strong>Start Discovery Session</strong> button</li><li>Select the <strong>Web-Portal Node</strong> in the pop-up windows. It should be the same node that the method you are investigating runs on</li><li>Click <strong>Ok</strong></li></ol><p><a href=#R-image-b15d8b5b7370cb0eb9c6b0ee0775ce52 class=lightbox-link><img alt=OpenDiscoverySession class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-trans-disco.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b15d8b5b7370cb0eb9c6b0ee0775ce52><img alt=OpenDiscoverySession class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-trans-disco.png></a></p><ol start=10><li>Select <strong>Tools</strong> on the right toggle.</li><li>Select <strong>Classes/Methods</strong> in the drop-down list.</li><li>Select <strong>Classes</strong> with name in the <strong>Search</strong> section.</li><li>Type in the class name <strong>supercars.dataloader.CarDataLoader</strong> in the text box. To find the class name you can search through call graphs, or ideally find it in the source code.</li><li>Click <strong>Apply</strong> to search for the matching class methods.</li><li>Once the results appear, expand the class that matches your search.</li><li>Look for the same method <strong>saveCar</strong>.</li></ol><p><a href=#R-image-b7f4705f6ae291afb3e9bc5c378dd4b5 class=lightbox-link><img alt=OpenDiscoverySession class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-trans-disco-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b7f4705f6ae291afb3e9bc5c378dd4b5><img alt=OpenDiscoverySession class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-trans-disco-config.png></a></p><p>Note that the <strong>saveCar</strong> method takes a <strong>CarForm</strong> object as an input parameter.</p><h2 id=drill-down-to-the-object>Drill Down to the Object<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now you have found the method, explore its parameters to find out where you can pull the car details properties.</p><p>You saw that <strong>saveCar</strong> method takes the complex object <strong>CarForm</strong> as an input parameter. This object will hold the form data that was entered on the application webpage. Next, you need to inspect that object and find out how you can pull the car details from it.</p><ol><li>Type in the class name of the input object <strong>supercars.form.CarForm</strong> in the text box</li><li>Click <strong>Apply</strong> to search for the class methods.</li><li>When the results appear, expand the <strong>supercars.form.CarForm</strong> class that matches the search.</li><li>Look for the methods that will return the car details that you want. You will find <strong>get</strong> methods for price, model, color, and more.</li></ol><p><a href=#R-image-d6b2e90dc9c7fdb0ddd298ad9bb2e325 class=lightbox-link><img alt=ObjectDrillDown class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-object-drilldown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d6b2e90dc9c7fdb0ddd298ad9bb2e325><img alt=ObjectDrillDown class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-object-drilldown.png></a></p><h2 id=create-method-invocation-data-collector>Create Method Invocation Data Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With the findings from the previous exercises, you can now configure a method invocation data collector to pull the car details directly from the running code in runtime.</p><ol><li>Select the <strong>Applications</strong> tab.</li><li>Select <strong>Supercar-Trader-YOURINITIALS</strong> Application</li><li>Select the <strong>Configuration</strong> tab.</li><li>Click on the <strong>Instrumentation</strong> link.</li><li>Select the <strong>Data Collectors</strong> tab.</li><li>Click <strong>Add</strong> in the <strong>Method Invocation Data Collectors</strong>.</li></ol><p><a href=#R-image-9ce85b92eeea2bc44bb47532ab518517 class=lightbox-link><img alt=MIDCDataCollector class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-method-collector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9ce85b92eeea2bc44bb47532ab518517><img alt=MIDCDataCollector class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-method-collector.png></a></p><p>We will create a method invocation data collector to capture the car details.</p><ol start=7><li>For the <strong>Name</strong>, specify <strong>SellCarMI-YOURINITIALS</strong>.</li><li>Enable <strong>Transaction Snapshots</strong>.</li><li>Enable <strong>Transaction Analytics</strong>.</li><li>Select <strong>with a Class Name that</strong>.</li><li>Add <strong>supercars.dataloader.CarDataLoader</strong> as the <strong>Class Name</strong>.</li><li>Add <strong>saveCar</strong> as the <strong>Method Name</strong>.</li></ol><p><a href=#R-image-2e0cc3f1eb2d88fc95c946ab16516b7e class=lightbox-link><img alt=NewMIDCDataCollector class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e0cc3f1eb2d88fc95c946ab16516b7e><img alt=NewMIDCDataCollector class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-config.png></a></p><p>Then as observed, the Input Parameter of Index 0 in SaveCar method was an on Object of Class <strong>CarForm</strong>, and then there is a Getter method inside that object that returns the car details properties such as <strong>getPrice()</strong>.</p><p>So to explain that how we fetched that value in the MIDC, we will do the below:</p><ol start=13><li>Click on <strong>Add</strong> at the bottom of the MIDC panel, to specify the new data that you want to collect.</li><li>In the Display Name, specify <strong>CarPrice_MIDC</strong></li><li>In the Collect Data From, select <strong>Method Parameter of Index 0</strong>, which is our <strong>CarForm Object</strong>.</li><li>For the <strong>Operation on Method Parameter</strong>, select <strong>Use Getter Chain</strong>. You will be calling a method inside CarForm to return the car details.</li><li>Then specify <strong>getPrice()</strong>, the Getter method inside the <strong>CarForm</strong> class that will return the price.</li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-5efc0f3b8a3d8be5f213cbdfdf386de2 class=lightbox-link><img alt=CreateMIDCDataCollector1 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-datacoll.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5efc0f3b8a3d8be5f213cbdfdf386de2><img alt=CreateMIDCDataCollector1 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-datacoll.png></a></p><ol start=19><li>Repeat the above steps for all the properties, including color, model, and any others that you want to collect data for.</li></ol><p><a href=#R-image-0ff8f07c49370feaf0a373348defc310 class=lightbox-link><img alt=CreateMIDCDataCollector2 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ff8f07c49370feaf0a373348defc310><img alt=CreateMIDCDataCollector2 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-midc-details.png></a></p><ol start=20><li><strong>Save MIDC</strong>, and apply to the <strong>‚Äù/Supercar-Trader/sell.do‚Äù</strong> business transaction.</li></ol><p>The implementation of the MIDC requires that we restart the JVM:</p><ol><li>SSH into your EC2 instance</li><li>Shutdown the Tomcat Sever</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./shutdown.sh</span></span></code></pre></div><p>If you find any remaining application JVMs still running, kill the remaining JVMs using the command below.</p><div class=tab-panel data-tab-group=R-tabs-1926a092f2311cacc6db8814ea75fb75><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-c1f1aa1f925871df5c5afb45c14067dc aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1926a092f2311cacc6db8814ea75fb75","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-c1f1aa1f925871df5c5afb45c14067dc data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pkill -f Supercar-Trader</span></span></code></pre></div></div></div></div></div><ol start=3><li>Restart the Tomcat Server</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./startup.sh</span></span></code></pre></div><ol start=4><li>Validate that the Tomcat server is running, this can take a few minutes</li></ol><div class=tab-panel data-tab-group=R-tabs-d287fd97007ab7ff07182b16c86385df><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-401c1353f05ec34d7ea595662036f2ee aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d287fd97007ab7ff07182b16c86385df","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-0579d2a6d8f277ca78d8870ca324e62e aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d287fd97007ab7ff07182b16c86385df","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-401c1353f05ec34d7ea595662036f2ee data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:8080</span></span></code></pre></div></div></div><div id=R-tab-id-0579d2a6d8f277ca78d8870ca324e62e data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;!DOCTYPE html&gt;
</span></span><span class=line><span class=cl>&lt;html <span class=nv>lang</span><span class=o>=</span><span class=s2>&#34;en&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;head&gt;
</span></span><span class=line><span class=cl>        &lt;meta <span class=nv>charset</span><span class=o>=</span><span class=s2>&#34;UTF-8&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;title&gt;Apache Tomcat/9.0.50&lt;/title&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;favicon.ico&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;icon&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;image/x-icon&#34;</span> /&gt;
</span></span><span class=line><span class=cl>        &lt;link <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;tomcat.css&#34;</span> <span class=nv>rel</span><span class=o>=</span><span class=s2>&#34;stylesheet&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s2>&#34;text/css&#34;</span> /&gt;
</span></span><span class=line><span class=cl>    &lt;/head&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;body&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;wrapper&#34;</span>
</span></span><span class=line><span class=cl>....</span></span></code></pre></div></div></div></div></div><h2 id=validate-analytics-on-md-parameters>Validate analytics on MD parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Go to the website and apply some manual load on the Sell Car Page by submitting the form a couple of times.</p><p>You will now verify if the business data was captured by HTTP data collectors in AppDynamics Analytics.</p><ol><li>Select the <strong>Analytics</strong> tab.</li><li>Select the <strong>Searches</strong> tab and Add a new <strong>Drag and Drop Search</strong>.</li><li>Click the <strong>+ Add</strong> button and create a new <strong>Drag and Drop Search</strong>.</li><li>Click <strong>+ Add Criteria</strong></li><li>Select <strong>Application</strong> and Search For Your Application Name <strong>Supercar-Trader-YOURINITIALS</strong></li><li>Verify that the <strong>Business Parameters</strong> appear as a field in the <strong>Custom Method Data</strong>.</li><li>Verify that the <strong>CarPrice Field</strong> has data.</li></ol><p><a href=#R-image-0f3f91572a4f45089de619d570de0c96 class=lightbox-link><img alt=ValidateMIDCDataCollector class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-search-results.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0f3f91572a4f45089de619d570de0c96><img alt=ValidateMIDCDataCollector class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/4-configure-method-data-collectors/images/05-biq-search-results.png></a></p><h2 id=conclusion>Conclusion<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You have now captured the business data from the Sell Car transaction from the node at runtime. This data can be used in the Analytical and Dashboard features within AppDynamics to provide more context to the business and measure IT impact on the business.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=dashboard-components>Dashboard Components</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>The ability to build dashboards is a vital component of the AppDynamics capabilities and value. In this exercise,you will work with some of the dashboard components that can be used to build compelling dashboards.</p><h2 id=create-a-new-dashboard>Create a new dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Select the <strong>Dashboard & Reports</strong> tab.</li><li>Click <strong>Create Dashboard</strong>.</li><li>Enter a dashboard name such as <strong>SuperCar-Dashboard-YOURINITIALS</strong>.</li><li>Select <strong>Absolute Layout</strong> as the <strong>Canvas Type</strong>.</li><li>Click <strong>OK</strong>.</li></ol><p><a href=#R-image-0fe18fd5965fc4a732698e8db59b619c class=lightbox-link><img alt=NewDashboard class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-create-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0fe18fd5965fc4a732698e8db59b619c><img alt=NewDashboard class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-create-dashboard.png></a></p><p>Now open the newly created empty dashboard. You will now add various widget types.</p><h2 id=dashboard-components-custom-widget-builder>Dashboard components custom widget builder<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The custom widget builder is a highly flexible tool that can generate representations of data, including numeric vews, time series, pie charts, and more. It is based on the AppDynamics AD Query Language.</p><p>To create a widget, follow these steps:</p><ol><li>Toggle the <strong>Edit Mode</strong> at the upper left corner of the dashboard.</li><li>Click <strong>Add Widget</strong>.</li><li>Select the <strong>Analytics</strong> tab on the left.</li><li>Click <strong>Custom Widget Builder</strong>.</li></ol><p><a href=#R-image-63c4dea0039ceb835eb01e3dda39d89b class=lightbox-link><img alt=NewCustomWidgetBuilder class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-widget-builder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-63c4dea0039ceb835eb01e3dda39d89b><img alt=NewCustomWidgetBuilder class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-widget-builder.png></a></p><p>There are many chart types that you can create in the Customer Widget Builder. You can simply drag or drop information or create an AD Query in the Advanced pane..</p><p><a href=#R-image-80301994be01cadf85420aa72ca1b23b class=lightbox-link><img alt=NewCustomWidgetBuilder class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-add-widget.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-80301994be01cadf85420aa72ca1b23b><img alt=NewCustomWidgetBuilder class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-add-widget.png></a></p><p>For now, we will cover Numeric, Bar and Pie Charts.</p><h3 id=numeric-charts>Numeric charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Exercise:</strong> Quantifying the dollar amount impacted by errors enables you to show the impact of IT performance on the business revenue.</p><ol><li>Select the <strong>Numeric</strong> chart type.</li><li>Add a Filter on the Application field and Select your application name: <strong>Supercar-Trader-YOURINITIALS</strong></li><li>Add a filter on the <strong>/Supercar-Trader/sell.do</strong> business transactions.</li><li>Add a filter on the User Experience Field selecting only the <strong>Error</strong> to show the impact of errors.</li><li>Find the <strong>CarPrice_MIDC</strong> field on the left panel and drag and drop it into the Y-Axis. Notice that SUM is the Aggregation used to capture the total price per model.</li><li>Change the font color to red for better visibility.</li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-44c7a30f6b883b4c80c6ebf6b6d464de class=lightbox-link><img alt=NumericChartWidget class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-lost-revenue.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44c7a30f6b883b4c80c6ebf6b6d464de><img alt=NumericChartWidget class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-lost-revenue.png></a></p><p>Note that you could do the same for the <strong>$ Amount Transacted Successfully</strong> criterion by changing the user experience filter to only include NORMAL, SLOW and VERY SLOW.</p><p>You could also baseline this metric by creating a custom metric in the Analytics module and defining a health rule that indicates if the <strong>$ Amount Impacted</strong> is equal to or higher than the baseline. You can also add a label for the currency.</p><p><a href=#R-image-acf03f56ad0050463f369ee64c33557c class=lightbox-link><img alt=NumericChartSamples class="lazy lightbox figure-image" loading=lazy src=images/06-numeric-chart-widget-samples-09.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-acf03f56ad0050463f369ee64c33557c><img alt=NumericChartSamples class="lazy lightbox lightbox-image" loading=lazy src=images/06-numeric-chart-widget-samples-09.png></a></p><h3 id=bar-charts>Bar charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Exercise:</strong> You will now create a bar chart to visualize Top Impacted Car Models. The chart will show the car models of all of the <strong>SellCar</strong> transactions, categorized by the User Experience.</p><ol><li>Create a New Widget by clicking <strong>+ Add Widget</strong>, <strong>Analytics</strong> and <strong>Custom Widger Builder</strong></li><li>Select the <strong>Column</strong> chart type.</li><li>Add the following filters: Application = <strong>Supercar-Trader-YOURINITIALS</strong> and Business Transaction = <strong>/Supercar-Trader/sell.do</strong>.</li><li>Add <strong>CarModel_MIDC</strong> and <strong>User Experience</strong> to the X-Axis.</li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-3f7b0230c28388fb9e9538d37bb170a5 class=lightbox-link><img alt=BarChartWidget class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-bar-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3f7b0230c28388fb9e9538d37bb170a5><img alt=BarChartWidget class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-bar-chart.png></a></p><p>This chart type can be adjusted based on your need. For example, you could group the X-AXIS by Customer Type, Company, Organization, and more. Refer to the following example.</p><p><a href=#R-image-f40ad39995706d66d37da3c3407a5e65 class=lightbox-link><img alt=BarChartSamples class="lazy lightbox figure-image" loading=lazy src=images/06-bar-chart-widget-samples-05.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f40ad39995706d66d37da3c3407a5e65><img alt=BarChartSamples class="lazy lightbox lightbox-image" loading=lazy src=images/06-bar-chart-widget-samples-05.png></a></p><h3 id=pie-charts>Pie charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You will now create a pie chart that shows all the car models reported by the <code>sellCar</code> transaction and the sum of prices per model. This will show the most highly-demanded model in the application.</p><ol><li>Create a new Widget</li><li>Select the <strong>Pie</strong> chart type.</li><li>Add the following filters: Application = <strong>Supercar-Trader-YOURINITIALS</strong> and Business Transaction = <strong>/Supercar-Trader/sell.do</strong>.</li><li>Add <strong>CarModel_MIDC</strong> in the X-Axis</li><li>Add <strong>CarPrice_MIDC</strong> in the Y-Axis. Note that <strong>SUM</strong> is the aggregation used to capture the total price per model.</li><li>Add a Title <strong>Sold by Car Model</strong></li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-b598fc13c2f69fec2589ade5349a62d6 class=lightbox-link><img alt=PieChartWidget class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-pie-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b598fc13c2f69fec2589ade5349a62d6><img alt=PieChartWidget class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-pie-chart.png></a></p><p>Refer to the following example for more uses of the pie chart widget.</p><p><a href=#R-image-a0799df579f01ddee2928a1d687958fa class=lightbox-link><img alt=PieChartSamples class="lazy lightbox figure-image" loading=lazy src=images/06-pie-chart-widget-samples-07.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a0799df579f01ddee2928a1d687958fa><img alt=PieChartSamples class="lazy lightbox lightbox-image" loading=lazy src=images/06-pie-chart-widget-samples-07.png></a></p><h2 id=dashboard-components-conversion-funnels>Dashboard components: Conversion funnels<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Conversion funnels help visualize the flow of users or events through a multi-step process. This enables you to better understand which steps can be optimized for more successful convergence. You can also use conversion funnels to examine the IT perfomance of every step, to understand how they impact the user experience and identify the cause of user drop-offs.</p><p>Note that the funnel is filtered according to the users who executed this path in that specific order, not the total visits per step.</p><p>The first step of funnel creation is to select a unique identifier of the transaction that can represent each user navigation through the funnel. Usually, the Session ID is the best choice, since it persists through each step in the funnel.</p><p>A Session ID can be captured from the transactions. You‚Äôll need a <strong>SessionId</strong> data collector to use it as a counter for the Funnel transactions.</p><p>For Java applications, AppDynamics has the capability to Session IDs in the default HTTP data collector. You‚Äôll ensure that it is enabled and apply it to all business transactions to capture the Session ID for every transaction.</p><ol><li>Select the <strong>Applications</strong> tab.</li><li>Select <strong>Supercar-Trader-YOURINITIALS</strong> Application.</li><li>Select the <strong>Configuration</strong> Left tab.</li><li>Click <strong>Instrumentation</strong>.</li><li>Select the <strong>Data Collectors</strong> tab.</li><li>Edit the <strong>Default HTTP Request Request Data Collectors</strong>.</li><li>Select <strong>Transaction Analytics</strong>.</li><li>Verify that <strong>SessionID</strong> is selected.</li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-848954cba8b2fa6ab61d76fe543e0048 class=lightbox-link><img alt=EnableSessionId class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-session-id.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-848954cba8b2fa6ab61d76fe543e0048><img alt=EnableSessionId class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-session-id.png></a></p><p>Now apply some load by navigating multiple times from the <strong>/Supercar-Trader/home.do</strong> page. Then, directly navigate to <strong>/Supercar-Trader/sell.do</strong> page on the application.</p><p>Now Return to your Dashboard to create the funnel widget.</p><ol><li>Toggle the <strong>Edit</strong> slider.</li><li>Click <strong>Add Widget</strong>.</li><li>Select the <strong>Analytics</strong> tab.</li><li>Click <strong>Funnel Analysis</strong>.</li><li>Select <strong>Transactions</strong> from the drop-down list.</li><li>Under <strong>Count Distinct of</strong>, select <strong>uniqueSessionId</strong> from the drop-down list.</li><li>Click <strong>Add Step</strong>. Name it <strong>Home Page</strong>.</li><li>Click on <strong>Add Criteria</strong>. Add the following criteria: <strong>Application</strong>: Supercar-Trader-YOURINITIALS & <strong>Business Transactions</strong>: <strong>/Supercar-Trader/home.do</strong>.</li><li>Click <strong>Add Step</strong>. Name it <strong>SellCar Page</strong>.</li><li>Click on <strong>Add Criteria</strong>. Add the following criteria: <strong>Application:</strong> Supercar-Trader-YOURINITIALS & <strong>Business Transactions:</strong> /Supercar-Trader/sell.do.</li><li>Select the <strong>Show Health</strong> Checkbox on the right panel to visualize the transaction health in the flow map.</li><li>Click <strong>Save</strong></li></ol><p><a href=#R-image-1b24555c5ae8103f543e62697d9bd209 class=lightbox-link><img alt=FunnelWidget class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-funnel-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1b24555c5ae8103f543e62697d9bd209><img alt=FunnelWidget class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/5-dashboard-components/images/05-biq-funnel-chart.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=build-your-dashboard>Build Your Dashboard</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<h2 id=exercise---build-your-own-dashboard>Exercise - Build Your Own Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To conclude this Learning Lab, use the business data that was captured in the earlier exercise using method invocation data collectors and your understanding of the dashboard components to build an IT Business Impact Dashboard.</p><p>Refer to the following example and build your own dashboard, using the same data and widgets.</p><p><a href=#R-image-a205b5eaefab4ff59cd80b0a35d1cc8f class=lightbox-link><img alt="DiscoverCallGraphMethods 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/6-build-your-dashboard/images/06-BusinessDashboard-01.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a205b5eaefab4ff59cd80b0a35d1cc8f><img alt="DiscoverCallGraphMethods 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/3-business-iq/6-build-your-dashboard/images/06-BusinessDashboard-01.png></a></p><p><strong>Congratulations! You have completed the BusinessIQ Fundamentals Learning Lab!</strong></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=browser-real-user-monitoring-brum>Browser Real User Monitoring (BRUM)</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=objectives>Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this Learning Lab you learn how to use AppDynamics to monitor the health of your browser-based application.</p><p>When you have completed this lab, you will be able to:</p><ul><li>Create a browser application in the Controller</li><li>Configure the Browser Real User Monitoring (BRUM) agent to monitor your web application‚Äôs health.</li><li>Troubleshoot performance issues and find the root cause, whether it occurs on the browser side or the server side of the transaction.</li></ul><h2 id=workshop-environment>Workshop Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The workshop environment has two hosts:</p><ul><li>The first host runs the AppDynamics Controller and will be referred to from this point on as the Controller.</li><li>The second host runs the Supercar Trader application used in the labs. It will be the host where you will install the AppDynamics agents and will be referred to from this point on as the Application VM.</li></ul><h2 id=controller>Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will be using the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> for this workshop.</p><p><a href=#R-image-85925eaa53e03f40a49318842df1b655 class=lightbox-link><img alt=Controller class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-85925eaa53e03f40a49318842df1b655><img alt=Controller class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/images/controller-vm.png></a></p><h2 id=application-vm>Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Supercar Trader is a Java-based Web Application</p><p>The purpose of Supercar-Trader collection is to generate dynamic traffic (business transactions) for AppDynamics Controller.</p><p><a href=#R-image-44c5b95ce89db47e114b46755d57ecb2 class=lightbox-link><img alt="Application VM" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/images/application-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44c5b95ce89db47e114b46755d57ecb2><img alt="Application VM" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/images/application-vm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Browser Real User Monitoring (BRUM)</h1><article class=default><header class=headline></header><h1 id=brum-lab-prerequisits>BRUM Lab Prerequisits</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Access your AppDynamics Controller from your web browser.</li><li>Verify transaction load to the application.</li><li>Restart the application and transaction load if needed.</li></ul><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=verify-transaction-load-to-the-application>Verify transaction load to the application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Check the application flow map:</p><ol><li>Select the <strong>last 1 hour</strong> time frame.</li><li>Verify you see the five different Tiers on the flow map.</li><li>Verify there has been consistent load over the last 1 hour.</li></ol><p><a href=#R-image-9280bd12aed977d51def300ca2c27ebf class=lightbox-link><img alt="Verify Load 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereque-appload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9280bd12aed977d51def300ca2c27ebf><img alt="Verify Load 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereque-appload.png></a></p><p>Check the list of business transactions:</p><ol start=4><li>Click the <strong>Business Transactions</strong> option on the left menu.</li><li>Verify you see the eleven business transactions seen below.</li><li>Verify that they have some number of calls during the last hour.</li></ol><p><strong>Note:</strong> If you don‚Äôt see the <strong>Calls</strong> column, you can click the <strong>View Options</strong> toolbar button to show that column.</p><p><a href=#R-image-cb78b1dd9699a777768b62e407262315 class=lightbox-link><img alt="Verify Business transactions" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereq-bts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb78b1dd9699a777768b62e407262315><img alt="Verify Business transactions" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereq-bts.png></a></p><p>Check the agent status for the Nodes:</p><ol start=7><li>Click the <strong>Tiers & Nodes</strong> option on the left menu.</li><li>Click <strong>Grid View</strong>.</li><li>Verify that the <strong>App Agent Status</strong> for each Node is greater than 90% during the last hour.</li></ol><p><a href=#R-image-747f338bd2e564c56c503f650f65eced class=lightbox-link><img alt="Verify Agents" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereq-tiersnodes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-747f338bd2e564c56c503f650f65eced><img alt="Verify Agents" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/01-prereq-tiersnodes.png></a></p><h2 id=restart-the-application-and-load-generation-if-needed>Restart the Application and Load Generation if Needed<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If any of the checks you performed in the previous steps could not be verified, SSH into your <strong>Application VM</strong> and follow these steps to restart the application and transaction load.</p><p>Use the following commands to stop the running instance of Apache Tomcat.<div class=tab-panel data-tab-group=R-tabs-759332229ff3e0055c4c8cf638a18b6c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-75063aa8941dafdf2e3c51d1abe97647 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-759332229ff3e0055c4c8cf638a18b6c","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-75063aa8941dafdf2e3c51d1abe97647 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./shutdown.sh</span></span></code></pre></div></div></div></div></div></p><p>Use the command below to check for remaining application JVMs still running.</p><div class=tab-panel data-tab-group=R-tabs-739b3306da1a7feb3f9d1343d450a184><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7fdfcc2e4947c21e72bb82325bf260fa aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-739b3306da1a7feb3f9d1343d450a184","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-7fdfcc2e4947c21e72bb82325bf260fa data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -ef <span class=p>|</span> grep Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>If you find any remaining application JVMs still running, kill the remaining JVMs using the command below.</p><div class=tab-panel data-tab-group=R-tabs-320ff93c0366b8df23b80c4730f1b843><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-809430497b1f1e76562c3bb8bff0ff2c aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-320ff93c0366b8df23b80c4730f1b843","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-809430497b1f1e76562c3bb8bff0ff2c data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pkill -f Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>Use the following commands to stop the load generation for the application. Wait until all processes are stopped.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./stop_load.sh</span></span></code></pre></div><p>Restart the Tomcat server:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./startup.sh</span></span></code></pre></div><p>Wait for two minutes and use the following command to ensure Apache Tomcat is running on port 8080.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo netstat -tulpn <span class=p>|</span> grep LISTEN</span></span></code></pre></div><p>You should see output similar to the following image showing that port 8080 is in use by Apache Tomcat.</p><p><a href=#R-image-21727b4e9241a496cee17e2153c152c2 class=lightbox-link><img alt="Restart App 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/restart-app-and-load-01.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-21727b4e9241a496cee17e2153c152c2><img alt="Restart App 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/restart-app-and-load-01.png></a></p><p>Use the following commands to start the load generation for the application.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./start_load.sh</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-69addaead17acce9c0dac6f1c43731b3 class=lightbox-link><img alt="Restart App 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/restart-app-and-load-03.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-69addaead17acce9c0dac6f1c43731b3><img alt="Restart App 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/1-lab-prerequisites/images/restart-app-and-load-03.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-browser-application>Create Browser Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Access your AppDynamics Controller from your web browser.</li><li>Create the Browser Application in the Controller.</li><li>Configure the Browser Application.</li></ul><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=create-the-browser-application-in-the-controller>Create the Browser Application in the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following steps to create your new browser application.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1>Note</summary><div class=box-content><p>It is <strong>very important</strong> that you create a unique name for your browser application in Step 5 below.</p></div></details><ol><li>Click the <strong>User Experience</strong> tab on the top menu.</li><li>Click the <strong>Browser Apps</strong> option under <strong>User Experience</strong>.</li><li>Click <strong>Add App</strong>.</li><li>Choose the option <strong>Create an Application manually</strong>.</li><li>Type in a unique name for your browser application in the format <em>Supercar-Trader-Web-&lt;your_initials_or_name>-&lt;four_random_numbers></em><ul><li>Example 1: Supercar-Trader-Web-JFK-3179</li><li>Example 2: Supercar-Trader-Web-JohnSmith-0953</li></ul></li><li>Click <strong>OK</strong>.</li></ol><p><a href=#R-image-e37e5a72c92a0506d41e31d45013f611 class=lightbox-link><img alt="Create App" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-create-app.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e37e5a72c92a0506d41e31d45013f611><img alt="Create App" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-create-app.png></a></p><p>You should now see the <strong>Browser App Dashboard</strong> for the <strong>Supercar-Trader-Web-##-####</strong> application.</p><ol><li>Click the <strong>Configuration</strong> tab on the left menu.</li><li>Click the <strong>Instrumentation</strong> option.</li></ol><p><a href=#R-image-d720cfed95ea80f56c76b749b569de37 class=lightbox-link><img alt=Instrumentation class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-instrument.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d720cfed95ea80f56c76b749b569de37><img alt=Instrumentation class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-instrument.png></a></p><p>Change the default configuration to have the IP Address stored along with the data captured by the browser monitoring agent by following these steps.</p><ol start=3><li>Click the <strong>Settings</strong> tab.</li><li>Use the scroll bar on the right to scroll to the bottom of the screen.</li><li>Check the <strong>Store IP Address</strong> check box.</li><li>Click <strong>Save</strong>.</li></ol><p>You can read more about configuring the Controller UI for Browser RUM <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-real-user-monitoring/overview-of-the-controller-ui-for-browser-rum/configure-the-controller-ui-for-browser-rum rel=external>here</a>.</p><p><a href=#R-image-d9316e057bd7df56c7395436193fec29 class=lightbox-link><img alt="IPAddress Config" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-ipaddress.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9316e057bd7df56c7395436193fec29><img alt="IPAddress Config" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/2-create-browser-application/images/02-brum-ipaddress.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-agent-injection>Configure Agent Injection</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Enable JavaScript Agent injection.</li><li>Select Business Transactions for injection.</li></ul><h2 id=enable-javascript-agent-injection>Enable JavaScript Agent injection<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>While AppDynamics supports various methods for injecting the JavaScript Agent, you will be using the Auto-Injection method in this lab. Follow these steps to enable the Auto-Injection of the JavaScipt Agent.</p><ol><li>Click the <strong>Applications</strong> tab on the left menu and drill into your Supercar-Trader-## application.</li><li>Click the <strong>Configuration</strong> tab on the left menu at the bottom.</li><li>Click the <strong>User Experience App Integration</strong> option.</li></ol><p><a href=#R-image-a55d6d8ee5adaed365ba913b8ce8a759 class=lightbox-link><img alt="BRUM Dash 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-app-integration.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a55d6d8ee5adaed365ba913b8ce8a759><img alt="BRUM Dash 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-app-integration.png></a></p><ol start=4><li>Click the <strong>JavaScript Agent Injection</strong> tab.</li><li>Click <strong>Enable</strong> so that it turns blue.</li><li>Ensure that <strong>Supercar-Trader-Web-##-####</strong> is the selected browser app. Choose the application that you created in the previous section</li><li>Check the <strong>Enable</strong> check box under <strong>Enable JavaScript Injection</strong></li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-ad5a269bcea6b410eb33b7becb618ed0 class=lightbox-link><img alt="BRUM Dash 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-agent-injection.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ad5a269bcea6b410eb33b7becb618ed0><img alt="BRUM Dash 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-agent-injection.png></a></p><p>It takes a few minutes for the Auto-Injection to discover potential Business Transactions. While this is happening, use these steps to enable the Business Transaction Correlation. For newer APM agents this is done automatically</p><ol start=9><li>Click the <strong>Business Transaction Correlation</strong> tab.</li><li>Click the <strong>Enable</strong> button under the <strong>Manually Enable Business Transactions</strong> section.</li><li>Click <strong>Save</strong>.</li></ol><p><a href=#R-image-71d68200a98c74d0e840d2a58751ddcb class=lightbox-link><img alt="BRUM Dash 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-bt-manual.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-71d68200a98c74d0e840d2a58751ddcb><img alt="BRUM Dash 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-bt-manual.png></a></p><h2 id=select-business-transactions-for-injection>Select Business Transactions for injection<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following steps to select the Business Transactions for Auto-Injection.</p><ol><li>Click the <strong>JavaScript Agent Injection</strong> tab.</li><li>Type <strong>.do</strong> in the search box.</li><li>Click the <strong>Refresh List</strong> link for the Business Transactions until all 9 BTs show up.</li><li>Select all Business Transactions from the right list box.</li><li>Click the arrow button to move them to the left list box.</li><li>Ensure that all Business Transactions are moved into the left list box.</li><li>Click <strong>Save</strong>.</li></ol><p>You can read more about configuring Automatic Injection of the JavaScript Agent <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-real-user-monitoring/inject-the-javascript-agent/automatic-injection-of-the-javascript-agent rel=external><strong>here</strong></a>.</p><p><a href=#R-image-b4992ade724f92460eb769af79cb2b90 class=lightbox-link><img alt="BRUM Dash 5" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-bts-auto-inject.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b4992ade724f92460eb769af79cb2b90><img alt="BRUM Dash 5" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/3-configure-agent-injection/images/03-brum-bts-auto-inject.png></a></p><p>Wait a few minutes for load to start showing up in your Browser Application.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-and-troubleshoot---part-1>Monitor and Troubleshoot - Part 1</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Review the Browser Application Overview Dashboard</li><li>Review the Browser Application Geo Dashboard</li><li>Review the Browser Application Usage Stats Dashboard</li><li>Navigate the Supercar-Trader application web pages</li></ul><h2 id=review-the-browser-application-overview-dashboard>Review the Browser Application Overview Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to the User Experience dashboard and drill into the browser application overview dashboard by following these steps.</p><ol><li>Click the <strong>User Experience</strong> tab on the left menu.</li><li>Search for you Web Application <strong>Supercar-Trader-Web-##-###</strong>.</li><li>Click <strong>Details</strong> or double click on your application name</li></ol><p><a href=#R-image-44ee52210216a2b360691478691df8cf class=lightbox-link><img alt="BRUM Dash 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-app.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44ee52210216a2b360691478691df8cf><img alt="BRUM Dash 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-app.png></a></p><p>The Overview dashboard displays a set of configurable widgets. The default widgets contain multiple graphs and lists that feature common high-level indicators of application performance, including:</p><ul><li>End User Response Time Distribution</li><li>End User Response Time Trend</li><li>Total Page Requests by Geo</li><li>End User Response Time by Geo</li><li>Top 10 Browsers</li><li>Top 10 Devices</li><li>Page Requests per Minute</li><li>Top 5 Pages by Total Requests</li><li>Top 5 Countries by Total Page Requests</li></ul><p>Explore the features of the dashboard.</p><ol start=4><li>Click <strong>+</strong> to choose additional graphs and widgets to add to the dashboard.</li><li>Click and drag the bottom right corner of any widget to resize it.</li><li>Select the outlined area in any widget to move and place it on the dashboard.</li><li>Click on the title of any widget to drill into the detail dashboard.</li><li>Click <strong>X</strong> in the top right corner of any widget to remove it from the dashboard.</li></ol><p>Any changes you make to the dashboard widget layout will automatically be saved.</p><p>You can read more about the Browser Application Overview dashboard <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-app-dashboard/overview rel=external><strong>here</strong></a>.</p><p><a href=#R-image-ae3c66258b65e1fc7a0beda4603f1aa0 class=lightbox-link><img alt="BRUM Dash 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae3c66258b65e1fc7a0beda4603f1aa0><img alt="BRUM Dash 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-overview.png></a></p><h2 id=review-the-browser-application-geo-dashboard>Review the Browser Application Geo Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Geo Dashboard displays key performance metrics by geographic location based on page loads. The metrics displayed throughout the dashboard are for the region currently selected on the map or in the grid. The Map view displays load circles with labels for countries that are in the key timing metrics given in the right panel. Some countries and regions, however, are only displayed in the grid view.</p><p>Navigate to the Browser Application Geo dashboard and explore the features of the dashboard described below.</p><ol><li>Click the <strong>Geo Dashboard</strong> option.</li><li>Click on one of the load circles to drill down to the region.</li><li>Hover over one of the regions to show the region details.</li><li>Use the zoom slider to adjust the zoom level.</li><li>Click <strong>Configuration</strong> to explore the map options.</li><li>Switch between the grid view and map view.</li></ol><p>You can read more about the Browser Application Geo dashboard <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-app-dashboard/geo-tab rel=external><strong>here</strong></a>.</p><p><a href=#R-image-85ae89cd4ad96f18fff191f622aa2160 class=lightbox-link><img alt="BRUM Dash 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-geomap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-85ae89cd4ad96f18fff191f622aa2160><img alt="BRUM Dash 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-geomap.png></a></p><h2 id=review-the-browser-application-usage-stats-dashboard>Review the Browser Application Usage Stats Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <strong>Usage Stats</strong> dashboard presents an aggregated page-load usage data based on your users browser type and device/platform.</p><p>The Browser Application Usage Stats dashboard helps you discover:</p><ul><li>The slowest browsers in terms of total end-user response time.</li><li>The slowest browsers to render the response page.</li><li>The browsers that most of your end users use.</li><li>The browsers that most of your end users use in a particular country or region.</li></ul><p>Navigate to the Browser Application Usage Stats dashboard and explore the features of the dashboard described below.</p><ol><li>Click the <strong>Usage Stats</strong> option.</li><li>Click the <strong>Show Versions</strong> option.</li><li>Look at the different browsers and versions by load.</li><li>Hover over the sections in the pie chart to see the details.</li></ol><p><a href=#R-image-875bc13d518798d4fbc54731c84b66a3 class=lightbox-link><img alt="BRUM Dash 4" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-usage-stats.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-875bc13d518798d4fbc54731c84b66a3><img alt="BRUM Dash 4" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-usage-stats.png></a></p><p>Use these steps to explore more metrics by browser and version.</p><ol start=5><li>Use the scroll bar on the right to scroll to the bottom of the page.</li><li>Explore the available metrics by browser and version.</li><li>Explore the available metrics by country.</li></ol><p><a href=#R-image-39cd500943715c1e108cec351ca76dab class=lightbox-link><img alt="BRUM Dash 5" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-usage-stats2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-39cd500943715c1e108cec351ca76dab><img alt="BRUM Dash 5" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-usage-stats2.png></a></p><p>Navigate to the Devices dashboard and explore the features of the dashboard described below.</p><ol start=8><li>Click the <strong>Devices</strong> option.</li><li>Look at the load by device break out.</li><li>Hover over the sections in the pie chart to see the details.</li><li>Explore the available performance metrics by device.</li></ol><p>You can read more about the Browser Application Usage Stats dashboard <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-app-dashboard/usage-stats rel=external><strong>here</strong></a>.</p><p><a href=#R-image-eaa9cf26398c802d6fbd531715a96ddd class=lightbox-link><img alt="BRUM Dash 6" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-device.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eaa9cf26398c802d6fbd531715a96ddd><img alt="BRUM Dash 6" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-device.png></a></p><h2 id=navigate-the-supercar-trader-application-web-pages>Navigate the Supercar-Trader application web pages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you have the Browser Real User Monitoring agent configured and explored the first series of features, let‚Äôs generate some additional load and record your unique browser session by navigating the web pages of the Supercar-Trader application.</p><p>Open the main page of the app with your web browser. In the example URL below, substitute the IP Address or fully qualified domain name of your Application VM.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://<span class=o>[</span>application-vm-ip-address<span class=o>]</span>:8080/Supercar-Trader/home.do</span></span></code></pre></div><p>You should see the home page of the application.</p><p><a href=#R-image-95abf5d984fb9f5ccf6358ec4323b54c class=lightbox-link><img alt="App Page 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-supercar-homepage.jpeg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95abf5d984fb9f5ccf6358ec4323b54c><img alt="App Page 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/04-brum-supercar-homepage.jpeg></a></p><p>Open the listing of available Ferraris.</p><ol><li>Click on the <strong>Supercars</strong> tab on the top menu.</li><li>Clicking on the Ferrari logo.</li></ol><p><a href=#R-image-28d78c4551458faac2712de30c031b8f class=lightbox-link><img alt="App Page 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-02.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-28d78c4551458faac2712de30c031b8f><img alt="App Page 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-02.png></a></p><p>You should see the list of Ferraris.</p><p><a href=#R-image-84071913cec1f632d0892f095eeef5aa class=lightbox-link><img alt="App Page 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-03.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-84071913cec1f632d0892f095eeef5aa><img alt="App Page 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-03.png></a></p><p>Click on the image of the first Ferrari.</p><ol><li>Click <strong>View Enquiries</strong>.</li><li>Click <strong>Enquire</strong>.</li></ol><p><a href=#R-image-97ac0a1a5718bd7f80352cfc73433a3a class=lightbox-link><img alt="App Page 4" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-04.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-97ac0a1a5718bd7f80352cfc73433a3a><img alt="App Page 4" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-04.png></a></p><p>Submit an enquiry for the car.</p><ol><li>Complete the fields on the enquiry form with appropriate data.</li><li>Click <strong>Submit</strong>.</li></ol><p><a href=#R-image-a1c7a3070affca02a4cc926e5dc9229a class=lightbox-link><img alt="App Page 5" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-05.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a1c7a3070affca02a4cc926e5dc9229a><img alt="App Page 5" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-05.png></a></p><p>Search for cars and continue browsing the site.</p><ol><li>Click on the <strong>Search</strong> tab on the top menu.</li><li>Type the letter <strong>A</strong> into the search box and click <strong>Search</strong>.</li><li>Click on the remaining tabs to explore the web site.</li></ol><p><a href=#R-image-271d6d28bdfee8d0256d835d7c5976ab class=lightbox-link><img alt="App Page 6" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-06.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-271d6d28bdfee8d0256d835d7c5976ab><img alt="App Page 6" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/4-monitor-and-troubleshoot-part-1/images/05-app-page-06.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-and-troubleshoot---part-2>Monitor and Troubleshoot - Part 2</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Review the Browser Session you created.</li><li>Review the Pages & AJAX Requests Dashboard.</li><li>Review the Dashboard for a specific Base Page.</li><li>Troubleshoot a Browser Snapshot.</li></ul><h2 id=review-the-browser-session-you-created>Review the Browser Session you created<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can think of sessions as a time-based context to analyze a user‚Äôs experience interacting with an application. By examining browser sessions, you can understand how your applications are performing and how users are interacting with them. This enables you to better manage and improve your application, whether that means modifying the UI or optimizing performance on the server side.</p><p>Navigate to the Sessions dashboard and find the browser session that you created in the last exercise from navigating the pages of the web application. Follow these steps.</p><details open class="box cstyle notices orange"><summary class=box-label tabindex=-1>Note</summary><div class=box-content><p>You may need to wait ten minutes after you hit the last page in the web application to see your browser session show up in the sessions list. If you don‚Äôt see your session after ten minutes, this could be due to a problem with the Java Agent version in use.</p></div></details><ol><li>Click the <strong>Sessions</strong> tab on the left menu.</li><li>Check the <strong>IP Address</strong> in the Session Fields list.</li><li>Find the session you created by your IP Address.</li><li>Click on your session, then click <strong>View Details</strong>.</li></ol><p><a href=#R-image-4ae21c3e97d8fbc25ad3420ce9667562 class=lightbox-link><img alt="BRUM Dash 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-sessions.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4ae21c3e97d8fbc25ad3420ce9667562><img alt="BRUM Dash 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-sessions.png></a></p><p>Once you find and open the session you created, follow these steps to explore the different features of the session view.</p><blockquote><p><em>Note:</em> Your session may not have a <strong>View Snapshot</strong> link in any of the pages (as seen in step five). You will find a session that has one to explore later in this exercise.</p></blockquote><ol start=5><li>Click the <strong>Session Summary</strong> link to view the summary data.</li><li>When you click on a page listed on the left, you see the details of that page on the right.</li><li>You can always see the full name of the page you have selected in the left list.</li><li>Click on a horizontal blue bar in the waterfall view to show the details of that item.</li><li>Some pages may have a link to a correlated snapshot that was captured on the server side.</li><li>Click the configuration icon to change the columns shown in the pages list.</li></ol><p>You can read more about the Browser RUM Sessions <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-real-user-monitoring/overview-of-the-controller-ui-for-browser-rum/browser-rum-sessions rel=external><strong>here</strong></a>.</p><p><a href=#R-image-5569842bce96c53eebcb7f4051554ff4 class=lightbox-link><img alt="BRUM Dash 2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-session-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5569842bce96c53eebcb7f4051554ff4><img alt="BRUM Dash 2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-session-details.png></a></p><h2 id=review-the-pages--ajax-requests-dashboard>Review the Pages & AJAX Requests Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to the Pages & AJAX Requests dashboard, review the options there, and open a specific Base Page dashboard by following these steps.</p><ol><li>Click the <strong>Pages & AJAX Requests</strong> tab on the left menu.</li><li>Explore the options on the toolbar.</li><li>Click the <strong>localhost:8080/supercar-trader/car.do</strong> page.</li><li>Click <strong>Details</strong> to open the Base Page dashboard.</li></ol><p><a href=#R-image-451ce072c209045bce25a64cfcc2d8c2 class=lightbox-link><img alt="BRUM Dash 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-ajax-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-451ce072c209045bce25a64cfcc2d8c2><img alt="BRUM Dash 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-ajax-list.png></a></p><h2 id=review-the-dashboard-for-a-specific-base-page>Review the Dashboard for a specific Base Page<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>At the top of the Base Page dashboard you will see key performance indicators, End User Response Time, Load, Cache Hits, and Page Views with JS errors across the period selected in the timeframe dropdown from the upper-right side of the Controller UI. Cache Hits indicates a resource fetched from a cache, such as a CDN, rather than from the source.</p><p>In the Timing Breakdown section you will see a waterfall graph that displays the average times needed for each aspect of the page load process. For more information on what each of the metrics measures, hover over its name on the left. A popup appears with a definition. For more detailed information, see <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-real-user-monitoring/browser-rum-metrics rel=external><strong>Browser RUM Metrics</strong></a>.</p><p>Review the details for the <strong>localhost:8080/supercar-trader/car.do</strong> Base Page by following these steps.</p><ol><li>Change the timeframe dropdown to <strong>last 2 hours</strong>.</li><li>Explore the key performance indicators.</li><li>Explore the metrics on the waterfall view.</li><li>Use the vertical scroll bar to move down the page.</li><li>Explore the graphs for all of the KPI Trends.</li></ol><p>You can read more about the Base Page dashboard <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-real-user-monitoring/overview-of-the-controller-ui-for-browser-rum/pages-and-ajax-requests/page-ajax-and-iframe-dashboards/page-and-iframe-dashboards rel=external><strong>here</strong></a>.</p><p><a href=#R-image-5c36a23bb259fadb978c2eea8659dc82 class=lightbox-link><img alt="BRUM Dash 4" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-main-page-summary.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c36a23bb259fadb978c2eea8659dc82><img alt="BRUM Dash 4" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/05-brum-main-page-summary.png></a></p><h2 id=troubleshoot-a-browser-snapshot>Troubleshoot a Browser Snapshot<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><details open class="box cstyle notices orange"><summary class=box-label tabindex=-1>Note</summary><div class=box-content><p>Your application may not have any browser snapshots as such you will not be able to follow the entire workflow. You can switch to the browser application <strong>AD-Ecommerce-Browser</strong> if you would like to follow this section with a different demo application</p></div></details><p>Navigate to the Browser Snapshots list dashboard and open a specific Browser Snapshot by following these steps.</p><ol><li>Click the <strong>Browser Snapshots</strong> option.</li><li>Click the <strong>End User Response Time</strong> column header twice to show the largest response times at the top.</li><li>Click on a browser snapshot that has a gray or blue icon in the third column from the left.</li><li>Click <strong>Details</strong> to open the browser snapshot.</li></ol><p><a href=#R-image-5235aacc61659bb0c36d3e989bac2754 class=lightbox-link><img alt="BRUM Dash 6" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-06.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5235aacc61659bb0c36d3e989bac2754><img alt="BRUM Dash 6" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-06.png></a></p><p>Once you open the browser snapshot, review the details and find root cause for the large response time by following these steps.</p><ol><li>Review the waterfall view to understand where the response time was impacted.</li><li>Notice the extended <strong>Server Time</strong> metric. Hover over the label for <strong>Server Time</strong> to understand its meaning.</li><li>Click the server side transaction that was automatically captured and correlated to the browser snapshot.</li><li>Click <strong>View Details</strong> to open the associated server side snapshot.</li></ol><p><a href=#R-image-6ef21e142eeffc03caa2288a4c821ef5 class=lightbox-link><img alt="BRUM Dash 7" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-07.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ef21e142eeffc03caa2288a4c821ef5><img alt="BRUM Dash 7" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-07.png></a></p><p>Once you open the correlated server side snapshot, use the steps below to pinpoint the root cause of the performance degredation.</p><ol><li>You can see that the percentage of transaction time spent in the browser was minimal.</li><li>The timing between the browser and the Web-Portal Tier represents the initial connection from the browser until the full response was returned.</li><li>You will see that the JDBC call was taking the most time.</li><li>Click <strong>Drill Down</strong> to look at the code level view inside the Enquiry-Services Tier.</li></ol><p><a href=#R-image-c9b7af01e32ceb6c2dbb91962b697021 class=lightbox-link><img alt="BRUM Dash 8" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-08.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c9b7af01e32ceb6c2dbb91962b697021><img alt="BRUM Dash 8" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-08.png></a></p><p>Once you open the snapshot segment for the Enquiry-Services Tier, you can see that there were JDBC calls to the database that caused issues with the transaction.</p><ol><li>Click the <strong>JDBC</strong> link with the largest time to open the detail panel for the JDBC calls.</li><li>The detail panel for the JDBC exit calls shows the specific query that took most of the time.</li><li>You can see the full SQL statement along with the SQL parameter values</li></ol><p>You can read more about the Browser Snapshots <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-app-dashboard/browser-snapshots_1 rel=external><strong>here</strong></a> and <a href=https://help.splunk.com/en/appdynamics-saas/end-user-monitoring/25.7.0/end-user-monitoring/browser-monitoring/browser-app-dashboard/browser-snapshots_1/page-snapshots rel=external><strong>here</strong></a>.</p><p><a href=#R-image-5017bfb7ff7414ebad99cfe417254e16 class=lightbox-link><img alt="BRUM Dash 9" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-09.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5017bfb7ff7414ebad99cfe417254e16><img alt="BRUM Dash 9" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/4-brum-monitoring/5-monitor-and-troubleshoot-part-2/images/06-brum-dashboard-09.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=database-monitoring>Database Monitoring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=objectives>Objectives<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this Lab you learn about AppDynamics Database Visibility Monitoring.</p><p>When you have completed this lab, you will be able to:</p><ul><li>Download the AppDynamics Database Visibility Agent.</li><li>Install the AppDynamics Database Visibility Agent.</li><li>Configure a Database Collector in the Controller.</li><li>Monitor the health of your databases.</li><li>Troubleshoot database performance issues.</li></ul><h2 id=workshop-environment>Workshop Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The lab environment has two hosts:</p><ul><li>The first host runs the AppDynamics Controller and will be referred to from this point on as the Controller.</li><li>The second host runs the Supercar Trader application used in the labs. It will be the host where you will install the AppDynamics agents and will be referred to from this point on as the Application VM.</li></ul><h2 id=controller-vm>Controller VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will be using the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> for this workshop.</p><p><a href=#R-image-e2eca417948f93a2540fbc0e1343d56d class=lightbox-link><img alt=Controller class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/images/controller-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e2eca417948f93a2540fbc0e1343d56d><img alt=Controller class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/images/controller-vm.png></a></p><h2 id=application-vm>Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Supercar Trader is a Java-based Web Application</p><p>The purpose of Supercar-Trader collection is to generate dynamic traffic (business transactions) for AppDynamics Controller.</p><p><a href=#R-image-ad0b2fb70b267fa1a7af8177ae3d869f class=lightbox-link><img alt=Application class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/images/application-vm.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ad0b2fb70b267fa1a7af8177ae3d869f><img alt=Application class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/images/application-vm.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Database Monitoring</h1><article class=default><header class=headline></header><h1 id=lab-prerequisite>Lab Prerequisite</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<p>In this exercise you will complete the following tasks:</p><ul><li>Access your AppDynamics Controller from your web browser.</li><li>Verify transaction load to the application.</li><li>Restart the application and transaction load if needed.</li></ul><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=verify-transaction-load-to-the-application>Verify transaction load to the application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Check the application flow map:</p><ol><li>Select the <strong>last 1 hour</strong> time frame.</li><li>Verify you see the five different Tiers on the flow map.</li><li>Verify there has been consistent load over the last 1 hour.</li></ol><p><a href=#R-image-0132ad6a2a910d2c25307923ec74193f class=lightbox-link><img alt="Verify Load 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereque-appload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0132ad6a2a910d2c25307923ec74193f><img alt="Verify Load 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereque-appload.png></a></p><p>Check the list of business transactions:</p><ol start=4><li>Click the <strong>Business Transactions</strong> option on the left menu.</li><li>Verify you see the eleven business transactions seen below.</li><li>Verify that they have some number of calls during the last hour.</li></ol><p><strong>Note:</strong> If you don‚Äôt see the <strong>Calls</strong> column, you can click the <strong>View Options</strong> toolbar button to show that column.</p><p><a href=#R-image-b43ca4e94e5823e851867f98d3c260c7 class=lightbox-link><img alt="Verify Business transactions" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereq-bts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b43ca4e94e5823e851867f98d3c260c7><img alt="Verify Business transactions" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereq-bts.png></a></p><p>Check the agent status for the Nodes:</p><ol start=7><li>Click the <strong>Tiers & Nodes</strong> option on the left menu.</li><li>Click <strong>Grid View</strong>.</li><li>Verify that the <strong>App Agent Status</strong> for each Node is greater than 90% during the last hour.</li></ol><p><a href=#R-image-44c0fd96a3d4c5aa13db74411ddd22d2 class=lightbox-link><img alt="Verify Agents" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereq-tiersnodes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-44c0fd96a3d4c5aa13db74411ddd22d2><img alt="Verify Agents" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/01-prereq-tiersnodes.png></a></p><h2 id=restart-the-application-and-load-generation-if-needed>Restart the Application and Load Generation if Needed<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If any of the checks you performed in the previous steps could not be verified, SSH into your <strong>Application VM</strong> and follow these steps to restart the application and transaction load.</p><p>Use the following commands to stop the running instance of Apache Tomcat.<div class=tab-panel data-tab-group=R-tabs-62a6aa3ec7b3aed4366335c0e22b2d2d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-49c5ecd642aa65f4249dfd5334b3f14c aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-62a6aa3ec7b3aed4366335c0e22b2d2d","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-49c5ecd642aa65f4249dfd5334b3f14c data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./shutdown.sh</span></span></code></pre></div></div></div></div></div></p><p>Use the command below to check for remaining application JVMs still running.</p><div class=tab-panel data-tab-group=R-tabs-b7d07a6aedf4b77dbf8df9a6264b25db><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-12ba953d1b74bfd91bafe2b782639133 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b7d07a6aedf4b77dbf8df9a6264b25db","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-12ba953d1b74bfd91bafe2b782639133 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -ef <span class=p>|</span> grep Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>If you find any remaining application JVMs still running, kill the remaining JVMs using the command below.</p><div class=tab-panel data-tab-group=R-tabs-eb3c1668f445b6dd2bef2820a5fed96f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-30336c30cb6a6af312a54176e3a9526a aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-eb3c1668f445b6dd2bef2820a5fed96f","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-30336c30cb6a6af312a54176e3a9526a data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pkill -f Supercar-Trader</span></span></code></pre></div></div></div></div></div><p>Use the following commands to stop the load generation for the application. Wait until all processes are stopped.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./stop_load.sh</span></span></code></pre></div><p>Restart the Tomcat server:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /usr/local/apache/apache-tomcat-9/bin
</span></span><span class=line><span class=cl>./startup.sh</span></span></code></pre></div><p>Wait for two minutes and use the following command to ensure Apache Tomcat is running on port 8080.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo netstat -tulpn <span class=p>|</span> grep LISTEN</span></span></code></pre></div><p>You should see output similar to the following image showing that port 8080 is in use by Apache Tomcat.</p><p><a href=#R-image-87a44b9b34c374e4bc87168cf2ccbf19 class=lightbox-link><img alt="Restart App 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/restart-app-and-load-01.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-87a44b9b34c374e4bc87168cf2ccbf19><img alt="Restart App 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/restart-app-and-load-01.png></a></p><p>Use the following commands to start the load generation for the application.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/lab-artifacts/phantomjs
</span></span><span class=line><span class=cl>./start_load.sh</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-1a2301bdd06c9499eb1f4008254b33db class=lightbox-link><img alt="Restart App 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/restart-app-and-load-03.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1a2301bdd06c9499eb1f4008254b33db><img alt="Restart App 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/1-lab-prerequisites/images/restart-app-and-load-03.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=download-database-agent>Download Database Agent</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this exercise you will access your AppDynamics Controller from your web browser and download the Database Visibility agent from there.</p><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=download-the-database-agent>Download the Database Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Select the Home tab at the top left of the screen.</li><li>Select the <strong>Getting Started</strong> tab.</li><li>Click <strong>Getting Started Wizard</strong>.</li></ol><p><a href=#R-image-383270c2730dbdbfaea911816b7334ce class=lightbox-link><img alt="Getting Started" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-gettingstarted.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-383270c2730dbdbfaea911816b7334ce><img alt="Getting Started" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-gettingstarted.png></a></p><ol start=4><li>Click <strong>Databases</strong>.</li></ol><p><a href=#R-image-0ab529f325559e5a515bd1721867eea2 class=lightbox-link><img alt="Select Agent" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-db-agent.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ab529f325559e5a515bd1721867eea2><img alt="Select Agent" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-db-agent.png></a></p><h2 id=download-the-database-agent-1>Download the Database Agent.<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol start=5><li>Select <strong>MySQL</strong> from the Select Database Type dropdown menu.</li><li>Accept the defaults for the Controller connection.</li><li>Click <strong>Click Here to Download</strong>.</li></ol><p><a href=#R-image-781b2e7834331578cd8ac89b4978813d class=lightbox-link><img alt=Download class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-download.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-781b2e7834331578cd8ac89b4978813d><img alt=Download class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-download.png></a></p><p>Save the Database Visibility Agent file to your local file system.</p><p>Your browser should prompt you to save the agent file to your local file system, similar to the following image(depending on your OS).</p><p><a href=#R-image-47b14824eaf2a201eecb7f8216250b6d class=lightbox-link><img alt=Save class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-local-agent.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-47b14824eaf2a201eecb7f8216250b6d><img alt=Save class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/2-download-database-agent/images/04-download-local-agent.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=install-database-agent>Install Database Agent</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>The AppDynamics Database Agent is a standalone Java program that collects performance metrics about your database instances and database servers. You can deploy the Database Agent on any machine running Java 1.8 or higher. The machine must have network access to the AppDynamics Controller and the database instance that you want to be monitored.</p><p>A database agent running on a typical machine with 16 GB of memory can monitor about 25 databases. On larger machines, a database agent can monitor up to 200 databases.</p><p>In this exercise you will perform the following tasks:</p><ul><li>Upload the Database Visibility agent file to your Application VM</li><li>Unzip the file into a specific directory on the file system</li><li>Start the Database Visibility agent</li></ul><h2 id=upload-database-agent-to-the-application-vm>Upload Database Agent to The Application VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By this point you should have received the information regarding the EC2 instance that you will be using for this workshop. Ensure you have the IP address of your EC2 instance, username and password required to ssh into the instance .</p><p>On your local machine, open a terminal window and change into the directory where the database agent file was downloaded to. Upload the file into the EC2 instance using the following command. This may take some time to complete. If you are in a Windows OS, you may have to use a programm such as WinSCP.</p><ul><li>Update the IP address or public DNS for your instance.</li><li>Update the filename to match your exact version.</li></ul><div class=tab-panel data-tab-group=R-tabs-d2bf05c093ae83ced8518baf6c663c1f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a18413db8b9765ae0d72c6eadd90414a aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d2bf05c093ae83ced8518baf6c663c1f","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-32b42cb2faa73ef31e9be088fba3e80a aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-d2bf05c093ae83ced8518baf6c663c1f","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a18413db8b9765ae0d72c6eadd90414a data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/Downloads
</span></span><span class=line><span class=cl>scp -P <span class=m>2222</span> db-agent-*.zip splunk@i-0267b13f78f891b64.splunk.show:/home/splunk</span></span></code></pre></div></div></div><div id=R-tab-id-32b42cb2faa73ef31e9be088fba3e80a data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>splunk@i-0267b13f78f891b64.splunk.show<span class=err>&#39;</span>s password:
</span></span><span class=line><span class=cl>db-agent-25.7.0.5137.zip                                                                                                                               100%   70MB   5.6MB/s   00:12</span></span></code></pre></div></div></div></div></div><h2 id=install-the-database-agent>Install the Database Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create the directory structure where you will unzip the Database agent zip file.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics
</span></span><span class=line><span class=cl>mkdir dbagent</span></span></code></pre></div><p>Use the following commands to copy the Database agent zip file to the directory and unzip the file. The name of your Database agent file may be slightly different than the example below.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp ~/db-agent-*.zip /opt/appdynamics/dbagent/
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/dbagent
</span></span><span class=line><span class=cl>unzip db-agent-*.zip</span></span></code></pre></div><h2 id=start-the-database-visibility-agent>Start the Database Visibility agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following commands to start the Database agent and verify that it started.</p><p><strong>Append your inititals to the db agent name</strong>, this will be used in the following section. example: DBMon-Lab-Agent-IO</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/dbagent
</span></span><span class=line><span class=cl>nohup java -Dappdynamics.agent.maxMetrics<span class=o>=</span><span class=m>300000</span> -Ddbagent.name<span class=o>=</span>DBMon-Lab-Agent-YOURINITIALS -jar db-agent.jar <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>ps -ef <span class=p>|</span> grep db-agent</span></span></code></pre></div><p>You should see output similar to the following image.</p><p><a href=#R-image-68acf82a3a9a93a1f6d6c85f296cf7f4 class=lightbox-link><img alt=Output class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/3-install-database-agent/images/04-dbagent-install.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-68acf82a3a9a93a1f6d6c85f296cf7f4><img alt=Output class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/3-install-database-agent/images/04-dbagent-install.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-database-collector>Configure Database Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=configure-database-collector>Configure Database Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Database Agent Collector is the process that runs within the Database Agent to collect performance metrics about your database instances and database servers. One collector collects metrics for one database instance. Multiple collectors can run in one Database Agent. Once the Database Agent is connected to the Controller one or more collectors can be configured in the Controller.</p><p>In this exercise you will perform the following tasks:</p><ul><li>Access your AppDynamics Controller from your web browser</li><li>Configure a Database Collector in the Controller</li><li>Confirm the Database Collector is collecting data</li></ul><h2 id=login-to-the-controller>Login to the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Log into the <a href=https://se-lab.saas.appdynamics.com/controller/ rel=external>AppDynamics SE Lab Controller</a> using your Cisco credentials.</p><h2 id=configure-a-database-collector-in-the-controller>Configure a Database Collector in the Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use the following steps to change the settings for the query literals and navigate to the collectors configuration.</p><ol><li>Click the <strong>Databases</strong> tab on the left menu.</li><li>Click the <strong>Configuration</strong> tab on the bottom left.</li><li>Uncheck the checkbox for <strong>Remove literals from the queries</strong>.</li><li>Click the <strong>Collectors</strong> option.</li></ol><p><a href=#R-image-5630168cd36ba4faaf1d01370c9d6df6 class=lightbox-link><img alt=Configuration class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-configure-collector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5630168cd36ba4faaf1d01370c9d6df6><img alt=Configuration class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-configure-collector.png></a></p><p>Use the following steps to configure a new Database collector.</p><ol start=6><li>Click <strong>Add</strong> button.</li><li>Select <strong>MySQL</strong> for the database type.</li><li>Select <strong>DBMon-Lab-Agent</strong> for the database agent and enter the following parameters.</li><li>Collector Name: <strong>Supercar-MySQL-YOURINITIALS</strong></li><li>Hostname or IP Address: <strong>localhost</strong></li><li>Listener Port: <strong>3306</strong></li></ol><p><a href=#R-image-a36086108f6a7a0e5add150b3514befa class=lightbox-link><img alt=Configuration1 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-collector-config1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a36086108f6a7a0e5add150b3514befa><img alt=Configuration1 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-collector-config1.png></a></p><ol start=12><li>Username: <strong>root</strong></li><li>Password: <strong>Welcome1!</strong></li></ol><p><a href=#R-image-f9c83037db3bf69c3532d8a39b90f483 class=lightbox-link><img alt=Configuration2 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-username.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9c83037db3bf69c3532d8a39b90f483><img alt=Configuration2 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-username.png></a></p><ol start=14><li>Select the <strong>Monitor Operating System</strong> checkbox under the <strong>Advanced Options</strong></li><li>Select <strong>Linux</strong> as the operating system and enter the following parameters.</li><li>SSH Port: <strong>22</strong></li><li>Username: <strong>splunk</strong></li><li>Password: <strong>Password Provided by Your Instructor to SSH into the EC2 Instance</strong></li><li>Click <strong>OK</strong> to save the collector.</li></ol><p><a href=#R-image-dc5f82eec96ef358ba486256c26bdaa4 class=lightbox-link><img alt="Advance Options" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-advance-options.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dc5f82eec96ef358ba486256c26bdaa4><img alt="Advance Options" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/05-db-advance-options.png></a></p><h2 id=confirm-that-the-database-collector-is-collecting-data>Confirm that the Database Collector is collecting data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Wait for ten minutes to allow the collector to run and submit data, then follow these steps to verify that the database collector is connecting to the database and collecting database metrics.</p><ol><li>Click the <strong>Databases</strong> tab on the left menu</li><li>Search for the Collector created in the previous section: <strong>Supercar-MySQL-YOURINITIALS</strong></li><li>Ensure the status is green and there are no errors shown.</li><li>Click the Supercar-MySQL link to drill into the database.</li></ol><p><em>Note: It may take up to 18 minutes from the time you configure your collector to see the Top 10 SQL Wait States and any queries on the Queries tab.</em></p><p><a href=#R-image-990f8762e1a862c2aa9e06e26d9970d1 class=lightbox-link><img alt=Application class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/04-db-db-controller.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-990f8762e1a862c2aa9e06e26d9970d1><img alt=Application class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/04-db-db-controller.png></a></p><p><a href=#R-image-256a02a508c6dd07ba9d45d3d46d5c7a class=lightbox-link><img alt=Application class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/04-db-db-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-256a02a508c6dd07ba9d45d3d46d5c7a><img alt=Application class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/4-configure-database-collector/images/04-db-db-dashboard.png></a></p><p>You can read more about configuring Database Collectors <a href=https://docs.appdynamics.com/appd/24.x/latest/en/database-visibility/add-database-collectors rel=external>here</a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-and-troubleshoot---part-1>Monitor and Troubleshoot - Part 1</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=monitor-and-troubleshoot---part-1>Monitor and Troubleshoot - Part 1<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this exercise you will perform the following tasks:</p><ul><li>Review the Overall Database and Server Performance Dashboard</li><li>Review the Main Database Dashboard</li><li>Review the Reports in the Database Activity Window</li></ul><h2 id=review-the-overall-database-and-server-performance-dashboard>Review the Overall Database and Server Performance Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Overall Database and Server Performance Dashboard allows you to quickly see the health of each database at a glance.</p><ol><li>Filters: Enables you to explore the options to filter by health, load, time in database or type.</li><li>Actions: Exports the data on this window in a .csv formatted file.</li><li>View Options: Toggles the spark charts on and off.</li><li>View: Switches between the card and list view.</li><li>Sort: Displays the sorting options.</li><li>Supercar-MySQL: Drills into the main database dashboard.</li></ol><p><a href=#R-image-e6b1a7ff231563520f8d2456a1546c6a class=lightbox-link><img alt="Overall Database and Server Performance Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-collector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e6b1a7ff231563520f8d2456a1546c6a><img alt="Overall Database and Server Performance Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-collector.png></a></p><h2 id=review-the-main-database-dashboard>Review the Main Database Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The main database dashboard shows you key insights for the database including:</p><ul><li>The health of the server that is running the database.</li><li>The total number of calls during the specified time period.</li><li>The number of calls for any point in time.</li><li>The total time spent executing SQL statements during the specified time period.</li><li>The top ten query wait states.</li><li>The average number of connections.</li><li>The database type or vendor.</li><li>Explore the features of the dashboard.</li></ul><ol><li>Click the health status circle to see details of the server health:</li></ol><ul><li>Green: server is healthy.</li><li>Yellow: server with warning-level violations.</li><li>Red: server with critical-level violations.</li></ul><ol start=2><li>The database type or vendor will always be seen here.</li><li>Observe the total time spent executing SQL statements during the specified time period.</li><li>Observe the total number of executions during the specified time period.</li><li>Hover over the time series on the chart to see the detail of the recorded metrics.</li></ol><p>Click the orange circle at the top of the data point to view the time comparison report, which shows query run times and wait states 15 minutes before and 15 minutes after the selected time.</p><ol start=6><li>Left-click and hold down your mouse button while dragging from left to right to highlight a spike seen in the chart.</li><li>Click the configuration button to exclude unwanted wait states from the top ten.</li><li>Hover over the labels for each wait state to see a more detailed description.</li><li>Observe the average number of active connections actively running a query during the selected time period.</li></ol><p><a href=#R-image-38cf42d0fd7d7053340b9815c0ba997f class=lightbox-link><img alt="Main Database Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-38cf42d0fd7d7053340b9815c0ba997f><img alt="Main Database Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-overview.png></a></p><p>To view the OS metrics of the DB server for the time period that you have selected:</p><ol><li>Scroll to the bottom of the dashboard using the scroll bar on the right</li><li>CPU</li><li>Memory</li><li>Disk IO</li><li>Network IO</li></ol><p><a href=#R-image-e943bb2cfae7331b32075cf7abe5101b class=lightbox-link><img alt="OS Metrics" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-os-metrics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e943bb2cfae7331b32075cf7abe5101b><img alt="OS Metrics" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-os-metrics.png></a></p><h2 id=review-the-reports-in-the-database-activity-window>Review the Reports in the Database Activity Window<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There are up to nine different reports available in Database Visibility on the Database Activity Window. The reports available depend on the database platform being monitored. In this exercise we will review three of the most common reports.</p><ul><li>Wait State Report</li><li>Top Activity Report</li><li>Query Wait State Report</li></ul><h2 id=wait-state-report>Wait State Report<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This report displays time-series data on Wait Events (states) within the database. Each distinct wait is color-coded, and the Y-axis displays time in seconds. This report also displays data in a table and highlights the time spent in each wait state for each SQL statement.</p><p>The wait states consuming the most time may point to performance bottlenecks. For example, db file sequential reads may be caused by segment header contention on indexes or by disk contention.</p><p><a href=#R-image-b5a9c6ae66af3fadd92623eec9a357ef class=lightbox-link><img alt="Wait State" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-waitstate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5a9c6ae66af3fadd92623eec9a357ef><img alt="Wait State" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-waitstate.png></a></p><h2 id=top-activity-report>Top Activity Report<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This report displays the top time in database SQL statements in a time-series view. This report also displays data in a table and highlights the time spent in the database for each of 10 top SQL statements.</p><p>Use this report to see which SQL statements are using the most database time. This helps to determine the impact of specific SQL statements on overall system performance allowing you to focus your tuning efforts on the statements that have the most impact on database performance.</p><p><a href=#R-image-a315c65cb15dac292376014e411d126a class=lightbox-link><img alt="Top Activity Report" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-top-activity.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a315c65cb15dac292376014e411d126a><img alt="Top Activity Report" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-top-activity.png></a></p><h2 id=query-wait-state-report>Query Wait State Report<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This report displays the wait times for the top (10, 50, 100, 200) queries. This report also displays data in a table and highlights the time each query is spending in different wait states. Use the columns to sort the queries by the different wait states.</p><p>You can read more about the Reports in the Database Activity Window <a href=https://help.splunk.com/en/appdynamics-on-premises/database-visibility/25.4.0/monitor-databases-and-database-servers/monitor-database-performance/database-activity-window/features-of-the-database-activity-windows rel=external>here</a></p><p><a href=#R-image-274d3e27eec84a9c8f502cb784287c88 class=lightbox-link><img alt="Query Wait State Report" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-query-waitstate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-274d3e27eec84a9c8f502cb784287c88><img alt="Query Wait State Report" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/5-monitor-and-troubleshoot-option-1/images/04-db-query-waitstate.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-and-troubleshoot---part-2>Monitor and Troubleshoot - Part 2</h1><h2 id=review-the-queries-dashboard>Review the Queries Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Queries window displays the SQL statements and stored procedures that consume the most time in the database. You can compare the query weights to other metrics such as SQL wait times to determine SQL that requires tuning.</p><ol><li><strong>Queries</strong> tab: Displays the queries window.</li><li><strong>Top Queries</strong> dropdown: Displays the top 5, 10, 100 or 200 queries.</li><li><strong>Filter by Wait States</strong>: Enables you to choose wait states to filter the Query list.</li><li><strong>Group Similar</strong>: Groups together queries with the same syntax.</li><li>Click on the query that shows the largest <strong>Weight (%)</strong> used.</li><li><strong>View Query Details</strong>: Drills into the query details.</li></ol><p><a href=#R-image-86c3276b007a4e67f855574b7bc97d41 class=lightbox-link><img alt="Queries Dashboard" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-86c3276b007a4e67f855574b7bc97d41><img alt="Queries Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-overview.png></a></p><h2 id=review-the-details-of-an-expensive-query>Review the details of an expensive query<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once you have identified the statements on the Database Queries window that are spending the most amount of time in the database, you can dig down deeper for details that can help you tune those SQL statements. The database instance Query Details window displays details about the query selected on the Database Queries window.</p><ol><li><strong>Resource consumption over time</strong>: Displays the amount of time the query spent in the database using resources, the number of executions, and the amount of CPU time consumed.</li><li><strong>Wait states</strong>: The activities that contribute to the time it takes the database to service the selected SQL statement. The wait states consuming the most time may point to performance bottlenecks.</li><li><strong>Components Executing Similar Queries</strong>: Displays the Nodes that execute queries similar to this query.</li><li><strong>Business Transactions Executing Similar Queries</strong>: Displays the Java business transactions that execute queries similar to this query.</li></ol><p><a href=#R-image-abb0a56bfc9436d80225181762875d9c class=lightbox-link><img alt="Expensive Query Details" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-abb0a56bfc9436d80225181762875d9c><img alt="Expensive Query Details" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details.png></a></p><ol><li>Use the outer scroll bar on the right to scroll down.</li><li><strong>Clients</strong>: Displays the machines that executed the selected SQL statement and the percentage of the total time required to execute the statement performed by each machine.</li><li><strong>Sessions</strong>: Session of each database instance usage</li><li><strong>Query Active in Database</strong>: Displays the schemas that have been accessed by this SQL.</li><li><strong>Users</strong>: Displays the users that executed this query.</li><li><strong>Query Hashcode</strong>: Displays the unique ID for the query that allows the database server to more quickly locate this SQL statement in the cache.</li><li><strong>Query</strong>: Displays the entire syntax of the selected SQL statement. You can click the pencil icon in the top right corner of the Query card to edit the query name so that it is easy to identify.</li><li><strong>Execution Plan</strong>: Displays the the query execution plan window.</li></ol><p><a href=#R-image-c5ae1783d3f146b531b08a8b9a4080f3 class=lightbox-link><img alt="Expensive Query Details2" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c5ae1783d3f146b531b08a8b9a4080f3><img alt="Expensive Query Details2" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-queries-details2.png></a></p><h2 id=troubleshoot-an-expensive-query>Troubleshoot an expensive query<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Database Query Execution Plan window can help you to determine the most efficient execution plan for your queries. Once you‚Äôve discovered a potentially problematic query, you can run the EXPLAIN PLAN statement to check the execution plan that the database created.</p><p>A query‚Äôs execution plan reveals whether the query is optimizing its use of indexes and executing efficiently. This information is useful for troubleshooting queries that are executing slowly.</p><ol><li>Click on the <strong>Execution Plan</strong> tab</li><li>Notice that the join type in the <strong>Type</strong> column is ALL for each table.</li><li>Hover over one of the join types to see the description for the join type.</li><li>Examine the entries in the <strong>Extras</strong> column.</li><li>Hover over each of the entries to see the description for the entry.</li></ol><p><a href=#R-image-02151fa39d14bda75a886d340deb5941 class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-execution-plan.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-02151fa39d14bda75a886d340deb5941><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-execution-plan.png></a></p><p>Let‚Äôs investigate the indexes on the table using the Obect Browser next.</p><ol start=5><li>Click on the <strong>Object Browser</strong> option to view details of the schema for the tables</li><li>Click the <strong>Database</strong> option.</li><li>Click on the <strong>supercars</strong> schema to expand the list of tables.</li><li>Click on the <strong>CARS</strong> table to see the details of the table.</li><li>You can see that the CAR_ID column is defined as the primary key</li></ol><p><a href=#R-image-b21735eb698b1dfab4e72cfd9b31a4cc class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-object-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b21735eb698b1dfab4e72cfd9b31a4cc><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-object-browser.png></a></p><ol start=10><li>Use the outer scroll bar to scroll down the page.</li><li>Notice the primary key index defined in the table.</li></ol><p><a href=#R-image-804d8e79150a7c9c60fb77ca6b338d23 class=lightbox-link><img alt="Troubleshoot Car Index" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-cars-index.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-804d8e79150a7c9c60fb77ca6b338d23><img alt="Troubleshoot Car Index" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-cars-index.png></a></p><ol start=12><li>Click on the <strong>MANUFACTURER</strong> table to view its details.</li><li>Notice the <strong>MANUFACTURER_ID</strong> column is not defined as a primary key.</li><li>Scroll down the page to see there are no indexes defined for the table.</li></ol><p><a href=#R-image-0bb1e81c8f45ba635cebe483189fbde7 class=lightbox-link><img alt="Troubleshoot Expensive Query" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-man-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0bb1e81c8f45ba635cebe483189fbde7><img alt="Troubleshoot Expensive Query" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/ninja-workshops/15-appd-workshop/5-database-monitoring/6-monitor-and-troubleshoot-option-2/images/04-db-man-table.png></a></p><p>The MANUFACTURER_ID column needs an index created for it to improve the performance of any queries on the table. If you analyzed a different query the underlying issue may be different but the most common issues shown in this lab come because the queries are either executing a join with the MANUFACTURER table or querying that table directly.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=smartagent-deployment>SmartAgent Deployment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>AppDynamics <strong>Smart Agent</strong> is a lightweight, intelligent agent that provides comprehensive monitoring capabilities for your infrastructure. This section covers four different deployment approaches, allowing you to choose the method that best fits your organization&rsquo;s needs and existing tooling.</p><p><a href=#R-image-cb169e456eccdeef6fd86b6de9a2a6e1 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb169e456eccdeef6fd86b6de9a2a6e1><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-is-smart-agent>What is Smart Agent?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Smart Agent is AppDynamics&rsquo; next-generation monitoring agent that provides:</p><ul><li><strong>Unified Monitoring</strong>: Single agent for infrastructure, applications, and services</li><li><strong>Lightweight Design</strong>: Minimal resource footprint</li><li><strong>Auto-Discovery</strong>: Automatically discovers and monitors applications</li><li><strong>Native Instrumentation</strong>: Deep visibility into application performance</li><li><strong>Flexible Deployment</strong>: Multiple installation and management options</li></ul><h2 id=deployment-approaches>Deployment Approaches<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This section covers four distinct approaches to deploying Smart Agent at scale:</p><h3 id=1-remote-installation-smartagentctl>1. Remote Installation (smartagentctl)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The most direct approach using the <code>smartagentctl</code> CLI tool to deploy via SSH.</p><p><strong>Best for:</strong></p><ul><li>Quick deployments to a moderate number of hosts</li><li>Environments without existing CI/CD infrastructure</li><li>Testing and proof-of-concept scenarios</li><li>Direct control over deployment process</li></ul><p><strong>Key Features:</strong></p><ul><li>Direct SSH-based deployment</li><li>Simple YAML configuration</li><li>No additional tooling required</li><li>Concurrent execution support</li></ul><h3 id=2-jenkins-automation>2. Jenkins Automation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Enterprise-grade deployment using Jenkins pipelines for complete lifecycle management.</p><p><strong>Best for:</strong></p><ul><li>Organizations already using Jenkins</li><li>Complex deployment workflows</li><li>Environments requiring approval gates</li><li>Integration with existing CI/CD pipelines</li></ul><p><strong>Key Features:</strong></p><ul><li>Parameterized pipelines</li><li>Batch processing for thousands of hosts</li><li>Complete lifecycle management</li><li>Centralized logging and reporting</li></ul><h3 id=3-github-actions-automation>3. GitHub Actions Automation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Modern CI/CD approach using GitHub Actions workflows with self-hosted runners.</p><p><strong>Best for:</strong></p><ul><li>Teams using GitHub for version control</li><li>Cloud-native environments</li><li>GitOps workflows</li><li>Distributed teams preferring web-based management</li></ul><p><strong>Key Features:</strong></p><ul><li>11 specialized workflows</li><li>Self-hosted runner in your VPC</li><li>GitHub secrets integration</li><li>Automatic batching for scalability</li></ul><h3 id=4-ansible-automation>4. Ansible Automation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configuration management approach using Ansible playbooks for infrastructure as code.</p><p><strong>Best for:</strong></p><ul><li>Teams using Ansible for configuration management</li><li>Declarative infrastructure definition</li><li>Consistent state management across fleets</li></ul><p><strong>Key Features:</strong></p><ul><li>Infrastructure as Code (IaC)</li><li>Idempotent playbooks</li><li>Inventory management</li><li>Role-based organization</li></ul><h2 id=choosing-the-right-approach>Choosing the Right Approach<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><table><thead><tr><th>Factor</th><th>Remote Installation</th><th>Jenkins</th><th>GitHub Actions</th><th>Ansible</th></tr></thead><tbody><tr><td><strong>Setup Complexity</strong></td><td>Low</td><td>Medium</td><td>Medium</td><td>Low</td></tr><tr><td><strong>Scalability</strong></td><td>Good (100s of hosts)</td><td>Excellent (1000s)</td><td>Excellent (1000s)</td><td>Excellent (1000s)</td></tr><tr><td><strong>Prerequisites</strong></td><td>SSH access only</td><td>Jenkins server</td><td>GitHub account</td><td>Ansible Control Node</td></tr><tr><td><strong>Learning Curve</strong></td><td>Minimal</td><td>Moderate</td><td>Moderate</td><td>Low/Moderate</td></tr><tr><td><strong>Automation Level</strong></td><td>Manual execution</td><td>Full automation</td><td>Full automation</td><td>Full automation</td></tr><tr><td><strong>Best Use Case</strong></td><td>Quick deployments</td><td>Enterprise CI/CD</td><td>Modern DevOps</td><td>Infrastructure as Code</td></tr></tbody></table><h2 id=common-features-across-all-approaches>Common Features Across All Approaches<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Regardless of which deployment method you choose, all approaches provide:</p><ul><li>‚úÖ <strong>SSH-based deployment</strong> to remote hosts</li><li>‚úÖ <strong>Concurrent execution</strong> for faster deployment</li><li>‚úÖ <strong>Complete lifecycle management</strong> (install, start, stop, uninstall)</li><li>‚úÖ <strong>Configuration management</strong> for controller settings</li><li>‚úÖ <strong>Error handling</strong> and logging</li><li>‚úÖ <strong>Scalability</strong> to hundreds or thousands of hosts</li></ul><h2 id=workshop-structure>Workshop Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Each deployment approach has its own dedicated section:</p><ol><li><strong>Remote Installation</strong> - Direct CLI-based deployment</li><li><strong>Jenkins Automation</strong> - Pipeline-based enterprise deployment</li><li><strong>GitHub Actions</strong> - Modern workflow-based deployment</li><li><strong>Ansible Automation</strong> - Infrastructure as Code deployment</li></ol><p>You can follow one or all approaches depending on your needs.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you&rsquo;re new to Smart Agent deployment, we recommend starting with the <strong>Remote Installation</strong> approach to understand the basics before moving to more automated solutions.</p></div></details><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before proceeding with any deployment approach, ensure you have:</p><ul><li>AppDynamics account with controller access</li><li>Account name and access key</li><li>Target hosts with SSH access</li><li>Network connectivity from hosts to AppDynamics Controller</li><li>Appropriate permissions on target hosts</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Choose your preferred deployment approach and proceed to that section:</p><ul><li><strong>Start Simple</strong>: Begin with Remote Installation to learn the fundamentals</li><li><strong>Scale with Jenkins</strong>: Move to Jenkins for enterprise-grade automation</li><li><strong>Modernize with GitHub</strong>: Adopt GitHub Actions for cloud-native workflows</li><li><strong>Automate with Ansible</strong>: Use Ansible for declarative configuration management</li></ul><p>Each section provides complete, hands-on guidance for deploying Smart Agent at scale!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of SmartAgent Deployment</h1><article class=default><header class=headline></header><h1 id=remote-installation>Remote Installation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop demonstrates how to use the <strong>smartagentctl</strong> command-line tool to install and manage <strong>AppDynamics Smart Agent</strong> on multiple remote hosts simultaneously. This approach is ideal for quickly deploying Smart Agent to a fleet of servers using SSH-based remote execution, without the need for additional automation tools like Jenkins or GitHub Actions.</p><p><a href=#R-image-f608684b1b8980283b0d49790852e869 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f608684b1b8980283b0d49790852e869><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Configure remote hosts</strong> using the <code>remote.yaml</code> file</li><li><strong>Configure Smart Agent settings</strong> using <code>config.ini</code></li><li><strong>Deploy Smart Agent</strong> to multiple hosts simultaneously via SSH</li><li><strong>Start and stop agents</strong> remotely across your infrastructure</li><li><strong>Check agent status</strong> on all remote hosts</li><li><strong>Troubleshoot</strong> common installation and connectivity issues</li></ul><h2 id=key-features>Key Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>üöÄ <strong>Direct SSH Deployment</strong> - No additional automation platform required</li><li>üîÑ <strong>Complete Lifecycle Management</strong> - Install, start, stop, and uninstall agents</li><li>üèóÔ∏è <strong>Configuration as Code</strong> - YAML and INI-based configuration files</li><li>üîê <strong>Secure</strong> - SSH key-based authentication</li><li>üìà <strong>Concurrent Execution</strong> - Configurable concurrency for parallel deployment</li><li>üéõÔ∏è <strong>Simple CLI</strong> - Easy-to-use smartagentctl command-line interface</li></ul><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Remote Installation Architecture                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  Control Node (smartagentctl) ‚îÄ‚îÄ‚ñ∂ SSH Connection               ‚îÇ
‚îÇ                                          ‚îÇ                       ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 1 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 2 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 3 (SSH)      ‚îÇ
‚îÇ                                          ‚îî‚îÄ‚îÄ‚ñ∂ Host N (SSH)      ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  All hosts send metrics ‚îÄ‚îÄ‚ñ∂ AppDynamics Controller             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h2 id=workshop-components>Workshop Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop includes:</p><ol><li><strong>Prerequisites</strong> - Required access, tools, and permissions</li><li><strong>Configuration</strong> - Setting up <code>config.ini</code> and <code>remote.yaml</code></li><li><strong>Installation & Startup</strong> - Deploying and starting Smart Agent on remote hosts</li><li><strong>Troubleshooting</strong> - Common issues and solutions</li></ol><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Control node with smartagentctl installed</li><li>SSH access to all remote hosts</li><li>SSH private key configured for authentication</li><li>Sudo privileges on the control node</li><li>Remote hosts with SSH enabled</li><li>AppDynamics account credentials</li></ul><h2 id=available-commands>Available Commands<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>smartagentctl</code> tool supports the following remote operations:</p><ul><li><code>start --remote</code> - Install and start Smart Agent on remote hosts</li><li><code>stop --remote</code> - Stop Smart Agent on remote hosts</li><li><code>status --remote</code> - Check Smart Agent status on remote hosts</li><li><code>install --remote</code> - Install Smart Agent without starting</li><li><code>uninstall --remote</code> - Remove Smart Agent from remote hosts</li><li><code>--service</code> flag - Install as systemd service</li></ul><p>All commands support the <code>--verbose</code> flag for detailed logging.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Remote Installation</h1><article class=default><header class=headline></header><h1 id=1-prerequisites>1. Prerequisites</h1><p>Before you begin installing Smart Agent on remote hosts, ensure you have the following prerequisites in place:</p><h2 id=required-access>Required Access<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><strong>SSH Access</strong>: You must have SSH access to all remote hosts where you plan to install Smart Agent</li><li><strong>SSH Private Key</strong>: A configured SSH private key for authentication</li><li><strong>Sudo Privileges</strong>: The control node user needs sudo privileges to run smartagentctl</li><li><strong>Remote SSH</strong>: Remote hosts must have SSH enabled and accessible</li></ul><h2 id=directory-structure>Directory Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Smart Agent installation directory should be set up on your control node:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><p>The directory contains:</p><ul><li><code>smartagentctl</code> - Command-line utility to manage SmartAgent</li><li><code>smartagent</code> - The SmartAgent binary</li><li><code>config.ini</code> - Main configuration file</li><li><code>remote.yaml</code> - Remote hosts configuration file</li><li><code>conf/</code> - Additional configuration files</li><li><code>lib/</code> - Required libraries</li></ul><h2 id=appdynamics-account-information>AppDynamics Account Information<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You&rsquo;ll need the following information from your AppDynamics account:</p><ul><li><strong>Controller URL</strong>: Your AppDynamics SaaS controller endpoint (e.g., <code>fso-tme.saas.appdynamics.com</code>)</li><li><strong>Account Name</strong>: Your AppDynamics account name</li><li><strong>Account Access Key</strong>: Your AppDynamics account access key</li><li><strong>Controller Port</strong>: Usually 443 for HTTPS connections</li></ul><h2 id=target-host-requirements>Target Host Requirements<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your remote hosts should meet these requirements:</p><ul><li><strong>Operating System</strong>: Ubuntu/Linux-based systems</li><li><strong>SSH Server</strong>: SSH daemon running and accepting connections</li><li><strong>User Account</strong>: User account with appropriate permissions (typically root)</li><li><strong>Network Access</strong>: Ability to reach the AppDynamics Controller</li><li><strong>Disk Space</strong>: Sufficient space for Smart Agent installation (typically under 100MB)</li></ul><h2 id=security-considerations>Security Considerations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before proceeding, review these security best practices:</p><ol><li><strong>SSH Keys</strong>: Use strong SSH keys (RSA 4096-bit or ED25519)</li><li><strong>Access Keys</strong>: Store AccountAccessKey securely</li><li><strong>Host Key Validation</strong>: For production, plan to validate host keys</li><li><strong>SSL/TLS</strong>: Always use SSL/TLS for controller communication</li><li><strong>Log Files</strong>: Restrict access to log files containing sensitive information</li></ol><h2 id=verifying-prerequisites>Verifying Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=check-ssh-connectivity>Check SSH Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Test SSH connectivity to your remote hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -i /home/ubuntu/.ssh/id_rsa ubuntu@&lt;remote-host-ip&gt;</span></span></code></pre></div><h3 id=verify-ssh-key-permissions>Verify SSH Key Permissions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Ensure proper permissions on your SSH key:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> /home/ubuntu/.ssh/id_rsa</span></span></code></pre></div><h3 id=check-network-connectivity>Check Network Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Verify that remote hosts can reach each other and the internet:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping &lt;remote-host-ip&gt;</span></span></code></pre></div><h3 id=verify-sudo-access>Verify Sudo Access<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Ensure you have sudo privileges:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo -v</span></span></code></pre></div><p>If all prerequisites are met, you&rsquo;re ready to proceed with configuration!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-configuration>2. Configuration</h1><p>Smart Agent remote installation requires two key configuration files: <code>config.ini</code> for Smart Agent settings and <code>remote.yaml</code> for defining remote hosts and connection parameters.</p><h2 id=configuration-files-overview>Configuration Files Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Both configuration files should be located in the Smart Agent installation directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><p>The two files you&rsquo;ll configure:</p><ul><li><code>config.ini</code> - Smart Agent configuration deployed to all remote hosts</li><li><code>remote.yaml</code> - Remote hosts and SSH connection settings</li></ul><h2 id=configini---smart-agent-configuration>config.ini - Smart Agent Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>config.ini</code> file contains the main Smart Agent configuration that will be deployed to all remote hosts.</p><p><strong>Location:</strong> <code>/home/ubuntu/appdsm/config.ini</code></p><h3 id=controller-configuration>Controller Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configure your AppDynamics Controller connection:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>ControllerURL</span>    <span class=o>=</span> <span class=s>fso-tme.saas.appdynamics.com</span>
</span></span><span class=line><span class=cl><span class=na>ControllerPort</span>   <span class=o>=</span> <span class=s>443</span>
</span></span><span class=line><span class=cl><span class=na>FMServicePort</span>    <span class=o>=</span> <span class=s>443</span>
</span></span><span class=line><span class=cl><span class=na>AccountAccessKey</span> <span class=o>=</span> <span class=s>your-access-key-here</span>
</span></span><span class=line><span class=cl><span class=na>AccountName</span>      <span class=o>=</span> <span class=s>your-account-name</span>
</span></span><span class=line><span class=cl><span class=na>EnableSSL</span>        <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><p><strong>Key Parameters:</strong></p><ul><li><code>ControllerURL</code>: Your AppDynamics SaaS controller endpoint</li><li><code>ControllerPort</code>: HTTPS port for the controller (default: 443)</li><li><code>FMServicePort</code>: Flow Monitoring service port</li><li><code>AccountAccessKey</code>: Your AppDynamics account access key</li><li><code>AccountName</code>: Your AppDynamics account name</li><li><code>EnableSSL</code>: Enable SSL/TLS encryption (should be <code>true</code> for production)</li></ul><h3 id=common-configuration>Common Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Define the agent&rsquo;s identity and polling behavior:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[CommonConfig]</span>
</span></span><span class=line><span class=cl><span class=na>AgentName</span>            <span class=o>=</span> <span class=s>smartagent</span>
</span></span><span class=line><span class=cl><span class=na>PollingIntervalInSec</span> <span class=o>=</span> <span class=s>300</span>
</span></span><span class=line><span class=cl><span class=na>Tags</span>                 <span class=o>=</span> <span class=s>environment:production,region:us-east</span>
</span></span><span class=line><span class=cl><span class=na>ServiceName</span>          <span class=o>=</span> <span class=s>my-application</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>AgentName</code>: Name identifier for the agent</li><li><code>PollingIntervalInSec</code>: How often the agent polls for data (in seconds)</li><li><code>Tags</code>: Custom tags for categorizing agents (comma-separated)</li><li><code>ServiceName</code>: Optional service name for logical grouping</li></ul><h3 id=telemetry-settings>Telemetry Settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configure logging and profiling:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Telemetry]</span>
</span></span><span class=line><span class=cl><span class=na>LogLevel</span>  <span class=o>=</span> <span class=s>DEBUG</span>
</span></span><span class=line><span class=cl><span class=na>LogFile</span>   <span class=o>=</span> <span class=s>/opt/appdynamics/appdsmartagent/log.log</span>
</span></span><span class=line><span class=cl><span class=na>Profiling</span> <span class=o>=</span> <span class=s>false</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>LogLevel</code>: Logging verbosity (<code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>)</li><li><code>LogFile</code>: Path where logs will be written on remote hosts</li><li><code>Profiling</code>: Enable performance profiling (<code>true</code>/<code>false</code>)</li></ul><h3 id=tls-client-settings>TLS Client Settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configure proxy and TLS settings:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[TLSClientSetting]</span>
</span></span><span class=line><span class=cl><span class=na>Insecure</span>        <span class=o>=</span> <span class=s>false</span>
</span></span><span class=line><span class=cl><span class=na>AgentHTTPProxy</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AgentHTTPSProxy</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AgentNoProxy</span>    <span class=o>=</span> </span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>Insecure</code>: Skip TLS certificate verification (not recommended for production)</li><li><code>AgentHTTPProxy</code>: HTTP proxy server URL (if required)</li><li><code>AgentHTTPSProxy</code>: HTTPS proxy server URL (if required)</li><li><code>AgentNoProxy</code>: Comma-separated list of hosts to bypass proxy</li></ul><h3 id=auto-discovery>Auto Discovery<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configure automatic application discovery:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[AutoDiscovery]</span>
</span></span><span class=line><span class=cl><span class=na>RunAutoDiscovery</span>          <span class=o>=</span> <span class=s>false</span>
</span></span><span class=line><span class=cl><span class=na>ExcludeLabels</span>             <span class=o>=</span> <span class=s>process.cpu.usage,process.memory.usage</span>
</span></span><span class=line><span class=cl><span class=na>ExcludeProcesses</span>          <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>ExcludeUsers</span>              <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>AutoDiscoveryTimeInterval</span> <span class=o>=</span> <span class=s>4h</span>
</span></span><span class=line><span class=cl><span class=na>AutoInstall</span>               <span class=o>=</span> <span class=s>false</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>RunAutoDiscovery</code>: Automatically discover applications (<code>true</code>/<code>false</code>)</li><li><code>ExcludeLabels</code>: Metrics to exclude from discovery</li><li><code>ExcludeProcesses</code>: Process names to exclude from monitoring</li><li><code>ExcludeUsers</code>: User accounts to exclude from monitoring</li><li><code>AutoDiscoveryTimeInterval</code>: How often to run discovery (e.g., <code>4h</code>, <code>30m</code>)</li><li><code>AutoInstall</code>: Automatically install discovered applications</li></ul><h3 id=task-configuration>Task Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Configure native instrumentation:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[TaskConfig]</span>
</span></span><span class=line><span class=cl><span class=na>NativeEnable</span>        <span class=o>=</span> <span class=s>true</span>
</span></span><span class=line><span class=cl><span class=na>UserPortalUserName</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>UserPortalPassword</span>  <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=na>UserPortalAuth</span>      <span class=o>=</span> <span class=s>none</span>
</span></span><span class=line><span class=cl><span class=na>AutoUpdateLdPreload</span> <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><p><strong>Parameters:</strong></p><ul><li><code>NativeEnable</code>: Enable native instrumentation</li><li><code>AutoUpdateLdPreload</code>: Automatically update LD_PRELOAD settings</li></ul><h2 id=remoteyaml---remote-hosts-configuration>remote.yaml - Remote Hosts Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>remote.yaml</code> file defines the remote hosts where Smart Agent will be installed and the connection parameters.</p><p><strong>Location:</strong> <code>/home/ubuntu/appdsm/remote.yaml</code></p><h3 id=example-configuration>Example Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>remote_dir</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/opt/appdynamics/appdsmartagent&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ssh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>private_key_path</span><span class=p>:</span><span class=w> </span><span class=l>/home/ubuntu/.ssh/id_rsa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ignore_host_key_validation</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>known_hosts_path</span><span class=p>:</span><span class=w> </span><span class=l>/home/ubuntu/.ssh/known_hosts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.243&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.48&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.142&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.5&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span></span></span></code></pre></div><h3 id=global-settings>Global Settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>max_concurrency:</strong> Maximum number of hosts to process simultaneously</p><ul><li>Default: <code>4</code></li><li>Increase for faster deployment to many hosts</li><li>Decrease if experiencing network or resource constraints</li></ul><p><strong>remote_dir:</strong> Installation directory on remote hosts</p><ul><li>Default: <code>/opt/appdynamics/appdsmartagent</code></li><li>Must be an absolute path</li><li>User must have write permissions</li></ul><h3 id=protocol-configuration>Protocol Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>type:</strong> Connection protocol</p><ul><li>Value: <code>ssh</code></li></ul><p><strong>auth.username:</strong> SSH username for authentication</p><ul><li>Example: <code>ubuntu</code>, <code>ec2-user</code>, <code>centos</code></li><li>Must match the user configured on remote hosts</li></ul><p><strong>auth.private_key_path:</strong> Path to SSH private key</p><ul><li>Must be an absolute path</li><li>Key must be accessible and have proper permissions (600)</li></ul><p><strong>auth.privileged:</strong> Run agent with elevated privileges</p><ul><li><code>true</code>: Install as root/systemd service</li><li><code>false</code>: Install as a user process</li><li>Recommended: <code>true</code> for production deployments</li></ul><p><strong>auth.ignore_host_key_validation:</strong> Skip SSH host key verification</p><ul><li><code>true</code>: Skip verification (useful for testing)</li><li><code>false</code>: Validate host keys (recommended for production)</li></ul><p><strong>auth.known_hosts_path:</strong> Path to SSH known_hosts file</p><ul><li>Default: <code>/home/ubuntu/.ssh/known_hosts</code></li><li>Used when host key validation is enabled</li></ul><h3 id=host-definitions>Host Definitions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Each host entry requires:</p><p><strong>host:</strong> IP address or hostname of the remote machine</p><ul><li>Can be IPv4, IPv6, or hostname</li><li>Must be reachable from the control node</li></ul><p><strong>port:</strong> SSH port</p><ul><li>Default: <code>22</code></li><li>Change if SSH is running on a non-standard port</li></ul><p><strong>user:</strong> User account that will own the Smart Agent process</p><ul><li>Typically <code>root</code> for system-wide installation</li><li>Can be a regular user for user-specific installation</li></ul><p><strong>group:</strong> Group that will own the Smart Agent process</p><ul><li>Typically matches the user (e.g., <code>root</code>)</li></ul><h3 id=adding-more-hosts>Adding More Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To add additional remote hosts, append to the <code>hosts</code> list:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.0.1.10&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.0.1.11&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>root</span></span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Tip</summary><div class=box-content><p>You can add as many hosts as needed. The <code>max_concurrency</code> setting controls how many are processed in parallel.</p></div></details><h2 id=verifying-configuration>Verifying Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before proceeding with installation, verify your configuration files:</p><h3 id=review-remoteyaml>Review remote.yaml<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/remote.yaml</span></span></code></pre></div><p>Check that:</p><ul><li>All host IP addresses are correct</li><li>SSH key path is valid</li><li>Remote directory path is appropriate</li></ul><h3 id=review-configini>Review config.ini<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/config.ini</span></span></code></pre></div><p>Verify that:</p><ul><li>Controller URL and account information are correct</li><li>Log file paths are valid</li><li>Settings match your environment requirements</li></ul><h3 id=validate-yaml-syntax>Validate YAML Syntax<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Ensure your YAML file is properly formatted:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -c <span class=s2>&#34;import yaml; yaml.safe_load(open(&#39;/home/ubuntu/appdsm/remote.yaml&#39;))&#34;</span></span></span></code></pre></div><p>If the command completes without errors, your YAML syntax is valid.</p><p>Once your configuration files are ready, you can proceed with the installation!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-installation--startup>3. Installation & Startup</h1><p>Now that your configuration files are ready, you can install and start Smart Agent on your remote hosts using the <code>smartagentctl</code> command-line tool.</p><h2 id=installation-process-overview>Installation Process Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The installation process involves:</p><ol><li><strong>Connection</strong>: Establishes SSH connections to all defined hosts</li><li><strong>Transfer</strong>: Copies Smart Agent binaries and configuration to remote hosts</li><li><strong>Installation</strong>: Installs Smart Agent in <code>/opt/appdynamics/appdsmartagent/</code> on each host</li><li><strong>Startup</strong>: Starts the Smart Agent process on each remote host</li><li><strong>Logging</strong>: Outputs detailed progress to console and log file</li></ol><h2 id=step-1-navigate-to-installation-directory>Step 1: Navigate to Installation Directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Change to the Smart Agent installation directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/ubuntu/appdsm</span></span></code></pre></div><h2 id=step-2-verify-configuration-files>Step 2: Verify Configuration Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before starting the installation, verify your configuration files are properly set up:</p><h3 id=review-remote-hosts-configuration>Review remote hosts configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat remote.yaml</span></span></code></pre></div><p>Ensure all host IP addresses, ports, and SSH settings are correct.</p><h3 id=review-agent-configuration>Review agent configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat config.ini</span></span></code></pre></div><p>Verify that controller URL, account credentials, and other settings are accurate.</p><h2 id=step-3-start-smart-agent-on-remote-hosts>Step 3: Start Smart Agent on Remote Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Run the following command to start Smart Agent on all remote hosts defined in <code>remote.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl start --remote --verbose</span></span></code></pre></div><h3 id=command-breakdown>Command Breakdown<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><code>sudo</code>: Required for privileged operations</li><li><code>./smartagentctl</code>: The control utility</li><li><code>start</code>: Command to start the Smart Agent</li><li><code>--remote</code>: Deploy to remote hosts (reads from <code>remote.yaml</code>)</li><li><code>--verbose</code>: Enable detailed debug logging</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-triangle-exclamation"></i>
Note</summary><div class=box-content><p>The <code>--verbose</code> flag is highly recommended as it provides detailed output about the installation progress and helps identify any issues.</p></div></details><h2 id=step-4-monitor-the-installation>Step 4: Monitor the Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>--verbose</code> flag provides detailed output including:</p><ul><li>SSH connection status</li><li>File transfer progress</li><li>Installation steps on each host</li><li>Agent startup status</li><li>Any errors or warnings</li></ul><h3 id=expected-output>Expected Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You should see output similar to:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Starting Smart Agent deployment to remote hosts...
Connecting to 172.31.1.243:22...
Connection successful: 172.31.1.243
Transferring Smart Agent binaries...
Installing Smart Agent on 172.31.1.243...
Starting Smart Agent on 172.31.1.243...
Smart Agent started successfully on 172.31.1.243

Connecting to 172.31.1.48:22...
...</code></pre></div><h2 id=step-5-verify-installation>Step 5: Verify Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After the installation completes, verify that Smart Agent is running on the remote hosts.</p><h3 id=check-status-remotely>Check Status Remotely<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Use the status command to check all remote hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl status --remote --verbose</span></span></code></pre></div><p>This will query each host and report whether Smart Agent is running.</p><h3 id=check-logs-on-control-node>Check Logs on Control Node<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>View logs on the control node:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tail -f /home/ubuntu/appdsm/log.log</span></span></code></pre></div><h3 id=ssh-to-remote-host-and-check>SSH to Remote Host and Check<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You can also SSH to a remote host and check directly:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -f /opt/appdynamics/appdsmartagent/log.log
</span></span><span class=line><span class=cl>ps aux <span class=p>|</span> grep smartagent</span></span></code></pre></div><h2 id=additional-commands>Additional Commands<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=install-without-starting>Install Without Starting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To install Smart Agent without starting it:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl install --remote --verbose</span></span></code></pre></div><p>This copies the binaries and configuration but doesn&rsquo;t start the agent process.</p><h3 id=stop-smart-agent>Stop Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To stop Smart Agent on all remote hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl stop --remote --verbose</span></span></code></pre></div><h3 id=install-as-system-service>Install as System Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To install Smart Agent as a systemd service (recommended for production):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl start --remote --verbose --service</span></span></code></pre></div><p>When installed as a service:</p><ul><li>Smart Agent will start automatically on system boot</li><li>Can be managed using <code>systemctl</code> commands</li><li>Better integration with system logging</li></ul><h3 id=uninstall-smart-agent>Uninstall Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To completely remove Smart Agent from remote hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ./smartagentctl uninstall --remote --verbose</span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The uninstall command will remove all Smart Agent files from the remote hosts. Make sure you have backups of any important configuration or log files.</p></div></details><h2 id=verifying-in-appdynamics-controller>Verifying in AppDynamics Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After starting Smart Agent on remote hosts:</p><ol><li><strong>Log into AppDynamics Controller</strong>: Navigate to your controller URL</li><li><strong>Go to Servers</strong>: Check the Servers section in the Controller UI</li><li><strong>Verify Agents</strong>: You should see your Smart Agents appear in the list</li><li><strong>Check Metrics</strong>: Verify that metrics are being collected from each host</li></ol><h3 id=expected-timeline>Expected Timeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>Agent Registration</strong>: Agents typically appear in the Controller within 1-2 minutes</li><li><strong>Initial Metrics</strong>: First metrics usually arrive within 5 minutes</li><li><strong>Full Data</strong>: Complete data collection starts after the first polling interval (configured in <code>config.ini</code>)</li></ul><h2 id=log-file-locations>Log File Locations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Logs are written to both the control node and remote hosts:</p><table><thead><tr><th>Location</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><strong>Control Node</strong></td><td><code>/home/ubuntu/appdsm/log.log</code></td><td>Installation and deployment logs</td></tr><tr><td><strong>Remote Hosts</strong></td><td><code>/opt/appdynamics/appdsmartagent/log.log</code></td><td>Agent runtime logs</td></tr></tbody></table><h2 id=understanding-concurrency>Understanding Concurrency<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>max_concurrency</code> setting in <code>remote.yaml</code> controls parallel execution:</p><ul><li><strong>Lower values (1-2)</strong>: Sequential processing, slower but safer</li><li><strong>Default (4)</strong>: Good balance for most environments</li><li><strong>Higher values (8+)</strong>: Faster deployment to many hosts, requires more resources</li></ul><p>Example: With 12 hosts and <code>max_concurrency: 4</code>:</p><ul><li>First batch: Hosts 1-4 processed simultaneously</li><li>Second batch: Hosts 5-8 processed simultaneously</li><li>Third batch: Hosts 9-12 processed simultaneously</li></ul><h2 id=what-happens-on-each-remote-host>What Happens on Each Remote Host<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>When you run the start command, the following occurs on each remote host:</p><ol><li><strong>Directory Creation</strong>: Creates <code>/opt/appdynamics/appdsmartagent/</code></li><li><strong>File Transfer</strong>: Copies <code>smartagent</code> binary, <code>config.ini</code>, and libraries</li><li><strong>Permission Setting</strong>: Sets appropriate file permissions</li><li><strong>Process Start</strong>: Launches the Smart Agent process</li><li><strong>Verification</strong>: Confirms the process is running</li></ol><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After successfully installing and starting Smart Agent:</p><ol><li>‚úÖ Verify agents appear in the AppDynamics Controller UI</li><li>‚úÖ Check that metrics are being collected</li><li>‚úÖ Configure application monitoring as needed</li><li>‚úÖ Set up alerts and dashboards</li><li>‚úÖ Monitor agent health and performance</li></ol><p>If you encounter any issues, proceed to the Troubleshooting section.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-troubleshooting>4. Troubleshooting</h1><p>This section covers common issues you may encounter when deploying Smart Agent to remote hosts and how to resolve them.</p><h2 id=ssh-connection-issues>SSH Connection Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-cannot-connect-to-remote-hosts>Problem: Cannot Connect to Remote Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>Connection timeout errors</li><li>&ldquo;Permission denied&rdquo; messages</li><li>Host key verification failures</li></ul><p><strong>Solutions:</strong></p><h4 id=1-verify-ssh-key-permissions>1. Verify SSH Key Permissions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>SSH keys must have the correct permissions:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> /home/ubuntu/.ssh/id_rsa
</span></span><span class=line><span class=cl>chmod <span class=m>644</span> /home/ubuntu/.ssh/id_rsa.pub
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> /home/ubuntu/.ssh</span></span></code></pre></div><h4 id=2-test-ssh-connectivity-manually>2. Test SSH Connectivity Manually<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Test connection to each remote host:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -i /home/ubuntu/.ssh/id_rsa ubuntu@172.31.1.243</span></span></code></pre></div><p>If this fails, the issue is with SSH configuration, not smartagentctl.</p><h4 id=3-check-remote-host-reachability>3. Check Remote Host Reachability<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Verify network connectivity:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ping 172.31.1.243
</span></span><span class=line><span class=cl>telnet 172.31.1.243 <span class=m>22</span></span></span></code></pre></div><h4 id=4-verify-ssh-user>4. Verify SSH User<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Ensure the username in <code>remote.yaml</code> matches the SSH user:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu </span><span class=w> </span><span class=c># Must match your SSH user</span></span></span></code></pre></div><h4 id=5-check-known-hosts>5. Check Known Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>If host key validation is enabled, ensure hosts are in known_hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keyscan 172.31.1.243 &gt;&gt; /home/ubuntu/.ssh/known_hosts</span></span></code></pre></div><p>Or temporarily disable host key validation in <code>remote.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ignore_host_key_validation</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>Disabling host key validation should only be used for testing. Always enable it in production environments.</p></div></details><h2 id=permission-issues>Permission Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-permission-denied-during-installation>Problem: Permission Denied During Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>&ldquo;Permission denied&rdquo; when creating directories</li><li>Cannot write to <code>/opt/appdynamics/</code></li><li>Insufficient privileges errors</li></ul><p><strong>Solutions:</strong></p><h4 id=1-verify-sudo-access-on-control-node>1. Verify Sudo Access on Control Node<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo -v</span></span></code></pre></div><h4 id=2-check-privileged-setting>2. Check Privileged Setting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Ensure <code>privileged: true</code> is set in <code>remote.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>protocol</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><h4 id=3-verify-remote-user-permissions>3. Verify Remote User Permissions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>The remote user must have sudo privileges or be root. Test on remote host:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>sudo mkdir -p /opt/appdynamics/test
</span></span><span class=line><span class=cl>sudo rm -rf /opt/appdynamics/test</span></span></code></pre></div><h4 id=4-check-remote-directory-permissions>4. Check Remote Directory Permissions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>If using a custom installation directory, ensure it&rsquo;s writable:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ls -la /opt/appdynamics/</span></span></code></pre></div><h2 id=agent-not-starting>Agent Not Starting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-agent-installation-succeeds-but-agent-doesnt-start>Problem: Agent Installation Succeeds But Agent Doesn&rsquo;t Start<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>Installation completes without errors</li><li>Agent process not running on remote hosts</li><li>No errors in control node logs</li></ul><p><strong>Solutions:</strong></p><h4 id=1-check-remote-host-logs>1. Check Remote Host Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>SSH to the remote host and check the agent logs:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -100 /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><p>Look for error messages indicating:</p><ul><li>Configuration errors</li><li>Network connectivity issues</li><li>Missing dependencies</li></ul><h4 id=2-verify-agent-process>2. Verify Agent Process<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Check if the agent process is running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ps aux <span class=p>|</span> grep smartagent</span></span></code></pre></div><p>If not running, try starting manually:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagent</span></span></code></pre></div><h4 id=3-check-configuration-files>3. Check Configuration Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Verify that <code>config.ini</code> was properly transferred:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>cat /opt/appdynamics/appdsmartagent/config.ini</span></span></code></pre></div><p>Ensure:</p><ul><li>Controller URL is correct</li><li>Account credentials are valid</li><li>All required fields are populated</li></ul><h4 id=4-test-controller-connectivity>4. Test Controller Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>From the remote host, verify connectivity to the AppDynamics Controller:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>curl -I https://fso-tme.saas.appdynamics.com</span></span></code></pre></div><h4 id=5-check-system-resources>5. Check System Resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Ensure the remote host has adequate resources:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>df -h  <span class=c1># Check disk space</span>
</span></span><span class=line><span class=cl>free -m  <span class=c1># Check memory</span></span></span></code></pre></div><h2 id=configuration-errors>Configuration Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-invalid-configuration>Problem: Invalid Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>YAML parsing errors</li><li>Invalid configuration parameter errors</li><li>Agent fails to start with config errors</li></ul><p><strong>Solutions:</strong></p><h4 id=1-validate-yaml-syntax>1. Validate YAML Syntax<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Check for YAML syntax errors in <code>remote.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -c <span class=s2>&#34;import yaml; yaml.safe_load(open(&#39;/home/ubuntu/appdsm/remote.yaml&#39;))&#34;</span></span></span></code></pre></div><p>Common YAML issues:</p><ul><li>Incorrect indentation (use spaces, not tabs)</li><li>Missing colons</li><li>Unquoted special characters</li></ul><h4 id=2-verify-ini-file-format>2. Verify INI File Format<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Check <code>config.ini</code> for syntax errors:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/ubuntu/appdsm/config.ini</span></span></code></pre></div><p>Common INI issues:</p><ul><li>Missing section headers (e.g., <code>[CommonConfig]</code>)</li><li>Invalid parameter names</li><li>Missing equals signs</li></ul><h4 id=3-validate-controller-credentials>3. Validate Controller Credentials<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Ensure your AppDynamics credentials are correct:</p><ul><li><strong>ControllerURL</strong>: Should not include <code>https://</code> or <code>/controller</code></li><li><strong>AccountAccessKey</strong>: Should be the full access key</li><li><strong>AccountName</strong>: Should match your account name exactly</li></ul><p>Example correct format:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>ControllerURL</span>    <span class=o>=</span> <span class=s>fso-tme.saas.appdynamics.com</span>
</span></span><span class=line><span class=cl><span class=na>AccountAccessKey</span> <span class=o>=</span> <span class=s>abc123xyz789</span>
</span></span><span class=line><span class=cl><span class=na>AccountName</span>      <span class=o>=</span> <span class=s>fso-tme</span></span></span></code></pre></div><h2 id=agent-not-appearing-in-controller>Agent Not Appearing in Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-agent-starts-but-doesnt-appear-in-controller-ui>Problem: Agent Starts But Doesn&rsquo;t Appear in Controller UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>Agent process is running on remote hosts</li><li>No errors in agent logs</li><li>Agent doesn&rsquo;t appear in Controller UI</li></ul><p><strong>Solutions:</strong></p><h4 id=1-wait-for-initial-registration>1. Wait for Initial Registration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Agents may take 1-5 minutes to appear in the Controller after starting.</p><h4 id=2-verify-controller-configuration>2. Verify Controller Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Check that the agent can reach the controller:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>ping fso-tme.saas.appdynamics.com
</span></span><span class=line><span class=cl>curl -I https://fso-tme.saas.appdynamics.com</span></span></code></pre></div><h4 id=3-check-agent-logs-for-connection-errors>3. Check Agent Logs for Connection Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Look for controller connection errors:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>grep -i <span class=s2>&#34;error\|fail\|controller&#34;</span> /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><h4 id=4-verify-ssltls-settings>4. Verify SSL/TLS Settings<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Ensure SSL is enabled in <code>config.ini</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>EnableSSL</span> <span class=o>=</span> <span class=s>true</span></span></span></code></pre></div><h4 id=5-check-firewall-rules>5. Check Firewall Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Verify that outbound HTTPS (port 443) is allowed from remote hosts to the Controller.</p><h4 id=6-verify-account-credentials>6. Verify Account Credentials<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Double-check that your AccountAccessKey and AccountName are correct in the Controller UI:</p><ul><li>Log into AppDynamics Controller</li><li>Go to Settings ‚Üí License</li><li>Verify your account name and access key</li></ul><h2 id=performance-and-scaling-issues>Performance and Scaling Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=problem-slow-deployment-or-timeouts>Problem: Slow Deployment or Timeouts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptoms:</strong></p><ul><li>Deployment takes too long</li><li>Timeout errors when deploying to many hosts</li><li>System resource exhaustion</li></ul><p><strong>Solutions:</strong></p><h4 id=1-adjust-concurrency>1. Adjust Concurrency<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Reduce <code>max_concurrency</code> in <code>remote.yaml</code> if experiencing issues:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>  </span><span class=c># Lower value for slower, more stable deployment</span></span></span></code></pre></div><p>Or increase for faster deployment if resources allow:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>max_concurrency</span><span class=p>:</span><span class=w> </span><span class=m>8</span><span class=w>  </span><span class=c># Higher value for faster deployment</span></span></span></code></pre></div><h4 id=2-deploy-in-batches>2. Deploy in Batches<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>For very large deployments, split hosts into multiple groups:</p><p><strong>remote-batch1.yaml:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.2&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.3&#34;</span></span></span></code></pre></div><p><strong>remote-batch2.yaml:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.4&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.5&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.31.1.6&#34;</span></span></span></code></pre></div><p>Then deploy each batch separately.</p><h4 id=3-check-network-bandwidth>3. Check Network Bandwidth<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Monitor network usage during deployment:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iftop</span></span></code></pre></div><p>If bandwidth is saturated, reduce concurrency or deploy during off-peak hours.</p><h2 id=log-analysis>Log Analysis<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=checking-control-node-logs>Checking Control Node Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>View detailed deployment logs:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tail -f /home/ubuntu/appdsm/log.log</span></span></code></pre></div><p>Look for:</p><ul><li>SSH connection failures</li><li>File transfer errors</li><li>Permission denied errors</li><li>Timeout messages</li></ul><h3 id=checking-remote-host-logs>Checking Remote Host Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>View agent runtime logs on remote hosts:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>tail -f /opt/appdynamics/appdsmartagent/log.log</span></span></code></pre></div><p>Look for:</p><ul><li>Controller connection errors</li><li>Configuration errors</li><li>Agent startup failures</li><li>Network issues</li></ul><h3 id=increasing-log-verbosity>Increasing Log Verbosity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For more detailed logging, set <code>LogLevel</code> to <code>DEBUG</code> in <code>config.ini</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Telemetry]</span>
</span></span><span class=line><span class=cl><span class=na>LogLevel</span> <span class=o>=</span> <span class=s>DEBUG</span></span></span></code></pre></div><h2 id=getting-help>Getting Help<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you&rsquo;re still experiencing issues:</p><ol><li><p><strong>Check Documentation</strong>: Review the smartagentctl help:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./smartagentctl --help
</span></span><span class=line><span class=cl>./smartagentctl start --help</span></span></code></pre></div></li><li><p><strong>Review AppDynamics Documentation</strong>: Visit the AppDynamics documentation portal</p></li><li><p><strong>Check Log Files</strong>: Always review both control node and remote host logs</p></li><li><p><strong>Test Components Individually</strong>:</p><ul><li>Test SSH connectivity separately</li><li>Test agent startup on a single host manually</li><li>Verify controller connectivity independently</li></ul></li><li><p><strong>Collect Diagnostic Information</strong>:</p><ul><li>Control node logs</li><li>Remote host logs</li><li>Configuration files (with sensitive data redacted)</li><li>Error messages and stack traces</li></ul></li></ol><h2 id=common-error-messages>Common Error Messages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><table><thead><tr><th>Error Message</th><th>Cause</th><th>Solution</th></tr></thead><tbody><tr><td>&ldquo;Permission denied (publickey)&rdquo;</td><td>SSH key authentication failure</td><td>Verify SSH key path and permissions</td></tr><tr><td>&ldquo;Connection refused&rdquo;</td><td>SSH port not accessible</td><td>Check firewall rules and SSH daemon</td></tr><tr><td>&ldquo;No such file or directory&rdquo;</td><td>Missing configuration file</td><td>Verify config files exist and paths are correct</td></tr><tr><td>&ldquo;YAML parse error&rdquo;</td><td>Invalid YAML syntax</td><td>Validate YAML syntax with parser</td></tr><tr><td>&ldquo;Controller unreachable&rdquo;</td><td>Network connectivity issue</td><td>Test controller connectivity from remote host</td></tr><tr><td>&ldquo;Invalid credentials&rdquo;</td><td>Wrong account key or name</td><td>Verify AppDynamics credentials</td></tr></tbody></table><h2 id=best-practices-for-troubleshooting>Best Practices for Troubleshooting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><strong>Always use &ndash;verbose flag</strong>: Provides detailed output for debugging</li><li><strong>Test with a single host first</strong>: Deploy to one host before scaling</li><li><strong>Check logs immediately</strong>: Review logs right after deployment</li><li><strong>Verify prerequisites</strong>: Ensure all requirements are met before deploying</li><li><strong>Test connectivity separately</strong>: Verify SSH and network connectivity independently</li><li><strong>Use manual commands</strong>: Test manual SSH and agent startup to isolate issues</li></ol><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>When troubleshooting, start with the simplest tests first (e.g., ping, SSH connectivity) before moving to more complex issues.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=jenkins-automation>Jenkins Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop demonstrates how to use <strong>Jenkins</strong> to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage Jenkins pipelines for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-9309d0e55d6d9133be9a1686bcb87b2f class=lightbox-link><img alt="Jenkins and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9309d0e55d6d9133be9a1686bcb87b2f><img alt="Jenkins and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/Jenkins-D24939?style=flat&logo=jenkins&logoColor=white"></a> <a href=#R-image-01822853a621e926f5be161f38e88573 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-01822853a621e926f5be161f38e88573><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts simultaneously using Jenkins</li><li><strong>Configure Jenkins credentials</strong> for secure SSH and AppDynamics access</li><li><strong>Create parameterized pipelines</strong> for flexible deployment scenarios</li><li><strong>Implement batch processing</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, configure, stop, and cleanup</li><li><strong>Handle failures gracefully</strong> with automatic error tracking and reporting</li></ul><h2 id=key-features>Key Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>üöÄ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>üîÑ <strong>Complete Lifecycle Management</strong> - Install, uninstall, stop, and clean agents</li><li>üèóÔ∏è <strong>Infrastructure as Code</strong> - All pipelines version-controlled</li><li>üîê <strong>Secure</strong> - SSH key-based authentication via Jenkins credentials</li><li>üìà <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>üéõÔ∏è <strong>Jenkins Agent</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Jenkins-based Deployment                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  Developer ‚îÄ‚îÄ‚ñ∂ Jenkins Master ‚îÄ‚îÄ‚ñ∂ Jenkins Agent (AWS VPC)      ‚îÇ
‚îÇ                                          ‚îÇ                       ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 1 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 2 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 3 (SSH)      ‚îÇ
‚îÇ                                          ‚îî‚îÄ‚îÄ‚ñ∂ Host N (SSH)      ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  All hosts send metrics ‚îÄ‚îÄ‚ñ∂ AppDynamics Controller             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h2 id=workshop-components>Workshop Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the system design and network topology</li><li><strong>Jenkins Setup</strong> - Configuring Jenkins, credentials, and agents</li><li><strong>Pipeline Creation</strong> - Creating and configuring deployment pipelines</li><li><strong>Deployment Workflow</strong> - Executing deployments and verifying installations</li></ol><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Jenkins server (2.300+) with Pipeline plugin</li><li>Jenkins agent in the same VPC as target EC2 instances</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All pipeline code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/sm-jenkins rel=external>https://github.com/chambear2809/sm-jenkins</a></strong></p><p>The repository includes:</p><ul><li>Complete Jenkinsfile pipeline definitions</li><li>Detailed setup documentation</li><li>Configuration examples</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Jenkins Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Jenkins-based Smart Agent deployment system uses a hub-and-spoke architecture where a Jenkins agent in your AWS VPC orchestrates deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">graph TB
    subgraph &#34;Jenkins Infrastructure&#34;
        JM[Jenkins Master&lt;br/&gt;Web UI + Orchestration]
        JA[Jenkins Agent&lt;br/&gt;EC2 in VPC&lt;br/&gt;Label: linux]
    end
    
    subgraph &#34;AWS VPC - Private Network&#34;
        subgraph &#34;Target EC2 Instances&#34;
            H1[Host 1&lt;br/&gt;172.31.1.243]
            H2[Host 2&lt;br/&gt;172.31.1.48]
            H3[Host 3&lt;br/&gt;172.31.1.5]
            HN[Host N&lt;br/&gt;172.31.x.x]
        end
    end
    
    DEV[Developer/Operator]
    APPD[AppDynamics&lt;br/&gt;Controller]
    
    DEV --&gt;|1. Triggers Pipeline| JM
    JM --&gt;|2. Assigns Job| JA
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H1
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H2
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| H3
    JA --&gt;|3. SSH Deploy&lt;br/&gt;Private IPs| HN
    
    H1 -.-&gt;|Metrics| APPD
    H2 -.-&gt;|Metrics| APPD
    H3 -.-&gt;|Metrics| APPD
    HN -.-&gt;|Metrics| APPD
    
    style JM fill:#d4e6f1
    style JA fill:#a9cce3
    style H1 fill:#aed6f1
    style H2 fill:#aed6f1
    style H3 fill:#aed6f1
    style HN fill:#aed6f1</pre><h2 id=network-architecture>Network Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The Jenkins agent communicates with target hosts via private IPs, eliminating the need for public IP addresses on target hosts.</p><h3 id=vpc-layout>VPC Layout<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        AWS VPC (10.0.0.0/16)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ              Security Group: app-agents-sg                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Rules:                                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Inbound: SSH (22) from Jenkins Agent only             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Outbound: HTTPS (443) to AppDynamics Controller       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ Jenkins Agent‚îÇ    ‚îÇ  Target EC2  ‚îÇ    ‚îÇ  Target EC2  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ    ‚îÇ              ‚îÇ    ‚îÇ              ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ Private IP:  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Private IP:  ‚îÇ    ‚îÇ Private IP:  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ 172.31.50.10 ‚îÇSSH ‚îÇ 172.31.1.243 ‚îÇ    ‚îÇ 172.31.1.48  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ              ‚îÇ    ‚îÇ              ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ Label: linux ‚îÇ    ‚îÇ Ubuntu 20.04 ‚îÇ    ‚îÇ Ubuntu 20.04 ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                              ‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                               ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   AppDynamics    ‚îÇ
                    ‚îÇ    Controller    ‚îÇ
                    ‚îÇ  (SaaS/On-Prem)  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h2 id=deployment-flow>Deployment Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">sequenceDiagram
    participant Dev as Developer
    participant JM as Jenkins Master
    participant JA as Jenkins Agent&lt;br/&gt;(VPC)
    participant TH as Target Hosts&lt;br/&gt;(VPC)
    participant AppD as AppDynamics&lt;br/&gt;Controller
    
    Dev-&gt;&gt;JM: 1. Trigger Pipeline
    JM-&gt;&gt;JM: 2. Load Credentials
    JM-&gt;&gt;JA: 3. Schedule Job
    JA-&gt;&gt;JA: 4. Prepare Batches
    
    loop For Each Batch
        JA-&gt;&gt;TH: 5. SSH Copy Files (SCP)
        JA-&gt;&gt;TH: 6. SSH Execute Commands
        TH-&gt;&gt;TH: 7. Install/Config Agent
        TH--&gt;&gt;JA: 8. Return Status
    end
    
    JA-&gt;&gt;JM: 9. Report Results
    JM-&gt;&gt;Dev: 10. Show Build Status
    
    TH-&gt;&gt;AppD: 11. Send Metrics (Post-Install)
    AppD--&gt;&gt;Dev: 12. View Monitoring Data</pre><h2 id=component-details>Component Details<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=jenkins-master>Jenkins Master<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Responsibilities:</strong></p><ul><li>Web UI for users</li><li>Pipeline orchestration</li><li>Credential management</li><li>Build history & logs</li><li>Job scheduling</li></ul><p><strong>Requirements:</strong></p><ul><li>Jenkins 2.300+</li><li>Plugins: Pipeline, SSH Agent, Credentials, Git</li><li>Network access to agent</li></ul><h3 id=jenkins-agent>Jenkins Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Execute pipeline stages</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Batching logic</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Label: <code>linux</code></li><li>Java 11+</li><li>SSH client</li><li>Network: SSH to all targets</li><li>Disk: ~20GB for artifacts</li></ul><h3 id=target-hosts>Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
‚îî‚îÄ‚îÄ appdsmartagent/
    ‚îú‚îÄ‚îÄ smartagentctl
    ‚îú‚îÄ‚îÄ config.ini
    ‚îî‚îÄ‚îÄ agents/
        ‚îú‚îÄ‚îÄ machine/
        ‚îú‚îÄ‚îÄ java/
        ‚îú‚îÄ‚îÄ node/
        ‚îî‚îÄ‚îÄ db/</code></pre></div><h2 id=security-architecture>Security Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=security-layers>Security Layers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for agents</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>Whitelist Jenkins Agent IP</li><li>Port 22 (SSH) only</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in Jenkins credentials</li><li>Temporary key files (600 perms)</li><li>Keys removed after each build</li></ul></li><li><p><strong>Jenkins RBAC</strong></p><ul><li>Role-based access control</li><li>Pipeline-level permissions</li><li>Credential access restrictions</li><li>Audit logging enabled</li></ul></li><li><p><strong>Secrets Management</strong></p><ul><li>No secrets in code/logs</li><li>Credentials binding only</li><li>Environment variable masking</li><li>Automatic secret rotation (optional)</li></ul></li></ol><h3 id=credential-flow>Credential Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">flowchart LR
    subgraph &#34;Jenkins Master&#34;
        CS[Credentials Store&lt;br/&gt;Encrypted at Rest]
        JM[Jenkins Master]
    end
    
    subgraph &#34;Jenkins Agent&#34;
        WS[Workspace&lt;br/&gt;Temp Files]
        KEY[SSH Key File&lt;br/&gt;600 permissions]
    end
    
    subgraph &#34;Target Hosts&#34;
        TH[EC2 Instances&lt;br/&gt;Authorized Keys]
    end
    
    CS --&gt;|Binding| JM
    JM --&gt;|Secure Copy| KEY
    KEY --&gt;|SSH Auth| TH
    WS -.-&gt;|Cleanup| X[Deleted]
    KEY -.-&gt;|Cleanup| X
    
    style CS fill:#fdeaa8
    style KEY fill:#fadbd8
    style X fill:#e8e8e8</pre><h2 id=batch-processing>Batch Processing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The system uses automatic batching to support deployments at any scale. By default, hosts are processed in batches of 256, with all hosts within a batch deploying in parallel.</p><h3 id=how-batching-works>How Batching Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
Host 002: 172.31.1.2      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ   BATCH 1        ‚îÇ
    ...                              ‚îÇ   Hosts 1-256    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îê
Host 256: 172.31.1.256               ‚îÇ   Sequential     ‚îÇ    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
Host 257: 172.31.1.257               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
Host 258: 172.31.1.258   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   BATCH 2        ‚îÇ    ‚îÇ SEQUENTIAL
    ...                              ‚îÇ   Hosts 257-512  ‚îÇ    ‚îÇ EXECUTION
Host 512: 172.31.1.512               ‚îÇ   Sequential     ‚îÇ    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
Host 513: 172.31.1.513               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ...                              ‚îÇ   BATCH 3        ‚îÇ    ‚îÇ
Host 768: 172.31.1.768   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   Hosts 513-768  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Host 769: 172.31.1.769               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ...                              ‚îÇ   BATCH 4        ‚îÇ
Host 1000: 172.31.2.232  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   Hosts 769-1000 ‚îÇ
                                     ‚îÇ   (232 hosts)    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

WITHIN EACH BATCH:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  All hosts deploy in PARALLEL          ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Host 1 ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ  Host 2 ‚îÄ‚îÄ‚î§                           ‚îÇ
‚îÇ  Host 3 ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂ Background processes (&amp;)‚îÇ
‚îÇ    ...    ‚îÇ                           ‚îÇ
‚îÇ  Host 256‚îÄ‚îò   ‚îî‚îÄ‚ñ∂ wait command        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h3 id=scaling-characteristics>Scaling Characteristics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts ‚Üí 1 batch ‚Üí ~2 minutes</li><li>100 hosts ‚Üí 1 batch ‚Üí ~3 minutes</li><li>500 hosts ‚Üí 2 batches ‚Üí ~6 minutes</li><li>1,000 hosts ‚Üí 4 batches ‚Üí ~12 minutes</li><li>5,000 hosts ‚Üí 20 batches ‚Üí ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Jenkins agent resources</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up Jenkins and configuring credentials.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=jenkins-setup>Jenkins Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before you begin, ensure you have:</p><ul><li>Jenkins server (version 2.300 or later)</li><li>A Jenkins agent in the same AWS VPC as your target EC2 instances</li><li>SSH key pair for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=required-jenkins-plugins>Required Jenkins Plugins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install these plugins via <strong>Manage Jenkins ‚Üí Plugins ‚Üí Available Plugins</strong>:</p><ol><li><strong>Pipeline</strong> (core plugin, usually pre-installed)</li><li><strong>SSH Agent Plugin</strong></li><li><strong>Credentials Plugin</strong> (usually pre-installed)</li><li><strong>Git Plugin</strong> (if using SCM)</li></ol><p>To install:</p><ol><li>Navigate to <strong>Manage Jenkins ‚Üí Plugins</strong></li><li>Click <strong>Available</strong> tab</li><li>Search for each plugin</li><li>Select and click <strong>Install</strong></li></ol><h2 id=configure-jenkins-agent>Configure Jenkins Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your Jenkins agent must be able to reach target EC2 instances via private IPs. There are two main options:</p><h3 id=option-a-ec2-instance-as-agent>Option A: EC2 Instance as Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>Launch EC2 instance in same VPC</strong> as your target hosts</p></li><li><p><strong>Install Java</strong> (required by Jenkins):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install -y openjdk-11-jdk</span></span></code></pre></div></li><li><p><strong>Add agent in Jenkins</strong>:</p><ul><li>Go to <strong>Manage Jenkins ‚Üí Nodes ‚Üí New Node</strong></li><li>Name: <code>aws-vpc-agent</code> (or your preferred name)</li><li>Type: <strong>Permanent Agent</strong></li><li>Configure:<ul><li><strong>Remote root directory</strong>: <code>/home/ubuntu/jenkins</code></li><li><strong>Labels</strong>: <code>linux</code> (must match pipeline agent label)</li><li><strong>Launch method</strong>: Launch agent via SSH</li><li><strong>Host</strong>: EC2 private IP</li><li><strong>Credentials</strong>: Add SSH credentials for agent</li></ul></li></ul></li></ol><h3 id=option-b-use-existing-linux-agent>Option B: Use Existing Linux Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Ensure agent has label <code>linux</code></li><li>Verify network connectivity to target hosts</li><li>Confirm SSH client is installed</li></ul><h3 id=configure-agent-labels>Configure Agent Labels<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>All pipelines in this workshop use the <code>linux</code> label. Make sure your agent is configured with this label.</p></div></details><p>To set or modify labels:</p><ol><li>Go to <strong>Manage Jenkins ‚Üí Nodes</strong></li><li>Click on your agent</li><li>Click <strong>Configure</strong></li><li>Set <strong>Labels</strong> to <code>linux</code></li><li>Click <strong>Save</strong></li></ol><h2 id=credentials-setup>Credentials Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Manage Jenkins ‚Üí Credentials ‚Üí System ‚Üí Global credentials (unrestricted)</strong></p><p>You&rsquo;ll need to create three credentials for the pipelines to work.</p><h3 id=1-ssh-private-key-for-target-hosts>1. SSH Private Key for Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential allows Jenkins to SSH into your target EC2 instances.</p><p><strong>Type</strong>: SSH Username with private key</p><ul><li><strong>ID</strong>: <code>ssh-private-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>SSH key for EC2 target hosts</code></li><li><strong>Username</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>Private Key</strong>: Choose one:<ul><li><strong>Enter directly</strong>: Paste your PEM file content</li><li><strong>From file</strong>: Upload PEM file</li><li><strong>From Jenkins master</strong>: Specify path</li></ul></li></ul><p><strong>Example format</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><h3 id=2-deployment-hosts-list>2. Deployment Hosts List<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential contains the list of all target hosts where Smart Agent should be deployed.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>deployment-hosts</code> (must match exactly)</li><li><strong>Description</strong>: <code>List of target EC2 host IPs</code></li><li><strong>Secret</strong>: Enter newline-separated IPs</li></ul><p><strong>Example</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul></div></details><h3 id=3-appdynamics-account-access-key>3. AppDynamics Account Access Key<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This credential contains your AppDynamics account access key for Smart Agent authentication.</p><p><strong>Type</strong>: Secret text</p><ul><li><strong>ID</strong>: <code>account-access-key</code> (must match exactly)</li><li><strong>Description</strong>: <code>AppDynamics account access key</code></li><li><strong>Secret</strong>: Your AppDynamics access key</li></ul><p><strong>Example</strong>: <code>abcd1234-ef56-7890-gh12-ijklmnopqrst</code></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can find your AppDynamics access key in the Controller under <strong>Settings ‚Üí License ‚Üí Account</strong>.</p></div></details><h2 id=credential-security-best-practices>Credential Security Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Follow these best practices for credential management:</p><ul><li>‚úÖ Use Jenkins credential encryption (built-in)</li><li>‚úÖ Restrict access via Jenkins role-based authorization</li><li>‚úÖ Rotate SSH keys periodically</li><li>‚úÖ Use least-privilege IAM roles for EC2 instances</li><li>‚úÖ Enable audit logging for credential access</li><li>‚úÖ Never commit credentials to version control</li></ul><h2 id=smart-agent-package-setup>Smart Agent Package Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Smart Agent ZIP file should be placed in a location accessible to Jenkins. The recommended approach is to store it in the Jenkins home directory.</p><h3 id=download-smart-agent>Download Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Download from AppDynamics</span>
</span></span><span class=line><span class=cl>curl -o appdsmartagent_64_linux.zip <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;https://download.appdynamics.com/download/prox/download-file/smart-agent/latest/appdsmartagent_64_linux.zip&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Verify the download</span>
</span></span><span class=line><span class=cl>ls -lh appdsmartagent_64_linux.zip</span></span></code></pre></div><h3 id=storage-location>Storage Location<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The pipelines reference the Smart Agent ZIP at: <code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></p><p>You can either:</p><ol><li>Place the ZIP at this exact location</li><li>Modify the <code>SMARTAGENT_ZIP_PATH</code> pipeline parameter to point to your ZIP location</li></ol><h2 id=verify-configuration>Verify Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before proceeding to pipeline creation, verify your setup:</p><h3 id=1-check-agent-status>1. Check Agent Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Manage Jenkins ‚Üí Nodes</strong></li><li>Verify your agent shows as &ldquo;online&rdquo;</li><li>Confirm label is set to <code>linux</code></li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Create a simple test pipeline to verify SSH works:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;Test SSH&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>steps</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>                    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>keyFileVariable:</span> <span class=s1>&#39;SSH_KEY&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                                     <span class=nl>usernameVariable:</span> <span class=s1>&#39;SSH_USER&#39;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>                    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;deployment-hosts&#39;</span><span class=o>,</span> <span class=nl>variable:</span> <span class=s1>&#39;HOSTS&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>sh</span> <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;Testing SSH credentials...&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        echo &#34;$HOSTS&#34; | head -1 | while read HOST; do
</span></span></span><span class=line><span class=cl><span class=s1>                            ssh -i $SSH_KEY \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o StrictHostKeyChecking=no \
</span></span></span><span class=line><span class=cl><span class=s1>                                -o ConnectTimeout=10 \
</span></span></span><span class=line><span class=cl><span class=s1>                                $SSH_USER@$HOST \
</span></span></span><span class=line><span class=cl><span class=s1>                                &#34;echo &#39;Connection successful&#39;&#34;
</span></span></span><span class=line><span class=cl><span class=s1>                        done
</span></span></span><span class=line><span class=cl><span class=s1>                    &#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><h3 id=3-verify-credentials-exist>3. Verify Credentials Exist<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Manage Jenkins ‚Üí Credentials</strong></li><li>Confirm all three credentials are listed:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li></ol><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=agent-not-available>Agent Not Available<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;No agent available&rdquo; error when running pipelines</p><p><strong>Solution</strong>:</p><ul><li>Check: <strong>Manage Jenkins ‚Üí Nodes</strong></li><li>Ensure agent is online</li><li>Verify agent has <code>linux</code> label</li><li>Test agent connectivity</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Cannot connect to target hosts via SSH</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from agent</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on target</span></span></span></code></pre></div><h3 id=credential-not-found>Credential Not Found<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Credential not found&rdquo; error</p><p><strong>Solution</strong>:</p><ul><li>Verify credential IDs exactly match:<ul><li><code>ssh-private-key</code></li><li><code>deployment-hosts</code></li><li><code>account-access-key</code></li></ul></li><li>Check credential scope is set to <strong>Global</strong></li></ul><h3 id=permission-denied-on-target-hosts>Permission Denied on Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: SSH succeeds but commands fail with permission denied</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On target host, verify user is in sudoers</span>
</span></span><span class=line><span class=cl>sudo visudo
</span></span><span class=line><span class=cl><span class=c1># Add line:</span>
</span></span><span class=line><span class=cl>ubuntu <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span> NOPASSWD: ALL</span></span></code></pre></div><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that Jenkins is configured with credentials and agents, you&rsquo;re ready to create the deployment pipelines!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=pipeline-creation>Pipeline Creation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=overview>Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub repository contains four main pipelines for managing the Smart Agent lifecycle:</p><ol><li><strong>Deploy Smart Agent</strong> - Installs and starts Smart Agent service</li><li><strong>Install Machine Agent</strong> - Installs Machine Agent via smartagentctl</li><li><strong>Install Database Agent</strong> - Installs Database Agent via smartagentctl</li><li><strong>Cleanup All Agents</strong> - Removes /opt/appdynamics directory</li></ol><p>All pipeline code is available in the <a href=https://github.com/chambear2809/sm-jenkins rel=external>sm-jenkins GitHub repository</a>.</p><h2 id=pipeline-files>Pipeline Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The repository contains these Jenkinsfile pipeline definitions:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>sm-jenkins/
‚îî‚îÄ‚îÄ pipelines/
    ‚îú‚îÄ‚îÄ Jenkinsfile.deploy                  # Deploy Smart Agent
    ‚îú‚îÄ‚îÄ Jenkinsfile.install-machine-agent  # Install Machine Agent
    ‚îú‚îÄ‚îÄ Jenkinsfile.install-db-agent       # Install Database Agent
    ‚îî‚îÄ‚îÄ Jenkinsfile.cleanup                # Cleanup All Agents</code></pre></div><h2 id=creating-pipelines-in-jenkins>Creating Pipelines in Jenkins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For each Jenkinsfile you want to use, follow these steps to create a pipeline in Jenkins.</p><h3 id=method-1-pipeline-from-scm-recommended>Method 1: Pipeline from SCM (Recommended)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This method keeps your pipeline code in version control and automatically syncs changes.</p><h4 id=step-1-fork-or-clone-the-repository>Step 1: Fork or Clone the Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>First, fork the repository to your own GitHub account or organization, or use the original repository directly.</p><p><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></p><h4 id=step-2-create-pipeline-in-jenkins>Step 2: Create Pipeline in Jenkins<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click <strong>New Item</strong></li><li>Enter item name (e.g., <code>Deploy-Smart-Agent</code>)</li><li>Select <strong>Pipeline</strong></li><li>Click <strong>OK</strong></li></ol><h4 id=step-3-configure-pipeline>Step 3: Configure Pipeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>In the pipeline configuration page:</p><p><strong>General Section:</strong></p><ul><li><strong>Description</strong>: <code>Deploys AppDynamics Smart Agent to multiple hosts</code></li><li>Leave <strong>Discard old builds</strong> unchecked (or configure as desired)</li></ul><p><strong>Build Triggers:</strong></p><ul><li>Leave unchecked for manual-only execution</li><li>Or configure webhook/polling if desired</li></ul><p><strong>Pipeline Section:</strong></p><ul><li><strong>Definition</strong>: Select <code>Pipeline script from SCM</code></li><li><strong>SCM</strong>: Select <code>Git</code></li><li><strong>Repository URL</strong>: <code>https://github.com/chambear2809/sm-jenkins</code></li><li><strong>Credentials</strong>: Add if using a private repository</li><li><strong>Branch Specifier</strong>: <code>*/main</code> (or <code>*/master</code>)</li><li><strong>Script Path</strong>: <code>pipelines/Jenkinsfile.deploy</code></li></ul><h4 id=step-4-save>Step 4: Save<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Click <strong>Save</strong> to create the pipeline.</p><h4 id=step-5-repeat-for-other-pipelines>Step 5: Repeat for Other Pipelines<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Repeat steps 2-4 for each pipeline you want to create, using the appropriate script path:</p><table><thead><tr><th>Pipeline Name</th><th>Script Path</th></tr></thead><tbody><tr><td>Deploy-Smart-Agent</td><td><code>pipelines/Jenkinsfile.deploy</code></td></tr><tr><td>Install-Machine-Agent</td><td><code>pipelines/Jenkinsfile.install-machine-agent</code></td></tr><tr><td>Install-Database-Agent</td><td><code>pipelines/Jenkinsfile.install-db-agent</code></td></tr><tr><td>Cleanup-All-Agents</td><td><code>pipelines/Jenkinsfile.cleanup</code></td></tr></tbody></table><h3 id=method-2-direct-pipeline-script>Method 2: Direct Pipeline Script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Alternatively, you can copy the Jenkinsfile content directly into Jenkins.</p><ol><li><strong>Create New Item</strong> (same as Method 1)</li><li>In <strong>Pipeline</strong> section:<ul><li><strong>Definition</strong>: Select <code>Pipeline script</code></li><li><strong>Script</strong>: Copy/paste the entire Jenkinsfile content from GitHub</li></ul></li><li><strong>Save</strong></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Method 1 (SCM) is recommended because it keeps your pipelines in version control and makes updates easier.</p></div></details><h2 id=pipeline-parameters>Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Each pipeline accepts configurable parameters. Here are the key parameters for the main deployment pipeline:</p><h3 id=deploy-smart-agent-pipeline-parameters>Deploy Smart Agent Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>SMARTAGENT_ZIP_PATH</code></td><td><code>/var/jenkins_home/smartagent/appdsmartagent.zip</code></td><td>Path to Smart Agent ZIP on Jenkins server</td></tr><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Installation directory on target hosts</td></tr><tr><td><code>APPD_USER</code></td><td><code>ubuntu</code></td><td>User to run Smart Agent process</td></tr><tr><td><code>APPD_GROUP</code></td><td><code>ubuntu</code></td><td>Group to run Smart Agent process</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>AGENT_NAME</code></td><td><code>smartagent</code></td><td>Smart Agent name</td></tr><tr><td><code>LOG_LEVEL</code></td><td><code>DEBUG</code></td><td>Log level (DEBUG, INFO, WARN, ERROR)</td></tr></tbody></table><h3 id=cleanup-pipeline-parameters>Cleanup Pipeline Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>REMOTE_INSTALL_DIR</code></td><td><code>/opt/appdynamics/appdsmartagent</code></td><td>Directory to remove</td></tr><tr><td><code>SSH_PORT</code></td><td><code>22</code></td><td>SSH port for remote hosts</td></tr><tr><td><code>CONFIRM_CLEANUP</code></td><td><code>false</code></td><td>Must be checked to proceed with cleanup</td></tr></tbody></table><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The cleanup pipeline includes a confirmation parameter to prevent accidental deletion. You must check <code>CONFIRM_CLEANUP</code> to execute the cleanup.</p></div></details><h2 id=understanding-pipeline-structure>Understanding Pipeline Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s examine the key components of the deployment pipeline:</p><h3 id=1-agent-declaration>1. Agent Declaration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>agent</span> <span class=o>{</span> <span class=n>label</span> <span class=s1>&#39;linux&#39;</span> <span class=o>}</span></span></span></code></pre></div><p>This ensures the pipeline runs on a Jenkins agent with the <code>linux</code> label.</p><h3 id=2-parameters-block>2. Parameters Block<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>parameters</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;SMARTAGENT_ZIP_PATH&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;REMOTE_INSTALL_DIR&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ... more parameters
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Defines configurable parameters that can be set when triggering the build.</p><h3 id=3-stages>3. Stages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The deployment pipeline has these stages:</p><ol><li><strong>Preparation</strong> - Loads target hosts from credentials</li><li><strong>Extract Smart Agent</strong> - Extracts ZIP file to staging directory</li><li><strong>Configure Smart Agent</strong> - Creates config.ini template</li><li><strong>Deploy to Remote Hosts</strong> - Copies files and starts Smart Agent on each host</li><li><strong>Verify Installation</strong> - Checks Smart Agent status on all hosts</li></ol><h3 id=4-credentials-binding>4. Credentials Binding<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>withCredentials</span><span class=o>([</span>
</span></span><span class=line><span class=cl>    <span class=n>sshUserPrivateKey</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;ssh-private-key&#39;</span><span class=o>,</span> <span class=o>...),</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span><span class=o>(</span><span class=nl>credentialsId:</span> <span class=s1>&#39;account-access-key&#39;</span><span class=o>,</span> <span class=o>...)</span>
</span></span><span class=line><span class=cl><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Pipeline code with access to credentials
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Securely loads credentials without exposing them in logs.</p><h3 id=5-post-actions>5. Post Actions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>post</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>success</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>failure</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>always</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Defines actions to run after pipeline completion, regardless of success or failure.</p><h2 id=pipeline-naming-convention>Pipeline Naming Convention<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For clarity and organization, use a consistent naming convention:</p><p><strong>Recommended names:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>01-Deploy-Smart-Agent
02-Install-Machine-Agent
03-Install-Database-Agent
04-Cleanup-All-Agents</code></pre></div><p>The numeric prefix helps maintain logical ordering in the Jenkins dashboard.</p><h2 id=organizing-pipelines-with-folders>Organizing Pipelines with Folders<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For better organization, you can use Jenkins folders:</p><ol><li><p><strong>Create Folder</strong>:</p><ul><li>Click <strong>New Item</strong></li><li>Enter name: <code>AppDynamics Smart Agent</code></li><li>Select <strong>Folder</strong></li><li>Click <strong>OK</strong></li></ul></li><li><p><strong>Create Pipelines in Folder</strong>:</p><ul><li>Enter the folder</li><li>Create pipelines as described above</li></ul></li></ol><p><strong>Example structure:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>AppDynamics Smart Agent/
‚îú‚îÄ‚îÄ Deployment/
‚îÇ   ‚îî‚îÄ‚îÄ 01-Deploy-Smart-Agent
‚îú‚îÄ‚îÄ Agent Installation/
‚îÇ   ‚îú‚îÄ‚îÄ 02-Install-Machine-Agent
‚îÇ   ‚îî‚îÄ‚îÄ 03-Install-Database-Agent
‚îî‚îÄ‚îÄ Cleanup/
    ‚îî‚îÄ‚îÄ 04-Cleanup-All-Agents</code></pre></div><h2 id=viewing-pipeline-code>Viewing Pipeline Code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can view the complete pipeline code in the GitHub repository:</p><p><strong>Main deployment pipeline:</strong>
<a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy rel=external>https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.deploy</a></p><p><strong>Other pipelines:</strong></p><ul><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-machine-agent rel=external>Jenkinsfile.install-machine-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.install-db-agent rel=external>Jenkinsfile.install-db-agent</a></li><li><a href=https://github.com/chambear2809/sm-jenkins/blob/main/pipelines/Jenkinsfile.cleanup rel=external>Jenkinsfile.cleanup</a></li></ul><h2 id=testing-pipeline-configuration>Testing Pipeline Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before running a full deployment, test your pipeline configuration:</p><h3 id=1-dry-run-with-single-host>1. Dry Run with Single Host<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Create a test credential <code>deployment-hosts-test</code> with only one IP</li><li>Temporarily modify your pipeline to use this credential</li><li>Run the pipeline and verify it works on a single host</li><li>Once verified, update to use the full host list</li></ol><h3 id=2-check-syntax>2. Check Syntax<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Jenkins provides a built-in syntax validator:</p><ol><li>Go to your pipeline</li><li>Click <strong>Pipeline Syntax</strong> link</li><li>Use the <strong>Declarative Directive Generator</strong> to validate syntax</li></ol><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With pipelines created, you&rsquo;re ready to execute your first Smart Agent deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment-workflow>Deployment Workflow</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=first-deployment>First Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that your pipelines are configured, let&rsquo;s walk through executing your first Smart Agent deployment.</p><h3 id=step-1-navigate-to-pipeline>Step 1: Navigate to Pipeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Jenkins Dashboard</strong></li><li>Click on your <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><h3 id=step-2-build-with-parameters>Step 2: Build with Parameters<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p>Click <strong>Build with Parameters</strong> in the left sidebar</p></li><li><p>Review the default parameters:</p><ul><li><strong>SMARTAGENT_ZIP_PATH</strong>: Verify path is correct</li><li><strong>REMOTE_INSTALL_DIR</strong>: <code>/opt/appdynamics/appdsmartagent</code></li><li><strong>APPD_USER</strong>: <code>ubuntu</code> (or your SSH user)</li><li><strong>APPD_GROUP</strong>: <code>ubuntu</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li><li><strong>AGENT_NAME</strong>: <code>smartagent</code></li><li><strong>LOG_LEVEL</strong>: <code>DEBUG</code></li></ul></li><li><p>Adjust parameters if needed</p></li><li><p>Click <strong>Build</strong></p></li></ol><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>For your first deployment, consider testing on a single host by creating a separate credential with just one IP address.</p></div></details><h3 id=step-3-monitor-pipeline-execution>Step 3: Monitor Pipeline Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After clicking <strong>Build</strong>, you&rsquo;ll see:</p><ol><li><strong>Build added to queue</strong> - Build number appears in Build History</li><li><strong>Click build number</strong> (e.g., #1) to view details</li><li><strong>Click Console Output</strong> to view real-time logs</li></ol><h3 id=step-4-understanding-console-output>Step 4: Understanding Console Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The console output shows each stage of the deployment:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Started by user admin
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on aws-vpc-agent in /home/ubuntu/jenkins/workspace/Deploy-Smart-Agent
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Preparation)
[Pipeline] script
[Pipeline] {
Preparing Smart Agent deployment to 3 hosts: 172.31.1.243, 172.31.1.48, 172.31.1.5
...</code></pre></div><p>Key stages you&rsquo;ll see:</p><ol><li>‚úÖ <strong>Preparation</strong> - Loads and validates host list</li><li>‚úÖ <strong>Extract Smart Agent</strong> - Extracts ZIP file</li><li>‚úÖ <strong>Configure Smart Agent</strong> - Creates config.ini</li><li>‚úÖ <strong>Deploy to Remote Hosts</strong> - Deploys to each host</li><li>‚úÖ <strong>Verify Installation</strong> - Checks Smart Agent status</li></ol><h3 id=step-5-review-results>Step 5: Review Results<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After completion, you&rsquo;ll see:</p><p><strong>Success:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent successfully deployed to all hosts
Finished: SUCCESS</code></pre></div><p><strong>Partial Success:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Deployment completed with some failures
Failed hosts: 172.31.1.48
Finished: UNSTABLE</code></pre></div><p><strong>Failure:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent deployment failed. Check logs for details.
Finished: FAILURE</code></pre></div><h2 id=verifying-installation>Verifying Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After a successful deployment, verify Smart Agent is running on target hosts.</p><h3 id=check-smart-agent-status>Check Smart Agent Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH into a target host and check the status:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target host</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Navigate to installation directory</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=list-installed-agents>List Installed Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>No agents currently installed
(Use install-machine-agent or install-db-agent pipelines to add agents)</code></pre></div><h3 id=check-logs>Check Logs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>tail -f log.log</span></span></code></pre></div><p>Look for successful connection messages to the AppDynamics controller.</p><h3 id=verify-in-appdynamics-controller>Verify in AppDynamics Controller<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Log into your AppDynamics Controller</li><li>Navigate to <strong>Servers ‚Üí Servers</strong></li><li>Look for your newly deployed hosts</li><li>Verify Smart Agent is reporting metrics</li></ol><h2 id=installing-additional-agents>Installing Additional Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once Smart Agent is deployed, you can install specific agent types using the other pipelines.</p><h3 id=install-machine-agent>Install Machine Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Install-Machine-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Review parameters:<ul><li><strong>AGENT_NAME</strong>: <code>machine-agent</code></li><li><strong>SSH_PORT</strong>: <code>22</code></li></ul></li><li>Click <strong>Build</strong></li></ol><p>The pipeline will SSH to each host and execute:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl install --component machine</span></span></code></pre></div><h3 id=install-database-agent>Install Database Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Install-Database-Agent</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li>Configure database connection parameters</li><li>Click <strong>Build</strong></li></ol><p>The pipeline will install and configure the Database Agent on all hosts.</p><h3 id=verify-agent-installation>Verify Agent Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After installing agents, verify they appear:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl list</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Installed agents:
- machine-agent (running)
- db-agent (running)</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Workflow:</strong></p><ol><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li><li>Wait for completion and verify</li><li>Run <strong>Install-Machine-Agent</strong> if needed</li><li>Run <strong>Install-Database-Agent</strong> if needed</li></ol><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To update Smart Agent to a new version:</p><ol><li>Download new Smart Agent ZIP</li><li>Place it in Jenkins at configured path</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline again</li></ol><p>The pipeline automatically:</p><ul><li>Stops existing Smart Agent</li><li>Removes old files</li><li>Installs new version</li><li>Restarts Smart Agent</li></ul><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To add Smart Agent to new hosts:</p><ol><li>Update the <code>deployment-hosts</code> credential in Jenkins</li><li>Add new IP addresses (one per line)</li><li>Run <strong>Deploy-Smart-Agent</strong> pipeline</li></ol><p>The pipeline will:</p><ul><li>Skip already-configured hosts (if idempotent)</li><li>Deploy to new hosts only</li></ul><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To completely remove Smart Agent from all hosts:</p><ol><li>Go to <strong>Cleanup-All-Agents</strong> pipeline</li><li>Click <strong>Build with Parameters</strong></li><li><strong>Check</strong> the <code>CONFIRM_CLEANUP</code> checkbox</li><li>Click <strong>Build</strong></li></ol><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>This will permanently delete <code>/opt/appdynamics/appdsmartagent</code> directory from all hosts. This action cannot be undone.</p></div></details><h2 id=troubleshooting-deployments>Troubleshooting Deployments<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=build-fails-at-preparation-stage>Build Fails at Preparation Stage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Pipeline fails when loading host list</p><p><strong>Cause</strong>: Missing or incorrect <code>deployment-hosts</code> credential</p><p><strong>Solution</strong>:</p><ol><li>Go to <strong>Manage Jenkins ‚Üí Credentials</strong></li><li>Verify <code>deployment-hosts</code> credential exists</li><li>Check format (one IP per line, no commas)</li><li>Ensure no trailing spaces</li></ol><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Check security group:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify Jenkins agent can reach target</span>
</span></span><span class=line><span class=cl>ping 172.31.1.243
</span></span><span class=line><span class=cl>telnet 172.31.1.243 <span class=m>22</span></span></span></code></pre></div><p><strong>Test SSH manually:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From Jenkins agent machine</span>
</span></span><span class=line><span class=cl>ssh -i /path/to/key ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Verify SSH key:</strong></p><ol><li>Ensure <code>ssh-private-key</code> credential is correct</li><li>Verify public key is in <code>~/.ssh/authorized_keys</code> on target hosts</li></ol><h3 id=smart-agent-fails-to-start>Smart Agent Fails to Start<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Deployment completes but Smart Agent not running</p><p><strong>Solution</strong>:</p><p><strong>Check logs on target host:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>cat log.log</span></span></code></pre></div><p><strong>Common issues:</strong></p><ul><li><strong>Invalid access key</strong>: Check <code>account-access-key</code> credential</li><li><strong>Network connectivity</strong>: Verify outbound HTTPS to Controller</li><li><strong>Permission issues</strong>: Ensure APPD_USER has correct permissions</li></ul><h3 id=partial-deployment-success>Partial Deployment Success<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li><strong>Check Console Output</strong> - Identifies which hosts failed</li><li><strong>Investigate failed hosts</strong> - SSH and test manually</li><li><strong>Re-run pipeline</strong> - Jenkins tracks which hosts need retry</li></ol><h2 id=pipeline-best-practices>Pipeline Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-test-on-single-host-first>1. Test on Single Host First<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Always test new configurations on a single host before deploying to production:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>1. Create deployment-hosts-test credential (1 IP)
2. Create test pipeline pointing to this credential
3. Verify success
4. Deploy to full host list</code></pre></div><h3 id=2-use-descriptive-build-descriptions>2. Use Descriptive Build Descriptions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After triggering a build, add a description:</p><ol><li>Go to build page</li><li>Click <strong>Edit Build Information</strong></li><li>Add description: &ldquo;Production deployment - Q4 2024&rdquo;</li></ol><h3 id=3-monitor-build-history>3. Monitor Build History<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Regularly check build history for patterns:</p><ul><li>Failed builds</li><li>Duration trends</li><li>Error messages</li></ul><h3 id=4-schedule-deployments-during-maintenance-windows>4. Schedule Deployments During Maintenance Windows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For production systems:</p><ul><li>Use Jenkins scheduled builds</li><li>Deploy during low-traffic periods</li><li>Have rollback plan ready</li></ul><h3 id=5-keep-credentials-updated>5. Keep Credentials Updated<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Rotate SSH keys quarterly</li><li>Update host lists as infrastructure changes</li><li>Verify AppDynamics access key validity</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now let&rsquo;s explore scaling and operational considerations for large deployments.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=github-actions-automation>GitHub Actions Automation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop demonstrates how to use <strong>GitHub Actions</strong> with a self-hosted runner to automate the deployment and lifecycle management of <strong>AppDynamics Smart Agent</strong> across multiple EC2 instances. Whether you&rsquo;re managing 10 hosts or 10,000, this guide shows you how to leverage GitHub Actions workflows for scalable, secure, and repeatable Smart Agent operations.</p><p><a href=#R-image-ecbc957dac398d2b7425a7d315df2a67 class=lightbox-link><img alt="GitHub Actions and AppDynamics" class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ecbc957dac398d2b7425a7d315df2a67><img alt="GitHub Actions and AppDynamics" class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat&logo=github-actions&logoColor=white"></a> <a href=#R-image-1fdf7b3ccc938e9dcae7c8f3f16222c7 class=lightbox-link><img alt=AppDynamics class="lazy lightbox figure-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1fdf7b3ccc938e9dcae7c8f3f16222c7><img alt=AppDynamics class="lazy lightbox lightbox-image" loading=lazy src="https://img.shields.io/badge/AppDynamics-0078D4?style=flat"></a></p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this workshop, you&rsquo;ll learn how to:</p><ul><li><strong>Deploy Smart Agent</strong> to multiple hosts using GitHub Actions workflows</li><li><strong>Configure GitHub secrets and variables</strong> for secure credentials management</li><li><strong>Set up a self-hosted runner</strong> in your AWS VPC</li><li><strong>Implement automatic batching</strong> to scale to thousands of hosts</li><li><strong>Manage the complete agent lifecycle</strong> - install, uninstall, stop, and cleanup</li><li><strong>Monitor workflow execution</strong> and troubleshoot issues</li></ul><h2 id=key-features>Key Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>üöÄ <strong>Parallel Deployment</strong> - Deploy to multiple hosts simultaneously</li><li>üîÑ <strong>Complete Lifecycle Management</strong> - 11 workflows covering all agent operations</li><li>üèóÔ∏è <strong>Infrastructure as Code</strong> - All workflows version-controlled in GitHub</li><li>üîê <strong>Secure</strong> - SSH keys stored as GitHub secrets, private VPC networking</li><li>üìà <strong>Massively Scalable</strong> - Deploy to thousands of hosts with automatic batching</li><li>üéõÔ∏è <strong>Self-hosted Runner</strong> - Executes within your AWS VPC</li></ul><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  GitHub Actions-based Deployment                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  Developer ‚îÄ‚îÄ‚ñ∂ GitHub.com ‚îÄ‚îÄ‚ñ∂ Self-hosted Runner (AWS VPC)     ‚îÇ
‚îÇ                                          ‚îÇ                       ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 1 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 2 (SSH)      ‚îÇ
‚îÇ                                          ‚îú‚îÄ‚îÄ‚ñ∂ Host 3 (SSH)      ‚îÇ
‚îÇ                                          ‚îî‚îÄ‚îÄ‚ñ∂ Host N (SSH)      ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  All hosts send metrics ‚îÄ‚îÄ‚ñ∂ AppDynamics Controller             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h2 id=workshop-components>Workshop Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop includes:</p><ol><li><strong>Architecture & Design</strong> - Understanding the GitHub Actions workflow architecture</li><li><strong>GitHub Setup</strong> - Configuring secrets, variables, and self-hosted runners</li><li><strong>Workflow Creation</strong> - Understanding and using the 11 available workflows</li><li><strong>Deployment Execution</strong> - Running workflows and verifying installations</li></ol><h2 id=available-workflows>Available Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This solution includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management:</p><table><thead><tr><th>Category</th><th>Workflows</th><th>Description</th></tr></thead><tbody><tr><td><strong>Deployment</strong></td><td>1</td><td>Deploy and start Smart Agent</td></tr><tr><td><strong>Agent Installation</strong></td><td>4</td><td>Install Node, Machine, DB, and Java agents</td></tr><tr><td><strong>Agent Uninstallation</strong></td><td>4</td><td>Uninstall specific agent types</td></tr><tr><td><strong>Agent Management</strong></td><td>2</td><td>Stop/clean and complete cleanup</td></tr></tbody></table><p>All workflows support automatic batching for scalability!</p><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>Self-hosted GitHub Actions runner in the same VPC</li><li>SSH key pair for authentication</li><li>AppDynamics Smart Agent package</li></ul><h2 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflow code and configuration files are available in the GitHub repository:</p><p><strong><a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></strong></p><p>The repository includes:</p><ul><li>11 complete workflow YAML files</li><li>Detailed setup documentation</li><li>Architecture diagrams</li><li>Troubleshooting guides</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of GitHub Actions Automation</h1><article class=default><header class=headline></header><h1 id=architecture--design>Architecture & Design</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=system-architecture>System Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub Actions-based Smart Agent deployment system uses a self-hosted runner within your AWS VPC to orchestrate deployments to multiple target hosts via SSH.</p><h3 id=high-level-architecture>High-Level Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">graph TB
    subgraph Internet
        GH[GitHub.com&lt;br/&gt;Repository &amp; Actions]
        User[Developer&lt;br/&gt;Local Machine]
    end

    subgraph AWS[&#34;AWS VPC (172.31.0.0/16)&#34;]
        subgraph SG[&#34;Security Group: smartagent-lab&#34;]
            Runner[Self-hosted Runner&lt;br/&gt;EC2 Instance&lt;br/&gt;172.31.1.x]
            
            subgraph Targets[&#34;Target Hosts&#34;]
                T1[Target Host 1&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.243]
                T2[Target Host 2&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.48]
                T3[Target Host 3&lt;br/&gt;Ubuntu EC2&lt;br/&gt;172.31.1.5]
            end
        end
    end

    User --&gt;|git push| GH
    GH &lt;--&gt;|HTTPS:443&lt;br/&gt;Poll for jobs| Runner
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T1
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T2
    Runner --&gt;|SSH:22&lt;br/&gt;Private IPs| T3

    style GH fill:#24292e,color:#fff
    style User fill:#0366d6,color:#fff
    style Runner fill:#28a745,color:#fff
    style T1 fill:#ffd33d,color:#000
    style T2 fill:#ffd33d,color:#000
    style T3 fill:#ffd33d,color:#000</pre><h2 id=network-architecture>Network Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All infrastructure runs in a single AWS VPC with a shared security group. The self-hosted runner communicates with target hosts via private IPs.</p><h3 id=vpc-layout>VPC Layout<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        AWS VPC (172.31.0.0/16)                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          Security Group: smartagent-lab                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Rules:                                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Inbound: SSH (22) from same security group            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Outbound: HTTPS (443) to GitHub                       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ Self-hosted ‚îÇ    ‚îÇ  Target EC2  ‚îÇ    ‚îÇ  Target EC2  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ   Runner    ‚îÇ    ‚îÇ              ‚îÇ    ‚îÇ              ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Private IP:  ‚îÇ    ‚îÇ Private IP:  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ 172.31.1.x  ‚îÇSSH ‚îÇ 172.31.1.243 ‚îÇ    ‚îÇ 172.31.1.48  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ              ‚îÇ    ‚îÇ              ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ Polls GitHub‚îÇ    ‚îÇ Ubuntu 20.04 ‚îÇ    ‚îÇ Ubuntu 20.04 ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                              ‚îÇ                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                               ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   AppDynamics    ‚îÇ
                    ‚îÇ    Controller    ‚îÇ
                    ‚îÇ  (SaaS/On-Prem)  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h2 id=workflow-execution-flow>Workflow Execution Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=complete-deployment-sequence>Complete Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><pre class="mermaid actionbar-wrapper align-center">sequenceDiagram
    participant Dev as Developer
    participant GH as GitHub
    participant Runner as Self-hosted Runner
    participant Target as Target Host(s)

    Dev-&gt;&gt;GH: 1. Push code or trigger workflow
    GH-&gt;&gt;GH: 2. Workflow event triggered
    Runner-&gt;&gt;GH: 3. Poll for jobs (HTTPS:443)
    GH-&gt;&gt;Runner: 4. Assign job to runner
    Runner-&gt;&gt;Runner: 5. Execute prepare job&lt;br/&gt;(load host matrix)
    
    par Parallel Execution
        Runner-&gt;&gt;Target: 6a. SSH to Host 1&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6b. SSH to Host 2&lt;br/&gt;(port 22)
        Runner-&gt;&gt;Target: 6c. SSH to Host 3&lt;br/&gt;(port 22)
    end
    
    Target-&gt;&gt;Target: 7. Execute commands&lt;br/&gt;(install/uninstall/stop/clean)
    Target--&gt;&gt;Runner: 8. Return results
    Runner--&gt;&gt;GH: 9. Report job status
    GH--&gt;&gt;Dev: 10. Notify completion</pre><h2 id=component-details>Component Details<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=github-repository>GitHub Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Stores:</strong></p><ul><li>11 workflow YAML files</li><li>Smart Agent installation package</li><li>Configuration file (config.ini)</li></ul><p><strong>Secrets:</strong></p><ul><li>SSH private key</li></ul><p><strong>Variables:</strong></p><ul><li>Host list (DEPLOYMENT_HOSTS)</li><li>User/group settings (optional)</li></ul><h3 id=self-hosted-runner>Self-hosted Runner<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Location:</strong></p><ul><li>AWS VPC (same as targets)</li><li>Private network access</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Poll GitHub for workflow jobs</li><li>Execute workflow steps</li><li>SSH to target hosts</li><li>File transfers (SCP)</li><li>Parallel execution</li><li>Error collection</li></ul><p><strong>Requirements:</strong></p><ul><li>Ubuntu/Amazon Linux 2</li><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>SSH key authentication</li></ul><p><strong>Access:</strong></p><ul><li>Outbound HTTPS (443) to GitHub</li><li>Outbound SSH (22) to target hosts</li><li>Uses SSH key authentication</li></ul><h3 id=target-hosts>Target Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Pre-requisites:</strong></p><ul><li>Ubuntu 20.04+</li><li>SSH server running</li><li>User with sudo access</li><li>Authorized SSH key</li></ul><p><strong>Post-deployment:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>/opt/appdynamics/
‚îî‚îÄ‚îÄ appdsmartagent/
    ‚îú‚îÄ‚îÄ smartagentctl
    ‚îú‚îÄ‚îÄ config.ini
    ‚îî‚îÄ‚îÄ agents/
        ‚îú‚îÄ‚îÄ machine/
        ‚îú‚îÄ‚îÄ java/
        ‚îú‚îÄ‚îÄ node/
        ‚îî‚îÄ‚îÄ db/</code></pre></div><h2 id=security-architecture>Security Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=security-layers>Security Layers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>AWS VPC Isolation</strong></p><ul><li>Private subnet for hosts</li><li>No direct internet access required</li><li>VPC flow logs enabled</li></ul></li><li><p><strong>Security Groups</strong></p><ul><li>SSH (22) within same security group only</li><li>HTTPS (443) outbound for GitHub access</li><li>Stateful firewall rules</li></ul></li><li><p><strong>SSH Key Authentication</strong></p><ul><li>No password authentication</li><li>Keys stored in GitHub Secrets</li><li>Temporary key files on runner</li><li>Keys removed after workflow</li></ul></li><li><p><strong>GitHub Security</strong></p><ul><li>Repository access controls</li><li>Branch protection rules</li><li>Secrets never exposed in logs</li><li>Environment variable masking</li></ul></li><li><p><strong>Network Security</strong></p><ul><li>Private IP communication only</li><li>No public IPs required</li><li>Runner in same VPC as targets</li></ul></li></ol><h2 id=workflow-categories>Workflow Categories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The system includes 11 workflows organized into 4 categories:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>GitHub Actions Workflows (11 Total)
‚îú‚îÄ‚îÄ Deployment (1 workflow)
‚îÇ   ‚îî‚îÄ‚îÄ Deploy Smart Agent (Batched)
‚îú‚îÄ‚îÄ Agent Installation (4 workflows)
‚îÇ   ‚îú‚îÄ‚îÄ Install Node Agent (Batched)
‚îÇ   ‚îú‚îÄ‚îÄ Install Machine Agent (Batched)
‚îÇ   ‚îú‚îÄ‚îÄ Install DB Agent (Batched)
‚îÇ   ‚îî‚îÄ‚îÄ Install Java Agent (Batched)
‚îú‚îÄ‚îÄ Agent Uninstallation (4 workflows)
‚îÇ   ‚îú‚îÄ‚îÄ Uninstall Node Agent (Batched)
‚îÇ   ‚îú‚îÄ‚îÄ Uninstall Machine Agent (Batched)
‚îÇ   ‚îú‚îÄ‚îÄ Uninstall DB Agent (Batched)
‚îÇ   ‚îî‚îÄ‚îÄ Uninstall Java Agent (Batched)
‚îî‚îÄ‚îÄ Smart Agent Management (2 workflows)
    ‚îú‚îÄ‚îÄ Stop and Clean Smart Agent (Batched)
    ‚îî‚îÄ‚îÄ Cleanup All Agents (Batched)</code></pre></div><h2 id=batching-strategy>Batching Strategy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflows use automatic batching to support deployments at any scale.</p><h3 id=how-batching-works>How Batching Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>HOST LIST (1000 hosts)              BATCH_SIZE = 256

Host 001: 172.31.1.1                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
Host 002: 172.31.1.2      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ‚îÇ   BATCH 1        ‚îÇ
    ...                              ‚îÇ   Hosts 1-256    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îê
Host 256: 172.31.1.256               ‚îÇ   Sequential     ‚îÇ    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
Host 257: 172.31.1.257               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
Host 258: 172.31.1.258   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   BATCH 2        ‚îÇ    ‚îÇ SEQUENTIAL
    ...                              ‚îÇ   Hosts 257-512  ‚îÇ    ‚îÇ EXECUTION
Host 512: 172.31.1.512               ‚îÇ   Sequential     ‚îÇ    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
Host 513: 172.31.1.513               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ...                              ‚îÇ   BATCH 3        ‚îÇ    ‚îÇ
Host 768: 172.31.1.768   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   Hosts 513-768  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Host 769: 172.31.1.769               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ...                              ‚îÇ   BATCH 4        ‚îÇ
Host 1000: 172.31.2.232  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ   Hosts 769-1000 ‚îÇ
                                     ‚îÇ   (232 hosts)    ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

WITHIN EACH BATCH:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  All hosts deploy in PARALLEL          ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  Host 1 ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ  Host 2 ‚îÄ‚îÄ‚î§                           ‚îÇ
‚îÇ  Host 3 ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂ Background processes (&amp;)‚îÇ
‚îÇ    ...    ‚îÇ                           ‚îÇ
‚îÇ  Host 256‚îÄ‚îò   ‚îî‚îÄ‚ñ∂ wait command        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre></div><h3 id=why-sequential-batches>Why Sequential Batches?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Resource Management:</strong></p><ul><li>Prevents overwhelming the self-hosted runner</li><li>Each batch opens 256 parallel SSH connections</li><li>Sequential processing ensures stable performance</li></ul><p><strong>Configurable:</strong></p><ul><li>Default batch size: 256 (GitHub Actions matrix limit)</li><li>Adjustable via workflow input for smaller batches</li><li>Balance between speed and resource usage</li></ul><h3 id=scaling-characteristics>Scaling Characteristics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Deployment Speed (default BATCH_SIZE=256):</strong></p><ul><li>10 hosts ‚Üí 1 batch ‚Üí ~2 minutes</li><li>100 hosts ‚Üí 1 batch ‚Üí ~3 minutes</li><li>500 hosts ‚Üí 2 batches ‚Üí ~6 minutes</li><li>1,000 hosts ‚Üí 4 batches ‚Üí ~12 minutes</li><li>5,000 hosts ‚Üí 20 batches ‚Üí ~60 minutes</li></ul><p><strong>Factors affecting speed:</strong></p><ul><li>Network bandwidth (19MB package per host)</li><li>SSH connection overhead (~1s per host)</li><li>Target host CPU/disk speed</li><li>Runner resources (CPU/memory)</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the architecture, let&rsquo;s move on to setting up GitHub and configuring the self-hosted runner.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=github-setup>GitHub Setup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before you begin, ensure you have:</p><ul><li>GitHub account with repository access</li><li>AWS VPC with Ubuntu EC2 instances</li><li>SSH key pair (PEM file) for authentication to target hosts</li><li>AppDynamics Smart Agent package</li><li>Target Ubuntu EC2 instances with SSH access</li></ul><h2 id=fork-or-clone-the-repository>Fork or Clone the Repository<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>First, get access to the GitHub Actions lab repository:</p><p><strong>Repository URL</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Option 1: Fork the repository via GitHub UI</span>
</span></span><span class=line><span class=cl><span class=c1># Go to https://github.com/chambear2809/github-actions-lab</span>
</span></span><span class=line><span class=cl><span class=c1># Click &#34;Fork&#34; button</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Option 2: Clone directly (for testing)</span>
</span></span><span class=line><span class=cl>git clone https://github.com/chambear2809/github-actions-lab.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> github-actions-lab</span></span></code></pre></div><h2 id=configure-self-hosted-runner>Configure Self-hosted Runner<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your self-hosted runner must be deployed in the same AWS VPC as your target EC2 instances.</p><h3 id=install-runner-on-ec2-instance>Install Runner on EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p><strong>Launch EC2 instance</strong> in your VPC (Ubuntu or Amazon Linux 2)</p></li><li><p><strong>Navigate to runner settings</strong> in your forked repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Settings ‚Üí Actions ‚Üí Runners ‚Üí New self-hosted runner</code></pre></div></li><li><p><strong>SSH into the runner instance</strong> and execute installation commands:</p></li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create runner directory</span>
</span></span><span class=line><span class=cl>mkdir actions-runner <span class=o>&amp;&amp;</span> <span class=nb>cd</span> actions-runner
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Download runner (check GitHub for latest version)</span>
</span></span><span class=line><span class=cl>curl -o actions-runner-linux-x64-2.311.0.tar.gz -L <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract</span>
</span></span><span class=line><span class=cl>tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configure (use token from GitHub UI)</span>
</span></span><span class=line><span class=cl>./config.sh --url https://github.com/YOUR_USERNAME/github-actions-lab --token YOUR_TOKEN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install as service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start service</span>
</span></span><span class=line><span class=cl>sudo ./svc.sh start</span></span></code></pre></div><h3 id=verify-runner-status>Verify Runner Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Check that the runner appears as <strong>&ldquo;Idle&rdquo;</strong> (green) in:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Settings ‚Üí Actions ‚Üí Runners</code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The runner must remain online and idle to pick up workflow jobs. If it shows offline, check the service status: <code>sudo ./svc.sh status</code></p></div></details><h2 id=configure-github-secrets>Configure GitHub Secrets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Secrets</strong></p><h3 id=ssh-private-key-secret>SSH Private Key Secret<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This secret contains your SSH private key for accessing target hosts.</p><ol><li>Click <strong>&ldquo;New repository secret&rdquo;</strong></li><li><strong>Name</strong>: <code>SSH_PRIVATE_KEY</code></li><li><strong>Value</strong>: Paste the contents of your PEM file</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View your PEM file</span>
</span></span><span class=line><span class=cl>cat /path/to/your-key.pem</span></span></code></pre></div><p>Example format:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
...
-----END RSA PRIVATE KEY-----</code></pre></div><ol start=4><li>Click <strong>&ldquo;Add secret&rdquo;</strong></li></ol><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
Important</summary><div class=box-content><p>Never commit SSH keys to your repository! Always use GitHub Secrets for sensitive credentials.</p></div></details><h2 id=configure-github-variables>Configure GitHub Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to: <strong>Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Variables</strong></p><h3 id=deployment-hosts-variable-required>Deployment Hosts Variable (Required)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This variable contains the list of all target hosts where Smart Agent should be deployed.</p><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>DEPLOYMENT_HOSTS</code></li><li><strong>Value</strong>: Enter your target host IPs (one per line)</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>172.31.1.243
172.31.1.48
172.31.1.5
172.31.10.20
172.31.10.21</code></pre></div><p><strong>Format Requirements:</strong></p><ul><li>One IP per line</li><li>No commas</li><li>No spaces</li><li>No extra characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><ol start=4><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h3 id=optional-variables>Optional Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>These variables are optional and used for Smart Agent service user/group configuration:</p><h4 id=smartagent_user>SMARTAGENT_USER<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_USER</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h4 id=smartagent_group>SMARTAGENT_GROUP<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Click <strong>&ldquo;New repository variable&rdquo;</strong></li><li><strong>Name</strong>: <code>SMARTAGENT_GROUP</code></li><li><strong>Value</strong>: e.g., <code>appdynamics</code></li><li>Click <strong>&ldquo;Add variable&rdquo;</strong></li></ol><h2 id=network-configuration>Network Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For the lab setup with all EC2 instances in the same VPC and security group:</p><h3 id=security-group-rules>Security Group Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Inbound Rules:</strong></p><ul><li>SSH (port 22) from same security group (source: same SG)</li></ul><p><strong>Outbound Rules:</strong></p><ul><li>HTTPS (port 443) to 0.0.0.0/0 (for GitHub API access)</li><li>SSH (port 22) to same security group (for target access)</li></ul><h3 id=network-best-practices>Network Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>‚úÖ Use private IP addresses (172.31.x.x) for <code>DEPLOYMENT_HOSTS</code></li><li>‚úÖ Runner and targets in same security group</li><li>‚úÖ No public IPs needed on target hosts</li><li>‚úÖ Runner communicates via private network</li><li>‚úÖ Outbound HTTPS required for GitHub polling</li></ul><h2 id=verify-configuration>Verify Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before running workflows, verify your setup:</p><h3 id=1-check-runner-status>1. Check Runner Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Settings ‚Üí Actions ‚Üí Runners</strong></li><li>Verify runner shows as &ldquo;Idle&rdquo; (green)</li><li>Check &ldquo;Last seen&rdquo; timestamp is recent</li></ol><h3 id=2-test-ssh-connectivity>2. Test SSH Connectivity<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH from your runner instance to a target host:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/your-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p>If successful, you should get a shell prompt on the target host.</p><h3 id=3-verify-secrets-and-variables>3. Verify Secrets and Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to <strong>Settings ‚Üí Secrets and variables ‚Üí Actions</strong></li><li>Confirm secrets tab shows: <code>SSH_PRIVATE_KEY</code></li><li>Confirm variables tab shows: <code>DEPLOYMENT_HOSTS</code></li></ol><h3 id=4-check-repository-access>4. Check Repository Access<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Ensure the runner can access the repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># On runner instance, as the runner user</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/actions-runner
</span></span><span class=line><span class=cl>./run.sh  <span class=c1># Test run (Ctrl+C to stop)</span></span></span></code></pre></div><p>You should see: &ldquo;Listening for Jobs&rdquo;</p><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=runner-not-picking-up-jobs>Runner Not Picking Up Jobs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflows stay in &ldquo;queued&rdquo; state</p><p><strong>Solution</strong>:</p><ul><li>Check runner status: <code>sudo systemctl status actions.runner.*</code></li><li>Restart runner: <code>sudo ./svc.sh restart</code></li><li>Verify outbound HTTPS (443) connectivity to GitHub</li></ul><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflows fail with &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo;</p><p><strong>Solution</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from runner</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243 -o <span class=nv>ConnectTimeout</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check security group allows SSH from runner</span>
</span></span><span class=line><span class=cl><span class=c1># Verify private key matches public key on targets</span></span></span></code></pre></div><h3 id=invalid-characters-in-hostname>Invalid Characters in Hostname<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Error: &ldquo;hostname contains invalid characters&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Edit <code>DEPLOYMENT_HOSTS</code> variable</li><li>Ensure no trailing spaces</li><li>Use Unix line endings (LF, not CRLF)</li><li>One IP per line, no extra characters</li></ul><h3 id=secrets-not-found>Secrets Not Found<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Error: &ldquo;Secret SSH_PRIVATE_KEY not found&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Verify secret name exactly matches: <code>SSH_PRIVATE_KEY</code></li><li>Check secret is in repository secrets (not environment secrets)</li><li>Ensure you have repository admin access</li></ul><h2 id=security-best-practices>Security Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Follow these best practices for secure operations:</p><ul><li>‚úÖ Use GitHub Secrets for all private keys</li><li>‚úÖ Rotate SSH keys regularly</li><li>‚úÖ Keep runner in private VPC subnet</li><li>‚úÖ Restrict runner security group to minimal access</li><li>‚úÖ Update runner software regularly</li><li>‚úÖ Enable branch protection rules</li><li>‚úÖ Use separate keys for different environments</li><li>‚úÖ Enable audit logging for repository access</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With GitHub configured and the runner set up, you&rsquo;re ready to explore the available workflows and execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=understanding-workflows>Understanding Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=available-workflows>Available Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The GitHub Actions lab includes <strong>11 workflows</strong> for complete Smart Agent lifecycle management. All workflow files are available in the repository at <code>.github/workflows/</code>.</p><p><strong>Repository</strong>: <a href=https://github.com/chambear2809/github-actions-lab rel=external>https://github.com/chambear2809/github-actions-lab</a></p><h2 id=workflow-categories>Workflow Categories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-deployment-1-workflow>1. Deployment (1 workflow)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=deploy-smart-agent-batched>Deploy Smart Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>deploy-agent-batched.yml</code></li><li><strong>Purpose</strong>: Installs Smart Agent and starts the service</li><li><strong>Features</strong>:<ul><li>Automatic batching (default: 256 hosts per batch)</li><li>Configurable batch size</li><li>Parallel deployment within each batch</li><li>Sequential batch processing</li></ul></li><li><strong>Inputs</strong>:<ul><li><code>batch_size</code>: Number of hosts per batch (default: 256)</li></ul></li><li><strong>Trigger</strong>: Manual only (<code>workflow_dispatch</code>)</li></ul><h3 id=2-agent-installation-4-workflows>2. Agent Installation (4 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All installation workflows use <code>smartagentctl</code> to install specific agent types:</p><h4 id=install-node-agent-batched>Install Node Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-machine-agent-batched>Install Machine Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-db-agent-batched>Install DB Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=install-java-agent-batched>Install Java Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>install-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl install java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=3-agent-uninstallation-4-workflows>3. Agent Uninstallation (4 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All uninstallation workflows use <code>smartagentctl</code> to remove specific agent types:</p><h4 id=uninstall-node-agent-batched>Uninstall Node Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-node-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall node</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-machine-agent-batched>Uninstall Machine Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-machine-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall machine</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-db-agent-batched>Uninstall DB Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-db-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall db</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=uninstall-java-agent-batched>Uninstall Java Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>uninstall-java-batched.yml</code></li><li><strong>Command</strong>: <code>smartagentctl uninstall java</code></li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h3 id=4-smart-agent-management-2-workflows>4. Smart Agent Management (2 workflows)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=stop-and-clean-smart-agent-batched>Stop and Clean Smart Agent (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>stop-clean-smartagent-batched.yml</code></li><li><strong>Commands</strong>:<ul><li><code>smartagentctl stop</code></li><li><code>smartagentctl clean</code></li></ul></li><li><strong>Purpose</strong>: Stops the Smart Agent service and purges all data</li><li><strong>Batched</strong>: Yes (configurable)</li></ul><h4 id=cleanup-all-agents-batched>Cleanup All Agents (Batched)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>File</strong>: <code>cleanup-appdynamics.yml</code></li><li><strong>Command</strong>: <code>sudo rm -rf /opt/appdynamics</code></li><li><strong>Purpose</strong>: Completely removes the /opt/appdynamics directory</li><li><strong>Batched</strong>: Yes (configurable)</li><li><strong>Warning</strong>: This permanently deletes all AppDynamics components</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>The &ldquo;Cleanup All Agents&rdquo; workflow permanently deletes <code>/opt/appdynamics</code>. This action cannot be undone. Use with caution!</p></div></details><h2 id=workflow-structure>Workflow Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All batched workflows follow a consistent two-job structure:</p><h3 id=job-1-prepare>Job 1: Prepare<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>prepare</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>batches</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.create-batches.outputs.batches }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Load hosts and create batches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        # Load DEPLOYMENT_HOSTS variable
</span></span></span><span class=line><span class=cl><span class=sd>        # Split into batches of N hosts
</span></span></span><span class=line><span class=cl><span class=sd>        # Output as JSON array</span></span></span></code></pre></div><p><strong>Purpose</strong>: Loads target hosts from GitHub variables and creates batch matrix</p><h3 id=job-2-deployinstalluninstall>Job 2: Deploy/Install/Uninstall<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>prepare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>self-hosted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>batch</span><span class=p>:</span><span class=w> </span><span class=l>${{ fromJson(needs.prepare.outputs.batches) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup SSH key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Execute operation on all hosts in batch (parallel)</span></span></span></code></pre></div><p><strong>Purpose</strong>: Runs in parallel for each batch, executing the specific operation on all hosts within the batch</p><h2 id=batching-behavior>Batching Behavior<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=how-it-works>How It Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Prepare Job</strong> loads <code>DEPLOYMENT_HOSTS</code> and splits into batches</li><li><strong>Deploy Job</strong> creates one matrix entry per batch</li><li><strong>Batches process sequentially</strong> to avoid overwhelming the runner</li><li><strong>Within each batch</strong>, all hosts deploy in parallel using background processes</li></ol><h3 id=configurable-batch-size>Configurable Batch Size<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>All workflows accept a <code>batch_size</code> input (default: 256):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via GitHub CLI</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Via GitHub UI</span>
</span></span><span class=line><span class=cl>Actions ‚Üí Select workflow ‚Üí Run workflow ‚Üí Set batch_size</span></span></code></pre></div><h3 id=examples>Examples<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>100 hosts, batch_size=256</strong>: 1 batch, ~3 minutes</li><li><strong>500 hosts, batch_size=256</strong>: 2 batches, ~6 minutes</li><li><strong>1,000 hosts, batch_size=128</strong>: 8 batches, ~16 minutes</li><li><strong>5,000 hosts, batch_size=256</strong>: 20 batches, ~60 minutes</li></ul><h2 id=workflow-execution-order>Workflow Execution Order<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=typical-deployment-sequence>Typical Deployment Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Deploy Smart Agent</strong> - Initial deployment</li><li><strong>Install Machine Agent</strong> - Install specific agents as needed</li><li><strong>Install DB Agent</strong> - Install database monitoring</li><li>(Use other install workflows as needed)</li></ol><h3 id=maintenanceupdate-sequence>Maintenance/Update Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services and clean data</li><li><strong>Deploy Smart Agent</strong> - Redeploy with updated version</li><li><strong>Install agents again</strong> - Reinstall required agents</li></ol><h3 id=complete-removal-sequence>Complete Removal Sequence<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><strong>Stop and Clean Smart Agent</strong> - Stop services</li><li><strong>Cleanup All Agents</strong> - Remove /opt/appdynamics directory</li></ol><h2 id=viewing-workflow-code>Viewing Workflow Code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can view the complete workflow YAML files in the repository:</p><p><strong>Main deployment workflow:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml rel=external>https://github.com/chambear2809/github-actions-lab/blob/main/.github/workflows/deploy-agent-batched.yml</a></p><p><strong>All workflows:</strong>
<a href=https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows rel=external>https://github.com/chambear2809/github-actions-lab/tree/main/.github/workflows</a></p><h2 id=workflow-features>Workflow Features<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=built-in-error-handling>Built-in Error Handling<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Per-host error tracking</li><li>Failed host reporting</li><li>Batch-level failure handling</li><li>Always-executed summary</li></ul><h3 id=parallel-execution>Parallel Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>All hosts within a batch deploy simultaneously</li><li>Uses SSH background processes (<code>&</code>)</li><li>Wait command ensures all complete</li><li>Maximum parallelism within resource limits</li></ul><h3 id=security>Security<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>SSH keys never exposed in logs</li><li>Credentials bound as environment variables</li><li>Strict host key checking disabled for automation</li><li>Keys removed after workflow completion</li></ul><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that you understand the available workflows, let&rsquo;s execute your first deployment!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=running-workflows>Running Workflows</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<h2 id=triggering-workflows>Triggering Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>All workflows are configured with <code>workflow_dispatch</code>, meaning they must be triggered manually. There are two main ways to run workflows:</p><ol><li><strong>GitHub UI</strong> - Visual interface, easiest for most users</li><li><strong>GitHub CLI</strong> - Command-line interface, great for automation</li></ol><h2 id=method-1-github-ui>Method 1: GitHub UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=step-1-navigate-to-actions-tab>Step 1: Navigate to Actions Tab<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Go to your forked repository on GitHub</li><li>Click the <strong>Actions</strong> tab at the top</li></ol><h3 id=step-2-select-workflow>Step 2: Select Workflow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>On the left sidebar, you&rsquo;ll see all available workflows:</p><ul><li>Deploy Smart Agent</li><li>Install Node Agent (Batched)</li><li>Install Machine Agent (Batched)</li><li>Install DB Agent (Batched)</li><li>Install Java Agent (Batched)</li><li>Uninstall Node Agent (Batched)</li><li>Uninstall Machine Agent (Batched)</li><li>Uninstall DB Agent (Batched)</li><li>Uninstall Java Agent (Batched)</li><li>Stop and Clean Smart Agent (Batched)</li><li>Cleanup All Agents</li></ul><p>Click on the workflow you want to run.</p><h3 id=step-3-run-workflow>Step 3: Run Workflow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button (top right)</li><li>Select branch: <strong>main</strong></li><li>(Optional) Adjust <strong>batch_size</strong> if desired</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong> button</li></ol><h3 id=step-4-monitor-execution>Step 4: Monitor Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>The workflow will appear in the list below</li><li>Click on the workflow run to view details</li><li>Watch progress in real-time</li><li>Click on job names to see detailed logs</li></ol><h2 id=method-2-github-cli>Method 2: GitHub CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=install-github-cli>Install GitHub CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># macOS</span>
</span></span><span class=line><span class=cl>brew install gh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Linux</span>
</span></span><span class=line><span class=cl>curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg <span class=p>|</span> sudo dd <span class=nv>of</span><span class=o>=</span>/usr/share/keyrings/githubcli-archive-keyring.gpg
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [arch=</span><span class=k>$(</span>dpkg --print-architecture<span class=k>)</span><span class=s2> signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/github-cli.list &gt; /dev/null
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install gh</span></span></code></pre></div><h3 id=authenticate>Authenticate<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh auth login</span></span></code></pre></div><h3 id=run-workflows>Run Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Deploy Smart Agent (default batch size)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Deploy with custom batch size</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Uninstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Uninstall Node Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Complete cleanup</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=monitor-workflows>Monitor Workflows<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List recent workflow runs</span>
</span></span><span class=line><span class=cl>gh run list --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View specific run</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Watch run in progress</span>
</span></span><span class=line><span class=cl>gh run watch RUN_ID --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View failed logs</span>
</span></span><span class=line><span class=cl>gh run view RUN_ID --log-failed --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=first-deployment-walkthrough>First Deployment Walkthrough<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s walk through a complete first-time deployment:</p><h3 id=step-1-verify-setup>Step 1: Verify Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Before running any workflows, ensure:</p><ul><li>‚úÖ Self-hosted runner shows &ldquo;Idle&rdquo; (green)</li><li>‚úÖ <code>SSH_PRIVATE_KEY</code> secret is configured</li><li>‚úÖ <code>DEPLOYMENT_HOSTS</code> variable contains your target IPs</li><li>‚úÖ Network connectivity verified</li></ul><h3 id=step-2-deploy-smart-agent>Step 2: Deploy Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Via GitHub UI:</strong></p><ol><li>Go to <strong>Actions</strong> tab</li><li>Select <strong>&ldquo;Deploy Smart Agent&rdquo;</strong></li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li><li>Accept default batch_size (256)</li><li>Click <strong>&ldquo;Run workflow&rdquo;</strong></li></ol><p><strong>Via GitHub CLI:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h3 id=step-3-monitor-execution>Step 3: Monitor Execution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The workflow will show:</p><ol><li><strong>Prepare</strong> job - Creating batch matrix</li><li><strong>Deploy</strong> job (one per batch) - Deploying to hosts</li></ol><p>Click on each job to view detailed logs.</p><h3 id=step-4-verify-installation>Step 4: Verify Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>SSH into a target host and check:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SSH to target</span>
</span></span><span class=line><span class=cl>ssh ubuntu@172.31.1.243
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Smart Agent status</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /opt/appdynamics/appdsmartagent
</span></span><span class=line><span class=cl>sudo ./smartagentctl status</span></span></code></pre></div><p><strong>Expected output:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Smart Agent is running (PID: 12345)
Service: appdsmartagent.service
Status: active (running)</code></pre></div><h3 id=step-5-install-additional-agents-optional>Step 5: Install Additional Agents (Optional)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If needed, install specific agent types:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Install Machine Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Install DB Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --repo YOUR_USERNAME/github-actions-lab</span></span></code></pre></div><h2 id=understanding-workflow-output>Understanding Workflow Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=prepare-job-output>Prepare Job Output<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Loading deployment hosts...
Total hosts: 1000
Batch size: 256
Creating 4 batches...
Batch 1: Hosts 1-256
Batch 2: Hosts 257-512
Batch 3: Hosts 513-768
Batch 4: Hosts 769-1000</code></pre></div><h3 id=deploy-job-output-per-batch>Deploy Job Output (per batch)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Processing batch 1 of 4
Deploying to 256 hosts in parallel...
Host 172.31.1.1: SUCCESS
Host 172.31.1.2: SUCCESS
Host 172.31.1.3: SUCCESS
...
Batch 1 complete: 256/256 succeeded</code></pre></div><h3 id=completion-summary>Completion Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>Deployment Summary:
Total hosts: 1000
Successful: 998
Failed: 2
Failed hosts:
  - 172.31.1.48
  - 172.31.1.125</code></pre></div><h2 id=common-deployment-scenarios>Common Deployment Scenarios<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=scenario-1-initial-deployment>Scenario 1: Initial Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Deploy Smart Agent</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Verify deployment</span>
</span></span><span class=line><span class=cl><span class=c1># SSH to a host and check status</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Install agents as needed</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install DB Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-2-update-smart-agent>Scenario 2: Update Smart Agent<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean current installation</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Update Smart Agent ZIP in repository</span>
</span></span><span class=line><span class=cl><span class=c1># (Push new version to repository)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Deploy new version</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Reinstall agents</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Install Machine Agent (Batched for Large Scale)&#34;</span></span></span></code></pre></div><h3 id=scenario-3-add-new-hosts>Scenario 3: Add New Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Update DEPLOYMENT_HOSTS variable in GitHub</span>
</span></span><span class=line><span class=cl><span class=c1># Add new IPs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Deploy to all hosts (will skip existing ones with idempotent logic)</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span></span></span></code></pre></div><h3 id=scenario-4-complete-removal>Scenario 4: Complete Removal<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Stop and clean</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Stop and Clean Smart Agent (Batched for Large Scale)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Complete removal</span>
</span></span><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Cleanup All Agents&#34;</span></span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:danger><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>&ldquo;Cleanup All Agents&rdquo; permanently deletes <code>/opt/appdynamics</code>. This cannot be undone!</p></div></details><h2 id=troubleshooting-workflow-failures>Troubleshooting Workflow Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=workflow-stays-in-queued>Workflow Stays in &ldquo;Queued&rdquo;<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Workflow doesn&rsquo;t start</p><p><strong>Cause</strong>: Runner not available or offline</p><p><strong>Solution</strong>:</p><ol><li>Check runner status: Settings ‚Üí Actions ‚Üí Runners</li><li>Verify runner shows &ldquo;Idle&rdquo; (green)</li><li>Restart runner if needed: <code>sudo ./svc.sh restart</code></li></ol><h3 id=ssh-connection-failures>SSH Connection Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Permission denied&rdquo; or &ldquo;Connection refused&rdquo; errors</p><p><strong>Solutions</strong>:</p><p><strong>Test SSH manually:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># From runner instance</span>
</span></span><span class=line><span class=cl>ssh -i ~/.ssh/test-key.pem ubuntu@172.31.1.243</span></span></code></pre></div><p><strong>Check security groups:</strong></p><ul><li>Verify SSH (22) allowed from runner</li><li>Confirm runner and targets in same security group</li></ul><p><strong>Verify SSH key:</strong></p><ul><li>Ensure <code>SSH_PRIVATE_KEY</code> secret matches actual key</li><li>Verify public key is on target hosts</li></ul><h3 id=partial-batch-failures>Partial Batch Failures<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: Some hosts succeed, others fail</p><p><strong>Solution</strong>:</p><ol><li>View workflow logs to identify failed hosts</li><li>SSH to failed hosts to investigate</li><li>Re-run workflow (idempotent - skips successful hosts)</li></ol><h3 id=batch-job-errors>Batch Job Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Symptom</strong>: &ldquo;Error splitting hosts into batches&rdquo;</p><p><strong>Solution</strong>:</p><ul><li>Check <code>DEPLOYMENT_HOSTS</code> variable format</li><li>Ensure one IP per line</li><li>No trailing spaces or special characters</li><li>Use Unix line endings (LF, not CRLF)</li></ul><h2 id=performance-tuning>Performance Tuning<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=adjusting-batch-size>Adjusting Batch Size<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Smaller batches</strong> (fewer resources, slower):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>128</span></span></span></code></pre></div><p><strong>Larger batches</strong> (more resources, faster):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gh workflow run <span class=s2>&#34;Deploy Smart Agent&#34;</span> -f <span class=nv>batch_size</span><span class=o>=</span><span class=m>256</span></span></span></code></pre></div><h3 id=runner-resource-recommendations>Runner Resource Recommendations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><table><thead><tr><th>Hosts</th><th>CPU</th><th>Memory</th><th>Batch Size</th></tr></thead><tbody><tr><td>1-100</td><td>2 cores</td><td>4 GB</td><td>256</td></tr><tr><td>100-500</td><td>4 cores</td><td>8 GB</td><td>256</td></tr><tr><td>500-2000</td><td>8 cores</td><td>16 GB</td><td>256</td></tr><tr><td>2000+</td><td>16 cores</td><td>32 GB</td><td>256</td></tr></tbody></table><h2 id=best-practices>Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p><strong>Test on single host first</strong></p><ul><li>Create a test variable with 1 IP</li><li>Run workflow to verify</li><li>Then deploy to full list</li></ul></li><li><p><strong>Monitor workflow execution</strong></p><ul><li>Watch logs in real-time</li><li>Check for errors immediately</li><li>Verify on sample hosts</li></ul></li><li><p><strong>Use appropriate batch sizes</strong></p><ul><li>Default (256) works for most cases</li><li>Reduce if runner struggles</li><li>Monitor runner resource usage</li></ul></li><li><p><strong>Keep workflows up to date</strong></p><ul><li>Pull latest changes from repository</li><li>Test updates on non-production first</li><li>Document any customizations</li></ul></li><li><p><strong>Maintain runner health</strong></p><ul><li>Keep runner online and idle</li><li>Update runner software regularly</li><li>Monitor disk space and resources</li></ul></li></ol><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Congratulations! You&rsquo;ve successfully learned how to automate AppDynamics Smart Agent deployment using GitHub Actions. For more information, visit the <a href=https://github.com/chambear2809/github-actions-lab rel=external>complete repository</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 17, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=monitoring-as-code-with-smart-agent-and-ansible>Monitoring as Code with Smart Agent and Ansible</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This guide details how to deploy the Cisco AppDynamics Smart Agent across multiple hosts using Ansible. By leveraging automation, you can ensure your monitoring infrastructure is consistent, robust, and easily scalable.</p><h2 id=architecture-overview>Architecture Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The deployment architecture leverages an Ansible Control Node to orchestrate the installation and configuration of the Smart Agent on target hosts.</p><pre class="mermaid actionbar-wrapper align-center">graph TD
    CN[Ansible Control Node&lt;br/&gt;(macOS/Linux)] --&gt;|SSH| H1[Target Host 1&lt;br/&gt;(Debian/RedHat)]
    CN --&gt;|SSH| H2[Target Host 2&lt;br/&gt;(Debian/RedHat)]
    CN --&gt;|SSH| H3[Target Host N&lt;br/&gt;(Debian/RedHat)]
    
    subgraph &#34;Target Host Configuration&#34;
        SA[Smart Agent Service]
        Config[config.ini]
        Package[Installer .deb/.rpm]
    end
    
    H1 --&gt; SA
    H2 --&gt; SA
    H3 --&gt; SA</pre><h3 id=key-components>Key Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>Ansible Control Node</strong>: The machine where you run the playbooks (e.g., your laptop or a jump host).</li><li><strong>Target Hosts</strong>: The servers where the Smart Agent will be installed.</li><li><strong>Inventory</strong>: A list of target hosts and their connection details.</li><li><strong>Playbook</strong>: The YAML file defining the deployment tasks.</li></ul><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before beginning, ensure you have:</p><ul><li>Access to the target hosts via SSH.</li><li>Sudo privileges on the target hosts.</li><li>The Smart Agent installation packages (<code>.deb</code> or <code>.rpm</code>) downloaded.</li><li>Account details for your AppDynamics Controller (Access Key, Account Name, URL).</li></ul><h2 id=step-1-install-ansible-on-macos>Step 1: Install Ansible on macOS<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To start, we need to install Ansible on your control node.</p><ol><li><p><strong>Install Homebrew</strong> (if not already installed):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/bin/bash -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></li><li><p><strong>Install Ansible</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install ansible</span></span></code></pre></div></li><li><p><strong>Verify the Installation</strong>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ansible --version</span></span></code></pre></div><p>You should see output indicating the installed version of Ansible.</p></li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Ansible Automation</h1><article class=default><header class=headline></header><h1 id=setup--configuration>Setup & Configuration</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=step-2-prepare-your-files-and-directory-structure>Step 2: Prepare Your Files and Directory Structure<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a project directory for your Ansible deployment. It should contain the following files:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ appdsmartagent_64_linux_24.6.0.2143.deb  # Debian package
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ appdsmartagent_64_linux_24.6.0.2143.rpm  # RedHat package
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ inventory-cloud.yaml                     # Inventory file
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ smartagent.yaml                          # Playbook
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ variables.yaml                           # Variables file</span></span></code></pre></div><p>Ensure you have downloaded the correct Smart Agent packages for your target environments.</p><h2 id=step-3-understanding-the-files>Step 3: Understanding the Files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-inventory-files-inventory-cloudyaml>1. Inventory Files (<code>inventory-cloud.yaml</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The inventory file lists the hosts where the Smart Agent will be deployed. Define your hosts and authentication details here.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>all</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>54.173.1.106</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>ec2-user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_ssh_common_args</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;-o StrictHostKeyChecking=no&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>192.168.86.107</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>aleccham</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smartagent-host-3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>54.82.95.69</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_username</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_method</span><span class=p>:</span><span class=w> </span><span class=l>sudo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible_become_password</span><span class=p>:</span><span class=w> </span><span class=l>ins3965!</span></span></span></code></pre></div><p><strong>Action</strong>: Update the <code>ansible_host</code> IPs and credentials with your actual lab environment details.</p><h3 id=2-variables-file-variablesyaml>2. Variables File (<code>variables.yaml</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>This file contains the configuration details for the Smart Agent.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>smart_agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>controller_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;CONTROLLER URL HERE, JUST THE BASE URL&#39;</span><span class=w> </span><span class=c># o11y.saas.appdynamics.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>account_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Account Name Here&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>account_access_key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;YOUR ACCESS KEY HERE&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>fm_service_port</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;443&#39;</span><span class=w> </span><span class=c># Use 443 or 8080 depending on your environment.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ssl</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>smart_agent_package_debian</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;appdsmartagent_64_linux_24.6.0.2143.deb&#39;</span><span class=w>  </span><span class=c># or the appropriate package name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>smart_agent_package_redhat</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;appdsmartagent_64_linux_24.6.0.2143.rpm&#39;</span><span class=w>  </span><span class=c># or the appropriate package name</span></span></span></code></pre></div><p><strong>Action</strong>: Update the <code>smart_agent</code> section with your specific controller URL, account name, and access key.</p><h3 id=3-playbook-smartagentyaml>3. Playbook (<code>smartagent.yaml</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The playbook orchestrates the deployment of the Cisco AppDynamics Distribution of OpenTelemetry Collector. Here is a concise summary of its tasks:</p><ol><li><strong>Prerequisites</strong>: Installs necessary packages (<code>yum-utils</code> for RedHat, <code>curl</code>/<code>apt-transport-https</code> for Debian).</li><li><strong>Directory Setup</strong>: Ensures the <code>/opt/appdynamics/appdsmartagent</code> directory exists.</li><li><strong>Configuration</strong>:<ul><li>Checks if <code>config.ini</code> exists.</li><li>Creates a default <code>config.ini</code> using values from <code>variables.yaml</code> if missing.</li><li>Updates configuration keys (AccountAccessKey, ControllerURL, etc.) using <code>lineinfile</code> to ensure settings are correct.</li></ul></li><li><strong>Package Management</strong>:<ul><li>Determines the correct package path based on OS family (Debian/RedHat).</li><li>Fails if the package is missing locally.</li><li>Copies the package to the target host&rsquo;s <code>/tmp</code> directory.</li><li>Installs the package using <code>dpkg</code> or <code>yum</code>.</li></ul></li><li><strong>Service Management</strong>: Restarts the <code>smartagent</code> service.</li><li><strong>Cleanup</strong>: Removes the temporary package file.</li></ol><p>The playbook uses <code>when: ansible_os_family == ...</code> conditionals to handle both RedHat and Debian systems within the same workflow.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment>Deployment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=step-4-execute-the-playbook>Step 4: Execute the Playbook<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To deploy the Smart Agent, run the following command from your project directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ansible-playbook -i inventory-cloud.yaml smartagent.yaml</span></span></code></pre></div><p>Replace <code>inventory-cloud.yaml</code> with the appropriate inventory file for your setup if you named it differently.</p><h3 id=verification>Verification<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After the playbook completes successfully, you can verify the deployment by logging into one of the target hosts and checking the service status:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl status smartagent</span></span></code></pre></div><p>You should see the service is active (running).</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 25, 2025</span></span></footer></article></section></section></section></section><article class=default><header class=headline></header><h1 id=scenarios>Scenarios</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-e7a40aa071e07540ec264e94dd19b2c1><div class=card-content><div class=card-title id=R-card-e7a40aa071e07540ec264e94dd19b2c1><a href=/observability-workshop/en/scenarios/optimize-monitoring/index.html>Optimize Cloud Monitoring</a></div><div class=card-content-text>This scenario is for ITOps teams managing a hybrid infrastructure that need to troubleshoot cloud-native performance issues, by correlating real-time metrics with logs to troubleshoot faster, improve MTTD/MTTR, and optimize costs.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-04f086e82e9d5fcdb4fc448a1840cc5d><div class=card-content><div class=card-title id=R-card-04f086e82e9d5fcdb4fc448a1840cc5d><a href=/observability-workshop/en/scenarios/debug-problems/index.html>Debug Problems in Microservices</a></div><div class=card-content-text>This scenario helps engineering teams identify and fix issues caused by planned and unplanned changes to their microservices-based applications.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-ab658493cdf40673fe8105fb4ed1b12a><div class=card-content><div class=card-title id=R-card-ab658493cdf40673fe8105fb4ed1b12a><a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/index.html>Optimize End User Experiences</a></div><div class=card-content-text>Use Splunk Real User Monitoring (RUM) and Synthetics to get insight into end user experience, and proactively test scenarios to improve that experience.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-cb2d32ecfc84fc1b5d973315eff97e00><div class=card-content><div class=card-title id=R-card-cb2d32ecfc84fc1b5d973315eff97e00><a href=/observability-workshop/en/scenarios/thousandeyes-integration/index.html>ThousandEyes Integration</a></div><div class=card-content-text>Deploy ThousandEyes Enterprise Agent in Kubernetes and integrate synthetic monitoring data with Splunk Observability Cloud for unified visibility across your infrastructure.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-5f1cf425602f005688e05cd6af14fe67><div class=card-content><div class=card-title id=R-card-5f1cf425602f005688e05cd6af14fe67><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/index.html>Isovalent Splunk Observability Integration</a></div><div class=card-content-text>Deploy Isovalent Enterprise Platform (Cilium, Hubble, and Tetragon) on Amazon EKS and integrate with Splunk Observability Cloud for comprehensive eBPF-based monitoring and observability.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Scenarios</h1><article class=default><header class=headline></header><h1 id=optimize-cloud-monitoring>Optimize Cloud Monitoring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>The elasticity of cloud architectures means that monitoring artifacts must scale elastically as well, breaking the paradigm of purpose-built monitoring assets. As a result, administrative overhead, visibility gaps, and tech debt skyrocket while MTTR slows. This typically happens for three reasons:</p><ul><li><strong>Complex and Inefficient Data Management</strong>: Infrastructure data is scattered across multiple tools with inconsistent naming conventions, leading to fragmented views and poor metadata and labelling. Managing multiple agents and data flows adds to the complexity.</li><li><strong>Inadequate Monitoring and Troubleshooting Experience</strong>: Slow data visualization and troubleshooting, cluttered with bespoke dashboards and manual correlations, are hindered further by the lack of monitoring tools for ephemeral technologies like Kubernetes and serverless functions.</li><li><strong>Operational and Scaling Challenges</strong>: Manual onboarding, user management, and chargeback processes, along with the need for extensive data summarization, slow down operations and inflate administrative tasks, complicating data collection and scalability.</li></ul><p>To address these challenges you need a way to:</p><ul><li><strong>Standardize Data Collection and Tags</strong>: Centralized monitoring with a single, open-source agent to apply uniform naming standards and ensure metadata for visibility. Optimize data collection and use a monitoring-as-code approach for consistent collection and tagging.</li><li><strong>Reuse Content Across Teams</strong>: Streamline new IT infrastructure onboarding and user management with templates and automation. Utilize out-of-the-box dashboards, alerts, and self-service tools to enable content reuse, ensuring uniform monitoring and reducing manual effort.</li><li><strong>Improve Timeliness of Alerts</strong>: Utilize highly performant open source data collection, combined with real-time streaming-based data analytics and alerting, to enhance the timeliness of notifications. Automatically configured alerts for common problem patterns (AutoDetect) and minimal yet effective monitoring dashboards and alerts will ensure rapid response to emerging issues, minimizing potential disruptions.</li><li><strong>Correlate Infrastructure Metrics and Logs</strong>: Achieve full monitoring coverage of all IT infrastructure by enabling seamless correlation between infrastructure metrics and logs. High-performing data visualization and a single source of truth for data, dashboards, and alerts will simplify the correlation process, allowing for more effective troubleshooting and analysis of the IT environment.</li></ul><p>In this workshop, we&rsquo;ll explore:</p><ul><li>How to standardize data collection and tags using <strong>OpenTelemetry</strong>.</li><li>How to reuse content across teams.</li><li>How to improve timelines of alerts.</li><li>How to correlate infrastructure metrics and logs.</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Optimize Cloud Monitoring</h1><article class=default><header class=headline></header><h1 id=getting-started>Getting Started</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>During this <em><strong>technical</strong></em> Optimize Cloud Monitoring Workshop, you will build out an environment based on a <a href=https://k3s.io/ rel=external>lightweight</a> Kubernetes<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> cluster.</p><p>To simplify the workshop modules, a pre-configured AWS/EC2 instance is provided.</p><p>The instance is pre-configured with all the software required to deploy the Splunk OpenTelemetry Connector<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> and the microservices-based OpenTelemetry Demo Application<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> in Kubernetes which has been instrumented using OpenTelemetry to send metrics, traces, spans and logs.</p><p>This workshop will introduce you to the benefits of standardized data collection, how content can be re-used across teams, correlating metrics and logs, and creating detectors to fire alerts. By the end of these technical workshops, you will have a good understanding of some of the key features and capabilities of the Splunk Observability Cloud.</p><p>Here are the instructions on how to access your pre-configured <a href=/observability-workshop/en/scenarios/optimize-monitoring/1-getting-started/1-access-ec2/index.html>AWS/EC2 instance</a></p><p><a href=#R-image-9bdca7260c4b0e73c006fccea67bdc6d class=lightbox-link><img alt="Splunk Architecture" class="lazy lightbox figure-image" loading=lazy src=../images/architecture.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9bdca7260c4b0e73c006fccea67bdc6d><img alt="Splunk Architecture" class="lazy lightbox lightbox-image" loading=lazy src=../images/architecture.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/ rel=external><strong>Kubernetes</strong></a> is a portable, extensible, open-source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://opentelemetry.io/ rel=external><strong>OpenTelemetry Collector</strong></a> offers a vendor-agnostic implementation on how to receive, process and export telemetry data. In addition, it removes the need to run, operate and maintain multiple agents/collectors to support open-source telemetry data formats (e.g. Jaeger, Prometheus, etc.) sending to multiple open-source or commercial back-ends.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The <a href=https://opentelemetry.io/docs/demo/ rel=external><strong>OpenTelemetry Demo Application</strong></a> is a microservice-based distributed system intended to illustrate the implementation of OpenTelemetry in a near real-world environment.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=how-to-connect-to-your-workshop-environment>How to connect to your workshop environment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><ol><li>How to retrieve the IP address of the AWS/EC2 instance assigned to you.</li><li>Connect to your instance using SSH, Putty<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> or your web browser.</li><li>Verify your connection to your AWS/EC2 cloud instance.</li><li>Using Putty (Optional)</li><li>Using Multipass (Optional)</li></ol><hr><h2 id=1-awsec2-ip-address>1. AWS/EC2 IP Address<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In preparation for the workshop, Splunk has prepared an Ubuntu Linux instance in AWS/EC2.</p><p>To get access to the instance that you will be using in the workshop please visit the URL to access the Google Sheet provided by the workshop leader.</p><p>Search for your AWS/EC2 instance by looking for your first and last name, as provided during registration for this workshop.</p><p><a href=#R-image-1a5d951f70b43c5a3685aff694bb30df class=lightbox-link><img alt="attendee spreadsheet" class="lazy lightbox figure-image" loading=lazy src=../../images/spreadsheet-info.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1a5d951f70b43c5a3685aff694bb30df><img alt="attendee spreadsheet" class="lazy lightbox lightbox-image" loading=lazy src=../../images/spreadsheet-info.png></a></p><p>Find your allocated IP address, SSH command (for Mac OS, Linux and the latest Windows versions) and password to enable you to connect to your workshop instance.</p><p>It also has the Browser Access URL that you can use in case you cannot connect via SSH or Putty - see <a href=/observability-workshop/en/scenarios/optimize-monitoring/1-getting-started/1-access-ec2/index.html#4-web-browser-all>EC2 access via Web browser</a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>Please use SSH or Putty to gain access to your EC2 instance if possible and
make a note of the IP address as you will need this during the workshop.</p></div></details><h2 id=2-ssh-mac-oslinux>2. SSH (Mac OS/Linux)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Most attendees will be able to connect to the workshop by using SSH from their Mac or Linux device, or on Windows 10 and above.</p><p>To use SSH, open a terminal on your system and type <code>ssh splunk@x.x.x.x</code> (replacing x.x.x.x with the IP address found in Step #1).</p><p><a href=#R-image-d5fd06f4519da0e5a16b0ffd30c0c360 class=lightbox-link><img alt="ssh login" class="lazy lightbox figure-image" loading=lazy src=../../images/ssh-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5fd06f4519da0e5a16b0ffd30c0c360><img alt="ssh login" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ssh-1.png></a></p><p>When prompted <strong><code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></strong> please type <strong><code>yes</code></strong>.</p><p><a href=#R-image-a0f2043585f030865df6b35cd9fb5e53 class=lightbox-link><img alt="ssh password" class="lazy lightbox figure-image" loading=lazy src=../../images/ssh-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a0f2043585f030865df6b35cd9fb5e53><img alt="ssh password" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ssh-2.png></a></p><p>Enter the password provided in the Google Sheet from Step #1.</p><p>Upon successful login, you will be presented with the Splunk logo and the Linux prompt.</p><p><a href=#R-image-5dc97beba162fe6e1a95e8d1b76a5905 class=lightbox-link><img alt="ssh connected" class="lazy lightbox figure-image" loading=lazy src=../../images/ssh-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5dc97beba162fe6e1a95e8d1b76a5905><img alt="ssh connected" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ssh-3.png></a></p><h2 id=3-ssh-windows-10-and-above>3. SSH (Windows 10 and above)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The procedure described above is the same on Windows 10, and the commands can be executed either in the Windows Command Prompt or PowerShell.
However, Windows regards its SSH Client as an &ldquo;optional feature&rdquo;, which might need to be enabled.</p><p>You can verify if SSH is enabled by simply executing <code>ssh</code></p><p>If you are shown a help text on how to use the SSH command (like shown in the screenshot below), you are all set.</p><p><a href=#R-image-e0a9cf9ac7d77b247e9814be96491f61 class=lightbox-link><img alt="Windows SSH enabled" class="lazy lightbox figure-image" loading=lazy src=../../images/windows-ssh-enabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e0a9cf9ac7d77b247e9814be96491f61><img alt="Windows SSH enabled" class="lazy lightbox lightbox-image" loading=lazy src=../../images/windows-ssh-enabled-feedback.png></a></p><p>If the result of executing the command looks something like the screenshot below, you want to enable the &ldquo;OpenSSH Client&rdquo; feature manually.</p><p><a href=#R-image-879a36fc0dfe92af152235ff0619663d class=lightbox-link><img alt="Windows SSH disabled" class="lazy lightbox figure-image" loading=lazy src=../../images/windows-ssh-disabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-879a36fc0dfe92af152235ff0619663d><img alt="Windows SSH disabled" class="lazy lightbox lightbox-image" loading=lazy src=../../images/windows-ssh-disabled-feedback.png></a></p><p>To do that, open the &ldquo;Settings&rdquo; menu, and click on &ldquo;Apps&rdquo;. While in the &ldquo;Apps & features&rdquo; section, click on &ldquo;Optional features&rdquo;.</p><p><a href=#R-image-89de62de77a1b9e0a30569a88bf08016 class=lightbox-link><img alt="Windows Apps Settings" class="lazy lightbox figure-image" loading=lazy src=../../images/windows-gui-optionalfeatures.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-89de62de77a1b9e0a30569a88bf08016><img alt="Windows Apps Settings" class="lazy lightbox lightbox-image" loading=lazy src=../../images/windows-gui-optionalfeatures.png></a></p><p>Here, you are presented with a list of installed features. On the top, you see a button with a plus icon to &ldquo;Add a feature&rdquo;. Click it.
In the search input field, type &ldquo;OpenSSH&rdquo;, and find a feature called &ldquo;OpenSSH Client&rdquo;, or respectively, &ldquo;OpenSSH Client (Beta)&rdquo;, click on it, and click the &ldquo;Install&rdquo;-button.</p><p><a href=#R-image-3afe850b30c14740005469470df3eebd class=lightbox-link><img alt="Windows Enable OpenSSH Client" class="lazy lightbox figure-image" loading=lazy src=../../images/windows-enable-openssh-client.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3afe850b30c14740005469470df3eebd><img alt="Windows Enable OpenSSH Client" class="lazy lightbox lightbox-image" loading=lazy src=../../images/windows-enable-openssh-client.png></a></p><p>Now you are set! In case you are not able to access the provided instance despite enabling the OpenSSH feature, please do not shy away from reaching
out to the course instructor, either via chat or directly.</p><p>At this point you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=4-putty-for-windows-versions-prior-to-windows-10>4. Putty (For Windows Versions prior to Windows 10)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you do not have SSH pre-installed or if you are on a Windows system, the best option is to install Putty which you can find <a href=https://www.putty.org/ rel=external>here.</a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>If you <strong>cannot</strong> install Putty, please go to <a href=/observability-workshop/en/scenarios/optimize-monitoring/1-getting-started/1-access-ec2/index.html#4-web-browser-all>Web Browser (All)</a>.</p></div></details><p>Open Putty and enter in the <strong>Host Name (or IP address)</strong> field the IP address provided in the Google Sheet.</p><p>You can optionally save your settings by providing a name and pressing <strong>Save</strong>.</p><p><a href=#R-image-8f6447c4068b277683794476832ae8e2 class=lightbox-link><img alt=putty-2 class="lazy lightbox figure-image" loading=lazy src=../../images/putty-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f6447c4068b277683794476832ae8e2><img alt=putty-2 class="lazy lightbox lightbox-image" loading=lazy src=../../images/putty-settings.png></a></p><p>To then login to your instance click on the <strong>Open</strong> button as shown above.</p><p>If this is the first time connecting to your AWS/EC2 workshop instance, you will be presented with a security dialogue, please click <strong>Yes</strong>.</p><p><a href=#R-image-3a901a051a129ea610a8428e3c7a4782 class=lightbox-link><img alt=putty-3 class="lazy lightbox figure-image" loading=lazy src=../../images/putty-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3a901a051a129ea610a8428e3c7a4782><img alt=putty-3 class="lazy lightbox lightbox-image" loading=lazy src=../../images/putty-security.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-9a3dd72a5201e218ef004d1c16ba659c class=lightbox-link><img alt=putty-4 class="lazy lightbox figure-image" loading=lazy src=../../images/putty-loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9a3dd72a5201e218ef004d1c16ba659c><img alt=putty-4 class="lazy lightbox lightbox-image" loading=lazy src=../../images/putty-loggedin.png></a></p><p>At this point, you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=5-web-browser-all>5. Web Browser (All)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you are blocked from using SSH (Port 22) or unable to install Putty you may be able to connect to the workshop instance by using a web browser.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This assumes that access to port 6501 is not restricted by your company&rsquo;s firewall.</p></div></details><p>Open your web browser and type <strong><a href=http://x.x.x.x:6501 rel=external>http://x.x.x.x:6501</a></strong> (where X.X.X.X is the IP address from the Google Sheet).</p><p><a href=#R-image-cf7ecb549c0199abaf227598d979792a class=lightbox-link><img alt=http-6501 class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-url.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cf7ecb549c0199abaf227598d979792a><img alt=http-6501 class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-url.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p><a href=#R-image-cd13763298ef347c53bcbac7b2fa837c class=lightbox-link><img alt=http-connect class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd13763298ef347c53bcbac7b2fa837c><img alt=http-connect class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-connect.png></a></p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-d651b81b48063214dbe374d742898b1f class=lightbox-link><img alt="web login" class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d651b81b48063214dbe374d742898b1f><img alt="web login" class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-login.png></a></p><p>Unlike when you are using regular SSH, <em>copy and paste</em> does require a few extra steps to complete when using a browser session. This is due to cross browser restrictions.</p><p>When the workshop asks you to copy instructions into your terminal, please do the following:</p><p><em>Copy the instruction as normal, but when ready to paste it in the web terminal, choose <strong>Paste from the browser</strong> as show below:</em></p><p><a href=#R-image-09f65a9a1392b082f143abe6fca2b484 class=lightbox-link><img alt="web paste 1" class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-paste-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-09f65a9a1392b082f143abe6fca2b484><img alt="web paste 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-paste-browser.png></a></p><p>This will open a dialogue box asking for the text to be pasted into the web terminal:</p><p><a href=#R-image-67c1e43b56777a42179d52a2c09c3dd8 class=lightbox-link><img alt="web paste 3" class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-example-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-67c1e43b56777a42179d52a2c09c3dd8><img alt="web paste 3" class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-example-1.png></a></p><p>Paste the text in the text box as shown, then press <strong>OK</strong> to complete the copy and paste process.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Unlike regular SSH connection, the web browser has a 60-second time out, and you will be disconnected, and a <strong>Connect</strong> button will be shown in the center of the web terminal.</p><p>Simply click the <strong>Connect</strong> button and you will be reconnected and will be able to continue.</p></div></details><p><a href=#R-image-31f7cd73b5bee603757c4ad3853b88d6 class=lightbox-link><img alt="web reconnect" class="lazy lightbox figure-image" loading=lazy src=../../images//shellinabox-reconnect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31f7cd73b5bee603757c4ad3853b88d6><img alt="web reconnect" class="lazy lightbox lightbox-image" loading=lazy src=../../images//shellinabox-reconnect.png></a></p><p>At this point, you are ready to continue and <a href=../gdi/index.html>start the workshop</a>.</p><hr><h2 id=6-multipass-all>6. Multipass (All)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you are unable to access AWS but want to install software locally, follow the instructions for <a href=https://github.com/splunk/observability-workshop/blob/main/multipass/README.md rel=external>using Multipass</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.chiark.greenend.org.uk/~sgtatham/putty/ rel=external>Download Putty</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-opentelemetry-demo-applciation>Deploy OpenTelemetry Demo Applciation</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For this workshop, we&rsquo;ll be using the <strong>OpenTelemetry Demo Application</strong> running in Kubernetes. This application is for an online retailer and includes more than a dozen services written in many different languages. While metrics, traces, and logs are being collected from this application, this workshop is primarily focused on how <strong>Splunk Observability Cloud</strong> can be used to more efficiently monitor infrastructure.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>You should have access to the EC2 instance provided in section <a href=/observability-workshop/en/scenarios/optimize-monitoring/1-getting-started/1-access-ec2/index.html>1.1 Access AWS/EC2 Instance</a></li></ul><h2 id=initial-steps>Initial Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The initial setup can be completed by executing the following steps on the command line of your EC2 instance.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/optimize-cloud-monitoring <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>./deploy-application.sh</span></span></code></pre></div><p>You&rsquo;ll be asked to enter your favorite city. This will be used in the OpenTelemetry Collector configuration as a <strong>custom tag</strong> to show how easy it is to add additional context to your observability data.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Custom tagging will be covered in more detail in the <a href=../standardize_data_collection/>Standardize Data Collection</a> section of this workshop.</p></div></details><p><a href=#R-image-bc6355ed20e9887e6f438e3d64fc5529 class=lightbox-link><img alt="Enter Favorite City" class="lazy lightbox figure-image" loading=lazy src="../../images/favorite-city.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bc6355ed20e9887e6f438e3d64fc5529><img alt="Enter Favorite City" class="lazy lightbox lightbox-image" loading=lazy src="../../images/favorite-city.png?width=40vw"></a></p><p><strong>Your application should now be running and sending data to Splunk Observability Cloud. You&rsquo;ll dig into the data in the next section.</strong></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=standardize-data-collection>Standardize Data Collection</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><h2 id=why-standards-matter>Why Standards Matter<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>As cloud adoption grows, we often face requests to support new technologies within a diverse landscape, posing challenges in delivering timely content. Take, for instance, a team containerizing five workloads on AWS requiring EKS visibility. Usually, this involves assisting with integration setup, configuring metadata, and creating dashboards and alerts‚Äîa process that&rsquo;s both time-consuming and increases administrative overhead and technical debt.</p><p><strong>Splunk Observability Cloud</strong> was designed to handle customers with a diverse set of technical requirements and stacks ‚Äì from monolithic to microservices architectures, from homegrown applications to Software-as-a-Service.</p><p>Splunk offers a native experience for OpenTelemetry, which means OTel is the preferred way to get data into Splunk.
Between Splunk‚Äôs integrations and the OpenTelemetry community, there are a number of integrations available to easily collect from diverse infrastructure and applications. This includes both on-prem systems like VMWare and as well as guided integrations with cloud vendors, centralizing these hybrid environments.</p><p><a href=#R-image-f79d47430af8e9f95404803f7442567f class=lightbox-link><img alt="Splunk Observability Cloud Integrations" class="lazy lightbox figure-image" loading=lazy src="../images/integrations.png?width=50vw" style=height:auto;width:50vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f79d47430af8e9f95404803f7442567f><img alt="Splunk Observability Cloud Integrations" class="lazy lightbox lightbox-image" loading=lazy src="../images/integrations.png?width=50vw"></a></p><p>For someone like a Splunk admin, the OpenTelemetry Collector can additionally be deployed to a Splunk Universal Forwarder as a <a href=https://splunkbase.splunk.com/app/7125 rel=external>Technical Add-on</a>. This enables fast roll-out and centralized configuration management using the Splunk Deployment Server.
Let‚Äôs assume that the same team adopting Kubernetes is going to deploy a cluster for each one of our B2B customers. I‚Äôll show you how to make a simple modification to the OpenTelemetry collector to add the customerID, and then use mirrored dashboards to allow any of our SRE teams to easily see the customer they care about.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Standardize Data Collection</h1><article class=default><header class=headline></header><h1 id=what-are-tags>What Are Tags?</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>Tags are key-value pairs that provide additional metadata about metrics, spans in a trace, or logs allowing you to enrich the context of the data you send to <strong>Splunk Observability Cloud</strong>. Many tags are collected by default such as hostname or OS type. Custom tags can be used to provide environment or application-specific context. Examples of custom tags include:</p><h6 id=infrastructure-specific-attributes>Infrastructure specific attributes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><ul><li>What data center a host is in</li><li>What services are hosted on an instance</li><li>What team is responsible for a set of hosts</li></ul><h6 id=application-specific-attributes>Application specific attributes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><ul><li>What Application Version is running</li><li>Feature flags or experimental identifiers</li><li>Tenant ID in multi-tenant applications</li></ul><h6 id=user-related-attributes>User related attributes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><ul><li>User ID</li><li>User role (e.g. admin, guest, subscriber)</li><li>User geographical location (e.g. country, city, region)</li></ul><h6 id=there-are-two-ways-to-add-tags-to-your-data>There are two ways to add tags to your data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h6><ul><li>Add tags as OpenTelemetry attributes to metrics, traces, and logs when you send data to the Splunk Distribution of OpenTelemetry Collector. This option lets you add spans in bulk.</li><li>Instrument your application to create span tags. This option gives you the most flexibility at the per-application level.</li></ul><h3 id=why-are-tags-so-important>Why are tags so important?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Tags are essential for an application to be truly observable. Tags add context to the traces to help us understand why some users get a great experience and others don&rsquo;t. Powerful features in <strong>Splunk Observability Cloud</strong> utilize tags to help you jump quickly to the root cause.</p><p><strong>Contextual Information:</strong> Tags provide additional context to the metrics, traces, and logs allowing developers and operators to understand the behavior and characteristics of infrastructure and traced operations.</p><p><strong>Filtering and Aggregation:</strong> Tags enable filtering and aggregation of collected data. By attaching tags, users can filter and aggregate data based on specific criteria. This filtering and aggregation help in identifying patterns, diagnosing issues, and gaining insights into system behavior.</p><p><strong>Correlation and Analysis:</strong> Tags facilitate correlation between metrics and other telemetry data, such as traces and logs. By including common identifiers or contextual information as tags, users can correlate metrics, traces, and logs enabling comprehensive analysis and troubleshooting of distributed systems.</p><p><strong>Customization and Flexibility:</strong> OpenTelemetry allows developers to define custom tags based on their application requirements. This flexibility enables developers to capture domain-specific metadata or contextual information that is crucial for understanding the behavior of their applications.</p><h3 id=attributes-vs-tags>Attributes vs. Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>A note about terminology before we proceed. While this workshop is about <strong>tags</strong>, and this is the terminology we use in <strong>Splunk Observability Cloud</strong>, OpenTelemetry uses the term <strong>attributes</strong> instead. So when you see tags mentioned throughout this workshop, you can treat them as synonymous with attributes.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-context-with-tags>Adding Context With Tags</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>When you <a href=../getting_started/2-deploy-application/>deployed the OpenTelemetry Demo Application</a> in the <a href=../getting_started/>Getting Started</a> section of this workshop, you were asked to enter your favorite city. For this workshop, we&rsquo;ll be using that to show the value of custom tags.</p><p>For this workshop, the OpenTelemetry collector is pre-configured to use the city you provided as a custom tag called <code>store.location</code> which will be used to emulate Kubernetes Clusters running in different geographic locations. We&rsquo;ll use this tag as a filter to show how you can use Out-of-the-Box integration dashboards to quickly create views for specific teams, applications, or other attributes about your environment. Efficiently enabling content to be reused across teams without increasing technical debt.</p><p>Here is the OpenTelemetry Collector configuration used to add the <code>store.location</code> tag to all of the data sent to this collector. This means any metrics, traces, or logs will contain the <code>store.location</code> tag which can then be used to search, filter, or correlate this value.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>If you&rsquo;re interested in a deeper dive on the <strong>OpenTelemetry Collector</strong>, head over to the <a href=../../self_service_observability/><strong>Self Service Observability</strong></a> workshop where you can get hands-on with configuring the collector or the <a href=../../../../other/5-opentelemetry-collector><strong>OpenTelemetry Collector Ninja Workshop</strong></a> where you&rsquo;ll dissect the inner workings of each collector component.</p></div></details><p><a href=#R-image-d6193eabe6164391dfc638478506eed9 class=lightbox-link><img alt="OpenTelemetry Collector Configuration" class="lazy lightbox figure-image" loading=lazy src="../../images/otel-config.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d6193eabe6164391dfc638478506eed9><img alt="OpenTelemetry Collector Configuration" class="lazy lightbox lightbox-image" loading=lazy src="../../images/otel-config.png?width=60vw"></a></p><p>While this example uses a hard-coded value for the tag, parameterized values can also be used, allowing you to customize the tags dynamically based on the context of each host, application, or operation. This flexibility enables you to capture relevant metadata, user-specific details, or system parameters, providing a rich context for metrics, tracing, and log data while enhancing the observability of your distributed systems.</p><p>Now that you have the appropriate context, which as we&rsquo;ve established is critical to Observability, let&rsquo;s head over to <strong>Splunk Observability Cloud</strong> and see how we can use the data we&rsquo;ve just configured.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=reuse-content-across-teams>Reuse Content Across Teams</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>In today&rsquo;s rapidly evolving technological landscape, where hybrid and cloud environments are becoming the norm, the need for effective monitoring and troubleshooting solutions has never been more critical. However, managing the elasticity and complexity of these modern infrastructures poses a significant challenge for teams across various industries. One of the primary pain points encountered in this endeavor is the inadequacy of existing monitoring and troubleshooting experiences.</p><p>Traditional monitoring approaches often fall short in addressing the intricacies of hybrid and cloud environments. Teams frequently encounter slow data visualization and troubleshooting processes, compounded by the clutter of bespoke yet similar dashboards and the manual correlation of data from disparate sources. This cumbersome workflow is made worse by the absence of monitoring tools tailored to ephemeral technologies such as containers, orchestrators like Kubernetes, and serverless functions.</p><p><a href=#R-image-d5e167d0be1aae56fed4abd3957adeea class=lightbox-link><img alt="Infrastructure Overview in Splunk Observability Cloud" class="lazy lightbox figure-image" loading=lazy src="../images/infra-overview.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5e167d0be1aae56fed4abd3957adeea><img alt="Infrastructure Overview in Splunk Observability Cloud" class="lazy lightbox lightbox-image" loading=lazy src="../images/infra-overview.png?width=60vw"></a></p><p>In this section, we&rsquo;ll cover how <strong>Splunk Observability Cloud</strong> provides out-of-the-box content for every integration. Not only do the out-of-the-box dashboards provide rich visibility into the infrastructure that is being monitored they can also be mirrored. This is important because it enables you to create standard dashboards for use by teams throughout your organization. This allows all teams to see any changes to the charts in the dashboard, and members of each team can set dashboard variables and filter customizations relevant to their requirements.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Reuse Content Across Teams</h1><article class=default><header class=headline></header><h1 id=infrastrcuture-navigators>Infrastrcuture Navigators</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>Splunk Infrastructure Monitoring (IM) is a market-leading monitoring and observability service for hybrid cloud environments. Built on a patented streaming architecture, it provides a <strong>real-time</strong> solution for engineering teams to visualize and analyze performance across infrastructure, services, and applications in a fraction of the time and with greater accuracy than traditional solutions.</p><p><strong>300+ Easy-to-use OOTB content:</strong> Pre-built navigators and dashboards, deliver immediate visualizations of your entire environment so that you can interact with all your data in real time.<br><strong>Kubernetes navigator:</strong> Provides an instant, comprehensive out-of-the-box hierarchical view of nodes, pods, and containers. Ramp up even the most novice Kubernetes user with easy-to-understand interactive cluster maps.<br><strong>AutoDetect alerts and detectors:</strong> Automatically identify the most important metrics, out-of-the-box, to create alert conditions for detectors that accurately alert from the moment telemetry data is ingested and use real-time alerting capabilities for important notifications in seconds.<br><strong>Log views in dashboards:</strong> Combine log messages and real-time metrics on one page with common filters and time controls for faster in-context troubleshooting.<br><strong>Metrics pipeline management:</strong> Control metrics volume at the point of ingest without re-instrumentation with a set of aggregation and data-dropping rules to store and analyze only the needed data. Reduce metrics volume and optimize observability spend.</p><p><a href=#R-image-845ccdac61c627f62609b18c6f1ed15f class=lightbox-link><img alt="Infrastructure Overview" class="lazy lightbox figure-image" loading=lazy src=../../images/infra-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-845ccdac61c627f62609b18c6f1ed15f><img alt="Infrastructure Overview" class="lazy lightbox lightbox-image" loading=lazy src=../../images/infra-overview.png></a></p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Find your Kubernetes Cluster</summary><div class=box-content><ul><li>From the <strong>Splunk Observability Cloud</strong> homepage, click the <a href=#R-image-e8f5f48766efce68431f530a17829e83 class=lightbox-link><img alt=Infrastructure class="inline lazy lightbox figure-image" loading=lazy src="../../images/infra-button.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e8f5f48766efce68431f530a17829e83><img alt=Infrastructure class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/infra-button.png?height=20px&classes=inline"></a> button -> <strong>Kubernetes</strong> -> <strong>K8s nodes</strong></li><li>First, use the <a href=#R-image-2e58d0e47c76eaa9fc4baec8bb9d8771 class=lightbox-link><img alt="k8s filter" class="inline lazy lightbox figure-image" loading=lazy src="../../images/k8s-add-filter.png?classes=inline" style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2e58d0e47c76eaa9fc4baec8bb9d8771><img alt="k8s filter" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-add-filter.png?classes=inline"></a> option to pick your cluster.</li><li>From the filter drop-down box, use the <code>store.location</code> value you entered when deploying the application.</li><li>You then can start typing the city you used which should also appear in the drop-down values. Select yours and make sure just the one for your workshop is highlighted with a <a href=#R-image-dbe5c5f0a473e2aa64986ddbdf3f3ab0 class=lightbox-link><img alt="blue tick" class="inline lazy lightbox figure-image" loading=lazy src="../../images/select-checkmark.png?classes=inline&width=30px" style=height:auto;width:30px></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dbe5c5f0a473e2aa64986ddbdf3f3ab0><img alt="blue tick" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/select-checkmark.png?classes=inline&width=30px"></a>.</li><li>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Apply Filter</span></span></span> button to focus on our Cluster.</li></ul><p><a href=#R-image-cae9d25353a06c0adf8c845279978c04 class=lightbox-link><img alt="Kubernetes Navigator" class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-nav.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cae9d25353a06c0adf8c845279978c04><img alt="Kubernetes Navigator" class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-nav.png></a></p><ul><li>You should now have your Kubernetes Cluster visible</li><li>Here we can see all of the different components of the cluster (Nodes, Pods, etc), each of which has relevant metrics associated with it. On the right side, you can also see what services are running in the cluster.</li></ul><p><strong>Before moving to the next section, take some time to explore the Kubernetes Navigator to see the data that is available Out of the Box.</strong></p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=dashboard-cloning>Dashboard Cloning</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>ITOps teams responsible for monitoring fleets of infrastructure frequently find themselves manually creating dashboards to visualize and analyze metrics, traces, and log data emanating from rapidly changing cloud-native workloads hosted in Kubernetes and serverless architectures, alongside existing on-premises systems. Moreover, due to the absence of a standardized troubleshooting workflow, teams often resort to creating numerous custom dashboards, each resembling the other in structure and content. As a result, administrative overhead skyrockets and MTTR slows.</p><p>To address this, you can use the out-of-the-box dashboards available in <strong>Splunk Observability Cloud</strong> for each and every integration. These dashboards are filterable and can be used for ad hoc troubleshooting or as a templated approach to getting users the information they need without having to start from scratch. Not only do the out-of-the-box dashboards provide rich visibility into the infrastructure that is being monitored they can also be cloned.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create a Mirrored Dashboard</summary><div class=box-content><ol><li>In <strong>Splunk Observability Cloud</strong>, click the Global Search <a href=#R-image-c4c0e1d3a9241b39aa804a41ca1471c1 class=lightbox-link><img alt=Search class="inline lazy lightbox figure-image" loading=lazy src="../../images/search.png?height=20px&classes=inline" style=height:20px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c4c0e1d3a9241b39aa804a41ca1471c1><img alt=Search class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/search.png?height=20px&classes=inline"></a> button. (Global Search can be used to quickly find content)</li><li>Search for <strong>Pods</strong> and select <strong>K8s pods (Kubernetes)</strong>
<a href=#R-image-f5dc4b329dcb51109f6fb36cee181168 class=lightbox-link><img alt=Search class="lazy lightbox figure-image" loading=lazy src=../../images/search-k8s-pods.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5dc4b329dcb51109f6fb36cee181168><img alt=Search class="lazy lightbox lightbox-image" loading=lazy src=../../images/search-k8s-pods.png></a></li><li>This will take you to the out-of-the-box Kubernetes Pods dashboard which we will use as a template for mirroring dashboards.</li><li>In the upper right corner of the dashboard click the <strong>Dashboard actions</strong> button (3 horizontal dots) -> Click <strong>Save As&mldr;</strong>
<a href=#R-image-8f58ff42c3938889741cf4e9d8905545 class=lightbox-link><img alt=Search class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-pod-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f58ff42c3938889741cf4e9d8905545><img alt=Search class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-pod-dashboard.png></a></li><li>Enter a dashboard name (i.e. <strong>Kubernetes Pods Dashboard</strong>)</li><li>Under <strong>Dashboard group</strong> search for your e-mail address and select it.</li><li>Click <strong>Save</strong></li></ol><p><strong>Note:</strong> Every Observability Cloud user who has set a password and logged in at least once, gets a user dashboard group and user dashboard. Your user dashboard group is your individual workspace within Observability Cloud.</p><p><a href=#R-image-e65ab9e2384e5cc0319bfef80496ee5e class=lightbox-link><img alt="Save Dashboard" class="lazy lightbox figure-image" loading=lazy src="../../images/save-dashboard.png?height=400px" style=height:400px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e65ab9e2384e5cc0319bfef80496ee5e><img alt="Save Dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../../images/save-dashboard.png?height=400px"></a></p><p>After saving, you will be taken to the newly created dashboard in the Dashboard Group for your user. This is an example of cloning an out-of-the-box dashboard which can be further customized and enables users to quickly build role, application, or environment relevant views.</p><p>Custom dashboards are meant to be used by multiple people and usually represent a curated set of charts that you want to make accessible to a broad cross-section of your organization. They are typically organized by service, team, or environment.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=dashboard-mirroring>Dashboard Mirroring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>Not only do the out-of-the-box dashboards provide rich visibility into the infrastructure that is being monitored they can also be mirrored. This is important because it enables you to create standard dashboards for use by teams throughout your organization. This allows all teams to see any changes to the charts in the dashboard, and members of each team can set dashboard variables and filter customizations relevant to their requirements.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create a Mirrored Dashboard</summary><div class=box-content><ol><li><p>While on the Kubernetes Pods dashboard, you created in the previous step, In the upper right corner of the dashboard click the <strong>Dashboard actions</strong> button (3 horizontal dots) -> Click <strong>Add a mirror&mldr;</strong>. A configuration modal for the Dashboard Mirror will open.</p><p><a href=#R-image-7b457b0b8b703615767f7195e0a5e4f4 class=lightbox-link><img alt="Mirror Dashboard Menu" class="lazy lightbox figure-image" loading=lazy src="../../images/mirror-dashboard-menu.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7b457b0b8b703615767f7195e0a5e4f4><img alt="Mirror Dashboard Menu" class="lazy lightbox lightbox-image" loading=lazy src="../../images/mirror-dashboard-menu.png?width=40vw"></a></p></li><li><p>Under <strong>My dashboard group</strong> search for your e-mail address and select it.</p></li><li><p>(Optional) Modify the dashboard in <strong>Dashboard name override</strong> name.</p></li><li><p>(Optional) Add a dashboard description in <strong>Dashboard description override</strong>.</p></li><li><p>Under <strong>Default filter overrides</strong> search for <code>k8s.cluster.name</code> and select the name of your Kubernetes cluster.</p></li><li><p>Under <strong>Default filter overrides</strong> search for <code>store.location</code> and select the city you entered during the workshop setup.
<a href=#R-image-8aa96e19bddbd2b670b77be0696e3fdc class=lightbox-link><img alt="Mirror Dashboard Config" class="lazy lightbox figure-image" loading=lazy src="../../images/mirror-dashboard-config.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8aa96e19bddbd2b670b77be0696e3fdc><img alt="Mirror Dashboard Config" class="lazy lightbox lightbox-image" loading=lazy src="../../images/mirror-dashboard-config.png?width=40vw"></a></p></li><li><p>Click <strong>Save</strong></p></li></ol><p>You will now be taken to the newly created dashboard which is a mirror of the Kubernetes Pods dashboard you created in the previous section. Any changes to the original dashboard will be reflected in this dashboard as well. This allows teams to have a consistent yet specific view of the systems they care about and any modifications or updates can be applied in a single location, significantly minimizing the effort needed when compared to updating each individual dashboard.</p><p>In the next section, you&rsquo;ll add a new logs-based chart to the original dashboard and see how the dashboard mirror is automatically updated as well.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=correlate-metrics-and-logs>Correlate Metrics and Logs</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 minute</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>Correlating infrastructure metrics and logs is often a challenging task, primarily due to inconsistencies in naming conventions across various data sources, including hosts operating on different systems. However, leveraging the capabilities of <strong>OpenTelemetry</strong> can significantly simplify this process. With OpenTelemetry&rsquo;s robust framework, which offers rich metadata and attribution, metrics, traces, and logs can seamlessly correlate using standardized field names. This automated correlation not only alleviates the burden of manual effort but also enhances the overall observability of the system.</p><p>By aligning metrics and logs based on common field names, teams gain deeper insights into system performance, enabling more efficient troubleshooting, proactive monitoring, and optimization of resources. In this workshop section, we&rsquo;ll explore the importance of correlating metrics with logs and demonstrate how Splunk <strong>Observability Cloud</strong> empowers teams to unlock additional value from their observability data.</p><p><a href=#R-image-dc858e26a5e9fdf83b115737ba838d25 class=lightbox-link><img alt="Log Observer" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dc858e26a5e9fdf83b115737ba838d25><img alt="Log Observer" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Correlate Metrics and Logs</h1><article class=default><header class=headline></header><h1 id=correlate-metrics-and-logs>Correlate Metrics and Logs</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>In this section, we&rsquo;ll dive into the seamless correlation of metrics and logs facilitated by the robust naming standards offered by <strong>OpenTelemetry</strong>. By harnessing the power of OpenTelemetry within <strong>Splunk Observability Cloud</strong>, we&rsquo;ll demonstrate how troubleshooting issues becomes significantly more efficient for Site Reliability Engineers (SREs) and operators. With this integration, contextualizing data across various telemetry sources no longer demands manual effort to correlate information. Instead, SREs and operators gain immediate access to the pertinent context they need, allowing them to swiftly pinpoint and resolve issues, improving system reliability and performance.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: View pod logs</summary><div class=box-content><p>The <strong>Kubernetes Pods Dashboard</strong> you created in the previous section already includes a chart that contains all of the pod logs for your Kubernetes Cluster. The log entries are split by container in this stacked bar chart. To view specific log entries perform the following steps:</p><ol><li><p>On the <strong>Kubernetes Pods Dashboard</strong> click on one of the bar charts. A modal will open with the most recent log entries for the container you&rsquo;ve selected.</p><p><a href=#R-image-53d9d3b5ed7cb45f423c789ee4de09c4 class=lightbox-link><img alt="K8s pod logs" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-logs.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-53d9d3b5ed7cb45f423c789ee4de09c4><img alt="K8s pod logs" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-logs.png?width=40vw"></a></p></li><li><p>Click one of the log entries.</p><p><a href=#R-image-dba0d73acae35bf69118a555d5ff49ab class=lightbox-link><img alt="K8s pod log event" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-log-event.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dba0d73acae35bf69118a555d5ff49ab><img alt="K8s pod log event" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-log-event.png?width=40vw"></a></p><p>Here we can see the entire log event with all of the fields and values. You can search for specific field names or values within the event itself using the <strong>Search for fields</strong> bar in the event.</p></li><li><p>Enter the city you configured during the application deployment</p><p><a href=#R-image-5c31316df51bcbe75d1688f5986d65e6 class=lightbox-link><img alt="K8s pod log field search" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-log-field-search.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5c31316df51bcbe75d1688f5986d65e6><img alt="K8s pod log field search" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-log-field-search.png?width=40vw"></a></p><p>The event will now be filtered to the <code>store.location</code> field. This feature is great for exploring large log entries for specific fields and values unique to your environment or to search for keywords like <code>Error</code> or <code>Failure</code>.</p></li><li><p>Close the event using the <code>X</code> in the upper right corner.</p></li><li><p>Click the <strong>Chart actions</strong> (three horizontal dots) on the <strong>Pod log event rate</strong> chart</p></li><li><p>Click <strong>View in Log Observer</strong></p></li></ol><p><a href=#R-image-c1c600bdfef66e765209d9b02b552e6e class=lightbox-link><img alt="View in Log Observer" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-loc.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c1c600bdfef66e765209d9b02b552e6e><img alt="View in Log Observer" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-loc.png?width=40vw"></a></p><p>This will take us to <strong>Log Observer</strong>. In the next section, you&rsquo;ll create a chart based on log events and add it to the <strong>K8s Pod Dashboard</strong> you cloned in section <a href=../../3-reuse-content-across-teams/2-clone-dashboards>3.2 Dashboard Cloning</a>. You&rsquo;ll also see how this new chart is automatically added to the mirrored dashboard you created in section <a href=../../3-reuse-content-across-teams/3-mirror-dashboards>3.3 Dashboard Mirroring</a>.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-log-based-chart>Create Log-based Chart</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>In Log Observer, you can perform codeless queries on logs to detect the source of problems in your systems. You can also extract fields from logs to set up log processing rules and transform your data as it arrives or send data to Infinite Logging S3 buckets for future use. See <a href=https://docs.splunk.com/observability/en/logs/get-started-logs.html#logobserverfeatures rel=external>What can I do with Log Observer?</a> to learn more about Log Observer capabilities.</p><p>In this section, you&rsquo;ll create a chart filtered to logs that include errors which will be added to the <strong>K8s Pod Dashboard</strong> you cloned in section <a href=../../3-reuse-content-across-teams/2-clone-dashboards>3.2 Dashboard Cloning</a>.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create Log-based Chart</summary><div class=box-content><p>Because you drilled into <strong>Log Observer</strong> from the <strong>K8s Pod Dashboard</strong> in the previous section, the dashboard will already be filtered to your cluster and store location using the <code>k8s.cluster.name</code> and <code>store.location</code> fields and the bar chart is split by <code>k8s.pod.name</code>. To filter the dashboard to only logs that contain errors complete the following steps:</p><p><strong>Log Observer</strong> can be filtered using Keywords or specific key-value pairs.</p><ol><li><p>In <strong>Log Observer</strong> click <strong>Add Filter</strong> along the top.</p></li><li><p>Make sure you&rsquo;ve selected <strong>Fields</strong> as the filter type and enter <code>severity</code> in the <strong>Find a field&mldr;</strong> search bar.</p></li><li><p>Select <code>severity</code> from the fields list.</p><p>You should now see a list of severities and the number of log entries for each.</p></li><li><p>Under <strong>Top values</strong>, hover over Error and click the <code>=</code> button to apply the filter.</p><p><a href=#R-image-94fd85dd224abda957fff94b39e441e3 class=lightbox-link><img alt="Log Observer: Filter errors" class="lazy lightbox figure-image" loading=lazy src="../../images/loc-filter-errors.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-94fd85dd224abda957fff94b39e441e3><img alt="Log Observer: Filter errors" class="lazy lightbox lightbox-image" loading=lazy src="../../images/loc-filter-errors.png?width=40vw"></a></p><p>The dashboard will now be filtered to only log entries with a severity of Error and the bar chart will be split by the Kubernetes Pod that contains the errors. Next, you&rsquo;ll save the chart on your <strong>Kubernetes Pods Dashboard</strong>.</p></li><li><p>In the upper right corner of the <strong>Log Observer</strong> dashboard click <strong>Save</strong>.</p></li><li><p>Select <strong>Save to Dashboard</strong>.</p></li><li><p>In the <strong>Chart name</strong> field enter a name for your chart.</p></li><li><p>(Optional) In the <strong>Chart description</strong> field enter a description for your chart.</p><p><a href=#R-image-126db098ee5211294f7587bde44b2b0c class=lightbox-link><img alt="Log Observer: Save Chart Name" class="lazy lightbox figure-image" loading=lazy src="../../images/loc-save-chart-name.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-126db098ee5211294f7587bde44b2b0c><img alt="Log Observer: Save Chart Name" class="lazy lightbox lightbox-image" loading=lazy src="../../images/loc-save-chart-name.png?width=40vw"></a></p></li><li><p>Click <strong>Select Dashboard</strong> and search for the name of the Dashboard you cloned in section <a href=../../3-reuse-content-across-teams/2-clone-dashboards>3.2 Dashboard Cloning</a>.</p></li><li><p>Select the dashboard in the Dashboard Group for your email address.</p><p><a href=#R-image-88bccd1c799862aee1ed90dfb6ae5d9b class=lightbox-link><img alt="Log Observer: Select Dashboard" class="lazy lightbox figure-image" loading=lazy src="../../images/loc-select-dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-88bccd1c799862aee1ed90dfb6ae5d9b><img alt="Log Observer: Select Dashboard" class="lazy lightbox lightbox-image" loading=lazy src="../../images/loc-select-dashboard.png?width=40vw"></a></p></li><li><p>Click <strong>OK</strong></p></li><li><p>For the <strong>Chart type</strong> select <strong>Log timeline</strong></p></li><li><p>Click <strong>Save and go to the dashboard</strong></p></li></ol><p>You will now be taken to your <strong>Kubernetes Pods Dashboard</strong> where you should see the chart you just created for pod errors.</p><p><a href=#R-image-5b3c758d755c692f48609d38a70571f0 class=lightbox-link><img alt="Log Errors Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-log-error-chart.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5b3c758d755c692f48609d38a70571f0><img alt="Log Errors Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-log-error-chart.png?width=40vw"></a></p><p>Because you updated the original <strong>Kubernetes Pods Dashboard</strong>, your mirrored dashboard will also include this chart as well! You can see this by clicking the mirrored version of your dashboard along the top of the Dashboard Group for your user.</p><p><a href=#R-image-82834ec1393b0fd5e96d191e3393e425 class=lightbox-link><img alt="Log Errors Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/k8s-pod-select-dashboard.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-82834ec1393b0fd5e96d191e3393e425><img alt="Log Errors Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/k8s-pod-select-dashboard.png?width=40vw"></a></p><p><strong>Now that you&rsquo;ve seen how data can be reused across teams by cloning the dashboard, creating dashboard mirrors and how metrics can easily be correlated with logs, let&rsquo;s take a look at how to create alerts so your teams can be notified when there is an issue with their infrastructure, services, or applications.</strong></p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=improve-timeliness-of-alerts>Improve Timeliness of Alerts</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>When monitoring hybrid and cloud environments, ensuring timely alerts for critical infrastructure and applications poses a significant challenge. Typically, this involves crafting intricate queries, meticulously scheduling searches, and managing alerts across various monitoring solutions. Moreover, the proliferation of disparate alerts generated from identical data sources often results in unnecessary duplication, contributing to alert fatigue and noise within the monitoring ecosystem.</p><p>In this section, we&rsquo;ll explore how Splunk Observability Cloud addresses these challenges by enabling the effortless creation of alert criteria. Leveraging its 10-second default data collection capability, alerts can be triggered swiftly, surpassing the timeliness achieved by traditional monitoring tools. This enhanced responsiveness not only reduces Mean Time to Detect (MTTD) but also accelerates Mean Time to Resolve (MTTR), ensuring that critical issues are promptly identified and remediated.</p><p><a href=#R-image-f43f769a076d8525b588f0f9833e8429 class=lightbox-link><img alt="Detector Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/detector-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f43f769a076d8525b588f0f9833e8429><img alt="Detector Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/detector-dashboard.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 5. Improve Timeliness of Alerts</h1><article class=default><header class=headline></header><h1 id=create-custom-detector>Create Custom Detector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Tim Hard</span></span><p>Splunk Observability Cloud provides detectors, events, alerts, and notifications to keep you informed when certain criteria are met. There are a number of pre-built <strong>AutoDetect Detectors</strong> that automatically surface when common problem patterns occur, such as when an EC2 instance‚Äôs CPU utilization is expected to reach its limit. Additionally, you can also create custom detectors if you want something more optimized or specific. For example, you want a message sent to a Slack channel or to an email address for the Ops team that manages this Kubernetes cluster when Memory Utilization on their pods has reached 85%.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise: Create Custom Detector</summary><div class=box-content><p>In this section you&rsquo;ll create a detector on <strong>Pod Memory Utilization</strong> which will trigger if utilization surpasses 85%</p><ol><li><p>On the <strong>Kubernetes Pods Dashboard</strong> you cloned in section <a href=../../3-reuse-content-across-teams/2-clone-dashboards>3.2 Dashboard Cloning</a>, click the <strong>Get Alerts</strong> button (bell icon) for the <strong>Memory usage (%)</strong> chart -> Click <strong>New detector from chart</strong>.</p><p><a href=#R-image-70572e52b6c5e33765e55cf12079739e class=lightbox-link><img alt="New Detector from Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/new-detector.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-70572e52b6c5e33765e55cf12079739e><img alt="New Detector from Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/new-detector.png?width=40vw"></a></p></li><li><p>In the <strong>Create detector</strong> add your initials to the detector name.</p><p><a href=#R-image-b013c6a94628292ca9783cf619842102 class=lightbox-link><img alt="Create Detector: Update Detector Name" class="lazy lightbox figure-image" loading=lazy src="../../images/create-detector-name.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b013c6a94628292ca9783cf619842102><img alt="Create Detector: Update Detector Name" class="lazy lightbox lightbox-image" loading=lazy src="../../images/create-detector-name.png?width=40vw"></a></p></li><li><p>Click <strong>Create alert rule</strong>.</p><p>These conditions are expressed as one or more rules that trigger an alert when the conditions in the rules are met. Importantly, multiple rules can be included in the same detector configuration which minimizes the total number of alerts that need to be created and maintained. You can see which signal this detector will alert on by the bell icon in the <strong>Alert On</strong> column. In this case, this detector will alert on the Memory Utilization for the pods running in this Kubernetes cluster.</p><p><a href=#R-image-580850dcbbac44b8cc81f0c62247c9dc class=lightbox-link><img alt="Alert Signal" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-signals.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-580850dcbbac44b8cc81f0c62247c9dc><img alt="Alert Signal" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-signals.png?width=60vw"></a></p></li><li><p>Click <strong>Proceed To Alert Conditions</strong>.</p><p>Many pre-built alert conditions can be applied to the metric you want to alert on. This could be as simple as a static threshold or something more complex, for example, is memory usage deviating from the historical baseline across any of your 50,000 containers?</p><p><a href=#R-image-1048bea14fcc668c6ab76c7b73bef3f7 class=lightbox-link><img alt="Alert Conditions" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-conditions.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1048bea14fcc668c6ab76c7b73bef3f7><img alt="Alert Conditions" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-conditions.png?width=60vw"></a></p></li><li><p>Select <strong>Static Threshold</strong>.</p></li><li><p>Click <strong>Proceed To Alert Settings</strong>.</p><p>In this case, you want the alert to trigger if any pods exceed 85% memory utilization. Once you‚Äôve set the alert condition, the configuration is back-tested against the historical data so you can confirm that the alert configuration is accurate, meaning will the alert trigger on the criteria you‚Äôve defined? This is also a great way to confirm if the alert generates too much noise.</p><p><a href=#R-image-cd7a90821ad939d0a0446e0e1a72fc21 class=lightbox-link><img alt="Alert Settings" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-settings.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd7a90821ad939d0a0446e0e1a72fc21><img alt="Alert Settings" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-settings.png?width=60vw"></a></p></li><li><p>Enter 85 in the <strong>Threshold</strong> field.</p></li><li><p>Click <strong>Proceed To Alert Message</strong>.</p><p>Next, you can set the severity for this alert, you can include links to runbooks and short tips on how to respond, and you can customize the message that is included in the alert details. The message can include parameterized fields from the actual data, for example, in this case, you may want to include which Kubernetes node the pod is running on, or the <code>store.location</code> configured when you deployed the application, to provide additional context.</p><p><a href=#R-image-e3e7412226dea53d73ac891bbe0ea395 class=lightbox-link><img alt="Alert Message" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-message.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e3e7412226dea53d73ac891bbe0ea395><img alt="Alert Message" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-message.png?width=60vw"></a></p></li><li><p>Click <strong>Proceed To Alert Recipients</strong>.</p><p>You can choose where you want this alert to be sent when it triggers. This could be to a team, specific email addresses, or to other systems such as ServiceNow, Slack, Splunk On-Call or Splunk ITSI. You can also have the alert execute a webhook which enables me to leverage automation or to integrate with many other systems such as homegrown ticketing tools. <strong>For the purpose of this workshop do not include a recipient</strong></p><p><a href=#R-image-fa7a51ef1603bd78651624383f8277a6 class=lightbox-link><img alt="Alert Recipients" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-recipients.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fa7a51ef1603bd78651624383f8277a6><img alt="Alert Recipients" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-recipients.png?width=60vw"></a></p></li><li><p>Click <strong>Proceed To Alert Activation</strong>.</p><p><a href=#R-image-fdc3c3cc727614e0abbe051c5176a1ca class=lightbox-link><img alt="Activate Alert" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-activate-alert.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fdc3c3cc727614e0abbe051c5176a1ca><img alt="Activate Alert" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-activate-alert.png?width=60vw"></a></p></li><li><p>Click <strong>Activate Alert</strong>.</p><p><a href=#R-image-56b1ecb94f9bea47f46d4d024fd714ee class=lightbox-link><img alt="Activate Alert Message" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-activation.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-56b1ecb94f9bea47f46d4d024fd714ee><img alt="Activate Alert Message" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-activation.png?width=40vw"></a></p><p>You will receive a warning because no recipients were included in the Notification Policy for this detector. This can be warning can be dismissed.</p></li><li><p>Click <strong>Save</strong>.</p><p><a href=#R-image-95cd5c44fbb8870212cc5f285ebed663 class=lightbox-link><img alt="Activate Alert Message" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-new-detector.png?width=60vw" style=height:auto;width:60vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95cd5c44fbb8870212cc5f285ebed663><img alt="Activate Alert Message" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-new-detector.png?width=60vw"></a></p><p>You will be taken to your newly created detector where you can see any triggered alerts.</p></li><li><p>In the upper right corner, Click <strong>Close</strong> to close the Detector.</p></li></ol><p>The detector status and any triggered alerts will automatically be included in the chart because this detector was configured for this chart.</p><p><a href=#R-image-31f24c6b829402e9f1081ca599352211 class=lightbox-link><img alt="Alert Chart" class="lazy lightbox figure-image" loading=lazy src="../../images/alert-chart.png?width=40vw" style=height:auto;width:40vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31f24c6b829402e9f1081ca599352211><img alt="Alert Chart" class="lazy lightbox lightbox-image" loading=lazy src="../../images/alert-chart.png?width=40vw"></a></p><p><strong>Congratulations! You&rsquo;ve successfully created a detector that will trigger if pod memory utilization exceeds 85%. After a few minutes, the detector should trigger some alerts. You can click the detector name in the chart to view the triggered alerts.</strong></p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=conclusion>Conclusion</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 minute</span>
</span>&nbsp;<p>Today you‚Äôve seen how Splunk Observability Cloud can help you overcome many of the challenges you face monitoring hybrid and cloud environments. You‚Äôve demonstrated how <strong>Splunk Observability Cloud</strong> streamlines operations with standardized data collection and tags, ensuring consistency across all IT infrastructure. The Unified Service Telemetry has been a game-changer, providing in-context metrics, logs, and trace data that make troubleshooting swift and efficient. By enabling the reuse of content across teams, you‚Äôre minimizing technical debt and bolstering the performance of our monitoring systems.</p><h2 id=happy-splunking>Happy Splunking!<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><a href=#R-image-e79c19e0ace9e73de857645323cde588 class=lightbox-link><img alt="Dancing Buttercup" class="lazy lightbox figure-image" loading=lazy src="../images/Splunk-dancing-buttercup-GIF-103.gif?width=30vw" style=height:auto;width:30vw></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e79c19e0ace9e73de857645323cde588><img alt="Dancing Buttercup" class="lazy lightbox lightbox-image" loading=lazy src="../images/Splunk-dancing-buttercup-GIF-103.gif?width=30vw"></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=debug-problems-in-microservices>Debug Problems in Microservices</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-0e1717a450ce40ab54b99eeefdfa5933><div class=card-content><div class=card-title id=R-card-0e1717a450ce40ab54b99eeefdfa5933><a href=/observability-workshop/en/scenarios/debug-problems/tagging/index.html>Tagging Workshop</a></div><div class=card-content-text>This workshop shows how tags can be used to reduce the time required for SREs to isolate issues across services, so they know which team to engage to troubleshoot the issue further, and can provide context to help engineering get a head start on debugging.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-45245aa2ef7494d81dabddbe4a85e864><div class=card-content><div class=card-title id=R-card-45245aa2ef7494d81dabddbe4a85e864><a href=/observability-workshop/en/scenarios/debug-problems/profiling/index.html>Profiling Workshop</a></div><div class=card-content-text>This workshop shows how Database Query Performance and AlwaysOn Profiling can be used to reduce the time required for engineers to debug problems in microservices.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 13, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Debug Problems in Microservices</h1><article class=default><header class=headline></header><h1 id=tagging-workshop>Tagging Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p><strong>Splunk Observability Cloud</strong> includes powerful features that dramatically reduce the time required for SREs to isolate issues across services, so they know which team to engage to troubleshoot the issue further, and can provide context to help engineering get a head start on debugging.</p><p>Unlocking these features requires tags to be included with your application traces. But how do you know which tags are the most valuable and how do you capture them?</p><p>In this workshop, we&rsquo;ll explore:</p><ul><li>What are <strong>tags</strong> and why are they such a critical part of making an application observable.</li><li>How to use <a href=https://opentelemetry.io rel=external><strong>OpenTelemetry</strong></a> to capture tags of interest from your application.</li><li>How to index tags in <strong>Splunk Observability Cloud</strong> and the differences between <strong>Troubleshooting MetricSets</strong> and <strong>Monitoring MetricSets</strong>.</li><li>How to utilize tags in <strong>Splunk Observability Cloud</strong> to find ‚Äúunknown unknowns‚Äù using the <strong>Tag Spotlight</strong> and <strong>Dynamic Service Map</strong> features.</li><li>How to utilize tags for alerting and dashboards.</li></ul><p>The workshop uses a simple microservices-based application to illustrate these concepts. Let&rsquo;s get started!</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Tagging Workshop</h1><article class=default><header class=headline></header><h1 id=build-the-sample-application>Build the Sample Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For this workshop, we&rsquo;ll be using a microservices-based application. This application is for an online retailer and normally includes more than a dozen services. However, to keep the workshop simple, we&rsquo;ll be focusing on two services used by the retailer as part of their payment processing workflow: the credit check service and the credit processor service.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will start with an EC2 instance and perform some <a href=/observability-workshop/en/scenarios/debug-problems/tagging/1-build-application/index.html#initial-steps>initial steps</a> in order to get to the following state:</p><ul><li>Deploy the <strong>Splunk distribution of the OpenTelemetry Collector</strong></li><li>Build and deploy <code>creditcheckservice</code> and <code>creditprocessorservice</code></li><li>Deploy a load generator to send traffic to the services</li></ul><h2 id=initial-steps>Initial Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The initial setup can be completed by executing the following steps on the command line of your EC2 instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/tagging
</span></span><span class=line><span class=cl>./0-deploy-collector-with-services.sh</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Java</summary><div class=box-content><p>There are implementations in multiple languages available for <code>creditcheckservice</code>.
Run</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./0-deploy-collector-with-services.sh java</span></span></code></pre></div><p>to pick Java over Python.</p></div></details><h2 id=view-your-application-in-splunk-observability-cloud>View your application in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that the setup is complete, let&rsquo;s confirm that it&rsquo;s sending data to <strong>Splunk Observability Cloud</strong>. Note that when the application is deployed for the first time, it may take a few minutes for the data to appear.</p><p>Navigate to APM, then use the Environment dropdown to select your environment (i.e. <code>tagging-workshop-instancename</code>).</p><p>If everything was deployed correctly, you should see <code>creditprocessorservice</code> and <code>creditcheckservice</code> displayed in the list of services:</p><p><a href=#R-image-ec35bf644657dae53ef61587e5495bd2 class=lightbox-link><img alt="APM Overview" class="lazy lightbox figure-image" loading=lazy src=../images/apm_overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec35bf644657dae53ef61587e5495bd2><img alt="APM Overview" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm_overview.png></a></p><p>Click on <strong>Explore</strong> on the right-hand side to view the service map. We can see that the <code>creditcheckservice</code> makes calls to the <code>creditprocessorservice</code>, with an average response time of at least 3 seconds:</p><p><a href=#R-image-176f19d35969149271ff158aff4671b5 class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/service_map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-176f19d35969149271ff158aff4671b5><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map.png></a></p><p>Next, click on <strong>Traces</strong> on the right-hand side to see the traces captured for this application. You&rsquo;ll see that some traces run relatively fast (i.e. just a few milliseconds), whereas others take a few seconds.</p><p><a href=#R-image-e8158543ff59463f1dcada1d4288e1b9 class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/traces.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e8158543ff59463f1dcada1d4288e1b9><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/traces.png></a></p><p>If you toggle <strong>Errors only</strong> to <code>on</code>, you&rsquo;ll also notice that some traces have errors:</p><p><a href=#R-image-b51d8b88e54112b055c77f443e57866e class=lightbox-link><img alt=Traces class="lazy lightbox figure-image" loading=lazy src=../images/traces_with_errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b51d8b88e54112b055c77f443e57866e><img alt=Traces class="lazy lightbox lightbox-image" loading=lazy src=../images/traces_with_errors.png></a></p><p>Toggle <strong>Errors only</strong> back to <code>off</code> and sort the traces by duration, then click on one of the longer running traces. In this example, the trace took five seconds, and we can see that most of the time was spent calling the <code>/runCreditCheck</code> operation, which is part of the <code>creditprocessorservice</code>.</p><p><a href=#R-image-4b7711de748dc82895fbd8604a78ca41 class=lightbox-link><img alt="Long Running Trace" class="lazy lightbox figure-image" loading=lazy src=../images/long_running_trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4b7711de748dc82895fbd8604a78ca41><img alt="Long Running Trace" class="lazy lightbox lightbox-image" loading=lazy src=../images/long_running_trace.png></a></p><p>Currently, we don&rsquo;t have enough details in our traces to understand why some requests finish in a few milliseconds, and others take several seconds. To provide the best possible customer experience, this will be critical for us to understand.</p><p>We also don&rsquo;t have enough information to understand why some requests result in errors, and others don&rsquo;t. For example, if we look at one of the error traces, we can see that the error occurs when the <code>creditprocessorservice</code> attempts to call another service named <code>otherservice</code>. But why do some requests results in a call to <code>otherservice</code>, and others don&rsquo;t?</p><p><a href=#R-image-736b440437807e93d1c88a76531ca68a class=lightbox-link><img alt="Trace with Errors" class="lazy lightbox figure-image" loading=lazy src=../images/error_trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-736b440437807e93d1c88a76531ca68a><img alt="Trace with Errors" class="lazy lightbox lightbox-image" loading=lazy src=../images/error_trace.png></a></p><p>We&rsquo;ll explore these questions and more in the workshop.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=what-are-tags>What are Tags?</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<p>To understand why some requests have errors or slow performance, we&rsquo;ll need to add context to our traces. We&rsquo;ll do this by adding tags. But first, let&rsquo;s take a moment to discuss what tags are, and why they&rsquo;re so important for observability.</p><h2 id=what-are-tags>What are tags?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Tags are key-value pairs that provide additional metadata about spans in a trace, allowing you to enrich the context of the spans you send to Splunk APM.</p><p>For example, a payment processing application would find it helpful to track:</p><ul><li>The payment type used (i.e. credit card, gift card, etc.)</li><li>The ID of the customer that requested the payment</li></ul><p>This way, if errors or performance issues occur while processing the payment, we have the context we need for troubleshooting.</p><p>While some tags can be added with the OpenTelemetry collector, the ones we‚Äôll be working with in this workshop are more granular, and are added by application developers using the OpenTelemetry API.</p><h2 id=attributes-vs-tags>Attributes vs. Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A note about terminology before we proceed. While this workshop is about <strong>tags</strong>, and this is the terminology we use in <strong>Splunk Observability Cloud</strong>, OpenTelemetry uses the term <strong>attributes</strong> instead. So when you see tags mentioned throughout this workshop, you can treat them as synonymous with attributes.</p><h2 id=why-are-tags-so-important>Why are tags so important?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Tags are essential for an application to be truly observable. As we saw with our credit check service, some users are having a great experience: fast with no errors. But other users get a slow experience or encounter errors.</p><p>Tags add the context to the traces to help us understand why some users get a great experience and others don&rsquo;t. And powerful features in <strong>Splunk Observability Cloud</strong> utilize tags to help you jump quickly to root cause.</p><h2 id=sneak-peak-tag-spotlight>Sneak Peak: Tag Spotlight<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Tag Spotlight</strong> uses tags to discover trends that contribute to high latency or error rates:</p><p><a href=#R-image-029f0e45311ee60367a448a199769702 class=lightbox-link><img alt="Tag Spotlight Preview" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_preview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-029f0e45311ee60367a448a199769702><img alt="Tag Spotlight Preview" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_preview.png></a></p><p>The screenshot above provides an example of Tag Spotlight from another application.</p><p>Splunk has analyzed all of the tags included as part of traces that involve the payment service.</p><p>It tells us very quickly whether some tag values have more errors than others.</p><p>If we look at the version tag, we can see that version 350.10 of the service has a 100% error rate, whereas version 350.9 of the service has no errors at all:</p><p><a href=#R-image-5308f80f130648bf4e53eca48801acd7 class=lightbox-link><img alt="Tag Spotlight Preview" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_preview_details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5308f80f130648bf4e53eca48801acd7><img alt="Tag Spotlight Preview" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_preview_details.png></a></p><p>We‚Äôll be using Tag Spotlight with the credit check service later on in the workshop, once we‚Äôve captured some tags of our own.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=capture-tags-with-opentelemetry>Capture Tags with OpenTelemetry</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Please proceed to one of the subsections for Java or Python. Ask your instructor for the one used during the workshop!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Capture Tags with OpenTelemetry</h1><article class=default><header class=headline></header><h1 id=1-capture-tags---java>1. Capture Tags - Java</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Let&rsquo;s add some tags to our traces, so we can find out why some customers receive a poor experience from our application.</p><h2 id=identify-useful-tags>Identify Useful Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll start by reviewing the code for the <code>creditCheck</code> function of <code>creditcheckservice</code> (which can be found in the file <code>/home/splunk/workshop/tagging/creditcheckservice-java/src/main/java/com/example/creditcheckservice/CreditCheckController.java</code>):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/check&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>ResponseEntity</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>creditCheck</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;customernum&#34;</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>customerNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Get Credit Score</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>creditScore</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>creditScoreUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>customerNum</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>creditScore</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>creditScoreUrl</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>HttpClientErrorException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>status</span><span class=p>(</span><span class=n>HttpStatus</span><span class=p>.</span><span class=na>INTERNAL_SERVER_ERROR</span><span class=p>).</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Error getting credit score&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>creditScoreCategory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getCreditCategoryFromScore</span><span class=p>(</span><span class=n>creditScore</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Run Credit Check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>creditCheckUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://creditprocessorservice:8899/runCreditCheck?customernum=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>customerNum</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;&amp;score=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>creditScore</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>checkResult</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>checkResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>creditCheckUrl</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>HttpClientErrorException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>status</span><span class=p>(</span><span class=n>HttpStatus</span><span class=p>.</span><span class=na>INTERNAL_SERVER_ERROR</span><span class=p>).</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Error running credit check&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>ok</span><span class=p>(</span><span class=n>checkResult</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>We can see that this function accepts a <strong>customer number</strong> as an input. This would be helpful to capture as part of a trace. What else would be helpful?</p><p>Well, the <strong>credit score</strong> returned for this customer by the <code>creditprocessorservice</code> may be interesting (we want to ensure we don&rsquo;t capture any PII data though). It would also be helpful to capture the <strong>credit score category</strong>, and the <strong>credit check result</strong>.</p><p>Great, we&rsquo;ve identified four tags to capture from this service that could help with our investigation. But how do we capture these?</p><h2 id=capture-tags>Capture Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We start by adding OpenTelemetry imports to the top of the <code>CreditCheckController.java</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.opentelemetry.api.trace.Span</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.opentelemetry.instrumentation.annotations.WithSpan</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.opentelemetry.instrumentation.annotations.SpanAttribute</span><span class=p>;</span></span></span></code></pre></div><p>Next, we use the <code>@WithSpan</code> annotation to produce a span for <code>creditCheck</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/check&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@WithSpan</span><span class=w> </span><span class=c1>// ADDED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>ResponseEntity</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>creditCheck</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;customernum&#34;</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>customerNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>...</span></span></span></code></pre></div><p>We can now get a reference to the current span and add an attribute (aka tag) to it:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>creditScoreUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>customerNum</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>creditScore</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>creditScoreUrl</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>HttpClientErrorException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>status</span><span class=p>(</span><span class=n>HttpStatus</span><span class=p>.</span><span class=na>INTERNAL_SERVER_ERROR</span><span class=p>).</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Error getting credit score&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Span</span><span class=w> </span><span class=n>currentSpan</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Span</span><span class=p>.</span><span class=na>current</span><span class=p>();</span><span class=w> </span><span class=c1>// ADDED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>currentSpan</span><span class=p>.</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;credit.score&#34;</span><span class=p>,</span><span class=w> </span><span class=n>creditScore</span><span class=p>);</span><span class=w> </span><span class=c1>// ADDED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>...</span></span></span></code></pre></div><p>That was pretty easy, right? Let&rsquo;s capture some more, with the final result looking like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/check&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@WithSpan</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=n>SpanKind</span><span class=p>.</span><span class=na>SERVER</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>ResponseEntity</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>creditCheck</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;customernum&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                          </span><span class=nd>@SpanAttribute</span><span class=p>(</span><span class=s>&#34;customer.num&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                          </span><span class=n>String</span><span class=w> </span><span class=n>customerNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Get Credit Score</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>creditScore</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>creditScoreUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>customerNum</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>creditScore</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>creditScoreUrl</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>HttpClientErrorException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>status</span><span class=p>(</span><span class=n>HttpStatus</span><span class=p>.</span><span class=na>INTERNAL_SERVER_ERROR</span><span class=p>).</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Error getting credit score&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Span</span><span class=w> </span><span class=n>currentSpan</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Span</span><span class=p>.</span><span class=na>current</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>currentSpan</span><span class=p>.</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;credit.score&#34;</span><span class=p>,</span><span class=w> </span><span class=n>creditScore</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>creditScoreCategory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getCreditCategoryFromScore</span><span class=p>(</span><span class=n>creditScore</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>currentSpan</span><span class=p>.</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;credit.score.category&#34;</span><span class=p>,</span><span class=w> </span><span class=n>creditScoreCategory</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Run Credit Check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>creditCheckUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://creditprocessorservice:8899/runCreditCheck?customernum=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>customerNum</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;&amp;score=&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>creditScore</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>checkResult</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>checkResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>creditCheckUrl</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>HttpClientErrorException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>status</span><span class=p>(</span><span class=n>HttpStatus</span><span class=p>.</span><span class=na>INTERNAL_SERVER_ERROR</span><span class=p>).</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Error running credit check&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>currentSpan</span><span class=p>.</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;credit.check.result&#34;</span><span class=p>,</span><span class=w> </span><span class=n>checkResult</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>ok</span><span class=p>(</span><span class=n>checkResult</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><h2 id=redeploy-service>Redeploy Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once these changes are made, let&rsquo;s run the following script to rebuild the Docker image used for <code>creditcheckservice</code> and redeploy it to our Kubernetes cluster:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./5-redeploy-creditcheckservice.sh java</span></span></code></pre></div><h2 id=confirm-tag-is-captured-successfully>Confirm Tag is Captured Successfully<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After a few minutes, return to <strong>Splunk Observability Cloud</strong> and load one of the latest traces to confirm that the tags were captured successfully (hint: sort by the timestamp to find the latest traces):</p><p><strong><a href=#R-image-be8e9cb4edea87e556e2ebc466151eff class=lightbox-link><img alt="Trace with Attributes" class="lazy lightbox figure-image" loading=lazy src=../../images/trace_with_attributes_java.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be8e9cb4edea87e556e2ebc466151eff><img alt="Trace with Attributes" class="lazy lightbox lightbox-image" loading=lazy src=../../images/trace_with_attributes_java.png></a></strong></p><p>Well done, you&rsquo;ve leveled up your OpenTelemetry game and have added context to traces using tags.</p><p>Next, we&rsquo;re ready to see how you can use these tags with <strong>Splunk Observability Cloud</strong>!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=2-capture-tags---python>2. Capture Tags - Python</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Let&rsquo;s add some tags to our traces, so we can find out why some customers receive a poor experience from our application.</p><h2 id=identify-useful-tags>Identify Useful Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ll start by reviewing the code for the <code>credit_check</code> function of <code>creditcheckservice</code> (which can be found in the <code>/home/splunk/workshop/tagging/creditcheckservice-py/main.py</code> file):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/check&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>credit_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>customerNum</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;customernum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Get Credit Score</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span> <span class=o>+</span> <span class=n>customerNum</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScore</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>creditScoreReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreCategory</span> <span class=o>=</span> <span class=n>getCreditCategoryFromScore</span><span class=p>(</span><span class=n>creditScore</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Run Credit Check</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/runCreditCheck?customernum=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>customerNum</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;&amp;score=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditScore</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>checkResult</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditCheckReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>checkResult</span></span></span></code></pre></div><p>We can see that this function accepts a <strong>customer number</strong> as an input. This would be helpful to capture as part of a trace. What else would be helpful?</p><p>Well, the <strong>credit score</strong> returned for this customer by the <code>creditprocessorservice</code> may be interesting (we want to ensure we don&rsquo;t capture any PII data though). It would also be helpful to capture the <strong>credit score category</strong>, and the <strong>credit check result</strong>.</p><p>Great, we&rsquo;ve identified four tags to capture from this service that could help with our investigation. But how do we capture these?</p><h2 id=capture-tags>Capture Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We start by adding importing the trace module by adding an import statement to the top of the <code>creditcheckservice-py/main.py</code> file:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>waitress</span> <span class=kn>import</span> <span class=n>serve</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>opentelemetry</span> <span class=kn>import</span> <span class=n>trace</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl><span class=o>...</span></span></span></code></pre></div><p>Next, we need to get a reference to the current span so we can add an attribute (aka tag) to it:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>credit_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span> <span class=o>=</span> <span class=n>trace</span><span class=o>.</span><span class=n>get_current_span</span><span class=p>()</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>    <span class=n>customerNum</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;customernum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;customer.num&#34;</span><span class=p>,</span> <span class=n>customerNum</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl><span class=o>...</span></span></span></code></pre></div><p>That was pretty easy, right? Let&rsquo;s capture some more, with the final result looking like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>credit_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span> <span class=o>=</span> <span class=n>trace</span><span class=o>.</span><span class=n>get_current_span</span><span class=p>()</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>    <span class=n>customerNum</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;customernum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;customer.num&#34;</span><span class=p>,</span> <span class=n>customerNum</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Get Credit Score</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/getScore?customernum=&#34;</span> <span class=o>+</span> <span class=n>customerNum</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>creditScore</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>creditScoreReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.score&#34;</span><span class=p>,</span> <span class=n>creditScore</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>creditScoreCategory</span> <span class=o>=</span> <span class=n>getCreditCategoryFromScore</span><span class=p>(</span><span class=n>creditScore</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.score.category&#34;</span><span class=p>,</span> <span class=n>creditScoreCategory</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Run Credit Check</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://creditprocessorservice:8899/runCreditCheck?customernum=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>customerNum</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;&amp;score=&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditScore</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>creditCheckReq</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>checkResult</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>creditCheckReq</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_span</span><span class=o>.</span><span class=n>set_attribute</span><span class=p>(</span><span class=s2>&#34;credit.check.result&#34;</span><span class=p>,</span> <span class=n>checkResult</span><span class=p>)</span>  <span class=c1># &lt;--- ADDED BY WORKSHOP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>checkResult</span></span></span></code></pre></div><h2 id=redeploy-service>Redeploy Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once these changes are made, let&rsquo;s run the following script to rebuild the Docker image used for <code>creditcheckservice</code> and redeploy it to our Kubernetes cluster:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./5-redeploy-creditcheckservice.sh</span></span></code></pre></div><h2 id=confirm-tag-is-captured-successfully>Confirm Tag is Captured Successfully<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After a few minutes, return to <strong>Splunk Observability Cloud</strong> and load one of the latest traces to confirm that the tags were captured successfully (hint: sort by the timestamp to find the latest traces):</p><p><strong><a href=#R-image-a467fd4a55f574d14efbb82a38621c34 class=lightbox-link><img alt="Trace with Attributes" class="lazy lightbox figure-image" loading=lazy src=../../images/trace_with_attributes.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a467fd4a55f574d14efbb82a38621c34><img alt="Trace with Attributes" class="lazy lightbox lightbox-image" loading=lazy src=../../images/trace_with_attributes.png></a></strong></p><p>Well done, you&rsquo;ve leveled up your OpenTelemetry game and have added context to traces using tags.</p><p>Next, we&rsquo;re ready to see how you can use these tags with <strong>Splunk Observability Cloud</strong>!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=explore-trace-data>Explore Trace Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>Now that we&rsquo;ve captured several tags from our application, let&rsquo;s explore some of the trace data we&rsquo;ve captured that include this additional context, and see if we can identify what&rsquo;s causing a poor user experience in some cases.</p><h2 id=use-trace-analyzer>Use Trace Analyzer<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to <strong>APM</strong>, then select <strong>Traces</strong>. This takes us to the <strong>Trace Analyzer</strong>, where we can add filters to search for traces of interest. For example, we can filter on traces where the credit score starts with <code>7</code>:</p><p><a href=#R-image-13e72946ff93e0f94e1d4d4c5f6c7ba8 class=lightbox-link><img alt="Credit Check Starts with Seven" class="lazy lightbox figure-image" loading=lazy src=../images/credit_score_starts_with_seven.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-13e72946ff93e0f94e1d4d4c5f6c7ba8><img alt="Credit Check Starts with Seven" class="lazy lightbox lightbox-image" loading=lazy src=../images/credit_score_starts_with_seven.png></a></p><p>If you load one of these traces, you&rsquo;ll see that the credit score indeed starts with seven.</p><p>We can apply similar filters for the customer number, credit score category, and credit score result.</p><h2 id=explore-traces-with-errors>Explore Traces With Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s remove the credit score filter and toggle <strong>Errors only</strong> to on, which results in a list of only those traces where an error occurred:</p><p><a href=#R-image-30cb40406f9ac4b6d81a59e94b1cbcbe class=lightbox-link><img alt="Traces with Errors Only" class="lazy lightbox figure-image" loading=lazy src=../images/traces_errors_only.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-30cb40406f9ac4b6d81a59e94b1cbcbe><img alt="Traces with Errors Only" class="lazy lightbox lightbox-image" loading=lazy src=../images/traces_errors_only.png></a></p><p>Click on a few of these traces, and look at the tags we captured. Do you notice any patterns?</p><p>Next, toggle <strong>Errors only</strong> to off, and sort traces by duration. Look at a few of the slowest running traces, and compare them to the fastest running traces. Do you notice any patterns?</p><p>If you found a pattern that explains the slow performance and errors - great job! But keep in mind that this is a difficult way to troubleshoot, as it requires you to look through many traces and mentally keep track of what you saw, so you can identify a pattern.</p><p>Thankfully, <strong>Splunk Observability Cloud</strong> provides a more efficient way to do this, which we&rsquo;ll explore next.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=index-tags>Index Tags</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=index-tags>Index Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To use advanced features in <strong>Splunk Observability Cloud</strong> such as <strong>Tag Spotlight</strong>, we&rsquo;ll need to first index one or more tags.</p><p>To do this, navigate to <strong>Settings</strong> -> <strong>APM MetricSets</strong>. Then click the <strong>+ New MetricSet</strong> button.</p><p>Let&rsquo;s index the <code>credit.score.category</code> tag by entering the following details (<strong>note</strong>: since everyone in the workshop is using the same organization, the instructor will do this step on your behalf):</p><p><a href=#R-image-9c37ad2405846c52653043ad023db11c class=lightbox-link><img alt="Create Troubleshooting MetricSet" class="lazy lightbox figure-image" loading=lazy src=../images/create_troubleshooting_metric_set.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c37ad2405846c52653043ad023db11c><img alt="Create Troubleshooting MetricSet" class="lazy lightbox lightbox-image" loading=lazy src=../images/create_troubleshooting_metric_set.png></a></p><p>Click <strong>Start Analysis</strong> to proceed.</p><p>The tag will appear in the list of <strong>Pending MetricSets</strong> while analysis is performed.</p><p><a href=#R-image-ae659505b68a938e8830e48e82aa7257 class=lightbox-link><img alt="Pending MetricSets" class="lazy lightbox figure-image" loading=lazy src=../images/pending_metric_set.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ae659505b68a938e8830e48e82aa7257><img alt="Pending MetricSets" class="lazy lightbox lightbox-image" loading=lazy src=../images/pending_metric_set.png></a></p><p>Once analysis is complete, click on the checkmark in the <strong>Actions</strong> column.</p><p><a href=#R-image-c6fb000114a449b64a62e0fe5af92876 class=lightbox-link><img alt="MetricSet Configuraiton Applied" class="lazy lightbox figure-image" loading=lazy src=../images/metricset_config_applied.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c6fb000114a449b64a62e0fe5af92876><img alt="MetricSet Configuraiton Applied" class="lazy lightbox lightbox-image" loading=lazy src=../images/metricset_config_applied.png></a></p><h2 id=how-to-choose-tags-for-indexing>How to choose tags for indexing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Why did we choose to index the <code>credit.score.category</code> tag and not the others?</p><p>To understand this, let&rsquo;s review the primary use cases for tags:</p><ul><li>Filtering</li><li>Grouping</li></ul><h3 id=filtering>Filtering<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>With the filtering use case, we can use the <strong>Trace Analyzer</strong> capability of <strong>Splunk Observability Cloud</strong> to filter on traces that match a particular tag value.</p><p>We saw an example of this earlier, when we filtered on traces where the credit score started with <code>7</code>.</p><p>Or if a customer calls in to complain about slow service, we could use <strong>Trace Analyzer</strong> to locate all traces with that particular customer number.</p><p>Tags used for filtering use cases are generally high-cardinality, meaning that there could be thousands or even hundreds of thousands of unique values. In fact, <strong>Splunk Observability Cloud</strong> can handle an effectively infinite number of unique tag values! Filtering using these tags allows us to rapidly locate the traces of interest.</p><p>Note that we aren&rsquo;t required to index tags to use them for filtering with <strong>Trace Analyzer</strong>.</p><h3 id=grouping>Grouping<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>With the grouping use case, we can use <strong>Trace Analyzer</strong> to group traces by a particular tag.</p><p>But we can also go beyond this and surface trends for tags that we collect using the powerful <strong>Tag Spotlight</strong> feature in <strong>Splunk Observability Cloud</strong>, which we‚Äôll see in action shortly.</p><p>Tags used for grouping use cases should be low to medium-cardinality, with hundreds of unique values.</p><p>For custom tags to be used with <strong>Tag Spotlight</strong>, they first need to be indexed.</p><p>We decided to index the <code>credit.score.category</code> tag because it has a few distinct values that would be useful for grouping. In contrast, the customer number and credit score tags have hundreds or thousands of unique values, and are more valuable for filtering use cases rather than grouping.</p><h2 id=troubleshooting-vs-monitoring-metricsets>Troubleshooting vs. Monitoring MetricSets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You may have noticed that, to index this tag, we created something called a <strong>Troubleshooting MetricSet</strong>. It&rsquo;s named this way because a Troubleshooting MetricSet, or TMS, allows us to troubleshoot issues with this tag using features such as <strong>Tag Spotlight</strong>.</p><p>You may have also noticed that there&rsquo;s another option which we didn&rsquo;t choose called a <strong>Monitoring MetricSet</strong> (or MMS). Monitoring MetricSets go beyond troubleshooting and allow us to use tags for alerting and dashboards. We&rsquo;ll explore this concept later in the workshop.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=use-tags-for-troubleshooting>Use Tags for Troubleshooting</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=using-tag-spotlight>Using Tag Spotlight<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we&rsquo;ve indexed the <code>credit.score.category</code> tag, we can use it with <strong>Tag Spotlight</strong> to troubleshoot our application.</p><p>Navigate to <strong>APM</strong> then click on <strong>Tag Spotlight</strong> on the right-hand side. Ensure the <code>creditcheckservice</code> service is selected from the <strong>Service</strong> drop-down (if not already selected).</p><p>With <strong>Tag Spotlight</strong>, we can see 100% of credit score requests that result in a score of <code>impossible</code> have an error, yet requests for all other credit score types have no errors at all!</p><p><strong><a href=#R-image-1c885be71da0332332fb50090a67616b class=lightbox-link><img alt="Tag Spotlight with Errors" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1c885be71da0332332fb50090a67616b><img alt="Tag Spotlight with Errors" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_errors.png></a></strong></p><p>This illustrates the power of <strong>Tag Spotlight</strong>! Finding this pattern would be time-consuming without it, as we&rsquo;d have to manually look through hundreds of traces to identify the pattern (and even then, there&rsquo;s no guarantee we&rsquo;d find it).</p><p>We&rsquo;ve looked at errors, but what about latency? Let&rsquo;s click on <strong>Latency</strong> near the top of the screen to find out.</p><p>Here, we can see that the requests with a <code>poor</code> credit score request are running slowly, with P50, P90, and P99 times of around 3 seconds, which is too long for our users to wait, and much slower than other requests.</p><p>We can also see that some requests with an <code>exceptional</code> credit score request are running slowly, with P99 times of around 5 seconds, though the P50 response time is relatively quick.</p><p><strong><a href=#R-image-9b0068787cd48d70192f8e65f08749ca class=lightbox-link><img alt="Tag Spotlight with Latency" class="lazy lightbox figure-image" loading=lazy src=../images/tag_spotlight_latency.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9b0068787cd48d70192f8e65f08749ca><img alt="Tag Spotlight with Latency" class="lazy lightbox lightbox-image" loading=lazy src=../images/tag_spotlight_latency.png></a></strong></p><h2 id=using-dynamic-service-maps>Using Dynamic Service Maps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that we know the credit score category associated with the request can impact performance and error rates, let&rsquo;s explore another feature that utilizes indexed tags: <strong>Dynamic Service Maps</strong>.</p><p>With Dynamic Service Maps, we can breakdown a particular service by a tag. For example, let&rsquo;s click on <strong>APM</strong>, then click <strong>Explore</strong> to view the service map.</p><p>Click on <code>creditcheckservice</code>. Then, on the right-hand menu, click on the drop-down that says <strong>Breakdown</strong>, and select the <code>credit.score.category</code> tag.</p><p>At this point, the service map is updated dynamically, and we can see the performance of requests hitting <code>creditcheckservice</code> broken down by the credit score category:</p><p><strong><a href=#R-image-a9636f9c4f663b491c1a7ad60b5d6472 class=lightbox-link><img alt="Service Map Breakdown" class="lazy lightbox figure-image" loading=lazy src=../images/service_map_breakdown.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a9636f9c4f663b491c1a7ad60b5d6472><img alt="Service Map Breakdown" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map_breakdown.png></a></strong></p><p>This view makes it clear that performance for <code>good</code> and <code>fair</code> credit scores is excellent, while <code>poor</code> and <code>exceptional</code> scores are much slower, and <code>impossible</code> scores result in errors.</p><h2 id=summary>Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Tag Spotlight</strong> has uncovered several interesting patterns for the engineers that own this service to explore further:</p><ul><li>Why are all the <code>impossible</code> credit score requests resulting in error?</li><li>Why are all the <code>poor</code> credit score requests running slowly?</li><li>Why do some of the <code>exceptional</code> requests run slowly?</li></ul><p>As an SRE, passing this context to the engineering team would be extremely helpful for their investigation, as it would allow them to track down the issue much more quickly than if we simply told them that the service was &ldquo;sometimes slow&rdquo;.</p><p>If you&rsquo;re curious, have a look at the source code for the <code>creditprocessorservice</code>. You&rsquo;ll see that requests with impossible, poor, and exceptional credit scores are handled differently, thus resulting in the differences in error rates and latency that we uncovered.</p><p>The behavior we saw with our application is typical for modern cloud-native applications, where different inputs passed to a service lead to different code paths, some of which result in slower performance or errors. For example, in a real credit check service, requests resulting in low credit scores may be sent to another downstream service to further evaluate risk, and may perform more slowly than requests resulting in higher scores, or encounter higher error rates.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=use-tags-for-monitoring>Use Tags for Monitoring</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Earlier, we created a <strong>Troubleshooting Metric Set</strong> on the <code>credit.score.category</code> tag, which allowed us to use <strong>Tag Spotlight</strong> with that tag and identify a pattern to explain why some users received a poor experience.</p><p>In this section of the workshop, we&rsquo;ll explore a related concept: <strong>Monitoring MetricSets</strong>.</p><h2 id=what-are-monitoring-metricsets>What are Monitoring MetricSets?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Monitoring MetricSets</strong> go beyond troubleshooting and allow us to use tags for alerting, dashboards and SLOs.</p><h2 id=create-a-monitoring-metricset>Create a Monitoring MetricSet<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>(<strong>note</strong>: <em>your workshop instructor will do the following for you, but observe the steps</em>)</p><p>Let&rsquo;s navigate to <strong>Settings</strong> -> <strong>APM MetricSets</strong>, and click the edit button (i.e. the little pencil) beside the MetricSet for <code>credit.score.category</code>.</p><p><a href=#R-image-3b976ba84f1cdffe152606a345f7e8b6 class=lightbox-link><img alt="edit APM MetricSet" class="lazy lightbox figure-image" loading=lazy src=../images/edit_apm_metricset.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3b976ba84f1cdffe152606a345f7e8b6><img alt="edit APM MetricSet" class="lazy lightbox lightbox-image" loading=lazy src=../images/edit_apm_metricset.png></a></p><p>Check the box beside <strong>Also create Monitoring MetricSet</strong> then click <strong>Start Analysis</strong></p><p><a href=#R-image-7698fa0a250508daebbed8501591d668 class=lightbox-link><img alt="Monitoring MetricSet" class="lazy lightbox figure-image" loading=lazy src=../images/monitoring_metricset.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7698fa0a250508daebbed8501591d668><img alt="Monitoring MetricSet" class="lazy lightbox lightbox-image" loading=lazy src=../images/monitoring_metricset.png></a></p><p>The <code>credit.score.category</code> tag appears again as a <strong>Pending MetricSet</strong>. After a few moments, a checkmark should appear. Click this checkmark to enable the <strong>Pending MetricSet</strong>.</p><p><a href=#R-image-6ba8ee1d4b7ac988777d23912d3b496c class=lightbox-link><img alt="pending APM MetricSet" class="lazy lightbox figure-image" loading=lazy src=../images/update_pending_apm_metricset.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ba8ee1d4b7ac988777d23912d3b496c><img alt="pending APM MetricSet" class="lazy lightbox lightbox-image" loading=lazy src=../images/update_pending_apm_metricset.png></a></p><h2 id=using-monitoring-metricsets>Using Monitoring MetricSets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This mechanism creates a new dimension from the tag on a bunch of metrics that can be used to filter these metrics based on the values of that new dimension. <strong>Important</strong>: To differentiate between the original and the copy, the dots in the tag name are replaced by underscores for the new dimension. With that the metrics become a dimension named <code>credit_score_category</code> and not <code>credit.score.category</code>.</p><p>Next, let&rsquo;s explore how we can use this <strong>Monitoring MetricSet</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 7. Use Tags for Monitoring</h1><article class=default><header class=headline></header><h1 id=use-tags-with-dashboards>Use Tags with Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h3 id=dashboards>Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Navigate to <strong>Metric Finder</strong>, then type in the name of the tag, which is <code>credit_score_category</code> (remember that the dots in the tag name were replaced by underscores when the Monitoring MetricSet was created). You&rsquo;ll see that multiple metrics include this tag as a dimension:</p><p><a href=#R-image-160035dfa7898b1b91e6d4ef7e6ba2c0 class=lightbox-link><img alt="Metric Finder" class="lazy lightbox figure-image" loading=lazy src=../../images/metric_finder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-160035dfa7898b1b91e6d4ef7e6ba2c0><img alt="Metric Finder" class="lazy lightbox lightbox-image" loading=lazy src=../../images/metric_finder.png></a></p><p>By default, <strong>Splunk Observability Cloud</strong> calculates several metrics using the trace data it receives. See <a href=https://docs.splunk.com/observability/en/apm/span-tags/metricsets.html rel=external>Learn about MetricSets in APM</a> for more details.</p><p>By creating an MMS, <code>credit_score_category</code> was added as a dimension to these metrics, which means that this dimension can now be used for alerting and dashboards.</p><p>To see how, let&rsquo;s click on the metric named <code>service.request.duration.ns.p99</code>, which brings up the following chart:</p><p><a href=#R-image-a290220c6535574edbd785f9afab8f30 class=lightbox-link><img alt="Service Request Duration" class="lazy lightbox figure-image" loading=lazy src=../../images/service_request_duration_chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a290220c6535574edbd785f9afab8f30><img alt="Service Request Duration" class="lazy lightbox lightbox-image" loading=lazy src=../../images/service_request_duration_chart.png></a></p><p>Add filters for <code>sf_environment</code>, <code>sf_service</code>, and <code>sf_dimensionalized</code>. Then set the <strong>Extrapolation policy</strong> to <code>Last value</code> and the <strong>Display units</strong> to <code>Nanosecond</code>:</p><p><a href=#R-image-e46e9ee71c8e366769950a31e52f2ccb class=lightbox-link><img alt="Chart with Seconds" class="lazy lightbox figure-image" loading=lazy src=../../images/chart_settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e46e9ee71c8e366769950a31e52f2ccb><img alt="Chart with Seconds" class="lazy lightbox lightbox-image" loading=lazy src=../../images/chart_settings.png></a></p><p>With these settings, the chart allows us to visualize the service request duration by credit score category:</p><p><a href=#R-image-33a2e54cb5af07318b142be1a2e4d788 class=lightbox-link><img alt="Duration by Credit Score" class="lazy lightbox figure-image" loading=lazy src=../../images/duration_by_credit_score.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-33a2e54cb5af07318b142be1a2e4d788><img alt="Duration by Credit Score" class="lazy lightbox lightbox-image" loading=lazy src=../../images/duration_by_credit_score.png></a></p><p>Now we can see the duration by credit score category. In my example, the red line represents the <code>exceptional</code> category, and we can see that the duration for these requests sometimes goes all the way up to 5 seconds.</p><p>The orange represents the <code>very good</code> category, and has very fast response times.</p><p>The green line represents the <code>poor</code> category, and has response times between 2-3 seconds.</p><p>It may be useful to save this chart on a dashboard for future reference. To do this, click on the <strong>Save as&mldr;</strong> button and provide a name for the chart:</p><p><a href=#R-image-aa319f25091d86aab23737ead69fba01 class=lightbox-link><img alt="Save Chart As" class="lazy lightbox figure-image" loading=lazy src=../../images/save_chart_as.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aa319f25091d86aab23737ead69fba01><img alt="Save Chart As" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save_chart_as.png></a></p><p>When asked which dashboard to save the chart to, let&rsquo;s create a <strong>new</strong> one named <code>Credit Check Service - Your Name</code> (substituting your actual name):</p><p><a href=#R-image-e44be40e0994d2138c4d0a7f6ebeea50 class=lightbox-link><img alt="Save Chart As" class="lazy lightbox figure-image" loading=lazy src=../../images/create_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e44be40e0994d2138c4d0a7f6ebeea50><img alt="Save Chart As" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create_dashboard.png></a></p><p>Now we can see the chart on our dashboard, and can add more charts as needed to monitor our credit check service:</p><p><a href=#R-image-18de69abd46ded7197b234435eaacba9 class=lightbox-link><img alt="Credit Check Service Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/credit_check_service_dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-18de69abd46ded7197b234435eaacba9><img alt="Credit Check Service Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/credit_check_service_dashboard.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=use-tags-with-alerting>Use Tags with Alerting</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<h3 id=alerts>Alerts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>It&rsquo;s great that we have a dashboard to monitor the response times of the credit check service by credit score, but we don&rsquo;t want to stare at a dashboard all day.</p><p>Let&rsquo;s create an alert so we can be notified proactively if customers with <code>exceptional</code> credit scores encounter slow requests.</p><p>To create this alert, click on the little bell on the top right-hand corner of the chart, then select <strong>New detector from chart</strong>:</p><p><a href=#R-image-c8cb72aa7cef384371245472eb1169f0 class=lightbox-link><img alt="New Detector From Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/new_detector_from_chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8cb72aa7cef384371245472eb1169f0><img alt="New Detector From Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new_detector_from_chart.png></a></p><p>Let&rsquo;s call the detector <code>Latency by Credit Score Category</code>. Set the environment to your environment name (i.e. <code>tagging-workshop-yourname</code>) then select <code>creditcheckservice</code> as the service. Since we only want to look at performance for customers with <code>exceptional</code> credit scores, add a filter using the <code>credit_score_category</code> dimension and select <code>exceptional</code>:</p><p><a href=#R-image-9c986ecbab7b3dc15ed921967bc5c094 class=lightbox-link><img alt="Create New Detector" class="lazy lightbox figure-image" loading=lazy src=../../images/create_new_detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c986ecbab7b3dc15ed921967bc5c094><img alt="Create New Detector" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create_new_detector.png></a></p><p>As an alert condition instead of &ldquo;<strong>Static threshold</strong>&rdquo; we want to select &ldquo;<strong>Sudden Change</strong>&rdquo; to make the example more vivid.</p><p><a href=#R-image-1970aa258d56d0b47ec12923bef96388 class=lightbox-link><img alt="Alert Condition: Sudden Change" class="lazy lightbox figure-image" loading=lazy src=../../images/alert_condition_suddenchange.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1970aa258d56d0b47ec12923bef96388><img alt="Alert Condition: Sudden Change" class="lazy lightbox lightbox-image" loading=lazy src=../../images/alert_condition_suddenchange.png></a></p><p>We can then set the remainder of the alert details as we normally would. The key thing to remember here is that without capturing a tag with the credit score category and indexing it, we wouldn&rsquo;t be able to alert at this granular level, but would instead be forced to bucket all customers together, regardless of their importance to the business.</p><p>Unless you want to get notified, we do not need to finish this wizard. You can just close the wizard by clicking the <strong>X</strong> on the top right corner of the wizard pop-up.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=use-tags-with-service-level-objectives>Use Tags with Service Level Objectives</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>We can now use the created Monitoring MetricSet together with Service Level Objectives a similar way we used them with dashboards and detectors/alerts before. For that we want to be clear about some key concepts:</p><h2 id=key-concepts-of-service-level-monitoring>Key Concepts of Service Level Monitoring<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>(<a href=/observability-workshop/en/scenarios/debug-problems/tagging/7-alerting-dashboards-slos/3-slos/index.html#creating-a-new-service-level-objective>skip</a> if you know this)</p><table><thead><tr><th>Concept</th><th>Definition</th><th>Examples</th></tr></thead><tbody><tr><td>Service level indicator (SLI)</td><td>An SLI is a quantitative measurement showing some health of a service, expressed as a metric or combination of metrics.</td><td><em>Availability SLI</em>: Proportion of requests that resulted in a successful response<br><em>Performance SLI</em>: Proportion of requests that loaded in &lt; 100 ms</td></tr><tr><td>Service level objective (SLO)</td><td>An SLO defines a target for an SLI and a compliance period over which that target must be met. An SLO contains 3 elements: an SLI, a target, and a compliance period. Compliance periods can be calendar, such as monthly, or rolling, such as past 30 days.</td><td><em>Availability SLI over a calendar period</em>: Our service must respond successfully to 95% of requests in a month<br><em>Performance SLI over a rolling period</em>: Our service must respond to 99% of requests in &lt; 100 ms over a 7-day period</td></tr><tr><td>Service level agreement (SLA)</td><td>An SLA is a contractual agreement that indicates service levels your users can expect from your organization. If an SLA is not met, there can be financial consequences.</td><td>A customer service SLA indicates that 90% of support requests received on a normal support day must have a response within 6 hours.</td></tr><tr><td>Error budget</td><td>A measurement of how your SLI performs relative to your SLO over a period of time. Error budget measures the difference between actual and desired performance. It determines how unreliable your service might be during this period and serves as a signal when you need to take corrective action.</td><td>Our service can respond to 1% of requests in >100 ms over a 7 day period.</td></tr><tr><td>Burn rate</td><td>A unitless measurement of how quickly a service consumes the error budget during the compliance window of the SLO. Burn rate makes the SLO and error budget actionable, showing service owners when a current incident is serious enough to page an on-call responder.</td><td>For an SLO with a 30-day compliance window, a constant burn rate of 1 means your error budget is used up in exactly 30 days.</td></tr></tbody></table><h2 id=creating-a-new-service-level-objective>Creating a new Service Level Objective<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There is an easy to follow wizard to create a new Service Level Objective (SLO). In the left navigation just follow the link &ldquo;<strong>Detectors & SLOs</strong>&rdquo;. From there select the third tab &ldquo;<strong>SLOs</strong>&rdquo; and click the blue button to the right that says &ldquo;<strong>Create SLO</strong>&rdquo;.</p><p><a href=#R-image-9739d45d3aa8740bc43401ddf6632bba class=lightbox-link><img alt="Create new SLO" class="lazy lightbox figure-image" loading=lazy src=../../images/slo_0_create.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9739d45d3aa8740bc43401ddf6632bba><img alt="Create new SLO" class="lazy lightbox lightbox-image" loading=lazy src=../../images/slo_0_create.png></a></p><p>The wizard guides you through some easy steps. And if everything during the previous steps worked out, you will have no problems here. ;)</p><p>In our case we want to use <code>Service & endpoint</code> as our <strong>Metric type</strong> instead of <code>Custom metric</code>. We filter the <strong>Environment</strong> down to the environment that we are using during this workshop (i.e. <code>tagging-workshop-yourname</code>) and select the <code>creditcheckservice</code> from the <strong>Service and endpoint</strong> list. Our <strong>Indicator type</strong> for this workshop will be <code>Request latency</code> and not <code>Request success</code>.</p><p>Now we can select our <strong>Filters</strong>. Since we are using the <code>Request latency</code> as the <strong>Indicator type</strong> and that is a metric of the APM Service, we can filter on <code>credit.score.category</code>. Feel free to try out what happens, when you set the <strong>Indicator type</strong> to <code>Request success</code>.</p><p>Today we are only interested in our <code>exceptional</code> credit scores. So please select that as the filter.</p><p><a href=#R-image-9082677752ac0076dbb5fe78504de6fa class=lightbox-link><img alt="Choose Service or Metric for SLO" class="lazy lightbox figure-image" loading=lazy src=../../images/slo_1_choose.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9082677752ac0076dbb5fe78504de6fa><img alt="Choose Service or Metric for SLO" class="lazy lightbox lightbox-image" loading=lazy src=../../images/slo_1_choose.png></a></p><p>In the next step we define the objective we want to reach. For the <code>Request latency</code> type, we define the <strong>Target (%)</strong>, the <strong>Latency (ms)</strong> and the <strong>Compliance Window</strong>. Please set these to <code>99</code>, <code>100</code> and <code>Last 7 days</code>. This will give us a good idea what we are achieving already.</p><p>Here we will already be in shock or play around with the numbers to make it not so scary. Feel free to play around with the numbers to see how well we achieve the objective and how much we have left to burn.</p><p><a href=#R-image-0d09056c9ddd1bb2bb1d7bda2ac1f6bb class=lightbox-link><img alt="Define Objective for SLO" class="lazy lightbox figure-image" loading=lazy src=../../images/slo_2_define_objective.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0d09056c9ddd1bb2bb1d7bda2ac1f6bb><img alt="Define Objective for SLO" class="lazy lightbox lightbox-image" loading=lazy src=../../images/slo_2_define_objective.png></a></p><p>The third step gives us the chance to alert (aka annoy) people who should be aware about these SLOs to initiate countermeasures. These &ldquo;people&rdquo; can also be mechanism like ITSM systems or webhooks to initiate automatic remediation steps.</p><p>Activate all categories you want to alert on and add recipients to the different alerts.</p><p><a href=#R-image-3993ed71c35be58e36ab903d59e97d4c class=lightbox-link><img alt="Define Alerting for SLO" class="lazy lightbox figure-image" loading=lazy src=../../images/slo_3_define_alerting.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3993ed71c35be58e36ab903d59e97d4c><img alt="Define Alerting for SLO" class="lazy lightbox lightbox-image" loading=lazy src=../../images/slo_3_define_alerting.png></a></p><p>The next step is only the naming for this SLO. Have your own naming convention ready for this. In our case we would just name it <code>creditchceckservice:score:exceptional:YOURNAME</code> and click the <strong>Create</strong>-button <strong>BUT</strong> you can also <strong>just cancel the wizard</strong> by clicking anything in the left navigation and confirming to <strong>Discard changes</strong>.</p><p><a href=#R-image-48962083640c419cbca54556e503d18a class=lightbox-link><img alt="Name and Save the SLO" class="lazy lightbox figure-image" loading=lazy src=../../images/slo_4_name_and_save.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-48962083640c419cbca54556e503d18a><img alt="Name and Save the SLO" class="lazy lightbox lightbox-image" loading=lazy src=../../images/slo_4_name_and_save.png></a></p><p>And with that we have (<em>nearly</em>) successfully created an SLO including the alerting in case we might miss or goals.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=summary>Summary</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this workshop, we learned the following:</p><ul><li>What are tags and why are they such a critical part of making an application observable?</li><li>How to use <a href=https://opentelemetry.io rel=external><strong>OpenTelemetry</strong></a> to capture tags of interest from your application.</li><li>How to index tags in <strong>Splunk Observability Cloud</strong> and the differences between <strong>Troubleshooting MetricSets</strong> and <strong>Monitoring MetricSets</strong>.</li><li>How to utilize tags in <strong>Splunk Observability Cloud</strong> to find ‚Äúunknown unknowns‚Äù using the <strong>Tag Spotlight</strong> and <strong>Dynamic Service Map</strong> features.</li><li>How to utilize tags for dashboards, alerting and service level objectives.</li></ul><p>Collecting tags aligned with the best practices shared in this workshop will let you get even more value from the data you‚Äôre sending to <strong>Splunk Observability Cloud</strong>. Now that you‚Äôve completed this workshop, you have the knowledge you need to start collecting tags from your own applications!</p><p>To get started with capturing tags today, check out <a href=https://docs.splunk.com/observability/en/apm/span-tags/add-context-trace-span.html#instrument-your-application-code-to-add-tags-to-spans rel=external>how to add tags in various supported languages</a>, and then <a href=https://docs.splunk.com/observability/en/apm/span-tags/index-span-tags.html#apm-index-span-tags rel=external>how to use them to create Troubleshooting MetricSets</a> so they can be analyzed in Tag Spotlight. For more help, feel free to <a href=https://www.splunk.com/en_us/about-splunk/contact-us.html rel=external>ask a Splunk Expert</a>.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip for Workshop Facilitator(s)</summary><div class=box-content><p>Once the workshop is complete, remember to delete the APM MetricSet you created earlier for the <code>credit.score.category</code> tag.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=profiling-workshop>Profiling Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Derek Mitchell</span></span><p><strong>Service Maps</strong> and <strong>Traces</strong> are extremely valuable in determining what service an issue resides in. And related log data helps provide detail on why issues are occurring in that service.</p><p>But engineers sometimes need to go even deeper to debug a problem that‚Äôs occurring in one of their services.</p><p>This is where features such as Splunk&rsquo;s <strong>AlwaysOn Profiling</strong> and <strong>Database Query Performance</strong> come in.</p><p><strong>AlwaysOn Profiling</strong> continuously collects stack traces so that you can discover which lines in your code are consuming the most CPU and memory.</p><p>And <strong>Database Query Performance</strong> can quickly identify long-running, unoptimized, or heavy queries and mitigate issues they might be causing.</p><p>In this workshop, we&rsquo;ll explore:</p><ul><li>How to debug an application with several performance issues.</li><li>How to use <strong>Database Query Performance</strong> to find slow-running queries that impact application performance.</li><li>How to enable <strong>AlwaysOn Profiling</strong> and use it to find the code that consumes the most CPU and memory.</li><li>How to apply fixes based on findings from <strong>Splunk Observability Cloud</strong> and verify the result.</li></ul><p>The workshop uses a Java-based application called <code>The Door Game</code> hosted in Kubernetes. Let&rsquo;s get started!</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>The easiest way to navigate through this workshop is by using:</p><ul><li>the left/right arrows (<strong>&lt;</strong> | <strong>></strong>) on the top right of this page</li><li>the left (‚óÄÔ∏è) and right (‚ñ∂Ô∏è) cursor keys on your keyboard</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Profiling Workshop</h1><article class=default><header class=headline></header><h1 id=build-the-sample-application>Build the Sample Application</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For this workshop, we&rsquo;ll be using a Java-based application called <code>The Door Game</code>. It will be hosted in Kubernetes.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will start with an EC2 instance and perform some <a href=/observability-workshop/en/scenarios/debug-problems/profiling/1-build-application/index.html#initial-steps>initial steps</a> in order to get to the following state:</p><ul><li>Deploy the <strong>Splunk distribution of the OpenTelemetry Collector</strong></li><li>Deploy the MySQL database container and populate data</li><li>Build and deploy the <code>doorgame</code> application container</li></ul><h2 id=initial-steps>Initial Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The initial setup can be completed by executing the following steps on the command line of your EC2 instance.</p><p>You&rsquo;ll be asked to enter a name for your environment. Please use <code>profiling-workshop-yourname</code> (where <code>yourname</code> is replaced by your actual name).</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/profiling
</span></span><span class=line><span class=cl>./1-deploy-otel-collector.sh
</span></span><span class=line><span class=cl>./2-deploy-mysql.sh
</span></span><span class=line><span class=cl>./3-deploy-doorgame.sh</span></span></code></pre></div><h2 id=lets-play-the-door-game>Let&rsquo;s Play The Door Game<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that the application is deployed, let&rsquo;s play with it and generate some observability data.</p><p>You should be able to access The Door Game application by pointing your browser to port 81
of the IP address for your EC2 instance. For example:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>http://52.23.184.60:81</span></span></code></pre></div><p>You should be met with The Door Game intro screen:</p><p><a href=#R-image-8ec9c8b21d927bd286a2f1ce85e0ca32 class=lightbox-link><img alt="Door Game Welcome Screen" class="lazy lightbox figure-image" loading=lazy src=../images/door_game_initial_screen.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8ec9c8b21d927bd286a2f1ce85e0ca32><img alt="Door Game Welcome Screen" class="lazy lightbox lightbox-image" loading=lazy src=../images/door_game_initial_screen.png></a></p><p>Click <code>Let's Play</code> to start the game:</p><p><a href=#R-image-f0fa1c9ee209f25f70314948fd96fb69 class=lightbox-link><img alt="Let&rsquo;s Play" class="lazy lightbox figure-image" loading=lazy src=../images/lets_play.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0fa1c9ee209f25f70314948fd96fb69><img alt="Let&rsquo;s Play" class="lazy lightbox lightbox-image" loading=lazy src=../images/lets_play.png></a></p><p>Did you notice that it took a long time after clicking <code>Let's Play</code> before we could actually start playing the game?</p><p>Let&rsquo;s use <strong>Splunk Observability Cloud</strong> to determine why the application startup is so slow.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Oct 27, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=troubleshoot-game-startup>Troubleshoot Game Startup</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Let&rsquo;s use <strong>Splunk Observability Cloud</strong> to determine why the game started so slowly.</p><h2 id=view-your-application-in-splunk-observability-cloud>View your application in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Note: when the application is deployed for the first time, it may take a few minutes for the data to appear.</p><p>Navigate to APM, then use the Environment dropdown to select your environment (i.e. <code>profiling-workshop-name</code>).</p><p>If everything was deployed correctly, you should see <code>doorgame</code> displayed in the list of services:</p><p><a href=#R-image-6f904ff106e8a2efc6036d8aa5719efb class=lightbox-link><img alt="APM Overview" class="lazy lightbox figure-image" loading=lazy src=../images/apm_overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6f904ff106e8a2efc6036d8aa5719efb><img alt="APM Overview" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm_overview.png></a></p><p>Click on <strong>Explore</strong> on the right-hand side to view the service map. We should the <code>doorgame</code> application on the service map:</p><p><a href=#R-image-047e4f06bb5dfb562820e85acc5ac96a class=lightbox-link><img alt="Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/service_map.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-047e4f06bb5dfb562820e85acc5ac96a><img alt="Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/service_map.png></a></p><p>Notice how the majority of the time is being spent in the MySQL database. We can get more details by clicking on <strong>Database Query Performance</strong> on the right-hand side.</p><p><a href=#R-image-957fd828c58768ba61813f20c9127b41 class=lightbox-link><img alt="Database Query Performance" class="lazy lightbox figure-image" loading=lazy src=../images/db_query_performance.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-957fd828c58768ba61813f20c9127b41><img alt="Database Query Performance" class="lazy lightbox lightbox-image" loading=lazy src=../images/db_query_performance.png></a></p><p>This view shows the SQL queries that took the most amount of time. Ensure that the <strong>Compare to</strong> dropdown is set to <code>None</code>, so we can focus on current performance.</p><p>We can see that one query in particular is taking a long time:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>select * from doorgamedb.users, doorgamedb.organizations</code></pre></div><p>(do you notice anything unusual about this query?)</p><p>Let&rsquo;s troubleshoot further by clicking on one of the spikes in the latency graph. This brings up a list of example traces that include this slow query:</p><p><a href=#R-image-67c028e3607360db7f948e4c1fee0d1d class=lightbox-link><img alt="Traces with Slow Query" class="lazy lightbox figure-image" loading=lazy src=../images/traces_with_slow_query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-67c028e3607360db7f948e4c1fee0d1d><img alt="Traces with Slow Query" class="lazy lightbox lightbox-image" loading=lazy src=../images/traces_with_slow_query.png></a></p><p>Click on one of the traces to see the details:</p><p><a href=#R-image-20ad4f0b5a26828c6c98b20ec00785a7 class=lightbox-link><img alt="Trace with Slow Query" class="lazy lightbox figure-image" loading=lazy src=../images/trace_with_slow_query.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-20ad4f0b5a26828c6c98b20ec00785a7><img alt="Trace with Slow Query" class="lazy lightbox lightbox-image" loading=lazy src=../images/trace_with_slow_query.png></a></p><p>In the trace, we can see that the <code>DoorGame.startNew</code> operation took 25.8 seconds, and 17.6 seconds of this was associated with the slow SQL query we found earlier.</p><h2 id=what-did-we-accomplish>What did we accomplish?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To recap what we&rsquo;ve done so far:</p><ul><li>We&rsquo;ve deployed our application and are able to access it successfully.</li><li>The application is sending traces to <strong>Splunk Observability Cloud</strong> successfully.</li><li>We started troubleshooting the slow application startup time, and found a slow SQL query that seems to be the root cause.</li></ul><p>To troubleshoot further, it would be helpful to get deeper diagnostic data that tells us what&rsquo;s happening inside our JVM, from both a memory (i.e. JVM heap) and CPU perspective. We&rsquo;ll tackle that in the next section of the workshop.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=enable-alwayson-profiling>Enable AlwaysOn Profiling</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>Let&rsquo;s learn how to enable the memory and CPU profilers, verify their operation,
and use the results in Splunk Observability Cloud to find out why our application startup is slow.</p><h3 id=update-the-application-configuration>Update the application configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We will need to pass additional configuration arguments to the Splunk OpenTelemetry Java agent in order to
enable both profilers. The configuration is <a href=https://docs.splunk.com/observability/en/gdi/get-data-in/application/java/instrumentation/instrument-java-application.html#activate-alwayson-profiling rel=external>documented here</a>
in detail, but for now we just need the following settings:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>SPLUNK_PROFILER_ENABLED=&#34;true&#34;
SPLUNK_PROFILER_MEMORY_ENABLED=&#34;true&#34;</code></pre></div><p>Since our application is deployed in Kubernetes, we can update the Kubernetes manifest file to set these environment variables. Open the <code>doorgame/doorgame.yaml</code> file for editing, and ensure the values of the following environment variables are set to &ldquo;true&rdquo;:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_PROFILER_ENABLED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_PROFILER_MEMORY_ENABLED</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span></span></span></code></pre></div><p>Next, let&rsquo;s redeploy the Door Game application by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/profiling
</span></span><span class=line><span class=cl>kubectl apply -f doorgame/doorgame.yaml</span></span></code></pre></div><p>After a few seconds, a new pod will be deployed with the updated application settings.</p><h3 id=confirm-operation>Confirm operation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To ensure the profiler is enabled, let&rsquo;s review the application logs with the following commands:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>doorgame --tail<span class=o>=</span><span class=m>100</span> <span class=p>|</span> grep JfrActivator</span></span></code></pre></div><p>You should see a line in the application log output that shows the profiler is active:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code class=language-log data-lang=log>[otel.javaagent 2024-02-05 19:01:12:416 +0000] [main] INFO com.splunk.opentelemetry.profiler.JfrActivator - Profiler is active.```</code></pre></div><p>This confirms that the profiler is enabled and sending data to the OpenTelemetry collector deployed in our Kubernetes cluster, which in turn sends profiling data to Splunk Observability Cloud.</p><h3 id=profiling-in-apm>Profiling in APM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Visit <code>http://&lt;your IP address>:81</code> and play a few more rounds of The Door Game.</p><p>Then head back to Splunk Observability Cloud, click on APM, and click on the <code>doorgame</code> service at the bottom of the screen.</p><p>Click on &ldquo;Traces&rdquo; on the right-hand side to load traces for this service. Filter on traces involving the <code>doorgame</code> service and the <code>GET new-game</code> operation (since we&rsquo;re troubleshooting the game startup sequence):</p><p><a href=#R-image-faa0c9e582f045ae8bf4efcb73afbb2c class=lightbox-link><img alt="New Game Traces" class="lazy lightbox figure-image" loading=lazy src=../images/new_game_traces.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-faa0c9e582f045ae8bf4efcb73afbb2c><img alt="New Game Traces" class="lazy lightbox lightbox-image" loading=lazy src=../images/new_game_traces.png></a></p><p>Selecting one of these traces brings up the following screen:</p><p><a href=#R-image-658ddb2b14053d58f968b75ffdf925b8 class=lightbox-link><img alt="Trace with Call Stacks" class="lazy lightbox figure-image" loading=lazy src=../images/trace_with_call_stacks.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-658ddb2b14053d58f968b75ffdf925b8><img alt="Trace with Call Stacks" class="lazy lightbox lightbox-image" loading=lazy src=../images/trace_with_call_stacks.png></a></p><p>You can see that the spans now include &ldquo;Call Stacks&rdquo;, which is a result of us enabling CPU and memory profiling earlier.</p><p>Click on the span named <code>doorgame: SELECT doorgamedb</code>, then click on CPU stack traces on the right-hand side:</p><p><a href=#R-image-8194b5df0a1f9efd8f12046fe8dd68bc class=lightbox-link><img alt="Trace with CPU Call Stacks" class="lazy lightbox figure-image" loading=lazy src=../images/trace_with_cpu_call_stacks.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8194b5df0a1f9efd8f12046fe8dd68bc><img alt="Trace with CPU Call Stacks" class="lazy lightbox lightbox-image" loading=lazy src=../images/trace_with_cpu_call_stacks.png></a></p><p>This brings up the CPU call stacks captured by the profiler.</p><p>Let&rsquo;s open the AlwaysOn Profiler to review the CPU stack trace in more detail. We can do this by clicking on the <code>Span</code> link beside <code>View in AlwaysOn Profiler</code>:</p><p><a href=#R-image-58e826ac022a2a530cca431e15785ac3 class=lightbox-link><img alt="Flamegraph and table" class="lazy lightbox figure-image" loading=lazy src=../images/flamegraph_and_table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-58e826ac022a2a530cca431e15785ac3><img alt="Flamegraph and table" class="lazy lightbox lightbox-image" loading=lazy src=../images/flamegraph_and_table.png></a></p><p>The AlwaysOn Profiler includes both a table and a <a href=https://www.brendangregg.com/flamegraphs.html rel=external>flamegraph</a>. Take some time to explore this view by doing some of the following:</p><ul><li>click a table item and notice the change in flamegraph</li><li>navigate the flamegraph by clicking on a stack frame to zoom in, and a parent frame to zoom out</li><li>add a search term like <code>splunk</code> or <code>jetty</code> to highlight some matching stack frames</li></ul><p>Let&rsquo;s have a closer look at the stack trace, starting with the <code>DoorGame.startNew</code> method (since we already know that it&rsquo;s the slowest part of the request)</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>com.splunk.profiling.workshop.DoorGame.startNew(DoorGame.java:24)
com.splunk.profiling.workshop.UserData.loadUserData(UserData.java:33)
com.mysql.cj.jdbc.StatementImpl.executeQuery(StatementImpl.java:1168)
com.mysql.cj.NativeSession.execSQL(NativeSession.java:655)
com.mysql.cj.protocol.a.NativeProtocol.sendQueryString(NativeProtocol.java:998)
com.mysql.cj.protocol.a.NativeProtocol.sendQueryPacket(NativeProtocol.java:1065)
com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1715)
com.mysql.cj.protocol.a.NativeProtocol.read(NativeProtocol.java:1661)
com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:48)
com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:87)
com.mysql.cj.protocol.a.NativeProtocol.read(NativeProtocol.java:1648)
com.mysql.cj.protocol.a.ResultsetRowReader.read(ResultsetRowReader.java:42)
com.mysql.cj.protocol.a.ResultsetRowReader.read(ResultsetRowReader.java:75)
com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:44)
com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:66)
com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:41)
com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:62)
com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:45)
com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:102)
com.mysql.cj.protocol.a.SimplePacketReader.readMessageLocal(SimplePacketReader.java:137)
com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:64)
java.io.FilterInputStream.read(Unknown Source:0)
sun.security.ssl.SSLSocketImpl$AppInputStream.read(Unknown Source:0)
sun.security.ssl.SSLSocketImpl.readApplicationRecord(Unknown Source:0)
sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(Unknown Source:0)
sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source:0)
sun.security.ssl.SSLSocketInputRecord.read(Unknown Source:0)
java.net.SocketInputStream.read(Unknown Source:0)
java.net.SocketInputStream.read(Unknown Source:0)
java.lang.ThreadLocal.get(Unknown Source:0)</code></pre></div><p>We can interpret the stack trace as follows:</p><ul><li>When starting a new Door Game, a call is made to load user data.</li><li>This results in executing a SQL query to load the user data (which is related to the slow SQL query we saw earlier).</li><li>We then see calls to read data in from the database.</li></ul><p>So, what does this all mean? It means that our application startup is slow since it&rsquo;s spending time loading user data. In fact, the profiler has told us the exact line of code where this happens:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>com.splunk.profiling.workshop.UserData.loadUserData(UserData.java:33)</code></pre></div><p>Let&rsquo;s open the corresponding source file (<code>./doorgame/src/main/java/com/splunk/profiling/workshop/UserData.java</code>) and look at this code in more detail:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>public class UserData {

    static final String DB_URL = &#34;jdbc:mysql://mysql/DoorGameDB&#34;;
    static final String USER = &#34;root&#34;;
    static final String PASS = System.getenv(&#34;MYSQL_ROOT_PASSWORD&#34;);
    static final String SELECT_QUERY = &#34;select * FROM DoorGameDB.Users, DoorGameDB.Organizations&#34;;

    HashMap&lt;String, User&gt; users;

    public UserData() {
        users = new HashMap&lt;String, User&gt;();
    }

    public void loadUserData() {

        // Load user data from the database and store it in a map
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        try{
            conn = DriverManager.getConnection(DB_URL, USER, PASS);
            stmt = conn.createStatement();
            rs = stmt.executeQuery(SELECT_QUERY);
            while (rs.next()) {
                User user = new User(rs.getString(&#34;UserId&#34;), rs.getString(&#34;FirstName&#34;), rs.getString(&#34;LastName&#34;));
                users.put(rs.getString(&#34;UserId&#34;), user);
            }</code></pre></div><p>Here we can see the application logic in action. It establishes a connection to the database, then executes the SQL query we saw earlier:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>select * FROM DoorGameDB.Users, DoorGameDB.Organizations</code></pre></div><p>It then loops through each of the results, and loads each user into a <code>HashMap</code> object, which is a collection of <code>User</code> objects.</p><p>We have a good understanding of why the game startup sequence is so slow, but how do we fix it?</p><p>For more clues, let&rsquo;s have a look at the other part of AlwaysOn Profiling: memory profiling. To do this, click on the <code>Memory</code> tab in AlwaysOn profiling:</p><p><a href=#R-image-9bcbbef12c2e99831848ad9850d4c077 class=lightbox-link><img alt="Memory Profiling" class="lazy lightbox figure-image" loading=lazy src=../images/memory_profiling.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9bcbbef12c2e99831848ad9850d4c077><img alt="Memory Profiling" class="lazy lightbox lightbox-image" loading=lazy src=../images/memory_profiling.png></a></p><p>At the top of this view, we can see how much heap memory our application is using, the heap memory allocation rate, and garbage collection activity.</p><p>We can see that our application is using about 400 MB out of the max 1 GB heap size, which seems excessive for such a simple application. We can also see that some garbage collection occurred, which caused our application to pause (and probably annoyed those wanting to play the Game Door).</p><p>At the bottom of the screen, which can see which methods in our Java application code are associated with the most heap memory usage. Click on the first item in the list to show the Memory Allocation Stack Traces associated with the <code>java.util.Arrays.copyOf</code> method specifically:</p><p><a href=#R-image-67126ca589b33dfc6edd4c4c64e5ca64 class=lightbox-link><img alt="Memory Allocation Stack Traces" class="lazy lightbox figure-image" loading=lazy src=../images/memory_allocation_stack_traces.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-67126ca589b33dfc6edd4c4c64e5ca64><img alt="Memory Allocation Stack Traces" class="lazy lightbox lightbox-image" loading=lazy src=../images/memory_allocation_stack_traces.png></a></p><p>With help from the profiler, we can see that the <code>loadUserData</code> method not only consumes excessive CPU time, but it also consumes excessive memory when storing the user data in the <code>HashMap</code> collection object.</p><h2 id=what-did-we-accomplish>What did we accomplish?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We&rsquo;ve come a long way already!</p><ul><li>We learned how to enable the profiler in the Splunk OpenTelemetry Java instrumentation agent.</li><li>We learned how to verify in the agent output that the profiler is enabled.</li><li>We have explored several profiling related workflows in APM:<ul><li>How to navigate to AlwaysOn Profiling from the troubleshooting view</li><li>How to explore the flamegraph and method call duration table through navigation and filtering</li><li>How to identify when a span has sampled call stacks associated with it</li><li>How to explore heap utilization and garbage collection activity</li><li>How to view memory allocation stack traces for a particular method</li></ul></li></ul><p>In the next section, we&rsquo;ll apply a fix to our application to resolve the slow startup performance.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=fix-application-startup-slowness>Fix Application Startup Slowness</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we&rsquo;ll use what we learned from the profiling data in <strong>Splunk Observability Cloud</strong> to resolve the slowness we saw when starting our application.</p><h3 id=examining-the-source-code>Examining the Source Code<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Open the corresponding source file once again (<code>./doorgame/src/main/java/com/splunk/profiling/workshop/UserData.java</code>) and focus on the following code:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>public class UserData {

    static final String DB_URL = &#34;jdbc:mysql://mysql/DoorGameDB&#34;;
    static final String USER = &#34;root&#34;;
    static final String PASS = System.getenv(&#34;MYSQL_ROOT_PASSWORD&#34;);
    static final String SELECT_QUERY = &#34;select * FROM DoorGameDB.Users, DoorGameDB.Organizations&#34;;

    HashMap&lt;String, User&gt; users;

    public UserData() {
        users = new HashMap&lt;String, User&gt;();
    }

    public void loadUserData() {

        // Load user data from the database and store it in a map
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        try{
            conn = DriverManager.getConnection(DB_URL, USER, PASS);
            stmt = conn.createStatement();
            rs = stmt.executeQuery(SELECT_QUERY);
            while (rs.next()) {
                User user = new User(rs.getString(&#34;UserId&#34;), rs.getString(&#34;FirstName&#34;), rs.getString(&#34;LastName&#34;));
                users.put(rs.getString(&#34;UserId&#34;), user);
            }</code></pre></div><p>After speaking with a database engineer, you discover that the SQL query being executed includes a cartesian join:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>select * FROM DoorGameDB.Users, DoorGameDB.Organizations</code></pre></div><p>Cartesian joins are notoriously slow, and shouldn&rsquo;t be used, in general.</p><p>Upon further investigation, you discover that there are 10,000 rows in the user table, and 1,000 rows in the organization table. When we execute a cartesian join using both of these tables, we end up with 10,000 x 1,000 rows being returned, which is 10,000,000 rows!</p><p>Furthermore, the query ends up returning duplicate user data, since each record in the user table is repeated for each organization.</p><p>So when our code executes this query, it tries to load 10,000,000 user objects into the HashMap, which explains why it takes so long to execute, and why it consumes so much heap memory.</p><h3 id=lets-fix-that-bug>Let&rsquo;s Fix That Bug<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>After consulting the engineer that originally wrote this code, we determined that the join with the Organizations table was inadvertent.</p><p>So when loading the users into the HashMap, we simply need to remove this table from the query.</p><p>Open the corresponding source file once again (<code>./doorgame/src/main/java/com/splunk/profiling/workshop/UserData.java</code>) and change the following line of code:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>SELECT_QUERY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;select * FROM DoorGameDB.Users, DoorGameDB.Organizations&#34;</span><span class=p>;</span></span></span></code></pre></div><p>to:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>SELECT_QUERY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;select * FROM DoorGameDB.Users&#34;</span><span class=p>;</span></span></span></code></pre></div><p>Now the method should perform much more quickly, and less memory should be used, as it&rsquo;s loading the correct number of users into the HashMap (10,000 instead of 10,000,000).</p><h3 id=rebuild-and-redeploy-application>Rebuild and Redeploy Application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Let&rsquo;s test our changes by using the following commands to re-build and re-deploy the Door Game application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/profiling
</span></span><span class=line><span class=cl>./5-redeploy-doorgame.sh</span></span></code></pre></div><p>Once the application has been redeployed successfully, visit The Door Game again to confirm that your fix is in place:
<code>http://&lt;your IP address>:81</code></p><p>Clicking <code>Let's Play</code> should take us to the game more quickly now (though performance could still be improved):</p><p><a href=#R-image-a6a704ca3720af22b73c0852aaaaa282 class=lightbox-link><img alt="Choose Door" class="lazy lightbox figure-image" loading=lazy src=../images/door_game_choose_door.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a6a704ca3720af22b73c0852aaaaa282><img alt="Choose Door" class="lazy lightbox lightbox-image" loading=lazy src=../images/door_game_choose_door.png></a></p><p>Start the game a few more times, then return to <strong>Splunk Observability Cloud</strong> to confirm that the latency of the <code>GET new-game</code> operation has decreased.</p><h2 id=what-did-we-accomplish>What did we accomplish?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>We discovered why our SQL query was so slow.</li><li>We applied a fix, then rebuilt and redeployed our application.</li><li>We confirmed that the application starts a new game more quickly.</li></ul><p>In the next section, we&rsquo;ll explore continue playing the game and fix any remaining performance issues that we find.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=fix-in-game-slowness>Fix In Game Slowness</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>Now that our game startup slowness has been resolved, let&rsquo;s play several rounds of the Door Game and ensure the rest of the game performs quickly.</p><p>As you play the game, do you notice any other slowness? Let&rsquo;s look at the data in <strong>Splunk Observability</strong> Cloud to put some numbers on what we&rsquo;re seeing.</p><h3 id=review-game-performance-in-splunk-observability-cloud>Review Game Performance in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Navigate to APM then click on Traces on the right-hand side of the screen. Sort the traces by Duration in descending order:</p><p><a href=#R-image-01b4e8b67f0d3d69743083aa017ab042 class=lightbox-link><img alt="Slow Traces" class="lazy lightbox figure-image" loading=lazy src=../images/slow_trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-01b4e8b67f0d3d69743083aa017ab042><img alt="Slow Traces" class="lazy lightbox lightbox-image" loading=lazy src=../images/slow_trace.png></a></p><p>We can see that a few of the traces with an operation of <code>GET /game/:uid/picked/:picked/outcome</code> have a duration of just over five seconds. This explains why we&rsquo;re still seeing some slowness when we play the app (note that the slowness is no longer on the game startup operation, <code>GET /new-game</code>, but rather a different operation used while actually playing the game).</p><p>Let&rsquo;s click on one of the slow traces and take a closer look. Since profiling is still enabled, call stacks have been captured as part of this trace. Click on the child span in the waterfall view, then click CPU Stack Traces:</p><p><a href=#R-image-32cf30ab6edafeac4126229cf763a678 class=lightbox-link><img alt="View Stack on Span" class="lazy lightbox figure-image" loading=lazy src=../images/view_stack_on_span.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-32cf30ab6edafeac4126229cf763a678><img alt="View Stack on Span" class="lazy lightbox lightbox-image" loading=lazy src=../images/view_stack_on_span.png></a></p><p>At the bottom of the call stack, we can see that the thread was busy sleeping:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code class=language-log data-lang=log>com.splunk.profiling.workshop.ServiceMain$$Lambda$.handle(Unknown Source:0)
com.splunk.profiling.workshop.ServiceMain.lambda$main$(ServiceMain.java:34)
com.splunk.profiling.workshop.DoorGame.getOutcome(DoorGame.java:41)
com.splunk.profiling.workshop.DoorChecker.isWinner(DoorChecker.java:14)
com.splunk.profiling.workshop.DoorChecker.checkDoorTwo(DoorChecker.java:30)
com.splunk.profiling.workshop.DoorChecker.precheck(DoorChecker.java:36)
com.splunk.profiling.workshop.Util.sleep(Util.java:9)
java.util.concurrent.TimeUnit.sleep(Unknown Source:0)
java.lang.Thread.sleep(Unknown Source:0)
java.lang.Thread.sleep(Native Method:0)</code></pre></div><p>The call stack tells us a story &ndash; reading from the bottom up, it lets us describe
what is happening inside the service code. A developer, even one unfamiliar with the
source code, should be able to look at this call stack to craft a narrative like:</p><blockquote><p>We are getting the outcome of a game. We leverage the DoorChecker to
see if something is the winner, but the check for door two somehow issues
a precheck() that, for some reason, is deciding to sleep for a long time.</p></blockquote><p>Our workshop application is left intentionally simple &ndash; a real-world service might see the
thread being sampled during a database call or calling into an un-traced external service.
It is also possible that a slow span is executing a complicated business process,
in which case maybe none of the stack traces relate to each other at all.</p><p>The longer a method or process is, the greater chance we will have call stacks
sampled during its execution.</p><h3 id=lets-fix-that-bug>Let&rsquo;s Fix That Bug<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>By using the profiling tool, we were able to determine that our application is slow
when issuing the <code>DoorChecker.precheck()</code> method from inside <code>DoorChecker.checkDoorTwo()</code>.
Let&rsquo;s open the <code>doorgame/src/main/java/com/splunk/profiling/workshop/DoorChecker.java</code> source file in our editor.</p><p>By quickly glancing through the file, we see that there are methods for checking
each door, and all of them call <code>precheck()</code>. In a real service, we might be uncomfortable
simply removing the <code>precheck()</code> call because there could be unseen/unaccounted side
effects.</p><p>Down on line 29 we see the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>checkDoorTwo</span><span class=p>(</span><span class=n>GameInfo</span><span class=w> </span><span class=n>gameInfo</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>precheck</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>gameInfo</span><span class=p>.</span><span class=na>isWinner</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>precheck</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>doorNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=n>extra</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>Math</span><span class=p>.</span><span class=na>pow</span><span class=p>(</span><span class=n>70</span><span class=p>,</span><span class=w> </span><span class=n>doorNum</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sleep</span><span class=p>(</span><span class=n>300</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>extra</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span></span></span></code></pre></div><p>With our developer hat on, we notice that the door number is zero based, so
the first door is 0, the second is 1, and the 3rd is 2 (this is conventional).
The <code>extra</code> value is used as extra/additional sleep time, and it is computed by taking
<code>70^doorNum</code> (<code>Math.pow</code> performs an exponent calculation). That&rsquo;s odd, because this means:</p><ul><li>door 0 => 70^0 => 1ms</li><li>door 1 => 70^1 => 70ms</li><li>door 2 => 70^2 => 4900ms</li></ul><p>We&rsquo;ve found the root cause of our slow bug! This also explains why the first two doors
weren&rsquo;t ever very slow.</p><p>We have a quick chat with our product manager and team lead, and we agree that the <code>precheck()</code>
method must stay but that the extra padding isn&rsquo;t required. Let&rsquo;s remove the <code>extra</code> variable
and make <code>precheck</code> now read like this:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>precheck</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>doorNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sleep</span><span class=p>(</span><span class=n>300</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span></span></span></code></pre></div><p>Now all doors will have a consistent behavior. Save your work and then rebuild and redeploy the application using the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> workshop/profiling
</span></span><span class=line><span class=cl>./5-redeploy-doorgame.sh</span></span></code></pre></div><p>Once the application has been redeployed successfully, visit The Door Game again to confirm that your fix is in place:
<code>http://&lt;your IP address>:81</code></p><h2 id=what-did-we-accomplish>What did we accomplish?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>We found another performance issue with our application that impacts game play.</li><li>We used the CPU call stacks included in the trace to understand application behavior.</li><li>We learned how the call stack can tell us a story and point us to suspect lines of code.</li><li>We identified the slow code and fixed it to make it faster.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>3 minutes</span>
</span>&nbsp;<p>In this workshop, we accomplished the following:</p><ul><li>We deployed our application and captured traces with <strong>Splunk Observability Cloud</strong>.</li><li>We used <strong>Database Query Performance</strong> to find a slow-running query that impacted the game startup time.</li><li>We enabled <strong>AlwaysOn Profiling</strong> and used it to confirm which line of code was causing the increased startup time and memory usage.</li><li>We found another application performance issue and used <strong>AlwaysOn Profiling</strong> again to find the problematic line of code.</li><li>We applied fixes for both of these issues and verified the result using <strong>Splunk Observability Cloud</strong>.</li></ul><p>Enabling <strong>AlwaysOn Profiling</strong> and utilizing <strong>Database Query Performance</strong> for your applications will let you get even more value from the data you‚Äôre sending to <strong>Splunk Observability Cloud</strong>.</p><p>Now that you‚Äôve completed this workshop, you have the knowledge you need to start collecting deeper diagnostic data from your own applications!</p><p>To get started with <strong>Database Query Performance</strong> today, check out <a href=https://docs.splunk.com/observability/en/apm/db-query-perf/db-query-performance.html rel=external>Monitor Database Query Performance</a>.</p><p>And to get started with <strong>AlwaysOn Profiling</strong>, check out <a href=https://docs.splunk.com/observability/en/apm/profiling/intro-profiling.html rel=external>Introduction to AlwaysOn Profiling for Splunk APM</a></p><p>For more help, feel free to <a href=https://www.splunk.com/en_us/about-splunk/contact-us.html rel=external>ask a Splunk Expert</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=optimize-end-user-experiences>Optimize End User Experiences</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>90 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Sarah Ware</span></span><p>How can we use Splunk Observability to get insight into end user experience, and proactively test scenarios to improve that experience?</p><p>Sections:</p><ul><li>Set up basic <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/1-synthetics/index.html>Synthetic tests</a> to understand availability and performance ASAP<ul><li>Uptime test</li><li>API test</li><li>Single page Browser test</li></ul></li><li>Explore <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/2-rum/index.html>RUM</a> to understand our real users</li><li>Write <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/3-advanced-synthetics/index.html>advanced Synthetics tests</a> based on what we&rsquo;ve learned about our users and what we need them to do</li><li>Customize <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/4-dashboards/index.html>dashboard charts</a> to capture our KPIs, show trends, and show data in context of our events</li><li>Create <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/5-detectors/index.html>Detectors</a> to alert on our KPIs</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content>Keep in mind throughout the workshop: how can I prioritize activities strategically to get the fastest time to value for my end users and for myself/ my developers?</div></details><h2 id=context>Context<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>As a reminder, we need frontend performance monitoring to capture everything that goes into our end user experience. If we&rsquo;re just monitoring the backend, we&rsquo;re missing all of the other resources that are critical to our users&rsquo; success. Read <a href=https://www.splunk.com/en_us/blog/devops/what-the-fastly-outage-can-teach-us-about-observability.html rel=external>What the Fastly Outage Can Teach Us About Observability</a> for a real world example. Click the image below to zoom in.
<a href=#R-image-e3660993b9ea917a31ef7e39fbefe153 class=lightbox-link><img alt="What goes into the front end" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/scenarios/optimize-end-user-experiences/images/frontend.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e3660993b9ea917a31ef7e39fbefe153><img alt="What goes into the front end" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/scenarios/optimize-end-user-experiences/images/frontend.png></a></p><h2 id=references>References<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Throughout this workshop, we will see references to resources to help further understand end user experience and how to optimize it. In addition to <a href=https://docs.splunk.com/observability/en/rum/intro-to-rum.html rel=external>Splunk Docs</a> for supported features and <a href=https://lantern.splunk.com/Observability/UCE/Optimized_experiences rel=external>Lantern</a> for tips and tricks, <a href=https://web.dev/ rel=external>Google&rsquo;s web.dev</a> and <a href=https://developer.mozilla.org/en-US/docs/Learn/Performance rel=external>Mozilla</a> are great resources.</p><p>Remember that the specific libraries, platforms, and CDNs you use often also have their own specific resources. For example <a href=https://react.dev/reference/react/useCallback#skipping-re-rendering-of-components rel=external>React</a>, <a href=https://wpengine.com/support/troubleshooting-high-time-first-byte-ttfb/ rel=external>Wordpress</a>, and <a href=https://community.cloudflare.com/t/improving-time-to-first-byte-ttfb-with-cloudflare/390367 rel=external>Cloudflare</a> all have their own tips to improve performance.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Optimize End User Experiences</h1><article class=default><header class=headline></header><h1 id=synthetics>Synthetics</h1><p>Let&rsquo;s quickly set up some tests in Synthetics to immediately start understanding our end user experience, without waiting for real users to interact with our app.</p><p>We can capture not only the performance and availability of our own apps and endpoints, but also those third parties we rely on any time of the day or night.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content>If you find that your tests are being bot-blocked, see the docs for <strong><a href=https://docs.splunk.com/observability/en/synthetics/test-config/synth-configure-app.html rel=external>tips on how to allow Synthetic testing</a></strong>. if you need to test something that is not accessible externally, see <strong><a href=https://docs.splunk.com/observability/en/synthetics/test-config/private-locations.html rel=external>private location instructions</a></strong>.</div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Synthetics</h1><article class=default><header class=headline></header><h1 id=uptime-test>Uptime Test</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The simplest way to keep an eye on endpoint availability is with an <a href=https://docs.splunk.com/observability/en/synthetics/uptime-test/uptime-test.html rel=external>Uptime test</a>. This lightweight test can run internally or externally around the world, as frequently as every minute. Because this is the easiest (and cheapest!) test to set up, and because this is ideal for monitoring availability of your most critical enpoints and ports, let&rsquo;s start here.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Publicly accessible HTTP(S) endpoint(s) to test</li><li>Access to Splunk Observability Cloud</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Uptime Test</h1><article class=default><header class=headline></header><h1 id=creating-a-test>Creating a test</h1><ol><li><p>Open Synthetics
<a href=#R-image-ce14982151b457b8b6b3c8f68794879c class=lightbox-link><img alt="Synthetics navigation item" class="lazy lightbox figure-image" loading=lazy src=../../_img/nav-synthetics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce14982151b457b8b6b3c8f68794879c><img alt="Synthetics navigation item" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/nav-synthetics.png></a></p></li><li><p>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Add new test</span></span></span> button on the right side of the screen, then select Uptime and HTTP test.
<a href=#R-image-1ea521a8f5b4219b553a669214cadf55 class=lightbox-link><img alt=image class="lazy lightbox figure-image" loading=lazy src=../../_img/create-uptime.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1ea521a8f5b4219b553a669214cadf55><img alt=image class="lazy lightbox lightbox-image" loading=lazy src=../../_img/create-uptime.png></a></p></li><li><p>Name your test with your <strong>team name</strong> (provided by your workshop instructor), your initials, and any other details you&rsquo;d like to include, like geographic region.</p></li><li><p>For now let&rsquo;s test a <strong>GET</strong> request. Fill in the URL field. You can use one of your own, or one of ours like <a href=https://online-boutique-eu.splunko11y.com rel=external>https://online-boutique-eu.splunko11y.com</a>, <a href=https://online-boutique-us.splunko11y.com rel=external>https://online-boutique-us.splunko11y.com</a>, or <a href=https://www.splunk.com rel=external>https://www.splunk.com</a>.</p></li><li><p>Click <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span> to validate that the endpoint is accessible before the selected location before saving the test. <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span> does not count against your subscription usage, so this is a good practice to make sure you&rsquo;re not wasting real test runs on a misconfigured test.
<a href=#R-image-73de8bf19f53a7351b0154ea701baf45 class=lightbox-link><img alt=image class="lazy lightbox figure-image" loading=lazy src=../../_img/try-now.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-73de8bf19f53a7351b0154ea701baf45><img alt=image class="lazy lightbox lightbox-image" loading=lazy src=../../_img/try-now.png></a></p></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content>A common reason for <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span> to fail is that there is a non-2xx response code. If that is expected, add a Validation for the correct response code.</div></details><ol><li><p>Add any additional validations needed, for example: response code, response header, and response size.
<a href=#R-image-fa4746f7dc862e7d243f2b87023ba2f9 class=lightbox-link><img alt="Advanced settings for test configuration" class="lazy lightbox figure-image" loading=lazy src=../../_img/uptime-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fa4746f7dc862e7d243f2b87023ba2f9><img alt="Advanced settings for test configuration" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/uptime-security.png></a></p></li><li><p>Add and remove any locations you&rsquo;d like. Keep in mind where you expect your endpoint to be available.</p></li><li><p>Change the frequency to test your more critical endpoints more often, up to one minute.
<a href=#R-image-2c5b8990a84eed2cfd409dd678462bc0 class=lightbox-link><img alt=image class="lazy lightbox figure-image" loading=lazy src=../../_img/uptime-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c5b8990a84eed2cfd409dd678462bc0><img alt=image class="lazy lightbox lightbox-image" loading=lazy src=../../_img/uptime-config.png></a></p></li><li><p>Make sure &ldquo;Round-robin&rdquo; is on so the test will run from one location at a time, rather than from all locations at once.</p><ul><li>If an endpoint is <strong>highly</strong> critical, think about if it is worth it to have all locations tested at the same time every single minute. If you have automations built in with a webhook from a detector, or if you have strict SLAs you need to track, this <em>could</em> be worth it to have as much coverage as possible. But if you are doing more manual investigation, or if this is a less critical endpoint, you could be wasting test runs that are executing while an issue is being investigated.</li><li>Remember that your license is based on the number of test runs per month. Turning Round-robin off will multiply the number of test runs by the number of locations you have selected.</li></ul></li><li><p>When you are ready for the test to start running, make sure &ldquo;Active&rdquo; is on, then scroll down and click <span class="btn cstyle button blue noicon"><span><span class=title>Submit</span></span></span> to save the test configuration.
<a href=#R-image-58d17727972c72bcf4f39b92500069f4 class=lightbox-link><img alt="submit button" class="lazy lightbox figure-image" loading=lazy src=../../_img/submit.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-58d17727972c72bcf4f39b92500069f4><img alt="submit button" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/submit.png></a></p></li></ol><p>Now the test will start running with your saved configuration. Take a water break, then we&rsquo;ll look at the results!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=understanding-results>Understanding results</h1><ol><li><p>From the Synthetics landing page, click into a test to see its summary view and play with the <a href=https://docs.splunk.com/observability/en/synthetics/uptime-test/uptime-test-results.html#customize-the-performance-kpis-chart rel=external>Performance KPIs chart</a> filters to see how you can slice and dice your data. This is a good place to get started understanding trends. Later, we will see what custom charts look like, so you can tailor dashboards to the KPIs you care about most.
<a href=#R-image-08ef7ecbc2296d3e75982a4de1b876b3 class=lightbox-link><img alt="KPI chart filters" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-09/c040b5f6-a868-4977-8d3b-bc3e431ffcc8/user_cropped_screenshot.jpeg?tl_px=1160,0&br_px=2880,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=755,44" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-08ef7ecbc2296d3e75982a4de1b876b3><img alt="KPI chart filters" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-09/c040b5f6-a868-4977-8d3b-bc3e431ffcc8/user_cropped_screenshot.jpeg?tl_px=1160,0&br_px=2880,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=755,44"></a><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question: Using the Performance KPIs chart</summary><div class=box-content><p>What metrics are available? Is your data consistent across time and locations? Do certain locations run slower than others? Are there any spikes or failures?</p></div></details></p></li><li><p>Click into a recent run either in the chart or in the table below.
<a href=#R-image-e55c383d9769f8cfc467dd3a4b254a59 class=lightbox-link><img alt="run results chart" class="lazy lightbox figure-image" loading=lazy src=../../_img/run-results.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e55c383d9769f8cfc467dd3a4b254a59><img alt="run results chart" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/run-results.png></a></p></li><li><p>If there are failures, look at the response to see if you need to add a response code assertion (302 is a common one), if there is some authorization needed, or different request headers added. Here we have information about this particular test run including if it succeeded or failed, the location, timestamp, and duration in addition to the other Uptime test metrics. Click through to see the response, request, and connection info as well.
<a href=#R-image-ca2c42a0a36aac67b610c1971ed0ba29 class=lightbox-link><img alt="uptime test result" class="lazy lightbox figure-image" loading=lazy src=../../_img/uptime-test-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ca2c42a0a36aac67b610c1971ed0ba29><img alt="uptime test result" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/uptime-test-result.png></a>
If you need to edit the test for it to run successfully, click the test name in the top left breadcrumb on this run result page, then click <span class="btn cstyle button transparent noicon"><span><span class=title>Edit test</span></span></span> on the top right of the test overview page. Remember to scroll down and click <span class="btn cstyle button blue noicon"><span><span class=title>Submit</span></span></span> to save your changes after editing the test configuration.</p></li><li><p>In addition to the test running successfully, there are other metrics to measure the health of your endpoints. For example, <a href=https://web.dev/articles/ttfb rel=external>Time to First Byte</a>(TTFB) is a great indicator of performance, and you can <a href=https://web.dev/articles/optimize-ttfb rel=external>optimize TTFB</a> to improve end user experience.</p></li><li><p>Go back to the test overview page and change the Performance KPIs chart to display First Byte time. Once the test has run for a long enough time, expanding the time frame will draw the data points as lines to better see trends and anomalies, like in the example below.
<a href=#R-image-67887fdb2b82577de01a34ef835db292 class=lightbox-link><img alt="Performance KPIs for Uptime Tests" class="lazy lightbox figure-image" loading=lazy src=../../_img/ttfb.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-67887fdb2b82577de01a34ef835db292><img alt="Performance KPIs for Uptime Tests" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/ttfb.png></a></p></li></ol><p>In the example above, we can see that TTFB varies consistently between locations. Knowing this, we can keep location in mind when reporting on metrics. We could also improve the experience, for example by serving users in those locations an endpoint hosted closer to them, which should reduce network latency. We can also see some slight variations in the results over time, but overall we already have a good idea of our baseline for this endpoint&rsquo;s KPIs. When we have a baseline, we can alert on worsening metrics as well as visualize improvements.<details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>We are not setting a detector on this test yet, to make sure it is running consistently and successfully. If you are testing a highly critical endpoint and want to be alerted on it ASAP (and have tolerance for potential alert noise), jump to <strong><a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/5-detectors/1-test-detector/index.html>Single Test Detectors</a></strong>.</p></div></details></p><p>Once you have your Uptime test running successfully, let&rsquo;s move on to the next test type.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=api-test>API Test</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>The <a href=https://docs.splunk.com/observability/en/synthetics/api-test/api-test.html rel=external>API test</a> provides a flexible way to check the functionality and performance of API endpoints. The shift toward API-first development has magnified the necessity to monitor the back-end services that provide your core front-end functionality.</p><p>Whether you&rsquo;re interested in testing multi-step API interactions or you want to gain visibility into the performance of your endpoints, the API Test can help you accomplish your goals.</p><p>This excercise will walk through a multi-step test on the Spotify API. You can also use it as a reference to build tests on your own APIs or on those of your critical third parties.</p><p><a href=#R-image-7222954dece4b611ca4207823bb04f3f class=lightbox-link><img alt="API test result" class="lazy lightbox figure-image" loading=lazy src=../_img/api-test-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7222954dece4b611ca4207823bb04f3f><img alt="API test result" class="lazy lightbox lightbox-image" loading=lazy src=../_img/api-test-result.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. API Test</h1><article class=default><header class=headline></header><h1 id=global-variables>Global Variables</h1><p><a href=https://docs.splunk.com/observability/en/synthetics/test-config/global-variables.html rel=external>Global variables</a> allow us to use stored strings in multiple tests, so we only need to update them in one place.</p><p>View the global variable that we&rsquo;ll use to perform our API test. Click on <strong>Global Variables</strong> under the cog icon. The global variable named <code>env.encoded_auth</code> will be the one that we&rsquo;ll use to build the spotify API transaction.</p><p><a href=#R-image-2b3b8389fb6574c5eb0de61c8a631711 class=lightbox-link><img alt="global variables" class="lazy lightbox figure-image" loading=lazy src=../../_img/global-variables.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2b3b8389fb6574c5eb0de61c8a631711><img alt="global variables" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/global-variables.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-new-api-test>Create new API test</h1><p>Create a new API test by clicking on the <span class="btn cstyle button blue noicon"><span><span class=title>Add new test</span></span></span> button and select <strong>API test</strong> from the dropdown. Name the test using your team name, your initials, and Spotify API e.g. <strong>[Daisy] RWC - Spotify API</strong></p><p><a href=#R-image-2f636819a0307f75ff63b239ebaf9df8 class=lightbox-link><img alt="new API test" class="lazy lightbox figure-image" loading=lazy src=../../_img/create-api.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f636819a0307f75ff63b239ebaf9df8><img alt="new API test" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/create-api.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=authentication-request>Authentication Request</h1><p>Click on <span class="btn cstyle button transparent noicon"><span><span class=title>+ Add requests</span></span></span> and enter the request step name e.g. <strong>Authenticate with Spotify API</strong>.</p><p><a href=#R-image-7df8ed8a64b0f3930470522dfda7ea1b class=lightbox-link><img alt=placeholder class="lazy lightbox figure-image" loading=lazy src=../../_img/add-request.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7df8ed8a64b0f3930470522dfda7ea1b><img alt=placeholder class="lazy lightbox lightbox-image" loading=lazy src=../../_img/add-request.png></a></p><p>Expand the Request section, from the drop-down change the request method to <strong>POST</strong> and enter the following URL:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>https://accounts.spotify.com/api/token</span></span></code></pre></div><p>In the <strong>Payload body</strong> section enter the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>grant_type=client_credentials</span></span></code></pre></div><p>Next, add two <span class="btn cstyle button transparent noicon"><span><span class=title>+ Request headers</span></span></span> with the following key/value pairings:</p><ul><li><strong>CONTENT-TYPE: application/x-www-form-urlencoded</strong></li><li><strong>AUTHORIZATION: Basic {{env.encoded_auth}}</strong></li></ul><p>Expand the <strong>Validation</strong> section and add the following extraction:</p><ul><li><strong>Extract</strong> from <strong>Response body</strong> <strong>JSON</strong> <strong>$.access_token</strong> as <strong>access_token</strong></li></ul><p>This will parse the JSON payload that is received from the Spotify API, extract the access token and store it as a custom variable.</p><p><a href=#R-image-422eebfb4f8373a4019178f0caf85032 class=lightbox-link><img alt="Add request payload token" class="lazy lightbox figure-image" loading=lazy src=../../_img/api-payload-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-422eebfb4f8373a4019178f0caf85032><img alt="Add request payload token" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/api-payload-token.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=search-request>Search Request</h1><p>Click on <span class="btn cstyle button transparent noicon"><span><span class=title>+ Add Request</span></span></span> to add the next step. Name the step <strong>Search for Tracks named &ldquo;Up around the bend&rdquo;</strong>.</p><p>Expand the <strong>Request</strong> section and change the request method to <strong>GET</strong> and enter the following URL:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>https://api.spotify.com/v1/search?q=Up%20around%20the%20bend&amp;type=track&amp;offset=0&amp;limit=5</span></span></code></pre></div><p>Next, add two request headers with the following key/value pairings:</p><ul><li><strong>CONTENT-TYPE: application/json</strong></li><li><strong>AUTHORIZATION: Bearer {{custom.access_token}}</strong><ul><li>This uses the custom variable we created in the previous step!</li></ul></li></ul><p><a href=#R-image-064b7c84a7496d1cba4e8cf51547208a class=lightbox-link><img alt="Add search request" class="lazy lightbox figure-image" loading=lazy src=../../_img/api-search-request.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-064b7c84a7496d1cba4e8cf51547208a><img alt="Add search request" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/api-search-request.png></a></p><p>Expand the <strong>Validation</strong> section and add the following extraction:</p><ul><li><strong>Extract</strong> from <strong>Response body</strong> <strong>JSON</strong> <strong>$.tracks.items[0].id</strong> as <strong>track.id</strong></li></ul><p><a href=#R-image-4d06252c3fde4a13c79a19be4fba90db class=lightbox-link><img alt="Add search payload" class="lazy lightbox figure-image" loading=lazy src=../../_img/api-search-payload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4d06252c3fde4a13c79a19be4fba90db><img alt="Add search payload" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/api-search-payload.png></a></p><p>To validate the test before saving, scroll to the top and change the location as needed. Click <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span>. See the docs for more information on the <a href=https://docs.splunk.com/observability/en/synthetics/test-config/try-now.html rel=external>try now feature</a>.</p><p><a href=#R-image-0cb646ba3d2c7124ed87a577c656a708 class=lightbox-link><img alt="try now" class="lazy lightbox figure-image" loading=lazy src=../../_img/api-try-now.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0cb646ba3d2c7124ed87a577c656a708><img alt="try now" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/api-try-now.png></a></p><p>When the validation is successful, click on <span class="btn cstyle button blue noicon"><span><span class=title>< Return to test</span></span></span> to return to the test configuration page. And then click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span> to save the API test.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Extra credit</summary><div class=box-content><p>Have more time to work on this test? Take a look at the Response Body in one of your run results. What additional steps would make this test more thorough? Edit the test, and use the <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span> feature to validate any changes you make before you save the test.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=view-results>View results</h1><p>Wait for a few minutes for the test to provision and run. Once you see the test has run successfully, click on the run to view the results:</p><p><a href=#R-image-9f75591d852123fd3f42a1127755f981 class=lightbox-link><img alt="API test result" class="lazy lightbox figure-image" loading=lazy src=../../_img/api-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f75591d852123fd3f42a1127755f981><img alt="API test result" class="lazy lightbox lightbox-image" loading=lazy src=../../_img/api-result.png></a></p><h2 id=resources>Resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><a href=https://docs.splunk.com/Observability/synthetics/api-test/set-up-api-test.html rel=external>How to Create an API Test</a></li><li><a href=https://docs.splunk.com/Observability/synthetics/api-test/api-test.html rel=external>API Test Overview</a></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=single-page-browser-test>Single Page Browser Test</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>We have started testing our endpoints, now let&rsquo;s test the front end browser experience.</p><p>Starting with a single page <a href=https://docs.splunk.com/observability/en/synthetics/browser-test/browser-test.html rel=external>browser test</a> will let us capture how first- and third-party resources impact how our end users experience our browser-based site. It also allows us to start to understand our user experience metrics before introducing the complexity of multiple steps in one test.</p><p>A page where your users commonly &ldquo;land&rdquo; is a good choice to start with a single page test. This could be your site homepage, a section main page, or any other high-traffic URL that is important to you and your end users.</p><ol><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Create new test</span></span></span> and select Browser test
<a href=#R-image-ff836ae38bfd14af4d4939f7ededf15d class=lightbox-link><img alt="Create new browser test" class="lazy lightbox figure-image" loading=lazy src=../_img/create-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ff836ae38bfd14af4d4939f7ededf15d><img alt="Create new browser test" class="lazy lightbox lightbox-image" loading=lazy src=../_img/create-browser.png></a></p></li><li><p>Include your <strong>team name</strong> and <strong>initials</strong> in the test name. Add to the Name and Custom properties to describe the scope of the test (like Desktop for device type). Then click <span class="btn cstyle button transparent noicon"><span><span class=title>+ Edit steps</span></span></span>
<a href=#R-image-ce847988154eb61070c6f5f6928cc69f class=lightbox-link><img alt="Browser test content fields" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce847988154eb61070c6f5f6928cc69f><img alt="Browser test content fields" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-name.png></a></p></li><li><p>Change the transaction label (top left) and step name (on the right) to something readable that describes the step. Add the URL you&rsquo;d like to test. Your workshop instructor can provide you with a URL as well. In the below example, the transaction is &ldquo;Home&rdquo; and the step name is &ldquo;Go to homepage&rdquo;.
<a href=#R-image-27cde725e46ab3bb555eb73644fb8222 class=lightbox-link><img alt="Transaction and step label" class="lazy lightbox figure-image" loading=lazy src=../_img/single-step.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-27cde725e46ab3bb555eb73644fb8222><img alt="Transaction and step label" class="lazy lightbox lightbox-image" loading=lazy src=../_img/single-step.png></a></p></li><li><p>To validate the test, change the location as needed and click <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span>. See the docs for more information on the <a href=https://docs.splunk.com/observability/en/synthetics/test-config/try-now.html rel=external>try now feature</a>.
<a href=#R-image-259fee39f98b9a2e80622f8e6cfcb5d9 class=lightbox-link><img alt="browser test try now buttons" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-try-now.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-259fee39f98b9a2e80622f8e6cfcb5d9><img alt="browser test try now buttons" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-try-now.png></a></p></li><li><p>Wait for the test validation to complete. If the test validation failed, double check your URL and test location and try again. With <span class="btn cstyle button transparent noicon"><span><span class=title>Try now</span></span></span> you can see what the result of the test will be if it were saved and run as-is.
<a href=#R-image-ef133e507ac1572f5d16c46e7521680b class=lightbox-link><img alt="Try Now browser test results" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-try-now-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ef133e507ac1572f5d16c46e7521680b><img alt="Try Now browser test results" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-try-now-result.png></a></p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>&lt; Return to test</span></span></span> to continue the configuration.
<a href=#R-image-a2fe0fe51d1efb41655f40e4e42a773b class=lightbox-link><img alt="Return to test button" class="lazy lightbox figure-image" loading=lazy src=../_img/return.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a2fe0fe51d1efb41655f40e4e42a773b><img alt="Return to test button" class="lazy lightbox lightbox-image" loading=lazy src=../_img/return.png></a></p></li><li><p>Edit the locations you want to use, keeping in mind any regional rules you have for your site.<p></p><a href=#R-image-a1f25c916aea66a79dfaf241b44480fd class=lightbox-link><img alt="Browser test details" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-test-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a1f25c916aea66a79dfaf241b44480fd><img alt="Browser test details" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-test-details.png></a></p></li><li><p>You can edit the Device and Frequency or leave them at their default values for now. Click <span class="btn cstyle button blue noicon"><span><span class=title>Submit</span></span></span> at the bottom of the form to save the test and start running it.<p></p><a href=#R-image-38d7acf1aaacdeac6e0c94f65f97a7f4 class=lightbox-link><img alt="browser test submit button" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-submit.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-38d7acf1aaacdeac6e0c94f65f97a7f4><img alt="browser test submit button" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-submit.png></a></p></li></ol><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Bonus Exercise</summary><div class=box-content><p>Have a few spare seconds? Copy this test and change just the title and device type, and save. Now you have visibility into the end user experience on another device and connection speed!</p></div></details><p>While our Synthetic tests are running, let&rsquo;s see how RUM is instrumented to start getting data from our real users.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=rum>RUM</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>With <a href=https://docs.splunk.com/observability/en/rum/intro-to-rum.html rel=external>RUM</a> instrumented, we will be able to better understand our end users, what they are doing, and what issues they are encountering.</p><p>This workshop walks through how our demo site is instrumented and how to interpret the data. If you already have a RUM license, this will help you understand how RUM works and how you can use it to optimize your end user experience.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Our Docs also contain guidance such as <a href=https://docs.splunk.com/observability/en/rum/rum-scenario-library/scenario-landingpage.html rel=external>scenarios using Splunk RUM</a> and demo applications to test out <a href=https://docs.splunk.com/observability/en/rum/sample-app.html rel=external>RUM for mobile apps</a>.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of RUM</h1><article class=default><header class=headline></header><h1 id=overview>Overview</h1><p>The aim of this Splunk Real User Monitoring (RUM) workshop is to let you:</p><ul><li>Shop for items on the Online Boutique to create traffic, and create RUM User Sessions<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> that you can view in the Splunk Observability Suite.</li><li>See an overview of the performance of all your application(s) in the Application Summary Dashboard</li><li>Examine the performance of a specific website with RUM metrics.</li></ul><p>In order to reach this goal, we will use an online boutique to order various products. While shopping on the online boutique you will create what is called a User Session.</p><p>You may encounter some issues with this web site, and you will use Splunk RUM to identify the issues, so they can be resolved by the developers.</p><p>The workshop host will provide you with a URL for an online boutique store that has RUM enabled.</p><p>Each of these Online Boutiques are also being visited by a few synthetic users; this will allow us to generate more live data to be analyzed later.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A RUM User session is a &ldquo;recording&rdquo; of a collection of user interactions on an application, basically collecting a website or app‚Äôs performance measured straight from the browser or Mobile App of the end user. To do this a small amount of JavaScript is embedded in each page. This script then collects data from each user as he or she explores the page, and transfers that data back for analysis.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=rum-instrumentation-in-a-browser-app>RUM instrumentation in a browser app</h1><ul><li>Check the HEAD section of the Online-boutique webpage in your browser</li><li>Find the code that instruments RUM</li></ul><hr><h2 id=1-browse-to-the-online-boutique>1. Browse to the Online Boutique<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Your workshop instructor will provide you with the Online Boutique URL that has RUM installed so that you can complete the next steps.</p><h2 id=2--inspecting-the-html-source>2. Inspecting the HTML source<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The changes needed for RUM are placed in the <code>&lt;head></code> section of the hosts Web page. Right click to view the page source or to inspect the code. Below is an example of the <code>&lt;head></code> section with RUM:</p><p><a href=#R-image-e318332fede6873fadf6b57e402ed846 class=lightbox-link><img alt="Online Boutique" class="lazy lightbox figure-image" loading=lazy src=../images/rum-inst.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e318332fede6873fadf6b57e402ed846><img alt="Online Boutique" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-inst.png></a></p><p>This code enables RUM Tracing, <a href=https://docs.splunk.com/observability/en/rum/rum-session-replay.html rel=external>Session Replay</a>, and <a href=https://docs.splunk.com/observability/en/rum/RUM-custom-events.html rel=external>Custom Events</a> to better understand performance in the context of user workflows:</p><ul><li>The first part is to indicate where to download the Splunk Open Telemetry Javascript file from: <code>https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js</code> (this can also be hosted locally if so required).</li><li>The next section defines the location where to send the traces to in the beacon url: <code>{beaconUrl: "https://rum-ingest.eu0.signalfx.com/v1/rum"</code></li><li>The RUM Access Token: <code>rumAuth: "&lt;redacted>"</code>.</li><li>Identification tags <code>app</code> and <code>environment</code> to indentify in the SPLUNK RUM UI e.g. <code>app: "online-boutique-us-store", environment: "online-boutique-us"}</code> (these values will be different in your workshop)</li></ul><p>The above lines 21 and 23-30 are all that is required to enable RUM on your website!</p><p>Lines 22 and 31-34 are optional if you want Session Replay instrumented.</p><p>Line 36-39 <code>var tracer=Provider.getTracer('appModuleLoader');</code> will add a Custom Event for every page change, allowing you to better track your website conversions and usage. This may or may not be instrumented for this workshop.</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Time to shop! Take a minute to open the workshop store URL in as many browsers and devices as you&rsquo;d like, shop around, add items to cart, checkout, and feel free to close the shopping browsers when you&rsquo;re finished. Keep in mind this is a lightweight demo shop site, so don&rsquo;t be alarmed if the cart doesn&rsquo;t match the item you picked!</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=rum-landing-page>RUM Landing Page</h1><ul><li>Visit the RUM landing page and and check the overview of the performance of all your RUM enabled applications with the Application Summary Dashboard (Both Mobile and Web based)</li></ul><hr><h2 id=1-visit-the-rum-landing-page>1. Visit the RUM Landing Page<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Login into Splunk Observability. From the left side menu bar select <strong>RUM</strong> <a href=#R-image-3e9f2a2f92a54eed9e146582bc7e78ac class=lightbox-link><img alt=RUM-ico class="inline lazy lightbox figure-image" loading=lazy src="../images/RUM_ico.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3e9f2a2f92a54eed9e146582bc7e78ac><img alt=RUM-ico class="inline lazy lightbox lightbox-image" loading=lazy src="../images/RUM_ico.png?classes=inline&height=25px"></a>. This will bring you to your the RUM Landing Page.</p><p>The goal of this page is to give you in a single page, a clear indication of the health, performance and potential errors found in your application(s) and allow you to dive deeper into the information about your User Sessions collected from your web page/App. You will have a pane for each of your active RUM applications. (The view below is the default expanded view)</p><p><a href=#R-image-75ea21178f199fc5f584696857f4bc03 class=lightbox-link><img alt=RUM-App-sum class="lazy lightbox figure-image" loading=lazy src=../images/Applicationsummarydashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-75ea21178f199fc5f584696857f4bc03><img alt=RUM-App-sum class="lazy lightbox lightbox-image" loading=lazy src=../images/Applicationsummarydashboard.png></a></p><p>If you have multiple applications, (which will be the case when every attendee is using their own ec2 instance for the RUM workshop), the pane view may be automatically reduced by collapsing the panes as shown below:</p><p><a href=#R-image-0840de1190d7f032bd1612c5deedeb7e class=lightbox-link><img alt=RUM-App-sum-collapsed class="lazy lightbox figure-image" loading=lazy src=../images/multiple_apps_collapsed.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0840de1190d7f032bd1612c5deedeb7e><img alt=RUM-App-sum-collapsed class="lazy lightbox lightbox-image" loading=lazy src=../images/multiple_apps_collapsed.png></a></p><p>You can expanded a condensed RUM Application Summary View to the full dashboard by clicking on the small browser <a href=#R-image-9c2e82f15f4143df58f0ffbb6efc6d66 class=lightbox-link><img alt=RUM-browser class="inline lazy lightbox figure-image" loading=lazy src="../images/browser.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c2e82f15f4143df58f0ffbb6efc6d66><img alt=RUM-browser class="inline lazy lightbox lightbox-image" loading=lazy src="../images/browser.png?classes=inline&height=25px"></a> or Mobile <a href=#R-image-c592d8ac83ddcd6349c3ab5f668a358c class=lightbox-link><img alt=RUM-mobile class="inline lazy lightbox figure-image" loading=lazy src="../images/mobile.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c592d8ac83ddcd6349c3ab5f668a358c><img alt=RUM-mobile class="inline lazy lightbox lightbox-image" loading=lazy src="../images/mobile.png?classes=inline&height=25px"></a>icon. (Depending on the type of application: <em>Mobile</em> or <em>Browser</em> based) on the left in front of the applications name, highlighted by the red arrow.</p><p>First find the right application to use for the workshop:</p><p>If you are participating in a stand alone RUM workshop, the workshop leader will tell you the name of the application to use, in the case of a combined workshop, it will follow the naming convention we used for IM and APM and use the ec2 node name as a unique id like <strong>jmcj-store</strong> as shown as the last app in the screenshot above.</p><h2 id=2-configure-the-rum-application-summary-dashboard-header-section>2. Configure the RUM Application Summary Dashboard Header Section<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>RUM Application Summary Dashboard consists of 6 major sections. The first is the selection header, where you can set/filter a number of options:</p><ul><li>A drop down for the <strong>Time Window</strong> you&rsquo;re reviewing (You are looking at the past 15 minutes by default)</li><li>A drop down to select the <strong>Environment</strong><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> you want to look at. This allows you to focus on just the subset of applications belonging to that environment, or Select all to view all available.</li><li>A drop down list with the various <strong>Apps</strong> being monitored. You can use the one provided by the workshop host or select your own. This will focus you on just one application.</li><li>A drop down to select the <strong>Source</strong>, <em>Browser</em> or <em>Mobile</em> applications to view. For the Workshop leave <em>All</em> selected.</li><li>A hamburger menu located at the right of the header allowing you to configure some settings of your Splunk RUM application. (We will visit this in a later section).</li></ul><p><a href=#R-image-784d344511de47e94286c10c82147f2b class=lightbox-link><img alt=RUM-SummaryHeader class="lazy lightbox figure-image" loading=lazy src=../images/RUM_SummaryHeader.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-784d344511de47e94286c10c82147f2b><img alt=RUM-SummaryHeader class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM_SummaryHeader.png></a></p><p>For the workshop lets do a deeper dive into the Application Summary screen in the next section: <a href=/observability-workshop/en/scenarios/optimize-end-user-experiences/2-rum/4-browser-summary/index.html>Check Health Browser Application</a></p><hr><p>A common application deployment pattern is to have multiple, distinct application environments that don‚Äôt interact directly with each other but that are all being monitored by Splunk APM or RUM: for instance, quality assurance (QA) and production environments, or multiple distinct deployments in different datacenters, regions or cloud providers.
<a href=http://nebezb.com/ rel=external></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A deployment environment is a distinct deployment of your system or application that allows you to set up configurations that don‚Äôt overlap with configurations in other deployments of the same application. Separate deployment environments are often used for different stages of the development process, such as development, staging, and production.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=check-browser-applications-health-at-a-glance>Check Browser Applications health at a glance</h1><ul><li>Get familiar with the UI and options available from this landing page</li><li>Identify Page Views/JavaScript Errors and Request/Errors in a single view</br>Check the Web Vitals metrics and any Detector that has fired for in relation to your Browser Application</li></ul><hr><h2 id=application-summary-dashboard>Application Summary Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1header-bar>1.Header Bar<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>As seen in the previous section the RUM Application Summary Dashboard consists of 5 major sections.</br>The first section is the selection header, where you can collapse the Pane via the <a href=#R-image-4a8509cf28a4491092272008f15e547b class=lightbox-link><img alt=RUM-browser class="inline lazy lightbox figure-image" loading=lazy src="../images/browser.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4a8509cf28a4491092272008f15e547b><img alt=RUM-browser class="inline lazy lightbox lightbox-image" loading=lazy src="../images/browser.png?classes=inline&height=25px"></a> Browser icon or the <strong>></strong> in front of the application name, which is <em>jmcj-store</em> in the example below. It also provides access to the <em>Application Overview</em> page if you click the link with your application name which is <em>jmcj-store</em> in the example below.</p><p>Further, you can also open the <em>Application Overview</em> or <em>App Health Dashboard</em> via the triple dot <a href=#R-image-78274a12dbad86923a335c328f54773d class=lightbox-link><img alt=trippleburger class="inline lazy lightbox figure-image" loading=lazy src="../images/trippleburger.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-78274a12dbad86923a335c328f54773d><img alt=trippleburger class="inline lazy lightbox lightbox-image" loading=lazy src="../images/trippleburger.png?classes=inline&height=25px"></a> menu on the right.</p><p><a href=#R-image-cdbd5b3ba098ee03e2e714fdca998463 class=lightbox-link><img alt=RUM-SummaryHeader class="lazy lightbox figure-image" loading=lazy src=../images/summaryHeader.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cdbd5b3ba098ee03e2e714fdca998463><img alt=RUM-SummaryHeader class="lazy lightbox lightbox-image" loading=lazy src=../images/summaryHeader.png></a></p><p>For now, let&rsquo;s look at the high level information we get on the application summary dashboard.</p><p>The RUM Application Summary Dashboard is focused on providing you with <em>at a glance</em> highlights of the status of your application.</p><h3 id=2-page-views--javascript-errors--network-requests--errors>2. Page Views / JavaScript Errors & Network Requests / Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The first section shows <em>Page Views / JavaScript Errors</em>, & <em>Network Requests and Errors</em> charts show the quantity and trend of these issues in your application. This could be Javascript errors, or failed network calls to back end services.</p><p><a href=#R-image-641e0edd24256f689c7875d52835c93d class=lightbox-link><img alt=RUM-chart class="lazy lightbox figure-image" loading=lazy src=../images/Rum-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-641e0edd24256f689c7875d52835c93d><img alt=RUM-chart class="lazy lightbox lightbox-image" loading=lazy src=../images/Rum-chart.png></a></p><p>In the example above you can see that there are no failed network calls in the Network chart, but in the Page View chart you can see that a number of pages do experience some errors. These are often not visible for regular users, but can seriously impact the performance of your web site.</p><p>You can see the count of the Page Views / Network Requests / Errors by hovering over the charts.</p><p><a href=#R-image-2f2b7db3fade835369e6e5634cb6f159 class=lightbox-link><img alt=RUM-chart-clicked class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Chart-Clicked.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f2b7db3fade835369e6e5634cb6f159><img alt=RUM-chart-clicked class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Chart-Clicked.png></a></p><h3 id=3-javascript-errors>3. JavaScript Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>With the second section of the RUM Application Summary Dashboard we are showing you an overview of the JavaScript errors occurring in your application, along with a count of each error.</p><p><a href=#R-image-350c1fa5b472f03f4f30f67ce26e0cb2 class=lightbox-link><img alt=RUM-javascript class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Javascripterrors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-350c1fa5b472f03f4f30f67ce26e0cb2><img alt=RUM-javascript class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Javascripterrors.png></a></p><p>In the example above you can see there are three JavaScript errors, one that appears 29 times in the selected time slot, and the other two each appear 12 times.</p><p>If you click on one of the errors a pop-out opens that will show a summary (below) of the errors over time, along with a Stack Trace of the JavaScript error, giving you an indication of where the problems occurred. (We will see this in more detail in one of the following sections)</p><p><a href=#R-image-dec53a70843cf89f961dbab2d2a2c41e class=lightbox-link><img alt=RUM-javascript-chart class="lazy lightbox figure-image" loading=lazy src=../images/type-error-detail.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dec53a70843cf89f961dbab2d2a2c41e><img alt=RUM-javascript-chart class="lazy lightbox lightbox-image" loading=lazy src=../images/type-error-detail.png></a></p><h3 id=4-web-vitals>4. Web Vitals<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The next section of the RUM Application Summary Dashboard is showing you <a href=https://web.dev/articles/vitals rel=external>Google&rsquo;s Core Web Vitals</a>, three metrics that are not only used by Google in its search ranking system, but also quantify end user experience in terms of loading, interactivity, and visual stability.</p><p><a href=#R-image-eb56d4f657b29ab5cf3ad1c0da51d5ae class=lightbox-link><img alt=WEB-vitals class="lazy lightbox figure-image" loading=lazy src=../images/RUM-QuickWebVitals.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eb56d4f657b29ab5cf3ad1c0da51d5ae><img alt=WEB-vitals class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-QuickWebVitals.png></a></p><p>As you can see our site is well behaved and scores <em>Good</em> for all three Metrics. These metrics can be used to identify the effect changes to your application have, and help you improve the performance of your site.</p><p>If you click on any of the Metrics shown in the Web Vitals pane you will be taken to the corresponding Tag Spotlight Dashboard. e.g. clicking on the <strong>Largest Contentful Paint (LCP)</strong> chartlet, you will be taken to a dashboard similar to the screen shot below, that gives you timeline and table views for how this metric has performed. This should allow you to spot trends and identify where the problem may be more common, such as an operating system, geolocation, or browser version.</p><p><a href=#R-image-46cc5929a3cb3c17e8fdf53159d3182b class=lightbox-link><img alt=WEB-vitals-tag class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Tag-Spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-46cc5929a3cb3c17e8fdf53159d3182b><img alt=WEB-vitals-tag class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Tag-Spotlight.png></a></p><h3 id=5-most-recent-detectors>5. Most Recent Detectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The final section of the RUM Application Summary Dashboard is focused on providing you an overview of recent detectors that have triggered for your application. We have created a detector for this screen shot but your pane will be empty for now. We will add some detectors to your site and make sure they are triggered in one of the next sections.</p><p><a href=#R-image-deb0fb4632ad4a10eda0e754f23b2b6b class=lightbox-link><img alt=detectors class="lazy lightbox figure-image" loading=lazy src=../images/rum-detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-deb0fb4632ad4a10eda0e754f23b2b6b><img alt=detectors class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-detector.png></a></p><p>In the screen shot you can see we have a critical alert for the <em>RUM Aggregated View Detector</em>, and a Count, how often this alert has triggered in the selected time window. If you happen to have an alert listed, you can click on the name of the Alert (that is shown as a blue link) and you will be taken to the Alert Overview page showing the details of the alert (Note: this will move you away from the current page, Please use the <strong>Back</strong> option of your browser to return to the overview page).</p><p><a href=#R-image-fbee55db1367d45953bdd11fb28d6ad2 class=lightbox-link><img alt=alert class="lazy lightbox figure-image" loading=lazy src=../images/click-alert.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fbee55db1367d45953bdd11fb28d6ad2><img alt=alert class="lazy lightbox lightbox-image" loading=lazy src=../images/click-alert.png></a></p><hr><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Please take a few minutes to experiment with the RUM Application Summary Dashboard and the underlying chart and dashboards before going on to the next section.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=analyzing-rum-metrics>Analyzing RUM Metrics</h1><ul><li>See RUM Metrics and Session information in the RUM UI</li><li>See correlated APM traces in the RUM & APM UI</li></ul><hr><h2 id=1-rum-overview-pages>1. RUM Overview Pages<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>From your RUM Application Summary Dashboard you can see detailed information by opening the Application Overview Page via the tripple dot <a href=#R-image-010b83daccbfe3f97b6ef75648d6aecd class=lightbox-link><img alt=trippleburger class="inline lazy lightbox figure-image" loading=lazy src="../images/trippleburger.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-010b83daccbfe3f97b6ef75648d6aecd><img alt=trippleburger class="inline lazy lightbox lightbox-image" loading=lazy src="../images/trippleburger.png?classes=inline&height=25px"></a> menu on the right by selecting <em>Open Application Overview</em> or by clicking the link with your application name which is <em>jmcj-rum-app</em> in the example below.</p><p><a href=#R-image-cd760ff7e59af9df91d6cc2b66013f77 class=lightbox-link><img alt=RUM-SummaryHeader class="lazy lightbox figure-image" loading=lazy src=../images/summaryHeader.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cd760ff7e59af9df91d6cc2b66013f77><img alt=RUM-SummaryHeader class="lazy lightbox lightbox-image" loading=lazy src=../images/summaryHeader.png></a></p><p>This will take you to the RUM Application Overview Page screen as shown below.</p><p><a href=#R-image-729e831cf34cdef8e8c8dce045d04d6f class=lightbox-link><img alt="RUM app overview with UX metrics" class="lazy lightbox figure-image" loading=lazy src=../images/rum-ux-metrics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-729e831cf34cdef8e8c8dce045d04d6f><img alt="RUM app overview with UX metrics" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-ux-metrics.png></a></p><h2 id=2-rum-browser-overview>2. RUM Browser Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=21-header>2.1. Header<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The RUM UI consists of five major sections. The first is the selection header, where you can set/filter a number of options:</p><ul><li>A drop down for the time window you&rsquo;re reviewing (You are looking at the past 15 minutes in this case)</li><li>A drop down to select the Comparison window (You are comparing current performance on a rolling window - in this case compared to 1 hour ago)</li><li>A drop down with the available Environments to view</li><li>A drop down list with the Various Web apps</li><li><em><strong>Optionally</strong></em> a drop down to select Browser or Mobile metrics (<em>Might not be available in your workshop</em>)</li></ul><p><a href=#R-image-240b6c92ed45ed6f50ea451997fbd133 class=lightbox-link><img alt=RUM-Header class="lazy lightbox figure-image" loading=lazy src=../images/rum-header.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-240b6c92ed45ed6f50ea451997fbd133><img alt=RUM-Header class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-header.png></a></p><h3 id=22-ux-metrics>2.2. UX Metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>By default, RUM prioritizes the metrics that most directly reflect the experience of the end user.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Additional Tags</summary><div class=box-content><p>All of the dashboard charts allow us to compare trends over time, create detectors, and click through to further diagnose issues.</p></div></details><p>First, we see page load and route change information, which can help us understand if something unexpected is impacting user traffic trends.</p><p><a href=#R-image-7a7de009ebc6c6d0fe776c6a608c86a5 class=lightbox-link><img alt="Page load and route change charts" class="lazy lightbox figure-image" loading=lazy src=../images/page-load-route-change.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7a7de009ebc6c6d0fe776c6a608c86a5><img alt="Page load and route change charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/page-load-route-change.png></a></p><p>Next, Google has defined Core Web Vitals to quantify the user experience as measured by loading, interactivity, and visual stability. Splunk RUM builds in Google&rsquo;s thresholds into the UI, so you can easily see if your metrics are in an acceptable range.</p><p><a href=#R-image-ad9239df6825781a2e5c03c48727d1e3 class=lightbox-link><img alt="Core Web Vitals charts" class="lazy lightbox figure-image" loading=lazy src=../images/core-web-vitals-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ad9239df6825781a2e5c03c48727d1e3><img alt="Core Web Vitals charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/core-web-vitals-overview.png></a></p><ul><li><strong>Largest Contentful Paint (LCP)</strong>, measures loading performance. How long does it take for the largest block of content in the viewport to load? To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading.</li><li><strong>First Input Delay (FID)</strong>, measures interactivity. How long does it take to be able to interact with the app? To provide a good user experience, pages should have a FID of 100 milliseconds or less.</li><li><strong>Cumulative Layout Shift (CLS)</strong>, measures visual stability. How much does the content move around after the initial load? To provide a good user experience, pages should maintain a CLS of 0.1. or less.</li></ul><p>Improving Web Vitals is a key component to optimizing your end user experience, so being able to quickly understand them and create detectors if they exceed a threshold is critical.</p><p>Google has some great resources if you want to learn more, for example <a href=https://web.dev/case-studies/vitals-business-impact rel=external>the business impact of Core Web Vitals</a>.</p><h3 id=23-front-end-health>2.3. Front-end health<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Common causes of frontend issues are javascript errors and long tasks, which can especially affect interactivity. Creating detectors on these indicators helps us investigate interactivity issues sooner than our users report it, allowing us to build workarounds or roll back related releases faster if needed. Learn more about <a href=https://web.dev/articles/optimize-long-tasks rel=external>optimizing long tasks</a> for better end user experience!</p><p><a href=#R-image-d2e518604e9302fac088085371f0a946 class=lightbox-link><img alt="JS error charts" class="lazy lightbox figure-image" loading=lazy src=../images/rum-js-errors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d2e518604e9302fac088085371f0a946><img alt="JS error charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-js-errors.png></a>
<a href=#R-image-ba006ee02f5971f08be0a23da2027b0a class=lightbox-link><img alt="Long task charts" class="lazy lightbox figure-image" loading=lazy src=../images/rum-long-tasks.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ba006ee02f5971f08be0a23da2027b0a><img alt="Long task charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-long-tasks.png></a></p><h3 id=24-back-end-health>2.4. Back-end health<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Common back-end issues affecting user experience are network issues and resource requests. In this example, we clearly see a spike in Time To First Byte that lines up with a resource request spike, so we already have a good starting place to investigate.</p><p><a href=#R-image-d6bd0e373e2171c860953690224d8507 class=lightbox-link><img alt="Back-end health charts" class="lazy lightbox figure-image" loading=lazy src=../images/rum-be-health.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d6bd0e373e2171c860953690224d8507><img alt="Back-end health charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-be-health.png></a></p><ul><li><strong>Time To First Byte (TTFB)</strong>, measures how long it takes for a client&rsquo;s browser to receive the first byte of the response from the server. The longer it takes for the server to process the request and send a response, the slower your visitors&rsquo; browser is at displaying your page.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=analyzing-rum-tags-in-the-tag-spotlight-view>Analyzing RUM Tags in the Tag Spotlight view</h1><ul><li>Look into the Metrics views for the various endpoints and use the Tags sent via the Tag spotlight for deeper analysis</li></ul><hr><h2 id=1-find-an-url-for-the-cart-endpoint>1. Find an url for the Cart endpoint<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>From the RUM Overview page, please select the url for the <strong>Cart</strong> endpoint to dive deeper into the information available for this endpoint.</p><p><a href=#R-image-fa4ad3319a71cbc6a5185ce39d1f46c0 class=lightbox-link><img alt=RUM-Cart2 class="lazy lightbox figure-image" loading=lazy src=../images/rum-url-cart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fa4ad3319a71cbc6a5185ce39d1f46c0><img alt=RUM-Cart2 class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-url-cart.png></a></p><p>Once you have selected and clicked on the blue url, you will find yourself in the <strong>Tag Spotlight</strong> overview</p><p><a href=#R-image-589323cbbe1e7d4426ee5a281dc023dd class=lightbox-link><img alt=RUM-Tag class="lazy lightbox figure-image" loading=lazy src=../images/rum-tag-spotlight.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-589323cbbe1e7d4426ee5a281dc023dd><img alt=RUM-Tag class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-tag-spotlight.png></a></p><p>Here you will see all of the tags that have been sent to Splunk RUM as part of the RUM traces. The tags displayed will be relevant to the overview that you have selected. These are generic Tags created automatically when the Trace was sent, and additional Tags you have added to the trace as part of the configuration of your website.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Additional Tags</summary><div class=box-content><p>We are already sending two additional tags, you have seen them defined in the <em>Beacon url</em> that was added to your website: <code>app: "[nodename]-store", environment: "[nodename]-workshop"</code> in the first section of this workshop! You can add additional tags in a similar way.</p></div></details><p>In our example we have selected the <strong>Page Load</strong> view as shown here:</p><p><a href=#R-image-71d45ca37561500cb5471303be8c6db9 class=lightbox-link><img alt=RUM-Header class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Selection.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-71d45ca37561500cb5471303be8c6db9><img alt=RUM-Header class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Selection.png></a></p><p>You can select any of the following Tag views, each focused on a specific metric.</p><p><a href=#R-image-783d5424030765b76ed0d4cca3b3134e class=lightbox-link><img alt=RUM-views class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Tag-views.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-783d5424030765b76ed0d4cca3b3134e><img alt=RUM-views class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Tag-views.png></a></p><hr><h2 id=2-explore-the-information-in-the-tag-spotlight-view>2. Explore the information in the Tag Spotlight view<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Tag spotlight is designed to help you identify problems, either through the chart view,, where you may quickly identify outliers or via the TAGs.</p><p>In the <strong>Page Load</strong> view, if you look at the <strong>Browser</strong>, <strong>Browser Version</strong> & <strong>OS Name</strong> Tag views,you can see the various browser types and versions, as well as for the underlying OS.</p><p>This makes it easy to identify problems related to specific browser or OS versions, as they would be highlighted.</p><p><a href=#R-image-87a82d66819a10e7766d697dd9f5f08b class=lightbox-link><img alt=RUM-Tag2 class="lazy lightbox figure-image" loading=lazy src=../images/RUMBrowserTags.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-87a82d66819a10e7766d697dd9f5f08b><img alt=RUM-Tag2 class="lazy lightbox lightbox-image" loading=lazy src=../images/RUMBrowserTags.png></a></p><p>In the above example you can see that Firefox had the slowest response, various Browser versions ( Chrome) that have different response times and the slow response of the Android devices.</p><p>A further example are the regional Tags that you can use to identify problems related to ISP or locations etc. Here you should be able to find the location you have been using to access the Online Boutique. Drill down by selecting the town or country you are accessing the Online Boutique from by clicking on the name as shown below (City of Amsterdam):</p><p><a href=#R-image-bb9b3d73cf4a8244672253e3c09e9a00 class=lightbox-link><img alt=RUM-click class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Region.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bb9b3d73cf4a8244672253e3c09e9a00><img alt=RUM-click class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Region.png></a></p><p>This will select only the sessions relevant to the city selected as shown below:</p><p><a href=#R-image-fea006e01900cf1a615113085ae15905 class=lightbox-link><img alt=RUM-Adam class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Adam.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fea006e01900cf1a615113085ae15905><img alt=RUM-Adam class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Adam.png></a></p><p>By selecting the various Tag you build up a filter, you can see the current selection below</p><p><a href=#R-image-3ec6751d0f97d3b1283394259fd25c69 class=lightbox-link><img alt=RUM-Adam class="lazy lightbox figure-image" loading=lazy src=../images/RUM-Filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3ec6751d0f97d3b1283394259fd25c69><img alt=RUM-Adam class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-Filter.png></a></p><p>To clear the filter and see every trace click on <strong>Clear All</strong> at the top right of the page.</p><p>If the overview page is empty or shows <a href=#R-image-0e22e5fb522f3ec7592d3054816e8764 class=lightbox-link><img alt=RUM-Adam class="inline lazy lightbox figure-image" loading=lazy src="../images/RUM-NoTime.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0e22e5fb522f3ec7592d3054816e8764><img alt=RUM-Adam class="inline lazy lightbox lightbox-image" loading=lazy src="../images/RUM-NoTime.png?classes=inline&height=25px"></a>, no traces have been received in the selected timeslot.
You need to increase the time window at the top left. You can start with the <em>Last 12 hours</em> for example.</p><p>You can then use your mouse to select the time slot you want like show in the view below and activate that time filter by clicking on the little spyglass icon.</p><p><a href=#R-image-fc5640b62f56c946b58229bf90a2adc9 class=lightbox-link><img alt=RUM-time class="lazy lightbox figure-image" loading=lazy src=../images/RUM-TimeSelect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fc5640b62f56c946b58229bf90a2adc9><img alt=RUM-time class="lazy lightbox lightbox-image" loading=lazy src=../images/RUM-TimeSelect.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=analyzing-rum-sessions>Analyzing RUM Sessions</h1><ul><li>Dive into RUM Session information in the RUM UI</li><li>Identify Javascript errors in the Span of an user interaction</li></ul><hr><h2 id=1-drill-down-in-the-sessions>1. Drill down in the Sessions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>After you have analyzed the information and drilled down via the Tag Spotlight to a subset of the traces, you can view the actual session as it was run by the end-user&rsquo;s browser.</p><p>You do this by clicking on the link <strong>User Sessions</strong> as shown below:</p><p><a href=#R-image-d3d8b21947c12f89140a5cd68a017c23 class=lightbox-link><img alt=RUM-Header class="lazy lightbox figure-image" loading=lazy src=../images/rum-sessions-link.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d3d8b21947c12f89140a5cd68a017c23><img alt=RUM-Header class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-sessions-link.png></a></p><p>This will give you a list of sessions that matched both the time filter and the subset selected in the Tag Profile.</p><p>Select one by clicking on the session ID, It is a good idea to select one that has the longest duration (preferably over 700 ms).</p><p><a href=#R-image-7cf816a02cf8ca3bdc18d11159042795 class=lightbox-link><img alt=RUM-Header class="lazy lightbox figure-image" loading=lazy src=../images/rum-session-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7cf816a02cf8ca3bdc18d11159042795><img alt=RUM-Header class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-session-list.png></a></p><p>Once you have selected the session, you will be taken to the session details page. As you are selecting a specific action that is part of the session, you will likely arrive somewhere in the middle of the session, at the moment of the interaction.</p><p>You can see the URL that you selected earlier is where we are focusing on in the waterfall.</p><p><a href=#R-image-a8032cf5e3d806495cddd1bd1e210428 class=lightbox-link><img alt=RUM-Session-Tag class="lazy lightbox figure-image" loading=lazy src=../images/rum-session.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a8032cf5e3d806495cddd1bd1e210428><img alt=RUM-Session-Tag class="lazy lightbox lightbox-image" loading=lazy src=../images/rum-session.png></a></p><p>Scroll down a little bit on the page, so you see the end of the operation as shown below.</p><p><a href=#R-image-c142cd241b99d74b313fcc90f78bd1ac class=lightbox-link><img alt=RUM-Session-info class="lazy lightbox figure-image" loading=lazy src=../images/Session-Tag-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c142cd241b99d74b313fcc90f78bd1ac><img alt=RUM-Session-info class="lazy lightbox lightbox-image" loading=lazy src=../images/Session-Tag-2.png></a></p><p>You can see that we have received a few Javascript Console errors that may not have been detected or visible to the end users. To examine these in more detail click on the middle one that says: *<strong>Cannot read properties of undefined (reading &lsquo;Prcie&rsquo;)</strong></p><p><a href=#R-image-0f77588cd3a86a55a40a06b2835f1661 class=lightbox-link><img alt=RUM-Session-info class="lazy lightbox figure-image" loading=lazy src=../images/Session-Tag-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0f77588cd3a86a55a40a06b2835f1661><img alt=RUM-Session-info class="lazy lightbox lightbox-image" loading=lazy src=../images/Session-Tag-3.png></a></p><p>This will cause the page to expand and show the Span detail for this interaction, It will contain a detailed <em>error.stack</em> you can pass on the developer to solve the issue. You may have noticed when buying in the Online Boutique that the final total always was $0.00.</p><p><a href=#R-image-98933adc3810aad30d939ccd178213f0 class=lightbox-link><img alt=RUM-Session-info class="lazy lightbox figure-image" loading=lazy src=../images/Session-Tag-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-98933adc3810aad30d939ccd178213f0><img alt=RUM-Session-info class="lazy lightbox lightbox-image" loading=lazy src=../images/Session-Tag-4.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=advanced-synthetics>Advanced Synthetics</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;<h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This workshop walks you through using the <a href=https://developer.chrome.com/docs/devtools/recorder/ rel=external>Chrome DevTools Recorder</a> to create a synthetic test on a Splunk demonstration environment or on your own public website.</p><p>The exported JSON from the Chrome DevTools Recorder will then be used to create a Splunk Synthetic Monitoring Real Browser Test.</p><h2 id=pre-requisites>Pre-requisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Google Chrome Browser installed</li><li>Publicly browser-accessible URL</li><li>Access to Splunk Observability Cloud</li></ul><h2 id=supporting-resources>Supporting resources<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li>Lantern: <a href=https://lantern.splunk.com/Observability/UCE/Proactive_response/Optimize_End-User_Experiences/Running_Synthetics_browser_tests/Selectors_for_multi-step_browser_tests rel=external>advanced Selectors for multistep browser tests</a></li><li>Chrome for Developers <a href=https://developer.chrome.com/blog/devtools-tips-4 rel=external>DevTools Tips</a></li><li>web.dev <a href=https://web.dev/explore/learn-core-web-vitals rel=external>Core Web Vitals</a> reference</li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Advanced Synthetics</h1><article class=default><header class=headline></header><h1 id=record-a-test>Record a test</h1><p>Write down a short user journey you want to test. Remember: smaller bites are easier to chew! In other words, get started with just a few steps. This is easier not only to create and maintain the test, but also to understand and act on the results. Test the essential features to your users, like a support contact form, login widget, or date picker.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>Record the test in the same type of viewport that you want to run it. For example, if you want to run a test on a mobile viewport, narrow your browser width to mobile and refresh before starting the recording. This way you are capturing the correct elements that could change depending on responsive style rules.</p></div></details><p>Open your starting URL in Chrome Incognito. This is important so you&rsquo;re not carrying cookies into the recording, which we won&rsquo;t set up in the Synthetic test by default. If you workshop instructor does not have a custom URL, feel free to use <a href=https://online-boutique-eu.splunko11y.com rel=external>https://online-boutique-eu.splunko11y.com</a> or <a href=https://online-boutique-us.splunko11y.com rel=external>https://online-boutique-us.splunko11y.com</a>, which are in the examples below.</p><h2 id=open-the-chrome-devtools-recorder>Open the Chrome DevTools Recorder<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Next, open the Developer Tools (in the new tab that was opened above) by pressing <code>Ctrl + Shift + I</code> on Windows or <code>Cmd + Option + I</code> on a Mac, then select <strong>Recorder</strong> from the top-level menu or the <strong>More tools</strong> flyout menu.</p><p><a href=#R-image-ba8abcf8b660a7bc3db90a0ef8a5785a class=lightbox-link><img alt="Open Recorder" class="lazy lightbox figure-image" loading=lazy src=../../images/open-recorder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ba8abcf8b660a7bc3db90a0ef8a5785a><img alt="Open Recorder" class="lazy lightbox lightbox-image" loading=lazy src=../../images/open-recorder.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Site elements might change depending on viewport width. Before recording, set your browser window to the correct width for the test you want to create (Desktop, Tablet, or Mobile). Change the DevTools &ldquo;dock side&rdquo; to pop out as a separate window if it helps.</p></div></details><h2 id=create-a-new-recording>Create a new recording<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With the Recorder panel open in the DevTools window. Click on the <span class="btn cstyle button blue noicon"><span><span class=title>Create a new recording</span></span></span> button to start.</p><p><a href=#R-image-34accf24bd358857a7e1578fc756a3a5 class=lightbox-link><img alt=Recorder class="lazy lightbox figure-image" loading=lazy src=../../images/recorder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34accf24bd358857a7e1578fc756a3a5><img alt=Recorder class="lazy lightbox lightbox-image" loading=lazy src=../../images/recorder.png></a></p><p>For the <strong>Recording Name</strong> use your initials to prefix the name of the recording e.g. <strong><code>&lt;your initials></code> - <code>&lt;website name></code></strong>. Click on <strong>Start Recording</strong> to start recording your actions.</p><p><a href=#R-image-4e14f9a33b17570a4e5367049ea13ef9 class=lightbox-link><img alt="Recording Name" class="lazy lightbox figure-image" loading=lazy src=../../images/recording-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4e14f9a33b17570a4e5367049ea13ef9><img alt="Recording Name" class="lazy lightbox lightbox-image" loading=lazy src=../../images/recording-name.png></a></p><p>Now that we are recording, complete a few actions on the site. An example for our demo site is:</p><ul><li>Click on <strong>Vintage Camera Lens</strong></li><li>Click on <strong>Add to Cart</strong></li><li>Click on <strong>Place Order</strong></li><li>Click on <strong>End recording</strong> in the Recorder panel.</li></ul><p><a href=#R-image-2bce1b2453fd9c1b72ca8976a2ba1777 class=lightbox-link><img alt="End Recording" class="lazy lightbox figure-image" loading=lazy src=../../images/end-recording.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2bce1b2453fd9c1b72ca8976a2ba1777><img alt="End Recording" class="lazy lightbox lightbox-image" loading=lazy src=../../images/end-recording.png></a></p><h2 id=export-the-recording>Export the recording<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the <strong>Export</strong> button:</p><p><a href=#R-image-c63f916d9ca01a309c92b4040a2800db class=lightbox-link><img alt="Export button" class="lazy lightbox figure-image" loading=lazy src=../../images/export-button.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c63f916d9ca01a309c92b4040a2800db><img alt="Export button" class="lazy lightbox lightbox-image" loading=lazy src=../../images/export-button.png></a></p><p>Select <strong>JSON</strong> as the format, then click on <strong>Save</strong></p><p><a href=#R-image-8453344f7eb51fd6131a90aa08c8c035 class=lightbox-link><img alt="Export JSON" class="lazy lightbox figure-image" loading=lazy src=../../images/export-json.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8453344f7eb51fd6131a90aa08c8c035><img alt="Export JSON" class="lazy lightbox lightbox-image" loading=lazy src=../../images/export-json.png></a></p><p><a href=#R-image-119a9096a4157fd9a73be62a918933e9 class=lightbox-link><img alt="Save JSON" class="lazy lightbox figure-image" loading=lazy src=../../images/save-json.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-119a9096a4157fd9a73be62a918933e9><img alt="Save JSON" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save-json.png></a></p><p><strong>Congratulations!</strong> You have successfully created a recording using the Chrome DevTools Recorder. Next, we will use this recording to create a Real Browser Test in Splunk Synthetic Monitoring.</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
View the example JSON file for this browser test recording</summary><div class=box-content><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;RWC - Online Boutique&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;steps&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;setViewport&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;width&#34;</span><span class=p>:</span> <span class=mi>1430</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;height&#34;</span><span class=p>:</span> <span class=mi>1016</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;deviceScaleFactor&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;isMobile&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;hasTouch&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;isLandscape&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigate&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Online Boutique&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;div:nth-of-type(2) &gt; div:nth-of-type(2) a &gt; div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div/div/div[2]/div[2]/div/a/div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/div:nth-of-type(2) &gt; div:nth-of-type(2) a &gt; div&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mi>170</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mi>180</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/product/66VCHSJNUP&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;aria/ADD TO CART&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div[1]/div/div[2]/div/form/div/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;text/Add to Cart&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mf>35.0078125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mf>46.4140625</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/cart&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;main&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;selectors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;aria/PLACE ORDER&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;div &gt; div &gt; div.py-3 button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;xpath//html/body/main/div/div/div[4]/div/form/div[4]/button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;pierce/div &gt; div &gt; div.py-3 button&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;text/Place order&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetY&#34;</span><span class=p>:</span> <span class=mf>29.8125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;offsetX&#34;</span><span class=p>:</span> <span class=mf>66.8203125</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;assertedEvents&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;navigation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://online-boutique-eu.splunko11y.com/cart/checkout&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=create-a-browser-test>Create a Browser Test</h1><p>In Splunk Observability Cloud, navigate to <strong>Synthetics</strong> and click on <span class="btn cstyle button blue noicon"><span><span class=title>Add new test</span></span></span>.</p><p>From the dropdown select <strong>Browser test</strong>.</p><p><a href=#R-image-895f54a1be84fab9020223528904f453 class=lightbox-link><img alt="Add new test" class="lazy lightbox figure-image" loading=lazy src=../_img/create-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-895f54a1be84fab9020223528904f453><img alt="Add new test" class="lazy lightbox lightbox-image" loading=lazy src=../_img/create-browser.png></a></p><p>You will then be presented with the <strong>Browser test content</strong> configuration page.</p><p><a href=#R-image-090ccfdb44145063c3403ae3f4da9430 class=lightbox-link><img alt="New Test" class="lazy lightbox figure-image" loading=lazy src=../_img/new-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-090ccfdb44145063c3403ae3f4da9430><img alt="New Test" class="lazy lightbox lightbox-image" loading=lazy src=../_img/new-browser.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=import-json>Import JSON</h1><p>To begin configuring our test, we need to import the JSON that we exported from the Chrome DevTools Recorder. To enable the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>Import</strong></span></span></span> button, we must first give our test a name e.g. <strong>[<code>&lt;your team name></code>] <code>&lt;your initials></code> - Online Boutique</strong>.</p><p><a href=#R-image-3625faf059c62c9fc484d2b5587b4366 class=lightbox-link><img alt="Browser edit form" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-form.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3625faf059c62c9fc484d2b5587b4366><img alt="Browser edit form" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-form.png></a></p><p>Once the <span class="btn cstyle button transparent noicon"><span><span class=title><strong>Import</strong></span></span></span> button is enabled, click on it and either drop the JSON file that you exported from the Chrome DevTools Recorder or upload the file.</p><p><a href=#R-image-91c10bd5e4ef13f699a1d6205882aa70 class=lightbox-link><img alt="Import JSON" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-import.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-91c10bd5e4ef13f699a1d6205882aa70><img alt="Import JSON" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-import.png></a></p><p>Once the JSON file has been uploaded, click on <span class="btn cstyle button blue noicon"><span><span class=title>Continue to edit steps</span></span></span></p><p><a href=#R-image-ec14af3f41b279afb6e25a84b9ec1faf class=lightbox-link><img alt="Import complete message" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-import-complete.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec14af3f41b279afb6e25a84b9ec1faf><img alt="Import complete message" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-import-complete.png></a></p><p>Before we make any edits to the test, let&rsquo;s first configure the settings, click on <span class="btn cstyle button blue noicon"><span><span class=title>&lt; Return to test</span></span></span></p><p><a href=#R-image-24c7d9f2c81902702d1b2658e75afc34 class=lightbox-link><img alt="Return to test button in the browser test editor" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-return.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-24c7d9f2c81902702d1b2658e75afc34><img alt="Return to test button in the browser test editor" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-return.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=test-settings>Test settings</h1><p>The simple settings allow you to configure the basics of the test:</p><ul><li><strong>Name</strong>: The name of the test (e.g. RWC - Online Boutique).</li><li><strong>Details</strong>:<ul><li><strong>Locations</strong>: The locations where the test will run from.</li><li><strong>Device</strong>: Emulate different devices and connection speeds. Also, the viewport will be adjusted to match the chosen device.</li><li><strong>Frequency</strong>: How often the test will run.</li><li><strong>Round-robin</strong>: If multiple locations are selected, the test will run from one location at a time, rather than all locations at once.</li><li><strong>Active</strong>: Set the test to active or inactive.</li></ul></li></ul><p>For this workshop, we will configure the locations that we wish to monitor from. Click in the <strong>Locations</strong> field and you will be presented with a list of global locations (over 50 in total).</p><p><a href=#R-image-b65459c300335a7d6cde9b3905c2d9fc class=lightbox-link><img alt="Global Locations" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-loc-field.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b65459c300335a7d6cde9b3905c2d9fc><img alt="Global Locations" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-loc-field.png></a></p><p>Select the following locations:</p><ul><li><strong>AWS - N. Virginia</strong></li><li><strong>AWS - London</strong></li><li><strong>AWS - Melbourne</strong></li></ul><p>Once complete, scroll down and click on Click on <span class="btn cstyle button blue noicon"><span><span class=title>Submit</span></span></span> to save the test.</p><p>The test will now be scheduled to run every 5 minutes from the 3 locations that we have selected. This does take a few minutes for the schedule to be created.</p><p>So while we wait for the test to be scheduled, click on <span class="btn cstyle button transparent noicon"><span><span class=title>Edit test</span></span></span> so we can go through the Advanced settings.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=advanced-test-settings>Advanced Test Settings</h1><p>Click on <strong>Advanced</strong>, these settings are optional and can be used to further configure the test.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>In the case of this workshop, we will <strong>not</strong> be using any of these settings; this is for informational purposes only.</p></div></details><p><a href=#R-image-6045a6349bc7da50683af24e7b1ed634 class=lightbox-link><img alt="Advanced Settings" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-advanced.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6045a6349bc7da50683af24e7b1ed634><img alt="Advanced Settings" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-advanced.png></a></p><ul><li><strong>Security</strong>:<ul><li><strong>TLS/SSL validation</strong>: When activated, this feature is used to enforce the validation of expired, invalid hostname, or untrusted issuer on SSL/TLS certificates.</li><li><strong>Authentication</strong>: Add credentials to authenticate with sites that require additional security protocols, for example from within a corporate network. By using <a href=https://docs.splunk.com/Observability/synthetics/test-config/global-variables.html rel=external>concealed global variables</a> in the Authentication field, you create an additional layer of security for your credentials and simplify the ability to share credentials across checks.</li></ul></li><li><strong>Custom Content</strong>:<ul><li><strong>Custom headers</strong>: Specify custom headers to send with each request. For example, you can add a header in your request to filter out requests from analytics on the back end by sending a specific header in the requests. You can also use custom headers to set cookies.</li><li><strong>Cookies</strong>: Set cookies in the browser before the test starts. For example, to prevent a popup modal from randomly appearing and interfering with your test, you can set cookies. Any cookies that are set will apply to the domain of the starting URL of the check. Splunk Synthetics Monitoring uses the public suffix list to determine the domain.</li><li><strong>Host overrides</strong>: Add host override rules to reroute requests from one host to another. For example, you can create a host override to test an existing production site against page resources loaded from a development site or a specific CDN edge node.</li></ul></li></ul><p>See the <a href=https://docs.splunk.com/observability/en/synthetics/browser-test/set-up-browser-test.html#advanced-settings-for-browser-tests rel=external>Advanced Settings for Browser Tests</a> section of the Docs for more information.</p><p>Next, we will edit the test steps to provide more meaningful names for each step.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=edit-test-steps>Edit test steps</h1><p>To edit the steps click on the <span class="btn cstyle button transparent noicon"><span><span class=title>+ Edit steps or synthetic transactions</span></span></span> button. From here, we are going to give meaningful names to each step.</p><p>For each step, we are going to give them a meaningful, readable name. That could look like:</p><ul><li><strong>Step 1</strong> replace the text <strong>Go to URL</strong> with <strong>Go to Homepage</strong></li><li><strong>Step 2</strong> enter the text <strong>Select Typewriter</strong>.</li><li><strong>Step 3</strong> enter <strong>Add to Cart</strong>.</li><li><strong>Step 4</strong> enter <strong>Place Order</strong>.</li></ul><p><a href=#R-image-d218e119b9b9427e51b6fc53a7b07e05 class=lightbox-link><img alt="Editing browser test step names" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-edit.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d218e119b9b9427e51b6fc53a7b07e05><img alt="Editing browser test step names" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-edit.png></a></p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Note</summary><div class=box-content><p>If you&rsquo;d like, group the test steps into <a href=https://docs.splunk.com/observability/en/synthetics/browser-test/set-up-transactional-browser-test.html#add-transactions rel=external>Transactions</a> and edit the transaction names as seen above. This is especially useful for Single Page Apps (SPAs), where the resource waterfall is not split by URL. We can also create charts and alerts based on transactions.</p></div></details><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>&lt; Return to test</span></span></span> to return to the test configuration page and click <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span> to save the test.</p><p>You will be returned to the test dashboard where you will see test results start to appear.</p><p><a href=#R-image-59717f918873b7bc8678817acdfcf72b class=lightbox-link><img alt="Browser KPIs chart" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-kpis.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-59717f918873b7bc8678817acdfcf72b><img alt="Browser KPIs chart" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-kpis.png></a></p><p><strong>Congratulations!</strong> You have successfully created a Real Browser Test in Splunk Synthetic Monitoring. Next, we will look into a test result in more detail.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=view-test-results>View test results</h1><p>1. Click into a spike or failure in your test run results.</p><p><a href=#R-image-add73f4833e105735e747240d5c8cc37 class=lightbox-link><img alt="Spike in the browser test performance KPIs chart" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-spike.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-add73f4833e105735e747240d5c8cc37><img alt="Spike in the browser test performance KPIs chart" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-spike.png></a></p><p>2. What can you learn about this test run? If it failed, use the error message, filmstrip, video replay, and waterfall to understand what happened.</p><p><a href=#R-image-d9388a880e9c93e48cf3b214d6f679f4 class=lightbox-link><img alt="Single test run result, with an error message and screenshots" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-fail-result.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9388a880e9c93e48cf3b214d6f679f4><img alt="Single test run result, with an error message and screenshots" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-fail-result.png></a></p><p>3. What do you see in the resources? Make sure to click through all of the page (or transaction) tabs.</p><p><a href=#R-image-3deb9845e70ac0184374e3e944cf5b9f class=lightbox-link><img alt="resources in the browser test waterfall, with a long request highlighted" class="lazy lightbox figure-image" loading=lazy src=../_img/browser-resources.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3deb9845e70ac0184374e3e944cf5b9f><img alt="resources in the browser test waterfall, with a long request highlighted" class="lazy lightbox lightbox-image" loading=lazy src=../_img/browser-resources.png></a></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>Do you see anything interesting? Common issues to find and fix include: unexpected response codes, duplicate requests, forgotten third parties, large or slow files, and long gaps between requests.</p></div></details><p>Want to learn more about specific performance improvements? <a href=https://web.dev/learn/performance/welcome rel=external>Google</a> and <a href=https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work rel=external>Mozilla</a> have great resources to help understand what goes into frontend performance as well as in-depth details of how to optimize it.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=frontend-dashboards>Frontend Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>Go to Dashboards and find the End User Experiences dashboard group.</p><p>Click the three dots on the top right to open the dashboard menu, and select Save As, and include your <strong>team name</strong> and <strong>initials</strong> in the dashboard name.</p><p>Save to the dashboard group that matches your email address. Now you have your own copy of this dashboard to customize!</p><p><a href=#R-image-78428c71c1793acbed96f3872006ed1b class=lightbox-link><img alt="Dashboard save as" class="lazy lightbox figure-image" loading=lazy src=../images/dashboard-save-as.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-78428c71c1793acbed96f3872006ed1b><img alt="Dashboard save as" class="lazy lightbox lightbox-image" loading=lazy src=../images/dashboard-save-as.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Frontend Dashboards</h1><article class=default><header class=headline></header><h1 id=copying-and-editing-charts>Copying and editing charts</h1><p>We have some good charts in our dashboard, but let&rsquo;s add a few more.</p><ol><li><p>Go to Dashboards by clicking the dasboard icon on the left side of the screen. Find the <strong>Browser app health dashboard</strong> and scroll to the Largest Contentful Paint (LCP) chart. Click the chart actions icon to open the flyout menu, and click &ldquo;Copy&rdquo; to add this chart to your clipboard.
<a href=#R-image-0bc823033a9e945e513970b424a4a0ec class=lightbox-link><img alt="copy chart" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/60ea6b19-e024-415f-b3da-4f942f343ec3/user_cropped_screenshot.jpeg?tl_px=179,36&br_px=1899,998&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,311" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0bc823033a9e945e513970b424a4a0ec><img alt="copy chart" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/60ea6b19-e024-415f-b3da-4f942f343ec3/user_cropped_screenshot.jpeg?tl_px=179,36&br_px=1899,998&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,311"></a></p></li><li><p>Now you can continue to add any other charts to your clipboard by clicking the &ldquo;add to clipboard&rdquo; icon.
<a href=#R-image-0eb6e67c5cbd6132b2d4ef912a5e26b8 class=lightbox-link><img alt="copy chart inline icon" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/c05c55b9-0c3e-47fe-ac83-b945839c513c/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1540,764&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=723,126" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0eb6e67c5cbd6132b2d4ef912a5e26b8><img alt="copy chart inline icon" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/c05c55b9-0c3e-47fe-ac83-b945839c513c/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1540,764&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=723,126"></a></p></li><li><p>When you have collected the charts you want on your dashboard, click the &ldquo;create&rdquo; icon on the top right. You might need to reload the page if you were looking at charts in another browser tab.
<a href=#R-image-e1c3f3e8df8844619755ddeb944ce914 class=lightbox-link><img alt="create icon" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/9cd17fba-a199-4e2c-9f2a-c692a611630d/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1388,750&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=969,17" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e1c3f3e8df8844619755ddeb944ce914><img alt="create icon" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/9cd17fba-a199-4e2c-9f2a-c692a611630d/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1388,750&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=969,17"></a></p></li><li><p>Click the &ldquo;Paste charts&rdquo; menu option.
<a href=#R-image-b8a1a23818a7ba2a7c0005bb77a36815 class=lightbox-link><img alt="paste charts" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/1abb0536-3a91-42e5-ae35-4db1311c7c71/ascreenshot.jpeg?tl_px=1160,476&br_px=2880,1437&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=842,276" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b8a1a23818a7ba2a7c0005bb77a36815><img alt="paste charts" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/1abb0536-3a91-42e5-ae35-4db1311c7c71/ascreenshot.jpeg?tl_px=1160,476&br_px=2880,1437&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=842,276"></a></p></li></ol><p>Now you are able to resize and edit the charts as you&rsquo;d like!</p><h2 id=bonus-edit-chart-data>Bonus: edit chart data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><p>Click the chart actions icon and select Open to edit the chart.
<a href=#R-image-7007e2475dda673503248cf30ba299a0 class=lightbox-link><img alt="chart actions menu" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/653607e9-5a00-42b3-9fd8-37fe3f9ec6ad/ascreenshot.jpeg?tl_px=792,581&br_px=2512,1542&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,276" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7007e2475dda673503248cf30ba299a0><img alt="chart actions menu" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/653607e9-5a00-42b3-9fd8-37fe3f9ec6ad/ascreenshot.jpeg?tl_px=792,581&br_px=2512,1542&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,276"></a></p></li><li><p>Remove the existing Test signal.
<a href=#R-image-aee2fdc9dee3e7aa2af2be67ea755e5a class=lightbox-link><img alt="edit the test signal" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/df0ca0c4-bb5a-4348-a6d3-d0d29c5a2ec5/ascreenshot.jpeg?tl_px=0,775&br_px=1719,1736&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=454,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aee2fdc9dee3e7aa2af2be67ea755e5a><img alt="edit the test signal" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/df0ca0c4-bb5a-4348-a6d3-d0d29c5a2ec5/ascreenshot.jpeg?tl_px=0,775&br_px=1719,1736&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=454,277"></a></p></li><li><p>Click <span class="btn cstyle button blue noicon"><span><span class=title>Add filter</span></span></span> and type <code>test: *yourInitials*</code>. This will use a wildcard match so that all of the tests you have created that contain your initials (or any string you decide) will be pulled into the chart.
<a href=#R-image-c691b5dd0f994733321835d038092683 class=lightbox-link><img alt="add filter button" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/14a6b9be-2e79-4c30-8a98-7e5f29570560/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1152,518&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=654,229" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c691b5dd0f994733321835d038092683><img alt="add filter button" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/14a6b9be-2e79-4c30-8a98-7e5f29570560/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1152,518&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=654,229"></a></p></li><li><p>Click into the functions to see how adding and removing dimensions changes how the data is displayed. For example, if you want all of your test location data rolled up, remove that dimension from the function.
<a href=#R-image-8bcba6e252ab87485cb1987fc2a09579 class=lightbox-link><img alt="test signal functions" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/0e402434-a302-4df3-9c2d-9a9c16a01524/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1557,725&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=881,212" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8bcba6e252ab87485cb1987fc2a09579><img alt="test signal functions" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/0e402434-a302-4df3-9c2d-9a9c16a01524/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1557,725&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=881,212"></a></p></li><li><p>Change the chart name and description as appropriate, and click &ldquo;Save and close&rdquo; to commit your changes or just &ldquo;Close&rdquo; to cancel your changes.
<a href=#R-image-82b908a8e112cd70098adbe89366abc6 class=lightbox-link><img alt="chart close buttons" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/02bc81af-cd81-4ac4-b1d1-f73cf7e62b99/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=999,644&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=682,162" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-82b908a8e112cd70098adbe89366abc6><img alt="chart close buttons" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/02bc81af-cd81-4ac4-b1d1-f73cf7e62b99/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=999,644&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=682,162"></a></p></li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=events-in-context-with-chart-data>Events in context with chart data</h1><p>Seeing the visualization of our KPIs is great. What&rsquo;s better? KPIs in context with events! <a href=https://docs.splunk.com/observability/en/data-visualization/dashboards/dashboards-add.html#overlay-event-markers-on-charts-in-a-dashboard rel=external>Overlaying events on a dashboard</a> can help us more quickly understand if an event like a deployment caused a change in metrics, for better or worse.</p><ol><li><p>Your instructor will push a condition change to the workshop application. Click the event marker on any of your dashboard charts to see more details.
<a href=#R-image-6c0523e281f6899763a210d930a217cb class=lightbox-link><img alt="condition change event" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/d2dac271-0a85-46b9-b46d-e13e4e759f60/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1385,827&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=921,460" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6c0523e281f6899763a210d930a217cb><img alt="condition change event" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/d2dac271-0a85-46b9-b46d-e13e4e759f60/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1385,827&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=921,460"></a></p></li><li><p>In the dimensions, we can see more details about this specific event. If we click the event record, we can mark for deletion if needed.
<a href=#R-image-421231bbb010df5047c109cbe960adb1 class=lightbox-link><img alt="event record" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/55a9d0dc-5a44-496d-b44f-60f681b5576b/ascreenshot.jpeg?tl_px=692,626&br_px=2412,1587&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-421231bbb010df5047c109cbe960adb1><img alt="event record" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/55a9d0dc-5a44-496d-b44f-60f681b5576b/ascreenshot.jpeg?tl_px=692,626&br_px=2412,1587&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277"></a>
<a href=#R-image-ba3be6e0b51c59293b99386b90281770 class=lightbox-link><img alt="event details" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/ee20c9d9-9ea4-4302-af4a-73c8c24df029/user_cropped_screenshot.jpeg?tl_px=13,12&br_px=1733,974&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=832,324" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ba3be6e0b51c59293b99386b90281770><img alt="event details" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/ee20c9d9-9ea4-4302-af4a-73c8c24df029/user_cropped_screenshot.jpeg?tl_px=13,12&br_px=1733,974&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=832,324"></a></p></li><li><p>We can also see a history of events in the event feed by clicking the icon on the top right of the screen, and selecting Event feed.
<a href=#R-image-e232bea9b606073ae04fc78b35b36294 class=lightbox-link><img alt="event feed" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/7e7317f6-04b4-404e-8e17-78cf3e319ef9/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1471,785&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=1056,84" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e232bea9b606073ae04fc78b35b36294><img alt="event feed" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/7e7317f6-04b4-404e-8e17-78cf3e319ef9/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1471,785&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=1056,84"></a></p></li><li><p>Again, we can see details about recent events in this feed.
<a href=#R-image-ab0b4019c5808b7307f387e6240eac1f class=lightbox-link><img alt="event details" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/66c575d0-da25-4e4d-bd3b-78b6ce777ef4/user_cropped_screenshot.jpeg?tl_px=41,0&br_px=1760,877&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=815,346" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ab0b4019c5808b7307f387e6240eac1f><img alt="event details" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/66c575d0-da25-4e4d-bd3b-78b6ce777ef4/user_cropped_screenshot.jpeg?tl_px=41,0&br_px=1760,877&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=815,346"></a></p></li><li><p>We can also add new events in the GUI or <a href=https://dev.splunk.com/observability/reference/api/ingest_data/latest#endpoint-send-events rel=external>via API</a>. To add a new event in the GUI, click the New event button.
<a href=#R-image-3fec1b322af04148a1f851509e388bc5 class=lightbox-link><img alt="GUI add event button" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/f6707f30-af0e-4aa0-aa60-8272a601c0f7/user_cropped_screenshot.jpeg?tl_px=50,0&br_px=1770,852&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=895,179" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3fec1b322af04148a1f851509e388bc5><img alt="GUI add event button" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/f6707f30-af0e-4aa0-aa60-8272a601c0f7/user_cropped_screenshot.jpeg?tl_px=50,0&br_px=1770,852&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=895,179"></a></p></li><li><p>Name your event with your team name, initials, and what kind of event it is (deployment, campaign start, etc). Choose a timestamp, or leave as-is to use the current time, and click &ldquo;Create&rdquo;.
<a href=#R-image-a45f71606690a827a425d5593473d4d1 class=lightbox-link><img alt="create event form" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/1280542f-4446-4b9d-8a46-d524e0319572/user_cropped_screenshot.jpeg?tl_px=0,125&br_px=1567,1087&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=858,513" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a45f71606690a827a425d5593473d4d1><img alt="create event form" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/1280542f-4446-4b9d-8a46-d524e0319572/user_cropped_screenshot.jpeg?tl_px=0,125&br_px=1567,1087&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=858,513"></a></p></li><li><p>Now, we need to make sure our new event is overlaid in this dashboard. Wait a minute or so (refresh the page if needed) and then search for the event in the Event overlay field.
<a href=#R-image-4aec26de73abcb1a8d24c5f376b6f079 class=lightbox-link><img alt="overlay event" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/ca2b0b08-a369-473d-ad32-3926bfca934c/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1601,810&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=408,229" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4aec26de73abcb1a8d24c5f376b6f079><img alt="overlay event" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/ca2b0b08-a369-473d-ad32-3926bfca934c/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1601,810&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=408,229"></a></p></li><li><p>If your event is within the dashboard time window, you should now see it overlaid in your charts. Click &ldquo;Save&rdquo; to make sure your event overlay is saved to your dashboard!
<a href=#R-image-de5d112e1a2f68f58f2f5d8571d9effc class=lightbox-link><img alt="save dashboard" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/21dc9ffa-4b33-46b1-81e2-6204924b7ec5/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1432,732&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=868,67" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-de5d112e1a2f68f58f2f5d8571d9effc><img alt="save dashboard" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-04-02/21dc9ffa-4b33-46b1-81e2-6204924b7ec5/user_cropped_screenshot.jpeg?tl_px=0,0&br_px=1432,732&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=868,67"></a></p></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Keep in mind</summary><div class=box-content><p>Want to add context to that bug ticket, or show your manager how your change improved app performance? Seeing observability data in context with events not only helps with troubleshooting, but also helps us communicate with other teams.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=detectors>Detectors</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<p>After we have a good understanding of our performance baseline, we can start to create Detectors so that we receive alerts when our KPIs are unexpected. If we create detectors before understanding our baseline, we run the risk of generating unnecessary alert noise.</p><p>For RUM and Synthetics, we will explore how to create detectors:</p><ol><li>on a single Synthetic test</li><li>on a single KPI in RUM</li><li>on a dashboard chart</li></ol><p>For more Detector resources, please see our <a href=https://docs.splunk.com/observability/en/alerts-detectors-notifications/alerts-detectors-notifications.html rel=external>Observability docs</a>, <a href="https://lantern.splunk.com/Special:Search?query=detector&type=wiki" rel=external>Lantern</a>, and consider an <a href="https://education.splunk.com/Saba/Web_spf/NA10P2PRD105/guestapp/catalog/search?searchText=detector&selectedTab=LEARNINGEVENT" rel=external>Education course</a> if you&rsquo;d like to go more in depth with instructor guidance.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Detectors</h1><article class=default><header class=headline></header><h1 id=test-detectors>Test Detectors</h1><p>Why would we want a <a href=https://docs.splunk.com/observability/en/synthetics/test-config/synth-alerts.html rel=external>detector on a single Synthetic test</a>? Some examples:</p><ul><li>The endpoint, API transaction, or browser journey is highly critical</li><li>We have deployed code changes and want to know if the resulting KPI is or is not as we expect</li><li>We need to temporarily keep a close eye on a specific change we are testing and don&rsquo;t want to create a lot of noise, and will disable the detector later</li><li>We want to know about unexpected issues before a real user encounters them</li></ul><ol><li><p>On the test overview page, click <span class="btn cstyle button transparent noicon"><span><span class=title>Create Detector</span></span></span> on the top right.
<a href=#R-image-1f5b0ee63cfeade7c6b6176a03f0a4f5 class=lightbox-link><img alt="create detector on a single synthetic test" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/5ff84106-52ac-4519-8835-999446227709/user_cropped_screenshot.jpeg?tl_px=1144,0&br_px=2864,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=902,79" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1f5b0ee63cfeade7c6b6176a03f0a4f5><img alt="create detector on a single synthetic test" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/5ff84106-52ac-4519-8835-999446227709/user_cropped_screenshot.jpeg?tl_px=1144,0&br_px=2864,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=902,79"></a></p></li><li><p>Name the detector with your <strong>team name</strong> and your <strong>initials</strong> and <strong>LCP</strong> (the signal we will eventually use), so that the instructor can better keep track of everyone&rsquo;s progress.</p></li><li><p>Change the signal to First byte time.
<a href=#R-image-bf529a103f36149a728fec91c02e0b1d class=lightbox-link><img alt="change the signal" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/e443d816-7608-4073-905f-45f36d189665/ascreenshot.jpeg?tl_px=440,240&br_px=2160,1201&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,276" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bf529a103f36149a728fec91c02e0b1d><img alt="change the signal" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/e443d816-7608-4073-905f-45f36d189665/ascreenshot.jpeg?tl_px=440,240&br_px=2160,1201&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,276"></a></p></li><li><p>Change the alert details, and see how the chart to the right shows the amount of alert events under those conditions. This is where you can decide how much alert noise you want to generate, based on how much your team tolerates. Play with the settings to see how they affect estimated alert noise.
<a href=#R-image-95fbaa2c296c227a860ae715711a37b1 class=lightbox-link><img alt="alert noise preview" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/35b475b5-4e66-498d-971a-06c5368bc0ce/ascreenshot.jpeg?tl_px=0,233&br_px=1719,1194&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=404,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-95fbaa2c296c227a860ae715711a37b1><img alt="alert noise preview" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/35b475b5-4e66-498d-971a-06c5368bc0ce/ascreenshot.jpeg?tl_px=0,233&br_px=1719,1194&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=404,277"></a></p></li><li><p>Now, <strong>change the signal to Largest contentful paint</strong>. This is a key web vital related to the user experience as it relates to loading time. Change the threshold to <strong>2500ms</strong>. It&rsquo;s okay if there is no sample alert event in the detector preview.</p></li><li><p>Scroll down in this window to see the notification options, including severity and recipients.
<a href=#R-image-9f3a850c269b751a02f10221fb388e3f class=lightbox-link><img alt="notification options" class="lazy lightbox figure-image" loading=lazy src=../_img/detector-notifications.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f3a850c269b751a02f10221fb388e3f><img alt="notification options" class="lazy lightbox lightbox-image" loading=lazy src=../_img/detector-notifications.png></a></p></li><li><p>Click the notifications link to customize the alert subject, message, tip, and runbook link.
<a href=#R-image-f9a54755d6b781289cc2ba736361b7fa class=lightbox-link><img alt="notification customization dialog" class="lazy lightbox figure-image" loading=lazy src=../_img/notification-custom.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9a54755d6b781289cc2ba736361b7fa><img alt="notification customization dialog" class="lazy lightbox lightbox-image" loading=lazy src=../_img/notification-custom.png></a></p></li><li><p>When you are happy with the amount of alert noise this detector would generate, click Activate.
<a href=#R-image-caa019c00d4cd03708c81c9525dd9ecb class=lightbox-link><img alt="activate the detector" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/6a80893a-fffc-475b-a22c-98c89c239095/ascreenshot.jpeg?tl_px=0,838&br_px=1719,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=168,451" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-caa019c00d4cd03708c81c9525dd9ecb><img alt="activate the detector" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-16/6a80893a-fffc-475b-a22c-98c89c239095/ascreenshot.jpeg?tl_px=0,838&br_px=1719,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=168,451"></a></p></li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=rum-detectors>RUM Detectors</h1><p>Let&rsquo;s say we want to know about an issue in production without waiting for a ticket from our support center. This is where <a href=https://docs.splunk.com/observability/en/rum/rum-alerts.html rel=external>creating detectors in RUM</a> will be helpful for us.</p><ol><li><p>Go to the RUM overview of our App. Scroll to the LCP chart, click the chart menu icon, and click Create Detector.
<a href=#R-image-e4b9ff46f61fc73106b4aade592670bd class=lightbox-link><img alt="RUM LCP chart with action menu flyout" class="lazy lightbox figure-image" loading=lazy src=../_img/rum-lcp.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e4b9ff46f61fc73106b4aade592670bd><img alt="RUM LCP chart with action menu flyout" class="lazy lightbox lightbox-image" loading=lazy src=../_img/rum-lcp.png></a></p></li><li><p>Rename the detector to include your <strong>team name</strong> and <strong>initials</strong>, and change the scope of the detector to App so we are not limited to a single URL or page. Change the threshold and sensitivity until there is at least one alert event in the time frame.
<a href=#R-image-121e0e528e0bd41e039483bb18cfe3a7 class=lightbox-link><img alt="RUM alert details" class="lazy lightbox figure-image" loading=lazy src=../_img/rum-detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-121e0e528e0bd41e039483bb18cfe3a7><img alt="RUM alert details" class="lazy lightbox lightbox-image" loading=lazy src=../_img/rum-detector.png></a></p></li><li><p>Change the alert severity and add a recipient if you&rsquo;d like, and click <span class="btn cstyle button blue noicon"><span><span class=title>Activate</span></span></span> to save the Detector.</p></li></ol><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>Now, your workshop instructor will change something on the website. How do you find out about the issue, and how do you investigate it?</p></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Wait a few minutes, and take a look at the online store homepage in your browser. How is the experience in an incognito browser window? How is it different when you refresh the page?</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=chart-detectors>Chart Detectors</h1><p>With our custom dashboard charts, we can create detectors focussed directly on the data and conditions we care about. In building our charts, we also built signals that can trigger alerts.</p><h2 id=static-detectors>Static detectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For many KPIs, we have a static value in mind as a threshold.</p><ol><li><p>In your custom End User Experience dashboard, go to the &ldquo;LCP - all tests&rdquo; chart.</p></li><li><p>Click the bell icon on the top right of the chart, and select &ldquo;New detector from chart&rdquo;
<a href=#R-image-1dbd10f5012c6d19c908895e4006a622 class=lightbox-link><img alt="new detector from chart" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/2e7a0adf-f4f7-4183-b7e9-08bbe7350232/ascreenshot.jpeg?tl_px=1160,297&br_px=2880,1258&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=886,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1dbd10f5012c6d19c908895e4006a622><img alt="new detector from chart" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/2e7a0adf-f4f7-4183-b7e9-08bbe7350232/ascreenshot.jpeg?tl_px=1160,297&br_px=2880,1258&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=886,277"></a></p></li><li><p>Change the detector name to include your <strong>team name</strong> and <strong>initials</strong>, and adjust the alert details. Change the threshold to 2500 or 4000 and see how the alert noise preview changes.
<a href=#R-image-5e97339661f1177a99435baf6e8a8ce4 class=lightbox-link><img alt="alert details" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/4a6f44da-2559-49bf-8c5a-a58220c6e64d/ascreenshot.jpeg?tl_px=0,152&br_px=1719,1113&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=444,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5e97339661f1177a99435baf6e8a8ce4><img alt="alert details" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/4a6f44da-2559-49bf-8c5a-a58220c6e64d/ascreenshot.jpeg?tl_px=0,152&br_px=1719,1113&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=444,277"></a></p></li><li><p>Change the severity, and add yourself as a recipient before you save this detector. Click <span class="btn cstyle button blue noicon"><span><span class=title>Activate</span></span></span>.
<a href=#R-image-f4adcba0e78cc32379afc7fc1917ea6a class=lightbox-link><img alt="activate the detector" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/1c2a7f23-c076-45e8-80b0-3a99e3989048/user_cropped_screenshot.jpeg?tl_px=0,652&br_px=1719,1614&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=216,453" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f4adcba0e78cc32379afc7fc1917ea6a><img alt="activate the detector" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/1c2a7f23-c076-45e8-80b0-3a99e3989048/user_cropped_screenshot.jpeg?tl_px=0,652&br_px=1719,1614&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=216,453"></a></p></li></ol><h2 id=advanced-dynamic-detectors>Advanced: Dynamic detectors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Sometimes we have metrics that vary naturally, so we want to create a more dynamic detector that isn&rsquo;t limited by the static threshold we decide in the moment.</p><ol><li><p>To create dynamic detectors on your chart, click the link to the &ldquo;old&rdquo; detector wizard.
<a href=#R-image-6e511dd5f5829a064236ebb341493b89 class=lightbox-link><img alt="click the link to open this detector in the old editor" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/877e9402-3634-4b44-8585-fe27331674c6/user_cropped_screenshot.jpeg?tl_px=901,0&br_px=2621,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,109" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6e511dd5f5829a064236ebb341493b89><img alt="click the link to open this detector in the old editor" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/877e9402-3634-4b44-8585-fe27331674c6/user_cropped_screenshot.jpeg?tl_px=901,0&br_px=2621,961&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,109"></a></p></li><li><p>Change the detector name to include your <strong>team name</strong> and <strong>initials</strong>, and Click <span class="btn cstyle button blue noicon"><span><span class=title>Create alert rule</span></span></span>
<a href=#R-image-c3a41a724a8a0df15a39a7df7e6bce52 class=lightbox-link><img alt="name and create alert rule" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/fa9714b1-1fa0-47c4-9361-5753c0c5d4b4/ascreenshot.jpeg?tl_px=978,191&br_px=2698,1152&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c3a41a724a8a0df15a39a7df7e6bce52><img alt="name and create alert rule" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/fa9714b1-1fa0-47c4-9361-5753c0c5d4b4/ascreenshot.jpeg?tl_px=978,191&br_px=2698,1152&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277"></a></p></li><li><p>Confirm the signal looks correct and proceed to Alert condition.
<a href=#R-image-432c26ef543e7753e769f6b2447401ee class=lightbox-link><img alt="alert signal details" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/d8dc6a69-f559-4399-b71d-583555266e35/ascreenshot.jpeg?tl_px=0,630&br_px=1719,1591&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=246,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-432c26ef543e7753e769f6b2447401ee><img alt="alert signal details" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/d8dc6a69-f559-4399-b71d-583555266e35/ascreenshot.jpeg?tl_px=0,630&br_px=1719,1591&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=246,277"></a></p></li><li><p>Select the &ldquo;Sudden Change&rdquo; condition and proceed to Alert settings
<a href=#R-image-1c890b18d7ce4e82402198605e760aed class=lightbox-link><img alt="list of dynamic conditions" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/3a4e5b88-befc-4af8-8736-5f4a5529d0aa/ascreenshot.jpeg?tl_px=0,838&br_px=1719,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=486,340" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1c890b18d7ce4e82402198605e760aed><img alt="list of dynamic conditions" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/3a4e5b88-befc-4af8-8736-5f4a5529d0aa/ascreenshot.jpeg?tl_px=0,838&br_px=1719,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=486,340"></a></p></li><li><p>Play with the settings and see how the estimated alert noise is previewed in the chart above. Tune the settings, and change the advanced settings if you&rsquo;d like, before proceeding to the Alert message.
<a href=#R-image-eef5c44072aaeea1960dbd26d9008566 class=lightbox-link><img alt="alert noise marked on chart based on settings" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/8a01627f-2287-494e-a2a3-20ff1592b641/ascreenshot.jpeg?tl_px=381,782&br_px=2101,1743&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eef5c44072aaeea1960dbd26d9008566><img alt="alert noise marked on chart based on settings" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/8a01627f-2287-494e-a2a3-20ff1592b641/ascreenshot.jpeg?tl_px=381,782&br_px=2101,1743&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,277"></a></p></li><li><p>Customize the severity, runbook URL, any tips, and message payload before proceeding to add recipients.
<a href=#R-image-e00fc79f2580914b7535544e1c70a05e class=lightbox-link><img alt="alert message options" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/0af4f210-2202-4daf-9754-c8719867b388/ascreenshot.jpeg?tl_px=94,838&br_px=1813,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,485" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e00fc79f2580914b7535544e1c70a05e><img alt="alert message options" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/0af4f210-2202-4daf-9754-c8719867b388/ascreenshot.jpeg?tl_px=94,838&br_px=1813,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,485"></a></p></li><li><p>For the sake of this workshop, only add your own email address as recipient. This is where you would add other options like webhooks, ticketing systems, and Slack channels if it&rsquo;s in your real environment.
<a href=#R-image-17adf18b43963fd071aaee7a534abfe3 class=lightbox-link><img alt="recipient options" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/006bf87f-d5cb-4b17-9658-4f381aff9c9e/ascreenshot.jpeg?tl_px=87,838&br_px=1807,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,457" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-17adf18b43963fd071aaee7a534abfe3><img alt="recipient options" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/006bf87f-d5cb-4b17-9658-4f381aff9c9e/ascreenshot.jpeg?tl_px=87,838&br_px=1807,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,457"></a></p></li><li><p>Finally, confirm the detector name before clicking <span class="btn cstyle button blue noicon"><span><span class=title>Activate Alert Rule</span></span></span>
<a href=#R-image-fb37b34f00fbf33338d8d0394008d024 class=lightbox-link><img alt="activate alert rule button" class="lazy lightbox figure-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/146b3a5c-3c08-4fe8-a3fb-af44176963ca/ascreenshot.jpeg?tl_px=1160,838&br_px=2880,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=890,468" style=height:auto;width:1120></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fb37b34f00fbf33338d8d0394008d024><img alt="activate alert rule button" class="lazy lightbox lightbox-image" loading=lazy src="https://ajeuwbhvhr.cloudimg.io/colony-recorder.s3.amazonaws.com/files/2024-02-17/146b3a5c-3c08-4fe8-a3fb-af44176963ca/ascreenshot.jpeg?tl_px=1160,838&br_px=2880,1799&force_format=png&width=1120.0&wat=1&wat_opacity=0.7&wat_gravity=northwest&wat_url=https://colony-recorder.s3.us-west-1.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=890,468"></a></p></li></ol><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=summary>Summary</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>2 minutes</span>
</span>&nbsp;<p>In this workshop, we learned the following:</p><ul><li>How to create simple synthetic tests so that we can quickly begin to understand the availability and performance of our application</li><li>How to understand what RUM shows us about the end user experience, including specific user sessions</li><li>How to write advanced synthetic browser tests to proactively test our most important user actions</li><li>How to visualize our frontend performance data in context with events on dashboards</li><li>How to set up detectors so we don&rsquo;t have to wait to hear about issues from our end users</li><li>How all of the above, plus Splunk and Google&rsquo;s resources, helps us optimize end user experience</li></ul><p>There is a lot more we can do with front end performance monitoring. If you have extra time, be sure to play with the charts, detectors, and do some more synthetic testing. Remember our resources such as <a href=https://lantern.splunk.com/Observability/UCE/Optimized_experiences rel=external>Lantern</a>, <a href=https://docs.splunk.com/observability/en/rum/intro-to-rum.html rel=external>Splunk Docs</a>, and <a href=https://docs.splunk.com/observability/en/rum/sample-app.html rel=external>experiment with apps for Mobile RUM</a>.</p><p>This is just the beginning! If you need more time to trial Splunk Observability, or have any other questions, <a href=https://www.splunk.com/en_us/about-splunk/contact-us.html rel=external>reach out to a Splunk Expert</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=thousandeyes-integration-with-splunk-observability-cloud>ThousandEyes Integration with Splunk Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>90 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Alec Chamberlain</span></span><p>This workshop demonstrates integrating <strong>ThousandEyes with Splunk Observability Cloud</strong> to provide unified visibility across your synthetic monitoring and observability data.</p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By the end of this workshop, you will:</p><ul><li>Deploy a ThousandEyes Enterprise Agent as a containerized workload in Kubernetes</li><li>Integrate ThousandEyes metrics with Splunk Observability Cloud using OpenTelemetry</li><li>Create synthetic tests for internal Kubernetes services and external dependencies</li><li>Monitor test results in Splunk Observability Cloud dashboards</li><li>Correlate synthetic test data with APM traces and infrastructure metrics</li></ul><h2 id=sections>Sections<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/1-overview/index.html>Overview</a> - Understand ThousandEyes agent types and architecture</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/2-deployment/index.html>Deployment</a> - Deploy the Enterprise Agent in Kubernetes</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/3-splunk-integration/index.html>Splunk Integration</a> - Connect ThousandEyes to Splunk Observability Cloud</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html>Kubernetes Testing</a> - Monitor internal services and replicate AppDynamics test recommendations</li><li><a href=/observability-workshop/en/scenarios/thousandeyes-integration/5-troubleshooting/index.html>Troubleshooting</a> - Common issues and solutions</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>This integration enables you to correlate synthetic test results with real user monitoring (RUM), APM traces, and infrastructure metrics for comprehensive root cause analysis.</p></div></details><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>A Kubernetes cluster (v1.16+)</li><li>RBAC permissions to deploy resources in your chosen namespace</li><li>A ThousandEyes account with access to Enterprise Agent tokens</li><li>A Splunk Observability Cloud account with ingest token access</li></ul><h2 id=benefits-of-integration>Benefits of Integration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By connecting ThousandEyes to Splunk Observability Cloud, you gain:</p><ul><li>üîó <strong>Unified visibility</strong>: Correlate synthetic test results with RUM, APM traces, and infrastructure metrics</li><li>üìä <strong>Enhanced dashboards</strong>: Visualize ThousandEyes data alongside your existing Splunk observability metrics</li><li>üö® <strong>Centralized alerting</strong>: Configure alerts based on ThousandEyes test results within Splunk</li><li>üîç <strong>Root cause analysis</strong>: Quickly identify if issues are network-related (ThousandEyes) or application-related (APM)</li><li>üìà <strong>Comprehensive analytics</strong>: Analyze synthetic monitoring trends with Splunk&rsquo;s powerful analytics engine</li></ul><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-e3d29c32e4f58d165f5e4149341fed27><div class=card-content><div class=card-title id=R-card-e3d29c32e4f58d165f5e4149341fed27><a href=/observability-workshop/en/scenarios/thousandeyes-integration/1-overview/index.html><ol><li>Overview</li></ol><pre><code>    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div class=&quot;card-content-text&quot;&gt;
      ThousandEyes Agent Types Enterprise Agents Enterprise Agents are software-based monitoring agents that you deploy within your own infrastructure. They provide:
</code></pre><p>Inside-out visibility: Monitor and test from your internal network to external services Customizable placement: Deploy where your users and applications are Full test capabilities: HTTP, network, DNS, voice, and other test types Persistent monitoring: Continuously running agents that execute scheduled tests In this workshop, we‚Äôre deploying an Enterprise Agent as a containerized workload inside a Kubernetes cluster.</div></div></p></article></li><li><article class="card card-popout" aria-labelledby=R-card-e369b4344aae3ae633bff024f4df4604><div class=card-content><div class=card-title id=R-card-e369b4344aae3ae633bff024f4df4604><a href=/observability-workshop/en/scenarios/thousandeyes-integration/2-deployment/index.html><ol start=2><li>Deployment</li></ol><pre><code>    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div class=&quot;card-content-text&quot;&gt;
      &lt;p&gt;This section guides you through deploying the ThousandEyes Enterprise Agent in your Kubernetes cluster.
</code></pre><p>Components The deployment consists of two files:</p></p><ol><li>Secrets File (credentialsSecret.yaml) Contains your ThousandEyes agent token (base64 encoded). This secret is referenced by the deployment to authenticate the agent with ThousandEyes Cloud.</li></ol></div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-1a36215aa50292792c52dfc2c35d631b><div class=card-content><div class=card-title id=R-card-1a36215aa50292792c52dfc2c35d631b><a href=/observability-workshop/en/scenarios/thousandeyes-integration/3-splunk-integration/index.html><ol start=3><li>Splunk Integration</li></ol><pre><code>    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div class=&quot;card-content-text&quot;&gt;
      About Splunk Observability Cloud Splunk Observability Cloud is a real-time observability platform purpose-built for monitoring metrics, traces, and logs at scale. It ingests OpenTelemetry data and provides advanced dashboards and analytics to help teams detect and resolve performance issues quickly. This section explains how to integrate ThousandEyes data with Splunk Observability Cloud using OpenTelemetry.
</code></pre><p>Step 1: Create a Splunk Observability Cloud Access Token To send data to Splunk Observability Cloud, you need an access token. Follow these steps:</div></div></p></article></li><li><article class="card card-popout" aria-labelledby=R-card-8f8010e598196fbbcd28ccd5325a75d4><div class=card-content><div class=card-title id=R-card-8f8010e598196fbbcd28ccd5325a75d4><a href=/observability-workshop/en/scenarios/thousandeyes-integration/4-kubernetes-testing/index.html><ol start=4><li>Kubernetes Testing</li></ol><pre><code>    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div class=&quot;card-content-text&quot;&gt;
      Replicating AppDynamics Test Recommendations AppDynamics offers a feature called ‚ÄúTest Recommendations‚Äù that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloud‚Äôs unified view.
</code></pre><p>Since the ThousandEyes Enterprise Agent runs inside the cluster, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally.</div></div></p></article></li><li><article class="card card-popout" aria-labelledby=R-card-63543508c134aae453e8628a7c234124><div class=card-content><div class=card-title id=R-card-63543508c134aae453e8628a7c234124><a href=/observability-workshop/en/scenarios/thousandeyes-integration/5-troubleshooting/index.html><ol start=5><li>Troubleshooting</li></ol><pre><code>    &lt;/a&gt;
  &lt;/div&gt;
  &lt;div class=&quot;card-content-text&quot;&gt;
      &lt;p&gt;This section covers common issues you may encounter when deploying and using the ThousandEyes Enterprise Agent in Kubernetes.
</code></pre><p>Test Failing with DNS Resolution Error If your tests are failing with DNS resolution errors, verify DNS from within the ThousandEyes pod:</p></p><h1 id=verify-dns-resolution-from-within-the-pod-kubectl-exec--n-te-demo--it---nslookup-api-gatewayproductionsvcclusterlocal--check-coredns-logs-kubectl-logs--n-kube-system--l-k8s-appkube-dns-common-causes>Verify DNS resolution from within the pod kubectl exec -n te-demo -it <pod-name>&ndash; nslookup api-gateway.production.svc.cluster.local # Check CoreDNS logs kubectl logs -n kube-system -l k8s-app=kube-dns Common causes:<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1></div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of ThousandEyes Integration</h1><article class=default><header class=headline></header><h1 id=overview>Overview</h1><h2 id=thousandeyes-agent-types>ThousandEyes Agent Types<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=enterprise-agents>Enterprise Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Enterprise Agents are software-based monitoring agents that you deploy within your own infrastructure. They provide:</p><ul><li><strong>Inside-out visibility</strong>: Monitor and test from your internal network to external services</li><li><strong>Customizable placement</strong>: Deploy where your users and applications are</li><li><strong>Full test capabilities</strong>: HTTP, network, DNS, voice, and other test types</li><li><strong>Persistent monitoring</strong>: Continuously running agents that execute scheduled tests</li></ul><p>In this workshop, we&rsquo;re deploying an Enterprise Agent as a containerized workload inside a Kubernetes cluster.</p><h3 id=endpoint-agents>Endpoint Agents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Endpoint Agents are lightweight agents installed on end-user devices (laptops, desktops) that provide:</p><ul><li><strong>Real user perspective</strong>: Monitor from actual user endpoints</li><li><strong>Browser-based monitoring</strong>: Capture real user experience metrics</li><li><strong>Session data</strong>: Detailed insights into application performance from the user&rsquo;s viewpoint</li></ul><p>This workshop focuses on <strong>Enterprise Agent</strong> deployment only.</p><h2 id=architecture>Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><pre class="mermaid actionbar-wrapper align-center">graph LR
    subgraph k8s[&#34;Kubernetes Cluster&#34;]
        secret[&#34;Secret&lt;br/&gt;te-creds&#34;]
        agent[&#34;ThousandEyes&lt;br/&gt;Enterprise Agent&lt;br/&gt;Pod&#34;]
        
        subgraph apps[&#34;Application Pods&#34;]
            api[&#34;API Gateway&lt;br/&gt;Pod&#34;]
            payment[&#34;Payment Service&lt;br/&gt;Pod&#34;]
            auth[&#34;Auth Service&lt;br/&gt;Pod&#34;]
        end
        
        subgraph svcs[&#34;Services&#34;]
            api_svc[&#34;api-gateway&lt;br/&gt;Service&#34;]
            payment_svc[&#34;payment-svc&lt;br/&gt;Service&#34;]
            auth_svc[&#34;auth-service&lt;br/&gt;Service&#34;]
        end
        
        api_svc --&gt; api
        payment_svc --&gt; payment
        auth_svc --&gt; auth
        
        secret -.-&gt; agent
        agent --&gt;|&#34;HTTP Tests&#34;| api_svc
        agent --&gt;|&#34;HTTP Tests&#34;| payment_svc
        agent --&gt;|&#34;HTTP Tests&#34;| auth_svc
    end
    
    external[&#34;External&lt;br/&gt;Services&#34;]
    
    agent --&gt; external
    
    subgraph te[&#34;ThousandEyes Platform&#34;]
        te_cloud[&#34;ThousandEyes&lt;br/&gt;Cloud&#34;]
        te_api[&#34;API&lt;br/&gt;v7/stream&#34;]
        te_cloud &lt;--&gt; te_api
    end
    
    agent --&gt;|&#34;Test Results&#34;| te_cloud
    
    subgraph splunk[&#34;Splunk Observability Cloud&#34;]
        otel[&#34;OpenTelemetry&lt;br/&gt;Collector&#34;]
        metrics[&#34;Metrics&#34;]
        dashboards[&#34;Dashboards&#34;]
        apm[&#34;APM/RUM&#34;]
        alerts[&#34;Alerts&#34;]
        
        otel --&gt; metrics
        otel --&gt; dashboards
        metrics --&gt; apm
        dashboards --&gt; alerts
    end
    
    te_cloud --&gt;|&#34;OTel/HTTP&#34;| otel
    
    user[&#34;DevOps/SRE&lt;br/&gt;Team&#34;]
    user -.-&gt; te_cloud
    user -.-&gt; dashboards
    user -.-&gt; agent
    
    style k8s fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    style apps fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style svcs fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style agent fill:#ffeb3b,stroke:#f57c00,stroke-width:2px
    style secret fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style api fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style payment fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style auth fill:#e1bee7,stroke:#7b1fa2,stroke-width:1px
    style api_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style payment_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style auth_svc fill:#ce93d8,stroke:#7b1fa2,stroke-width:1px
    style external fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style te fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style te_cloud fill:#ffecb3,stroke:#f57f17,stroke-width:2px
    style te_api fill:#ffe082,stroke:#f57f17,stroke-width:2px
    style splunk fill:#ff6e40,stroke:#d84315,stroke-width:2px
    style otel fill:#ff8a65,stroke:#d84315,stroke-width:2px
    style metrics fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style dashboards fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style apm fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style alerts fill:#ffccbc,stroke:#d84315,stroke-width:1px
    style user fill:#b2dfdb,stroke:#00695c,stroke-width:2px</pre><h2 id=architecture-components>Architecture Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-kubernetes-cluster>1. Kubernetes Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>Secret (te-creds)</strong>: Stores the base64-encoded <code>TEAGENT_ACCOUNT_TOKEN</code> for authentication</li><li><strong>ThousandEyes Enterprise Agent Pod</strong>:<ul><li>Container image: <code>thousandeyes/enterprise-agent:latest</code></li><li>Hostname: <code>te-agent-aleccham</code> (customizable)</li><li>Security capabilities: <code>NET_ADMIN</code>, <code>SYS_ADMIN</code> (required for network testing)</li><li>Memory allocation: 2GB request, 3.5GB limit</li><li>Network mode: IPv4 only (configured via <code>TEAGENT_INET: "4"</code> environment variable)</li><li>Image pull policy: <code>Always</code> (ensures latest image is pulled)</li><li>Init command: <code>/sbin/my_init</code> (required for proper agent initialization)</li></ul></li><li><strong>Internal Services</strong>: Kubernetes workloads including REST APIs, microservices, databases, and gRPC services</li></ul><h3 id=2-test-targets>2. Test Targets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>Internal Services</strong>: Monitor services within the Kubernetes cluster</li><li><strong>External Services</strong>: Test external dependencies such as:<ul><li>Payment gateways (Stripe, PayPal)</li><li>Third-party APIs</li><li>SaaS applications</li><li>CDN endpoints</li><li>Public websites</li></ul></li></ul><h3 id=3-thousandeyes-platform>3. ThousandEyes Platform<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>ThousandEyes Cloud</strong>: Central platform for:<ul><li>Agent registration and management</li><li>Test configuration and scheduling</li><li>Metrics collection and aggregation</li><li>Built-in alerting engine</li></ul></li><li><strong>ThousandEyes API</strong>: RESTful API (v7/stream endpoint) for programmatic access</li></ul><h3 id=4-test-types--metrics>4. Test Types & Metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The Enterprise Agent performs:</p><ul><li><strong>HTTP/HTTPS tests</strong>: Web page availability, response times, status codes</li><li><strong>DNS tests</strong>: Resolution time, record validation</li><li><strong>Network layer tests</strong>: Latency, packet loss, path visualization</li><li><strong>Voice/RTP tests</strong>: Quality metrics for voice traffic</li></ul><p>Metrics collected include:</p><ul><li>HTTP server availability (%)</li><li>Throughput (bytes/s)</li><li>Request duration (seconds)</li><li>Page load completion (%)</li><li>Error codes and failure reasons</li></ul><h3 id=5-splunk-observability-cloud-integration>5. Splunk Observability Cloud Integration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>OpenTelemetry Collector</strong>:<ul><li>Endpoint: <code>https://ingest.{realm}.signalfx.com/v2/datapoint/otlp</code></li><li>Protocol: HTTP or gRPC</li><li>Format: Protobuf</li><li>Authentication: <code>X-SF-Token</code> header</li><li>Signal type: Metrics (OpenTelemetry v2)</li></ul></li><li><strong>Observability Features</strong>:<ul><li><strong>Metrics</strong>: Real-time visualization of ThousandEyes data</li><li><strong>Dashboards</strong>: Pre-built ThousandEyes dashboard with unified views</li><li><strong>APM/RUM Integration</strong>: Correlate synthetic tests with application traces and real user monitoring</li><li><strong>Alerting</strong>: Centralized alert management with correlation rules</li></ul></li></ul><h3 id=6-data-flow>6. Data Flow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Agent authenticates using token from Kubernetes Secret</li><li>Agent runs scheduled tests against internal and external targets</li><li>Test results sent to ThousandEyes Cloud</li><li>ThousandEyes streams metrics to Splunk via OpenTelemetry protocol</li><li>Splunk ingests, processes, and visualizes data in dashboards</li><li>DevOps/SRE teams monitor dashboards and respond to alerts</li></ol><h2 id=testing-capabilities>Testing Capabilities<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>With this deployment, you can:</p><ul><li>‚úÖ <strong>Test internal services</strong>: Monitor Kubernetes services, APIs, and microservices from within the cluster</li><li>‚úÖ <strong>Test external dependencies</strong>: Validate connectivity to payment gateways, third-party APIs, and SaaS platforms</li><li>‚úÖ <strong>Measure performance</strong>: Capture latency, availability, and performance metrics from your cluster&rsquo;s perspective</li><li>‚úÖ <strong>Troubleshoot issues</strong>: Identify whether problems originate from your infrastructure or external dependencies</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This is <strong>not an officially supported</strong> ThousandEyes agent deployment configuration. However, it has been tested and works very well in production-like environments.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=deployment>Deployment</h1><p>This section guides you through deploying the ThousandEyes Enterprise Agent in your Kubernetes cluster.</p><h2 id=components>Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The deployment consists of two files:</p><h3 id=1-secrets-file-credentialssecretyaml>1. Secrets File (<code>credentialsSecret.yaml</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Contains your ThousandEyes agent token (base64 encoded). This secret is referenced by the deployment to authenticate the agent with ThousandEyes Cloud.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TEAGENT_ACCOUNT_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>&lt;base64-encoded-token&gt;</span></span></span></code></pre></div><h3 id=2-deployment-manifest-thousandeyesdeployyaml>2. Deployment Manifest (<code>thousandEyesDeploy.yaml</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Defines the Enterprise Agent pod configuration with the following key settings:</p><ul><li><strong>Namespace</strong>: <code>te-demo</code> (customize as needed)</li><li><strong>Image</strong>: <code>thousandeyes/enterprise-agent:latest</code> from Docker Hub</li><li><strong>Hostname</strong>: <code>te-agent-aleccham</code> (appears in ThousandEyes dashboard)</li><li><strong>Capabilities</strong>: Requires <code>NET_ADMIN</code> and <code>SYS_ADMIN</code> for network testing</li><li><strong>Resources</strong>:<ul><li>Memory limit: 3584Mi</li><li>Memory request: 2000Mi</li></ul></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class=l>te-agent-aleccham</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>thousandeyes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;thousandeyes/enterprise-agent:latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>/sbin/my_init</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>capabilities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>add</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>NET_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>SYS_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_ACCOUNT_TOKEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>secretKeyRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_ACCOUNT_TOKEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>TEAGENT_INET</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>3584Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>2000Mi</span></span></span></code></pre></div><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Important Notes</summary><div class=box-content><ul><li>The agent requires elevated privileges (<code>NET_ADMIN</code>, <code>SYS_ADMIN</code>) to perform network tests</li><li>The <code>TEAGENT_INET: "4"</code> environment variable forces IPv4-only mode (required for some network configurations)</li><li>The <code>/sbin/my_init</code> command is required for proper agent initialization and service management</li><li>The <code>imagePullPolicy: Always</code> ensures you always pull the latest image version</li><li>Adjust the <code>hostname</code> field to uniquely identify your agent in the ThousandEyes dashboard</li><li>Modify the <code>namespace</code> to match your Kubernetes environment</li><li>The ThousandEyes Enterprise Agent has relatively high hardware requirements; you may need to adjust these depending on your environment</li></ul></div></details><h2 id=installation-steps>Installation Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=step-1-create-the-thousandeyes-token>Step 1: Create the ThousandEyes Token<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p>Log in to the ThousandEyes platform at <a href=https://app.thousandeyes.com/login rel=external>app.thousandeyes.com/login</a></p></li><li><p>Navigate to <strong>Cloud & Enterprise Agents > Agent Settings > Add New Enterprise Agent</strong></p></li><li><p>Copy your <strong>Account Group Token</strong></p></li><li><p>Base64 encode the token:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> -n <span class=s1>&#39;your-token-here&#39;</span> <span class=p>|</span> base64</span></span></code></pre></div></li><li><p>Save the base64-encoded output for the next step</p></li></ol><p><a href=#R-image-25b45ef3670bd4d5633780de7e0f0794 class=lightbox-link><img alt="Get ThousandEyes Token" class="lazy lightbox figure-image" loading=lazy src=../images/te1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-25b45ef3670bd4d5633780de7e0f0794><img alt="Get ThousandEyes Token" class="lazy lightbox lightbox-image" loading=lazy src=../images/te1.gif></a></p><h3 id=step-2-create-the-namespace>Step 2: Create the Namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Create the namespace (if it doesn&rsquo;t exist):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace te-demo</span></span></code></pre></div><h3 id=step-3-create-the-secret>Step 3: Create the Secret<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Create a file named <code>credentialsSecret.yaml</code> with your base64-encoded token:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-creds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TEAGENT_ACCOUNT_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>&lt;your-base64-encoded-token-here&gt;</span></span></span></code></pre></div><p>Apply the secret:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f credentialsSecret.yaml</span></span></code></pre></div><h3 id=step-4-create-the-deployment>Step 4: Create the Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Create a file named <code>thousandEyesDeploy.yaml</code> with the deployment manifest shown above (customize the hostname and namespace as needed).</p><p>Apply the deployment:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f thousandEyesDeploy.yaml</span></span></code></pre></div><h3 id=step-5-verify-the-deployment>Step 5: Verify the Deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Verify the agent is running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n te-demo</span></span></code></pre></div><p>Expected output:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>NAME                            READY   STATUS    RESTARTS   AGE
thousandeyes-xxxxxxxxxx-xxxxx   1/1     Running   0          2m</code></pre></div><p>Check the logs to ensure the agent is connecting:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -n te-demo -l <span class=nv>app</span><span class=o>=</span>thousandeyes</span></span></code></pre></div><h3 id=step-6-verify-in-thousandeyes-dashboard>Step 6: Verify in ThousandEyes Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Verify in the ThousandEyes dashboard that the agent has registered successfully:</p><p>Navigate to <strong>Cloud & Enterprise Agents > Agent Settings</strong> to see your newly registered agent.</p><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Success</summary><div class=box-content><p>Your ThousandEyes Enterprise Agent is now running in Kubernetes! Next, we&rsquo;ll integrate it with Splunk Observability Cloud.</p></div></details><h2 id=background>Background<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>ThousandEyes does not provide official Kubernetes deployment documentation. Their standard deployment method uses <code>docker run</code> commands, which makes it challenging to translate into reusable Kubernetes manifests. This guide bridges that gap by providing production-ready Kubernetes configurations.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-integration>Splunk Integration</h1><h2 id=about-splunk-observability-cloud>About Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Splunk Observability Cloud is a real-time observability platform purpose-built for monitoring metrics, traces, and logs at scale. It ingests OpenTelemetry data and provides advanced dashboards and analytics to help teams detect and resolve performance issues quickly. This section explains how to integrate ThousandEyes data with Splunk Observability Cloud using OpenTelemetry.</p><h2 id=step-1-create-a-splunk-observability-cloud-access-token>Step 1: Create a Splunk Observability Cloud Access Token<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To send data to Splunk Observability Cloud, you need an access token. Follow these steps:</p><ol><li>In the Splunk Observability Cloud platform, go to <strong>Settings > Access Token</strong></li><li>Click <strong>Create Token</strong></li><li>Enter a <strong>Name</strong></li><li>Select <strong>Ingest</strong> scope</li><li>Select <strong>Create</strong> to generate your access token</li><li>Copy the access token and store it securely</li></ol><p>You need the access token to send telemetry data to Splunk Observability Cloud.</p><h2 id=step-2-create-an-integration>Step 2: Create an Integration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=using-the-thousandeyes-ui>Using the ThousandEyes UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>To integrate Splunk Observability Cloud with ThousandEyes:</p><ol><li><p>Log in to your account on the ThousandEyes platform and go to <strong>Manage > Integration > Integration 1.0</strong></p></li><li><p>Click <strong>New Integration</strong> and select <strong>OpenTelemetry Integration</strong></p><p><a href=#R-image-f5d072e2e6afbdf48503013b4c1e1205 class=lightbox-link><img alt="ThousandEyes Integration Setup" class="lazy lightbox figure-image" loading=lazy src=../images/te1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5d072e2e6afbdf48503013b4c1e1205><img alt="ThousandEyes Integration Setup" class="lazy lightbox lightbox-image" loading=lazy src=../images/te1.gif></a></p></li><li><p>Enter a <strong>Name</strong> for the integration</p></li><li><p>Set the <strong>Target</strong> to <strong>HTTP</strong></p></li><li><p>Enter the <strong>Endpoint URL</strong>: <code>https://ingest.{REALM}.signalfx.com/v2/datapoint/otlp</code></p><ul><li>Replace <code>{REALM}</code> with your Splunk environment (e.g., <code>us1</code>, <code>eu0</code>)</li></ul></li><li><p>For <strong>Preset Configuration</strong>, select <strong>Splunk Observability Cloud</strong></p></li><li><p>For <strong>Auth Type</strong>, select <strong>Custom</strong></p></li><li><p>Add the following <strong>Custom Headers</strong>:</p><ul><li><code>X-SF-Token: {TOKEN}</code> (Enter your Splunk Observability Cloud access token created in Step 1)</li><li><code>Content-Type: application/x-protobuf</code></li></ul></li><li><p>For <strong>OpenTelemetry Signal</strong>, select <strong>Metric</strong></p></li><li><p>For <strong>Data Model Version</strong>, select <strong>v2</strong></p></li><li><p>Select a test</p></li><li><p>Click <strong>Save</strong> to complete the integration setup</p></li></ol><p><a href=#R-image-5a4394774585f75eb18f4c8aad93d6dd class=lightbox-link><img alt="Integration Complete" class="lazy lightbox figure-image" loading=lazy src=../images/te2.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5a4394774585f75eb18f4c8aad93d6dd><img alt="Integration Complete" class="lazy lightbox lightbox-image" loading=lazy src=../images/te2.gif></a></p><p>You have now successfully integrated your ThousandEyes data with Splunk Observability Cloud.</p><h3 id=using-the-thousandeyes-api>Using the ThousandEyes API<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For a programmatic integration, use the following API commands:</p><h4 id=http-protocol>HTTP Protocol<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -v -XPOST https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;type&#34;: &#34;opentelemetry&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testMatch&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;id&#34;: &#34;281474976717575&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;domain&#34;: &#34;cea&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;endpointType&#34;: &#34;http&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;streamEndpointUrl&#34;: &#34;https://ingest.{REALM}.signalfx.com:443/v2/datapoint/otlp&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;customHeaders&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;X-SF-Token&#34;: &#34;{TOKEN}&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;Content-Type&#34;: &#34;application/x-protobuf&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h4 id=grpc-protocol>gRPC Protocol<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -v -XPOST https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;type&#34;: &#34;opentelemetry&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testMatch&#34;: [{
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;id&#34;: &#34;281474976717575&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;domain&#34;: &#34;cea&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;endpointType&#34;: &#34;grpc&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;streamEndpointUrl&#34;: &#34;https://ingest.{REALM}.signalfx.com:443&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;customHeaders&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;X-SF-Token&#34;: &#34;{TOKEN}&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;Content-Type&#34;: &#34;application/x-protobuf&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><p>Replace <code>streamEndpointUrl</code> and <code>X-SF-Token</code> values with the correct values for your Splunk Observability Cloud instance.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Make sure to replace <code>{REALM}</code> with your Splunk environment realm (e.g., <code>us1</code>, <code>us2</code>, <code>eu0</code>) and <code>{TOKEN}</code> with your actual Splunk access token.</p></div></details><h2 id=step-3-thousandeyes-dashboard-in-splunk-observability-cloud>Step 3: ThousandEyes Dashboard in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once the integration is set up, you can view real-time monitoring data in the ThousandEyes Network Monitoring Dashboard within Splunk Observability Cloud. The dashboard includes:</p><ul><li><strong>HTTP Server Availability (%)</strong>: Displays the availability of monitored HTTP servers</li><li><strong>HTTP Throughput (bytes/s)</strong>: Shows the data transfer rate over time</li><li><strong>Client Request Duration (seconds)</strong>: Measures the latency of client requests</li><li><strong>Web Page Load Completion (%)</strong>: Indicates the percentage of successful page loads</li><li><strong>Page Load Duration (seconds)</strong>: Displays the time taken to load pages</li></ul><h3 id=dashboard-template>Dashboard Template<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You can download the dashboard template from the following link: <a href="https://drive.google.com/file/d/1xpdjr5CRBC-JBM9tGsNFcVYp3C-tJC8s/view?usp=sharing" rel=external>Download ThousandEyes Splunk Observability Cloud dashboard template (Google Drive)</a>.</p><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Success</summary><div class=box-content><p>Your ThousandEyes data is now streaming to Splunk Observability Cloud! You can now correlate synthetic test results with APM traces and infrastructure metrics for comprehensive observability.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=kubernetes-service-testing>Kubernetes Service Testing</h1><h2 id=replicating-appdynamics-test-recommendations>Replicating AppDynamics Test Recommendations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>AppDynamics offers a feature called &ldquo;Test Recommendations&rdquo; that automatically suggests synthetic tests for your application endpoints. With ThousandEyes deployed inside your Kubernetes cluster, you can replicate this capability by leveraging Kubernetes service discovery combined with Splunk Observability Cloud&rsquo;s unified view.</p><p>Since the ThousandEyes Enterprise Agent runs <strong>inside the cluster</strong>, it can directly test internal Kubernetes services using their service names as hostnames. This provides a powerful way to monitor backend services that may not be exposed externally.</p><h2 id=how-it-works>How It Works<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><strong>Service Discovery</strong>: Use <code>kubectl get svc</code> to enumerate services in your cluster</li><li><strong>Hostname Construction</strong>: Build test URLs using Kubernetes DNS naming convention: <code>&lt;service-name>.&lt;namespace>.svc.cluster.local</code></li><li><strong>Test Creation</strong>: Configure ThousandEyes HTTP Server tests targeting these internal services</li><li><strong>Correlation in Splunk</strong>: View synthetic test results alongside APM traces and infrastructure metrics</li></ol><h2 id=benefits-of-in-cluster-testing>Benefits of In-Cluster Testing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><strong>Internal Service Monitoring</strong>: Test backend services not exposed to the internet</li><li><strong>Service Mesh Awareness</strong>: Monitor services behind Istio, Linkerd, or other service meshes</li><li><strong>DNS Resolution Testing</strong>: Validate Kubernetes DNS and service discovery</li><li><strong>Network Policy Validation</strong>: Ensure network policies allow proper communication</li><li><strong>Latency Baseline</strong>: Measure cluster-internal network performance</li><li><strong>Pre-Production Testing</strong>: Test services before exposing them via Ingress/LoadBalancer</li></ul><h2 id=step-by-step-guide>Step-by-Step Guide<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=1-discover-kubernetes-services>1. Discover Kubernetes Services<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>List all services in your cluster or a specific namespace:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get all services in all namespaces</span>
</span></span><span class=line><span class=cl>kubectl get svc --all-namespaces
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services in a specific namespace</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get services with detailed output including ports</span>
</span></span><span class=line><span class=cl>kubectl get svc -n production -o wide</span></span></code></pre></div><p>Example output:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>NAMESPACE    NAME           TYPE        CLUSTER-IP      PORT(S)    AGE
production   api-gateway    ClusterIP   10.96.100.50    8080/TCP   5d
production   payment-svc    ClusterIP   10.96.100.51    8080/TCP   5d
production   auth-service   ClusterIP   10.96.100.52    9000/TCP   5d
production   postgres       ClusterIP   10.96.100.53    5432/TCP   5d</code></pre></div><h3 id=2-build-test-hostnames>2. Build Test Hostnames<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Kubernetes services are accessible via DNS using the following naming pattern:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code></pre></div><p>For the services above:</p><ul><li><code>api-gateway.production.svc.cluster.local:8080</code></li><li><code>payment-svc.production.svc.cluster.local:8080</code></li><li><code>auth-service.production.svc.cluster.local:9000</code></li></ul><p><strong>Shorthand within the same namespace:</strong>
If testing services in the same namespace as the ThousandEyes agent, you can use just the service name:</p><ul><li><code>api-gateway:8080</code></li><li><code>payment-svc:8080</code></li></ul><h3 id=3-create-thousandeyes-tests-for-internal-services>3. Create ThousandEyes Tests for Internal Services<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For each service endpoint, create an HTTP Server test in ThousandEyes:</p><h4 id=via-thousandeyes-ui>Via ThousandEyes UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ol><li>Navigate to <strong>Cloud & Enterprise Agents > Test Settings</strong></li><li>Click <strong>Add New Test</strong> ‚Üí <strong>HTTP Server</strong></li><li>Configure the test:<ul><li><strong>Test Name</strong>: <code>[K8s] API Gateway Health</code></li><li><strong>URL</strong>: <code>http://api-gateway.production.svc.cluster.local:8080/health</code></li><li><strong>Interval</strong>: 2 minutes (or desired frequency)</li><li><strong>Agents</strong>: Select your Kubernetes-deployed Enterprise Agent</li><li><strong>HTTP Response Code</strong>: <code>200</code> (expected)</li></ul></li><li>Click <strong>Create Test</strong></li></ol><h4 id=via-thousandeyes-api>Via ThousandEyes API<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[K8s] API Gateway Health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;http://api-gateway.production.svc.cluster.local:8080/health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 1000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h3 id=4-configure-alerting-rules>4. Configure Alerting Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Set up alerts for common failure scenarios:</p><ul><li><strong>Availability Alert</strong>: Trigger when HTTP response is not 200</li><li><strong>Performance Alert</strong>: Trigger when response time exceeds baseline</li><li><strong>DNS Resolution Alert</strong>: Trigger when service DNS cannot be resolved</li></ul><h3 id=5-view-results-in-splunk-observability-cloud>5. View Results in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Once tests are running and integrated with Splunk:</p><ol><li><strong>Navigate to the ThousandEyes Dashboard</strong> in Splunk Observability Cloud</li><li><strong>Filter by test name</strong> (e.g., <code>[K8s]</code> prefix) to see all Kubernetes internal tests</li><li><strong>Correlate with APM data</strong>:<ul><li>View synthetic test failures alongside APM error rates</li><li>Identify if issues are network-related (ThousandEyes) or application-related (APM)</li></ul></li><li><strong>Create custom dashboards</strong> combining:<ul><li>ThousandEyes HTTP availability metrics</li><li>APM service latency and error rates</li><li>Kubernetes infrastructure metrics (CPU, memory, pod restarts)</li></ul></li></ol><h2 id=example-use-cases>Example Use Cases<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=use-case-1-microservices-health-checks>Use Case 1: Microservices Health Checks<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Test multiple microservice health endpoints:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://user-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://order-service.production.svc.cluster.local:8080/actuator/health
</span></span><span class=line><span class=cl>http://inventory-service.production.svc.cluster.local:8080/actuator/health</span></span></code></pre></div><h3 id=use-case-2-api-gateway-endpoint-testing>Use Case 2: API Gateway Endpoint Testing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Test API gateway routes:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/users
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/orders
</span></span><span class=line><span class=cl>http://api-gateway.production.svc.cluster.local:8080/api/v1/products</span></span></code></pre></div><h3 id=use-case-3-database-connection-testing>Use Case 3: Database Connection Testing<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>While ThousandEyes is primarily for HTTP testing, you can test database proxies:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test PgBouncer or database HTTP management interfaces</span>
</span></span><span class=line><span class=cl>http://pgbouncer.production.svc.cluster.local:8080/stats
</span></span><span class=line><span class=cl>http://redis-exporter.production.svc.cluster.local:9121/metrics</span></span></code></pre></div><h3 id=use-case-4-external-service-dependencies>Use Case 4: External Service Dependencies<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>One of the most valuable capabilities of the in-cluster ThousandEyes agent is monitoring your application&rsquo;s external dependencies from the same network perspective as your services. This helps identify whether issues originate from your infrastructure, network path, or the external service itself.</p><h4 id=testing-payment-gateways>Testing Payment Gateways<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Create tests for critical payment gateway endpoints to ensure availability and performance:</p><p><strong>Stripe API:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Via ThousandEyes UI</span>
</span></span><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> Stripe API Health
</span></span><span class=line><span class=cl>URL: https://api.stripe.com/healthcheck
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>200</span></span></span></code></pre></div><p><strong>PayPal API:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Test Name: <span class=o>[</span>External<span class=o>]</span> PayPal API Health
</span></span><span class=line><span class=cl>URL: https://api.paypal.com/v1/notifications/webhooks
</span></span><span class=line><span class=cl>Interval: <span class=m>2</span> minutes
</span></span><span class=line><span class=cl>Agents: Your Kubernetes Enterprise Agent
</span></span><span class=line><span class=cl>Expected Response: <span class=m>401</span> <span class=o>(</span>authentication required, but endpoint is reachable<span class=o>)</span></span></span></code></pre></div><p><strong>Via ThousandEyes API:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST https://api.thousandeyes.com/v6/tests/http-server/new <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;testName&#34;: &#34;[External] Stripe API Availability&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;url&#34;: &#34;https://api.stripe.com/healthcheck&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;interval&#34;: 120,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;agents&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      {&#34;agentId&#34;: &#34;&lt;your-k8s-agent-id&gt;&#34;}
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;httpTimeLimit&#34;: 5000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;targetResponseTime&#34;: 2000,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;alertsEnabled&#34;: 1
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span></span></span></code></pre></div><h4 id=why-monitor-external-dependencies>Why Monitor External Dependencies?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>Proactive Issue Detection</strong>: Know about payment gateway outages before your customers report them</li><li><strong>Network Path Validation</strong>: Ensure your Kubernetes egress network can reach external services</li><li><strong>Performance Baseline</strong>: Track latency from your cluster to external APIs</li><li><strong>Compliance & SLA Monitoring</strong>: Verify third-party services meet their SLA commitments</li><li><strong>Root Cause Analysis</strong>: Quickly determine if issues are network-related, your infrastructure, or the external provider</li></ul><h4 id=recommended-external-services-to-monitor>Recommended External Services to Monitor<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><strong>Payment Processors</strong>: Stripe, PayPal, Square, Braintree</li><li><strong>Authentication Providers</strong>: Auth0, Okta, Azure AD</li><li><strong>Email Services</strong>: SendGrid, Mailgun, AWS SES</li><li><strong>SMS/Communications</strong>: Twilio, MessageBird</li><li><strong>CDN Endpoints</strong>: Cloudflare, Fastly, Akamai</li><li><strong>Cloud Storage</strong>: AWS S3, Google Cloud Storage, Azure Blob Storage</li><li><strong>Third-Party APIs</strong>: Any critical business partner APIs</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1><i class="fa-fw fas fa-check"></i>
Best Practice</summary><div class=box-content><p>Use the <code>[External]</code> prefix in test names to easily distinguish between internal Kubernetes services and external dependencies in your dashboards.</p></div></details><h2 id=best-practices>Best Practices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ol><li><strong>Use Consistent Naming</strong>: Prefix test names with <code>[K8s]</code> or <code>[Internal]</code> for easy filtering</li><li><strong>Test Health Endpoints First</strong>: Start with <code>/health</code> or <code>/readiness</code> endpoints before testing business logic</li><li><strong>Set Appropriate Intervals</strong>: Use shorter intervals (1-2 minutes) for critical services</li><li><strong>Tag Tests</strong>: Use ThousandEyes labels/tags to group tests by:<ul><li>Environment (dev, staging, production)</li><li>Service type (API, database, cache)</li><li>Team ownership</li></ul></li><li><strong>Monitor Test Agent Health</strong>: Ensure the ThousandEyes agent pod is healthy and has sufficient resources</li><li><strong>Correlate with APM</strong>: Create Splunk dashboards that show both synthetic and real user metrics side-by-side</li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>By testing internal services before they&rsquo;re exposed externally, you can catch issues early and ensure your infrastructure is healthy before user traffic reaches it.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=troubleshooting>Troubleshooting</h1><p>This section covers common issues you may encounter when deploying and using the ThousandEyes Enterprise Agent in Kubernetes.</p><h2 id=test-failing-with-dns-resolution-error>Test Failing with DNS Resolution Error<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If your tests are failing with DNS resolution errors, verify DNS from within the ThousandEyes pod:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify DNS resolution from within the pod</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- nslookup api-gateway.production.svc.cluster.local
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check CoreDNS logs</span>
</span></span><span class=line><span class=cl>kubectl logs -n kube-system -l k8s-app<span class=o>=</span>kube-dns</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Service doesn&rsquo;t exist in the specified namespace</li><li>Typo in the service name or namespace</li><li>CoreDNS is not functioning properly</li></ul><h2 id=connection-refused-errors>Connection Refused Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you&rsquo;re seeing connection refused errors, check the following:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Verify service endpoints exist</span>
</span></span><span class=line><span class=cl>kubectl get endpoints -n production api-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check if pods are ready</span>
</span></span><span class=line><span class=cl>kubectl get pods -n production -l <span class=nv>app</span><span class=o>=</span>api-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Test connectivity from agent pod</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- curl -v http://api-gateway.production.svc.cluster.local:8080/health</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>No pods backing the service (endpoints are empty)</li><li>Pods are not in Ready state</li><li>Wrong port specified in the test URL</li><li>Service selector doesn&rsquo;t match pod labels</li></ul><h2 id=network-policy-blocking-traffic>Network Policy Blocking Traffic<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If network policies are blocking traffic from the ThousandEyes agent:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># List network policies</span>
</span></span><span class=line><span class=cl>kubectl get networkpolicies -n production
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Describe network policy</span>
</span></span><span class=line><span class=cl>kubectl describe networkpolicy &lt;policy-name&gt; -n production</span></span></code></pre></div><p><strong>Solution:</strong>
Create a network policy to allow traffic from the <code>te-demo</code> namespace to your services:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>NetworkPolicy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>allow-thousandeyes-agent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>podSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>api-gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>policyTypes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>from</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>namespaceSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>te-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span></span></span></code></pre></div><h2 id=agent-pod-not-starting>Agent Pod Not Starting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If the ThousandEyes agent pod is not starting, check the pod status and events:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Get pod status</span>
</span></span><span class=line><span class=cl>kubectl get pods -n te-demo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Describe pod to see events</span>
</span></span><span class=line><span class=cl>kubectl describe pod -n te-demo &lt;pod-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check logs</span>
</span></span><span class=line><span class=cl>kubectl logs -n te-demo &lt;pod-name&gt;</span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Insufficient resources (memory/CPU)</li><li>Invalid or missing TEAGENT_ACCOUNT_TOKEN secret</li><li>Security context capabilities not allowed by Pod Security Policy</li><li>Image pull errors</li></ul><p><strong>Solutions:</strong></p><ul><li>Increase memory limits if OOMKilled</li><li>Verify secret is created correctly: <code>kubectl get secret te-creds -n te-demo -o yaml</code></li><li>Check Pod Security Policy allows NET_ADMIN and SYS_ADMIN capabilities</li><li>Verify image pull: <code>kubectl describe pod -n te-demo &lt;pod-name></code></li></ul><h2 id=agent-not-appearing-in-thousandeyes-dashboard>Agent Not Appearing in ThousandEyes Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If the agent is running but not appearing in the ThousandEyes dashboard:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check agent logs for connection issues</span>
</span></span><span class=line><span class=cl>kubectl logs -n te-demo -l <span class=nv>app</span><span class=o>=</span>thousandeyes --tail<span class=o>=</span><span class=m>100</span></span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Invalid or incorrect TEAGENT_ACCOUNT_TOKEN</li><li>Network egress blocked (firewall or network policy)</li><li>Agent cannot reach ThousandEyes Cloud servers</li></ul><p><strong>Solutions:</strong></p><ol><li>Verify the token is correct and properly base64-encoded</li><li>Check if egress to <code>*.thousandeyes.com</code> is allowed</li><li>Verify the agent can reach the internet:</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n te-demo -it &lt;pod-name&gt; -- curl -v https://api.thousandeyes.com</span></span></code></pre></div><h2 id=data-not-appearing-in-splunk-observability-cloud>Data Not Appearing in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If ThousandEyes data is not appearing in Splunk:</p><p><strong>Verify integration configuration:</strong></p><ol><li>Check the OpenTelemetry integration is configured correctly in ThousandEyes</li><li>Verify the Splunk ingest endpoint URL is correct for your realm</li><li>Confirm the <code>X-SF-Token</code> header contains a valid Splunk access token</li><li>Ensure tests are assigned to the integration</li></ol><p><strong>Check test assignment:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Use ThousandEyes API to verify integration</span>
</span></span><span class=line><span class=cl>curl -v https://api.thousandeyes.com/v7/stream <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$BEARER_TOKEN</span><span class=s2>&#34;</span></span></span></code></pre></div><p><strong>Common causes:</strong></p><ul><li>Wrong Splunk realm in endpoint URL</li><li>Invalid or expired Splunk access token</li><li>Tests not assigned to the OpenTelemetry integration</li><li>Integration not enabled or saved properly</li></ul><h2 id=high-memory-usage>High Memory Usage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If the ThousandEyes agent pod is consuming excessive memory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check current memory usage</span>
</span></span><span class=line><span class=cl>kubectl top pod -n te-demo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check for OOMKilled events</span>
</span></span><span class=line><span class=cl>kubectl describe pod -n te-demo &lt;pod-name&gt; <span class=p>|</span> grep -i oom</span></span></code></pre></div><p><strong>Solutions:</strong></p><ol><li>Increase memory limits in the deployment:</li></ol><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>4096Mi </span><span class=w> </span><span class=c># Increase from 3584Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>2500Mi </span><span class=w> </span><span class=c># Increase from 2000Mi</span></span></span></code></pre></div><ol start=2><li>Reduce the number of concurrent tests assigned to the agent</li><li>Check if the agent is running unnecessary services</li></ol><h2 id=permission-denied-errors>Permission Denied Errors<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you see permission denied errors in the agent logs:</p><p><strong>Verify security context:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pod -n te-demo &lt;pod-name&gt; -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.containers[0].securityContext}&#39;</span></span></span></code></pre></div><p><strong>Solution:</strong>
Ensure the pod has the required capabilities:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>capabilities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>add</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>NET_ADMIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SYS_ADMIN</span></span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Some Kubernetes clusters with strict Pod Security Policies may not allow these capabilities. You may need to work with your cluster administrators to create an appropriate policy exception.</p></div></details><h2 id=getting-help>Getting Help<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you encounter issues not covered in this guide:</p><ol><li><strong>ThousandEyes Support</strong>: Contact ThousandEyes support at <a href=https://support.thousandeyes.com rel=external>support.thousandeyes.com</a></li><li><strong>Splunk Support</strong>: For Splunk Observability Cloud issues, visit <a href=https://www.splunk.com/en_us/support-and-services.html rel=external>Splunk Support</a></li><li><strong>Community Forums</strong>:<ul><li><a href=https://community.thousandeyes.com rel=external>ThousandEyes Community</a></li><li><a href=https://community.splunk.com rel=external>Splunk Community</a></li></ul></li></ol><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>When asking for help, always include relevant logs, pod descriptions, and error messages to help troubleshoot more effectively.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 12, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=isovalent-enterprise-platform-integration-with-splunk-observability-cloud>Isovalent Enterprise Platform Integration with Splunk Observability Cloud</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>90 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Alec Chamberlain</span></span><p>This workshop demonstrates integrating <strong>Isovalent Enterprise Platform with Splunk Observability Cloud</strong> to provide comprehensive visibility into Kubernetes networking, security, and runtime behavior using eBPF technology.</p><h2 id=what-youll-learn>What You&rsquo;ll Learn<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By the end of this workshop, you will:</p><ul><li>Deploy Amazon EKS with Cilium as the CNI in ENI mode</li><li>Configure Hubble for network observability with L7 visibility</li><li>Install Tetragon for runtime security monitoring</li><li>Integrate eBPF-based metrics with Splunk Observability Cloud using OpenTelemetry</li><li>Monitor network flows, security events, and infrastructure metrics in unified dashboards</li><li>Understand eBPF-powered observability and kube-proxy replacement</li></ul><h2 id=sections>Sections<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/1-overview/index.html>Overview</a> - Understand Cilium architecture and eBPF fundamentals</li><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/2-prerequisites/index.html>Prerequisites</a> - Required tools and access</li><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.html>EKS Setup</a> - Create EKS cluster for Cilium</li><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/4-cilium-installation/index.html>Cilium Installation</a> - Deploy Cilium, Hubble, and Tetragon</li><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/5-splunk-integration/index.html>Splunk Integration</a> - Connect metrics to Splunk Observability Cloud</li><li><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/6-verification/index.html>Verification</a> - Validate the integration</li></ul><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>This integration leverages eBPF (Extended Berkeley Packet Filter) for high-performance, low-overhead observability directly in the Linux kernel.</p></div></details><h2 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>AWS CLI configured with appropriate credentials</li><li>kubectl, eksctl, and Helm 3.x installed</li><li>An AWS account with permissions to create EKS clusters, VPCs, and EC2 instances</li><li>A Splunk Observability Cloud account with access token</li><li>Approximately 90 minutes for complete setup</li></ul><h2 id=benefits-of-integration>Benefits of Integration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>By connecting Isovalent Enterprise Platform to Splunk Observability Cloud, you gain:</p><ul><li>üîç <strong>Deep visibility</strong>: Network flows, L7 protocols (HTTP, DNS, gRPC), and runtime security events</li><li>üöÄ <strong>High performance</strong>: eBPF-based observability with minimal overhead</li><li>üîê <strong>Security insights</strong>: Process monitoring, system call tracing, and network policy enforcement</li><li>üìä <strong>Unified dashboards</strong>: Cilium, Hubble, and Tetragon metrics alongside infrastructure and APM data</li><li>‚ö° <strong>Efficient networking</strong>: Kube-proxy replacement and native VPC networking with ENI mode</li></ul><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-74b06b5bc40f9ec992a09ee8c1facf83><div class=card-content><div class=card-title id=R-card-74b06b5bc40f9ec992a09ee8c1facf83><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/1-overview/index.html>Overview</a></div><div class=card-content-text>What is Isovalent Enterprise Platform? The Isovalent Enterprise Platform consists of three core components built on eBPF (Extended Berkeley Packet Filter) technology:
Cilium Cloud Native CNI and Network Security
eBPF-based networking and security for Kubernetes Replaces kube-proxy with high-performance eBPF datapath Native support for AWS ENI mode (pods get VPC IP addresses) Network policy enforcement at L3-L7 Transparent encryption and load balancing Hubble Network Observability</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-cd34b1ac4612f6844fc09aacc1f12da1><div class=card-content><div class=card-title id=R-card-cd34b1ac4612f6844fc09aacc1f12da1><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/2-prerequisites/index.html>Prerequisites</a></div><div class=card-content-text>Required Tools Before starting this workshop, ensure you have the following tools installed:
AWS CLI # Check installation aws &ndash;version # Should output: aws-cli/2.x.x or higher kubectl # Check installation kubectl version &ndash;client # Should output: Client Version: v1.28.0 or higher eksctl # Check installation eksctl version # Should output: 0.150.0 or higher Helm # Check installation helm version # Should output: version.BuildInfo{Version:&ldquo;v3.x.x&rdquo;} AWS Requirements AWS account with permissions to create: EKS clusters VPCs and subnets EC2 instances IAM roles and policies Elastic Network Interfaces AWS CLI configured with credentials (aws configure) Splunk Observability Cloud You‚Äôll need:</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-382651f1a8be75f2c003c4f8203bd72d><div class=card-content><div class=card-title id=R-card-382651f1a8be75f2c003c4f8203bd72d><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/3-eks-setup/index.html>EKS Setup</a></div><div class=card-content-text><p>Step 1: Add Helm Repositories Add the required Helm repositories:</p><h1 id=add-isovalent-helm-repository-helm-repo-add-isovalent---add-splunk-opentelemetry-collector-helm-repository-helm-repo-add-splunk-otel-collector-chart---update-helm-repositories-helm-repo-update-step-2-create-eks-cluster-configuration-create-a-file-named-clusteryaml>Add Isovalent Helm repository helm repo add isovalent <a href=https://helm.isovalent.com rel=external>https://helm.isovalent.com</a> # Add Splunk OpenTelemetry Collector Helm repository helm repo add splunk-otel-collector-chart <a href=https://signalfx.github.io/splunk-otel-collector-chart rel=external>https://signalfx.github.io/splunk-otel-collector-chart</a> # Update Helm repositories helm repo update Step 2: Create EKS Cluster Configuration Create a file named cluster.yaml:<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1></div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-d7c2a0255ab77ca3f83db391b2ee7328><div class=card-content><div class=card-title id=R-card-d7c2a0255ab77ca3f83db391b2ee7328><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/4-cilium-installation/index.html>Cilium Installation</a></div><div class=card-content-text><p>Step 1: Configure Cilium Enterprise Create a file named cilium-enterprise-values.yaml. Replace <your-eks-api-server-endpoint>with the endpoint from the previous step (without https:// prefix):</p><h1 id=configure-unique-cluster-name--id-cluster-name-isovalent-demo-id-0--configure-eni-specifics-eni-enabled-true-updateec2adapterlimitviaapi-true-awsenableprefixdelegation-true-enableipv4masquerade-false-loadbalancer-servicetopology-true-ipam-mode-eni-routingmode-native--bpf--kubeproxyreplacement-kubeproxyreplacement-true-k8sservicehost--k8sserviceport-443--configure-tls-configuration-tls-ca-certvalidityduration-3650--10-years--enable-cilium-hubble-for-visibility-hubble-enabled-true-metrics-enableopenmetrics-true-enabled---dnslabelscontextsource_namespacedestination_namespace---droplabelscontextsource_namespacedestination_namespace---tcplabelscontextsource_namespacedestination_namespace---port-distributionlabelscontextsource_namespacedestination_namespace---icmplabelscontextsource_namespacedestination_namespace---flowsourcecontextworkload-namereserved-identity---httpv2exemplarstruelabelscontextsource_namespacedestination_namespace---policylabelscontextsource_namespacedestination_namespace-servicemonitor-enabled-true-tls-enabled-true-auto-enabled-true-method-cronjob-certvalidityduration-1095--3-years-relay-enabled-true-tls-server-enabled-true-prometheus-enabled-true-servicemonitor-enabled-true-timescape-enabled-true--enable-cilium-operator-metrics-operator-prometheus-enabled-true-servicemonitor-enabled-true--enable-cilium-agent-metrics-prometheus-enabled-true-servicemonitor-enabled-true--configure-cilium-envoy-envoy-prometheus-enabled-true-servicemonitor-enabled-true--enable-dns-proxy-ha-support-extraconfig-external-dns-proxy-true-enterprise-featuregate-approved---dnsproxyha---hubbletimescape-configuration-highlights-eni-mode-pods-get-native-vpc-ip-addresses-kube-proxy-replacement-ebpf-based-service-load-balancing-hubble-network-observability-with-l7-visibility-timescape-historical-network-flow-storage-step-2-install-cilium-enterprise-install-cilium-using-helm>Configure unique cluster name & ID cluster: name: isovalent-demo id: 0 # Configure ENI specifics eni: enabled: true updateEC2AdapterLimitViaAPI: true awsEnablePrefixDelegation: true enableIPv4Masquerade: false loadBalancer: serviceTopology: true ipam: mode: eni routingMode: native # BPF / KubeProxyReplacement kubeProxyReplacement: &ldquo;true&rdquo; k8sServiceHost: <your-eks-api-server-endpoint>k8sServicePort: 443 # Configure TLS configuration tls: ca: certValidityDuration: 3650 # 10 years # Enable Cilium Hubble for visibility hubble: enabled: true metrics: enableOpenMetrics: true enabled: - dns:labelsContext=source_namespace,destination_namespace - drop:labelsContext=source_namespace,destination_namespace - tcp:labelsContext=source_namespace,destination_namespace - port-distribution:labelsContext=source_namespace,destination_namespace - icmp:labelsContext=source_namespace,destination_namespace - flow:sourceContext=workload-name|reserved-identity - &ldquo;httpV2:exemplars=true;labelsContext=source_namespace,destination_namespace&rdquo; - &ldquo;policy:labelsContext=source_namespace,destination_namespace&rdquo; serviceMonitor: enabled: true tls: enabled: true auto: enabled: true method: cronJob certValidityDuration: 1095 # 3 years relay: enabled: true tls: server: enabled: true prometheus: enabled: true serviceMonitor: enabled: true timescape: enabled: true # Enable Cilium Operator metrics operator: prometheus: enabled: true serviceMonitor: enabled: true # Enable Cilium Agent metrics prometheus: enabled: true serviceMonitor: enabled: true # Configure Cilium Envoy envoy: prometheus: enabled: true serviceMonitor: enabled: true # Enable DNS Proxy HA support extraConfig: external-dns-proxy: &ldquo;true&rdquo; enterprise: featureGate: approved: - DNSProxyHA - HubbleTimescape Configuration Highlights ENI Mode: Pods get native VPC IP addresses Kube-Proxy Replacement: eBPF-based service load balancing Hubble: Network observability with L7 visibility Timescape: Historical network flow storage Step 2: Install Cilium Enterprise Install Cilium using Helm:<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1></div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-49c8cb6ee2a472c8d12919a37b2c8b73><div class=card-content><div class=card-title id=R-card-49c8cb6ee2a472c8d12919a37b2c8b73><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/5-splunk-integration/index.html>Splunk Integration</a></div><div class=card-content-text>Overview The Splunk OpenTelemetry Collector uses Prometheus receivers to scrape metrics from all Isovalent components. Each component exposes metrics on different ports:
Component Port Metrics Cilium Agent 9962 CNI, networking, policy Cilium Envoy 9964 L7 proxy metrics Cilium Operator 9963 Cluster operations Hubble 9965 Network flows, DNS, HTTP Tetragon 2112 Runtime security events Step 1: Create Configuration File Create a file named splunk-otel-isovalent.yaml with your Splunk credentials:</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-08bbb4e8392846240d28539c46b82fd8><div class=card-content><div class=card-title id=R-card-08bbb4e8392846240d28539c46b82fd8><a href=/observability-workshop/en/scenarios/isovalent-cilium-integration/6-verification/index.html>Verification</a></div><div class=card-content-text>Verify All Components Run this comprehensive check to ensure everything is running:
echo &ldquo;=== Cluster Nodes ===&rdquo; kubectl get nodes echo -e &ldquo;\n=== Cilium Components ===&rdquo; kubectl get pods -n kube-system -l k8s-app=cilium echo -e &ldquo;\n=== Hubble Components ===&rdquo; kubectl get pods -n kube-system | grep hubble echo -e &ldquo;\n=== Tetragon ===&rdquo; kubectl get pods -n tetragon echo -e &ldquo;\n=== Splunk OTel Collector ===&rdquo; kubectl get pods -n otel-splunk Expected Output:</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Isovalent Splunk Observability Integration</h1><article class=default><header class=headline></header><h1 id=overview>Overview</h1><h2 id=what-is-isovalent-enterprise-platform>What is Isovalent Enterprise Platform?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Isovalent Enterprise Platform consists of three core components built on eBPF (Extended Berkeley Packet Filter) technology:</p><h3 id=cilium>Cilium<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Cloud Native CNI and Network Security</strong></p><ul><li>eBPF-based networking and security for Kubernetes</li><li>Replaces kube-proxy with high-performance eBPF datapath</li><li>Native support for AWS ENI mode (pods get VPC IP addresses)</li><li>Network policy enforcement at L3-L7</li><li>Transparent encryption and load balancing</li></ul><h3 id=hubble>Hubble<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Network Observability</strong></p><ul><li>Built on top of Cilium&rsquo;s eBPF visibility</li><li>Real-time network flow monitoring</li><li>L7 protocol visibility (HTTP, DNS, gRPC, Kafka)</li><li>Flow export and historical data storage (Timescape)</li><li>Metrics exposed on port 9965</li></ul><h3 id=tetragon>Tetragon<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>Runtime Security and Observability</strong></p><ul><li>eBPF-based runtime security</li><li>Process execution monitoring</li><li>System call tracing</li><li>File access tracking</li><li>Security event metrics on port 2112</li></ul><h2 id=architecture>Architecture<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><pre class="mermaid actionbar-wrapper align-center">graph TB
    subgraph AWS[&#34;Amazon Web Services&#34;]
        subgraph EKS[&#34;EKS Cluster&#34;]
            subgraph Node[&#34;Worker Node&#34;]
                CA[&#34;Cilium Agent&lt;br/&gt;:9962&#34;]
                CE[&#34;Cilium Envoy&lt;br/&gt;:9964&#34;]
                HA[&#34;Hubble&lt;br/&gt;:9965&#34;]
                TE[&#34;Tetragon&lt;br/&gt;:2112&#34;]
                OC[&#34;OTel Collector&#34;]
            end
            CO[&#34;Cilium Operator&lt;br/&gt;:9963&#34;]
            HR[&#34;Hubble Relay&#34;]
        end
    end
    
    subgraph Splunk[&#34;Splunk Observability Cloud&#34;]
        IM[&#34;Infrastructure Monitoring&#34;]
        DB[&#34;Dashboards&#34;]
    end
    
    CA -.-&gt;|&#34;Scrape&#34;| OC
    CE -.-&gt;|&#34;Scrape&#34;| OC
    HA -.-&gt;|&#34;Scrape&#34;| OC
    TE -.-&gt;|&#34;Scrape&#34;| OC
    CO -.-&gt;|&#34;Scrape&#34;| OC
    
    OC ==&gt;|&#34;OTLP/HTTP&#34;| IM
    IM --&gt; DB</pre><h2 id=key-components>Key Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><table><thead><tr><th>Component</th><th>Service Name</th><th>Port</th><th>Purpose</th></tr></thead><tbody><tr><td>Cilium Agent</td><td>cilium-agent</td><td>9962</td><td>CNI, network policies, eBPF programs</td></tr><tr><td>Cilium Envoy</td><td>cilium-envoy</td><td>9964</td><td>L7 proxy for HTTP, gRPC</td></tr><tr><td>Cilium Operator</td><td>cilium-operator</td><td>9963</td><td>Cluster-wide operations</td></tr><tr><td>Hubble</td><td>hubble-metrics</td><td>9965</td><td>Network flow metrics</td></tr><tr><td>Tetragon</td><td>tetragon</td><td>2112</td><td>Runtime security metrics</td></tr></tbody></table><h2 id=benefits-of-ebpf>Benefits of eBPF<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><strong>High Performance</strong>: Runs in the Linux kernel with minimal overhead</li><li><strong>Safety</strong>: Verifier ensures programs are safe to run</li><li><strong>Flexibility</strong>: Dynamic instrumentation without kernel modules</li><li><strong>Visibility</strong>: Deep insights into network and system behavior</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This integration provides visibility into Kubernetes networking at a level not possible with traditional CNI plugins.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=prerequisites>Prerequisites</h1><h2 id=required-tools>Required Tools<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before starting this workshop, ensure you have the following tools installed:</p><h3 id=aws-cli>AWS CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check installation</span>
</span></span><span class=line><span class=cl>aws --version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Should output: aws-cli/2.x.x or higher</span></span></span></code></pre></div><h3 id=kubectl>kubectl<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check installation</span>
</span></span><span class=line><span class=cl>kubectl version --client
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Should output: Client Version: v1.28.0 or higher</span></span></span></code></pre></div><h3 id=eksctl>eksctl<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check installation</span>
</span></span><span class=line><span class=cl>eksctl version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Should output: 0.150.0 or higher</span></span></span></code></pre></div><h3 id=helm>Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check installation</span>
</span></span><span class=line><span class=cl>helm version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Should output: version.BuildInfo{Version:&#34;v3.x.x&#34;}</span></span></span></code></pre></div><h2 id=aws-requirements>AWS Requirements<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>AWS account with permissions to create:<ul><li>EKS clusters</li><li>VPCs and subnets</li><li>EC2 instances</li><li>IAM roles and policies</li><li>Elastic Network Interfaces</li></ul></li><li>AWS CLI configured with credentials (<code>aws configure</code>)</li></ul><h2 id=splunk-observability-cloud>Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You&rsquo;ll need:</p><ul><li>A Splunk Observability Cloud account</li><li>An <strong>Access Token</strong> with ingest permissions</li><li>Your <strong>Realm</strong> identifier (e.g., us1, us2, eu0)</li></ul><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Getting Splunk Credentials</summary><div class=box-content><p>In Splunk Observability Cloud:</p><ol><li>Navigate to <strong>Settings</strong> ‚Üí <strong>Access Tokens</strong></li><li>Create a new token with <strong>Ingest</strong> permissions</li><li>Note your realm from the URL: <code>https://app.&lt;realm>.signalfx.com</code></li></ol></div></details><h2 id=cost-considerations>Cost Considerations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=aws-costs-approximate>AWS Costs (Approximate)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>EKS Control Plane</strong>: ~$73/month</li><li><strong>EC2 Nodes (2x m5.xlarge)</strong>: ~$280/month</li><li><strong>Data Transfer</strong>: Variable</li><li><strong>EBS Volumes</strong>: ~$20/month</li></ul><p><strong>Estimated Total</strong>: ~$380-400/month for lab environment</p><h3 id=splunk-costs>Splunk Costs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Based on metrics volume (DPM - Data Points per Minute)</li><li>Free trial available for testing</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>Remember to clean up resources after completing the workshop to avoid ongoing charges.</p></div></details><h2 id=time-estimate>Time Estimate<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><strong>EKS Cluster Creation</strong>: 15-20 minutes</li><li><strong>Cilium Installation</strong>: 10-15 minutes</li><li><strong>Integration Setup</strong>: 10 minutes</li><li><strong>Total</strong>: Approximately 90 minutes</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=eks-setup>EKS Setup</h1><h2 id=step-1-add-helm-repositories>Step 1: Add Helm Repositories<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Add the required Helm repositories:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Add Isovalent Helm repository</span>
</span></span><span class=line><span class=cl>helm repo add isovalent https://helm.isovalent.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add Splunk OpenTelemetry Collector Helm repository</span>
</span></span><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update Helm repositories</span>
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><h2 id=step-2-create-eks-cluster-configuration>Step 2: Create EKS Cluster Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>cluster.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>eksctl.io/v1alpha5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterConfig</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>isovalent-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class=l>us-east-1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1.30&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>iam</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>withOIDC</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>addonsConfig</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>disableDefaultAddons</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>addons</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coredns</span></span></span></code></pre></div><p><strong>Key Configuration Details:</strong></p><ul><li><code>disableDefaultAddons: true</code> - Disables AWS VPC CNI and kube-proxy (Cilium will replace both)</li><li><code>withOIDC: true</code> - Enables IAM roles for service accounts (required for Cilium to manage ENIs)</li><li><code>coredns</code> addon is retained as it&rsquo;s needed for DNS resolution</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Why Disable Default Addons?</summary><div class=box-content><p>Cilium provides its own CNI implementation using eBPF, which is more performant than the default AWS VPC CNI. By disabling the defaults, we avoid conflicts and let Cilium handle all networking.</p></div></details><h2 id=step-3-create-the-eks-cluster>Step 3: Create the EKS Cluster<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create the cluster (this takes approximately 15-20 minutes):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>eksctl create cluster -f cluster.yaml</span></span></code></pre></div><p>Verify the cluster is created:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Update kubeconfig</span>
</span></span><span class=line><span class=cl>aws eks update-kubeconfig --name isovalent-demo --region us-east-1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check pods</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system</span></span></code></pre></div><p><strong>Expected Output:</strong></p><ul><li>CoreDNS pods will be in <code>Pending</code> state (this is normal - they&rsquo;re waiting for the CNI)</li><li>No worker nodes yet</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Note</summary><div class=box-content><p>Without a CNI plugin, pods cannot get IP addresses or network connectivity. CoreDNS will remain pending until Cilium is installed.</p></div></details><h2 id=step-4-get-kubernetes-api-server-endpoint>Step 4: Get Kubernetes API Server Endpoint<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You&rsquo;ll need this for the Cilium configuration:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws eks describe-cluster --name isovalent-demo --region us-east-1 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --query <span class=s1>&#39;cluster.endpoint&#39;</span> --output text</span></span></code></pre></div><p>Save this endpoint - you&rsquo;ll use it in the Cilium installation step.</p><h2 id=step-5-install-prometheus-crds>Step 5: Install Prometheus CRDs<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Cilium uses Prometheus ServiceMonitor CRDs for metrics:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://github.com/prometheus-operator/prometheus-operator/releases/download/v0.68.0/stripped-down-crds.yaml</span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1>Next Steps</summary><div class=box-content><p>With the EKS cluster created, you&rsquo;re ready to install Cilium, Hubble, and Tetragon.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=cilium-installation>Cilium Installation</h1><h2 id=step-1-configure-cilium-enterprise>Step 1: Configure Cilium Enterprise<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>cilium-enterprise-values.yaml</code>. Replace <code>&lt;YOUR-EKS-API-SERVER-ENDPOINT></code> with the endpoint from the previous step (without <code>https://</code> prefix):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Configure unique cluster name &amp; ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cluster</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>isovalent-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configure ENI specifics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>eni</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>updateEC2AdapterLimitViaAPI</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>awsEnablePrefixDelegation</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>enableIPv4Masquerade</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>loadBalancer</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceTopology</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>ipam</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>eni</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>routingMode</span><span class=p>:</span><span class=w> </span><span class=l>native</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># BPF / KubeProxyReplacement</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kubeProxyReplacement</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>k8sServiceHost</span><span class=p>:</span><span class=w> </span><span class=l>&lt;YOUR-EKS-API-SERVER-ENDPOINT&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>k8sServicePort</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configure TLS configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>tls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ca</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>certValidityDuration</span><span class=p>:</span><span class=w> </span><span class=m>3650</span><span class=w> </span><span class=c># 10 years</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable Cilium Hubble for visibility</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hubble</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enableOpenMetrics</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>dns:labelsContext=source_namespace,destination_namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>drop:labelsContext=source_namespace,destination_namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>tcp:labelsContext=source_namespace,destination_namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>port-distribution:labelsContext=source_namespace,destination_namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>icmp:labelsContext=source_namespace,destination_namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>flow:sourceContext=workload-name|reserved-identity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;httpV2:exemplars=true;labelsContext=source_namespace,destination_namespace&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;policy:labelsContext=source_namespace,destination_namespace&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>tls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auto</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>method</span><span class=p>:</span><span class=w> </span><span class=l>cronJob</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>certValidityDuration</span><span class=p>:</span><span class=w> </span><span class=m>1095</span><span class=w> </span><span class=c># 3 years</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>relay</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>server</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>timescape</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable Cilium Operator metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>operator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable Cilium Agent metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configure Cilium Envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>envoy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable DNS Proxy HA support</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extraConfig</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>external-dns-proxy</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>enterprise</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>featureGate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>approved</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>DNSProxyHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>HubbleTimescape</span></span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Configuration Highlights</summary><div class=box-content><ul><li><strong>ENI Mode</strong>: Pods get native VPC IP addresses</li><li><strong>Kube-Proxy Replacement</strong>: eBPF-based service load balancing</li><li><strong>Hubble</strong>: Network observability with L7 visibility</li><li><strong>Timescape</strong>: Historical network flow storage</li></ul></div></details><h2 id=step-2-install-cilium-enterprise>Step 2: Install Cilium Enterprise<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install Cilium using Helm:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install cilium isovalent/cilium --version 1.18.4 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace kube-system -f cilium-enterprise-values.yaml</span></span></code></pre></div><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Note</summary><div class=box-content><p>The installation may initially show pending jobs. This is expected - proceed to create nodes.</p></div></details><h2 id=step-3-create-node-group>Step 3: Create Node Group<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>nodegroup.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>eksctl.io/v1alpha5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterConfig</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>isovalent-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class=l>us-east-1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>managedNodeGroups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>standard</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>instanceType</span><span class=p>:</span><span class=w> </span><span class=l>m5.xlarge</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>desiredCapacity</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>privateNetworking</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><p>Create the node group (this takes 5-10 minutes):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>eksctl create nodegroup -f nodegroup.yaml</span></span></code></pre></div><h2 id=step-4-verify-cilium-installation>Step 4: Verify Cilium Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Once nodes are ready, verify all components:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check nodes</span>
</span></span><span class=line><span class=cl>kubectl get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check Cilium pods</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system -l k8s-app<span class=o>=</span>cilium
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check all Cilium components</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system <span class=p>|</span> grep -E <span class=s2>&#34;(cilium|hubble)&#34;</span></span></span></code></pre></div><p><strong>Expected Output:</strong></p><ul><li>2 nodes in <code>Ready</code> state</li><li>Cilium pods running (1 per node)</li><li>Hubble relay and timescape running</li><li>Cilium operator running</li></ul><h2 id=step-5-install-tetragon>Step 5: Install Tetragon<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install Tetragon for runtime security:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install tetragon isovalent/tetragon --version 1.18.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace tetragon --create-namespace</span></span></code></pre></div><p>Verify installation:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n tetragon</span></span></code></pre></div><p><strong>What you&rsquo;ll see:</strong> Tetragon runs as a DaemonSet (one pod per node) plus an operator.</p><h2 id=step-6-install-cilium-dns-proxy-ha>Step 6: Install Cilium DNS Proxy HA<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>cilium-dns-proxy-ha-values.yaml</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>enableCriticalPriorityClass</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceMonitor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><p>Install DNS Proxy HA:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade -i cilium-dnsproxy isovalent/cilium-dnsproxy --version 1.16.7 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n kube-system -f cilium-dns-proxy-ha-values.yaml</span></span></code></pre></div><p>Verify:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl rollout status -n kube-system ds/cilium-dnsproxy --watch</span></span></code></pre></div><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1>Success</summary><div class=box-content><p>You now have a fully functional EKS cluster with Cilium CNI, Hubble observability, and Tetragon security!</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-integration>Splunk Integration</h1><h2 id=overview>Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The Splunk OpenTelemetry Collector uses Prometheus receivers to scrape metrics from all Isovalent components. Each component exposes metrics on different ports:</p><table><thead><tr><th>Component</th><th>Port</th><th>Metrics</th></tr></thead><tbody><tr><td>Cilium Agent</td><td>9962</td><td>CNI, networking, policy</td></tr><tr><td>Cilium Envoy</td><td>9964</td><td>L7 proxy metrics</td></tr><tr><td>Cilium Operator</td><td>9963</td><td>Cluster operations</td></tr><tr><td>Hubble</td><td>9965</td><td>Network flows, DNS, HTTP</td></tr><tr><td>Tetragon</td><td>2112</td><td>Runtime security events</td></tr></tbody></table><h2 id=step-1-create-configuration-file>Step 1: Create Configuration File<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create a file named <code>splunk-otel-isovalent.yaml</code> with your Splunk credentials:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>agent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>prometheus/isovalent_cilium</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;cilium_metrics_9962&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_label_k8s_app]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=l>cilium</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_ip]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>__address__</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=l>${__meta_kubernetes_pod_ip}:9962</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;hubble_metrics_9965&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_label_k8s_app]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=l>cilium</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_ip]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>__address__</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=l>${__meta_kubernetes_pod_ip}:9965</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>prometheus/isovalent_envoy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;envoy_metrics_9964&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_label_k8s_app]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=l>cilium-envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_ip]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>__address__</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=l>${__meta_kubernetes_pod_ip}:9964</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>prometheus/isovalent_operator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;cilium_operator_metrics_9963&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_label_io_cilium_app]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=l>operator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>prometheus/isovalent_tetragon</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;tetragon_metrics_2112&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=l>/metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_label_app_kubernetes_io_name]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=l>tetragon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__meta_kubernetes_pod_ip]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>__address__</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=l>${__meta_kubernetes_pod_ip}:2112</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filter/includemetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>include</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>match_type</span><span class=p>:</span><span class=w> </span><span class=l>strict</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>metric_names</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c># Cilium metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>cilium_endpoint_state</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>cilium_bpf_map_ops_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>cilium_policy_l7_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c># Hubble metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>hubble_flows_processed_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>hubble_drop_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>hubble_dns_queries_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>hubble_http_requests_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c># Tetragon metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>tetragon_dns_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>tetragon_http_response_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>prometheus/isovalent_cilium</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>prometheus/isovalent_envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>prometheus/isovalent_operator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>prometheus/isovalent_tetragon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>hostmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>kubeletstats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>filter/includemetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>clusterName</span><span class=p>:</span><span class=w> </span><span class=l>isovalent-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>splunkObservability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>accessToken</span><span class=p>:</span><span class=w> </span><span class=l>&lt;YOUR-SPLUNK-ACCESS-TOKEN&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>realm</span><span class=p>:</span><span class=w> </span><span class=l>&lt;YOUR-SPLUNK-REALM&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cloudProvider</span><span class=p>:</span><span class=w> </span><span class=l>aws</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>distribution</span><span class=p>:</span><span class=w> </span><span class=l>eks</span></span></span></code></pre></div><p><strong>Important:</strong> Replace:</p><ul><li><code>&lt;YOUR-SPLUNK-ACCESS-TOKEN></code> with your Splunk Observability Cloud access token</li><li><code>&lt;YOUR-SPLUNK-REALM></code> with your realm (e.g., us1, us2, eu0)</li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Metric Filtering</summary><div class=box-content><p>The configuration includes a metric filter to prevent overwhelming Splunk with high-volume metrics. Only the most valuable metrics for monitoring are included.</p></div></details><h2 id=step-2-install-splunk-opentelemetry-collector>Step 2: Install Splunk OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install the collector:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm upgrade --install splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -n otel-splunk --create-namespace <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f splunk-otel-isovalent.yaml</span></span></code></pre></div><p>Wait for rollout to complete:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl rollout status daemonset/splunk-otel-collector-agent -n otel-splunk --timeout<span class=o>=</span>60s</span></span></code></pre></div><h2 id=step-3-verify-metrics-collection>Step 3: Verify Metrics Collection<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Check that the collector is scraping metrics:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -n otel-splunk -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector --tail<span class=o>=</span><span class=m>100</span> <span class=p>|</span> grep -i <span class=s2>&#34;cilium\|hubble\|tetragon&#34;</span></span></span></code></pre></div><p>You should see log entries indicating successful scraping of each component.</p><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1>Next Steps</summary><div class=box-content><p>Metrics are now flowing to Splunk Observability Cloud! Proceed to verification to check the dashboards.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=verification>Verification</h1><h2 id=verify-all-components>Verify All Components<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Run this comprehensive check to ensure everything is running:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;=== Cluster Nodes ===&#34;</span>
</span></span><span class=line><span class=cl>kubectl get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\n=== Cilium Components ===&#34;</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system -l k8s-app<span class=o>=</span>cilium
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\n=== Hubble Components ===&#34;</span>
</span></span><span class=line><span class=cl>kubectl get pods -n kube-system <span class=p>|</span> grep hubble
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\n=== Tetragon ===&#34;</span>
</span></span><span class=line><span class=cl>kubectl get pods -n tetragon
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\n=== Splunk OTel Collector ===&#34;</span>
</span></span><span class=line><span class=cl>kubectl get pods -n otel-splunk</span></span></code></pre></div><p><strong>Expected Output:</strong></p><ul><li>2 nodes in <code>Ready</code> state</li><li>Cilium pods: 2 running (one per node)</li><li>Hubble relay and timescape: running</li><li>Tetragon pods: 2 running + operator</li><li>Splunk collector pods: running</li></ul><h2 id=verify-metrics-endpoints>Verify Metrics Endpoints<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Test that metrics are accessible from each component:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test Cilium metrics</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n kube-system ds/cilium -- curl -s localhost:9962/metrics <span class=p>|</span> head -20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Test Hubble metrics</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n kube-system ds/cilium -- curl -s localhost:9965/metrics <span class=p>|</span> head -20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Test Tetragon metrics</span>
</span></span><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n tetragon ds/tetragon -- curl -s localhost:2112/metrics <span class=p>|</span> head -20</span></span></code></pre></div><p>Each command should return Prometheus-formatted metrics.</p><h2 id=verify-in-splunk-observability-cloud>Verify in Splunk Observability Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=check-infrastructure-navigator>Check Infrastructure Navigator<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Log in to your Splunk Observability Cloud account</li><li>Navigate to <strong>Infrastructure</strong> ‚Üí <strong>Kubernetes</strong></li><li>Find your cluster: <code>isovalent-demo</code></li><li>Verify the cluster is reporting metrics</li></ol><h3 id=search-for-isovalent-metrics>Search for Isovalent Metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Navigate to <strong>Metrics</strong> and search for:</p><ul><li><code>cilium_*</code> - Cilium networking metrics</li><li><code>hubble_*</code> - Network flow metrics</li><li><code>tetragon_*</code> - Runtime security metrics</li></ul><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>It may take 2-3 minutes after installation for metrics to start appearing in Splunk Observability Cloud.</p></div></details><h2 id=view-dashboards>View Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=create-custom-dashboard>Create Custom Dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li>Navigate to <strong>Dashboards</strong> ‚Üí <strong>Create</strong></li><li>Add charts for key metrics:</li></ol><p><strong>Cilium Endpoint State:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>cilium_endpoint_state{cluster=&#34;isovalent-demo&#34;}</code></pre></div><p><strong>Hubble Flow Processing:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>hubble_flows_processed_total{cluster=&#34;isovalent-demo&#34;}</code></pre></div><p><strong>Tetragon Events:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>tetragon_dns_total{cluster=&#34;isovalent-demo&#34;}</code></pre></div><h3 id=example-queries>Example Queries<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p><strong>DNS Query Rate:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>rate(hubble_dns_queries_total{cluster=&#34;isovalent-demo&#34;}[1m])</code></pre></div><p><strong>Dropped Packets:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>sum by (reason) (hubble_drop_total{cluster=&#34;isovalent-demo&#34;})</code></pre></div><p><strong>Network Policy Enforcements:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code>rate(cilium_policy_l7_total{cluster=&#34;isovalent-demo&#34;}[5m])</code></pre></div><h2 id=troubleshooting>Troubleshooting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=no-metrics-in-splunk>No Metrics in Splunk<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If you don&rsquo;t see metrics:</p><ol><li><p><strong>Check collector logs:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -n otel-splunk -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector --tail<span class=o>=</span><span class=m>200</span></span></span></code></pre></div></li><li><p><strong>Verify scrape targets:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe configmap -n otel-splunk splunk-otel-collector-otel-agent</span></span></code></pre></div></li><li><p><strong>Check network connectivity:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl <span class=nb>exec</span> -n otel-splunk -it deployment/splunk-otel-collector -- <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  curl -v https://ingest.&lt;YOUR-REALM&gt;.signalfx.com</span></span></code></pre></div></li></ol><h3 id=pods-not-running>Pods Not Running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If Cilium or Tetragon pods are not running:</p><ol><li><p><strong>Check pod status:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pod -n kube-system &lt;cilium-pod-name&gt;</span></span></code></pre></div></li><li><p><strong>View logs:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -n kube-system &lt;cilium-pod-name&gt;</span></span></code></pre></div></li><li><p><strong>Verify node readiness:</strong></p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get nodes -o wide</span></span></code></pre></div></li></ol><h2 id=cleanup>Cleanup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To remove all resources and avoid AWS charges:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Delete the OpenTelemetry Collector</span>
</span></span><span class=line><span class=cl>helm uninstall splunk-otel-collector -n otel-splunk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Delete the EKS cluster (this removes everything)</span>
</span></span><span class=line><span class=cl>eksctl delete cluster --name isovalent-demo --region us-east-1</span></span></code></pre></div><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>The cleanup process takes 10-15 minutes. Ensure all resources are deleted to avoid charges.</p></div></details><h2 id=next-steps>Next Steps<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now that your integration is working:</p><ul><li>Deploy sample applications to generate network traffic</li><li>Create network policies and monitor enforcement</li><li>Set up alerts in Splunk for dropped packets or security events</li><li>Explore Hubble&rsquo;s L7 visibility for HTTP/gRPC traffic</li><li>Use Tetragon to monitor process execution and file access</li></ul><details open class="box cstyle notices" style=--VARIABLE-BOX-color:success><summary class=box-label tabindex=-1>Success!</summary><div class=box-content><p>Congratulations! You&rsquo;ve successfully integrated Isovalent Enterprise Platform with Splunk Observability Cloud.</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 26, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=resources>Resources</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-ac038b0a14f0d06002bc6b0772f0daea><div class=card-content><div class=card-title id=R-card-ac038b0a14f0d06002bc6b0772f0daea><a href=/observability-workshop/en/resources/dimensions-properties-tags/index.html>Dimension, Properties and Tags</a></div><div class=card-content-text>One conversation that frequently comes up is Dimensions vs Properties and when you should use one verus the other.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-e635567a133763a61cb2e0057dba37af><div class=card-content><div class=card-title id=R-card-e635567a133763a61cb2e0057dba37af><a href=/observability-workshop/en/resources/otel-tagging/index.html>OpenTelemetry Tagging</a></div><div class=card-content-text>When deploying OpenTelemetry in a large organization, it‚Äôs critical to define a standardized naming convention for tagging, and a governance process to ensure the convention is adhered to.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-1c411997f2acd7d01296d8047d2f0f08><div class=card-content><div class=card-title id=R-card-1c411997f2acd7d01296d8047d2f0f08><a href=/observability-workshop/en/resources/splunk-arcade/index.html>Splunk Arcade - Play, Learn & Observe!</a></div><div class=card-content-text>SPLUNK ARCADE - Where Retro Gaming Meets Real-World Observability</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-97661823565020b57a537f88b72cf63c><div class=card-content><div class=card-title id=R-card-97661823565020b57a537f88b72cf63c><a href=/observability-workshop/en/resources/local-hosting/index.html>Local Hosting</a></div><div class=card-content-text>Resources for setting up a locally hosted workshop environment.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Resources</h1><article class=default><header class=headline></header><h1 id=dimension-properties-and-tags>Dimension, Properties and Tags</h1><h2 id=applying-context-to-your-metrics>Applying context to your metrics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>One conversation that frequently comes up is Dimensions vs Properties and when you should use one verus the other. Instead of starting off with their descriptions it makes sense to understand how we use them and how they are similar, before diving into their differences and examples of why you would use one or the other.</p><h2 id=how-are-dimensions-and-properties-similar>How are Dimensions and Properties similar?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The simplest answer is that they are both metadata <code>key:value</code> pairs that add context to our metrics. Metrics themselves are what we actually want to measure, whether it‚Äôs a standard infrastructure metric like‚Äã ‚Äã<code>cpu.utilization</code> or a custom metric like number of API calls received.</p><p>If we receive a value of 50% for th‚Äãe ‚Äã<code>cpu.utilization</code> metric without knowing where it came from or any other context it is just a number and not useful to us. We would need at least to know what host it comes from.</p><p>These days it is likely we care more about the performance or utilization of a cluster or data center as a whole then that of an individual host and therefore more interested in things like the average <code>cpu.utilization</code> across a cluster of hosts, when a‚Äã host‚Äôs <code>‚Äãcpu.utilization</code> is a outlier when compared to other hosts running the same service or maybe compare the ‚Äãaverage ‚Äã<code>cpu.utilization</code> of one environment to another.</p><p>To be able to slice, aggregate or g‚Äãroup our ‚Äã<code>cpu.utilization</code> metrics in this way we will need additional metad‚Äãata for the <code>‚Äãcpu.utilization</code> metrics we receive to include what cluster a host belongs to, what service is running on the host and what environment it is a part of. This metadata can be in the form of either dimension or property <code>key:value</code> pairs.</p><p>For example, if I go to apply a filter to a dashboard or use the Group by function when running analytics, I can use a property or a dimension.</p><h2 id=so-how-are-dimensions-and-properties-different>So how are Dimensions and Properties different?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Dimensions are sent in with metrics at the time of ingest while properties are applied to metrics or dimensions after ingest. This means that any metadata you need to make a datapoint (‚Äãa single reported value of a metric) ‚Äãunique, like what host a value of <code>cpu.utilization</code> is coming from needs to be a dimension. Metric names + dimensions uniquely define an MTS (metric time series).</p><p>Example: the <code>‚Äãcpu.utilization</code> metric sent by a particular host (‚Äãserver1) with a dimension <code>‚Äãhost:server1</code> would be considered a unique time series. If you have 10 servers, each sending that metric, then you would have 10 time series, with each time series sharing the metric name <code>‚Äãcpu.utilization</code> and uniquely identified by the dimension key-value pair (‚Äãhost:server1, host:server2&mldr;host:server10).</p><p>However, if your server names are only unique within a datacenter vs your whole environment you would need to add a 2n‚Äãd‚Äã dimension <code>dc</code> for the datacenter location. You could now have double the number of possible MTSs. cpu.utilization metrics received would now be uniquely identified by 2 sets of dimension key-value pairs.</p><p>cpu.utilization plus ‚Äãdc:east &‚Äã host:server1 would create a different time series then ‚Äãcpu.utilization plus dc:west & ‚Äãhost:server1.</p><h2 id=dimensions-are-immutable-while-properties-are-mutable>Dimensions are immutable while properties are mutable<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>As we mentioned above, Metric name + dimensions make a unique MTS. Therefore, if the dimension value changes we will have a new unique combination of metric name + dimension value and create a new MTS.</p><p>Properties on the other hand are applied to metrics (or dimensions) after they are ingested. If you apply a property to a metric, it propagates and applies to all MTS that the metric is a part of. Or if you apply a property to a dimension, say ‚Äãhost:server1 then all metrics from that host will have those properties attached. If you change the value of a property it will propagate and update the value of the property to all MTSs with that property attached. Why is this important? It means that if you care about the historical value of a property you need to make it a dimension.</p><p>Example: We are collecting custom metrics on our application. One metric is ‚Äãlatency which counts the latency of requests made to our application. We have a dimension ‚Äãcustomer, so we can sort and compare latency by customer. We decide we want to track the ‚Äãapplication version as well so we can sort and compare our application ‚Äãlatency by the version customers are using. We create a property ‚Äãversion that we attach to the customer dimension. Initially all customers are using application version 1, so ‚Äãversion:1.</p><p>We now have some customers using version 2 of our application, for those customers we update the property to ‚Äãversion:2. When we update the value of the ‚Äãversion property for those customers it will propagate down to all MTS for that customer. We lose the history that those customers at some point used ‚Äãversion 1, so if we wanted to compare ‚Äãlatency of ‚Äãversion 1 and ‚Äãversion 2 over a historical period we would not get accurate data. In this case even though we don‚Äôt need application ‚Äãversion to make out metric time series unique we need to make ‚Äãversion a dimension, because we care about the historical value.</p><h2 id=so-when-should-something-be-a-property-instead-of-a-dimension>So when should something be a Property instead of a dimension?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The first reason would be if there is any metadata you want attached to metrics, but you don‚Äôt know it at the time of ingest.
The second reason is best practice is if it doesn‚Äôt need to be a dimension, make it a property. Why?
One reason is that today there is a limit of 5K MTSs per analytics job or chart rendering and the more dimensions you have the more MTS you will create. Properties are completely free-form and let you add as much information as you want or need to metrics or dimensions without adding to MTS counts.</p><p>As dimensions are sent in with every datapoint, the more dimensions you have the more data you send to us, which could mean higher costs to you if your cloud provider charges for data transfer.</p><p>A good example of some things that should be properties would be additional host information. You want to be able to see things like machine_type, processor, or os, but instead of making these things dimensions and sending them with every metric from a host you could make them properties and attach the properties to the host dimension.</p><p>Example where ‚Äãhost:server1 you would set properties ‚Äãmachine_type:ucs, processor:xeon-5560, os:rhel71. Anytime a metric comes in with the dimension ‚Äãhost:server1 all the above properties will be applied to it automatically.</p><p>Some other examples of use cases for properties would be if you want to know who is the escalation contact for each service or SLA level for every customer. You do not need these items to make metrics uniquely identifiable and you don‚Äôt care about the historical values, so they can be properties. The properties could be added to the service dimension and customer dimensions and would then apply to all metrics and MTSs with those dimensions.</p><h2 id=what-about-tags>What about Tags?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Tags are the 3r‚Äãd‚Äã type of metadata that can be used to give context to or help organize your metrics. Unlike dimensions and properties, tags are NOT key:value pairs. ‚ÄãTags can be thought of as labels or keywords. Similar to Properties, Tags are applied to your data after ingest via the Catalog in the UI or programmatically via the API.‚Äã Tags can be applied to Metrics, Dimensions or other objects such as Detectors.</p><h2 id=where-would-i-use-tags>Where would I use Tags?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Tags are used when there is a need for a many-to-one relationship of tags to an object or a one-to-many relationship between the tag and the objects you are applying them to. They are useful for grouping together metrics that may not be intrinsically associated.</p><p>One example is you have hosts that run multiple applications. You can create tags (labels) for each application and then apply multiple tags to each host to label the applications that are running on it.</p><p>Example: Server1 runs 3 applications. You create tags ‚Äãapp1, app2 and app3 and apply all 3 tags to the dimension ‚Äãhost:server1</p><p>To expand on the example above let us say you also collect metrics from your applications.‚Äã You could apply the tags you created to any metrics coming in from the applications themselves. You can filter based on a tag allowing you to filter based on an application, but get the full picture including both application and the relevant host metrics.</p><p>Example: App1 sends in metrics with the dimension ‚Äãservice:application1. You would apply tag ‚Äãapp1 to the dimension ‚Äãservice:application1. You can then filter on the tag ‚Äãapp1 in charts and dashboards.</p><p>Another use case for tags for binary states where there is just one possible value. An example is you do canary testing and when you do a canary deployment you want to be able to mark the hosts that received the new code, so you can easily identify their metrics and compare their performance to those hosts that did not receive the new code. There is no need for a key:value pair as there is just a single value ‚Äúcanary‚Äù.</p><p>Be aware that while you can filter on tags you cannot use the groupBy function on them. The groupBy function is run by supplying the key part of a key:value pair and the results are then grouped by values of that key pair.</p><h2 id=additional-information>Additional information<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>For information on sending dimensions for custom metrics please review the ‚ÄãClient Libraries documentation for your library of choice.</p><p>For information on how to apply properties & tags to metrics or dimensions via the API please see the API documentation for ‚Äã/metric/:name‚Äã ‚Äã/dimension/:key/:value</p><p>For information on how to add or edit properties and tags via the Metadata Catalog in the UI please reference the section <strong>‚ÄãAdd or edit metadata</strong> in <a href=https://docs.splunk.com/Observability/metrics-and-metadata/metrics-finder-metadata-catalog.html#use-the-metadata-catalog rel=external>Search the Metric Finder and Metadata catalog</a>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=naming-conventions-for-tagging-with-opentelemetry-and-splunk>Naming Conventions for Tagging with OpenTelemetry and Splunk</h1><h2 id=introduction>Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>When deploying OpenTelemetry in a large organization, it‚Äôs critical to define a standardized naming convention for tagging, and a governance process to ensure the convention is adhered to.</p><p>This ensures that MELT data collected via OpenTelemetry can be efficiently utilized for alerting, dashboarding, and troubleshooting purposes. It also ensures that users of Splunk Observability Cloud can quickly find the data they‚Äôre looking for.</p><p>Naming conventions also ensure that data can be aggregated effectively. For example, if we wanted to count the number of unique hosts by environment, then we must use a standardized convention for capturing the host and environment names.</p><h2 id=attributes-vs-tags>Attributes vs. Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before we go further, let‚Äôs make a note regarding terminology. Tags in OpenTelemetry are called ‚Äúattributes‚Äù. Attributes can be attached to metrics, logs, and traces, either via manual instrumentation or automated instrumentation.</p><p>Attributes can also be attached to metrics, logs, and traces at the OpenTelemetry collector level, using various processors such as the <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/resourcedetectionprocessor rel=external>Resource Detection processor</a>.</p><p>Once traces with attributes are ingested into Splunk Observability Cloud, they are available as ‚Äútags‚Äù. Optionally, attributes collected as part of traces can be used to create <a href=https://docs.splunk.com/Observability/apm/span-tags/metricsets.html#troubleshooting-metricsets rel=external>Troubleshooting Metric Sets</a>, which can in turn be used with various features such as <a href=https://docs.splunk.com/Observability/apm/span-tags/tag-spotlight.html rel=external>Tag Spotlight</a>.</p><p>Alternatively, attributes can be used to create <a href=https://docs.splunk.com/Observability/apm/span-tags/metricsets.html#monitoring-metricsets rel=external>Monitoring Metric Sets</a>, which can be used to drive alerting.</p><h2 id=resource-semantic-conventions>Resource Semantic Conventions<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><a href=https://github.com/open-telemetry/semantic-conventions/tree/main rel=external>OpenTelemetry resource semantic conventions</a> should be used as a starting point when determining which attributes an organization should standardize on. In the following sections, we‚Äôll review some of the more commonly used attributes.</p><h3 id=service-attributes>Service Attributes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>A number of attributes are used to describe the service being monitored.</p><p><code>service.name</code> is a required attribute that defines the logical name of the service. It‚Äôs added automatically by the OpenTelemetry SDK but can be customized. It‚Äôs best to keep this simple (i.e. <code>inventoryservice</code> would be better than <code>inventoryservice-prod-hostxyz</code>, as other attributes can be utilized to capture other aspects of the service instead).</p><p>The following service attributes are recommended:</p><ul><li><code>service.namespace</code> this attribute could be utilized to identify the team that owns the service</li><li><code>service.instance.id</code> is used to identify a unique instance of the service</li><li><code>service.version</code> is used to identify the version of the service</li></ul><h3 id=telemetry-sdk>Telemetry SDK<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>These attributes are set automatically by the SDK, to record information about the instrumentation libraries being used:</p><ul><li><code>telemetry.sdk.name</code> is typically set to <code>opentelemetry</code></li><li><code>telemetry.sdk.language</code> is the language of the SDK, such as <code>java</code></li><li><code>telemetry.sdk.version</code> identifies which version of the SDK is utilized</li></ul><h3 id=containers>Containers<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>For services running in containers, there are numerous attributes used to describe the container runtime, such as <code>container.id</code>, <code>container.name</code>, and <code>container.image.name</code>. The full list can be found <a href=https://github.com/open-telemetry/semantic-conventions/blob/main/docs/resource/container.md rel=external>here</a>.</p><h3 id=hosts>Hosts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>These attributes describe the host where the service is running, and include attributes such as <code>host.id</code>, <code>host.name</code>, and <code>host.arch</code>. The full list can be found <a href=https://github.com/open-telemetry/semantic-conventions/blob/main/docs/resource/host.md rel=external>here</a>.</p><h3 id=deployment-environment>Deployment Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The <code>deployment.environment</code> attribute is used to identify the environment where the service is deployed, such as <strong>staging</strong> or <strong>production</strong>.</p><p>Splunk Observability Cloud uses this attribute to enable related content (as described <a href=https://docs.splunk.com/observability/metrics-and-metadata/enablerelatedcontent.html rel=external>here</a>), so it‚Äôs important to include it.</p><h3 id=cloud>Cloud<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>There are also attributes to capture information for services running in public cloud environments, such as AWS. Attributes include cloud.provider, <code>cloud.account.id</code>, and <code>cloud.region</code>.</p><p>The full list of attributes can be found <a href=https://github.com/open-telemetry/semantic-conventions/blob/main/docs/resource/cloud.md rel=external>here</a>.</p><p>Some cloud providers, such as <a href=https://github.com/open-telemetry/semantic-conventions/tree/main/docs/resource/cloud-provider/gcp rel=external>GCP</a>, define semantic conventions specific to their offering.</p><h3 id=kubernetes>Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>There are a number of standardized attributes for applications running in Kubernetes as well. Many of these are added automatically by Splunk‚Äôs distribution of the OpenTelemetry collector, as described <a href=https://docs.splunk.com/observability/metrics-and-metadata/enablerelatedcontent.html#splunk-infrastructure-monitoring rel=external>here</a>.</p><p>These attributes include <code>k8s.cluster.name</code>, <code>k8s.node.name</code>, <code>k8s.pod.name</code>, <code>k8s.namespace.name</code>, and <code>kubernetes.workload.name</code>.</p><h2 id=best-practices-for-creating-custom-attributes>Best Practices for Creating Custom Attributes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Many organizations require attributes that go beyond what‚Äôs defined in OpenTelemetry‚Äôs resource semantic conventions.</p><p>In this case, it‚Äôs important to avoid naming conflicts with attribute names already included in the semantic conventions. So it‚Äôs a good idea to check the semantic conventions before deciding on a particular attribute name for your naming convention.</p><p>In addition to a naming convention for attribute names, you also need to consider attribute values. For example, if you‚Äôd like to capture the particular business unit with which an application belongs, then you‚Äôll also want to have a standardized list of business unit values to choose from, to facilitate effective filtering.</p><p>The OpenTelemetry community provides guidelines that should be followed when naming attributes as well, which can be found <a href=https://opentelemetry.io/docs/specs/otel/common/attribute-naming/ rel=external>here</a>.</p><p>The <a href=https://opentelemetry.io/docs/specs/otel/common/attribute-naming/#recommendations-for-application-developers rel=external>Recommendations for Application Developers</a> section is most relevant to our discussion.</p><p>They recommend:</p><ul><li>Prefixing the attribute name with your company‚Äôs domain name, e.g. <code>com.acme.shopname</code> (if the attribute may be used outside your company as well as inside).</li><li>Prefixing the attribute name with the application name, if the attribute is unique to a particular application and is only used within your organization.</li><li>Not using existing OpenTelemetry semantic convention names as a prefix for your attribute name.</li><li>Consider submitting a proposal to add your attribute name to the OpenTelemetry specification, if there‚Äôs a general need for it across different organizations and industries.</li><li>Avoid having attribute names start with <code>otel.*</code>, as this is reserved for OpenTelemetry specification usage.</li></ul><h2 id=metric-cardinality-considerations>Metric Cardinality Considerations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>One final thing to keep in mind when deciding on naming standards for attribute names and values is related to metric cardinality.</p><p>Metric cardinality is defined as **the number of unique metric time series (MTS) produced by a combination of metric <strong>names and their associated dimensions</strong>.</p><p>A metric has high cardinality when it has a high number of dimension keys and a high number of possible unique values for those dimension keys.</p><p>For example, suppose your application sends in data for a metric named <code>custom.metric</code>. In the absence of any attributes, <code>custom.metric</code> would generate a single metric time series (MTS).</p><p>On the other hand, if <code>custom.metric</code> includes an attribute named <code>customer.id</code>, and there are thousands of customer ID values, this would generate thousands of metric time series, which may impact costs and query performance.</p><p>Splunk Observability Cloud provides a <a href=https://docs.splunk.com/Observability/infrastructure/metrics-pipeline/metrics-usage-report.html rel=external>report</a> that allows for the management of metrics usage. And <a href=https://docs.splunk.com/Observability/infrastructure/metrics-pipeline/use-metrics-pipeline.html rel=external>rules</a> can be created to drop undesirable dimensions. However, the first line of defence is understanding how attribute name and value combinations can drive increased metric cardinality.</p><h2 id=summary>Summary<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In this document, we highlighted the importance of defining naming conventions for OpenTelemetry tags, preferably before starting a large rollout of OpenTelemetry instrumentation.</p><p>We discussed how OpenTelemetry‚Äôs resource semantic conventions define the naming conventions for several attributes, many of which are automatically collected via the OpenTelemetry SDKs, as well as processors that run within the OpenTelemetry collector.</p><p>Finally, we shared some best practices for creating your attribute names, for situations where the resource semantic conventions are not sufficient for your organization‚Äôs needs.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jul 23, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-arcade---play-learn--observe>Splunk Arcade - Play, Learn & Observe!</h1><h3 id=unlock-the-power-of-telemetry-through-play><strong>Unlock the Power of Telemetry Through Play</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Imagine stepping into an <strong>80s-inspired arcade</strong>, where every high score, every power-up, and every epic fail isn‚Äôt just fun‚Äîit‚Äôs <strong>real data feeding into Splunk!</strong> Welcome to <strong>Splunk Arcade</strong>, an <strong>interactive, gamified learning experience</strong> that transforms classic arcade action into a <strong>hands-on observability workshop</strong>.</p><p>Here‚Äôs the deal: <strong>You play. Splunk observes.</strong> Every move you make in these custom-built HTML games generates <strong>metrics, traces, and logs</strong>‚Äîjust like your real-world applications. The difference? Instead of debugging a dull enterprise system, you‚Äôre <strong>blasting aliens and hunting bugs</strong> in a neon-lit, pixel-perfect throwback to the golden age of gaming.</p><hr><h3 id=-games-that-teach-as-you-play><strong>üéÆ GAMES THAT TEACH AS YOU PLAY</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=-space-imvaders--the-observability-invasion><strong>üõ∏ SPACE IMVADERS ‚Äì The Observability Invasion</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><em>(Inspired by Space Invaders)</em><br><strong>Mission:</strong> Defend Earth from waves of alien bugs!<br><strong>Observability Lesson:</strong> Every laser blast, every hit, and every lost life generates <strong>real-time telemetry data</strong>‚Äîerror rates, and request latency. Watch as your <strong>Splunk dashboards light up</strong> with performance insights, showing you exactly how &ldquo;system health&rdquo; translates into gameplay. But the <em>real</em> alien bugs are the ones in your own code! Can you and Splunk save the Earth (and your job!) from destruction?!</p><h4 id=-logger--hop-through-the-data-stream><strong>üê∏ LOGGER ‚Äì Hop Through the Data Stream</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><em>(Inspired by Frogger)</em><br><strong>Mission:</strong> Navigate a chaotic river of scrolling logs, avoiding errors and latency spikes!<br><strong>Observability Lesson:</strong> As you leap from log to log, Splunk captures <strong>end-to-end traces</strong>, helping you visualize the <strong>user journey</strong>‚Äîjust like tracking a real application‚Äôs flow. Miss a jump? That‚Äôs a <strong>failed transaction</strong>. Make it across? That‚Äôs a <strong>successful trace</strong>. Help your team of frogs across and see your customers win!</p><h4 id=-bughunt--shoot-down-glitches-before-they-crash-your-system><strong>üî´ BUGHUNT ‚Äì Shoot Down Glitches Before They Crash Your System</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p><em>(Inspired by Duck Hunt)</em><br><strong>Mission:</strong> Take aim at flying bugs‚Äîbut these aren‚Äôt just pixels; they‚Äôre <strong>real application errors</strong> in disguise!<br><strong>Observability Lesson:</strong> Every shot fires a <strong>custom event log</strong> into Splunk. Missed bugs? That‚Äôs an <strong>outage waiting to happen</strong>. Perfect accuracy? You‚Äôve just <strong>optimized your system‚Äôs resilience</strong>. Use Splunk to shoot down problems <em>before</em> they escape to your customers!</p><hr><h3 id=why-splunk-arcade><strong>WHY SPLUNK ARCADE?</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Observability doesn‚Äôt have to be dry and technical. Splunk Arcade makes learning <strong>fun, competitive, and unforgettable</strong> by:<br>‚úÖ <strong>Bridging Gaming & Real-World Telemetry</strong> ‚Äì See how your in-game actions mirror real IT system behavior.<br>‚úÖ <strong>Teaching Through Experience</strong> ‚Äì No slides, no lectures‚Äîjust <strong>play, learn, and observe</strong>.<br>‚úÖ <strong>Providing Instant Feedback</strong> ‚Äì Watch dashboards update in real-time as you play, making abstract concepts <strong>tangible and engaging</strong>.</p><hr><h3 id=who-is-this-for><strong>WHO IS THIS FOR?</strong><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>‚úî <strong>DevOps & SREs</strong> ‚Äì Test your skills in a stress-free, nostalgic environment.
‚úî <strong>New Splunk Users</strong> ‚Äì Learn observability fundamentals without drowning in complexity or code.
‚úî <strong>Gamers & Tech Enthusiasts</strong> ‚Äì Who says enterprise software can‚Äôt be fun?</p><hr><p><strong>üîå POWERED BY SPLUNK OBSERVABILITY CLOUD</strong><br><em>Because even fun should be monitored, measured, and optimized.</em></p><hr><p><strong>Game Over? Not a chance! üïπÔ∏è Press START to level up your observability skills!</strong></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 16, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=local-hosting>Local Hosting</h1><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>Please disable any VPNs or proxies before setting up an instance e.g:</p><ul><li>ZScaler</li><li>Cisco AnyConnect</li></ul><p>These tools <strong>will</strong> prevent the instance from being created properly.</p></div></details><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-6ca1139cf4501b05ae811f8e3ce721a1><div class=card-content><div class=card-title id=R-card-6ca1139cf4501b05ae811f8e3ce721a1><a href=/observability-workshop/en/resources/local-hosting/multipass/index.html>Local Hosting with Multipass</a></div><div class=card-content-text>Learn how to create a local hosting environment with Multipass - Windows/Linux/Mac(Intel)</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-e1ae40bc9d33f911ffe6366c481e42d4><div class=card-content><div class=card-title id=R-card-e1ae40bc9d33f911ffe6366c481e42d4><a href=/observability-workshop/en/resources/local-hosting/orbstack/index.html>Local Hosting with OrbStack</a></div><div class=card-content-text>Learn how to create a local hosting environment with OrbStack - Mac (Apple Silicon)</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-d5c586270e7de07e3a69e9f33f57a764><div class=card-content><div class=card-title id=R-card-d5c586270e7de07e3a69e9f33f57a764><a href=/observability-workshop/en/resources/local-hosting/proxmox/index.html>Local Hosting with Proxmox</a></div><div class=card-content-text>Learn how to create a local hosting environment in Proxmox VE</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of Local Hosting</h1><article class=default><header class=headline></header><h1 id=local-hosting-with-multipass>Local Hosting with Multipass</h1><p>Install <a href=https://multipass.run/ rel=external>Multipass</a> and Terraform for your operating system. On a Mac (Intel), you can also install via <a href=https://brew.sh/ rel=external>Homebrew</a> e.g.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>brew install multipass terraform jq</span></span></code></pre></div><p>Clone workshop repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/splunk/observability-workshop</span></span></code></pre></div><p>Change into Multipass directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> observability-workshop/local-hosting/multipass</span></span></code></pre></div><p>Log Observer Connect:</p><p>If you plan to use your own Splunk Observability Cloud Suite Org and or Splunk instance, you may need to create a new <strong>Log Observer Connect</strong> connection:
Follow the instructions found in the <a href=https://docs.splunk.com/observability/en/logs/lo-connect-landing.html rel=external>documentation</a> for <a href=https://docs.splunk.com/observability/en/logs/scp.html#logs-scp rel=external>Splunk Cloud</a> or <a href=https://docs.splunk.com/observability/en/logs/set-up-logconnect.html rel=external>Splunk Enterprize</a>.</p><p>Additional requirements for running your own <strong>Log Observer Connect</strong> connection are:</p><ul><li>Create an index called <strong>splunk4rookies-workshop</strong></li><li>Make sure the Service account user used in the <strong>Log observer Connect</strong> connection has access to the <strong>splunk4rookies-workshop</strong> index (you can remove all other indexes, as all workshop log data should go to this index).</li></ul><p>Initialize Terraform:</p><div class=tab-panel data-tab-group=R-tabs-9cf394faa4006256aeb2b39a41691c89><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b93252a5ace9b9d6c77d65550114afe9 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9cf394faa4006256aeb2b39a41691c89","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-c33f283cc6c8d22d61362c2090c34b20 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9cf394faa4006256aeb2b39a41691c89","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-b93252a5ace9b9d6c77d65550114afe9 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init -upgrade</span></span></code></pre></div></div></div><div id=R-tab-id-c33f283cc6c8d22d61362c2090c34b20 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text>```text
Initializing the backend...
Initializing provider plugins...
- Finding latest version of hashicorp/random...
- Finding latest version of hashicorp/local...
- Finding larstobi/multipass versions matching "~> 1.4.1"...
- Installing hashicorp/random v3.5.1...
- Installed hashicorp/random v3.5.1 (signed by HashiCorp)
- Installing hashicorp/local v2.4.0...
- Installed hashicorp/local v2.4.0 (signed by HashiCorp)
- Installing larstobi/multipass v1.4.2...
- Installed larstobi/multipass v1.4.2 (self-signed, key ID 797707331BF3549C)
```</div></div></div></div><p>Create Terraform variables file. Variables are kept in file <code>terrform.tfvars</code> and a template is provided, <code>terraform.tfvars.template</code>, to copy and edit:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp terraform.tfvars.template terraform.tfvars</span></span></code></pre></div><p>The following Terraform variables are required:</p><ul><li><code>swipe_id</code>: <a href=https://swipe.splunk.com/ rel=external>SWiPE ID</a> for the instance</li><li><code>splunk_index</code>: Splunk Index to send logs to. Defaults to <code>splunk4rookies-workshop</code>.</li></ul><p>Instance type variables:</p><ul><li><code>splunk_presetup</code>: Provide a preconfigured instance (OTel Collector and Online Boutique deployed with RUM enabled). The default is <code>false</code>.</li><li><code>splunk_diab</code>: Install and run Demo-in-a-Box. The default is <code>false</code>.</li><li><code>tagging_workshop</code>: Install and configure the Tagging Workshop. The default is <code>false</code>.</li><li><code>otel_demo</code> : Install and configure the OpenTelemetry Astronomy Shop Demo. This requires that <code>splunk_presetup</code> is set to <code>false</code>. The default is <code>false</code>.</li></ul><p>Optional advanced variables:</p><ul><li><code>wsversion</code>: Set this to <code>main</code> if working on the development of the workshop, otherwise this can be omitted.</li><li><code>architecture</code>: Set this to the correct architecture, <code>arm64</code> or <code>amd64</code>. Defaults to <code>arm64</code> which is appropriate for Apple Silicon.</li></ul><p>Run <code>terraform plan</code> to check that all configuration is OK. Once happy run <code>terraform apply</code> to create the instance.</p><div class=tab-panel data-tab-group=R-tabs-56cb7a08dc4eeb1b3fcb72e3a39103aa><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2d56cd0162910e547bacbe86eb6e890a aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-56cb7a08dc4eeb1b3fcb72e3a39103aa","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-b902df103c4c5ac72b1e57e55c1b7559 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-56cb7a08dc4eeb1b3fcb72e3a39103aa","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-2d56cd0162910e547bacbe86eb6e890a data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply</span></span></code></pre></div></div></div><div id=R-tab-id-b902df103c4c5ac72b1e57e55c1b7559 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>random_string.hostname: Creating...
</span></span><span class=line><span class=cl>random_string.hostname: Creation complete after 0s [id=cynu]
</span></span><span class=line><span class=cl>local_file.user_data: Creating...
</span></span><span class=line><span class=cl>local_file.user_data: Creation complete after 0s [id=46a5c50e396a1a7820c3999c131a09214db903dd]
</span></span><span class=line><span class=cl>multipass_instance.ubuntu: Creating...
</span></span><span class=line><span class=cl>multipass_instance.ubuntu: Still creating... [10s elapsed]
</span></span><span class=line><span class=cl>multipass_instance.ubuntu: Still creating... [20s elapsed]
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>multipass_instance.ubuntu: Still creating... [1m30s elapsed]
</span></span><span class=line><span class=cl>multipass_instance.ubuntu: Creation complete after 1m38s [name=cynu]
</span></span><span class=line><span class=cl>data.multipass_instance.ubuntu: Reading...
</span></span><span class=line><span class=cl>data.multipass_instance.ubuntu: Read complete after 1s [name=cynu]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Apply complete! Resources: 3 added, 0 changed, 0 destroyed.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Outputs:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>instance_details = [
</span></span><span class=line><span class=cl>  {
</span></span><span class=line><span class=cl>    &#34;image&#34; = &#34;Ubuntu 22.04.2 LTS&#34;
</span></span><span class=line><span class=cl>    &#34;image_hash&#34; = &#34;345fbbb6ec82 (Ubuntu 22.04 LTS)&#34;
</span></span><span class=line><span class=cl>    &#34;ipv4&#34; = &#34;192.168.205.185&#34;
</span></span><span class=line><span class=cl>    &#34;name&#34; = &#34;cynu&#34;
</span></span><span class=line><span class=cl>    &#34;state&#34; = &#34;Running&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>]</span></span></code></pre></div></div></div></div></div><p>Once the instance has been successfully created (this can take several minutes), <code>exec</code> into it using the <code>name</code> from the output above. The password for Multipass instance is <code>Splunk123!</code>.</p><div class=tab-panel data-tab-group=R-tabs-416d7eaf73139ec125a6c968642dad26><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0ae5e23de42b52fbe6a74a0128e49f0a aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-416d7eaf73139ec125a6c968642dad26","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-4aff60c1c5bc87015ab10443aa8e00e1 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-416d7eaf73139ec125a6c968642dad26","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0ae5e23de42b52fbe6a74a0128e49f0a data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>multipass <span class=nb>exec</span> cynu -- su -l splunk</span></span></code></pre></div></div></div><div id=R-tab-id-4aff60c1c5bc87015ab10443aa8e00e1 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ multipass exec kdhl -- su -l splunk
</span></span><span class=line><span class=cl>Password:
</span></span><span class=line><span class=cl>Waiting for cloud-init status...
</span></span><span class=line><span class=cl>Your instance is ready!</span></span></code></pre></div></div></div></div></div><p>Validate the instance:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl version --output<span class=o>=</span>yaml</span></span></code></pre></div><p>To delete the instance, first make sure you have exited from instance and then run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jun 30, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=local-hosting-with-orbstack>Local Hosting with OrbStack</h1><p>Install Orbstack and jq:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install orbstack jq</span></span></code></pre></div><p>Clone workshop repository:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/splunk/observability-workshop</span></span></code></pre></div><p>Change into Orbstack directory:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> observability-workshop/local-hosting/orbstack</span></span></code></pre></div><p>Run the script and provide and instance name and <a href=https://swipe.splunk.show rel=external>SWiPE ID</a> e.g.:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./start.sh my-instance <span class=m>12345678</span></span></span></code></pre></div><p>Once the instance has been successfully created (this can take several minutes), you will automatically be logged into the instance. If you exit you can SSH back in using the following command (replace <code>&lt;my_instance></code> with the name of your instance):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh splunk@&lt;my_instance&gt;@orb</span></span></code></pre></div><p>Once in the shell, you can validate that the instance is ready by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl version --output<span class=o>=</span>yaml</span></span></code></pre></div><p>To get the IP address of the instance, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ifconfig eth0</span></span></code></pre></div><p>To delete the instance, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>orb delete my-instance</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>May 14, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=local-hosting-with-proxmox>Local Hosting with Proxmox</h1><h2 id=proxmox-workshop-instance-setup>Proxmox Workshop Instance Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=overview>Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The <code>ubuntu-cloud-k3d.sh</code> script automates the creation of a Splunk Observability Workshop VM on Proxmox VE. It creates a complete Ubuntu 24.04 cloud-init based VM with all necessary tools and configurations pre-installed.</p><h4 id=prerequisites>Prerequisites<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Proxmox VE cluster with administrative access</li><li>Internet connectivity for downloading cloud images and packages</li><li>Available VM ID range and storage space</li><li>Valid SWiPE ID for workshop access</li><li><strong>Snippets enabled on local storage</strong> - Required for cloud-init configuration files. To enable:<ol><li>In Proxmox web UI, go to <strong>Datacenter ‚Üí Storage ‚Üí local</strong></li><li>Click <strong>Edit</strong></li><li>Under <strong>Content</strong>, add <strong>Snippets</strong> to the list</li><li>Click <strong>OK</strong></li></ol></li></ul><h4 id=quick-start>Quick Start<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>Run the script directly on your Proxmox host:</p><p><code>k3d</code> script:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/splunk/observability-workshop/refs/heads/main/local-hosting/proxmox/ubuntu-cloud-k3d.sh<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div><p><code>k3s</code> script (<strong>LEGACY</strong>):</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/splunk/observability-workshop/refs/heads/main/local-hosting/proxmox/ubuntu-cloud-k3s.sh<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 id=what-the-script-does>What the Script Does<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><h4 id=1-initial-setup>1. Initial Setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Updates package repositories and installs required tools (<code>jq</code>, <code>curl</code>)</li><li>Displays interactive prompts for user confirmation and SWiPE ID input</li></ul><h4 id=2-authentication--configuration>2. Authentication & Configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Validates SWiPE ID against the Splunk workshop API</li><li>Retrieves workshop tokens and configuration (REALM, RUM_TOKEN, INGEST_TOKEN, etc.)</li><li>Generates unique VM ID and hostname</li></ul><h4 id=3-vm-creation>3. VM Creation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Downloads Ubuntu 24.04 Noble cloud image</li><li>Resizes disk to 40GB</li><li>Creates Proxmox VM with:<ul><li><strong>Memory</strong>: 16GB RAM</li><li><strong>CPU</strong>: 4 cores (host CPU type)</li><li><strong>Storage</strong>: Uses <code>local-lvm</code> storage</li><li><strong>Network</strong>: Bridged to <code>vmbr0</code> with DHCP</li><li><strong>Boot</strong>: UEFI with cloud-init support</li></ul></li></ul><h4 id=4-software-installation>4. Software Installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><p>The cloud-init configuration automatically installs:</p><ul><li><strong>Container Tools</strong>: Docker, Docker Compose</li><li><strong>Kubernetes</strong>: K3s, kubectl, Helm, K9s</li><li><strong>Development</strong>: OpenJDK 17, Maven, Python3, Git</li><li><strong>Infrastructure</strong>: Terraform, Ansible</li><li><strong>Monitoring</strong>: Chaos Mesh</li></ul><h4 id=5-workshop-content>5. Workshop Content<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>Downloads Splunk Observability Workshop materials</li><li>Sets up Kubernetes secrets with workshop tokens</li><li>Configures private container registry</li><li>Prepares demo applications and content</li></ul><h3 id=vm-specifications>VM Specifications<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>OS</strong>: Ubuntu 24.04 LTS (Noble)</li><li><strong>Memory</strong>: 16GB RAM</li><li><strong>CPU</strong>: 4 cores</li><li><strong>Disk</strong>: 40GB (expandable)</li><li><strong>User</strong>: <code>splunk</code> / <code>Splunk123!</code></li><li><strong>SSH</strong>: Password authentication enabled</li></ul><h3 id=environment-variables>Environment Variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>The script configures these environment variables in the VM:</p><ul><li><code>RUM_TOKEN</code>: Real User Monitoring token</li><li><code>ACCESS_TOKEN</code>: Data ingest token</li><li><code>API_TOKEN</code>: Splunk API token</li><li><code>HEC_TOKEN</code>: HTTP Event Collector token</li><li><code>HEC_URL</code>: HEC endpoint URL</li><li><code>REALM</code>: Splunk realm</li><li><code>INSTANCE</code>: Unique hostname</li><li><code>CLUSTER_NAME</code>: Kubernetes cluster name</li></ul><h3 id=accessing-the-vm>Accessing the VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ol><li><p>Wait for VM creation and boot to complete (5-10 minutes)</p></li><li><p>Find the VM&rsquo;s IP address in Proxmox console or DHCP logs</p></li><li><p>SSH to the VM:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh splunk@&lt;vm-ip&gt;
</span></span><span class=line><span class=cl><span class=c1># Password: Splunk123!</span></span></span></code></pre></div></li></ol><h3 id=useful-commands-in-the-vm>Useful Commands in the VM<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check Kubernetes status</span>
</span></span><span class=line><span class=cl>kubectl get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Access Kubernetes dashboard</span>
</span></span><span class=line><span class=cl>k9s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View workshop materials</span>
</span></span><span class=line><span class=cl>ls ~/workshop/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check environment variables</span>
</span></span><span class=line><span class=cl>env <span class=p>|</span> grep -E <span class=s2>&#34;(TOKEN|REALM)&#34;</span></span></span></code></pre></div><h3 id=troubleshooting>Troubleshooting<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li><strong>Invalid SWiPE ID</strong>: Verify your workshop registration and ID</li><li><strong>VM creation fails</strong>: Check Proxmox storage space and permissions</li><li><strong>Network issues</strong>: Ensure <code>vmbr0</code> bridge is properly configured</li><li><strong>Slow deployment</strong>: Allow extra time for cloud-init to complete all installations</li></ul><h3 id=tags>Tags<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Created VMs are tagged with: <code>o11y-workshop</code>, <code>noble</code>, <code>k3d</code></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Dec 16, 2025</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=unsupported-field-workshops>Unsupported Field Workshops</h1><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-2d206f47fafca346a55604a2149fdb6a><div class=card-content><div class=card-title id=R-card-2d206f47fafca346a55604a2149fdb6a><a href=/observability-workshop/en/unsupported-field-workshops/1-imt/index.html>Splunk IM</a></div><div class=card-content-text>Splunk delivers real-time monitoring and troubleshooting to help you maximize infrastructure performance with complete visibility.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-af7efa6f8f66e865ccd2e25c0469f2a7><div class=card-content><div class=card-title id=R-card-af7efa6f8f66e865ccd2e25c0469f2a7><a href=/observability-workshop/en/unsupported-field-workshops/3-nodejs-kubernetes/index.html>NodeJS Zero-Config Workshop</a></div><div class=card-content-text>A workshop using Zero Configuration Auto-Instrumentation for NodeJS.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-f38da72ea0b86e19c50a170aa9eea354><div class=card-content><div class=card-title id=R-card-f38da72ea0b86e19c50a170aa9eea354><a href=/observability-workshop/en/unsupported-field-workshops/8-gdi/index.html>GDI (OTel & UF)</a></div><div class=card-content-text>Learn how to get data into Splunk Observability Cloud with OpenTelemetry and the Splunk Universal Forwarder.</div></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-2d5c23a3a5a153e863fb6119dcf55495><div class=card-content><div class=card-title id=R-card-2d5c23a3a5a153e863fb6119dcf55495><a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/index.html>Splunk OnCall</a></div><div class=card-content-text>Make expensive service outages a thing of the past. Remediate issues faster, reduce on-call burnout and keep your services up and running.</div></div></article></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2026</span></span></footer></article><section><h1 class=a11y-only>Subsections of Unsupported Field Workshops</h1><article class=default><header class=headline></header><h1 id=splunk-im>Splunk IM</h1><p>During this <em><strong>technical</strong></em> Splunk Observability Cloud Infrastructure Monitoring and APM Workshop, you will build out an environment based on a <a href=https://k3s.io/ rel=external>lightweight</a> Kubernetes<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> cluster.</p><p>To simplify the workshop modules, a pre-configured AWS/EC2 instance is provided.</p><p>The instance is pre-configured with all the software required to deploy the Splunk OpenTelemetry Connector<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> in Kubernetes, deploy an NGINX^3 ReplicaSet^4 and finally deploy a microservices-based application which has been instrumented using OpenTelemetry to send metrics, traces, spans and logs<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><p>The workshops also introduce you to dashboards, editing and creating charts, creating detectors to fire alerts, Monitoring as Code and the Service Bureau<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p><p>By the end of these technical workshops, you will have a good understanding of some of the key features and capabilities of the Splunk Observability Cloud.</p><p>Here are the instructions on how to access your pre-configured <a href=/observability-workshop/en/unsupported-field-workshops/1-imt/initial-setup/index.html>AWS</a>/<a href=/observability-workshop/en/unsupported-field-workshops/1-imt/initial-setup/index.html>EC2 instance</a></p><p><a href=#R-image-2d98413d52c719e50169e7e0c2237c99 class=lightbox-link><img alt="Splunk Architecture" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/1-imt/images/architecture.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2d98413d52c719e50169e7e0c2237c99><img alt="Splunk Architecture" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/1-imt/images/architecture.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/ rel=external><strong>Kubernetes</strong></a> is a portable, extensible, open-source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://opentelemetry.io/ rel=external><strong>OpenTelemetry Collector</strong></a> offers a vendor-agnostic implementation on how to receive, process and export telemetry data. In addition, it removes the need to run, operate and maintain multiple agents/collectors to support open-source telemetry data formats (e.g. Jaeger, Prometheus, etc.) sending to multiple open-source or commercial back-ends.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://www.jaegertracing.io/ rel=external><strong>Jaeger</strong></a>, inspired by Dapper and OpenZipkin, is a distributed tracing system released as open source by Uber Technologies. It is used for monitoring and troubleshooting microservices-based distributed systems&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://www.splunk.com/en_us/blog/it/monitoring-observability-enterprise-service.html rel=external><strong>Monitoring as Code and Service Bureau</strong></a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk IM</h1><article class=default><header class=headline></header><h1 id=how-to-connect-to-your-workshop-environment>How to connect to your workshop environment</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<ol><li>How to retrieve the IP address of the AWS/EC2 instance assigned to you.</li><li>Connect to your instance using SSH, Putty<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> or your web browser.</li><li>Verify your connection to your AWS/EC2 cloud instance.</li><li>Using Putty (Optional)</li><li>Using Multipass (Optional)</li></ol><hr><h2 id=1-awsec2-ip-address>1. AWS/EC2 IP Address<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In preparation for the workshop, Splunk has prepared an Ubuntu Linux instance in AWS/EC2.</p><p>To get access to the instance that you will be using in the workshop please visit the URL to access the Google Sheet provided by the workshop leader.</p><p>Search for your AWS/EC2 instance by looking for your first and last name, as provided during registration for this workshop.</p><p><a href=#R-image-d1c31afc76327bec1659743aeff13a21 class=lightbox-link><img alt="attendee spreadsheet" class="lazy lightbox figure-image" loading=lazy src=../images/spreadsheet-info.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d1c31afc76327bec1659743aeff13a21><img alt="attendee spreadsheet" class="lazy lightbox lightbox-image" loading=lazy src=../images/spreadsheet-info.png></a></p><p>Find your allocated IP address, SSH command (for Mac OS, Linux and the latest Windows versions) and password to enable you to connect to your workshop instance.</p><p>It also has the Browser Access URL that you can use in case you cannot connect via ssh or Putty - see <a href=/observability-workshop/en/unsupported-field-workshops/1-imt/initial-setup/index.html#4-web-browser-all>EC2 access via Web browser</a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>Please use SSH or Putty to gain access to your EC2 instance if possible and
make a note of the IP address as you will need this during the workshop.</p></div></details><h2 id=2-ssh-mac-oslinux>2. SSH (Mac OS/Linux)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Most attendees will be able to connect to the workshop by using SSH from their Mac or Linux device, or on Windows 10 and above.</p><p>To use SSH, open a terminal on your system and type <code>ssh splunk@x.x.x.x</code> (replacing x.x.x.x with the IP address found in Step #1).</p><p><a href=#R-image-ddeea9205759d3ba4b263516558d9024 class=lightbox-link><img alt="ssh login" class="lazy lightbox figure-image" loading=lazy src=../images/ssh-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ddeea9205759d3ba4b263516558d9024><img alt="ssh login" class="lazy lightbox lightbox-image" loading=lazy src=../images/ssh-1.png></a></p><p>When prompted <strong><code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></strong> please type <strong><code>yes</code></strong>.</p><p><a href=#R-image-7f30595b59377f5adc7713c3884a4877 class=lightbox-link><img alt="ssh password" class="lazy lightbox figure-image" loading=lazy src=../images/ssh-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7f30595b59377f5adc7713c3884a4877><img alt="ssh password" class="lazy lightbox lightbox-image" loading=lazy src=../images/ssh-2.png></a></p><p>Enter the password provided in the Google Sheet from Step #1.</p><p>Upon successful login, you will be presented with the Splunk logo and the Linux prompt.</p><p><a href=#R-image-f388322eb6605b88867bb8fa64c53a28 class=lightbox-link><img alt="ssh connected" class="lazy lightbox figure-image" loading=lazy src=../images/ssh-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f388322eb6605b88867bb8fa64c53a28><img alt="ssh connected" class="lazy lightbox lightbox-image" loading=lazy src=../images/ssh-3.png></a></p><h2 id=3-ssh-windows-10-and-above>3. SSH (Windows 10 and above)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The procedure described above is the same on Windows 10, and the commands can be executed either in the Windows Command Prompt or PowerShell.
However, Windows regards its SSH Client as an &ldquo;optional feature&rdquo;, which might need to be enabled.</p><p>You can verify if SSH is enabled by simply executing <code>ssh</code></p><p>If you are shown a help text on how to use the ssh-command (like shown on the screenshot below), you are all set.</p><p><a href=#R-image-9165c8d59b2ba0d9b74d17e67b55f62a class=lightbox-link><img alt="Windows SSH enabled" class="lazy lightbox figure-image" loading=lazy src=../images/windows-ssh-enabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9165c8d59b2ba0d9b74d17e67b55f62a><img alt="Windows SSH enabled" class="lazy lightbox lightbox-image" loading=lazy src=../images/windows-ssh-enabled-feedback.png></a></p><p>If the result of executing the command looks something like the screenshot below, you want to enable the &ldquo;OpenSSH Client&rdquo; feature manually.</p><p><a href=#R-image-4b127e1aa82a96be4f38c2a12d0b38e3 class=lightbox-link><img alt="Windows SSH disabled" class="lazy lightbox figure-image" loading=lazy src=../images/windows-ssh-disabled-feedback.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4b127e1aa82a96be4f38c2a12d0b38e3><img alt="Windows SSH disabled" class="lazy lightbox lightbox-image" loading=lazy src=../images/windows-ssh-disabled-feedback.png></a></p><p>To do that, open the &ldquo;Settings&rdquo; menu, and click on &ldquo;Apps&rdquo;. While in the &ldquo;Apps & features&rdquo; section, click on &ldquo;Optional features&rdquo;.</p><p><a href=#R-image-167e1729a30d65e1053de13a5df0efc6 class=lightbox-link><img alt="Windows Apps Settings" class="lazy lightbox figure-image" loading=lazy src=../images/windows-gui-optionalfeatures.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-167e1729a30d65e1053de13a5df0efc6><img alt="Windows Apps Settings" class="lazy lightbox lightbox-image" loading=lazy src=../images/windows-gui-optionalfeatures.png></a></p><p>Here, you are presented with a list of installed features. On the top, you see a button with a plus icon to &ldquo;Add a feature&rdquo;. Click it.
In the search input field, type &ldquo;OpenSSH&rdquo;, and find a feature called &ldquo;OpenSSH Client&rdquo;, or respectively, &ldquo;OpenSSH Client (Beta)&rdquo;, click on it, and click the &ldquo;Install&rdquo;-button.</p><p><a href=#R-image-fba1740b2f51dcd82589ec820116f471 class=lightbox-link><img alt="Windows Enable OpenSSH Client" class="lazy lightbox figure-image" loading=lazy src=../images/windows-enable-openssh-client.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fba1740b2f51dcd82589ec820116f471><img alt="Windows Enable OpenSSH Client" class="lazy lightbox lightbox-image" loading=lazy src=../images/windows-enable-openssh-client.png></a></p><p>Now you are set! In case you are not able to access the provided instance despite enabling the OpenSSH feature, please do not shy away from reaching
out to the course instructor, either via chat or directly.</p><p>At this point you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=4-putty-for-windows-versions-prior-to-windows-10>4. Putty (For Windows Versions prior to Windows 10)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you do not have SSH pre-installed or if you are on a Windows system, the best option is to install putty, you can find <a href=https://www.putty.org/ rel=external>here.</a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>If you <strong>cannot</strong> install Putty, please go to <a href=/observability-workshop/en/unsupported-field-workshops/1-imt/initial-setup/index.html#4-web-browser-all>Web Browser (All)</a>.</p></div></details><p>Open Putty and enter in the <strong>Host Name (or IP address)</strong> field the IP address provided in the Google Sheet.</p><p>You can optionally save your settings by providing a name and pressing <strong>Save</strong>.</p><p><a href=#R-image-b13d4aebe07db67baab03ab19bd83993 class=lightbox-link><img alt=putty-2 class="lazy lightbox figure-image" loading=lazy src=../images//putty-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b13d4aebe07db67baab03ab19bd83993><img alt=putty-2 class="lazy lightbox lightbox-image" loading=lazy src=../images//putty-settings.png></a></p><p>To then login to your instance click on the <strong>Open</strong> button as shown above.</p><p>If this is the first time connecting to your AWS/EC2 workshop instance, you will be presented with a security dialogue, please click <strong>Yes</strong>.</p><p><a href=#R-image-2a11dd2d6be631addf9bf8233ef092ac class=lightbox-link><img alt=putty-3 class="lazy lightbox figure-image" loading=lazy src=../images//putty-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2a11dd2d6be631addf9bf8233ef092ac><img alt=putty-3 class="lazy lightbox lightbox-image" loading=lazy src=../images//putty-security.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-3dcedf1c905220cfc9baf7f41db37b30 class=lightbox-link><img alt=putty-4 class="lazy lightbox figure-image" loading=lazy src=../images//putty-loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3dcedf1c905220cfc9baf7f41db37b30><img alt=putty-4 class="lazy lightbox lightbox-image" loading=lazy src=../images//putty-loggedin.png></a></p><p>At this point, you are ready to continue and <a href=../gdi/index.html>start the workshop</a></p><hr><h2 id=5-web-browser-all>5. Web Browser (All)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you are blocked from using SSH (Port 22) or unable to install Putty you may be able to connect to the workshop instance by using a web browser.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This assumes that access to port 6501 is not restricted by your company&rsquo;s firewall.</p></div></details><p>Open your web browser and type <strong><a href=http://x.x.x.x:6501 rel=external>http://x.x.x.x:6501</a></strong> (where X.X.X.X is the IP address from the Google Sheet).</p><p><a href=#R-image-9f6ec610cc4e4c0af7a093dfa4d1aacc class=lightbox-link><img alt=http-6501 class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-url.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9f6ec610cc4e4c0af7a093dfa4d1aacc><img alt=http-6501 class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-url.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the Google Sheet.</p><p><a href=#R-image-09cddf5631c6d6143b07694d5f70250c class=lightbox-link><img alt=http-connect class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-09cddf5631c6d6143b07694d5f70250c><img alt=http-connect class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-connect.png></a></p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-2a3327508cc6c706f383ddf5c8e6824a class=lightbox-link><img alt="web login" class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2a3327508cc6c706f383ddf5c8e6824a><img alt="web login" class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-login.png></a></p><p>Unlike when you are using regular SSH, <em>copy and paste</em> does require a few extra steps to complete when using a browser session. This is due to cross browser restrictions.</p><p>When the workshop asks you to copy instructions into your terminal, please do the following:</p><p><em>Copy the instruction as normal, but when ready to paste it in the web terminal, choose <strong>Paste from browser</strong> as show below:</em></p><p><a href=#R-image-83411c085ca2047b8fb65547767a88ac class=lightbox-link><img alt="web paste 1" class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-paste-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-83411c085ca2047b8fb65547767a88ac><img alt="web paste 1" class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-paste-browser.png></a></p><p>This will open a dialogue box asking for the text to be pasted into the web terminal:</p><p><a href=#R-image-5bfdfed0d0ff683ac923946edd4f5ecf class=lightbox-link><img alt="web paste 3" class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-example-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5bfdfed0d0ff683ac923946edd4f5ecf><img alt="web paste 3" class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-example-1.png></a></p><p>Paste the text in the text box as shown, then press <strong>OK</strong> to complete the copy and paste process.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Unlike regular SSH connection, the web browser has a 60-second time out, and you will be disconnected, and a <strong>Connect</strong> button will be shown in the center of the web terminal.</p><p>Simply click the <strong>Connect</strong> button and you will be reconnected and will be able to continue.</p></div></details><p><a href=#R-image-2ff6999a76f73eba1e07ad88cbc46ba2 class=lightbox-link><img alt="web reconnect" class="lazy lightbox figure-image" loading=lazy src=../images//shellinabox-reconnect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2ff6999a76f73eba1e07ad88cbc46ba2><img alt="web reconnect" class="lazy lightbox lightbox-image" loading=lazy src=../images//shellinabox-reconnect.png></a></p><p>At this point you are ready to continue and <a href=../gdi/index.html>start the workshop</a>.</p><hr><h2 id=6-multipass-all>6. Multipass (All)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you are unable to access AWS, but want to install software locally, follow the instructions for <a href=https://github.com/splunk/observability-workshop/blob/main/multipass/README.md rel=external>using Multipass</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.chiark.greenend.org.uk/~sgtatham/putty/ rel=external>Download Putty</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-collector-in-kubernetes>Deploying the OpenTelemetry Collector in Kubernetes</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<ul><li>Use the Splunk Helm chart to install the OpenTelemetry Collector in K3s</li><li>Explore your cluster in the Kubernetes Navigator</li></ul><hr><h2 id=1-installation-using-helm>1. Installation using Helm<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Install the OpenTelemetry Collector using the Splunk Helm chart. First, add the Splunk Helm chart repository to Helm and update:</p><div class=tab-panel data-tab-group=R-tabs-28e21a3d0f60e8c2d838dc52a0cad087><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-84202ee5e2bd3fb8e5c77ccc71d90faf aria-expanded=true data-tab-item=R-tab-c8ebfb45a0793171e9105e42af37c667 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-28e21a3d0f60e8c2d838dc52a0cad087","R-tab-c8ebfb45a0793171e9105e42af37c667")'>
<span class=tab-nav-text>Helm Repo Add</span>
</button>
<button aria-controls=R-tab-id-ba7dbb3d723447719f2432fedd8983ee aria-expanded=false data-tab-item=R-tab-cf9cd1217bdb0a5a35e8f5fab47e53e4 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-28e21a3d0f60e8c2d838dc52a0cad087","R-tab-cf9cd1217bdb0a5a35e8f5fab47e53e4")'>
<span class=tab-nav-text>Helm Repo Add Output</span></button></div><div class=tab-content-container><div id=R-tab-id-84202ee5e2bd3fb8e5c77ccc71d90faf data-tab-item=R-tab-c8ebfb45a0793171e9105e42af37c667 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div></div></div><div id=R-tab-id-ba7dbb3d723447719f2432fedd8983ee data-tab-item=R-tab-cf9cd1217bdb0a5a35e8f5fab47e53e4 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Using ACCESS_TOKEN={REDACTED}
Using REALM=eu0
&ldquo;splunk-otel-collector-chart&rdquo; has been added to your repositories
Using ACCESS_TOKEN={REDACTED}
Using REALM=eu0
Hang tight while we grab the latest from your chart repositories&mldr;
&mldr;Successfully got an update from the &ldquo;splunk-otel-collector-chart&rdquo; chart repository
Update Complete. ‚éàHappy Helming!‚éà</p></div></div></div></div><p>Install the OpenTelemetry Collector Helm chart with the following commands, do <strong>NOT</strong> edit this:</p><div class=tab-panel data-tab-group=R-tabs-71e7e9b31c511b190a53d945b24ba0b2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-395c497215783b586a5ba35cf8f9e233 aria-expanded=true data-tab-item=R-tab-5ade205167430c5bf55768631515900b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-71e7e9b31c511b190a53d945b24ba0b2","R-tab-5ade205167430c5bf55768631515900b")'>
<span class=tab-nav-text>Helm Install</span>
</button>
<button aria-controls=R-tab-id-9e4e57c16f949171dc825d634ba24755 aria-expanded=false data-tab-item=R-tab-6c094561bc91eef5ef3a721f8840f44d class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-71e7e9b31c511b190a53d945b24ba0b2","R-tab-6c094561bc91eef5ef3a721f8840f44d")'>
<span class=tab-nav-text>Helm Install Output</span></button></div><div class=tab-content-container><div id=R-tab-id-395c497215783b586a5ba35cf8f9e233 data-tab-item=R-tab-5ade205167430c5bf55768631515900b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;logsEngine=otel&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.profilingEnabled=true&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$INSTANCE</span><span class=s2>-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-9e4e57c16f949171dc825d634ba24755 data-tab-item=R-tab-6c094561bc91eef5ef3a721f8840f44d class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Using ACCESS_TOKEN={REDACTED}
</span></span><span class=line><span class=cl>Using REALM=eu0
</span></span><span class=line><span class=cl>NAME: splunk-otel-collector
</span></span><span class=line><span class=cl>LAST DEPLOYED: Fri May  7 11:19:01 2021
</span></span><span class=line><span class=cl>NAMESPACE: default
</span></span><span class=line><span class=cl>STATUS: deployed
</span></span><span class=line><span class=cl>REVISION: 1
</span></span><span class=line><span class=cl>TEST SUITE: None</span></span></code></pre></div></div></div></div></div><p>You can monitor the progress of the deployment by running <code>kubectl get pods</code> which should typically report a new pod is up and running after about 30 seconds.</p><p>Ensure the status is reported as Running before continuing.</p><div class=tab-panel data-tab-group=R-tabs-03a305a905d7f6d54a5e1617477c1268><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fd69e26b9097910d581cee3228e3550a aria-expanded=true data-tab-item=R-tab-9d7cd81d75072bc4182172d23e60224c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-03a305a905d7f6d54a5e1617477c1268","R-tab-9d7cd81d75072bc4182172d23e60224c")'>
<span class=tab-nav-text>Kubectl Get Pods</span>
</button>
<button aria-controls=R-tab-id-c50ce7bad754ef8c7cda84f5cc0bd8fe aria-expanded=false data-tab-item=R-tab-0107ee3547ee98f5636a58a2bf1ddc4d class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-03a305a905d7f6d54a5e1617477c1268","R-tab-0107ee3547ee98f5636a58a2bf1ddc4d")'>
<span class=tab-nav-text>Kubectl Get Pods Output</span></button></div><div class=tab-content-container><div id=R-tab-id-fd69e26b9097910d581cee3228e3550a data-tab-item=R-tab-9d7cd81d75072bc4182172d23e60224c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-c50ce7bad754ef8c7cda84f5cc0bd8fe data-tab-item=R-tab-0107ee3547ee98f5636a58a2bf1ddc4d class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                          READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>splunk-otel-collector-agent-2sk6k                             0/1     Running   0          10s
</span></span><span class=line><span class=cl>splunk-otel-collector-k8s-cluster-receiver-6956d4446f-gwnd7   0/1     Running   0          10s</span></span></code></pre></div></div></div></div></div><p>Ensure there are no errors by tailing the logs from the OpenTelemetry Collector pod. The output should look similar to the log output shown in the Output tab below.</p><p>Use the label set by the <code>helm</code> install to tail logs (You will need to press <code>ctrl+c</code> to exit). Or use the installed <code>k9s</code> terminal UI for bonus points!</p><div class=tab-panel data-tab-group=R-tabs-a9f39a70a015e1df0637e28d1add8a1e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f566c495b5d132764946e0e84e6e3e1e aria-expanded=true data-tab-item=R-tab-8c3366d1558c1469d6bbdf4e30c14540 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a9f39a70a015e1df0637e28d1add8a1e","R-tab-8c3366d1558c1469d6bbdf4e30c14540")'>
<span class=tab-nav-text>Kubectl Logs</span>
</button>
<button aria-controls=R-tab-id-0c11345cbc051619a07462a54156da25 aria-expanded=false data-tab-item=R-tab-a1f3395ee3f22fe351c01d5c36b55b05 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-a9f39a70a015e1df0637e28d1add8a1e","R-tab-a1f3395ee3f22fe351c01d5c36b55b05")'>
<span class=tab-nav-text>Kubectl Logs Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f566c495b5d132764946e0e84e6e3e1e data-tab-item=R-tab-8c3366d1558c1469d6bbdf4e30c14540 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl logs -l <span class=nv>app</span><span class=o>=</span>splunk-otel-collector -f --container otel-collector</span></span></code></pre></div></div></div><div id=R-tab-id-0c11345cbc051619a07462a54156da25 data-tab-item=R-tab-a1f3395ee3f22fe351c01d5c36b55b05 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>2021-03-21T16:11:10.900Z INFO service/service.go:364 Starting receivers&mldr;
2021-03-21T16:11:10.900Z INFO builder/receivers_builder.go:70 Receiver is starting&mldr; {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;prometheus&rdquo;, &ldquo;component_name&rdquo;: &ldquo;prometheus&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:75 Receiver started. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;prometheus&rdquo;, &ldquo;component_name&rdquo;: &ldquo;prometheus&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:70 Receiver is starting&mldr; {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.009Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external>k8sclusterreceiver@v0.21.0</a>/watcher.go:195 Configured Kubernetes MetadataExporter {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;exporter_name&rdquo;: &ldquo;signalfx&rdquo;}
2021-03-21T16:11:11.009Z INFO builder/receivers_builder.go:75 Receiver started. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.009Z INFO healthcheck/handler.go:128 Health Check state change {&ldquo;component_kind&rdquo;: &ldquo;extension&rdquo;, &ldquo;component_type&rdquo;: &ldquo;health_check&rdquo;, &ldquo;component_name&rdquo;: &ldquo;health_check&rdquo;, &ldquo;status&rdquo;: &ldquo;ready&rdquo;}
2021-03-21T16:11:11.009Z INFO service/service.go:267 Everything is ready. Begin running and processing data.
2021-03-21T16:11:11.009Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external>k8sclusterreceiver@v0.21.0</a>/receiver.go:59 Starting shared informers and wait for initial cache sync. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}
2021-03-21T16:11:11.281Z INFO <a href=mailto:k8sclusterreceiver@v0.21.0 rel=external>k8sclusterreceiver@v0.21.0</a>/receiver.go:75 Completed syncing shared informer caches. {&ldquo;component_kind&rdquo;: &ldquo;receiver&rdquo;, &ldquo;component_type&rdquo;: &ldquo;k8s_cluster&rdquo;, &ldquo;component_name&rdquo;: &ldquo;k8s_cluster&rdquo;}</p></div></div></div></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Deleting a failed installation</summary><div class=box-content><p>If you make an error installing the OpenTelemetry Collector you can start over by deleting the installation using:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><hr><h2 id=2-validate-metrics-in-the-ui>2. Validate metrics in the UI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the Splunk UI, click the <strong>&#187;</strong> bottom left and click on <strong>Infrastructure</strong>.</p><p><a href=#R-image-376a354c4a7867e6ab925883dabebfb8 class=lightbox-link><img alt="Selecting the Kubernetes Navigator Map" class="lazy lightbox figure-image" loading=lazy src=../images/clustermap-nav.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-376a354c4a7867e6ab925883dabebfb8><img alt="Selecting the Kubernetes Navigator Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/clustermap-nav.png></a></p><p>Under <strong>Containers</strong> click on <strong>Kubernetes</strong> to open the Kubernetes Navigator Cluster Map to ensure metrics are being sent in.</p><p>Validate that your cluster is discovered and reported by finding your cluster (in the workshop you will see many other clusters). To find your cluster name run the following command and copy the output to your clipboard:</p><div class=tab-panel data-tab-group=R-tabs-afc717e3c9e802fbdd20912a2418e48d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-280724e2a9ed7feb609fbfbb272b2b70 aria-expanded=true data-tab-item=R-tab-95dea3d7a16b0f04149052ad6ac43c92 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-afc717e3c9e802fbdd20912a2418e48d","R-tab-95dea3d7a16b0f04149052ad6ac43c92")'>
<span class=tab-nav-text>Echo Cluster Name</span></button></div><div class=tab-content-container><div id=R-tab-id-280724e2a9ed7feb609fbfbb272b2b70 data-tab-item=R-tab-95dea3d7a16b0f04149052ad6ac43c92 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span>-k3s-cluster</span></span></code></pre></div></div></div></div></div><p>Then in the UI, click on the &ldquo;Cluster: - " menu just below the Splunk Logo, paste the Cluster name you just copied into the search box, click the box to select your cluster, and finally click off the menu into white space to apply the filter.</p><p><a href=#R-image-47c95d19512075dbcd06c43f63759e17 class=lightbox-link><img alt="K8S Clusters Filter" class="lazy lightbox figure-image" loading=lazy src=../images/search-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-47c95d19512075dbcd06c43f63759e17><img alt="K8S Clusters Filter" class="lazy lightbox lightbox-image" loading=lazy src=../images/search-k3s-cluster.png></a></p><p><a href=#R-image-7c0476be5f9bf6c021c38780b6130e56 class=lightbox-link><img alt="Select K8S Cluster" class="lazy lightbox figure-image" loading=lazy src=../images/selecting-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7c0476be5f9bf6c021c38780b6130e56><img alt="Select K8S Cluster" class="lazy lightbox lightbox-image" loading=lazy src=../images/selecting-k3s-cluster.png></a></p><p><a href=#R-image-3e983635970d30132e1323469827c2da class=lightbox-link><img alt="Filtered K8S Cluster" class="lazy lightbox figure-image" loading=lazy src=../images/filtered-k3s-cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3e983635970d30132e1323469827c2da><img alt="Filtered K8S Cluster" class="lazy lightbox lightbox-image" loading=lazy src=../images/filtered-k3s-cluster.png></a></p><p>To examine the health of your node, hover over the pale blue background of your cluster, then click on the blue magnifying glass <a href=#R-image-f1a1567b39634831f41bfabda015cbb6 class=lightbox-link><img alt="Magnifying Glass" class="inline lazy lightbox figure-image" loading=lazy src="../images/blue-cross.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f1a1567b39634831f41bfabda015cbb6><img alt="Magnifying Glass" class="inline lazy lightbox lightbox-image" loading=lazy src="../images/blue-cross.png?classes=inline&height=25px"></a> that appears in the top left-hand corner.</p><p>This will drill down to the node level. Next, open the Metrics sidebar by clicking on the sidebar button.</p><p>Once it is open, you can use the slider on the side to explore the various charts relevant to your cluster/node: CPU, Memory, Network, Events etc.</p><p><a href=#R-image-923675caa2f74571d891289a9303807a class=lightbox-link><img alt="Sidebar metrics" class="lazy lightbox figure-image" loading=lazy src=../images/explore-metrics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-923675caa2f74571d891289a9303807a><img alt="Sidebar metrics" class="lazy lightbox lightbox-image" loading=lazy src=../images/explore-metrics.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Get Data In</h1><article class=default><header class=headline></header><h1 id=deploying-nginx-in-k3s>Deploying NGINX in K3s</h1><ul><li>Deploy a NGINX ReplicaSet into your K3s cluster and confirm the discovery of your NGINX deployment.</li><li>Run a load test to create metrics and confirm them streaming into Splunk Observability Cloud!</li></ul><hr><h2 id=1-start-your-nginx>1. Start your NGINX<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Verify the number of pods running in the Splunk UI by selecting the <strong>WORKLOADS</strong> tab. This should give you an overview of the workloads on your cluster.</p><p><a href=#R-image-db17e242ab9bc4a4531b30de762ffc1d class=lightbox-link><img alt="Workload Agent" class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-workloads.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-db17e242ab9bc4a4531b30de762ffc1d><img alt="Workload Agent" class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-workloads.png></a></p><p>Note the single agent container running per node among the default Kubernetes pods. This single container will monitor all the pods and services being deployed on this node!</p><p>Now switch back to the default cluster node view by selecting the <strong>MAP</strong> tab and selecting your cluster again.</p><p>In your AWS/EC2 or Multipass shell session change into the <code>nginx</code> directory:</p><div class=tab-panel data-tab-group=R-tabs-256d0d6e7ecef4b096da21cd4e68f91a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4985741a3959eeb696ad1e3464541675 aria-expanded=true data-tab-item=R-tab-22da6bf3f52ed93a32eb3f1bced7cd74 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-256d0d6e7ecef4b096da21cd4e68f91a","R-tab-22da6bf3f52ed93a32eb3f1bced7cd74")'>
<span class=tab-nav-text>Change Directory</span></button></div><div class=tab-content-container><div id=R-tab-id-4985741a3959eeb696ad1e3464541675 data-tab-item=R-tab-22da6bf3f52ed93a32eb3f1bced7cd74 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/k3s/nginx</span></span></code></pre></div></div></div></div></div><hr><h2 id=2-create-nginx-deployment>2. Create NGINX deployment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create the NGINX ConfigMap<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> using the <code>nginx.conf</code> file:</p><div class=tab-panel data-tab-group=R-tabs-18b255ad30254b2d807ce5502889279f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-adfbc7997707d0b6d2b9bc2f454d88d4 aria-expanded=true data-tab-item=R-tab-ad8b1af01535d7adb30e87168670ecc5 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-18b255ad30254b2d807ce5502889279f","R-tab-ad8b1af01535d7adb30e87168670ecc5")'>
<span class=tab-nav-text>Kubectl Configmap Create</span>
</button>
<button aria-controls=R-tab-id-6265eebc9f6c1088af39b8bcc726c917 aria-expanded=false data-tab-item=R-tab-a617ddcf45ddb19104887dc77307d1fd class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-18b255ad30254b2d807ce5502889279f","R-tab-a617ddcf45ddb19104887dc77307d1fd")'>
<span class=tab-nav-text>Kubectl Create Configmap Output</span></button></div><div class=tab-content-container><div id=R-tab-id-adfbc7997707d0b6d2b9bc2f454d88d4 data-tab-item=R-tab-ad8b1af01535d7adb30e87168670ecc5 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create configmap nginxconfig --from-file<span class=o>=</span>nginx.conf</span></span></code></pre></div></div></div><div id=R-tab-id-6265eebc9f6c1088af39b8bcc726c917 data-tab-item=R-tab-a617ddcf45ddb19104887dc77307d1fd class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>configmap/nginxconfig created</p></div></div></div></div><p>Then create the deployment:</p><div class=tab-panel data-tab-group=R-tabs-2180ff7415bc0fa58b873a46935d7b58><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f3868af5cfa801e54c742072c98fa2e0 aria-expanded=true data-tab-item=R-tab-06d0453109ac7fc052db64c93c266c25 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2180ff7415bc0fa58b873a46935d7b58","R-tab-06d0453109ac7fc052db64c93c266c25")'>
<span class=tab-nav-text>Kubectl Create Deployment</span>
</button>
<button aria-controls=R-tab-id-d9b1e2bbf9d618f5e79540adea9b5ae1 aria-expanded=false data-tab-item=R-tab-5a41de4afccf7edc3f48840b1c770522 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-2180ff7415bc0fa58b873a46935d7b58","R-tab-5a41de4afccf7edc3f48840b1c770522")'>
<span class=tab-nav-text>Kubectl Create Deployment Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f3868af5cfa801e54c742072c98fa2e0 data-tab-item=R-tab-06d0453109ac7fc052db64c93c266c25 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create -f nginx-deployment.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-d9b1e2bbf9d618f5e79540adea9b5ae1 data-tab-item=R-tab-5a41de4afccf7edc3f48840b1c770522 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>deployment.apps/nginx created
service/nginx created</p></div></div></div></div><p>Next, we will deploy Locust<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> which is an open-source tool used for creating a load test against NGINX:</p><div class=tab-panel data-tab-group=R-tabs-6d763fb0202280fb3c41baac5b6dc1c5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-86cfbbc6054ce660257fea5ebde2dad0 aria-expanded=true data-tab-item=R-tab-06d0453109ac7fc052db64c93c266c25 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6d763fb0202280fb3c41baac5b6dc1c5","R-tab-06d0453109ac7fc052db64c93c266c25")'>
<span class=tab-nav-text>Kubectl Create Deployment</span>
</button>
<button aria-controls=R-tab-id-c1db9ee391ba0f4dc88a9c6e8b8474ea aria-expanded=false data-tab-item=R-tab-5a41de4afccf7edc3f48840b1c770522 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-6d763fb0202280fb3c41baac5b6dc1c5","R-tab-5a41de4afccf7edc3f48840b1c770522")'>
<span class=tab-nav-text>Kubectl Create Deployment Output</span></button></div><div class=tab-content-container><div id=R-tab-id-86cfbbc6054ce660257fea5ebde2dad0 data-tab-item=R-tab-06d0453109ac7fc052db64c93c266c25 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create -f locust-deployment.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-c1db9ee391ba0f4dc88a9c6e8b8474ea data-tab-item=R-tab-5a41de4afccf7edc3f48840b1c770522 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>deployment.apps/nginx-loadgenerator created
service/nginx-loadgenerator created</p></div></div></div></div><p>Validate the deployment has been successful and that the Locust and NGINX pods are running.</p><p>If you have the Splunk UI open you should see new Pods being started and containers being deployed.</p><p>It should only take around 20 seconds for the pods to transition into a Running state. In the Splunk UI you will have a cluster that looks like the screenshot below:</p><p><a href=#R-image-8d79858b019ade537ba48677c815c153 class=lightbox-link><img alt="back to Cluster" class="lazy lightbox figure-image" loading=lazy src=../../images/cluster.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8d79858b019ade537ba48677c815c153><img alt="back to Cluster" class="lazy lightbox lightbox-image" loading=lazy src=../../images/cluster.png></a></p><p>If you select the <strong>WORKLOADS</strong> tab again you will now see that there is a new ReplicaSet and a deployment added for NGINX:</p><p><a href=#R-image-9d8d720dcb12bb773db56f378423b9ce class=lightbox-link><img alt="NGINX loaded" class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-workloads-nginx.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d8d720dcb12bb773db56f378423b9ce><img alt="NGINX loaded" class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-workloads-nginx.png></a></p><hr><p>Let&rsquo;s validate this in your shell as well:</p><div class=tab-panel data-tab-group=R-tabs-688d083be497fd1696cdd0c63de58afe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b1c8fcdeadb18ccb77ee74f279180374 aria-expanded=true data-tab-item=R-tab-9d7cd81d75072bc4182172d23e60224c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-688d083be497fd1696cdd0c63de58afe","R-tab-9d7cd81d75072bc4182172d23e60224c")'>
<span class=tab-nav-text>Kubectl Get Pods</span>
</button>
<button aria-controls=R-tab-id-7b798e0b24f9a3e6b5089b47932ae8bd aria-expanded=false data-tab-item=R-tab-0107ee3547ee98f5636a58a2bf1ddc4d class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-688d083be497fd1696cdd0c63de58afe","R-tab-0107ee3547ee98f5636a58a2bf1ddc4d")'>
<span class=tab-nav-text>Kubectl Get Pods Output</span></button></div><div class=tab-content-container><div id=R-tab-id-b1c8fcdeadb18ccb77ee74f279180374 data-tab-item=R-tab-9d7cd81d75072bc4182172d23e60224c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-7b798e0b24f9a3e6b5089b47932ae8bd data-tab-item=R-tab-0107ee3547ee98f5636a58a2bf1ddc4d class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>NAME READY STATUS RESTARTS AGE
splunk-otel-collector-k8s-cluster-receiver-77784c659c-ttmpk 1/1 Running 0 9m19s
splunk-otel-collector-agent-249rd 1/1 Running 0 9m19s
svclb-nginx-vtnzg 1/1 Running 0 5m57s
nginx-7b95fb6b6b-7sb9x 1/1 Running 0 5m57s
nginx-7b95fb6b6b-lnzsq 1/1 Running 0 5m57s
nginx-7b95fb6b6b-hlx27 1/1 Running 0 5m57s
nginx-7b95fb6b6b-zwns9 1/1 Running 0 5m57s
svclb-nginx-loadgenerator-nscx4 1/1 Running 0 2m20s
nginx-loadgenerator-755c8f7ff6-x957q 1/1 Running 0 2m20s</p></div></div></div></div><hr><h2 id=3-run-locust-load-test>3. Run Locust load test<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Locust, an open-source load generator, is available on port 8083 of the EC2 instance&rsquo;s IP address. Open a new tab in your web browser and go to <code>http://{==EC2-IP==}:8083/</code>, you will then be able to see the Locust running.</p><p><a href=#R-image-636de97ef674a45c3034bc6b1c4d5bf9 class=lightbox-link><img alt=Locust class="lazy lightbox figure-image" loading=lazy src=../../images/nginx-locust.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-636de97ef674a45c3034bc6b1c4d5bf9><img alt=Locust class="lazy lightbox lightbox-image" loading=lazy src=../../images/nginx-locust.png></a></p><p>Set the <strong>Spawn rate</strong> to 2 and click <strong>Start Swarming</strong>.</p><p><a href=#R-image-10b2aa4fed3d2460dff7d2ab506eb899 class=lightbox-link><img alt="Locust Spawn Rate" class="lazy lightbox figure-image" loading=lazy src=../../images/nginx-locust-spawn-rate.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-10b2aa4fed3d2460dff7d2ab506eb899><img alt="Locust Spawn Rate" class="lazy lightbox lightbox-image" loading=lazy src=../../images/nginx-locust-spawn-rate.png></a></p><p>This will start a gentle continuous load on the application.</p><p><a href=#R-image-63793c6c36f02dabd2698c35085404fd class=lightbox-link><img alt="Locust Statistics" class="lazy lightbox figure-image" loading=lazy src=../../images/nginx-locust-statistics.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-63793c6c36f02dabd2698c35085404fd><img alt="Locust Statistics" class="lazy lightbox lightbox-image" loading=lazy src=../../images/nginx-locust-statistics.png></a></p><p>As you can see from the above screenshot, most of the calls will report a fail, this is expected, as we have not yet deployed the application behind it, however, NGINX is reporting on your attempts and you should be able to see those metrics.</p><p>Validate you are seeing those metrics in the UI by selecting <strong>Dashboards ‚Üí Built-in Dashboard Groups ‚Üí NGINX ‚Üí NGINX Servers</strong>. Using the <strong>Overrides</strong> filter on <code>k8s.cluster.name:</code>, find the name of your cluster as returned by <code>echo $INSTANCE-k3s-cluster</code> in the terminal.</p><p><a href=#R-image-9c5b2a8077bb8eaf83eae68612e39ab7 class=lightbox-link><img alt="NGINX Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/nginx-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9c5b2a8077bb8eaf83eae68612e39ab7><img alt="NGINX Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/nginx-dashboard.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A ConfigMap is an API object used to store non-confidential data in key-value pairs. Pods can consume ConfigMaps as environment variables, command-line arguments, or configuration files in a volume. A ConfigMap allows you to decouple environment-specific configuration from your container images so that your applications are easily portable.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://locust.io/ rel=external>What is Locust?</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=working-with-dashboards>Working with Dashboards</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>20 minutes</span>
</span>&nbsp;<ul><li>Introduction to the Dashboards and Charts</li><li>Editing and creating charts</li><li>Filtering and analytical functions</li><li>Using formulas</li><li>Saving charts in a dashboard</li><li>Introduction to SignalFlow</li></ul><hr><h2 id=1-dashboards>1. Dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Dashboards are groupings of charts and visualizations of metrics. Well-designed dashboards can provide useful and actionable insight into your system at a glance. Dashboards can be complex or contain just a few charts that drill down only into the data you want to see.</p><p>During this module, we are going to create the following charts and dashboard and connect them to your Team page.</p><p><a href=#R-image-c53fc6bb83a51d225f1ee81185990e90 class=lightbox-link><img alt="Example Dashboard" class="lazy lightbox figure-image" loading=lazy src=../images/example-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c53fc6bb83a51d225f1ee81185990e90><img alt="Example Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../images/example-dashboard.png></a></p><hr><h2 id=2-your-teams-page>2. Your Teams&rsquo; Page<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the <a href=#R-image-6829628bb0cd3dcd3d7e30186becc482 class=lightbox-link><img alt="Dashboards button" class="inline lazy lightbox figure-image" loading=lazy src="../images/dashboards.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6829628bb0cd3dcd3d7e30186becc482><img alt="Dashboards button" class="inline lazy lightbox lightbox-image" loading=lazy src="../images/dashboards.png?classes=inline&height=25px"></a> from the navbar. As you have already been assigned to a team, you will land on the team dashboard. We use the <em><strong>Example Team</strong></em> as an example here. The one in your workshop will be different!</p><p><a href=#R-image-3e1b0cca440be774a2bf9f1fa1202849 class=lightbox-link><img alt="Team Dashboard1" class="lazy lightbox figure-image" loading=lazy src=../images/team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3e1b0cca440be774a2bf9f1fa1202849><img alt="Team Dashboard1" class="lazy lightbox lightbox-image" loading=lazy src=../images/team-dashboard.png></a></p><p>This page shows the total number of team members, how many active alerts for your team and all dashboards that are assigned to your team. Right now there are no dashboards assigned but as stated before, we will add the new dashboard that you will create to your Teams page later.</p><hr><h2 id=3-sample-charts>3. Sample Charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To continue, click on <strong>All Dashboards</strong> in the top right corner of the screen. This brings you to the view that shows all the available dashboards, including the pre-built ones.</p><p><a href=#R-image-1788a530dacfe64f66f3403004074e6c class=lightbox-link><img alt="Sample Data" class="lazy lightbox figure-image" loading=lazy src=../images/sample-data.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1788a530dacfe64f66f3403004074e6c><img alt="Sample Data" class="lazy lightbox lightbox-image" loading=lazy src=../images/sample-data.png></a></p><p>If you are already receiving metrics from a Cloud API integration or another service through the Splunk Agent you will see relevant dashboards for these services.</p><hr><h2 id=4-inspecting-the-sample-data>4. Inspecting the Sample Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Among the dashboards, you will see a Dashboard group called <strong>Sample Data</strong>. Expand the <strong>Sample Data</strong> dashboard group by clicking on it, and then click on the <strong>Sample Charts</strong> dashboard.</p><p>In the Sample Charts dashboard, you can see a selection of charts that show a sample of the various styles, colors and formats you can apply to your charts in the dashboards.</p><p>Have a look through all the dashboards in this dashboard group (<strong>PART 1</strong>, <strong>PART 2</strong>, <strong>PART 3</strong> and <strong>INTRO TO SPLUNK OBSERVABILITY CLOUD</strong>)</p><p><a href=#R-image-ef086254387a78422d75c4c9129fe33b class=lightbox-link><img alt="Sample Charts" class="lazy lightbox figure-image" loading=lazy src=../images/sample-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ef086254387a78422d75c4c9129fe33b><img alt="Sample Charts" class="lazy lightbox lightbox-image" loading=lazy src=../images/sample-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 3. Dashboards</h1><article class=default><header class=headline></header><h1 id=editing-charts>Editing charts</h1><h2 id=1-editing-a-chart>1. Editing a chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Select the <strong>SAMPLE CHARTS</strong> dashboard and then click on the three dots <strong><code>...</code></strong> on the <strong>Latency histogram</strong> chart, then on <strong>Open</strong> (or you can click on the name of the chart which here is <strong>Latency histogram</strong>).</p><p><a href=#R-image-bf35fdfbd11155023d6cbd891547e47d class=lightbox-link><img alt="Sample Charts" class="lazy lightbox figure-image" loading=lazy src=../../images/latency-histogram-open.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bf35fdfbd11155023d6cbd891547e47d><img alt="Sample Charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/latency-histogram-open.png></a></p><p>You will see the plot options, current plot and signal (metric) for the <strong>Latency histogram</strong> chart in the chart editor UI.</p><p><a href=#R-image-efa8db283e1337c8ab6c307a955327c3 class=lightbox-link><img alt="Latency Histogram" class="lazy lightbox figure-image" loading=lazy src=../../images/latency-histogram.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-efa8db283e1337c8ab6c307a955327c3><img alt="Latency Histogram" class="lazy lightbox lightbox-image" loading=lazy src=../../images/latency-histogram.png></a></p><p>In the <strong>Plot Editor</strong> tab under <strong>Signal</strong> you see the metric <strong><code>demo.trans.latency</code></strong> we are currently plotting.</p><p><a href=#R-image-161a57485a48ba0ac77bfc8e3ab89b24 class=lightbox-link><img alt="Plot Editor" class="lazy lightbox figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-161a57485a48ba0ac77bfc8e3ab89b24><img alt="Plot Editor" class="lazy lightbox lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>You will see a number of <strong>Line</strong> plots. The number <strong><code>18 ts</code></strong> indicates that we are plotting 18 metric time series in the chart.</p><p>Click on the different chart type icons to explore each of the visualizations. Notice their name while you swipe over them. For example, click on the Heat Map icon:</p><p><a href=#R-image-f019ae594118983d6c35000cf817fa9c class=lightbox-link><img alt="Chart Types" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Editing-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f019ae594118983d6c35000cf817fa9c><img alt="Chart Types" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Editing-2.png></a></p><p>See how the chart changes to a heat map.</p><p><a href=#R-image-9e090de266df2e51bf4e36cd3e001575 class=lightbox-link><img alt="Change to Heatmap" class="lazy lightbox figure-image" loading=lazy src=../../images/change-to-heatmap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e090de266df2e51bf4e36cd3e001575><img alt="Change to Heatmap" class="lazy lightbox lightbox-image" loading=lazy src=../../images/change-to-heatmap.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>You can use different charts to visualize your metrics - you choose which chart type fits best for the visualization you want to have.</p><p>For more info on the different chart types see <a href=https://docs.splunk.com/Observability/data-visualization/charts/chart-types.html#chart-types rel=external>Choosing a chart type.</a></p></div></details><p>Click on the <strong>Line</strong> chart type and you will see the line plot.</p><p><a href=#R-image-36bbe119589d1d57c977a0bb14d0b318 class=lightbox-link><img alt="Line Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Editing-3b.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-36bbe119589d1d57c977a0bb14d0b318><img alt="Line Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Editing-3b.png></a></p><h2 id=2-changing-the-time-window>2. Changing the time window<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can also increase the time window of the chart by changing the time to <strong>Past 15 minutes</strong> by selecting from the <strong>Time</strong> dropdown.</p><p><a href=#R-image-de5128877d9a1fd8a9219eeb482c5edc class=lightbox-link><img alt="Line Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/line-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-de5128877d9a1fd8a9219eeb482c5edc><img alt="Line Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/line-chart.png></a></p><h2 id=3-viewing-the-data-table>3. Viewing the Data Table<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the <strong>Data Table</strong> tab.</p><p><a href=#R-image-b7cad89bfb25a8592a80347aeb7305b6 class=lightbox-link><img alt="Data Table" class="lazy lightbox figure-image" loading=lazy src=../../images/data-table.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b7cad89bfb25a8592a80347aeb7305b6><img alt="Data Table" class="lazy lightbox lightbox-image" loading=lazy src=../../images/data-table.png></a></p><p>You now see 18 rows, each representing a metric time series with a number of columns. These columns represent the dimensions of the metric. The dimensions for <code>demo.trans.latency</code> are:</p><ul><li><code>demo_datacenter</code></li><li><code>demo_customer</code></li><li><code>demo_host</code></li></ul><p>In the <strong><code>demo_datacenter</code></strong> column you see that there are two data centers, <strong>Paris</strong> and <strong>Tokyo</strong>, for which we are getting metrics.</p><p>If you move your cursor over the lines in the chart horizontally you will see the data table update accordingly. If you click on one of the lines in the chart you will see a pinned value appear in the data table.</p><hr><p>Now click on <strong>Plot editor</strong> again to close the Data Table and let&rsquo;s save this chart into a dashboard for later use!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=saving-charts>Saving charts</h1><h2 id=1-saving-a-chart>1. Saving a chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To start saving your chart, lets give it a name and description. Click the name of the chart <strong>Copy of Latency Histogram</strong> and rename it to <strong>&ldquo;Active Latency&rdquo;</strong>.</p><p>To change the description click on <strong>Spread of latency values across time.</strong> and change this to <strong>Overview of latency values in real-time.</strong></p><p><a href=#R-image-f908b7dd6ff052ff01467f4a17038c34 class=lightbox-link><img alt="Save Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/save-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f908b7dd6ff052ff01467f4a17038c34><img alt="Save Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/save-chart.png></a></p><p>Click the <span class="btn cstyle button blue noicon"><span><span class=title>Save As</span></span></span> button. Make sure your chart has a name, it will use the name <strong>Active Latency</strong> the you defined in the previous step, but you can edit it here if needed.</p><p>Press the <span class="btn cstyle button blue noicon"><span><span class=title>Ok</span></span></span>
button to continue.</p><p><a href=#R-image-096ff6f5c4608bda5400e38e2de20215 class=lightbox-link><img alt="Name Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/name-chart.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-096ff6f5c4608bda5400e38e2de20215><img alt="Name Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/name-chart.png></a></p><h2 id=2-creating-a-dashboard>2. Creating a dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the <strong>Choose dashboard</strong> dialog, we need to create a new dashboard, click on the <span class="btn cstyle button blue noicon"><span><span class=title>New Dashboard</span></span></span>
button.</p><p><a href=#R-image-25ec21732118f401152c3e7eef8ebe4c class=lightbox-link><img alt="Create Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/create-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-25ec21732118f401152c3e7eef8ebe4c><img alt="Create Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create-dashboard.png></a></p><p>You will now see the <strong>New Dashboard</strong> Dialog. In here you can give you dashboard a name and description, and set <strong>Read and Write Permissions</strong>.</p><p>Please use your own name in the following format to give your dashboard a name e.g. <strong>YOUR_NAME-Dashboard</strong>.</p><p>Please replace <strong>YOUR_NAME</strong> with your own name, change the dashboard permissions to <em>Restricted Read and Write access</em>, and verify your user can read/write.</p><p><a href=#R-image-cb5575875764912500c59bf94f9fd0e2 class=lightbox-link><img alt="Name Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/name-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb5575875764912500c59bf94f9fd0e2><img alt="Name Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/name-dashboard.png></a></p><p>You should see you own login information displayed, meaning you are now the only one who can edit this dashboard. Of course you have the option to add other users or teams from the drop box below that may edit your dashboard and charts, but for now make sure you change it back to <em>Everyone can Read or Write</em> to remove any restrictions and press the <span class="btn cstyle button blue noicon"><span><span class=title>Save</span></span></span>
Button to continue.</p><p>Your new dashboard is now available and selected so you can save your chart in your new dashboard.</p><p><a href=#R-image-a3d0d1023603d705fb47814a44e998d1 class=lightbox-link><img alt="Choose Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/choose-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a3d0d1023603d705fb47814a44e998d1><img alt="Choose Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/choose-dashboard.png></a></p><p>Make sure you have your dashboard selected and press the <span class="btn cstyle button blue noicon"><span><span class=title>Ok</span></span></span> button.</p><p>You will now be taken to your dashboard like below. You can see at the top left that your <strong>YOUR_NAME-DASHBOARD</strong> is part of a Dashboard Group <strong>YOUR_NAME-Dashboard</strong>. You can add other dashboards to this dashboard group.</p><p><a href=#R-image-204cacd77bfbaa8973ebb73bada8785e class=lightbox-link><img alt="New Dashboard Group" class="lazy lightbox figure-image" loading=lazy src=../../images/new-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-204cacd77bfbaa8973ebb73bada8785e><img alt="New Dashboard Group" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new-dashboard-group.png></a></p><hr><h2 id=3-add-to-team-page>3. Add to Team page<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>It is common practice to link dashboards that are relevant to a Team to a teams page. So let&rsquo;s add your dashboard to the team page for easy access later. Use the <a href=#R-image-c964cb2249d99e0ced3f07ce4323f58e class=lightbox-link><img alt="dashboards button" class="inline lazy lightbox figure-image" loading=lazy src="../../images/dashboards.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c964cb2249d99e0ced3f07ce4323f58e><img alt="dashboards button" class="inline lazy lightbox lightbox-image" loading=lazy src="../../images/dashboards.png?classes=inline&height=25px"></a> from the navbar again.</p><p>This will bring you to your teams dashboard, We use the team <em><strong>Example Team</strong></em> as an example here, the workshop one will be different.</p><p><a href=#R-image-42dbaab5e25327661548df1173176bb4 class=lightbox-link><img alt="Team Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-42dbaab5e25327661548df1173176bb4><img alt="Team Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/team-dashboard.png></a></p><p>Press the <span class="btn cstyle button transparent noicon"><span><span class=title>+</span></span></span> <em>Add Dashboard Group</em> button to add you dashboard to the team page.</p><p>This will bring you to the <strong>Select a dashboard group to link to this team</strong> dialog.
Type your name (that you used above) in the search box to find your Dashboard. Select it so its highlighted and click the <strong>Ok</strong> button to add your dashboard.</p><p><a href=#R-image-cda2c7a72dd0e8d066b26ce242a2014a class=lightbox-link><img alt="Select Dashboard Group" class="lazy lightbox figure-image" loading=lazy src=../../images/select-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cda2c7a72dd0e8d066b26ce242a2014a><img alt="Select Dashboard Group" class="lazy lightbox lightbox-image" loading=lazy src=../../images/select-dashboard-group.png></a></p><p>Your dashboard group will appear as part of the team page. Please note during the course of the workshop many more will appear here.</p><p><a href=#R-image-3fd31aeedb7b993e744ff2de8391c7c6 class=lightbox-link><img alt="New Team Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/new-team-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3fd31aeedb7b993e744ff2de8391c7c6><img alt="New Team Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new-team-dashboard.png></a></p><hr><p>Now click on the link for your Dashboard to add more charts!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 30, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=33-using-filters--formulas>3.3 Using Filters & Formulas</h1><h2 id=1-creating-a-new-chart>1 Creating a new chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s now create a new chart and save it in our dashboard!</p><p>Select the plus icon (top right of the UI) and from the drop down, choose the option <strong>Chart</strong>.
Or click on the <span class="btn cstyle button blue noicon"><span><span class=title>+ New Chart</span></span></span> Button to create a new chart.</p><p><a href=#R-image-4bf745e535f390c3c0f020457200523c class=lightbox-link><img alt="Create new chart" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4bf745e535f390c3c0f020457200523c><img alt="Create new chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-0.png></a></p><p>You will now see a chart template like the following.</p><p><a href=#R-image-a3b67f29d739f8f67987b77655a61f2e class=lightbox-link><img alt="Empty Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Editing-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a3b67f29d739f8f67987b77655a61f2e><img alt="Empty Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Editing-6.png></a></p><p>Let&rsquo;s enter a metric to plot. We are still going to use the metric <strong><code>demo.trans.latency</code></strong>.</p><p>In the <strong>Plot Editor</strong> tab under <strong>Signal</strong> enter <strong><code>demo.trans.latency</code></strong>.</p><p><a href=#R-image-def9297da6188a7a68cf39e06f7cee4b class=lightbox-link><img alt=Signal class="lazy lightbox figure-image" loading=lazy src=../../images/plot-editor.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-def9297da6188a7a68cf39e06f7cee4b><img alt=Signal class="lazy lightbox lightbox-image" loading=lazy src=../../images/plot-editor.png></a></p><p>You should now have a familiar line chart. Please switch the time to 15 mins.</p><p><a href=#R-image-2115c2c2244b2121b3e1d955bb4baee3 class=lightbox-link><img alt=Signal class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-10.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2115c2c2244b2121b3e1d955bb4baee3><img alt=Signal class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-10.png></a></p><h2 id=2-filtering-and-analytics>2. Filtering and Analytics<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s now select the <strong>Paris</strong> datacenter to do some analytics - for that we will use a filter.</p><p>Let&rsquo;s go back to the <strong>Plot Editor</strong> tab and click on <span class="btn cstyle button blue noicon"><span><span class=title>Add Filter</span></span></span>
, wait until it automatically populates, choose <strong><code>demo_datacenter</code></strong>, and then <strong><code>Paris</code></strong>.</p><p><a href=#R-image-da721c18ef5c66218cba427186a3fa0d class=lightbox-link><img alt=Filter class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-da721c18ef5c66218cba427186a3fa0d><img alt=Filter class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-1.png></a></p><p>In the <strong>F(x)</strong> column, add the analytic function <strong><code>Percentile:Aggregation</code></strong>, and leave the value to <strong><code>95</code></strong> (click outside to confirm).</p><p><a href=#R-image-6bcdbfdfe0204c7eb6a4ff1d8516d553 class=lightbox-link><img alt=Analytics class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6bcdbfdfe0204c7eb6a4ff1d8516d553><img alt=Analytics class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-2.png></a></p><p>For info on the <strong>Percentile</strong> function and the other functions see <a href=https://docs.splunk.com/Observability/data-visualization/charts/gain-insights-through-chart-analytics.html#gain-insights-through-chart-analytics rel=external>Chart Analytics</a>.</p><hr><h2 id=3-using-timeshift-analytical-function>3. Using Timeshift analytical function<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s now compare with older metrics. Click on <strong><code>...</code></strong> and then on <strong>Clone</strong> in the dropdown to clone Signal <strong>A</strong>.</p><p><a href=#R-image-dc3e6090119f4640323c902e3e18e821 class=lightbox-link><img alt="Clone Signal" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dc3e6090119f4640323c902e3e18e821><img alt="Clone Signal" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-3.png></a></p><p>You will see a new row identical to <strong>A</strong>, called <strong>B</strong>, both visible and plotted.</p><p><a href=#R-image-2c254a9574653b4581c0ef6975ca80a6 class=lightbox-link><img alt="Plot Editor" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c254a9574653b4581c0ef6975ca80a6><img alt="Plot Editor" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-4.png></a></p><p>For Signal <strong>B</strong>, in the <strong>F(x)</strong> column add the analytic function <strong>Timeshift</strong> and enter <strong><code>1w</code></strong> (or 7d for 7 days), and click outside to confirm.</p><p><a href=#R-image-848454f28e9472c830e6ea513607e131 class=lightbox-link><img alt=Timeshift class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-848454f28e9472c830e6ea513607e131><img alt=Timeshift class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-5.png></a></p><p>Click on the cog on the far right, and choose a <strong>Plot Color</strong> e.g. pink, to change color for the plot of <strong>B</strong>.</p><p><a href=#R-image-6d51bf1616b30b912cffc4986ba4c9d7 class=lightbox-link><img alt="Change Plot Colour" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d51bf1616b30b912cffc4986ba4c9d7><img alt="Change Plot Colour" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-6.png></a></p><p>Click on <strong>Close</strong>.</p><p>We now see plots for Signal <strong>A</strong> (the past 15 minutes) as a blue plot, and the plots from a week ago in pink.</p><p>In order to make this clearer we can click on the <strong>Area chart</strong> icon to change the visualization.</p><p><a href=#R-image-247adcfaff89f3bf89d47a3a967bd2e2 class=lightbox-link><img alt="Area Chart" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-247adcfaff89f3bf89d47a3a967bd2e2><img alt="Area Chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-8.png></a></p><p>We now can see when last weeks latency was higher!</p><p>Next, click into the field next to <strong>Time</strong> on the Override bar and choose <strong><code>Past Hour</code></strong> from the dropdown.</p><p><a href=#R-image-49dbf0db97c0580b1e0f0a11a6c23fcf class=lightbox-link><img alt=Timeframe class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-9.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-49dbf0db97c0580b1e0f0a11a6c23fcf><img alt=Timeframe class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-9.png></a></p><hr><h2 id=4-using-formulas>4. Using Formulas<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s now plot the difference of all metric values for a day with 7 days in between.</p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Enter Formula</span></span></span>
then enter <strong><code>A-B</code></strong> (A minus B) and hide (deselect) all Signals using the eye, except <strong>C</strong>.</p><p><a href=#R-image-a1ca78aedb6b97d540f2f55352bcea5e class=lightbox-link><img alt=Formulas class="lazy lightbox figure-image" loading=lazy src=../../images/M-Filter-11.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a1ca78aedb6b97d540f2f55352bcea5e><img alt=Formulas class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Filter-11.png></a></p><p>We now see only the difference of all metric values of <strong>A</strong> and <strong>B</strong> being plotted. We see that we have some negative values on the plot because a metric value of <strong>B</strong> has some times larger value than the metric value of <strong>A</strong> at that time.</p><p>Lets look at the Signalflow that drives our Charts and Detectors!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=34-signalflow>3.4 SignalFlow</h1><h2 id=1-introduction>1. Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let&rsquo;s take a look at SignalFlow - the analytics language of Observability Cloud that can be used to setup monitoring as code.</p><p>The heart of Splunk Infrastructure Monitoring is the SignalFlow analytics engine that runs computations written in a Python-like language. SignalFlow programs accept streaming input and produce output in real time. SignalFlow provides built-in analytical functions that take metric time series (MTS) as input, perform computations, and output a resulting MTS.</p><ul><li>Comparisons with historical norms, e.g. on a week-over-week basis</li><li>Population overviews using a distributed percentile chart</li><li>Detecting if the rate of change (or other metric expressed as a ratio, such as a service level objective) has exceeded a critical threshold</li><li>Finding correlated dimensions, e.g. to determine which service is most correlated with alerts for low disk space</li></ul><p>Infrastructure Monitoring creates these computations in the Chart Builder user interface, which lets you specify the input MTS to use and the analytical functions you want to apply to them. You can also run SignalFlow programs directly by using the <a href=https://dev.splunk.com/observability/docs/ rel=external>SignalFlow API</a>.</p><p>SignalFlow includes a large library of built-in analytical functions that take a metric time series as an input, performs computations on its datapoints, and outputs time series that are the result of the computation.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>For more information on SignalFlow see <a href=https://docs.splunk.com/Observability/infrastructure/analytics/signalflow.html rel=external>Analyze incoming data using SignalFlow</a>.</p></div></details><h2 id=2-view-signalflow>2. View SignalFlow<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the chart builder, click on <strong>View SignalFlow</strong>.</p><p><a href=#R-image-9d0f92820f6b73ab40445579162388ed class=lightbox-link><img alt=SignalFlow class="lazy lightbox figure-image" loading=lazy src=../../images/view-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9d0f92820f6b73ab40445579162388ed><img alt=SignalFlow class="lazy lightbox lightbox-image" loading=lazy src=../../images/view-signalflow.png></a></p><p>You will see the SignalFlow code that composes the chart we were working on. You can now edit the SignalFlow directly within the UI. Our documentation has the <a href=https://dev.splunk.com/observability/docs/signalflow/function_method_list rel=external>full list</a> of SignalFlow functions and methods.</p><p>Also, you can copy the SignalFlow and use it when interacting with the API or with Terraform to enable Monitoring as Code.</p><p><a href=#R-image-34f6c7a6e0d87b1dfd2b44c692f5d8f5 class=lightbox-link><img alt=Code class="lazy lightbox figure-image" loading=lazy src=../../images/show-signalflow.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34f6c7a6e0d87b1dfd2b44c692f5d8f5><img alt=Code class="lazy lightbox lightbox-image" loading=lazy src=../../images/show-signalflow.png></a></p><div class=tab-panel data-tab-group=R-tabs-d8d25bf2e5c75e8a60eab53e60f9c46b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-332eff2f7465d0f5f073ace9a055035b aria-expanded=true data-tab-item=R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d8d25bf2e5c75e8a60eab53e60f9c46b","R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6")'>
<span class=tab-nav-text>SignalFlow</span></button></div><div class=tab-content-container><div id=R-tab-id-332eff2f7465d0f5f073ace9a055035b data-tab-item=R-tab-965ae68a9cd5ddbb6af8e4d6db1e87e6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>A</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>B</span> <span class=o>=</span> <span class=n>data</span><span class=p>(</span><span class=s1>&#39;demo.trans.latency&#39;</span><span class=p>,</span> <span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>(</span><span class=s1>&#39;demo_datacenter&#39;</span><span class=p>,</span> <span class=s1>&#39;Paris&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>pct</span><span class=o>=</span><span class=mi>95</span><span class=p>)</span><span class=o>.</span><span class=n>timeshift</span><span class=p>(</span><span class=s1>&#39;1w&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=n>enable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>C</span> <span class=o>=</span> <span class=p>(</span><span class=n>A</span><span class=o>-</span><span class=n>B</span><span class=p>)</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;C&#39;</span><span class=p>)</span></span></span></code></pre></div></div></div></div></div><p>Click on <strong>View Builder</strong> to go back to the Chart <strong>Builder</strong> UI.</p><p><a href=#R-image-0ab0707492849519bbbef2b71bf6a6a6 class=lightbox-link><img alt="View Builder" class="lazy lightbox figure-image" loading=lazy src=../../images/view-builder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0ab0707492849519bbbef2b71bf6a6a6><img alt="View Builder" class="lazy lightbox lightbox-image" loading=lazy src=../../images/view-builder.png></a></p><p>Let&rsquo;s save this new chart to our Dashboard!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-charts-to-dashboards>Adding charts to dashboards</h1><h2 id=1-save-to-existing-dashboard>1. Save to existing dashboard<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Check that you have <strong>YOUR_NAME-Dashboard: YOUR_NAME-Dashboard</strong> in the top left corner. This means you chart will be saved in this Dashboard.</p><p>Name the Chart <strong>Latency History</strong> and add a Chart Description if you wish.</p><p><a href=#R-image-b5d042e3968cf79f25c03b0832f3543e class=lightbox-link><img alt="Save Chart 1" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5d042e3968cf79f25c03b0832f3543e><img alt="Save Chart 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-1.png></a></p><p>Click on <span class="btn cstyle button transparent noicon"><span><span class=title>Save And Close</span></span></span>. This returns you to your dashboard that now has two charts!</p><p><a href=#R-image-dfeee3128eba035e5f19ad7620ff3ed0 class=lightbox-link><img alt="Save Chart 2" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dfeee3128eba035e5f19ad7620ff3ed0><img alt="Save Chart 2" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-2.png></a>
Now let&rsquo;s quickly add another Chart based on the previous one.</p><h2 id=2-copy-and-paste-a-chart>2. Copy and Paste a chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the three dots <strong><code>...</code></strong> on the <strong>Latency History</strong> chart in your dashboard and then on <strong>Copy</strong>.</p><p><a href=#R-image-8a8e20c07d45506dae8048781e37915f class=lightbox-link><img alt="Copy chart" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8a8e20c07d45506dae8048781e37915f><img alt="Copy chart" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-3.png></a></p><p>You see the chart being copied, and you should now have a red circle with a white 1 next to the <strong>+</strong> on the top left of the page.</p><p>Click on the plus icon the top of the page, and then in the menu on <em>Paste Charts</em> (There should also be a red dot with a 1 visible at the end of the line).</p><p><a href=#R-image-dedfb543d2161c5f71460d590f839789 class=lightbox-link><img alt="Past charts" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dedfb543d2161c5f71460d590f839789><img alt="Past charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-5.png></a></p><p>This will place a copy of the previous chart in your dashboard.</p><p><a href=#R-image-c4426ec28d944b7d6ca591570a79ee4c class=lightbox-link><img alt="Three Dashboard" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c4426ec28d944b7d6ca591570a79ee4c><img alt="Three Dashboard" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-6.png></a></p><h2 id=3-edit-the-pasted-chart>3. Edit the pasted chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on the three dots <strong><code>...</code></strong> on one of the <strong>Latency History</strong> charts in your dashboard and then on <strong>Open</strong> (or you can click on the name of the chart which here is <strong>Latency History</strong>).</p><p>This will bring you to the editor environment again.</p><p>First set the time for the chart to -1 hour in the Time box at the top right of the chart. Then to make this a different chart, click on the eye icon in front of signal &ldquo;<em>A</em>&rdquo; to make it visible again, and then hide signal &ldquo;<em>C</em>&rdquo; via the eye icon and change the name for <em>Latency history</em> to <strong>Latency vs Load</strong>.</p><p><a href=#R-image-f067d645535432c72d5ead0c83929398 class=lightbox-link><img alt="Set Visibility" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f067d645535432c72d5ead0c83929398><img alt="Set Visibility" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-7.png></a></p><p>Click on the <span class="btn cstyle button blue noicon"><span><span class=title>Add Metric Or Event</span></span></span> button. This will bring up the box for a new signal. Type and select <code>demo.trans.count</code> for Signal <strong>D</strong>.</p><p><a href=#R-image-e6cb2ad3f3bc74d056eda64258274e7d class=lightbox-link><img alt="Dashboard Info" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e6cb2ad3f3bc74d056eda64258274e7d><img alt="Dashboard Info" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-8.png></a></p><p>This will add a new Signal <strong>D</strong> to your chart, It shows the number of active requests. Add the filter for the <em>demo_datacenter:Paris</em>, then change the Rollup type by clicking on the <strong>Configure Plot</strong> button and changing the roll-up from <strong>Auto (Delta)</strong> to <strong>Rate/sec</strong>. Change the name from <strong>demo.trans.count</strong> to <strong>Latency vs Load</strong>.</p><p><a href=#R-image-1cd29499066ab5141a570ee0ee5c71c7 class=lightbox-link><img alt="rollup change" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-9.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1cd29499066ab5141a570ee0ee5c71c7><img alt="rollup change" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-9.png></a></p><p>Finally press the <span class="btn cstyle button transparent noicon"><span><span class=title>Save And Close</span></span></span> button. This returns you to your dashboard that now has three different charts!</p><p><a href=#R-image-a166eeb2bf88d9e4204b42794b8dedb2 class=lightbox-link><img alt="three charts" class="lazy lightbox figure-image" loading=lazy src=../../images/M-MoreCharts-10.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a166eeb2bf88d9e4204b42794b8dedb2><img alt="three charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-MoreCharts-10.png></a></p><p>Let&rsquo;s add an &ldquo;instruction&rdquo; note and arrange the charts!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=adding-notes-and-dashboard-layout>Adding Notes and Dashboard Layout</h1><h2 id=1-adding-notes>1. Adding Notes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Often on dashboards it makes sense to place a short &ldquo;instruction&rdquo; pane that helps users of a dashboard. Lets add one now by clicking on the <span class="btn cstyle button transparent noicon"><span><span class=title>New Text Note</span></span></span>
Button.</p><p><a href=#R-image-64fdd7ecef29df4049d15d46c0a14ce2 class=lightbox-link><img alt="three charts" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-0.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64fdd7ecef29df4049d15d46c0a14ce2><img alt="three charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-0.png></a></p><p>This will open the notes editor.</p><p><a href=#R-image-60c8c9d2d26e9ec87a95745a2f866165 class=lightbox-link><img alt="Notes 1" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-60c8c9d2d26e9ec87a95745a2f866165><img alt="Notes 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-1.png></a></p><p>To allow you to add more then just text to you notes, Splunk is allowing you to use Markdown in these notes/panes.
Markdown is a lightweight markup language for creating formatted text using plain-text often used in Webpages.</p><p>This includes (but not limited to):</p><ul><li>Headers. (in various sizes)</li><li>Emphasis styles.</li><li>Lists and Tables.</li><li>Links. These can be external webpages (for documentation for example) or directly to other Splunk IM Dashboards</li></ul><p>Below is an example of above Markdown options you can use in your note.</p><div class=tab-panel data-tab-group=R-tabs-4f5076dedf1ea62db074472c41804838><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b5d36294565ead542f11574f1a1ea0df aria-expanded=true data-tab-item=R-tab-a704b0867831f74a891c7b2fbe8fa296 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4f5076dedf1ea62db074472c41804838","R-tab-a704b0867831f74a891c7b2fbe8fa296")'>
<span class=tab-nav-text>Sample Markdown text</span></button></div><div class=tab-content-container><div id=R-tab-id-b5d36294565ead542f11574f1a1ea0df data-tab-item=R-tab-a704b0867831f74a891c7b2fbe8fa296 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=gh># h1 Big headings
</span></span></span><span class=line><span class=cl><span class=gh></span>
</span></span><span class=line><span class=cl><span class=gu>###### h6 To small headings
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gu>##### Emphasis
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gs>**This is bold text**</span>, <span class=ge>*This is italic text*</span> , <span class=gd>~~Strikethrough~~</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Lists
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>Unordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>+ Create a list by starting a line with <span class=sb>`+`</span>, <span class=sb>`-`</span>, or <span class=sb>`*`</span>
</span></span><span class=line><span class=cl><span class=k>-</span> Sub-lists are made by indenting 2 spaces:
</span></span><span class=line><span class=cl><span class=k>-</span> Marker character change forces new list start:
</span></span><span class=line><span class=cl>    <span class=k>*</span> Ac tristique libero volutpat at
</span></span><span class=line><span class=cl>    + Facilisis in pretium nisl aliquet
</span></span><span class=line><span class=cl><span class=k>*</span> Very easy!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ordered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>1.</span> Lorem ipsum dolor sit amet
</span></span><span class=line><span class=cl><span class=k>2.</span> Consectetur adipiscing elit
</span></span><span class=line><span class=cl><span class=k>3.</span> Integer molestie lorem at massa
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>##### Tables
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>| Option | Description |
</span></span><span class=line><span class=cl>| ------ | ----------- |
</span></span><span class=line><span class=cl>| chart  | path to data files to supply the data that will be passed into templates. |
</span></span><span class=line><span class=cl>| engine | engine to be used for processing templates. Handlebars is the default. |
</span></span><span class=line><span class=cl>| ext    | extension to be used for dest files. |
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>#### Links
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>[<span class=nt>link to webpage</span>](<span class=na>https://www.splunk.com</span>)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[<span class=nt>link to dashboard with title</span>](<span class=na>https://app.eu0.signalfx.com/#/dashboard/EaJHrbPAEAA?groupId=EaJHgrsAIAA&amp;configId=EaJHsHzAEAA &#34;Link to the Sample chart Dashboard!&#34;</span>)</span></span></code></pre></div></div></div></div></div><p>Copy the above by using the copy button and paste it in the <em>Edit</em> box.
the preview will show you how it will look.</p><hr><h2 id=2-saving-our-chart>2. Saving our chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Give the Note chart a name, in our example we used <em>Example text chart</em>, then press the <span class="btn cstyle button transparent noicon"><span><span class=title>Save And Close</span></span></span> Button.</p><p><a href=#R-image-0b356d50521c1875c30f83d6fc72c672 class=lightbox-link><img alt="saving note" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0b356d50521c1875c30f83d6fc72c672><img alt="saving note" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-2.png></a></p><p>This will bring you back to you Dashboard, that now includes the note.</p><p><a href=#R-image-daa87dbeda36de0e4b8e34b067c67509 class=lightbox-link><img alt="three charts and note" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-daa87dbeda36de0e4b8e34b067c67509><img alt="three charts and note" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-3.png></a></p><hr><h2 id=3-ordering--sizing-of-charts>3. Ordering & sizing of charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you do not like the default order and sizes of your charts you can simply use window dragging technique to move and size them to the desired location.</p><p>Grab the <strong>top</strong> border of a chart and you should see the mouse pointer change to a drag icon (see picture below).</p><p><a href=#R-image-1068d90b7cd7e2e10b3deca755bf2771 class=lightbox-link><img alt="dragging charts" class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1068d90b7cd7e2e10b3deca755bf2771><img alt="dragging charts" class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-4.png></a></p><p>Now drag the <strong>Latency vs Load</strong> chart to sit between the <strong>Latency History</strong> Chart and the <strong>Example text chart</strong>.</p><p><a href=#R-image-8696fbbeb48fe8f4d3ca80823e89703f class=lightbox-link><img alt=sizing class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8696fbbeb48fe8f4d3ca80823e89703f><img alt=sizing class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-5.png></a></p><p>You can also resize windows by dragging from the left, right and bottom edges.</p><p>As a last exercise reduce the width of the note chart to about a third of the other charts. The chart will automatically snap to one of the sizes it supports. Widen the 3 other charts to about a third of the Dashboard. Drag the notes to the right of the others and resize it to match it to the 3 others. Set the <strong>Time</strong> to <strong>-1h</strong> and you should have the following dashboard!</p><p><a href=#R-image-a55ab02c21eeea576dad3eacd599aca4 class=lightbox-link><img alt=TaDA! class="lazy lightbox figure-image" loading=lazy src=../../images/M-Notes-6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a55ab02c21eeea576dad3eacd599aca4><img alt=TaDA! class="lazy lightbox lightbox-image" loading=lazy src=../../images/M-Notes-6.png></a></p><p>On to Detectors!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 30, 2025</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=working-with-detectors>Working with Detectors</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>Create a Detector from one of your charts</li><li>Setting Alert conditions</li><li>Running a pre-flight check</li><li>Working with muting rules</li></ul><hr><h2 id=1-introduction>1. Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Splunk Observability Cloud uses detectors, events, alerts, and notifications to keep you informed when certain criteria are met. For example, you might want a message sent to a Slack channel or an email address for the Ops team when CPU Utilization has reached 95%, or when the number of concurrent users is approaching a limit that might require you to spin up an additional AWS instance.</p><p>These conditions are expressed as one or more rules that trigger an alert when the conditions in the rules are met. Individual rules in a detector are labeled according to criticality: Info, Warning, Minor, Major, and Critical.</p><h2 id=2-creating-a-detector>2. Creating a Detector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In <strong>Dashboards</strong> click on your <strong>Custom Dashboard Group</strong> (that you created in the previous module) and then click on the dashboard name.</p><p><a href=#R-image-3bf363b51f86b8747900aa1a79337164 class=lightbox-link><img alt="Custom Dashboard Group" class="lazy lightbox figure-image" loading=lazy src=../images/custom-dashboard-group.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3bf363b51f86b8747900aa1a79337164><img alt="Custom Dashboard Group" class="lazy lightbox lightbox-image" loading=lazy src=../images/custom-dashboard-group.png></a></p><p>We are now going to create a new detector from a chart on this dashboard. Click on the bell icon on the <strong>Latency vs Load</strong> chart, and then click <strong>New Detector From Chart</strong>.</p><p><a href=#R-image-a6ed34e130715a389839136eccb5acb8 class=lightbox-link><img alt="New Detector" class="lazy lightbox figure-image" loading=lazy src=../images/new-detector.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a6ed34e130715a389839136eccb5acb8><img alt="New Detector" class="lazy lightbox lightbox-image" loading=lazy src=../images/new-detector.png></a></p><p>In the text field next to <strong>Detector Name</strong>, <strong>ADD YOUR INITIALS</strong> before the proposed detector name.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Naming the detector</summary><div class=box-content><p>It&rsquo;s important that you add your initials in front of the proposed detector name.</p><p>It should be something like this: <strong>XYZ&rsquo;s Latency Chart Detector</strong>.</p></div></details><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Create Alert Rule</span></span></span></p><p><a href=#R-image-645f0f84683f54efbf0d3e9eda40d0a9 class=lightbox-link><img alt="Create Alert Rule" class="lazy lightbox figure-image" loading=lazy src=../images/create-alert-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-645f0f84683f54efbf0d3e9eda40d0a9><img alt="Create Alert Rule" class="lazy lightbox lightbox-image" loading=lazy src=../images/create-alert-rule.png></a></p><p>In the Detector window, inside <strong>Alert signal</strong>, the Signal we will alert on is marked with a (blue) bell in the <strong>Alert on</strong> column. The bell indicates which Signal is being used to generate the alert.</p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Proceed to Alert Condition</span></span></span></p><p><a href=#R-image-871a75047484d227022709c57d4070a8 class=lightbox-link><img alt="Alert Signal" class="lazy lightbox figure-image" loading=lazy src=../images/alert-signal.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-871a75047484d227022709c57d4070a8><img alt="Alert Signal" class="lazy lightbox lightbox-image" loading=lazy src=../images/alert-signal.png></a></p><h2 id=3-setting-alert-condition>3. Setting Alert condition<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In <strong>Alert condition</strong>, click on <strong>Static Threshold</strong> and then on <span class="btn cstyle button blue noicon"><span><span class=title>Proceed to Alert Settings</span></span></span></p><p><a href=#R-image-1069c245c2cb808717d38ff30d5a90ae class=lightbox-link><img alt="Alert Condition" class="lazy lightbox figure-image" loading=lazy src=../images/alert-condition.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1069c245c2cb808717d38ff30d5a90ae><img alt="Alert Condition" class="lazy lightbox lightbox-image" loading=lazy src=../images/alert-condition.png></a></p><p>In <strong>Alert Settings</strong>, enter the value <strong><code>290</code></strong> in the <strong>Threshold</strong> field. In the same window change <strong>Time</strong> on top right to past day (<strong>-1d</strong>).</p><hr><h2 id=4-alert-pre-flight-check>4. Alert pre-flight check<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A pre-flight check will take place after 5 seconds. See the <strong>Estimated alert count</strong>. Based on the current alert settings, the amount of alerts we would have received in 1 day would have been <strong>3</strong>.</p><p><a href=#R-image-fd532839e33b23be7e699de69d11d757 class=lightbox-link><img alt="Alert Threshold" class="lazy lightbox figure-image" loading=lazy src=../images/alert-threshold.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fd532839e33b23be7e699de69d11d757><img alt="Alert Threshold" class="lazy lightbox lightbox-image" loading=lazy src=../images/alert-threshold.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
About pre-flight checks</summary><div class=box-content><p>Once you set an alert condition, the UI estimates how many alerts you might get based on the current settings, and in the timeframe set on the upper right corner - in this case, the past day.</p><p>Immediately, the platform will start analyzing the signals with the current settings, and perform something we call a Pre-flight Check. This enables you to test the alert conditions using the historical data in the platform, to ensure the settings are logical and will not inadvertently generate an alert storm, removing the guesswork from configuring alerts in a simple but very powerful way, only available using the Splunk Observability Cloud.</p><p>To read more about detector previewing, please visit this link
<a href=https://docs.splunk.com/Observability/alerts-detectors-notifications/preview-detector-alerts.html#nav-Preview-detector-alerts rel=external>Preview detector alerts.</a></p></div></details><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Proceed to Alert Message</span></span></span></p><hr><h2 id=5-alert-message>5. Alert message<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In <strong>Alert message</strong>, under <strong>Severity</strong> choose <strong>Major</strong>.</p><p><a href=#R-image-2631ec16a9bc62884814c1966c26889b class=lightbox-link><img alt="Alert Message" class="lazy lightbox figure-image" loading=lazy src=../images/alert-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2631ec16a9bc62884814c1966c26889b><img alt="Alert Message" class="lazy lightbox lightbox-image" loading=lazy src=../images/alert-message.png></a></p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Proceed to Alert Recipients</span></span></span></p><p>Click on <strong>Add Recipient</strong> and then on your email address displayed as the first option.</p><p><a href=#R-image-1fe90acf4913ae5fe2763d50d496c9c7 class=lightbox-link><img alt="Add Recipient" class="lazy lightbox figure-image" loading=lazy src=../images/add-recipient.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1fe90acf4913ae5fe2763d50d496c9c7><img alt="Add Recipient" class="lazy lightbox lightbox-image" loading=lazy src=../images/add-recipient.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Notification Services</summary><div class=box-content><p>That&rsquo;s the same as entering that email address OR you can enter another email address by clicking on <strong>E-mail&mldr;</strong>.</p><p>This is just one example of the many <strong>Notification Services</strong> the platform has available. You can check this out by going to the <strong>Integrations</strong> tab of the top menu, and see <strong>Notification Services</strong>.</p></div></details><hr><h2 id=6-alert-activation>6. Alert Activation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Proceed to Alert Activation</span></span></span></p><p>In <strong>Activate&mldr;</strong> click on <span class="btn cstyle button blue noicon"><span><span class=title>Activate Alert Rule</span></span></span></p><p><a href=#R-image-66bfd71824174947003415273aad4bbe class=lightbox-link><img alt="Activate Alert" class="lazy lightbox figure-image" loading=lazy src=../images/activate-alert.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-66bfd71824174947003415273aad4bbe><img alt="Activate Alert" class="lazy lightbox lightbox-image" loading=lazy src=../images/activate-alert.png></a></p><p>If you want to get alerts quicker you edit the rule and lower the value from <strong><code>290</code></strong> to say <strong><code>280</code></strong>.</p><p>If you change the <strong>Time</strong> to <strong>-1h</strong> you can see how many alerts you might get with the threshold you have chosen based on the metrics from the last 1 hour.</p><p>Click on the <a href=#R-image-c67dc2b7e4f9f55d910153cdb398bb8d class=lightbox-link><img alt="alerts and detectors button" class="inline lazy lightbox figure-image" loading=lazy src="../images/alerts-and-detectors.png?classes=inline&height=25px" style=height:25px;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c67dc2b7e4f9f55d910153cdb398bb8d><img alt="alerts and detectors button" class="inline lazy lightbox lightbox-image" loading=lazy src="../images/alerts-and-detectors.png?classes=inline&height=25px"></a> in the navbar and then click on <strong>Detectors</strong>. You can optionally filter for your initials. You will see you detector listed here. If you don&rsquo;t then please refresh your browser.</p><p><a href=#R-image-7c7f145dc222a5b89b29a8914783caac class=lightbox-link><img alt="Detector List" class="lazy lightbox figure-image" loading=lazy src=../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7c7f145dc222a5b89b29a8914783caac><img alt="Detector List" class="lazy lightbox lightbox-image" loading=lazy src=../images/detectors.png></a></p><p><strong>Congratulations</strong>! You have created your first detector and activated it!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 4. Detectors</h1><article class=default><header class=headline></header><h1 id=working-with-muting-rules>Working with Muting Rules</h1><ul><li>Learn how to configure Muting Rules</li><li>Learn how to resume notifications</li></ul><hr><h2 id=1-configuring-muting-rules>1. Configuring Muting Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>There will be times when you might want to mute certain notifications. For example, if you want to schedule downtime for maintenance on a server or set of servers, or if you are testing new code or settings etc. For that you can use muting rules in Splunk Observability Cloud. Let&rsquo;s create one!</p><p>Click on <strong>Alerts & Detectors</strong> in the sidebar and then click <strong>Detectors</strong> to see the list of active detectors.</p><p><a href=#R-image-20ffadfde293720aab78281c2550ce0c class=lightbox-link><img alt="detectors list" class="lazy lightbox figure-image" loading=lazy src=../../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-20ffadfde293720aab78281c2550ce0c><img alt="detectors list" class="lazy lightbox lightbox-image" loading=lazy src=../../images/detectors.png></a></p><p>If you created a detector in <strong>Creating a Detector</strong> you can click on the three dots <strong><code>...</code></strong> on the far right for that detector; if not, do that for another detector.</p><p>From the drop-down click on <strong>Create Muting Rule&mldr;</strong></p><p><a href=#R-image-18fcca43100d0e8432c30cb3b6a0cf1a class=lightbox-link><img alt="Create Muting Rule" class="lazy lightbox figure-image" loading=lazy src=../../images/create-muting-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-18fcca43100d0e8432c30cb3b6a0cf1a><img alt="Create Muting Rule" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create-muting-rule.png></a></p><p>In the <strong>Muting Rule</strong> window check <strong>Mute Indefinitely</strong> and enter a reason.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Important</summary><div class=box-content><p>This will mute the notifications permanently until you come back here and un-check this box or resume notifications for this detector.</p></div></details><p><a href=#R-image-a3bd0d60c9a66e29eda77066494ab0cc class=lightbox-link><img alt="Mute Indefinitely" class="lazy lightbox figure-image" loading=lazy src=../../images/mute-indefinitely.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a3bd0d60c9a66e29eda77066494ab0cc><img alt="Mute Indefinitely" class="lazy lightbox lightbox-image" loading=lazy src=../../images/mute-indefinitely.png></a></p><p>Click <strong>Next</strong> and in the new modal window confirm the muting rule setup.</p><p><a href=#R-image-244b1c910fed39192e430ac30ce68d62 class=lightbox-link><img alt="Confirm Rule" class="lazy lightbox figure-image" loading=lazy src=../../images/confirm-rule.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-244b1c910fed39192e430ac30ce68d62><img alt="Confirm Rule" class="lazy lightbox lightbox-image" loading=lazy src=../../images/confirm-rule.png></a></p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Mute Indefinitely</span></span></span> to confirm.</p><p><a href=#R-image-a5931a3881e89cebdb83bdc5292bf83d class=lightbox-link><img alt="List muted rule" class="lazy lightbox figure-image" loading=lazy src=../../images/alert-muted.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a5931a3881e89cebdb83bdc5292bf83d><img alt="List muted rule" class="lazy lightbox lightbox-image" loading=lazy src=../../images/alert-muted.png></a></p><p>You won&rsquo;t be receiving any email notifications from your detector until you resume notifications again. Let&rsquo;s now see how to do that!</p><hr><h2 id=2-resuming-notifications>2. Resuming notifications<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To Resume notifications, click on <strong>Muting Rules</strong>, you will see the name of the detector you muted notifications for under <strong>Detector</strong> heading.</p><p>Click on the thee dots <strong><code>...</code></strong> on the far right, and click on <strong>Resume Notifications</strong>.</p><p><a href=#R-image-ed2ca7abd1313bf7574b5690fbe5700c class=lightbox-link><img alt=Resume class="lazy lightbox figure-image" loading=lazy src=../../images/muting-list.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ed2ca7abd1313bf7574b5690fbe5700c><img alt=Resume class="lazy lightbox lightbox-image" loading=lazy src=../../images/muting-list.png></a></p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Resume</span></span></span> to confirm and resume notifications for this detector.</p><p><a href=#R-image-be464b1baa7acfa3edf5b1c18ffb5099 class=lightbox-link><img alt=Resume class="lazy lightbox figure-image" loading=lazy src=../../images/resume.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be464b1baa7acfa3edf5b1c18ffb5099><img alt=Resume class="lazy lightbox lightbox-image" loading=lazy src=../../images/resume.png></a></p><p><strong>Congratulations!</strong> You have now resumed your alert notifications!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=monitoring-as-code>Monitoring as Code</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>Use Terraform<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to manage Observability Cloud Dashboards and Detectors</li><li>Initialize the Terraform Splunk Provider<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</li><li>Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider.</li><li>See how Terraform can also delete detectors and dashboards.</li></ul><hr><h2 id=1-initial-setup>1. Initial setup<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.</p><p>You can use monitoring as code to build out your visualizations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused.</p><p>Full documentation for the Splunk Terraform Provider is available <a href=https://registry.terraform.io/providers/splunk-terraform/signalfx/latest/docs rel=external><strong>here</strong></a>.</p><p>Remaining in your AWS/EC2 instance, change into the <code>o11y-cloud-jumpstart</code> directory</p><div class=tab-panel data-tab-group=R-tabs-bb93ce9204a62749df765562fd56b8ae><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fb669f1cd4ea5a190bc5c1be9ec1ea7f aria-expanded=true data-tab-item=R-tab-1eef9e6169c323d3af5f7aa5c6bee45a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bb93ce9204a62749df765562fd56b8ae","R-tab-1eef9e6169c323d3af5f7aa5c6bee45a")'>
<span class=tab-nav-text>Change directory</span></button></div><div class=tab-content-container><div id=R-tab-id-fb669f1cd4ea5a190bc5c1be9ec1ea7f data-tab-item=R-tab-1eef9e6169c323d3af5f7aa5c6bee45a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/observability-content-contrib/integration-examples/terraform-jumpstart</span></span></code></pre></div></div></div></div></div><p>Initialize Terraform and upgrade to the latest version of the Splunk Terraform Provider.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note: Upgrading the SignalFx Terraform Provider</summary><div class=box-content><p>You will need to run the command below each time a new version of the Splunk Terraform Provider is released. You can track the releases on <a href=https://github.com/splunk-terraform/terraform-provider-signalfx/releases rel=external>GitHub.</a></p></div></details><div class=tab-panel data-tab-group=R-tabs-bd537ccf42585e5320b4a46b1f1ce073><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a22db706f77f7e895723187bf3e133e6 aria-expanded=true data-tab-item=R-tab-e03cc7a7d4991da1b8957f06db510f2a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bd537ccf42585e5320b4a46b1f1ce073","R-tab-e03cc7a7d4991da1b8957f06db510f2a")'>
<span class=tab-nav-text>Initialise Terraform</span>
</button>
<button aria-controls=R-tab-id-59c25d1fff78234fe4f86606d5227bf5 aria-expanded=false data-tab-item=R-tab-e72082b192227e12bf3e9fa81472ba79 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-bd537ccf42585e5320b4a46b1f1ce073","R-tab-e72082b192227e12bf3e9fa81472ba79")'>
<span class=tab-nav-text>Initialise Output</span></button></div><div class=tab-content-container><div id=R-tab-id-a22db706f77f7e895723187bf3e133e6 data-tab-item=R-tab-e03cc7a7d4991da1b8957f06db510f2a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform init -upgrade</span></span></code></pre></div></div></div><div id=R-tab-id-59c25d1fff78234fe4f86606d5227bf5 data-tab-item=R-tab-e72082b192227e12bf3e9fa81472ba79 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    Upgrading modules...
</span></span><span class=line><span class=cl>    - aws in modules/aws
</span></span><span class=line><span class=cl>    - azure in modules/azure
</span></span><span class=line><span class=cl>    - docker in modules/docker
</span></span><span class=line><span class=cl>    - gcp in modules/gcp
</span></span><span class=line><span class=cl>    - host in modules/host
</span></span><span class=line><span class=cl>    - kafka in modules/kafka
</span></span><span class=line><span class=cl>    - kubernetes in modules/kubernetes
</span></span><span class=line><span class=cl>    - parent_child_dashboard in modules/dashboards/parent
</span></span><span class=line><span class=cl>    - pivotal in modules/pivotal
</span></span><span class=line><span class=cl>    - rum_and_synthetics_dashboard in modules/dashboards/rum_and_synthetics
</span></span><span class=line><span class=cl>    - usage_dashboard in modules/dashboards/usage
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing the backend...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Initializing provider plugins...
</span></span><span class=line><span class=cl>    - Finding latest version of splunk-terraform/signalfx...
</span></span><span class=line><span class=cl>    - Installing splunk-terraform/signalfx v6.20.0...
</span></span><span class=line><span class=cl>    - Installed splunk-terraform/signalfx v6.20.0 (self-signed, key ID CE97B6074989F138)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Partner and community providers are signed by their developers.
</span></span><span class=line><span class=cl>    If you&#39;d like to know more about provider signing, you can read about it here:
</span></span><span class=line><span class=cl>    https://www.terraform.io/docs/cli/plugins/signing.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has created a lock file .terraform.lock.hcl to record the provider
</span></span><span class=line><span class=cl>    selections it made above. Include this file in your version control repository
</span></span><span class=line><span class=cl>    so that Terraform can guarantee to make the same selections by default when
</span></span><span class=line><span class=cl>    you run &#34;terraform init&#34; in the future.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Terraform has been successfully initialized!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    You may now begin working with Terraform. Try running &#34;terraform plan&#34; to see
</span></span><span class=line><span class=cl>    any changes that are required for your infrastructure. All Terraform commands
</span></span><span class=line><span class=cl>    should now work.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    If you ever set or change modules or backend configuration for Terraform,
</span></span><span class=line><span class=cl>    rerun this command to reinitialize your working directory. If you forget, other
</span></span><span class=line><span class=cl>    commands will detect it and remind you to do so if necessary.</span></span></code></pre></div></div></div></div></div><h2 id=2-create-execution-plan>2. Create execution plan<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>terraform plan</code> command creates an execution plan. By default, creating a plan consists of:</p><ul><li>Reading the current state of any already-existing remote objects to make sure that the Terraform state is up-to-date.</li><li>Comparing the current configuration to the prior state and noting any differences.</li><li>Proposing a set of change actions that should, if applied, make the remote objects match the configuration.</li></ul><p>The plan command alone will not actually carry out the proposed changes, and so you can use this command to check whether the proposed changes match what you expected before you apply the changes</p><div class=tab-panel data-tab-group=R-tabs-26aba659ba6576e6d30012fd1e31bed6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f9e148b9ba1816931635d5bff50d4b21 aria-expanded=true data-tab-item=R-tab-21ae8d4caea374965ea90cf6437260d3 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-26aba659ba6576e6d30012fd1e31bed6","R-tab-21ae8d4caea374965ea90cf6437260d3")'>
<span class=tab-nav-text>Execution Plan</span>
</button>
<button aria-controls=R-tab-id-fae60e8b1ad8ddb8668e0d3d7be1babc aria-expanded=false data-tab-item=R-tab-652375c28b3b941b74d96a43213463ce class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-26aba659ba6576e6d30012fd1e31bed6","R-tab-652375c28b3b941b74d96a43213463ce")'>
<span class=tab-nav-text>Execution Plan Output</span></button></div><div class=tab-content-container><div id=R-tab-id-f9e148b9ba1816931635d5bff50d4b21 data-tab-item=R-tab-21ae8d4caea374965ea90cf6437260d3 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform plan -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div id=R-tab-id-fae60e8b1ad8ddb8668e0d3d7be1babc data-tab-item=R-tab-652375c28b3b941b74d96a43213463ce class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Plan: 146 to add, 0 to change, 0 to destroy.</span></span></code></pre></div></div></div></div></div><p>If the plan executes successfully, we can go ahead and apply:</p><hr><h2 id=3-apply-execution-plan>3. Apply execution plan<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>terraform apply</code> command executes the actions proposed in the Terraform plan above.</p><p>The most straightforward way to use <code>terraform apply</code> is to run it without any arguments at all, in which case it will automatically create a new execution plan (as if you had run terraform plan) and then prompt you to provide the API Token, Realm (the prefix defaults to <code>Splunk</code>) and approve the plan, before taking the indicated actions.</p><p>Due to this being a workshop it is required that the prefix is to be unique so you need to run the <code>terraform apply</code> below.</p><div class=tab-panel data-tab-group=R-tabs-26d1169991f7dae2827ab9cbb54ce4fc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8cc13d0f11b3697ce42d5bac80ddc467 aria-expanded=true data-tab-item=R-tab-9f08c24c624a2271959fcb369e2231cf class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-26d1169991f7dae2827ab9cbb54ce4fc","R-tab-9f08c24c624a2271959fcb369e2231cf")'>
<span class=tab-nav-text>Apply Plan</span>
</button>
<button aria-controls=R-tab-id-4c05b65b26ea94b03ce6f7187ceebf86 aria-expanded=false data-tab-item=R-tab-4b1feafd24685453b75376ec61506347 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-26d1169991f7dae2827ab9cbb54ce4fc","R-tab-4b1feafd24685453b75376ec61506347")'>
<span class=tab-nav-text>Apply Plan Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8cc13d0f11b3697ce42d5bac80ddc467 data-tab-item=R-tab-9f08c24c624a2271959fcb369e2231cf class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform apply -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;o11y_prefix=[</span><span class=nv>$INSTANCE</span><span class=s2>]&#34;</span></span></span></code></pre></div></div></div><div id=R-tab-id-4c05b65b26ea94b03ce6f7187ceebf86 data-tab-item=R-tab-4b1feafd24685453b75376ec61506347 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Apply complete! Resources: 146 added, 0 changed, 0 destroyed.</span></span></code></pre></div></div></div></div></div><p>Once the apply has been completed, validate that the detectors were created, under the <strong>Alerts & Detectors</strong> and click on the <strong>Detectors</strong> tab. They will be prefixed by the instance name. To check the prefix value run:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span></span></span></code></pre></div><p>You will see a list of the new detectors and you can search for the prefix that was output from above.</p><p><a href=#R-image-2c73b5bd21cd24ad9fe8c3666bd84724 class=lightbox-link><img alt=Detectors class="lazy lightbox figure-image" loading=lazy src=../images/detectors.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c73b5bd21cd24ad9fe8c3666bd84724><img alt=Detectors class="lazy lightbox lightbox-image" loading=lazy src=../images/detectors.png></a></p><h2 id=3-destroy-all-your-hard-work>3. Destroy all your hard work<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The <code>terraform destroy</code> command is a convenient way to destroy all remote objects managed by your Terraform configuration.</p><p>While you will typically not want to destroy long-lived objects in a production environment, Terraform is sometimes used to manage ephemeral infrastructure for development purposes, in which case you can use <code>terraform destroy</code> to conveniently clean up all of those temporary objects once you are finished with your work.</p><p>Now go and destroy all the Detectors and Dashboards that were previously applied!</p><div class=tab-panel data-tab-group=R-tabs-5abe89e447dd98d6d2db2417f20e31e4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-9ca76b19fc193557875b49a119ce5967 aria-expanded=true data-tab-item=R-tab-0e181f89f47654b86f3beb42f5cc08b8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5abe89e447dd98d6d2db2417f20e31e4","R-tab-0e181f89f47654b86f3beb42f5cc08b8")'>
<span class=tab-nav-text>Destroy</span>
</button>
<button aria-controls=R-tab-id-ef0961236e6a245943c53e48733110e5 aria-expanded=false data-tab-item=R-tab-ab310097b36e3dd9ad3ac195c42fce73 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5abe89e447dd98d6d2db2417f20e31e4","R-tab-ab310097b36e3dd9ad3ac195c42fce73")'>
<span class=tab-nav-text>Destroy Output</span></button></div><div class=tab-content-container><div id=R-tab-id-9ca76b19fc193557875b49a119ce5967 data-tab-item=R-tab-0e181f89f47654b86f3beb42f5cc08b8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>terraform destroy -var<span class=o>=</span><span class=s2>&#34;api_token=</span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> -var<span class=o>=</span><span class=s2>&#34;realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span></span></span></code></pre></div></div></div><div id=R-tab-id-ef0961236e6a245943c53e48733110e5 data-tab-item=R-tab-ab310097b36e3dd9ad3ac195c42fce73 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Destroy complete! Resources: 146 destroyed.</span></span></code></pre></div></div></div></div></div><p>Validate all the detectors have been removed by navigating to <em><strong>Alerts ‚Üí Detectors</strong></em></p><p><a href=#R-image-3bb54784fa689cb1522cf2adefd1f010 class=lightbox-link><img alt=Destroyed class="lazy lightbox figure-image" loading=lazy src=../images/destroy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3bb54784fa689cb1522cf2adefd1f010><img alt=Destroyed class="lazy lightbox lightbox-image" loading=lazy src=../images/destroy.png></a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Terraform is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>A provider is responsible for understanding API interactions and exposing resources. Providers generally are an IaaS (e.g. Alibaba Cloud, AWS, GCP, Microsoft Azure, OpenStack), PaaS (e.g. Heroku), or SaaS services (e.g. Splunk, Terraform Cloud, DNSimple, Cloudflare).&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=service-bureau>Service Bureau</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<ul><li>How to keep track of the usage of Observability Cloud in your organization</li><li>Learn how to keep track of spend by exploring the Subscription Usage interface</li><li>Creating Teams</li><li>Adding notification rules to Teams</li><li>Controlling usage</li></ul><hr><h2 id=1-understanding-engagement>1. Understanding engagement<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To fully understand Observability Cloud engagement inside your organization, click on the <strong>&#187;</strong> bottom left and select the <strong>Settings ‚Üí Organization Overview</strong>, this will provide you with the following dashboards that show you how your Observability Cloud organization is being used:</p><p><a href=#R-image-bc2a622086427cc8c61cbbd34fdff093 class=lightbox-link><img alt="Organization Overview" class="lazy lightbox figure-image" loading=lazy src=../images/engagement.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bc2a622086427cc8c61cbbd34fdff093><img alt="Organization Overview" class="lazy lightbox lightbox-image" loading=lazy src=../images/engagement.png></a></p><p>You will see various dashboards such as Throttling, System Limits, Entitlements & Engagement. The workshop organization you&rsquo;re using now may have less data to work with as this is cleared down after each workshop.</p><p>Take a minute to explore the various dashboards and charts in the Organization Overview of this workshop instance.</p><h2 id=2-subscription-usage>2. Subscription Usage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you want to see what your usage is against your subscription you can select <strong>Subscription Usage</strong>.</p><p><a href=#R-image-24463f2d840e22583b72cc00280548b2 class=lightbox-link><img alt="Left pane" class="lazy lightbox figure-image" loading=lazy src=../images/billing-and-usage-menu.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-24463f2d840e22583b72cc00280548b2><img alt="Left pane" class="lazy lightbox lightbox-image" loading=lazy src=../images/billing-and-usage-menu.png></a></p><p>This screen may take a few seconds to load whilst it calculates and pulls in the usage.</p><h2 id=3-understanding-usage>3. Understanding usage<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You will see a screen similar to the one below that will give you an overview of the current usage, the average usage and your entitlement per category: Hosts, Containers, Custom Metrics and High Resolution Metrics.</p><p>For more information about these categories please refer to <a href=https://docs.splunk.com/Observability/admin/monitor-imm-billing-usage.html rel=external>Monitor Splunk Infrastructure Monitoring subscription usage</a>.</p><p><a href=#R-image-f38e9af482b8a9bfda7fc4f61e85b317 class=lightbox-link><img alt="Billing and Usage" class="lazy lightbox figure-image" loading=lazy src=../images/usage-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f38e9af482b8a9bfda7fc4f61e85b317><img alt="Billing and Usage" class="lazy lightbox lightbox-image" loading=lazy src=../images/usage-charts.png></a></p><hr><h2 id=4-examine-usage-in-detail>4. Examine usage in detail<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The top chart shows you the current subscription levels per category (shown by the red arrows at the top in the screenshot below).</p><p>Also, your current usage of the four categories is displayed (shown in the red lines at the bottom of the chart).</p><p>In this example, you can see that there are 25 Hosts, 0 Containers, 100 Custom Metrics and 0 High Resolution Metrics.</p><p><a href=#R-image-cda656fafd2e862361bdc096deae9083 class=lightbox-link><img alt="Billing and Usage-top" class="lazy lightbox figure-image" loading=lazy src=../images/usage-detail.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cda656fafd2e862361bdc096deae9083><img alt="Billing and Usage-top" class="lazy lightbox lightbox-image" loading=lazy src=../images/usage-detail.png></a></p><p>In the bottom chart, you can see the usage per category for the current period (shown in the drop-down box on the top right of the chart).</p><p>The blue line marked <strong>Average Usage</strong> indicates what Observability Cloud will use to calculate your average usage for the current Subscription Usage Period.</p><p><a href=#R-image-f8883070fd25134dd80fdac9fceeb0ba class=lightbox-link><img alt="Billing and Usage-Bottom" class="lazy lightbox figure-image" loading=lazy src=../images/usage-trends.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f8883070fd25134dd80fdac9fceeb0ba><img alt="Billing and Usage-Bottom" class="lazy lightbox lightbox-image" loading=lazy src=../images/usage-trends.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Info</summary><div class=box-content><p>As you can see from the screenshot, Observability Cloud does not use High Watermark or P95% for cost calculation but the actual average hourly usage, allowing you to do performance testing or Blue/Green style deployments etc. without the risk of overage charges.</p></div></details><p>To get a feel for the options you can change the metric displayed by selecting the different options from the <strong>Usage Metric</strong> drop-down on the left, or change the <strong>Subscription Usage Period</strong> with the drop-down on the right.</p><p>Please take a minute to explore the different time periods & categories and their views.</p><p>Finally, the pane on the right shows you information about your Subscription.</p><p><a href=#R-image-c8c61fb54ea585076133ccb559c72a5d class=lightbox-link><img alt="Billing and Usage-Pane" class="lazy lightbox figure-image" loading=lazy src=../images/subscription.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8c61fb54ea585076133ccb559c72a5d><img alt="Billing and Usage-Pane" class="lazy lightbox lightbox-image" loading=lazy src=../images/subscription.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 6. Service Bureau</h1><article class=default><header class=headline></header><h1 id=teams>Teams</h1><ul><li>Introduction to Teams</li><li>Create a Team and add members to the Team</li></ul><hr><h2 id=1-introduction-to-teams>1. Introduction to Teams<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To make sure that users see the dashboards and alerts that are relevant to them when using Observability Cloud, most organizations will use Observability Cloud&rsquo;s Teams feature to assign a member to one or more Teams.</p><p>Ideally, this matches work-related roles, for example, members of a Dev-Ops or Product Management group would be assigned to the corresponding Teams in Observability Cloud.</p><p>When a user logs into Observability Cloud, they can choose which Team Dashboard will be their home page and they will typically select the page for their primary role.</p><p>In the example below, the user is a member of the Development, Operations and Product Management Teams, and is currently viewing the Dashboard for the Operations Team.</p><p>This Dashboard has specific Dashboard Groups for Usage, SaaS and APM Business Workflows assigned but any Dashboard Group can be linked to a Teams Dashboard.</p><p>They can use the menu along the top left to quickly navigate between their allocated teams, or they can use the <strong>ALL TEAMS</strong> dropdown on the right to select specific Team Dashboards, as well as quickly access <strong>ALL Dashboards</strong>** using the adjacent link.</p><p><a href=#R-image-0b2da908344c1c57dbf21ada3055eb51 class=lightbox-link><img alt=Teams class="lazy lightbox figure-image" loading=lazy src=../../images/teams-homepage.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0b2da908344c1c57dbf21ada3055eb51><img alt=Teams class="lazy lightbox lightbox-image" loading=lazy src=../../images/teams-homepage.png></a></p><p>Alerts can be linked to specific Teams so the Team can monitor only the Alerts they are interested in, and in the above example, they currently have 1 active Critical Alert.</p><p>The Description for the Team Dashboard can be customized and can include links to team-specific resources (using Markdown).</p><hr><h2 id=2-creating-a-new-team>2. Creating a new Team<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To work with Splunk&rsquo;s Team UI click on the hamburger icon top left and select the <strong>Organizations Settings ‚Üí Teams</strong>.</p><p>When the <strong>Team</strong> UI is selected you will be presented with the list of current Teams.</p><p>To add a new <strong>Team</strong> click on the <span class="btn cstyle button blue noicon"><span><span class=title>Create New Team</span></span></span> button. This will present you with the <strong>Create New Team</strong> dialog.</p><p><a href=#R-image-48a9ae4d292a26c76ffdffe77b60e462 class=lightbox-link><img alt="Add Team" class="lazy lightbox figure-image" loading=lazy src=../../images/create-new-team.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-48a9ae4d292a26c76ffdffe77b60e462><img alt="Add Team" class="lazy lightbox lightbox-image" loading=lazy src=../../images/create-new-team.png></a></p><p>Create your own team by naming it <code>[YOUR-INITIALS]-Team and</code> add yourself by searching for your name and selecting the <strong>Add</strong> link next to your name. This should result in a dialog similar to the one below:</p><p><a href=#R-image-108bc5ec1cc7ab69f896d2b46465d8b1 class=lightbox-link><img alt="Add Team complete" class="lazy lightbox figure-image" loading=lazy src=../../images/add-to-team.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-108bc5ec1cc7ab69f896d2b46465d8b1><img alt="Add Team complete" class="lazy lightbox lightbox-image" loading=lazy src=../../images/add-to-team.png></a></p><p>You can remove selected users by pressing <strong>Remove</strong> or the small <strong>x</strong>.</p><p>Make sure you have your group created with your initials and with yourself added as a member, then click <span class="btn cstyle button blue noicon"><span><span class=title>Done</span></span></span></p><p>This will bring you back to the <strong>Teams</strong> list that will now show your Team and the ones created by others.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>The Teams(s) you are a member of have a grey <strong>Member</strong> icon in front of it.</p></div></details><p>If no members are assigned to your Team, you should see a blue <strong>Add Members</strong> link instead of the member count, clicking on that link will get you to the <strong>Edit Team</strong> dialog where you can add yourself.</p><p>This is the same dialog you get when pressing the 3 dots <strong>&mldr;</strong> at the end of the line with your Team and selecting <strong>Edit Team</strong></p><p>The <strong>&mldr;</strong> menu gives you the option to Edit, Join, Leave or Delete a Team (leave and join will depend on if you are currently a member).</p><hr><h2 id=3-adding-notification-rules>3. Adding Notification Rules<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can set up specific Notification rules per team, by clicking on the <strong>Notification Policy</strong> tab, this will open the notification edit menu.</p><p><a href=#R-image-49b1f8685365882e4975f7bf2d0e06ce class=lightbox-link><img alt="Base notification menu" class="lazy lightbox figure-image" loading=lazy src=../../images/notification-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-49b1f8685365882e4975f7bf2d0e06ce><img alt="Base notification menu" class="lazy lightbox lightbox-image" loading=lazy src=../../images/notification-policy.png></a></p><p>By default, the system offers you the ability to set up a general notification rule for your team.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>The <strong>Email all team members</strong> option means all members of this Team will receive an email with the Alert information, regardless of the alert type.</p></div></details><h3 id=31-adding-recipients>3.1 Adding recipients<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>You can add other recipients, by clicking <span class="btn cstyle button blue noicon"><span><span class=title>Add Recipient</span></span></span>. These recipients do not need to be Observability Cloud users.</p><p>However, if you click on the link <strong>Configure separate notification tiers for different severity alerts</strong> you can configure every alert level independently.</p><p><a href=#R-image-e5e52071f7a7f783bb59c050864e9c8b class=lightbox-link><img alt="Multiple Notifications" class="lazy lightbox figure-image" loading=lazy src=../../images/single-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e5e52071f7a7f783bb59c050864e9c8b><img alt="Multiple Notifications" class="lazy lightbox lightbox-image" loading=lazy src=../../images/single-policy.png></a></p><p>Different alert rules for the different alert levels can be configured, as shown in the above image.</p><p>Critical and Major are using <a href=https://www.splunk.com/en_us/observability/on-call.html rel=external>Splunk's On-Call</a> Incident Management solution. For the Minor alerts, we send it to the Teams Slack channel and for Warning and Info we send an email.</p><h3 id=32-notification-integrations>3.2 Notification Integrations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>In addition to sending alert notifications via email, you can configure Observability Cloud to send alert notifications to the services shown below.</p><p><a href=#R-image-92ee184fc7ee54caec2d7630efe90984 class=lightbox-link><img alt="Notifications options" class="lazy lightbox figure-image" loading=lazy src=../../images/integrations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-92ee184fc7ee54caec2d7630efe90984><img alt="Notifications options" class="lazy lightbox lightbox-image" loading=lazy src=../../images/integrations.png></a></p><p>Take a moment to create some notification rules for your Team.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=controlling-usage>Controlling Usage</h1><ul><li>Discover how you can restrict usage by creating separate Access Tokens and setting limits.</li></ul><h2 id=1-access-tokens>1. Access Tokens<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you wish to control the consumption of Hosts, Containers, Custom Metrics and High Resolution Metrics, you can create multiple Access Tokens and allocate them to different parts of your organization.</p><p>In the UI click on the <strong>&#187;</strong> bottom left and select the <strong>Settings ‚Üí Access Tokens</strong> under <strong>General Settings</strong>.</p><p>The <strong>Access Tokens</strong> Interface provides an overview of your allotments in the form of a list of Access Tokens that have been generated. Every Organization will have a <strong>Default</strong> token generated when they are first set up, but there will typically be multiple Tokens configured.</p><p>Each Token is unique and can be assigned limits for the number of Hosts, Containers, Custom Metrics and High Resolution Metrics it can consume.</p><p>The <strong>Usage Status</strong> Column quickly shows if a token is above or below its assigned limits.</p><p><a href=#R-image-f4d7f371f9a7e0c21b5fd1530049a99f class=lightbox-link><img alt="New token" class="lazy lightbox figure-image" loading=lazy src=../../images/access-tokens.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f4d7f371f9a7e0c21b5fd1530049a99f><img alt="New token" class="lazy lightbox lightbox-image" loading=lazy src=../../images/access-tokens.png></a></p><h2 id=2-creating-a-new-token>2. Creating a new token<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Let create a new token by clicking on the <span class="btn cstyle button blue noicon"><span><span class=title>New Token</span></span></span> button. This will provide you with the <strong>Name Your Access Token</strong> dialog.</p><p>Enter the new name of the new Token by using your Initials e.g. RWC-Token and make sure to tick both <strong>Ingest Token</strong> and <strong>API Token</strong> checkboxes!</p><p><a href=#R-image-2c87afce8121b7f9212de0df9c2687e0 class=lightbox-link><img alt="Name Your token" class="lazy lightbox figure-image" loading=lazy src=../../images/new-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c87afce8121b7f9212de0df9c2687e0><img alt="Name Your token" class="lazy lightbox lightbox-image" loading=lazy src=../../images/new-access-token.png></a></p><p>After you press <span class="btn cstyle button blue noicon"><span><span class=title>OK</span></span></span> you will be taken back to the <strong>Access Token</strong> UI. Here your new token should be present, among the ones created by others.</p><p><a href=#R-image-c8d608f75a93d3d82ca72ca726bc1c24 class=lightbox-link><img alt="full tokenlist" class="lazy lightbox figure-image" loading=lazy src=../../images/access-token-created.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8d608f75a93d3d82ca72ca726bc1c24><img alt="full tokenlist" class="lazy lightbox lightbox-image" loading=lazy src=../../images/access-token-created.png></a></p><p>If you have made an error in your naming, want to disable/enable a token or set a Token limit, click on the ellipsis (<strong>&mldr;</strong>) menu button behind a token limit to open the manage token menu.</p><p><a href=#R-image-5d5ef82f75c68757d9da73dc37692b40 class=lightbox-link><img alt="Show Menu" class="lazy lightbox figure-image" loading=lazy src=../../images/manage-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5d5ef82f75c68757d9da73dc37692b40><img alt="Show Menu" class="lazy lightbox lightbox-image" loading=lazy src=../../images/manage-access-token.png></a></p><p>If you made a typo you can use the <strong>Rename Token</strong> option to correct the name of your token.</p><h2 id=3-disabling-a-token>3. Disabling a token<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If you need to make sure a token cannot be used to send Metrics in you can disable a token.</p><p>Click on <strong>Disable</strong> to disable the token, this means the token cannot be used for sending in data to Splunk Observability Cloud.</p><p>The line with your token should have become greyed out to indicate that it has been disabled as you can see in the screenshot below.</p><p><a href=#R-image-24471b051ee1db8dbd09c6ed09bcd293 class=lightbox-link><img alt="Token disabled" class="lazy lightbox figure-image" loading=lazy src=../../images/disable-access-token.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-24471b051ee1db8dbd09c6ed09bcd293><img alt="Token disabled" class="lazy lightbox lightbox-image" loading=lazy src=../../images/disable-access-token.png></a></p><p>Go ahead and click on the ellipsis (<strong>&mldr;</strong>) menu button to Disable and Enable your token.</p><h2 id=4-manage-token-usage-limits>4. Manage token usage limits<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now, let&rsquo;s start limiting usage by clicking on Manage Token Limit in the 3 <strong>&mldr;</strong> menu.</p><p>This will show the Manage Token Limit Dialog:</p><p><a href=#R-image-b175a2df08d0b174be54da1e524bc8ea class=lightbox-link><img alt="Set Limits on token" class="lazy lightbox figure-image" loading=lazy src=../../images/manage-token-limit.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b175a2df08d0b174be54da1e524bc8ea><img alt="Set Limits on token" class="lazy lightbox lightbox-image" loading=lazy src=../../images/manage-token-limit.png></a></p><p>In this dialog, you can set the limits per category.</p><p>Please go ahead and specify the limits as follows for each usage metric:</p><table><thead><tr><th>Limit</th><th>Value</th></tr></thead><tbody><tr><td>Host Limit</td><td>5</td></tr><tr><td>Container Limit</td><td>15</td></tr><tr><td>Custom Metric Limit</td><td>20</td></tr><tr><td>High Resolution Metric Limit</td><td>0</td></tr></tbody></table><p>For our lab use your email address, and double check that you have the correct numbers in your dialog box as shown in the table above.</p><p>Token limits are used to trigger an alert that notifies one or more recipients when the usage has been above 90% of the limit for 5 minutes.</p><p>To specify the recipients, click <span class="btn cstyle button blue noicon"><span><span class=title>Add Recipient</span></span></span>, then select the recipient or notification method you want to use (specifying recipients is optional but highly recommended).</p><p>The severity of token alerts is always Critical.</p><p>Click on <span class="btn cstyle button blue noicon"><span><span class=title>Update</span></span></span> to save your Access Tokens limits and The Alert Settings.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note: Going above token limit</summary><div class=box-content><p>When a token is at or above its limit in a usage category, new metrics for that usage category will not be stored and processed by Observability Cloud. This will make sure there will be no unexpected cost due to a team sending in data without restriction.</p></div></details><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note: Advanced alerting</summary><div class=box-content><p>If you wish to get alerts before you hit 90%, you can create additional detectors using whatever values you want. These detectors could target the Teams consuming the specific Access Tokens so they can take action before the admins need to get involved.</p></div></details><p>In your company you would distribute these new Access Tokens to various teams, controlling how much information/data they can send to Observability Cloud.</p><p>This will allow you to fine-tune the way you consume your Observability Cloud allotment and prevent overages from happening.</p><p><strong>Congratulations!</strong> You have now completed the Service Bureau module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=nodejs-zero-config-workshop>NodeJS Zero-Config Workshop</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>The goal is to walk through the basic steps to configure the following components of the <strong>Splunk Observability Cloud</strong> platform:</p><ul><li>Splunk Infrastructure Monitoring (IM)</li><li>Splunk Zero Configuration Auto Instrumentation for NodeJS (APM)<ul><li>AlwaysOn Profiling</li></ul></li><li>Splunk Log Observer (LO)</li></ul><p>We will deploy the OpenTelemetry Astronomy Shop application in Kubernetes, which contains two NodeJS services (<strong>Frontend</strong> & <strong>Payment Service</strong>). Once the application and the OpenTelemetry Connector are up and running, we will start seeing metrics, traces and logs via the <strong>Zero Configuration Auto Instrumentation</strong> for NodeJS that will be used by the <strong>Splunk Observability Cloud</strong> platform to provide insights into the application.</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info"></i>
Prerequisites</summary><div class=box-content><ul><li>Outbound SSH access to port <code>2222</code>.</li><li>Outbound HTTP access to port <code>8083</code>.</li><li>Familiarity with the <code>bash</code> shell and <code>vi/vim</code> editor.</li></ul></div></details><p>Next, we will deploy the <strong>OpenTelemetry Demo</strong>.</p><pre class="mermaid actionbar-wrapper align-center">
graph TD
subgraph Service Diagram
accountingservice(Accounting Service):::golang
adservice(Ad Service):::java
cache[(Cache)]
cartservice(Cart Service):::dotnet
checkoutservice(Checkout Service):::golang
currencyservice(Currency Service):::cpp
emailservice(Email Service):::ruby
frauddetectionservice(Fraud Detection Service):::kotlin
frontend(Frontend):::typescript
frontendproxy(Frontend Proxy):::cpp
loadgenerator([Load Generator]):::python
paymentservice(Payment Service):::javascript
productcatalogservice(Product Catalog Service):::golang
quoteservice(Quote Service):::php
recommendationservice(Recommendation Service):::python
shippingservice(Shipping Service):::rust
featureflagservice(Feature Flag Service):::erlang
featureflagstore[(Feature Flag Store)]
queue[(queue)]
Internet --&gt;|HTTP| frontendproxy
frontendproxy --&gt;|HTTP| frontend
frontendproxy --&gt;|HTTP| featureflagservice
loadgenerator --&gt;|HTTP| frontendproxy
accountingservice --&gt;|TCP| queue
cartservice ---&gt;|gRPC| featureflagservice
checkoutservice ---&gt;|gRPC| cartservice --&gt; cache
checkoutservice ---&gt;|gRPC| productcatalogservice
checkoutservice ---&gt;|gRPC| currencyservice
checkoutservice ---&gt;|HTTP| emailservice
checkoutservice ---&gt;|gRPC| paymentservice
checkoutservice --&gt;|gRPC| shippingservice
checkoutservice ---&gt;|TCP| queue
frontend --&gt;|gRPC| adservice
frontend --&gt;|gRPC| cartservice
frontend --&gt;|gRPC| productcatalogservice
frontend --&gt;|gRPC| checkoutservice
frontend --&gt;|gRPC| currencyservice
frontend --&gt;|gRPC| recommendationservice --&gt;|gRPC| productcatalogservice
frontend --&gt;|gRPC| shippingservice --&gt;|HTTP| quoteservice
frauddetectionservice --&gt;|TCP| queue
adservice ---&gt;|gRPC| featureflagservice
productcatalogservice --&gt;|gRPC| featureflagservice
recommendationservice --&gt;|gRPC| featureflagservice
shippingservice --&gt;|gRPC| featureflagservice
featureflagservice --&gt; featureflagstore
end

classDef dotnet fill:#178600,color:white;
classDef cpp fill:#f34b7d,color:white;
classDef erlang fill:#b83998,color:white;
classDef golang fill:#00add8,color:black;
classDef java fill:#b07219,color:white;
classDef javascript fill:#f1e05a,color:black;
classDef kotlin fill:#560ba1,color:white;
classDef php fill:#4f5d95,color:white;
classDef python fill:#3572A5,color:white;
classDef ruby fill:#701516,color:white;
classDef rust fill:#dea584,color:black;
classDef typescript fill:#e98516,color:black;
</pre><pre class="mermaid actionbar-wrapper align-center">
graph TD
subgraph Service Legend
  dotnetsvc(.NET):::dotnet
  cppsvc(C++):::cpp
  erlangsvc(Erlang/Elixir):::erlang
  golangsvc(Go):::golang
  javasvc(Java):::java
  javascriptsvc(JavaScript):::javascript
  kotlinsvc(Kotlin):::kotlin
  phpsvc(PHP):::php
  pythonsvc(Python):::python
  rubysvc(Ruby):::ruby
  rustsvc(Rust):::rust
  typescriptsvc(TypeScript):::typescript
end

classDef dotnet fill:#178600,color:white;
classDef cpp fill:#f34b7d,color:white;
classDef erlang fill:#b83998,color:white;
classDef golang fill:#00add8,color:black;
classDef java fill:#b07219,color:white;
classDef javascript fill:#f1e05a,color:black;
classDef kotlin fill:#560ba1,color:white;
classDef php fill:#4f5d95,color:white;
classDef python fill:#3572A5,color:white;
classDef ruby fill:#701516,color:white;
classDef rust fill:#dea584,color:black;
classDef typescript fill:#e98516,color:black;
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of NodeJS Zero-Config Workshop</h1><article class=default><header class=headline></header><h1 id=deploying-the-opentelemetry-demo>Deploying the OpenTelemetry Demo</h1><h2 id=1-create-a-namespace>1. Create a namespace<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To not conflict with other workshops, we will deploy the OpenTelemetry Demo in a separate namespace called <code>otel-demo</code>. To create the namespace, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create namespace otel-demo</span></span></code></pre></div><h2 id=2-deploy-the-opentelemetry-demo>2. Deploy the OpenTelemetry Demo<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Next, change to the directory containing the OpenTelemetry Demo application:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~/workshop/apm</span></span></code></pre></div><p>Deploy the OpenTelemetry Demo application:</p><div class=tab-panel data-tab-group=R-tabs-a3b5266fda73dee07a79b3f9ffa97a6c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6e7471023d9c4700e09c8af8fb52bb68 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a3b5266fda73dee07a79b3f9ffa97a6c","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-08d3aa223fc2fb1dbd21e2f97bf16422 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-a3b5266fda73dee07a79b3f9ffa97a6c","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6e7471023d9c4700e09c8af8fb52bb68 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -n otel-demo -f otel-demo.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-08d3aa223fc2fb1dbd21e2f97bf16422 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>serviceaccount/opentelemetry-demo created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>service/opentelemetry-demo-shippingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-accountingservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-adservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-cartservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-checkoutservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-currencyservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-emailservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-featureflagservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-ffspostgres created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frauddetectionservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-frontend created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-kafka created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-loadgenerator created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-paymentservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-productcatalogservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-quoteservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-recommendationservice created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-redis created
</span></span><span class=line><span class=cl>deployment.apps/opentelemetry-demo-shippingservice created</span></span></code></pre></div></div></div></div></div><p>Once the application is deployed, we need to wait for the pods to be in a <code>Running</code> state. To check the status of the pods, run the following command:</p><div class=tab-panel data-tab-group=R-tabs-5caf99759cbba36c52fb0b208c94852b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4bb57abf3317c0e4894b96b8cc772dcb aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5caf99759cbba36c52fb0b208c94852b","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span>
</button>
<button aria-controls=R-tab-id-0003f72dd1c6ea967d26e951c7476c08 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5caf99759cbba36c52fb0b208c94852b","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-4bb57abf3317c0e4894b96b8cc772dcb data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods -n otel-demo</span></span></code></pre></div></div></div><div id=R-tab-id-0003f72dd1c6ea967d26e951c7476c08 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                        READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>opentelemetry-demo-emailservice-847d6fb577-bxll6            1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-ffspostgres-55f65465dd-2gsj4             1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-adservice-5b7c68859d-5hx5f               1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-currencyservice-c4cb78446-qsd68          1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frontend-5d7cdb8786-5dl76                1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-kafka-79868d56d8-62wsd                   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-paymentservice-5cb4ccc47c-65hxl          1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-productcatalogservice-59d955f9d6-xtnjr   1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-loadgenerator-755d6cd5b-r5lqs            1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-quoteservice-5fbfb97778-vm62m            1/1     Running   0          38s
</span></span><span class=line><span class=cl>opentelemetry-demo-redis-57c49b7b5b-b2klr                   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-shippingservice-6667f69f78-cwj8q         1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-recommendationservice-749f55f9b6-5k4lc   1/1     Running   0          37s
</span></span><span class=line><span class=cl>opentelemetry-demo-featureflagservice-67677647c-85xtm       1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-checkoutservice-5474bf74b8-2nmns         1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-frauddetectionservice-77fd69d967-lnjcg   1/1     Running   0          39s
</span></span><span class=line><span class=cl>opentelemetry-demo-accountingservice-96d44cfbc-vmtzb        1/1     Running   0          40s
</span></span><span class=line><span class=cl>opentelemetry-demo-cartservice-7c4f59bdd5-rfkf4             1/1     Running   0          40s</span></span></code></pre></div></div></div></div></div><h2 id=3-validate-the-application-is-running>3. Validate the application is running<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To validate the application is running, we will port-forward the frontend service. To do this, run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl port-forward svc/opentelemetry-demo-frontend 8083:8080 -n otel-demo --address<span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span></span></span></code></pre></div><p>Obtain the <strong>public IP address</strong> of the instance you are running on. You can do this by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl ifconfig.me</span></span></code></pre></div><p>Once the port-forward is running, you can access the application by opening a browser and navigating to <code>http://&lt;public IP address>:8083</code>. You should see the following:</p><p><a href=#R-image-e2446baf517287fe8b428d056600b37f class=lightbox-link><img alt="OpenTelemetry Demo" class="lazy lightbox figure-image" loading=lazy src=../images/otel-demo.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e2446baf517287fe8b428d056600b37f><img alt="OpenTelemetry Demo" class="lazy lightbox lightbox-image" loading=lazy src=../images/otel-demo.png></a></p><p>Once you have confirmed the application is running, you can close the port-forward by pressing <code>ctrl + c</code>.</p><p>Next, we will deploy the <strong>OpenTelemetry Collector</strong>.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=installing-the-opentelemetry-collector>Installing the OpenTelemetry Collector</h1><h2 id=1-introduction>1. Introduction<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Delete any existing OpenTelemetry Collectors</summary><div class=box-content><p>If you have completed any other Observability workshops, please ensure you delete the collector running in Kubernetes before continuing. This can be done by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div></div></details><h2 id=2-confirm-environment-variables>2. Confirm environment variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To ensure your instance is configured correctly, we need to confirm that the required environment variables for this workshop are set correctly. In your terminal run the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>env</span></span></code></pre></div><p>In the output check the following environment variables are present and have values set:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ACCESS_TOKEN
</span></span><span class=line><span class=cl>REALM
</span></span><span class=line><span class=cl>RUM_TOKEN
</span></span><span class=line><span class=cl>HEC_TOKEN
</span></span><span class=line><span class=cl>HEC_URL</span></span></code></pre></div><p>For this workshop, <strong>all</strong> of the above are required. If any are missing, please contact your instructor.</p><h2 id=3-install-the-opentelemetry-collector>3. Install the OpenTelemetry Collector<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We can then go ahead and install the Collector. Some additional parameters are passed to the <code>helm install</code> command, they are:</p><ul><li><code>--set="operator.enabled=true"</code> - Enabled the Splunk OpenTelemetry Collector Operator for Kubernetes.</li><li><code>--set="splunkObservability.profilingEnabled=true"</code> - Enables CPU/Memory profiling for supported languages.</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span class=o>&amp;&amp;</span> helm repo update</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install splunk-otel-collector --version 0.136.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operatorcrds.install=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;operator.enabled=true&#34;</span>, <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.realm=</span><span class=nv>$REALM</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.accessToken=</span><span class=nv>$ACCESS_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;clusterName=</span><span class=nv>$INSTANCE</span><span class=s2>-k3s-cluster&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;logsEngine=otel&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkObservability.profilingEnabled=true&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;environment=</span><span class=nv>$INSTANCE</span><span class=s2>-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.endpoint=</span><span class=nv>$HEC_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.token=</span><span class=nv>$HEC_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--set<span class=o>=</span><span class=s2>&#34;splunkPlatform.index=splunk4rookies-workshop&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>splunk-otel-collector-chart/splunk-otel-collector <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-f ~/workshop/k3s/otel-collector.yaml</span></span></code></pre></div><p>Once the installation is completed, you can navigate to the <strong>Kubernetes Navigator</strong> to see the data from your host.</p><p>Click on <strong>Add filters</strong> select <code>k8s.cluster.name</code> and select the cluster of your workshop instance.
You can determine your instance name from the command prompt in your terminal session:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$INSTANCE</span></span></span></code></pre></div><p>Once you see data flowing for your host, we are then ready to get started with the APM component.</p><p><a href=#R-image-114b376b79a8155bf63351bd774bb53e class=lightbox-link><img alt="Kubernetes Navigator" class="lazy lightbox figure-image" loading=lazy src=../images/k8s-navigator.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-114b376b79a8155bf63351bd774bb53e><img alt="Kubernetes Navigator" class="lazy lightbox lightbox-image" loading=lazy src=../images/k8s-navigator.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Mar 5, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=zero-configuration---frontend-service>Zero Configuration - Frontend Service</h1><h2 id=1-patching-the-frontend-service>1. Patching the Frontend service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>First, confirm that you can see your environment in <strong>APM</strong>. There should be a service called <code>loadgenerator</code> displayed in the Service map.</p><p><a href=#R-image-1de824acee7292d6f9c846223f3382fe class=lightbox-link><img alt="APM Service Map" class="lazy lightbox figure-image" loading=lazy src=../images/apm-servicemap.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1de824acee7292d6f9c846223f3382fe><img alt="APM Service Map" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-servicemap.png></a></p><p>Next, we will patch the <code>frontend</code> deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the <code>frontend</code> service in <strong>APM</strong>. Note, that at this point we have not edited any code.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl patch deployment opentelemetry-demo-frontend -n otel-demo -p <span class=s1>&#39;{&#34;spec&#34;: {&#34;template&#34;:{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;instrumentation.opentelemetry.io/inject-nodejs&#34;:&#34;default/splunk-otel-collector&#34;}}}} }&#39;</span></span></span></code></pre></div><ul><li>This will cause the <code>opentelemetry-demo-frontend</code> pod to restart.</li><li>The annotation value <code>default/splunk-otel-collector</code> refers to the instrumentation configuration named <code>splunk-otel-collector</code> in the <code>default</code> namespace.</li><li>If the chart is not installed in the <code>default</code> namespace, modify the annotation value to be <code>{chart_namespace}/splunk-otel-collector</code>.</li></ul><p>After a few minutes, you should see the <code>frontend</code> service in <strong>APM</strong>.</p><p><a href=#R-image-ff5748d25e0d64b28a5c5dcd907e359c class=lightbox-link><img alt=Frontend class="lazy lightbox figure-image" loading=lazy src=../images/apm-frontend.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ff5748d25e0d64b28a5c5dcd907e359c><img alt=Frontend class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-frontend.png></a></p><p>With the <code>frontend</code> service highlighted, click on the <strong>Traces</strong> tab to see the traces for the service. Select one of the traces and confirm that the trace contains metadata confirming that the Splunk Zero-Configuration Auto-Instrumentation for NodeJS is being used.</p><p><a href=#R-image-70a45dac5ee74cb6f2eb087228b83c22 class=lightbox-link><img alt="Zero Configuration" class="lazy lightbox figure-image" loading=lazy src=../images/apm-frontend-trace.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-70a45dac5ee74cb6f2eb087228b83c22><img alt="Zero Configuration" class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-frontend-trace.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=zero-configuration---payment-service>Zero Configuration - Payment Service</h1><h2 id=1-patching-the-payment-service>1. Patching the Payment Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Finally, we will patch the <code>paymentservice</code> deployment with an annotation to inject the NodeJS auto instrumentation. This will allow us to see the <code>paymentservice</code> service in <strong>APM</strong>.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl patch deployment opentelemetry-demo-paymentservice -n otel-demo -p <span class=s1>&#39;{&#34;spec&#34;: {&#34;template&#34;:{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;instrumentation.opentelemetry.io/inject-nodejs&#34;:&#34;default/splunk-otel-collector&#34;}}}} }&#39;</span></span></span></code></pre></div><p>This will cause the <code>opentelemetry-demo-paymentservice</code> pod to restart and after a few minutes, you should see the <code>paymentservice</code> service in <strong>APM</strong>.</p><p><a href=#R-image-645b24fa902c8f8ff35a8beb176c6bf5 class=lightbox-link><img alt=Paymentservice class="lazy lightbox figure-image" loading=lazy src=../images/apm-paymentservice.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-645b24fa902c8f8ff35a8beb176c6bf5><img alt=Paymentservice class="lazy lightbox lightbox-image" loading=lazy src=../images/apm-paymentservice.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=code-profiling---payment-service>Code Profiling - Payment Service</h1><h2 id=1-alwayson-profiling-for-the-payment-service>1. AlwaysOn Profiling for the Payment Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>AlwaysOn Profiling</strong> is a feature of the Splunk Distribution of OpenTelemetry Collector that allows you to collect CPU and Memory profiling data for your services without having to modify your code. This is useful for troubleshooting performance issues in your services. Here are some of the benefits of AlwaysOn Profiling:</p><ul><li>Perform continuous profiling of your applications. The profiler is always on once you activate it.</li><li>Collect code performance context and link it to trace data.</li><li>Explore memory usage and garbage collection of your application.</li><li>Analyze code bottlenecks that impact service performance.</li><li>Identify inefficiencies that increase the need for scaling up cloud resources.</li></ul><p>With the <code>opentelemetry-demo-paymentservice</code> selected, click on <strong>AlwaysOn Profiling</strong> to view the code profiling data for the service.</p><p><a href=#R-image-030417773067272da9e94de00d99ec3d class=lightbox-link><img alt="AlwaysOn Profiling" class="lazy lightbox figure-image" loading=lazy src=../images/alwayson-profiling.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-030417773067272da9e94de00d99ec3d><img alt="AlwaysOn Profiling" class="lazy lightbox lightbox-image" loading=lazy src=../images/alwayson-profiling.png></a></p><p>Here you can see the CPU and Memory profiling data for the <code>paymentservice</code> service. You can also see the CPU and Memory profiling data for the <code>frontend</code> service by selecting the <code>opentelemetry-demofrontend</code> service from the <strong>Service</strong> dropdown.</p><p><a href=#R-image-8587392392f54f19b65b75efbd380f0b class=lightbox-link><img alt="Profiling Service" class="lazy lightbox figure-image" loading=lazy src=../images/profiling-service.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8587392392f54f19b65b75efbd380f0b><img alt="Profiling Service" class="lazy lightbox lightbox-image" loading=lazy src=../images/profiling-service.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=logs---payment-service>Logs - Payment Service</h1><h2 id=1-viewing-the-logs-for-the-payment-service>1. Viewing the logs for the Payment Service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate back to APM from the main menu and under <strong>Services</strong> click on <code>opentelemetry-demo-paymentservice</code>. This will open up the Service map for the <code>paymentservice</code> service only.</p><p>At the bottom of the page, click on the <strong>Logs(1)</strong> tab to view the logs for the <code>paymentservice</code> service.</p><p><a href=#R-image-782991b1f78ed1140020760ee9c54d21 class=lightbox-link><img alt="Related Logs" class="lazy lightbox figure-image" loading=lazy src=../images/related-logs.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-782991b1f78ed1140020760ee9c54d21><img alt="Related Logs" class="lazy lightbox lightbox-image" loading=lazy src=../images/related-logs.png></a></p><p>Once in <strong>Log Observer</strong> select one of the log entries to view the metadata for the log entry.</p><p><a href=#R-image-0a8197907e74968c7e243779ba6cebc0 class=lightbox-link><img alt="Log Entry" class="lazy lightbox figure-image" loading=lazy src=../images/log-entry.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0a8197907e74968c7e243779ba6cebc0><img alt="Log Entry" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-entry.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Nov 6, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=getting-data-in-gdi-with-otel-and-uf>Getting Data In (GDI) with OTel and UF</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>45 minutes</span>
</span>&nbsp;<p>During this technical workshop, you will learn how to:</p><ul><li>Efficiently deploy complex environments</li><li>Capture metrics from these environments to Splunk Observability Cloud</li><li>Auto-instrument a Python application</li><li>Enable OS logging to Splunk Enterprise via Universal Forwarder</li></ul><p>To simplify the workshop modules, a pre-configured AWS EC2 instance is provided.</p><p>By the end of this technical workshop, you will have an approach to demonstrating metrics collection for complex environments and services.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of GDI (OTel & UF)</h1><article class=default><header class=headline></header><h1 id=getting-started-with-o11y-gdi---real-time-enrichment-workshop>Getting Started with O11y GDI - Real Time Enrichment Workshop</h1><p>Please note to begin the following lab, you must have completed the prework:</p><ul><li>Obtain a Splunk Observability Cloud access key</li><li>Understand cli commands</li></ul><p>Follow these steps if using O11y Workshop EC2 instances</p><h2 id=1-verify-yelp-data-files-are-present>1. Verify yelp data files are present<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ll /var/appdata/yelp*</span></span></code></pre></div><h2 id=2-export-the-following-variables>2. Export the following variables<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ACCESS_TOKEN</span><span class=o>=</span>&lt;your-access-token&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>REALM</span><span class=o>=</span>&lt;your-o11y-cloud-realm&gt;
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>clusterName</span><span class=o>=</span>&lt;your-k8s-cluster&gt;</span></span></code></pre></div><h2 id=3-clone-the-following-repo>3. Clone the following repo<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk 
</span></span><span class=line><span class=cl>git clone https://github.com/leungsteve/realtime_enrichment.git 
</span></span><span class=line><span class=cl><span class=nb>cd</span> realtime_enrichment/workshop 
</span></span><span class=line><span class=cl>python3 -m venv rtapp-workshop 
</span></span><span class=line><span class=cl><span class=nb>source</span> rtapp-workshop/bin/activate</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=deploy-complex-environments-and-capture-metrics>Deploy Complex Environments and Capture Metrics</h1><p><strong>Objective:</strong> Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations</p><p><strong>Duration</strong>: 15 Minutes</p><h2 id=scenario>Scenario<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you‚Äôd like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?</p><h3 id=1-where-can-i-find-helm-charts>1. Where can I find helm charts?<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Google ‚Äúmyservice helm chart‚Äù</li><li><code>https://artifacthub.io/</code> (<strong>Note:</strong> Look for charts from trusted organizations, with high star count and frequent updates)</li></ul><h3 id=2-review-apache-kafka-packaged-by-bitnami>2. Review <a href=https://github.com/bitnami/charts/tree/main/bitnami/kafka/#installing-the-chart rel=external>Apache Kafka packaged by Bitnami</a><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>replicaCount=3</code></li><li><code>metrics.jmx.enabled=true</code></li><li><code>metrics.kafka.enabled=true</code></li><li><code>deleteTopicEnable=true</code></li></ul><h3 id=3-review-mongodbr-packaged-by-bitnami>3. Review <a href=https://github.com/bitnami/charts/tree/master/bitnami/mongodb/#installing-the-chart rel=external>MongoDB(R) packaged by Bitnami</a><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>version 12.1.31</code></li><li><code>metrics.enabled=true</code></li><li><code>global.namespaceOverride=default</code></li><li><code>auth.rootUser=root</code></li><li><code>auth.rootPassword=splunk</code></li><li><code>auth.enabled=false</code></li></ul><h3 id=4-install-kafka-and-mongodb-with-helm-charts>4. Install Kafka and MongoDB with helm charts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add bitnami https://charts.bitnami.com/bitnami</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install kafka --set <span class=nv>replicaCount</span><span class=o>=</span><span class=m>3</span> --set metrics.jmx.enabled<span class=o>=</span><span class=nb>true</span> --set metrics.kafka.enabled<span class=o>=</span><span class=nb>true</span>  --set <span class=nv>deleteTopicEnable</span><span class=o>=</span><span class=nb>true</span> bitnami/kafka</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install mongodb --set metrics.enabled<span class=o>=</span><span class=nb>true</span> bitnami/mongodb --set global.namespaceOverride<span class=o>=</span>default --set auth.rootUser<span class=o>=</span>root --set auth.rootPassword<span class=o>=</span>splunk --set auth.enabled<span class=o>=</span><span class=nb>false</span> --version 12.1.31</span></span></code></pre></div><p>Verify the helm chart installation</p><div class=tab-panel data-tab-group=R-tabs-bce6b2d68f7100eab9b1d7315aceef0f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1136f7f8dbe7f08942d6a21662549e3a aria-expanded=true data-tab-item=R-tab-cd4140d3de30b520500459331d08d2bf class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bce6b2d68f7100eab9b1d7315aceef0f","R-tab-cd4140d3de30b520500459331d08d2bf")'>
<span class=tab-nav-text>helm list</span>
</button>
<button aria-controls=R-tab-id-f7f7fe7b045fd8f75770fee31cd48841 aria-expanded=false data-tab-item=R-tab-d7754ffdeefc039cfbea7776e59c75e6 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-bce6b2d68f7100eab9b1d7315aceef0f","R-tab-d7754ffdeefc039cfbea7776e59c75e6")'>
<span class=tab-nav-text>helm list output</span></button></div><div class=tab-content-container><div id=R-tab-id-1136f7f8dbe7f08942d6a21662549e3a data-tab-item=R-tab-cd4140d3de30b520500459331d08d2bf class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm list</span></span></code></pre></div></div></div><div id=R-tab-id-f7f7fe7b045fd8f75770fee31cd48841 data-tab-item=R-tab-d7754ffdeefc039cfbea7776e59c75e6 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME    NAMESPACE   REVISION    UPDATED                                 STATUS      CHART           APP VERSION
</span></span><span class=line><span class=cl>kafka   default     1           2022-11-14 11:21:36.328956822 -0800 PST deployed    kafka-19.1.3    3.3.1
</span></span><span class=line><span class=cl>mongodb default     1           2022-11-14 11:19:36.507690487 -0800 PST deployed    mongodb-12.1.31 5.0.10</span></span></code></pre></div></div></div></div></div><p>Verify the helm chart installation</p><div class=tab-panel data-tab-group=R-tabs-1ca22c215310c3975e6fa9f4b422e377><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e40fe442f484916bf57a65c33640265e aria-expanded=true data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1ca22c215310c3975e6fa9f4b422e377","R-tab-380f56daf2c41382fed5e183e4f1fbe1")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button aria-controls=R-tab-id-5cb7373ceb8b2f077d6889b51c9f309f aria-expanded=false data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1ca22c215310c3975e6fa9f4b422e377","R-tab-01f08a36636a863c4f9cc981367f9ca4")'>
<span class=tab-nav-text>kubectl get pods Output</span></button></div><div class=tab-content-container><div id=R-tab-id-e40fe442f484916bf57a65c33640265e data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-5cb7373ceb8b2f077d6889b51c9f309f data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                              READY   STATUS              RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-exporter-595778d7b4-99ztt   0/1     ContainerCreating   0          17s
</span></span><span class=line><span class=cl>mongodb-b7c968dbd-jxvsj           0/2     Pending             0          6s
</span></span><span class=line><span class=cl>kafka-1                           0/2     ContainerCreating   0          16s
</span></span><span class=line><span class=cl>kafka-2                           0/2     ContainerCreating   0          16s
</span></span><span class=line><span class=cl>kafka-zookeeper-0                 0/1     Pending             0          17s
</span></span><span class=line><span class=cl>kafka-0                           0/2     Pending             0          17s</span></span></code></pre></div></div></div></div></div><p>Use information for each Helm chart and Splunk O11y Data Setup to generate values.yaml for capturing metrics from Kafka and MongoDB.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p><code>values.yaml</code> for the different services will be passed to the Splunk Helm Chart at installation time. These will configure the OTEL collector to capture metrics from these services.</p></div></details><ul><li>References:<ul><li><a href=https://github.com/bitnami/charts/tree/master/bitnami/spark/#installing-the-chart rel=external>Apache Kafka packaged by Bitnami</a></li><li><a href=https://docs.splunk.com/Observability/gdi/kafka/kafka.html rel=external>Configure application receivers for databases ¬ª Apache Kafka</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver rel=external>Kafkametricsreceiver</a></li></ul></li></ul><h4 id=41-example-kafkavaluesyaml>4.1 Example kafka.values.yaml<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>smartagent/kafka</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=c>#endpoint: &#39;`endpoint`:5555&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>5555</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>clusterName</span><span class=p>:</span><span class=w> </span><span class=l>sl-kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>otelK8sClusterReceiver</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>k8sEventsEnabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kafkametrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>brokers</span><span class=p>:</span><span class=w> </span><span class=l>kafka:9092</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>protocol_version</span><span class=p>:</span><span class=w> </span><span class=m>2.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>brokers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>topics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>consumers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c>#- prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>k8s_cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>kafkametrics</span></span></span></code></pre></div><h4 id=42-example-mongodbvaluesyaml>4.2 Example mongodb.values.yaml<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>smartagent/mongodb</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;mongo&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>mongodb.default.svc.cluster.local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>27017</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>databases</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;admin&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;O11y&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;local&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;config&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>sendCollectionMetrics</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>sendCollectionTopMetrics</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div><h4 id=43-example-zookeepervaluesyaml>4.3 Example zookeeper.values.yaml<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otelAgent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>smartagent/zookeeper</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka-zookeeper&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>collectd/zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>kafka-zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>2181</span></span></span></code></pre></div><h3 id=5-install-the-splunk-otel-helm-chart>5. Install the Splunk OTEL helm chart<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/otel_yamls/ 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>helm repo update</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install --set <span class=nv>provider</span><span class=o>=</span><span class=s1>&#39; &#39;</span> --set <span class=nv>distro</span><span class=o>=</span><span class=s1>&#39; &#39;</span> --set splunkObservability.accessToken<span class=o>=</span><span class=nv>$ACCESS_TOKEN</span> --set <span class=nv>clusterName</span><span class=o>=</span><span class=nv>$clusterName</span> --set splunkObservability.realm<span class=o>=</span><span class=nv>$REALM</span> --set otelCollector.enabled<span class=o>=</span><span class=s1>&#39;false&#39;</span> --set gateway.enabled<span class=o>=</span><span class=s1>&#39;false&#39;</span> --values kafka.values.yaml --values mongodb.values.yaml --values zookeeper.values.yaml --values alwayson.values.yaml --values k3slogs.yaml --generate-name splunk-otel-collector-chart/splunk-otel-collector</span></span></code></pre></div><h3 id=6-verify-installation>6. Verify installation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Verify that the Kafka, MongoDB and Splunk OTEL Collector helm charts are installed, note that names may differ.</p><div class=tab-panel data-tab-group=R-tabs-4054652f526e7ab7b057c12efafaedd5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-801b34cbadd31f1cbee6332ee8a59011 aria-expanded=true data-tab-item=R-tab-cd4140d3de30b520500459331d08d2bf class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4054652f526e7ab7b057c12efafaedd5","R-tab-cd4140d3de30b520500459331d08d2bf")'>
<span class=tab-nav-text>helm list</span>
</button>
<button aria-controls=R-tab-id-95684bff8f1965f9311ce7b89d6ce4d8 aria-expanded=false data-tab-item=R-tab-9a21c97b27f4aae2467ba925575f4749 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4054652f526e7ab7b057c12efafaedd5","R-tab-9a21c97b27f4aae2467ba925575f4749")'>
<span class=tab-nav-text>helm list Output</span></button></div><div class=tab-content-container><div id=R-tab-id-801b34cbadd31f1cbee6332ee8a59011 data-tab-item=R-tab-cd4140d3de30b520500459331d08d2bf class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm list</span></span></code></pre></div></div></div><div id=R-tab-id-95684bff8f1965f9311ce7b89d6ce4d8 data-tab-item=R-tab-9a21c97b27f4aae2467ba925575f4749 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                NAMESPACE   REVISION    UPDATED                                 STATUS      CHART                           APP VERSION
</span></span><span class=line><span class=cl>kafka                               default     1           2021-12-07 12:48:47.066421971 -0800 PST deployed    kafka-14.4.1                    2.8.1
</span></span><span class=line><span class=cl>mongodb                             default     1           2021-12-07 12:49:06.132771625 -0800 PST deployed    mongodb-10.29.2                 4.4.10
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184    default     1           2021-12-07 12:49:45.694013749 -0800 PST deployed    splunk-otel-collector-0.37.1    0.37.1</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-cccd53e4171b280728d25a4b04b7261b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fcda059fb31ed9a1bd62f6ff9fede42e aria-expanded=true data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-cccd53e4171b280728d25a4b04b7261b","R-tab-380f56daf2c41382fed5e183e4f1fbe1")'>
<span class=tab-nav-text>kubectl get pods</span>
</button>
<button aria-controls=R-tab-id-4621e8b9ab0ccde27149465c7429dc10 aria-expanded=false data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-cccd53e4171b280728d25a4b04b7261b","R-tab-01f08a36636a863c4f9cc981367f9ca4")'>
<span class=tab-nav-text>kubectl get pods Output</span></button></div><div class=tab-content-container><div id=R-tab-id-fcda059fb31ed9a1bd62f6ff9fede42e data-tab-item=R-tab-380f56daf2c41382fed5e183e4f1fbe1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div></div></div><div id=R-tab-id-4621e8b9ab0ccde27149465c7429dc10 data-tab-item=R-tab-01f08a36636a863c4f9cc981367f9ca4 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running   0          18m
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>mongodb-79cf87987f-gsms8                                          2/2     Running   0          18m
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>kafka-exporter-7c65fcd646-dvmtv                                   1/1     Running   3          18m
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running   1          18m
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184-agent-27s5c                      2/2     Running   0          17m
</span></span><span class=line><span class=cl>splunk-otel-collector-1638910184-k8s-cluster-receiver-8587qmh9l   1/1     Running   0          17m</span></span></code></pre></div></div></div></div></div><h3 id=7-verify-dashboards>7. Verify dashboards<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Verify that out of the box dashboards for Kafka, MongoDB and Zookeeper are populated in the Infrastructure Monitor landing page. Drill down into each component to view granular details for each service.</p><p>Tip: You can use the filter <code>k8s.cluster.name</code> with your cluster name to find your instance.</p><ul><li>Infrastructure Monitoring Landing page:</li></ul><p><a href=#R-image-4c50770a7e08aef877d00189c474c550 class=lightbox-link><img alt=IM-landing-page class="lazy lightbox figure-image" loading=lazy src=../images/inframon.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4c50770a7e08aef877d00189c474c550><img alt=IM-landing-page class="lazy lightbox lightbox-image" loading=lazy src=../images/inframon.jpg></a></p><ul><li>K8 Navigator:</li></ul><p><a href=#R-image-83e2c7012e95a988a84469ef25821bb0 class=lightbox-link><img alt=k8-navigator class="lazy lightbox figure-image" loading=lazy src=../images/k8navigator.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-83e2c7012e95a988a84469ef25821bb0><img alt=k8-navigator class="lazy lightbox lightbox-image" loading=lazy src=../images/k8navigator.jpg></a></p><ul><li>MongoDB Dashboard:</li></ul><p><a href=#R-image-c65f20bbbe1b0472c2c439785ba5cef6 class=lightbox-link><img alt=mongodb-dash class="lazy lightbox figure-image" loading=lazy src=../images/mongoDB.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c65f20bbbe1b0472c2c439785ba5cef6><img alt=mongodb-dash class="lazy lightbox lightbox-image" loading=lazy src=../images/mongoDB.jpg></a></p><ul><li>Kafka Dashboard:</li></ul><p><a href=#R-image-8f67dc01d5ff2fd1a73fe462e9be0ffa class=lightbox-link><img alt=kafka-dash class="lazy lightbox figure-image" loading=lazy src=../images/kafka.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f67dc01d5ff2fd1a73fe462e9be0ffa><img alt=kafka-dash class="lazy lightbox lightbox-image" loading=lazy src=../images/kafka.jpg></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 29, 2025</span></span></footer></article><article class=default><header class=headline></header><h1 id=code-to-kubernetes---python>Code to Kubernetes - Python</h1><h2 id=code-to-kubernetes---python>Code to Kubernetes - Python<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p><strong>Objective:</strong> Understand activities to instrument a python application and run it on Kubernetes.</p><ul><li>Verify the code</li><li>Containerize the app</li><li>Deploy the container in Kubernetes</li></ul><p><strong>Note:</strong> these steps do not involve Splunk</p><p><strong>Duration:</strong> 15 Minutes</p><h2 id=1-verify-the-code---review-service>1. Verify the code - Review service<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to the review directory</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/flask_apps/review/</span></span></code></pre></div><p>Inspect review.py (realtime_enrichment/flask_apps/review)</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat review.py</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>review</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>num_reviews</span> <span class=o>=</span> <span class=mi>8635403</span>
</span></span><span class=line><span class=cl><span class=n>num_reviews</span> <span class=o>=</span> <span class=mi>100000</span>
</span></span><span class=line><span class=cl><span class=n>reviews_file</span> <span class=o>=</span> <span class=s1>&#39;/var/appdata/yelp_academic_dataset_review.json&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@review.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello_world</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>message</span><span class=o>=</span><span class=s1>&#39;Hello, you want to hit /get_review. We have &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>num_reviews</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39; reviews!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@review.route</span><span class=p>(</span><span class=s1>&#39;/get_review&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_review</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>random_review_int</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=n>num_reviews</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>line_num</span> <span class=o>=</span> <span class=n>random_review_int</span> <span class=o>+</span> <span class=s1>&#39;q;d&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>command</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;sed&#34;</span><span class=p>,</span> <span class=n>line_num</span><span class=p>,</span> <span class=n>reviews_file</span><span class=p>]</span> <span class=c1># sed &#34;7997242q;d&#34; &lt;file&gt;</span>
</span></span><span class=line><span class=cl>    <span class=n>random_review</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>command</span><span class=p>,</span> <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>random_review</span><span class=o>.</span><span class=n>stdout</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>review</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span> <span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=mi>5000</span><span class=p>,</span> <span class=n>debug</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span></span></span></code></pre></div><p>Inspect requirements.txt</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Flask==2.0.2</span></span></code></pre></div><p>Create a virtual environment and Install the necessary python packages</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/realtime_enrichment/workshop/flask_apps_start/review/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pip freeze <span class=c1>#note output</span>
</span></span><span class=line><span class=cl>pip install -r requirements.txt
</span></span><span class=line><span class=cl>pip freeze <span class=c1>#note output</span></span></span></code></pre></div><p>Start the REVIEW service. <strong>Note:</strong> You can stop the app with control+C</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 review.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> * Serving Flask app <span class=s1>&#39;review&#39;</span> <span class=o>(</span>lazy loading<span class=o>)</span>
</span></span><span class=line><span class=cl> * Environment: production
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl> * Running on http://10.160.145.246:5000/ <span class=o>(</span>Press CTRL+C to quit<span class=o>)</span>
</span></span><span class=line><span class=cl> * Restarting with stat
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:46:38<span class=o>]</span> <span class=s2>&#34;GET / HTTP/1.1&#34;</span> <span class=m>200</span> -
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:47:02<span class=o>]</span> <span class=s2>&#34;GET /get_review HTTP/1.1&#34;</span> <span class=m>200</span> -
</span></span><span class=line><span class=cl>127.0.0.1 - - <span class=o>[</span>17/May/2022 22:47:58<span class=o>]</span> <span class=s2>&#34;GET /get_review HTTP/1.1&#34;</span> <span class=m>200</span> -</span></span></code></pre></div><p>Verify that the service is working</p><ul><li>Open a new terminal and ssh into your ec2 instance. Then use the curl command in your terminal.</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:5000</span></span></code></pre></div><ul><li>Or hit the URL <code>http://{Your_EC2_IP_address}:5000</code> and <code>http://{Your_EC2_IP_address}:5000/get_review</code> with a browser</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:5000
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Hello, you want to hit /get_review. We have 100000 reviews!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl localhost:5000/get_review
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;review_id&#34;</span>:<span class=s2>&#34;NjbiESXotcEdsyTc4EM3fg&#34;</span>,<span class=s2>&#34;user_id&#34;</span>:<span class=s2>&#34;PR9LAM19rCM_HQiEm5OP5w&#34;</span>,<span class=s2>&#34;business_id&#34;</span>:<span class=s2>&#34;UAtX7xmIfdd1W2Pebf6NWg&#34;</span>,<span class=s2>&#34;stars&#34;</span>:3.0,<span class=s2>&#34;useful&#34;</span>:0,<span class=s2>&#34;funny&#34;</span>:0,<span class=s2>&#34;cool&#34;</span>:0,<span class=s2>&#34;text&#34;</span>:<span class=s2>&#34;-If you&#39;re into cheap beer (pitcher of bud-light for </span><span class=nv>$7</span><span class=s2>) decent wings and a good time, this is the place for you. Its generally very packed after work hours and weekends. Don&#39;t expect cocktails. \n\n-You run into a lot of sketchy characters here sometimes but for the most part if you&#39;re chilling with friends its not that bad. \n\n-Friendly bouncer and bartenders.&#34;</span>,<span class=s2>&#34;date&#34;</span>:<span class=s2>&#34;2016-04-12 20:23:24&#34;</span><span class=o>}</span></span></span></code></pre></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><ul><li>What does this application do?</li><li>Do you see the yelp dataset being used?</li><li>Why did the output of pip freeze differ each time you ran it?</li><li>Which port is the REVIEW app listening on? Can other python apps use this same port?</li></ul></div></details><h2 id=2-create-a-review-container>2. Create a REVIEW container<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To create a container image, you need to create a Dockerfile, run docker build to build the image referencing the Docker file and push it up to a remote repository so it can be pulled by other sources.</p><ul><li><a href=https://docs.docker.com/get-started/02_our_app/ rel=external>Create a Dockerfile</a></li><li>Creating a Dockerfile typically requires you to consider the following:<ul><li>Identify an appropriate container image<ul><li>ubuntu vs. python vs. alpine/slim</li><li>ubuntu - overkill, large image size, wasted resources when running in K8</li><li>this is a python app, so pick an image that is optimized for it</li><li><a href=https://lih-verma.medium.com/alpine-makes-python-docker-builds-way-too-50-slower-and-images-double-2-larger-61d1d43cbc79 rel=external>avoid alpine for python</a></li></ul></li><li>Order matters<ul><li>you&rsquo;re building layers.</li><li>re-use the layers as much as possible</li><li>have items that change often towards the end</li></ul></li><li><a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/ rel=external>Other Best practices for writing Dockerfiles</a></li></ul></li></ul><p>Dockerfile for review</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.10-slim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> requirements.txt /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install -r requirements.txt<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./review.py /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 5000</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span> <span class=s2>&#34;python&#34;</span><span class=p>,</span> <span class=s2>&#34;review.py&#34;</span> <span class=p>]</span></span></span></code></pre></div><p>Create a container image (locally)
Run ‚Äòdocker build‚Äô to build a local container image referencing the Dockerfile</p><div class=tab-panel data-tab-group=R-tabs-346c55b6215491e5a7412eacc5c85fd0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7d7a0bf4e0abaa8d1cf50b2c29f448d4 aria-expanded=true data-tab-item=R-tab-1915a0cd1649e80f5076619cfbc3f51d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-346c55b6215491e5a7412eacc5c85fd0","R-tab-1915a0cd1649e80f5076619cfbc3f51d")'>
<span class=tab-nav-text>docker build</span>
</button>
<button aria-controls=R-tab-id-ffe210ef72eb0879f4409b6a1f46f9a8 aria-expanded=false data-tab-item=R-tab-e3a8f88569b0e784fe2b51325a3d5b27 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-346c55b6215491e5a7412eacc5c85fd0","R-tab-e3a8f88569b0e784fe2b51325a3d5b27")'>
<span class=tab-nav-text>docker build Output</span></button></div><div class=tab-content-container><div id=R-tab-id-7d7a0bf4e0abaa8d1cf50b2c29f448d4 data-tab-item=R-tab-1915a0cd1649e80f5076619cfbc3f51d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -f Dockerfile -t localhost:8000/review:0.01 .</span></span></code></pre></div></div></div><div id=R-tab-id-ffe210ef72eb0879f4409b6a1f46f9a8 data-tab-item=R-tab-e3a8f88569b0e784fe2b51325a3d5b27 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[+] Building 35.5s (11/11) FINISHED
</span></span><span class=line><span class=cl> =&gt; [internal] load build definition from Dockerfile                              0.0s
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl> =&gt; [3/5] COPY requirements.txt /app                                              0.0s
</span></span><span class=line><span class=cl> =&gt; [4/5] RUN pip install -r requirements.txt                                     4.6s
</span></span><span class=line><span class=cl> =&gt; [5/5] COPY ./review.py /app                                                   0.0s
</span></span><span class=line><span class=cl> =&gt; exporting to image                                                            0.2s
</span></span><span class=line><span class=cl> =&gt; =&gt; exporting layers                                                           0.2s
</span></span><span class=line><span class=cl> =&gt; =&gt; writing image sha256:61da27081372723363d0425e0ceb34bbad6e483e698c6fe439c5  0.0s
</span></span><span class=line><span class=cl> =&gt; =&gt; naming to docker.io/localhost:8000/review:0.1                                   0.0</span></span></code></pre></div></div></div></div></div><p>Push the container image into a container repository
Run ‚Äòdocker push‚Äô to place a copy of the REVIEW container to a remote location</p><div class=tab-panel data-tab-group=R-tabs-eb582deecdf41870713e8891c738bc8e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-60b76c523e371d3144f2f9c71bd6ba51 aria-expanded=true data-tab-item=R-tab-6a100fcee87852662d457afaa64af06f class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-eb582deecdf41870713e8891c738bc8e","R-tab-6a100fcee87852662d457afaa64af06f")'>
<span class=tab-nav-text>docker push</span>
</button>
<button aria-controls=R-tab-id-a3ed8920cac187b0d0c97bcaf1466010 aria-expanded=false data-tab-item=R-tab-5d608ef7904c4d323726f675eb0a315e class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-eb582deecdf41870713e8891c738bc8e","R-tab-5d608ef7904c4d323726f675eb0a315e")'>
<span class=tab-nav-text>docker push Output</span></button></div><div class=tab-content-container><div id=R-tab-id-60b76c523e371d3144f2f9c71bd6ba51 data-tab-item=R-tab-6a100fcee87852662d457afaa64af06f class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker push localhost:8000/review:0.01</span></span></code></pre></div></div></div><div id=R-tab-id-a3ed8920cac187b0d0c97bcaf1466010 data-tab-item=R-tab-5d608ef7904c4d323726f675eb0a315e class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>The push refers to repository [docker.io/localhost:8000/review]
</span></span><span class=line><span class=cl>02c36dfb4867: Pushed
</span></span><span class=line><span class=cl>         ...snip...
</span></span><span class=line><span class=cl>fd95118eade9: Pushed
</span></span><span class=line><span class=cl>0.1: digest: sha256:3651f740abe5635af95d07acd6bcf814e4d025fcc1d9e4af9dee023a9b286f38 size: 2202</span></span></code></pre></div></div></div></div></div><p>Verify that the image is in Docker Hub. The same info can be found in Docker Desktop</p><div class=tab-panel data-tab-group=R-tabs-3bd723d234c5158657c8307496bdcf84><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-90eca844f577246afecc1cd89574d776 aria-expanded=true data-tab-item=R-tab-a65460a4f8b0f4147089358b4cdb6564 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3bd723d234c5158657c8307496bdcf84","R-tab-a65460a4f8b0f4147089358b4cdb6564")'>
<span class=tab-nav-text>get catalog</span>
</button>
<button aria-controls=R-tab-id-7ef63edce2b0ef303e156f682078693c aria-expanded=false data-tab-item=R-tab-e28a48ded3d0fd8c75a69cc39fdc033c class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3bd723d234c5158657c8307496bdcf84","R-tab-e28a48ded3d0fd8c75a69cc39fdc033c")'>
<span class=tab-nav-text>get catalog Output</span></button></div><div class=tab-content-container><div id=R-tab-id-90eca844f577246afecc1cd89574d776 data-tab-item=R-tab-a65460a4f8b0f4147089358b4cdb6564 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -s http://localhost:8000/v2/_catalog</span></span></code></pre></div></div></div><div id=R-tab-id-7ef63edce2b0ef303e156f682078693c data-tab-item=R-tab-e28a48ded3d0fd8c75a69cc39fdc033c class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;repositories&#34;:[&#34;review&#34;]}</span></span></code></pre></div></div></div></div></div><h2 id=3-run-review-in-kubernetes>3. Run REVIEW in Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Create K8 deployment yaml file for the REVIEW app</p><p>Reference: <a href=https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#creating-a-deployment rel=external>Creating a Deployment</a></p><p>review.deployment.yaml</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>regcred</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8000/review:0.01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span></span></span></code></pre></div><p>Notes regarding review.deployment.yaml:</p><ul><li>labels - K8 uses labels and selectors to tag and identify resources<ul><li>In the next step, we&rsquo;ll create a service and associate it to this deployment using the label</li></ul></li><li>replicas = 1<ul><li>K8 allows you to scale your deployments horizontally</li><li>We&rsquo;ll leverage this later to add load and increase our ingestion rate</li></ul></li><li>regcred provides this deployment with the ability to access your dockerhub credentials which is necessary to pull the container image.</li><li>The volume definition and volumemount make the yelp dataset visible to the container</li></ul><p>Create a K8 service yaml file for the review app.</p><p>Reference: <a href=https://kubernetes.io/docs/concepts/services-networking/service/#defining-a-service rel=external>Creating a service:</a></p><p>review.service.yaml</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>NodePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>5000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>5000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nodePort</span><span class=p>:</span><span class=w> </span><span class=m>30000</span></span></span></code></pre></div><p>Notes about review.service.yaml:</p><ul><li>the selector associates this service to pods with the label app with the value being review</li><li>the review service exposes the review pods as a network service<ul><li>other pods can now ping &lsquo;review&rsquo; and they will hit a review pod.</li><li>a pod would get a review if it ran <code>curl http://review:5000</code></li></ul></li><li>NodePort service<ul><li>the service is accessible to the K8 host by the nodePort, 30000</li><li>Another machine that has this can get a review if it ran <code>curl http://&lt;k8 host ip>:30000</code></li></ul></li></ul><p>Apply the review deployment and service</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f review.service.yaml -f review.deployment.yaml</span></span></code></pre></div><p>Verify that the deployment and services are running:</p><div class=tab-panel data-tab-group=R-tabs-ca8e92a6f90e925e602bc5f58c211b92><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b4e557909405ff07a07e38df17b12e01 aria-expanded=true data-tab-item=R-tab-3dc428dff585a897afb9c534d6f87991 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ca8e92a6f90e925e602bc5f58c211b92","R-tab-3dc428dff585a897afb9c534d6f87991")'>
<span class=tab-nav-text>kubectl get deployments</span>
</button>
<button aria-controls=R-tab-id-4aeb7e709c96c428826cde8d367aacd0 aria-expanded=false data-tab-item=R-tab-2e6220c42e96d582dbd1459eb0f1ab41 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ca8e92a6f90e925e602bc5f58c211b92","R-tab-2e6220c42e96d582dbd1459eb0f1ab41")'>
<span class=tab-nav-text>kubectl get deployments output</span></button></div><div class=tab-content-container><div id=R-tab-id-b4e557909405ff07a07e38df17b12e01 data-tab-item=R-tab-3dc428dff585a897afb9c534d6f87991 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get deployments</span></span></code></pre></div></div></div><div id=R-tab-id-4aeb7e709c96c428826cde8d367aacd0 data-tab-item=R-tab-2e6220c42e96d582dbd1459eb0f1ab41 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                    READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>review                                                  1/1     1            1           19h</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-189eb4cfe0bb5b3c2b00ae358f6a4044><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3f65256572e60f43517bb49169bfd8aa aria-expanded=true data-tab-item=R-tab-29f7927bca94683360c140edec705732 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-189eb4cfe0bb5b3c2b00ae358f6a4044","R-tab-29f7927bca94683360c140edec705732")'>
<span class=tab-nav-text>kubectl get services</span>
</button>
<button aria-controls=R-tab-id-d71b564a7edb6fb29341779474662b41 aria-expanded=false data-tab-item=R-tab-9fdcbe999ed06adb58be039b207bf199 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-189eb4cfe0bb5b3c2b00ae358f6a4044","R-tab-9fdcbe999ed06adb58be039b207bf199")'>
<span class=tab-nav-text>kubectl get services output</span></button></div><div class=tab-content-container><div id=R-tab-id-3f65256572e60f43517bb49169bfd8aa data-tab-item=R-tab-29f7927bca94683360c140edec705732 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get services</span></span></code></pre></div></div></div><div id=R-tab-id-d71b564a7edb6fb29341779474662b41 data-tab-item=R-tab-9fdcbe999ed06adb58be039b207bf199 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                         AGE
</span></span><span class=line><span class=cl>review                     NodePort    10.43.175.21    &lt;none&gt;        5000:30000/TCP                  154d</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-f3bce58f67d668ffa8282c133ea94c01><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8c2347474bf7baf03a6a730672c791fd aria-expanded=true data-tab-item=R-tab-167a2b05c11f6121596ba5cb681cb840 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f3bce58f67d668ffa8282c133ea94c01","R-tab-167a2b05c11f6121596ba5cb681cb840")'>
<span class=tab-nav-text>curl localhost</span>
</button>
<button aria-controls=R-tab-id-ef1b661b6246d2ca948f452cd23ae7cf aria-expanded=false data-tab-item=R-tab-bcdfb2d59eaedcba50ea7d74b2bec08c class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f3bce58f67d668ffa8282c133ea94c01","R-tab-bcdfb2d59eaedcba50ea7d74b2bec08c")'>
<span class=tab-nav-text>curl localhost Output</span></button></div><div class=tab-content-container><div id=R-tab-id-8c2347474bf7baf03a6a730672c791fd data-tab-item=R-tab-167a2b05c11f6121596ba5cb681cb840 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:30000</span></span></code></pre></div></div></div><div id=R-tab-id-ef1b661b6246d2ca948f452cd23ae7cf data-tab-item=R-tab-bcdfb2d59eaedcba50ea7d74b2bec08c class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;message&#34;: &#34;Hello, you want to hit /get_review. We have 100000 reviews!&#34;
</span></span><span class=line><span class=cl>}</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-4345e9e3793a79ae27f1ece7da00a5a8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-546cea466e0f70cde4ebee138f5c3836 aria-expanded=true data-tab-item=R-tab-5d68512a3691f5786ba99c83801821a2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4345e9e3793a79ae27f1ece7da00a5a8","R-tab-5d68512a3691f5786ba99c83801821a2")'>
<span class=tab-nav-text>get review</span>
</button>
<button aria-controls=R-tab-id-9905ff24a296fb613b6e21c2c8813767 aria-expanded=false data-tab-item=R-tab-570021131595e6d40dccbef0ac661223 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4345e9e3793a79ae27f1ece7da00a5a8","R-tab-570021131595e6d40dccbef0ac661223")'>
<span class=tab-nav-text>get review Output</span></button></div><div class=tab-content-container><div id=R-tab-id-546cea466e0f70cde4ebee138f5c3836 data-tab-item=R-tab-5d68512a3691f5786ba99c83801821a2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl localhost:30000/get_review</span></span></code></pre></div></div></div><div id=R-tab-id-9905ff24a296fb613b6e21c2c8813767 data-tab-item=R-tab-570021131595e6d40dccbef0ac661223 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;review_id&#34;:&#34;Vv9rHtfBrFc-1M1DHRKN9Q&#34;,&#34;user_id&#34;:&#34;EaNqIwKkM7p1bkraKotqrg&#34;,&#34;business_id&#34;:&#34;TA1KUSCu8GkWP9w0rmElxw&#34;,&#34;stars&#34;:3.0,&#34;useful&#34;:1,&#34;funny&#34;:0,&#34;cool&#34;:0,&#34;text&#34;:&#34;This is the first time I&#39;ve actually written a review for Flip, but I&#39;ve probably been here about 10 times.  \n\nThis used to be where I would take out of town guests who wanted a good, casual, and relatively inexpensive meal.  \n\nI hadn&#39;t been for a while, so after a long day in midtown, we decided to head to Flip.  \n\nWe had the fried pickles, onion rings, the gyro burger, their special burger, and split a nutella milkshake.  I have tasted all of the items we ordered previously (with the exception of the special) and have been blown away with how good they were.  My guy had the special which was definitely good, so no complaints there.  The onion rings and the fried pickles were greasier than expected.  Though I&#39;ve thought they were delicious in the past, I probably wouldn&#39;t order either again.  The gyro burger was good, but I could have used a little more sauce.  It almost tasted like all of the ingredients didn&#39;t entirely fit together.  Something was definitely off. It was a friday night and they weren&#39;t insanely busy, so I&#39;m not sure I would attribute it to the staff not being on their A game...\n\nDon&#39;t get me wrong.  Flip is still good.  The wait staff is still amazingly good looking.  They still make delicious milk shakes.  It&#39;s just not as amazing as it once was, which really is a little sad.&#34;,&#34;date&#34;:&#34;2010-10-11 18:18:35&#34;}</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-question"></i>
Workshop Question</summary><div class=box-content><p>What changes are required if you need to make an update to your Dockerfile now?</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=instrument-reviews-for-tracing>Instrument REVIEWS for Tracing</h1><h2 id=1-use-data-setup-to-instrument-a-python-application>1. Use Data Setup to instrument a Python application<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Within the O11y Cloud UI:</p><p>Data Management -> Add Integration -> Monitor Applications -> Python (traces) -> Add Integration</p><p>Provide the following to the Configure Integration Wizard:</p><ul><li><p>Service: review</p></li><li><p>Django: no</p></li><li><p>collector endpoint: <code>http://localhost:4317</code></p></li><li><p>Environment: rtapp-workshop-[YOURNAME]</p></li><li><p>Kubernetes: yes</p></li><li><p>Legacy Agent: no</p></li></ul><p><a href=#R-image-e6d6a7e8ab5606e1018ae3ff995bf754 class=lightbox-link><img alt=o11y_cloud_ui class="lazy lightbox figure-image" loading=lazy src=../images/configureintegration.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e6d6a7e8ab5606e1018ae3ff995bf754><img alt=o11y_cloud_ui class="lazy lightbox lightbox-image" loading=lazy src=../images/configureintegration.png></a></p><p>We are instructed to:</p><ul><li>Install the instrumentation packages for your Python environment.</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pip install splunk-opentelemetry[all]
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>splunk-py-trace-bootstrap</span></span></code></pre></div><ul><li><p>Configure the Downward API to expose environment variables to Kubernetes resources.</p><p>For example, update a Deployment to inject environment variables by adding <code>.spec.template.spec.containers.env</code> like:</p></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>your-application</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myapp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_OTEL_AGENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;review&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;deployment.environment=rtapp-workshop-stevel&#34;</span></span></span></code></pre></div><ul><li><p>Enable the Splunk OTel Python agent by editing your Python service command.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>splunk-py-trace python3 main.py --port=8000</span></span></code></pre></div></li><li><p>The actions we must perform include:</p><ul><li>Update the Dockerfile to install the splunk-opentelemetry packages</li><li>Update the deployment.yaml for each service to include these environment variables which will be used by the pod and container.</li><li>Update our Dockerfile for REVIEW so that our program is bootstrapped with splunk-py-trace</li></ul></li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>We will accomplish this by:</p><ol><li>generating a new requirements.txt file</li><li>generating a new container image with an updated Dockerfile for REVIEW and then</li><li>update the review.deployment.yaml to capture all of these changes.</li></ol></div></details><h2 id=2-update-the-review-container>2. Update the REVIEW container<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><p>Generate a new container image</p></li><li><p>Update the Dockerfile for REVIEW (<code>/workshop/flask_apps_finish/review</code>)</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.10-slim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> requirements.txt /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install -r requirements.txt<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install splunk-opentelemetry<span class=o>[</span>all<span class=o>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> splk-py-trace-bootstrap<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./review.py /app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>EXPOSE</span><span class=s> 5000</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span> <span class=s2>&#34;splunk-py-trace&#34;</span> <span class=p>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span> <span class=s2>&#34;python&#34;</span><span class=p>,</span> <span class=s2>&#34;review.py&#34;</span> <span class=p>]</span></span></span></code></pre></div></li></ul><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>Note that the only lines, in bold, added to the Dockerfile</p></div></details><ul><li>Generate a new container image with docker build in the ‚Äòfinished‚Äô directory</li><li>Notice that I have changed the repository name from <code>localhost:8000/review:0.01</code> to <code>localhost:8000/review-splkotel:0.01</code></li></ul><p>Ensure you are in the correct directory.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>pwd</span>
</span></span><span class=line><span class=cl>./workshop/flask_apps_finish/review</span></span></code></pre></div><div class=tab-panel data-tab-group=R-tabs-2ee3a9dc26e7bf5f9679c777a1ff65cd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-37dcd52519c6786691dfc12be7daa036 aria-expanded=true data-tab-item=R-tab-1915a0cd1649e80f5076619cfbc3f51d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2ee3a9dc26e7bf5f9679c777a1ff65cd","R-tab-1915a0cd1649e80f5076619cfbc3f51d")'>
<span class=tab-nav-text>docker build</span>
</button>
<button aria-controls=R-tab-id-f2f30cd9f06d88016d21d326da8d3a28 aria-expanded=false data-tab-item=R-tab-e3a8f88569b0e784fe2b51325a3d5b27 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-2ee3a9dc26e7bf5f9679c777a1ff65cd","R-tab-e3a8f88569b0e784fe2b51325a3d5b27")'>
<span class=tab-nav-text>docker build Output</span></button></div><div class=tab-content-container><div id=R-tab-id-37dcd52519c6786691dfc12be7daa036 data-tab-item=R-tab-1915a0cd1649e80f5076619cfbc3f51d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -f Dockerfile.review -t localhost:8000/review-splkotel:0.01 .</span></span></code></pre></div></div></div><div id=R-tab-id-f2f30cd9f06d88016d21d326da8d3a28 data-tab-item=R-tab-e3a8f88569b0e784fe2b51325a3d5b27 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[+] Building 27.1s (12/12) FINISHED
</span></span><span class=line><span class=cl>=&gt; [internal] load build definition from Dockerfile                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring dockerfile: 364B                                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load .dockerignore                                                                           0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring context: 2B                                                                             0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load metadata for docker.io/library/python:3.10-slim                                         1.6s
</span></span><span class=line><span class=cl>=&gt; [auth] library/python:pull token for registry-1.docker.io                                               0.0s
</span></span><span class=line><span class=cl>=&gt; [1/6] FROM docker.io/library/python:3.10-slim@sha256:54956d6c929405ff651516d5ebbc204203a6415c9d2757aad  0.0s
</span></span><span class=line><span class=cl>=&gt; [internal] load build context                                                                           0.3s
</span></span><span class=line><span class=cl>=&gt; =&gt; transferring context: 1.91kB                                                                         0.3s
</span></span><span class=line><span class=cl>=&gt; CACHED [2/6] WORKDIR /app                                                                               0.0s
</span></span><span class=line><span class=cl>=&gt; [3/6] COPY requirements.txt /app                                                                        0.0s
</span></span><span class=line><span class=cl>=&gt; [4/6] RUN pip install -r requirements.txt                                                              15.3s
</span></span><span class=line><span class=cl>=&gt; [5/6] RUN splk-py-trace-bootstrap                                                                       9.0s
</span></span><span class=line><span class=cl>=&gt; [6/6] COPY ./review.py /app                                                                             0.0s
</span></span><span class=line><span class=cl>=&gt; exporting to image                                                                                      0.6s
</span></span><span class=line><span class=cl>=&gt; =&gt; exporting layers                                                                                     0.6s
</span></span><span class=line><span class=cl>=&gt; =&gt; writing image sha256:164977dd860a17743b8d68bcc50c691082bd3bfb352d1025dc3a54b15d5f4c4d                0.0s
</span></span><span class=line><span class=cl>=&gt; =&gt; naming to docker.io/localhost:8000/review-splkotel:0.01                                              0.0s</span></span></code></pre></div></div></div></div></div><ul><li>Push the image to Docker Hub with docker push command</li></ul><div class=tab-panel data-tab-group=R-tabs-22e7f24d3d28ca8fe3570a7f6bf8a36c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6c4f87e5e31143bc9beecf068943bff2 aria-expanded=true data-tab-item=R-tab-6a100fcee87852662d457afaa64af06f class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-22e7f24d3d28ca8fe3570a7f6bf8a36c","R-tab-6a100fcee87852662d457afaa64af06f")'>
<span class=tab-nav-text>docker push</span>
</button>
<button aria-controls=R-tab-id-b59671787f2cf0bfd10202fbe8c1f69c aria-expanded=false data-tab-item=R-tab-5d608ef7904c4d323726f675eb0a315e class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-22e7f24d3d28ca8fe3570a7f6bf8a36c","R-tab-5d608ef7904c4d323726f675eb0a315e")'>
<span class=tab-nav-text>docker push Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6c4f87e5e31143bc9beecf068943bff2 data-tab-item=R-tab-6a100fcee87852662d457afaa64af06f class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker push localhost:8000/review-splkotel:0.01</span></span></code></pre></div></div></div><div id=R-tab-id-b59671787f2cf0bfd10202fbe8c1f69c data-tab-item=R-tab-5d608ef7904c4d323726f675eb0a315e class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>The push refers to repository [docker.io/localhost:8000/review-splkotel]
</span></span><span class=line><span class=cl>682f0e550f2c: Pushed
</span></span><span class=line><span class=cl>dd7dfa312442: Pushed
</span></span><span class=line><span class=cl>917fd8334695: Pushed
</span></span><span class=line><span class=cl>e6782d51030d: Pushed
</span></span><span class=line><span class=cl>c6b19a64e528: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>8f52e3bfc0ab: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>f90b85785215: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>d5c0beb90ce6: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>3759be374189: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>fd95118eade9: Mounted from localhost:8000/review
</span></span><span class=line><span class=cl>0.01: digest: sha256:3b251059724dbb510ea81424fc25ed03554221e09e90ef965438da33af718a45 size: 2412</span></span></code></pre></div></div></div></div></div><h2 id=3-update-the-review-deployment-in-kubernetes>3. Update the REVIEW deployment in Kubernetes<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li><p>review.deployment.yaml must be updated with the following changes:</p><ul><li>Load the new container image on Docker Hub</li><li>Add environment variables so traces can be emitted to the OTEL collector</li></ul></li><li><p>The deployment must be replaced using the updated review.deployment.yaml</p><ul><li><p>Update review.deployment.yaml (updates highlighted in bold)</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>regcred</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8000/review-splkotel:0.01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_OTEL_AGENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>status.hostIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_SERVICE_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;review&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SPLUNK_METRICS_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):9943&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://$(SPLUNK_OTEL_AGENT):4317&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OTEL_RESOURCE_ATTRIBUTES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;deployment.environment=rtapp-workshop-stevel&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>appdata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/var/appdata</span></span></span></code></pre></div></li></ul></li><li><p>Apply review.deployment.yaml. Kubernetes will automatically pick up the changes to the deployment and redeploy new pods with these updates</p><ul><li>Notice that the review-* pod has been restarted</li></ul></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f review.deployment.yaml</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get pods</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>NAME                                                              READY   STATUS        RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-client                                                      0/1     Unknown       0          155d
</span></span><span class=line><span class=cl>curl                                                              0/1     Unknown       0          155d
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running       0          26h
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running       0          26h
</span></span><span class=line><span class=cl>kafka-exporter-647bddcbfc-h9gp5                                   1/1     Running       2          26h
</span></span><span class=line><span class=cl>mongodb-6f6c78c76-kl4vv                                           2/2     Running       0          26h
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running       1          26h
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running       1          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-n4dfn                      2/2     Running       0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-k8s-cluster-receiver-5f48v296j   1/1     Running       0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-jqxhh                      2/2     Running       0          26h
</span></span><span class=line><span class=cl>review-6686859bd7-4pf5d                                           1/1     Running       0          11s
</span></span><span class=line><span class=cl>review-5dd8cfd77b-52jbd                                           0/1     Terminating   0          2d10h
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>kubectl get pods
</span></span><span class=line><span class=cl>NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>kafka-client                                                      0/1     Unknown   0          155d
</span></span><span class=line><span class=cl>curl                                                              0/1     Unknown   0          155d
</span></span><span class=line><span class=cl>kafka-zookeeper-0                                                 1/1     Running   0          26h
</span></span><span class=line><span class=cl>kafka-2                                                           2/2     Running   0          26h
</span></span><span class=line><span class=cl>kafka-exporter-647bddcbfc-h9gp5                                   1/1     Running   2          26h
</span></span><span class=line><span class=cl>mongodb-6f6c78c76-kl4vv                                           2/2     Running   0          26h
</span></span><span class=line><span class=cl>kafka-1                                                           2/2     Running   1          26h
</span></span><span class=line><span class=cl>kafka-0                                                           2/2     Running   1          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-n4dfn                      2/2     Running   0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-k8s-cluster-receiver-5f48v296j   1/1     Running   0          26h
</span></span><span class=line><span class=cl>splunk-otel-collector-1653114277-agent-jqxhh                      2/2     Running   0          26h
</span></span><span class=line><span class=cl>review-6686859bd7-4pf5d                                           1/1     Running   0          15s</span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=monitor-system-logs-with-splunk-universal-forwarder>Monitor System Logs with Splunk Universal Forwarder</h1><p><strong>Objective:</strong> Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise</p><p><strong>Duration</strong>: 10 Minutes</p><h2 id=scenario>Scenario<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.</p><h3 id=1-ensure-youre-in-the-correct-directory>1. Ensure You&rsquo;re in the Correct Directory<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>we will need to be in /home/splunk/session-2</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /home/splunk/session-2</span></span></code></pre></div><h3 id=2-review-the-universal-forwarder-install-script>2. Review the Universal Forwarder Install Script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Let&rsquo;s take a look at the script that will install the Universal Forwarder and Linux TA automatically for you.<ul><li>This script is primarily used for remote instances.</li><li>Note we are not using a deployment server in this lab, however it is recommended in production we do that.</li><li>What user are we installing Splunk as?</li></ul></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh  
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># This EXAMPLE script shows how to deploy the Splunk universal forwarder</span>
</span></span><span class=line><span class=cl><span class=c1># to many remote hosts via ssh and common Unix commands.</span>
</span></span><span class=line><span class=cl><span class=c1># For &#34;real&#34; use, this script needs ERROR DETECTION AND LOGGING!!</span>
</span></span><span class=line><span class=cl><span class=c1># --Variables that you must set -----</span>
</span></span><span class=line><span class=cl><span class=c1># Set username using by splunkd to run.</span>
</span></span><span class=line><span class=cl>  <span class=nv>SPLUNK_RUN_USER</span><span class=o>=</span><span class=s2>&#34;ubuntu&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Populate this file with a list of hosts that this script should install to,</span>
</span></span><span class=line><span class=cl><span class=c1># with one host per line. This must be specified in the form that should</span>
</span></span><span class=line><span class=cl><span class=c1># be used for the ssh login, ie. username@host</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Example file contents:</span>
</span></span><span class=line><span class=cl><span class=c1># splunkuser@10.20.13.4</span>
</span></span><span class=line><span class=cl><span class=c1># splunkker@10.20.13.5</span>
</span></span><span class=line><span class=cl>  <span class=nv>HOSTS_FILE</span><span class=o>=</span><span class=s2>&#34;myhost.txt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># This should be a WGET command that was *carefully* copied from splunk.com!!</span>
</span></span><span class=line><span class=cl><span class=c1># Sign into splunk.com and go to the download page, then look for the wget</span>
</span></span><span class=line><span class=cl><span class=c1># link near the top of the page (once you have selected your platform)</span>
</span></span><span class=line><span class=cl><span class=c1># copy and paste your wget command between the &#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>WGET_CMD</span><span class=o>=</span><span class=s2>&#34;wget -O splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz &#39;https://download.splunk.com/products/universalforwarder/releases/9.0.3/linux/splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#39;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Set the install file name to the name of the file that wget downloads</span>
</span></span><span class=line><span class=cl><span class=c1># (the second argument to wget)</span>
</span></span><span class=line><span class=cl>  <span class=nv>INSTALL_FILE</span><span class=o>=</span><span class=s2>&#34;splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># After installation, the forwarder will become a deployment client of this</span>
</span></span><span class=line><span class=cl><span class=c1># host.  Specify the host and management (not web) port of the deployment server</span>
</span></span><span class=line><span class=cl><span class=c1># that will be managing these forwarder instances.</span>
</span></span><span class=line><span class=cl><span class=c1># Example 1.2.3.4:8089</span>
</span></span><span class=line><span class=cl><span class=c1>#  DEPLOY_SERVER=&#34;x.x.x.x:8089&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># After installation, the forwarder can have additional TA&#39;s added to the </span>
</span></span><span class=line><span class=cl><span class=c1># /app directory please provide the local where TA&#39;s will be. </span>
</span></span><span class=line><span class=cl>  <span class=nv>TA_INSTALL_DIRECTORY</span><span class=o>=</span><span class=s2>&#34;/home/splunk/session-2&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set the seed app folder name for deploymentclien.conf</span>
</span></span><span class=line><span class=cl><span class=c1>#  DEPLOY_APP_FOLDER_NAME=&#34;seed_all_deploymentclient&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Set the new Splunk admin password</span>
</span></span><span class=line><span class=cl>  <span class=nv>PASSWORD</span><span class=o>=</span><span class=s2>&#34;buttercup&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>REMOTE_SCRIPT_DEPLOY</span><span class=o>=</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>  cd /opt
</span></span></span><span class=line><span class=cl><span class=s2>  sudo </span><span class=nv>$WGET_CMD</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo tar xvzf </span><span class=nv>$INSTALL_FILE</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo rm </span><span class=nv>$INSTALL_FILE</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo useradd </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  sudo find </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2> -name &#39;*.tgz&#39; -exec tar xzvf {} --directory /opt/splunkforwarder/etc/apps \;
</span></span></span><span class=line><span class=cl><span class=s2>  sudo chown -R </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>:</span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2> /opt/splunkforwarder
</span></span></span><span class=line><span class=cl><span class=s2>  echo \&#34;[user_info] 
</span></span></span><span class=line><span class=cl><span class=s2>  USERNAME = admin
</span></span></span><span class=line><span class=cl><span class=s2>  PASSWORD = </span><span class=nv>$PASSWORD</span><span class=s2>\&#34; &gt; /opt/splunkforwarder/etc/system/local/user-seed.conf   
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo cp </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2>/*.tgz /opt/splunkforwader/etc/apps/
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo find /opt/splunkforwarder/etc/apps/ -name &#39;*.tgz&#39; -exec tar xzvf {} \;
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo -u splunk /opt/splunkforwarder/bin/splunk start --accept-license --answer-yes --auto-ports --no-prompt
</span></span></span><span class=line><span class=cl><span class=s2>  /opt/splunkforwarder/bin/splunk start --accept-license --answer-yes --auto-ports --no-prompt
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo /opt/splunkforwarder/bin/splunk enable boot-start -user </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  /opt/splunkforwarder/bin/splunk enable boot-start -user </span><span class=nv>$SPLUNK_RUN_USER</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  #sudo cp </span><span class=nv>$TA_INSTALL_DIRECTORY</span><span class=s2>/*.tgz /opt/splunkforwarder/etc/apps/
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  exit
</span></span></span><span class=line><span class=cl><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span> <span class=nb>cd</span> <span class=s2>&#34;</span><span class=k>$(</span> dirname <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BASH_SOURCE</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span> <span class=k>)</span><span class=s2>&#34;</span> &gt;/dev/null <span class=o>&amp;&amp;</span> <span class=nb>pwd</span> <span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#===============================================================================================</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;In 5 seconds, will run the following script on each remote host:&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;====================&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$REMOTE_SCRIPT_DEPLOY</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;====================&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> 
</span></span><span class=line><span class=cl>  sleep <span class=m>5</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Reading host logins from </span><span class=nv>$HOSTS_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Starting.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> DST in <span class=sb>`</span>cat <span class=s2>&#34;</span><span class=nv>$DIR</span><span class=s2>/</span><span class=nv>$HOSTS_FILE</span><span class=s2>&#34;</span><span class=sb>`</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;---------------------------&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Installing to </span><span class=nv>$DST</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Initial UF deployment&#34;</span>
</span></span><span class=line><span class=cl>    sudo ssh -t <span class=s2>&#34;</span><span class=nv>$DST</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$REMOTE_SCRIPT_DEPLOY</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>done</span>  
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;---------------------------&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Done&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Please use the following app folder name to override deploymentclient.conf options: </span><span class=nv>$DEPLOY_APP_FOLDER_NAME</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 id=3-run-the-install-script>3. Run the install script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>We will run the install script now. You will see some Warnings at the end. This is totally normal. The script is built for use on remote machines, however for todays lab you will be using localhost.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./install.sh</span></span></code></pre></div><p>You will be asked <code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code>
Answer Yes.</p><p>Enter your ssh password when prompted.</p><h3 id=4-verify-installation-of-the-universal-forwarader>4. Verify installation of the Universal Forwarader<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>We need to verify that the Splunk Universal Forwarder is installed and running.<ul><li>You should see a couple PID&rsquo;s return and a &ldquo;Splunk is currently running.&rdquo; message.</li></ul></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/opt/splunkforwarder/bin/splunk status</span></span></code></pre></div><h4 id=5-configure-the-universal-forwarder-to-send-data-to-splunk-enterprise>5. Configure the Universal Forwarder to Send Data to Splunk Enterprise<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li>We will be able to send the data to our Splunk Enterprise environment easily by entering one line into the cli.<ul><li><a href=https://docs.splunk.com/Documentation/Forwarder/9.0.3/Forwarder/Configuretheuniversalforwarder rel=external>Universal Forwarder Config Guide</a></li></ul></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/opt/splunkforwarder/bin/splunk add forward-server &lt;your_splunk_enterprise_ip&gt;:9997</span></span></code></pre></div><h4 id=6-verify-the-data-in-your-splunk-enterprise-environment>6. Verify the Data in Your Splunk Enterprise Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4><ul><li><p>We are now going to take a look at the Splunk Enterprise environment to verify logs are coming in.</p><ul><li>Logs will be coming into <code>index=main</code></li></ul></li><li><p>Open your web browser and navigate to: <code>http://&lt;your_splunk_enterprise_ip:8000</code></p><ul><li>You will use the credentials <code>admin:&lt;your_ssh_password></code></li></ul></li><li><p>In the search bar, type in the following:</p></li><li><p><code>index=main host=&lt;your_host_name></code></p></li><li><p>You should see data from your host. Take note of the interesting fields and the different data sources flowing in.</p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=splunk-oncall>Splunk OnCall</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 hour 30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Geoff Higginbottom</span></span><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This module is simply to ensure you have access to the Splunk On-Call UI (formerly known as VictorOps), Splunk Infrastructure Monitoring UI (formerly known as SignalFx) and the EC2 Instance which has been allocated to you.</p><p>Once you have access to each platform, keep them open for the duration of the workshop as you will be switching between them and the workshop instructions.</p><h2 id=1-activate-your-splunk-on-call-login>1. Activate your Splunk On-Call Login<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You should have received an invitation to Activate your Splunk On-Call account via e-mail, if you have not already done so, click the <em>Activate Account</em> link and follow the prompts.</p><p>If you did not receive an invitation it is probably because you already have a Splunk On-Call login, linked to a different organization.</p><p>If so log in to that Org, then use the organization dropdown next to your username in the top left to switch to the Observability Workshop Org.</p><p><a href=#R-image-b56e6f2df2ca72ba90204b420f1f380e class=lightbox-link><img alt="Switch Org" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/switch-org.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b56e6f2df2ca72ba90204b420f1f380e><img alt="Switch Org" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/switch-org.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>If you do not see the Organisation dropdown menu item next to your name with Observability Workshop EMEA that is OK, it simply means you only have access to a single Org so that menu is not visible to you.</p><p>If you have forgotten your password go to the <a href=https://portal.victorops.com/membership/#/ rel=external>https://portal.victorops.com/membership/#/</a> page and use the forgotten password link to reset your password.</p><p><a href=#R-image-ec73f38f6abe6a84916c09de17a6131a class=lightbox-link><img alt="Reset Pwd" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/reset-password.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ec73f38f6abe6a84916c09de17a6131a><img alt="Reset Pwd" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/reset-password.png></a></p></div></details><h2 id=2-activate-your-splunk-infrastructure-monitoring-login>2. Activate your Splunk Infrastructure Monitoring Login<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You should have received an invitation to join the Splunk Infrastructure Monitoring - Observability Workshop. If you have not already done so click the <span class="btn cstyle button transparent noicon"><span><span class=title>JOIN NOW</span></span></span> button and follow the prompts to set a password and activate your login.</p><h2 id=3-access-your-ec2-instance>3. Access your EC2 Instance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Splunk has provided you with a dedicated EC2 Instance which you can use during this workshop for triggering Incidents the same way the instructor did during the introductory demo. This VM has Splunk Infrastructure Monitoring deployed and has an associated Detector configured. The Detector will pass Alerts to Splunk On-Call which will then create Incidents and page the on-call user.</p><p>The welcome e-mail you received providing you all the details for this Workshop contain the instructions for accessing your allocated EC2 Instance.</p><h3 id=ssh-mac-oslinux>SSH (Mac OS/Linux)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Most attendees will be able to connect to the workshop by using SSH from their Mac or Linux device.</p><p>To use SSH, open a terminal on your system and type <code>ssh splunk@x.x.x.x</code> (replacing x.x.x.x with the IP address found in your welcome e-mail).</p><p><a href=#R-image-e59b5a018fd7db2cd4f6b21b93e244e4 class=lightbox-link><img alt="ssh login" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e59b5a018fd7db2cd4f6b21b93e244e4><img alt="ssh login" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-1.png></a></p><p>When prompted <strong><code>Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></strong> please type <strong><code>yes</code></strong>.</p><p><a href=#R-image-13d181894bbc5796e36263b7cbce2cf4 class=lightbox-link><img alt="ssh password" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-13d181894bbc5796e36263b7cbce2cf4><img alt="ssh password" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-2.png></a></p><p>Enter the password provided in the welcome e-mail.</p><p>Upon successful login you will be presented with the Splunk logo and the Linux prompt.</p><p><a href=#R-image-0a6243760a1f2e12ac2cb642174a8d3d class=lightbox-link><img alt="ssh connected" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0a6243760a1f2e12ac2cb642174a8d3d><img alt="ssh connected" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/ssh-3.png></a></p><p>At this point you are ready to <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><hr><h3 id=putty-windows-users-only>Putty (Windows users only)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If you do not have ssh pre-installed or if you are on a Windows system, the best option is to install putty, you can find the downloads <a href=https://www.putty.org/ rel=external>here</a>.</p><p>!!! important
If you <strong>cannot</strong> install Putty, please go to <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/index.html#web-browser-all>Web Browser (All)</a>.</p><p>Open Putty and in the <strong>Host Name (or IP address)</strong> field enter the IP address provided in the welcome e-mail.</p><p>You can optionally save your settings by providing a name and pressing <strong>Save</strong>.</p><p><a href=#R-image-0a1057e753d4d0c104a35471586c789b class=lightbox-link><img alt=putty-2 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-settings.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0a1057e753d4d0c104a35471586c789b><img alt=putty-2 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-settings.png></a></p><p>To then login to your instance click on the <strong>Open</strong> button as shown above.</p><p>If this is the first time connecting to your EC2 instance, you will be presented with a security dialogue, please click <strong>Yes</strong>.</p><p><a href=#R-image-2bd38402ed43c62b349c4e0b3106235f class=lightbox-link><img alt=putty-3 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-security.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2bd38402ed43c62b349c4e0b3106235f><img alt=putty-3 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-security.png></a></p><p>Once connected, login in as <strong>splunk</strong> using the password provided in the welcome e-mail.</p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-64eb0607673b0ee580d64252b5d777db class=lightbox-link><img alt=putty-4 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-64eb0607673b0ee580d64252b5d777db><img alt=putty-4 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/putty-loggedin.png></a></p><p>At this point you are ready to <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><hr><h3 id=web-browser-all>Web Browser (All)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>If you are blocked from using SSH (Port 22) or unable to install Putty you may be able to connect to the workshop instance by using a web browser.</p><p>!!! note
This assumes that access to port 6501 is not restricted by your company&rsquo;s firewall.</p><p>Open your web browser and type <code>http://x.x.x.x:650</code> (where <code>x.x.x.x</code> is the IP address from the welcome e-mail).</p><p><a href=#R-image-6b252f45bfeef42ecf15ab8c6c9eb5d5 class=lightbox-link><img alt=http-6501 class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-url.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6b252f45bfeef42ecf15ab8c6c9eb5d5><img alt=http-6501 class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-url.png></a></p><p>Once connected, login in as <strong>splunk</strong> and the password is the one provided in the welcome e-mail.</p><p><a href=#R-image-2f05330d21bfff113da3b9b07cb43ada class=lightbox-link><img alt=http-connect class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f05330d21bfff113da3b9b07cb43ada><img alt=http-connect class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-connect.png></a></p><p>Once you are connected successfully you should see a screen similar to the one below:</p><p><a href=#R-image-ab88d10d02411798405170e57e703c93 class=lightbox-link><img alt="web login" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-login.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ab88d10d02411798405170e57e703c93><img alt="web login" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-login.png></a></p><hr><h3 id=copy--paste-in-browser>Copy & Paste in browser<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Unlike when you are using regular SSH, <em>copy and paste</em> does require a few extra steps to complete when using a browser session. This is due to cross browser restrictions.</p><p>When the workshop asks you to copy instructions into your terminal, please do the following:</p><p><em>Copy the instruction as normal, but when ready to paste it in the web terminal, choose <strong>Paste from browser</strong> as show below:</em></p><p><a href=#R-image-74c9c6f480621b26b7c96623bd5a2334 class=lightbox-link><img alt="web paste 1" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-paste-browser.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-74c9c6f480621b26b7c96623bd5a2334><img alt="web paste 1" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-paste-browser.png></a></p><p>This will open a dialogue box asking for the text to be pasted into the web terminal:</p><p><a href=#R-image-5f8d0c9ae52fa55b301276b8d0b6456c class=lightbox-link><img alt="web paste 3" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-example-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5f8d0c9ae52fa55b301276b8d0b6456c><img alt="web paste 3" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/en/unsupported-field-workshops/10-oncall/images/shellinabox-example-1.png></a></p><p>Paste the text in the text box as show, then press <strong>OK</strong> to complete the copy and paste process.</p><details open class="box cstyle notices primary"><summary class="box-label a11y-only" tabindex=-1><span class=a11y-only>Details</span></summary><div class=box-content><p>Unlike regular SSH connection, the web browser has a 60 second time out, and you will be disconnected, and a <strong>Connect</strong> button will be shown in the center of the web terminal.</p><p>Simply click the <strong>Connect</strong> button and you will be reconnected and will be able to continue.</p></div></details><p>At this point you are ready to <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/index.html>continue with the workshop</a> when instructed to do so by the instructor</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of Splunk OnCall</h1><article class=default><header class=headline></header><h1 id=user-profile>User Profile</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The aim of this module is for you to configure your personal profile which controls how you will be notified by Splunk On-Call whenever you get paged.</p><h2 id=1-contact-methods>1. Contact Methods<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Switch to the Splunk On-Call UI and click on your login name in the top right hand corner and chose <strong>Profile</strong> from the drop down. Confirm your contact methods are listed correctly and add any additional phone numbers and e-mail address you wish to use.</p><h2 id=2-mobile-devices>2. Mobile Devices<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>To install the Splunk On-Call app for your smartphone search your phones App Store for Splunk On-Call to find the appropriate version of the app. The publisher should be listed as VictorOps Inc.</p><p><a href=https://apps.apple.com/us/app/victorops/id696974262 rel=external>Apple Store</a></p><p><a href="https://play.google.com/store/apps/details?id=com.victorops.androidclient&hl=en" rel=external>Google Play</a></p><p>Configuration help guides are available:</p><ul><li><a href=https://help.victorops.com/knowledge-base/ios-application/ rel=external>Apple</a></li><li><a href=https://help.victorops.com/knowledge-base/android-devices-victorops/ rel=external>Android</a></li></ul><p>Install the App and login, then refresh the Profile page and your device should now be listed under the devices section. Click the <strong>Test push notification</strong> button and confirm you receive the test message.</p><h2 id=3-personal-calendar>3. Personal Calendar<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This link will enable you to sync your on-call schedule with your calendar, however as you do not have any allocated shifts yet this will currently be empty. You can add it to your calendar by copying the link into your preferred application and setting it up as a new subscription.</p><h2 id=4-paging-policies>4. Paging Policies<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Paging Polices specify how you will be contacted when on-call. The Primary Paging Policy will have defaulted to sending you an SMS assuming you added your phone number when activating your account. We will now configure this policy into a three tier multi-stage policy similar to the image below.</p><p><a href=#R-image-6bcfac45be33018fb6c1def7c59fd6a8 class=lightbox-link><img alt="Paging Policy" class="lazy lightbox figure-image" loading=lazy src=../images/primary-paging-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6bcfac45be33018fb6c1def7c59fd6a8><img alt="Paging Policy" class="lazy lightbox lightbox-image" loading=lazy src=../images/primary-paging-policy.png></a></p><h3 id=41-send-a-push-notification>4.1 Send a push notification<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Click the edit policy button in the top right corner for the Primary Paging Policy.</p><ul><li>Send a push notification to all my devices</li><li>Execute the next step if I have not responded within 5 minutes</li></ul><p><a href=#R-image-5594f716c64e897dd283fb2e2f66c4aa class=lightbox-link><img alt="Step 1" class="lazy lightbox figure-image" loading=lazy src=../images/pri-page-step1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5594f716c64e897dd283fb2e2f66c4aa><img alt="Step 1" class="lazy lightbox lightbox-image" loading=lazy src=../images/pri-page-step1.png></a></p><p>Click <strong>Add a Step</strong></p><h3 id=42-send-an-e-mail>4.2 Send an e-mail<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Send an e-mail to [your email address]</li><li>Execute the next step if I have not responded within 5 minutes</li></ul><p><a href=#R-image-1facacc1921b8c699438e9dd59235ad4 class=lightbox-link><img alt="Step 2" class="lazy lightbox figure-image" loading=lazy src=../images/pri-page-step2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1facacc1921b8c699438e9dd59235ad4><img alt="Step 2" class="lazy lightbox lightbox-image" loading=lazy src=../images/pri-page-step2.png></a></p><p>Click <strong>Add a Step</strong></p><h3 id=43-call-your-number>4.3 Call your number<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><ul><li>Every 5 minutes until we have reached you</li><li>Make a phone call to [your phone number]</li></ul><p>Click <span class="btn cstyle button default noicon" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy.</p><p><a href=#R-image-c007ab3924eb98680c634eb15c64a557 class=lightbox-link><img alt="Step 3" class="lazy lightbox figure-image" loading=lazy src=../images/pri-page-step3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c007ab3924eb98680c634eb15c64a557><img alt="Step 3" class="lazy lightbox lightbox-image" loading=lazy src=../images/pri-page-step3.png></a></p><p>When you are on-call or in the escalation path of an incident, you will receive notifications in this order following these time delays.</p><p>To cease the paging you must acknowledge the incident. Acknowledgements can occur in one of the following ways:</p><ul><li>Expanding the Push Notification on your device and selecting Acknowledge</li><li>Responding to the SMS with the 5 digit code included</li><li>Pressing 4 during the Phone Call</li><li>Slack Button</li></ul><p>For more information on Notification Types, see <a href=https://help.victorops.com/knowledge-base/notification-types/ rel=external>here</a>.</p><h2 id=5-custom-paging-policies>5. Custom Paging Policies<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Custom paging polices enable you to override the primary policy based on the time and day of the week. A good example would be to get the system to immediately phone you whenever you get a page during the evening or weekends as this is more likely to get your attention than a push notification.</p><p>Create a new Custom Policy by clicking <strong>Add a Policy</strong> and configure with the following settings:</p><h3 id=51-custom-evening-policy>5.1 Custom evening policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Policy Name: Evening</p><ul><li>Every 5 minutes until we have reached you<ul><li>Make a phone call to [your phone number]</li><li>Time Period: All 7 Days</li><li>Time zone<ul><li>Between 7pm and 9am</li></ul></li></ul></li></ul><p><a href=#R-image-73ec689f93d1e7841f64cb20a96eb7a0 class=lightbox-link><img alt=Evening class="lazy lightbox figure-image" loading=lazy src=../images/evening.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-73ec689f93d1e7841f64cb20a96eb7a0><img alt=Evening class="lazy lightbox lightbox-image" loading=lazy src=../images/evening.png></a></p><p>Click <span class="btn cstyle button default noicon" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy then add one more.</p><h3 id=52-custom-weekend-policy>5.2 Custom weekend policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Policy Name: Weekend</p><ul><li>Every 5 minutes until we have reached you<ul><li>Make a phone call to [your phone number]</li><li>Time Period: Sat & Sun</li><li>Time zone<ul><li>Between 9am and 7pm</li></ul></li></ul></li></ul><p>Click <span class="btn cstyle button default noicon" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Save</span></span></span> to save the policy.</p><p><a href=#R-image-b61561306205b78f28e5802c26b5bd98 class=lightbox-link><img alt=Weekends class="lazy lightbox figure-image" loading=lazy src=../images/weekends.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b61561306205b78f28e5802c26b5bd98><img alt=Weekends class="lazy lightbox lightbox-image" loading=lazy src=../images/weekends.png></a></p><p>These custom paging policies will be used during the specified times in place of the Primary Policy. However, admins do have the ability to ignore these custom policies, and we will highlight how this is achieved in a later module.</p><p>The final option here is the setting for Recovery Notifications. These are typically low priority, will default to Push, but can also be email, sms or phone call. Your profile is now fully configured using these example configurations.</p><p>Organizations will have different views on how profiles should be configured and will typically issue guidelines for paging policies and times between escalations etc.</p><p>Please wait for the instructor before proceeding to the Teams module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 1. Getting Started</h1><article class=default><header class=headline></header><h1 id=teams>Teams</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The aim of this module is for you to complete the first step of Team configuration by adding users to your Team.</p><h2 id=1-find-your-team>1. Find your Team<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to the <strong>Teams</strong> tab on the main toolbar, you should find you that a Team has been created for you as part of the workshop pre-setup and you would have been informed of your Team Name via e-mail.</p><p>If you have found your pre-configured Team, <strong>skip Step 2.</strong> and proceed to <strong><a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/team/index.html#3-configure-your-team>Step 3. Configure Your Team</a></strong>. However, if you cannot find your allocated Team, you will need to create a new one, so proceed with <strong>Step 2. Create Team</strong></p><h2 id=2-create-team>2. Create Team<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Only complete this step if you <strong>cannot</strong> find your pre-allocated Team as detailed in your workshop e-mail. Select <strong>Add Team</strong>, then enter your allocated team name, this will typically be in the format of &ldquo;AttendeeID Workshop&rdquo; and then save by clicking the <strong>Add Team</strong> button.</p><h2 id=3-configure-your-team>3. Configure Your Team<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You now need to add other users to your team. If you are running this workshop using the Splunk provided environment, the following accounts are available for testing. If you are running this lab in your own environment, you will have been provided a list of usernames you can use in place of the table below.</p><p>These users are dummy accounts who will not receive notifications when they are on call.</p><table><thead><tr><th>Name</th><th>Username</th><th>Shift</th></tr></thead><tbody><tr><td>Duane Chow</td><td>duanechow</td><td>Europe</td></tr><tr><td>Steven Gomez</td><td>gomez</td><td>Europe</td></tr><tr><td>Walter White</td><td>heisenberg</td><td>Europe</td></tr><tr><td>Jim Halpert</td><td>jimhalpert</td><td>Asia</td></tr><tr><td>Lydia Rodarte-Quayle</td><td>lydia</td><td>Asia</td></tr><tr><td>Marie Schrader</td><td>marie</td><td>Asia</td></tr><tr><td>Maximo Arciniega</td><td>maximo</td><td>West Coast</td></tr><tr><td>Michael Scott</td><td>michaelscott</td><td>West Coast</td></tr><tr><td>Tuco Salamanca</td><td>tuco</td><td>West Coast</td></tr><tr><td>Jack Welker</td><td>jackwelker</td><td>24/7</td></tr><tr><td>Hank Schrader</td><td>hank</td><td>24/7</td></tr><tr><td>Pam Beesly</td><td>pambeesly</td><td>24/7</td></tr></tbody></table><p>Add the users to your team, using either the above list or the alternate one provided to you. The value in the <strong>Shift</strong> column can be ignored for now, but will be required for a later step.</p><p>Click <span class="btn cstyle button default noicon" style=--VARIABLE-BOX-color:#00bce4><span><span class=title>Invite User</span></span></span> button on the right hand side, then either start typing the usernames (this will filter the list), or copy and paste them into the dialogue box. Once all users are added to the list click the <strong>Add User</strong> button.</p><p><a href=#R-image-47bc60e5ac9259b264d48a9b623d6de1 class=lightbox-link><img alt="Add Team Members" class="lazy lightbox figure-image" loading=lazy src=../../images/add-team-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-47bc60e5ac9259b264d48a9b623d6de1><img alt="Add Team Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/add-team-members.png></a></p><p>To make a team member a Team Admin, simply click the :fontawesome-regular-edit: icon in the right hand column, pick any user and make them an Admin.</p><p><a href=#R-image-2da0ca0b272ca8fe09a3b26caf0ba289 class=lightbox-link><img alt="Add Admin" class="lazy lightbox figure-image" loading=lazy src=../../images/team-admin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2da0ca0b272ca8fe09a3b26caf0ba289><img alt="Add Admin" class="lazy lightbox lightbox-image" loading=lazy src=../../images/team-admin.png></a></p><details open class="box cstyle notices default" style=--VARIABLE-BOX-color:info><summary class=box-label tabindex=-1>Tip</summary><div class=box-content><p>For large team management you can use the APIs to streamline this process.</p></div></details><p>Continue and also complete the <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/rotations/index.html>Configure Rotations</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-rotations>Configure Rotations</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>A rotation is a recurring schedule, that consists of one or more shifts, with members who rotate through a shift.</p><p>The aim of this module is for you to configure two example Rotations, and assign Team Members to the Rotations.</p><hr><p>Navigate to the <strong>Rotations</strong> tab on the <strong>Teams</strong> sub menu, you should have no existing Rotations so we need to create some.</p><p>The 1st Rotation you will create is for a follow the sun support pattern where the members of each shift provide cover during their normal working hours within their time zone.</p><p>The 2nd will be a Rotation used to provide escalation support by more experienced senior members of the team, based on a 24/7, 1 week shift pattern.</p><h2 id=1-follow-the-sun-support---business-hours>1. Follow the Sun Support - Business Hours<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click <strong>Add Rotation</strong></p><p><a href=#R-image-28940e8a52624282dc8b5b2496b5e94e class=lightbox-link><img alt="Add Rotation" class="lazy lightbox figure-image" loading=lazy src=../../images/add-rotation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-28940e8a52624282dc8b5b2496b5e94e><img alt="Add Rotation" class="lazy lightbox lightbox-image" loading=lazy src=../../images/add-rotation.png></a></p><p>Enter a name of &ldquo;<em>Follow the Sun Support - Business Hours</em>&rdquo; and Select <strong>Partial day</strong> from the three available shift templates.</p><p><a href=#R-image-c80ef7e878524aea15c93ee7fd776381 class=lightbox-link><img alt="Follow the Sun" class="lazy lightbox figure-image" loading=lazy src=../../images/follow-the-sun.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c80ef7e878524aea15c93ee7fd776381><img alt="Follow the Sun" class="lazy lightbox lightbox-image" loading=lazy src=../../images/follow-the-sun.png></a></p><ul><li>Enter a Shift name of &ldquo;<em>Asia</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Asia/Tokyo</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Rotation</strong></li></ul><p><a href=#R-image-e7344f58bd3a0e1d1e27034144b50258 class=lightbox-link><img alt="Asia Shift" class="lazy lightbox figure-image" loading=lazy src=../../images/asia-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7344f58bd3a0e1d1e27034144b50258><img alt="Asia Shift" class="lazy lightbox lightbox-image" loading=lazy src=../../images/asia-shift.png></a></p><p>You will now be prompted to add Members to this shift; add the Asia members who are <strong>Jim Halpert, Lydie Rodarte-Quayle and Marie Schrader</strong>, but only if you&rsquo;re using the Splunk provided environment for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-31afc75d47dad7e170f1df9ce3782855 class=lightbox-link><img alt="Asia Members" class="lazy lightbox figure-image" loading=lazy src=../../images/asia-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31afc75d47dad7e170f1df9ce3782855><img alt="Asia Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/asia-members.png></a></p><p>Now add an 2nd shift for Europe by again clicking <strong>+Add a shift ‚Üí Partial Day</strong></p><ul><li>Enter a Shift name of &ldquo;<em>Europe</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Europe/London</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Shift</strong></li></ul><p><a href=#R-image-2be1c3942089af897cd332ea4413052a class=lightbox-link><img alt="Europe Shift" class="lazy lightbox figure-image" loading=lazy src=../../images/europe-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2be1c3942089af897cd332ea4413052a><img alt="Europe Shift" class="lazy lightbox lightbox-image" loading=lazy src=../../images/europe-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the Europe members who are <strong>Duane Chow, Steven Gomez and Walter White</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-37bdb50407e9b79ef0e91996181a532a class=lightbox-link><img alt="Europe Members" class="lazy lightbox figure-image" loading=lazy src=../../images/europe-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-37bdb50407e9b79ef0e91996181a532a><img alt="Europe Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/europe-members.png></a></p><p>Now add a 3rd shift for West Coast USA by again clicking <code>+Add a shift</code> - <code>Partial Day</code></p><ul><li>Enter a Shift name of &ldquo;<em>West Coast</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>US/Pacific</em>&rdquo;</li><li>Each user is on duty from &ldquo;<em>Monday through Friday from 9.00am to 5.00pm</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>5 days</em>&rdquo;</li><li>The next handoff happens - Select the next Monday using the calendar</li><li>Click <strong>Save Shift</strong></li></ul><p><a href=#R-image-4f65d703bac71ee73895b14c365dfe7d class=lightbox-link><img alt="West Coast Shift" class="lazy lightbox figure-image" loading=lazy src=../../images/west-coast-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4f65d703bac71ee73895b14c365dfe7d><img alt="West Coast Shift" class="lazy lightbox lightbox-image" loading=lazy src=../../images/west-coast-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the West Coast members who are <strong>Maximo Arciniega, Michael Scott and Tuco Salamanca</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-27412eea2a11d215fc1259f99c2029d3 class=lightbox-link><img alt="West Coast Members" class="lazy lightbox figure-image" loading=lazy src=../../images/west-coast-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-27412eea2a11d215fc1259f99c2029d3><img alt="West Coast Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/west-coast-members.png></a></p><p>The first user added will be the &lsquo;current&rsquo; user for that shift.</p><p>You can re-order the shifts by simply dragging the users up and down, and you can change the current user by clicking <code>Set Current</code> on an alternate user</p><p>You will now have three different Shift patterns, that provide cover 24hr hours, Mon - Fri, but with no cover at weekends.</p><p>We will now add another Rotation for our Senior SRE Escalation cover.</p><hr><h2 id=2-senior-sre-escalation>2. Senior SRE Escalation<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><ul><li>Click <strong>Add Rotation</strong></li><li>Enter a name of &ldquo;<em>Senior SRE Escalation</em>&rdquo;</li><li>Select <code>24/7</code> from the three available shift templates</li><li>Enter a Shift name of &ldquo;<em>Senior SRE Escalation</em>&rdquo;</li><li>Time Zone set to &ldquo;<em>Asia/Tokyo</em>&rdquo;</li><li>Handoff happens every &ldquo;<em>7 days at 9.00am</em>&rdquo;</li><li>The next handoff happens [select the next Monday from the date picker]</li><li>Click <strong>Save Rotation</strong></li></ul><p><a href=#R-image-d9e5c96eb6fe81b33d18eb8ab9db4db4 class=lightbox-link><img alt="24/7 Shift" class="lazy lightbox figure-image" loading=lazy src=../../images/24-7-shift.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9e5c96eb6fe81b33d18eb8ab9db4db4><img alt="24/7 Shift" class="lazy lightbox lightbox-image" loading=lazy src=../../images/24-7-shift.png></a></p><p>You will again be prompted to add Members to this shift; add the 24/7 members who are <strong>Jack Welker, Hank Schrader and Pam Beesly</strong>, but only if you&rsquo;re using the Observability Workshop Org for this workshop.</p><p>If you&rsquo;re using your own Organisation refer to the specific list provided separately.</p><p><a href=#R-image-c2464661817edc15a297f7d0ebb0d77d class=lightbox-link><img alt="24/7 Members" class="lazy lightbox figure-image" loading=lazy src=../../images/24-7-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c2464661817edc15a297f7d0ebb0d77d><img alt="24/7 Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/24-7-members.png></a></p><hr><p>Please wait for the instructor before proceeding to the Configuring Escalation Policies module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=configure-escalation-policies>Configure Escalation Policies</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Escalation policies determine who is actually on-call for a given team and are the link to utilizing any rotations that have been created.</p><p>The aim of this module is for you to create three different Escalation Policies to demonstrate a number of different features and operating models.</p><p>The instructor will start by explaining the concepts before you proceed with the configuration.</p><hr><p>Navigate to the Escalation Polices tab on the Teams sub menu, you should have no existing Polices so we need to create some.</p><p><a href=#R-image-f5d28896f497022e4d58b0190c3d7b9e class=lightbox-link><img alt="No Escalation Policies" class="lazy lightbox figure-image" loading=lazy src=../../images/no-escalation.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5d28896f497022e4d58b0190c3d7b9e><img alt="No Escalation Policies" class="lazy lightbox lightbox-image" loading=lazy src=../../images/no-escalation.png></a></p><p>We are going to create the following Polices to cover off three typical use cases.</p><p><a href=#R-image-1a2f26dbcc6c4a1d8c782342003e3e5f class=lightbox-link><img alt="Escalation Policies" class="lazy lightbox figure-image" loading=lazy src=../../images/escalation-policies.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1a2f26dbcc6c4a1d8c782342003e3e5f><img alt="Escalation Policies" class="lazy lightbox lightbox-image" loading=lazy src=../../images/escalation-policies.png></a></p><h2 id=1-247-policy>1. 24/7 Policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: 24/7</li><li>Step 1</li><li>Immediately<ul><li>Notify the on-duty user(s) in rotation ‚Üí Senior SRE Escalation</li><li>Click <strong>Save</strong></li></ul></li></ul><p><a href=#R-image-37bbcf9d80070c14d64de6d77508ff13 class=lightbox-link><img alt="24/7 Escalation Policy " class="lazy lightbox figure-image" loading=lazy src=../../images/24-7-escalation-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-37bbcf9d80070c14d64de6d77508ff13><img alt="24/7 Escalation Policy " class="lazy lightbox lightbox-image" loading=lazy src=../../images/24-7-escalation-policy.png></a></p><h2 id=2-primary-policy>2. Primary Policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: Primary</li><li>Step 1</li><li>Immediately</li><li>Notify the on-duty user(s) in rotation ‚Üí Follow the Sun Support - Business Hours</li><li>Click <strong>Add Step</strong></li></ul><p><a href=#R-image-b9aa97dfa341f21dc1f67718c5caa30b class=lightbox-link><img alt="Pri Escalation Policy Step 1" class="lazy lightbox figure-image" loading=lazy src=../../images/pri-escalation-policy-step-1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b9aa97dfa341f21dc1f67718c5caa30b><img alt="Pri Escalation Policy Step 1" class="lazy lightbox lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-1.png></a></p><ul><li>Step 2</li><li>If still un-acknowledged after 15 minutes</li><li>Notify the next user(s) in the current on-duty shift ‚Üí Follow the Sun Support - Business Hours</li><li>Click <strong>Add Step</strong></li></ul><p><a href=#R-image-34b62c0590985aaceafe671e7f4e485a class=lightbox-link><img alt="Pri Escalation Policy Step 2" class="lazy lightbox figure-image" loading=lazy src=../../images/pri-escalation-policy-step-2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34b62c0590985aaceafe671e7f4e485a><img alt="Pri Escalation Policy Step 2" class="lazy lightbox lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-2.png></a></p><ul><li>Step 3</li><li>If still un-acknowledged after 15 more minutes</li><li>Execute Policy ‚Üí [Your Team Name] : 24/7</li><li>Click <strong>Save</strong></li></ul><p><a href=#R-image-b8dda4e9c581ec5cc170dae617bfccf4 class=lightbox-link><img alt="Pri Escalation Policy Step 3" class="lazy lightbox figure-image" loading=lazy src=../../images/pri-escalation-policy-step-3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b8dda4e9c581ec5cc170dae617bfccf4><img alt="Pri Escalation Policy Step 3" class="lazy lightbox lightbox-image" loading=lazy src=../../images/pri-escalation-policy-step-3.png></a></p><h2 id=3-waiting-room-policy>3. Waiting Room Policy<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Click <strong>Add Escalation Policy</strong></p><ul><li>Policy Name: Waiting Room</li><li>Step 1</li><li>If still un-acknowledged after 10 more minutes</li><li>Execute Policy ‚Üí [Your Team Name] : Primary</li><li>Click <strong>Save</strong></li></ul><p><a href=#R-image-88605c0cc2118b3412f7864ff0781c59 class=lightbox-link><img alt="WR Escalation Policy" class="lazy lightbox figure-image" loading=lazy src=../../images/wr-escalation-policy.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-88605c0cc2118b3412f7864ff0781c59><img alt="WR Escalation Policy" class="lazy lightbox lightbox-image" loading=lazy src=../../images/wr-escalation-policy.png></a></p><p>You should now have the following three escalation polices:</p><p><a href=#R-image-b6a6d4fd9241e054e7e843adc1cff04b class=lightbox-link><img alt="Escalation Policies" class="lazy lightbox figure-image" loading=lazy src=../../images/escalation-policies.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b6a6d4fd9241e054e7e843adc1cff04b><img alt="Escalation Policies" class="lazy lightbox lightbox-image" loading=lazy src=../../images/escalation-policies.png></a></p><p>You may have noticed that when we created each policy there was the following warning message:</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Warning</summary><div class=box-content><p>There are no routing keys for this policy - it will only receive incidents via manual reroute or when on another escalation policy</p></div></details><p>This is because there are no Routing Keys linked to these Escalation Polices, so now that we have these polices configured we can create the Routing Keys and link them to our Polices..</p><hr><p>Continue and also complete the <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/getting_started/routing/index.html>Creating Routing Keys</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=creating-routing-keys>Creating Routing Keys</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Routing Keys map the incoming alert messages from your monitoring system to an Escalation Policy which in turn sends the notifications to the appropriate team.</p><p>Note that routing keys are case insensitive and should only be composed of letters, numbers, hyphens, and underscores.</p><p>The aim of this module is for you to create some routing keys and then link them to your Escalation Policies you have created in the previous exercise.</p><hr><h2 id=1-instance-id>1. Instance ID<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Each participant requires a unique Routing Key so we use the Hostname of the EC2 Instance you were allocated. We are only doing this to ensure your Routing Key is unique and we know all Hostnames are unique. In a production deployment the Routing Key would typically reflect the name of a System or Service being monitored, or a Team such as 1st Line Support etc.</p><p>Your welcome e-mail informed you of the details of your EC2 Instance that has been provided for you to use during this workshop and you should have logged into this as part of the 1st exercise.</p><p>The e-mail also contained the Hostname of the Instance, but you can also obtain it from the Instance directly. To get your Hostname from within the shell session connected to your Instance run the following command:</p><div class=tab-panel data-tab-group=R-tabs-77b9bfb2b6a4520cca1ae90689cbc6b1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7932150c14838ff5fe600531a43e4254 aria-expanded=true data-tab-item=R-tab-1098b4dc34b15ab4331bf049e0aebaa5 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-77b9bfb2b6a4520cca1ae90689cbc6b1","R-tab-1098b4dc34b15ab4331bf049e0aebaa5")'>
<span class=tab-nav-text>Export Hostname</span>
</button>
<button aria-controls=R-tab-id-a321f36225002aeccb0e3917484cf798 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-77b9bfb2b6a4520cca1ae90689cbc6b1","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-7932150c14838ff5fe600531a43e4254 data-tab-item=R-tab-1098b4dc34b15ab4331bf049e0aebaa5 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>HOSTNAME</span><span class=si>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-a321f36225002aeccb0e3917484cf798 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>zevn</span></span></code></pre></div></div></div></div></div><p>It is very important that when creating the Routing Keys you use the 4 letter hostname allocated to you as a Detector has been configured within Splunk Infrastructure Monitoring using this hostname, so any deviation will cause future exercises to fail.</p><h2 id=2-create-routing-keys>2 Create Routing Keys<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Navigate to <strong>Settings</strong> on the main menu bar, you should now be at the <strong>Routing Keys</strong> page.</p><p>You are going to create the following two Routing Keys using the naming conventions listed in the following table, but replacing {==HOSTNAME==} with the value from above and replace <strong><code>TEAM_NAME</code></strong> with the team you were allocated or created earlier.</p><table><thead><tr><th>Routing Key</th><th>Escalation Policies</th></tr></thead><tbody><tr><td><strong><code>HOSTNAME</code></strong>_PRI</td><td><strong><code>TEAM_NAME</code></strong> : Primary</td></tr><tr><td><strong><code>HOSTNAME</code></strong>_WR</td><td><strong><code>TEAM_NAME</code></strong> : Waiting Room</td></tr></tbody></table><p>There will probably already be a number of Routing Keys configured, but to add a new one simply scroll to the bottom of the page and then click <strong>Add Key</strong></p><p>In the left hand box, enter the name for the key as per the table above. In the <strong>Routing Key</strong> column, select your Teams <strong>Primary</strong> policy from the drop down in the <strong>Escalation Polices</strong> column. You can start typing your Team Name to filter the results.</p><p><a href=#R-image-4e977135fa1a563999b306ff77c54548 class=lightbox-link><img alt="Add Routing Key" class="lazy lightbox figure-image" loading=lazy src=../../images/routing-key-add.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4e977135fa1a563999b306ff77c54548><img alt="Add Routing Key" class="lazy lightbox lightbox-image" loading=lazy src=../../images/routing-key-add.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>If there are a large number of participants on the workshop, resulting in an unusually large number of Escalation Policies sometimes the search filter does not list all the Policies under your Team Name. If this happens instead of using the search feature, simply scroll down to your team name, all the policies will then be listed.</p></div></details><p>Repeat the above steps for both Keys, <strong><code>xxxx_PRI</code></strong> and <strong><code>xxxx_WR</code></strong>, mapping them to your Teams Primary and Waiting Room policies.</p><p>You should now have two Routing Keys configured, similar to the following:</p><p><a href=#R-image-b38755cf0632b3adf433bb3699c0aa09 class=lightbox-link><img alt="Routing Keys" class="lazy lightbox figure-image" loading=lazy src=../../images/routing-keys.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b38755cf0632b3adf433bb3699c0aa09><img alt="Routing Keys" class="lazy lightbox lightbox-image" loading=lazy src=../../images/routing-keys.png></a></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can assign a Routing Key to multiple Escalation Policies if required by simply selecting more from the list</p></div></details><p>If you now navigate back to <strong>Teams ‚Üí [Your Team Name] ‚Üí Escalation Policies</strong> and look at the settings for your <strong>Primary</strong> and <strong>Waiting Room</strong> polices you will see that these now have <strong>Routes</strong> assigned to them.</p><p><a href=#R-image-3aed13ced62ebf6638667ce3d0c9e86a class=lightbox-link><img alt="Routing Keys Assigned" class="lazy lightbox figure-image" loading=lazy src=../../images/routing-keys-assigned.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3aed13ced62ebf6638667ce3d0c9e86a><img alt="Routing Keys Assigned" class="lazy lightbox lightbox-image" loading=lazy src=../../images/routing-keys-assigned.png></a></p><p>The <strong>24/7</strong> policy does not have a Route assigned as this will only be triggered via an <strong>Execute Policy</strong> escalation from the <strong>Primary</strong> policy.</p><hr><p>Please wait for the instructor before proceeding to the Incident Lifecycle/Overview module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=incident-lifecycle>Incident Lifecycle</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The aim of this module is for you to get more familiar with the Timeline Tab and the filtering features.</p><h2 id=1-timeline>1. Timeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The aim of Splunk On-Call is to make being on call more bearable, and it does this by getting the critical data, to the right people, at the right time.</p><p>The key to making it work for you is to centralize all your alerting sources, sending them all to the Splunk On-Call platform, then you have a single pane of glass in which to manage all of your alerting.</p><p>Login to the Splunk On-Call UI and select the <strong>Timeline</strong> tab on the main menu bar, you should have a screen similar to the following image:</p><p><a href=#R-image-636e842efa2c0b29d96d5eb1f3c13377 class=lightbox-link><img alt="Splunk On-Call UI" class="lazy lightbox figure-image" loading=lazy src=../images/m7-vo-ui.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-636e842efa2c0b29d96d5eb1f3c13377><img alt="Splunk On-Call UI" class="lazy lightbox lightbox-image" loading=lazy src=../images/m7-vo-ui.png></a></p><h2 id=2-people>2. People<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>On the left we have the <strong>People</strong> section with the <strong>Teams</strong> and <strong>Users</strong> sub tabs. On the <strong>Teams</strong> tab, click on <strong>All Teams</strong> then expand <em><strong>[Your Team name]</strong></em>.</p><p>Users with the Splunk On-Call Logo against their name are currently on call. Here you can see who is on call within a particular Team, or across all Teams via <strong>Users ‚Üí On-Call</strong>.</p><p>If you click into one of the currently on call users, you can see their status. It shows which Rotation they are on call for, when their current Shift ends and their next Shift starts (times are displayed in your time zone), what contact methods they have and which Teams they belong to (dummy users such as Hank do not have Contact Methods configured).</p><p><a href=#R-image-ebb35e5415934f780e32273f0e516431 class=lightbox-link><img alt="User Detail" class="lazy lightbox figure-image" loading=lazy src=../images/m7-user-detail.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ebb35e5415934f780e32273f0e516431><img alt="User Detail" class="lazy lightbox lightbox-image" loading=lazy src=../images/m7-user-detail.png></a></p><h2 id=3-timeline>3. Timeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In the centre <strong>Timeline</strong> section you get a realtime view of what is happening within your environment with the newest messages at the top. Here you can quickly post update messages to make your colleagues aware of important developments etc.</p><p>You can filter the view using the buttons on the top toolbar showing only update messages, GitHub integrations, or apply more advanced filters.</p><p>Lets change the Filters settings to streamline your view. Click the <strong>Filters</strong> button then within the <strong>Routing Keys</strong> tab change the <strong>Show</strong> setting from <strong>all routing keys</strong> to <strong>selected routing keys</strong>. Change the <strong>My Keys</strong> value to <strong>all</strong> and the <strong>Other Keys</strong> value to <strong>selected</strong> and deselect all keys under the Other Keys section.</p><p>Click anywhere outside of the dialogue box to close it.</p><p><a href=#R-image-cb435eed6cbe8f310bcbe52852b11f99 class=lightbox-link><img alt="Timeline Filters" class="lazy lightbox figure-image" loading=lazy src=../images/m7-timeline-filters.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb435eed6cbe8f310bcbe52852b11f99><img alt="Timeline Filters" class="lazy lightbox lightbox-image" loading=lazy src=../images/m7-timeline-filters.png></a></p><p>You will probably now have a much simpler view as you will not currently have Incidents created using your Routing Keys, so you are left with the other types of messages that the Timeline can display.</p><p>Click on <strong>Filters</strong> again, but this time switch to the <strong>Message Types</strong> tab. Here you control the types of messages that are displayed.</p><p>For example, deselect <strong>On-call Changes</strong> and <strong>Escalations</strong>, this will reduce the amount of messages displayed.</p><p><a href=#R-image-b5cab36dd8e892447fba8498af80b5a7 class=lightbox-link><img alt="Timeline Filters Message Types" class="lazy lightbox figure-image" loading=lazy src=../images/m7-timeline-filters-message-types.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b5cab36dd8e892447fba8498af80b5a7><img alt="Timeline Filters Message Types" class="lazy lightbox lightbox-image" loading=lazy src=../images/m7-timeline-filters-message-types.png></a></p><h2 id=4-incidents>4. Incidents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>On the right we have the <strong>Incidents</strong> section. Here we get a list of all the incidents within the platform, or we can view a more specific list such as incidents you are specifically assigned to, or for any of the Teams you are a member of.</p><p>Select the <strong>Team Incidents</strong> tab you should find that the <strong>Triggered</strong>, <strong>Acknowledged</strong> & <strong>Resolved</strong> tabs are currently all empty as you have had no incidents logged.</p><p>Let&rsquo;s change that by generating your first incident!</p><p>Continue with the <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/incident_lifecycle/create_incidents/index.html>Create Incidents</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><section><h1 class=a11y-only>Subsections of 2. Incident Lifecycle</h1><article class=default><header class=headline></header><h1 id=create-incidents>Create Incidents</h1><h2 id=aim>Aim<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The aim of this module is for you to place yourself &lsquo;On-Call&rsquo; then generate an Incident using the supplied EC2 Instance so you can then work through the lifecycle of an Incident.</p><hr><h2 id=1-on-call>1. On-Call<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Before generating any incidents you should assign yourself to the current Shift within your <strong>Follow the Sun Support - Business Hours</strong> Rotation and also place yourself <strong>On-Call</strong>.</p><ul><li>Click on the <strong>Schedule</strong> link within your <strong>Team</strong> in the <strong>People</strong> section on the left, or navigate to <strong>Teams ‚Üí [Your Team] ‚Üí Rotations</strong></li><li>Expand the <strong>Follow the Sun Support - Business Hours</strong> Rotation</li><li>Click on the <strong>Manage members</strong> icon (the figures) for the current active shift depending on your time zone
<a href=#R-image-48fc93861885a0077d7b978ad834e76d class=lightbox-link><img alt="Manage Members" class="lazy lightbox figure-image" loading=lazy src=../../images/manage-members.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-48fc93861885a0077d7b978ad834e76d><img alt="Manage Members" class="lazy lightbox lightbox-image" loading=lazy src=../../images/manage-members.png></a></li><li>Use the <strong>Select a user to add&mldr;</strong> dropdown to add yourself to the shift</li><li>Then click on <strong>Set Current</strong> next to your name to make yourself the current <strong>on-call</strong> user within the shift</li><li>You should now get a <strong>Push Notification</strong> to your phone informing you that <strong>You Are Now On-Call</strong>
<a href=#R-image-a840ad9a9da7ec7b38ca6e2b2d396d2d class=lightbox-link><img alt="On Duty" class="lazy lightbox figure-image" loading=lazy src=../../images/on-duty.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a840ad9a9da7ec7b38ca6e2b2d396d2d><img alt="On Duty" class="lazy lightbox lightbox-image" loading=lazy src=../../images/on-duty.png></a></li></ul><h2 id=2-trigger-alert>2. Trigger Alert<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Switch back to your shell session connected to your EC2 Instance; all of the following commands will be executed from your Instance.</p><p>Force the CPU to spike to 100% by running the following command:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>openssl speed -multi $(grep -ci processor /proc/cpuinfo)</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Forked child 0
</span></span><span class=line><span class=cl>+DT:md4:3:16
</span></span><span class=line><span class=cl>+R:19357020:md4:3.000000
</span></span><span class=line><span class=cl>+DT:md4:3:64
</span></span><span class=line><span class=cl>+R:14706608:md4:3.010000
</span></span><span class=line><span class=cl>+DT:md4:3:256
</span></span><span class=line><span class=cl>+R:8262960:md4:3.000000
</span></span><span class=line><span class=cl>+DT:md4:3:1024</span></span></code></pre></div><p>This will result in an Alert being generated by Splunk Infrastructure Monitoring which in turn will generate an Incident within Splunk On-Call within a maximum of 10 seconds. This is the default polling time for the OpenTelemetry Collector installed on your instance (note it can be reduced to 1 second).</p><hr><p>Continue with the <a href=/observability-workshop/en/unsupported-field-workshops/10-oncall/incident_lifecycle/manage_incidents/index.html>Manage Incidents</a> module.</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article><article class=default><header class=headline></header><h1 id=manage-incidents>Manage Incidents</h1><h2 id=1-acknowledge>1. Acknowledge<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Use your Splunk On-Call App on your phone to acknowledge the Incident by clicking on the <strong>push notification</strong> &mldr;</p><p><a href=#R-image-9ecdacefa47229050399bd8051177fe6 class=lightbox-link><img alt="Push Notification" class="lazy lightbox figure-image" loading=lazy src=../../images/mobile-notification.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9ecdacefa47229050399bd8051177fe6><img alt="Push Notification" class="lazy lightbox lightbox-image" loading=lazy src=../../images/mobile-notification.png></a></p><p>&mldr;to open the alert in the Splunk On-Call mobile app, then clicking on either the <strong>single tick</strong> in the top right hand corner, or the <strong>Acknowledge</strong> link to acknowledge the incident and stop the escalation process.</p><p>The :fontawesome-solid-check: will then transform into a :fontawesome-solid-check::fontawesome-solid-check:, and the status will change from <strong>TRIGGERED</strong> to <strong>ACKNOWLEDGED</strong>.</p><table><thead><tr><th>Triggered Incident</th><th>Acknowledge Incident</th></tr></thead><tbody><tr><td><a href=#R-image-b999e17dd61c94198b2fb2740f9c562f class=lightbox-link><img alt="Acknowledge Alert" class="lazy lightbox figure-image" loading=lazy src=../../images/phone-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b999e17dd61c94198b2fb2740f9c562f><img alt="Acknowledge Alert" class="lazy lightbox lightbox-image" loading=lazy src=../../images/phone-annotations.png></a></td><td><a href=#R-image-c47cc30434a8936a08be6af29247a4d7 class=lightbox-link><img alt="Alert Acknowledged" class="lazy lightbox figure-image" loading=lazy src=../../images/phone-alert-acknowledged.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c47cc30434a8936a08be6af29247a4d7><img alt="Alert Acknowledged" class="lazy lightbox lightbox-image" loading=lazy src=../../images/phone-alert-acknowledged.png></a></td></tr></tbody></table><h2 id=2-details-and-annotations>2. Details and Annotations<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Still on your phone, select the Alert Details tab. Then on the Web UI, navigate back to <strong>Timeline</strong>, select <strong>Team Incidents</strong> on the right, then select <strong>Acknowledged</strong> and click into the new <strong>Incident</strong>, this will open up the War Room Dashboard view of the Incident.</p><p>You should now have the <strong>Details</strong> tab displayed on both your Phone and the Web UI. Notice how they both show the exact same information.</p><p>Now select the <strong>Annotations</strong> tab on both the Phone and the Web UI, you should have a <strong>Graph</strong> displayed in the UI which is generated by Splunk Infrastructure Monitoring.</p><p><a href=#R-image-4bf106551e8c374946db39e3fb20f2d5 class=lightbox-link><img alt="UI Annotations" class="lazy lightbox figure-image" loading=lazy src=../../images/ui-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4bf106551e8c374946db39e3fb20f2d5><img alt="UI Annotations" class="lazy lightbox lightbox-image" loading=lazy src=../../images/ui-annotations.png></a></p><p>On your phone you should get the same image displayed (sometimes it&rsquo;s a simple hyperlink depending on the image size)</p><p><a href=#R-image-315bfa80ac1365142fbfc779ed17ba10 class=lightbox-link><img alt="Phone Link" class="lazy lightbox figure-image" loading=lazy src=../../images/phone-annotations.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-315bfa80ac1365142fbfc779ed17ba10><img alt="Phone Link" class="lazy lightbox lightbox-image" loading=lazy src=../../images/phone-annotations.png></a></p><p>Splunk On-Call is a &lsquo;Mobile First&rsquo; platform meaning the phone app is full functionality and you can manage an incident directly from your phone.</p><p>For the remainder of this module we will focus on the Web UI however please spend some time later exploring the phone app features.</p><h2 id=3-link-to-alerting-system>3. Link to Alerting System<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Sticking with the Web UI, click the <strong>2. Alert Details in SignalFx</strong> link.</p><p><a href=#R-image-7310a44aca9a46c0a211ba6e994c6642 class=lightbox-link><img alt="Alert Details" class="lazy lightbox figure-image" loading=lazy src=../../images/alert-details-in-sfx.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7310a44aca9a46c0a211ba6e994c6642><img alt="Alert Details" class="lazy lightbox lightbox-image" loading=lazy src=../../images/alert-details-in-sfx.png></a></p><p>This will open a new browser tab and take you directly to the Alert within Splunk Infrastructure Monitoring where you could then progress your troubleshooting using the powerful tools built into its UI.</p><p><a href=#R-image-3542764d1d65897218c93d9c6c26c9b2 class=lightbox-link><img alt="SFX Alert Details" class="lazy lightbox figure-image" loading=lazy src=../../images/sfx-alert-details.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3542764d1d65897218c93d9c6c26c9b2><img alt="SFX Alert Details" class="lazy lightbox lightbox-image" loading=lazy src=../../images/sfx-alert-details.png></a></p><p>However, we are focussing on Splunk On-Call so close this tab and return to the Splunk On-Call UI.</p><h2 id=4-similar-incidents>4. Similar Incidents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>What if Splunk On-Call could identify previous incidents within the system which may give you a clue to the best way to tackle this incident.</p><p>The <strong>Similar Incidents</strong> tab does exactly that, surfacing previous incidents allowing you to look at them and see what actions were taken to resolve them, actions which could be easily repeated for this incident.</p><p><a href=#R-image-431267cc7c59cf6356dd823167ece1ac class=lightbox-link><img alt="Similar Incidents" class="lazy lightbox figure-image" loading=lazy src=../../images/similar-incidents.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-431267cc7c59cf6356dd823167ece1ac><img alt="Similar Incidents" class="lazy lightbox lightbox-image" loading=lazy src=../../images/similar-incidents.png></a></p><h2 id=5-timeline>5 Timeline<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>On right we have a Time Line view where you can add messages and see the history of previous alerts and interactions.</p><p><a href=#R-image-575fed61beb622ca73300ffa59e832ed class=lightbox-link><img alt="Incident View" class="lazy lightbox figure-image" loading=lazy src=../../images/war-room-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-575fed61beb622ca73300ffa59e832ed><img alt="Incident View" class="lazy lightbox lightbox-image" loading=lazy src=../../images/war-room-dashboard.png></a></p><h2 id=6-add-responders>6 Add Responders<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>On the far left you have the option of allocating additional resources to this incident by clicking on the <strong>Add Responders</strong> link.</p><p><a href=#R-image-249da87068cf1bf8ead99a708c125b1e class=lightbox-link><img alt=add-responders class="lazy lightbox figure-image" loading=lazy src=../../images/add-responders.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-249da87068cf1bf8ead99a708c125b1e><img alt=add-responders class="lazy lightbox lightbox-image" loading=lazy src=../../images/add-responders.png></a></p><p>This allows you build a virtual team specific to this incident by adding other Teams or individual Users, and also share details of a <strong>Conference Bridge</strong> where you can all get together and collaborate.</p><p><a href=#R-image-e7abee275f2ad3d367494e1963c54956 class=lightbox-link><img alt="Conference Bridge" class="lazy lightbox figure-image" loading=lazy src=../../images/conference-bridge.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7abee275f2ad3d367494e1963c54956><img alt="Conference Bridge" class="lazy lightbox lightbox-image" loading=lazy src=../../images/conference-bridge.png></a></p><p>Once the system has built up some incident data history, it will use Machine Learning to suggest Teams and Users who have historically worked on similar incidents, as they may be best placed to help resolve this incident quickly.</p><p>You can select different Teams and/or Users and also choose from a pre-configured conference bridge, or populate the details of a new bridge from your preferred provider.</p><p>We do not need to add any Responders in this exercise so close the <strong>Add Responders</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=7-reroute>7 Reroute<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>If it&rsquo;s decided that maybe the incident could be better dealt with by a different Team, the call can be <strong>Rerouted</strong> by clicking the <strong>Reroute</strong> Button at the top of the left hand panel.</p><p><a href=#R-image-d1d85650379e9c3cd1046c5a6574b742 class=lightbox-link><img alt=Reroute class="lazy lightbox figure-image" loading=lazy src=../../images/reroute1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d1d85650379e9c3cd1046c5a6574b742><img alt=Reroute class="lazy lightbox lightbox-image" loading=lazy src=../../images/reroute1.png></a></p><p>In a similar method to that used in the Add Responders dialogue, you can select Teams or Users to Reroute the Incident to.</p><p><a href=#R-image-ce6da51503765aec032712db4afaaf71 class=lightbox-link><img alt="Reroute Incident" class="lazy lightbox figure-image" loading=lazy src=../../images/reroute2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce6da51503765aec032712db4afaaf71><img alt="Reroute Incident" class="lazy lightbox lightbox-image" loading=lazy src=../../images/reroute2.png></a></p><p>We do not need to actually Reroute in this exercise so close the <strong>Reroute Incident</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=8-snooze>8 Snooze<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>You can also <strong>snooze</strong> this incident by clicking on the <strong>alarm clock</strong> Button at the top of the left hand panel.</p><p><a href=#R-image-02f5e0d20ab1c84c94bf8531f9dfbd09 class=lightbox-link><img alt=Snnoze class="lazy lightbox figure-image" loading=lazy src=../../images/snooze1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-02f5e0d20ab1c84c94bf8531f9dfbd09><img alt=Snnoze class="lazy lightbox lightbox-image" loading=lazy src=../../images/snooze1.png></a></p><p>You can enter an amount of time upto 24 hours to snooze the incident. This action will be tracked in the Timeline, and when the time expires the paging will restart.</p><p>This is useful for low priority incidents, enabling you to put them on a back burner for a few hours, but it ensures they do not get forgotten thanks to the paging process starting again.</p><p><a href=#R-image-b0105198baa720a68d4f9d0e3fba9db8 class=lightbox-link><img alt="Snooze Incident" class="lazy lightbox figure-image" loading=lazy src=../../images/snooze2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b0105198baa720a68d4f9d0e3fba9db8><img alt="Snooze Incident" class="lazy lightbox lightbox-image" loading=lazy src=../../images/snooze2.png></a></p><p>We do not need to actually Snooze in this exercise so close the <strong>Snooze Incident</strong> dialogue by clicking <strong>Cancel</strong>.</p><h2 id=9-action-tracking>9 Action Tracking<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now lets fix this issue and update the Incident with what we did. Add a new message at the top of the right hand panel such as <strong>Discovered rogue process, terminated it</strong>.</p><p><a href=#R-image-abe5edf28a0238d2cc430ae5e81a1899 class=lightbox-link><img alt="Add Message" class="lazy lightbox figure-image" loading=lazy src=../../images/time-line-update-message.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-abe5edf28a0238d2cc430ae5e81a1899><img alt="Add Message" class="lazy lightbox lightbox-image" loading=lazy src=../../images/time-line-update-message.png></a></p><p>All the actions related to the Incident will be recorded here, and can then be summarized is a <strong>Post Incident Review Report</strong> available from the <strong>Reports</strong> tab</p><h2 id=10-resolution>10 Resolution<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Now kill off the process we started in the VM to max out the CPU by switching back the Shell session for the VM and pressing <strong>ctrl+c</strong></p><p>Within no more than 10 seconds SignalFx should detect the new CPU value, clear the alert state in SignalFx, then automatically update the Incident in VictorOps marking it as <strong>Resolved</strong>.</p><p><a href=#R-image-223c439cb22380c72fcb3a4c066d489e class=lightbox-link><img alt=Resolved class="lazy lightbox figure-image" loading=lazy src=../../images/m7-resolved.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-223c439cb22380c72fcb3a4c066d489e><img alt=Resolved class="lazy lightbox lightbox-image" loading=lazy src=../../images/m7-resolved.png></a></p><p>As we have two way integration between Splunk Infrastructure Monitoring and Splunk On-Call we could have also marked the incident as Resolved in Splunk On-Call, and this would have resulted in the alert in Splunk Infrastructure Monitoring being resolved as well.</p><hr><p>That completes this introduction to Splunk On-Call!</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Sep 19, 2024</span></span></footer></article></section></section></section></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1770895853 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1770895853 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1770895853 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770895853 defer></script><script src=/observability-workshop/js/theme.min.js?1770895853 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>