<!doctype html><html id=R-html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
Exercise é‡è¦ ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ 7-sum-count ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€clear ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
6-routing-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ *.yaml ã‚’ 7-sum-count ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™
â€‹ Updated Directory Structure . â”œâ”€â”€ agent.yaml â””â”€â”€ gateway.yaml agent.yaml ã‚’æ›´æ–°ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ agent.yaml å†…ã® filelog/quotes ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€poll_interval å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ filelog/quotes: # Receiver Type/Name poll_interval: 10s # Only read every ten seconds é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Filelog receiver ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
Exercise é‡è¦ ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ 7-sum-count ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€clear ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
6-routing-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ *.yaml ã‚’ 7-sum-count ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™
â€‹ Updated Directory Structure . â”œâ”€â”€ agent.yaml â””â”€â”€ gateway.yaml agent.yaml ã‚’æ›´æ–°ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ agent.yaml å†…ã® filelog/quotes ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€poll_interval å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ filelog/quotes: # Receiver Type/Name poll_interval: 10s # Only read every ten seconds é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Filelog receiver ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚"><meta property="og:url" content="https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta property="og:description" content="ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
Exercise é‡è¦ ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ 7-sum-count ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€clear ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
6-routing-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ *.yaml ã‚’ 7-sum-count ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™
â€‹ Updated Directory Structure . â”œâ”€â”€ agent.yaml â””â”€â”€ gateway.yaml agent.yaml ã‚’æ›´æ–°ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ agent.yaml å†…ã® filelog/quotes ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€poll_interval å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ filelog/quotes: # Receiver Type/Name poll_interval: 10s # Only read every ten seconds é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Filelog receiver ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta itemprop=name content="7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta itemprop=description content="ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
Exercise é‡è¦ ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ 7-sum-count ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€clear ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
6-routing-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ *.yaml ã‚’ 7-sum-count ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™
â€‹ Updated Directory Structure . â”œâ”€â”€ agent.yaml â””â”€â”€ gateway.yaml agent.yaml ã‚’æ›´æ–°ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ agent.yaml å†…ã® filelog/quotes ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€poll_interval å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ filelog/quotes: # Receiver Type/Name poll_interval: 10s # Only read every ten seconds é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Filelog receiver ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚"><meta itemprop=dateModified content="2026-01-23T16:19:26+09:00"><meta itemprop=wordCount content="389"><title>7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html rel=canonical type=text/html title="7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770160991 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770160991 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770160991 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770160991 defer></script><script src=/observability-workshop/js/search.min.js?1770160991 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.ja.js?1770160991"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770160991 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770160991 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770160991 defer></script><script src=/observability-workshop/js/lunr/tinyseg.js?1770160991 defer></script><script src=/observability-workshop/js/lunr/lunr.ja.min.js?1770160991 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["ja"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770160991 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770160991 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770160991 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770160991 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770160991 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html",window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Copied_to_clipboard=`ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Link_copied_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Reset_view=`ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ`,window.T_View_reset=`ãƒªã‚»ãƒƒãƒˆã‚’è¦‹ã‚‹`,window.T_No_results_found=`"{0}" ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,window.T_N_results_found=`"{0}" ã§ {1} ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`,window.T_Browser_unsupported_feature=`ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã“ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="ç›®æ¬¡ (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html><span itemprop=name>OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/index.html><span itemprop=name>Advanced OpenTelemetry Collector</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>7. Count & Sum Connector</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/index.print.html title="ç« å…¨ä½“ã‚’å°åˆ·ã™ã‚‹ (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/6-routing-data/6-3-test-routing/index.html title="6.3 Test Routing Connector (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/7-sum-count/7-1-count-test/index.html title="7.1 Count Connector ã®ãƒ†ã‚¹ãƒˆ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=æ›´ã«><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=7-count-connector-ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹>7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external><strong>Count Connector</strong></a> ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>7-sum-count</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>6-routing-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>7-sum-count</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-3dfd72ee607eeaae88ba8dd938be639c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7ef8d476e21a1524a48346a9f5cbe154 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3dfd72ee607eeaae88ba8dd938be639c","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-7ef8d476e21a1524a48346a9f5cbe154 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div><ul><li><strong>agent.yaml ã‚’æ›´æ–°</strong>ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
<code>agent.yaml</code> å†…ã® <code>filelog/quotes</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€<code>poll_interval</code> å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>filelog/quotes</span><span class=p>:</span><span class=w>                      </span><span class=c># Receiver Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>poll_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s                </span><span class=w> </span><span class=c># Only read every ten seconds</span></span></span></code></pre></div></div></details><p>é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>Filelog receiver</code> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€æ¡ä»¶ã‚’çœç•¥ã™ã‚‹ã“ã¨ã§ã€Collector ã¯å„èª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã®ç´¯è¨ˆã‚«ã‚¦ãƒ³ãƒˆã‚’ç¶­æŒã§ãã¾ã™ã€‚ãŸã ã—ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯é•·æœŸé–“ã«ã‚ãŸã£ã¦ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½è·¡ã§ãã‚‹ãŸã‚ã€ç´¯è¨ˆã‚«ã‚¦ãƒ³ãƒˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ä»»ã›ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>Count Connector ã‚’è¿½åŠ ã™ã‚‹</strong></li></ul><p>è¨­å®šã® connectors ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« Count Connector ã‚’è¿½åŠ ã—ã€ä½¿ç”¨ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¾ã™</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>connectors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.full.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Running count of all logs read in interval&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.sw.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;StarWarsCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;SW&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.lotr.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;LOTRCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;LOTR&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.error.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;ErrorCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;level&#34;] == &#34;ERROR&#34;</span></span></span></code></pre></div><ul><li><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®èª¬æ˜</strong></p><ul><li><code>logs.full.count</code>ï¼šå„èª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§å‡¦ç†ã•ã‚ŒãŸãƒ­ã‚°ã®ç·æ•°ã‚’è¿½è·¡ã—ã¾ã™ã€‚
ã“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ãŒãªã„ãŸã‚ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’é€šéã™ã‚‹ã™ã¹ã¦ã®ãƒ­ã‚°ãŒã‚«ã‚¦ãƒ³ãƒˆã«å«ã¾ã‚Œã¾ã™ã€‚</li><li><code>logs.sw.count</code>ï¼šStar Wars æ˜ ç”»ã®åè¨€ã‚’å«ã‚€ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</li><li><code>logs.lotr.count</code>ï¼šLord of the Rings æ˜ ç”»ã®åè¨€ã‚’å«ã‚€ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</li><li><code>logs.error.count</code>ï¼šèª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§é‡å¤§åº¦ãƒ¬ãƒ™ãƒ«ãŒ ERROR ã®ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã€å®Ÿéš›ã®ã‚·ãƒŠãƒªã‚ªã‚’è¡¨ã—ã¾ã™ã€‚</li></ul></li><li><p><strong>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ Count Connector ã‚’è¨­å®šã™ã‚‹</strong>
ä»¥ä¸‹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã§ã¯ã€connector exporter ãŒ <code>logs</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã€connector receiver ãŒ <code>metrics</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</p></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                          </span><span class=w> </span><span class=c># Count Connector that receives count metric from logs count exporter in logs pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                    # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div></div></details><p>ãƒ­ã‚°ã¯å±æ€§ã«åŸºã¥ã„ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ãŒå±æ€§ã§ã¯ãªããƒ­ã‚°ãƒœãƒ‡ã‚£ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ <code>Transform</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ã‚­ãƒ¼/ãƒãƒªãƒ¥ãƒ¼ã®ãƒšã‚¢ã‚’æŠ½å‡ºã—ã€å±æ€§ã¨ã—ã¦è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€<code>05-transform-data</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ—¢ã« <code>merge_maps(attributes, cache, "upsert")</code> ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‡¦ç†ç”¨ã®ãƒ­ã‚°å±æ€§ã«å«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>å±æ€§ã‚’ä½œæˆã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é¸æŠã™ã‚‹éš›ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç„¡å·®åˆ¥ã«è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã€æœ¬ç•ªç’°å¢ƒã§ã¯ä¸€èˆ¬çš„ã«ç†æƒ³çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã®ä¹±é›‘ã•ã‚’é¿ã‘ã‚‹ãŸã‚ã€æœ¬å½“ã«å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ agent è¨­å®šã‚’<strong>æ¤œè¨¼</strong>ã—ã¦ãã ã•ã„ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>logs</code> ã¨ <code>metrics:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</li></ul><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download):::receiver
    REC2(filelog&lt;br&gt;fa:fa-download&lt;br&gt;quotes):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO9(transfrom&lt;br&gt;fa:fa-microchip&lt;br&gt;logs):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP2(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    ROUTE1(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive

    %% Links
    subID1:::sub-logs
    subID2:::sub-metrics
    subgraph &#34; &#34;
      direction LR
      subgraph subID1[**Logs**]
      direction LR
      REC1 --&gt; PRO1
      REC2 --&gt; PRO1
      PRO1 --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO9
      PRO9 --&gt; PRO5
      PRO5 --&gt; ROUTE1
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end

      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE2
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>7. Count & Sum Connectorã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=71-count-connector-ã®ãƒ†ã‚¹ãƒˆ>7.1 Count Connector ã®ãƒ†ã‚¹ãƒˆ</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-1f7d6ce970d5ec7c8c6dce588d293349><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-aaf43e4ee983c02bb6b38c9a4a800702 aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1f7d6ce970d5ec7c8c6dce588d293349","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-aaf43e4ee983c02bb6b38c9a4a800702 data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-308ffccd18ec9e387bd987ba330a4fd6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-189da701a8174544b27b49c41976bd19 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-308ffccd18ec9e387bd987ba330a4fd6","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-189da701a8174544b27b49c41976bd19 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Loadgen ã§12è¡Œã®ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹</strong>
<strong>Spans terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€12è¡Œã®ãƒ­ã‚°ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§èª­ã¿å–ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚ä»¥ä¸‹ã® <code>loadgen</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„</p><div class=tab-panel data-tab-group=R-tabs-96cdcfa3f368fa06bfc1779f0aa59218><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-49f9cf28e46bbe210c6ffa438b7b1978 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-96cdcfa3f368fa06bfc1779f0aa59218","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-49f9cf28e46bbe210c6ffa438b7b1978 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -logs -json -count <span class=m>12</span></span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚<code>loadgen</code> ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚</p><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹</strong>
ãƒ­ã‚°ãŒå‡¦ç†ã•ã‚Œã‚‹ã¨ã€<strong>Agent</strong> ãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ <strong>Gateway</strong> ã«è»¢é€ã—ã€Gateway ãŒãã‚Œã‚‰ã‚’ <code>gateway-metrics.out</code> ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p><p>å‡ºåŠ›ã« <code>logs.full.count</code>ã€<code>logs.sw.count</code>ã€<code>logs.lotr.count</code>ã€<code>logs.error.count</code> ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã® <strong>jq</strong> ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-ba46a77ab8a3159a21851445c0475e31><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-dbd81c7530154f6d78e09ea142c1d602 aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ba46a77ab8a3159a21851445c0475e31","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-2f7fe0209c79ca1adf98ba77fe44a4c8 aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ba46a77ab8a3159a21851445c0475e31","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-dbd81c7530154f6d78e09ea142c1d602 data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[]
</span></span></span><span class=line><span class=cl><span class=s1>    | select(.name == &#34;logs.full.count&#34; or .name == &#34;logs.sw.count&#34; or .name == &#34;logs.lotr.count&#34; or .name == &#34;logs.error.count&#34;)
</span></span></span><span class=line><span class=cl><span class=s1>    | {name: .name, value: (.sum.dataPoints[0].asInt // &#34;-&#34;)}&#39;</span> gateway-metrics.out</span></span></code></pre></div></div></div><div id=R-tab-id-2f7fe0209c79ca1adf98ba77fe44a4c8 data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;4&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;6&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>æ³¨ï¼š<code>logs.full.count</code> ã¯é€šå¸¸ <code>logs.sw.count</code> + <code>logs.lotr.count</code> ã¨ç­‰ã—ããªã‚Šã¾ã™ãŒã€<code>logs.error.count</code> ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å€¤ã«ãªã‚Šã¾ã™ã€‚</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ <strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=72-sum-connector-ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹>7.2 Sum Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/sumconnector rel=external><strong>Sum Connector</strong></a> ãŒã‚¹ãƒ‘ãƒ³ã‹ã‚‰å€¤ã‚’æŠ½å‡ºã—ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€ãƒ™ãƒ¼ã‚¹ã‚¹ãƒ‘ãƒ³ã‹ã‚‰ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®è«‹æ±‚é¡ã‚’å–å¾—ã—ã€Sum Connector ã‚’æ´»ç”¨ã—ã¦åˆè¨ˆè«‹æ±‚é¡ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã—ã¦å–å¾—ã—ã¾ã™ã€‚</p><p>ã“ã® connector ã¯ã€ã‚¹ãƒ‘ãƒ³ã€ã‚¹ãƒ‘ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã€ãŠã‚ˆã³ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å±æ€§å€¤ã‚’åé›†ï¼ˆ<strong>sum</strong>ï¼‰ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚å„å€‹åˆ¥ã®å€¤ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã—ã¦è»¢é€ã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨å±æ€§ã‚’ä½¿ç”¨ã—ã¦è¨ˆç®—ã‚„ã•ã‚‰ãªã‚‹å‡¦ç†ã‚’è¡Œã†ã®ã¯<strong>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</strong>ã®å½¹å‰²ã§ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ <code>agent.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚</p><ul><li><strong>Sum Connector ã‚’è¿½åŠ ã™ã‚‹</strong>
è¨­å®šã® connectors ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« Sum Connector ã‚’è¿½åŠ ã—ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¾ã™</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>sum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spans</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=nt>user.card-charge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>source_attribute</span><span class=p>:</span><span class=w> </span><span class=l>payment.amount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>attributes[&#34;payment.amount&#34;] != &#34;NULL&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.name</span></span></span></code></pre></div></div></details><p>ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ã‚¹ãƒ‘ãƒ³å†…ã® <code>payment.amount</code> å±æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚æœ‰åŠ¹ãªå€¤ãŒã‚ã‚‹å ´åˆã€<strong>Sum</strong> connector ã¯ <code>user.card-charge</code> ã¨ã„ã†ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã€<code>user.name</code> ã‚’å±æ€§ã¨ã—ã¦å«ã‚ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯è«‹æ±‚ã‚µã‚¤ã‚¯ãƒ«ãªã©ã®é•·æœŸé–“ã«ã‚ãŸã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆè¨ˆè«‹æ±‚é¡ã‚’è¿½è·¡ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã§ã¯ã€connector exporter ãŒ traces ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã€connector receiver ãŒ metrics ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ Count Connector ã‚’è¨­å®šã™ã‚‹</strong></li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Sum connector which aggregates payment.amount from spans and sends to metrics pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Receives metrics from the sum exporter in the traces pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Receives count metric from logs count exporter in logs pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                   # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div><ul><li><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ agent è¨­å®šã‚’<strong>æ¤œè¨¼</strong>ã—ã¦ãã ã•ã„ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>traces</code> ã¨ <code>metrics:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</li></ul><pre class="mermaid actionbar-wrapper align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt;):::processor

    PROA(attributes&lt;br&gt;fa:fa-microchip&lt;br&gt;redact):::processor
    PROB(redaction&lt;br&gt;fa:fa-microchip&lt;br&gt;update):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP2(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP5(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    ROUTE1(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive
    ROUTE3(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive

    %% Links
    subID1:::sub-traces
    subID2:::sub-metrics
    subgraph &#34; &#34;
      direction LR
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PROA
      PROA --&gt; PROB
      PROB --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      PRO5 --&gt; EXP5
      PRO5 --&gt; ROUTE1
      end

      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE3
      ROUTE3 --&gt; PRO2
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=73-sum-connector-ã®ãƒ†ã‚¹ãƒˆ>7.3 Sum Connector ã®ãƒ†ã‚¹ãƒˆ</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-d4bfde7099eccc9df9b2021d4caf25a3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6c1d1232db275a308713e513990e00db aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d4bfde7099eccc9df9b2021d4caf25a3","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-6c1d1232db275a308713e513990e00db data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-b64fe558441f52e9f0f3abd98a87af61><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-fba4c3bd8cb8a8bd6953cd2a94f2dee6 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b64fe558441f52e9f0f3abd98a87af61","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-fba4c3bd8cb8a8bd6953cd2a94f2dee6 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Loadgen ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Spans terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€ä»¥ä¸‹ã® <code>loadgen</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦8ã¤ã®ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-6f94b4e6ca2c06fc51e659763fc6af9e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a32724c7e411313a572191e3c553e917 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6f94b4e6ca2c06fc51e659763fc6af9e","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-a32724c7e411313a572191e3c553e917 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>8</span></span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚loadgen ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚</p><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã™ã‚‹</strong>
ã‚¹ãƒ‘ãƒ³ã‚’å‡¦ç†ã™ã‚‹éš›ã€<strong>Agent</strong> ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ <strong>Gateway</strong> ã«è»¢é€ã—ã¾ã™ã€‚<strong>Gateway</strong> ã¯ãã‚Œã‚‰ã‚’ <code>gateway-metrics.out</code> ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p><p>ãƒ¡ãƒˆãƒªã‚¯ã‚¹å‡ºåŠ›ã« <code>user.card-charge</code> ãŒå­˜åœ¨ã—ã€ãã‚Œãã‚Œã« <code>user.name</code> å±æ€§ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã® jq ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-713dbad01ded4c2044a27d62b87fd98d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2e368fd4bf4f135007130e1e58ad1b9c aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-713dbad01ded4c2044a27d62b87fd98d","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-276138b62a6a1fbd37026bdad7482c67 aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-713dbad01ded4c2044a27d62b87fd98d","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-2e368fd4bf4f135007130e1e58ad1b9c data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -r <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[] | select(.name == &#34;user.card-charge&#34;) | .sum.dataPoints[] | &#34;\(.attributes[] | select(.key == &#34;user.name&#34;).value.stringValue)\t\(.asDouble)&#34;&#39;</span> gateway-metrics.out <span class=p>|</span> <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span><span class=s1>$&#39;\t&#39;</span> <span class=nb>read</span> -r name charge<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>printf</span> <span class=s2>&#34;%-20s %s\n&#34;</span> <span class=s2>&#34;</span><span class=nv>$name</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$charge</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div></div></div><div id=R-tab-id-276138b62a6a1fbd37026bdad7482c67 data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>George Lucas         67.49
</span></span><span class=line><span class=cl>Frodo Baggins        87.14
</span></span><span class=line><span class=cl>Thorin Oakenshield   90.98
</span></span><span class=line><span class=cl>Luke Skywalker       51.37
</span></span><span class=line><span class=cl>Luke Skywalker       65.56
</span></span><span class=line><span class=cl>Thorin Oakenshield   67.5
</span></span><span class=line><span class=cl>Thorin Oakenshield   66.66
</span></span><span class=line><span class=cl>Peter Jackson        94.39</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ <strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1770160991 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1770160991 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1770160991 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770160991 defer></script><script src=/observability-workshop/js/theme.min.js?1770160991 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>