<!doctype html><html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.2.0+9cac649a184a2967957ef9bbececf9402192846c"><meta name=description content="OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µOpenTelemetry Collector ã®æ¦‚å¿µã¨ã€Splunk Observability Cloud ã¸ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚Advanced OpenTelemetry CollectorOpenTelemetry Collector ã®è¨­å®šã‚’ã‚¼ãƒ­ã‹ã‚‰è¡Œã†ç·´ç¿’ã‚’è¡Œã„ã€ã„ãã¤ã‹ã®é«˜åº¦ãªè¨­å®šã‚·ãƒŠãƒªã‚ªã‚’ä½“é¨“ã—ã¾ã™ã€‚"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µOpenTelemetry Collector ã®æ¦‚å¿µã¨ã€Splunk Observability Cloud ã¸ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚Advanced OpenTelemetry CollectorOpenTelemetry Collector ã®è¨­å®šã‚’ã‚¼ãƒ­ã‹ã‚‰è¡Œã†ç·´ç¿’ã‚’è¡Œã„ã€ã„ãã¤ã‹ã®é«˜åº¦ãªè¨­å®šã‚·ãƒŠãƒªã‚ªã‚’ä½“é¨“ã—ã¾ã™ã€‚"><meta property="og:url" content="https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta property="og:description" content="OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µOpenTelemetry Collector ã®æ¦‚å¿µã¨ã€Splunk Observability Cloud ã¸ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚Advanced OpenTelemetry CollectorOpenTelemetry Collector ã®è¨­å®šã‚’ã‚¼ãƒ­ã‹ã‚‰è¡Œã†ç·´ç¿’ã‚’è¡Œã„ã€ã„ãã¤ã‹ã®é«˜åº¦ãªè¨­å®šã‚·ãƒŠãƒªã‚ªã‚’ä½“é¨“ã—ã¾ã™ã€‚"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta itemprop=name content="OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta itemprop=description content="OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µOpenTelemetry Collector ã®æ¦‚å¿µã¨ã€Splunk Observability Cloud ã¸ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚Advanced OpenTelemetry CollectorOpenTelemetry Collector ã®è¨­å®šã‚’ã‚¼ãƒ­ã‹ã‚‰è¡Œã†ç·´ç¿’ã‚’è¡Œã„ã€ã„ãã¤ã‹ã®é«˜åº¦ãªè¨­å®šã‚·ãƒŠãƒªã‚ªã‚’ä½“é¨“ã—ã¾ã™ã€‚"><meta itemprop=dateModified content="2026-01-09T14:22:11+09:00"><meta itemprop=wordCount content="15"><title>OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/ninja-workshops/3-opentelemetry-collector-workshops/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/ninja-workshops/3-opentelemetry-collector-workshops/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html rel=canonical type=text/html title="OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1769686396 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1769686396 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1769686396 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1769686396 defer></script><script src=/observability-workshop/js/search.min.js?1769686396 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.ja.js?1769686396"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1769686396 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1769686396 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1769686396 defer></script><script src=/observability-workshop/js/lunr/tinyseg.js?1769686396 defer></script><script src=/observability-workshop/js/lunr/lunr.ja.min.js?1769686396 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["ja"]</script><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769686396 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1769686396 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1769686396 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1769686396 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1769686396 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Copied_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼!`,window.T_Copy_link_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Link_copied_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Reset_view=`ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ`,window.T_View_reset=`ãƒªã‚»ãƒƒãƒˆã‚’è¦‹ã‚‹`,window.T_No_results_found=`"{0}" ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,window.T_N_results_found=`"{0}" ã§ {1} ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleNav() type=button title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="ç›®æ¬¡ (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/index.print.html title="ç« å…¨ä½“ã‚’å°åˆ·ã™ã‚‹ (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/9-wrap-up/index.html title="Workshop Wrap-up ğŸ (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/index.html title="OpenTelemetry ã§ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã« (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=æ›´ã«><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—>OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</h1><div class="children children-type-card children-sort-"><ul class=card-container><li><article class="card card-popout" aria-labelledby=R-card-0cb2ed459a83eee154cda94c00ba3e7f><div class=card-content><div class=card-title id=R-card-0cb2ed459a83eee154cda94c00ba3e7f><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/index.html>OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µ</a></div><div class=card-content-text>OpenTelemetry Collector ã®æ¦‚å¿µã¨ã€Splunk Observability Cloud ã¸ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚</div></div><div class=card-image><img src=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/images/extensionz.png></div></article></li><li><article class="card card-popout" aria-labelledby=R-card-be81941c806d36e24515fb2bfbbb00ca><div class=card-content><div class=card-title id=R-card-be81941c806d36e24515fb2bfbbb00ca><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/index.html>Advanced OpenTelemetry Collector</a></div><div class=card-content-text>OpenTelemetry Collector ã®è¨­å®šã‚’ã‚¼ãƒ­ã‹ã‚‰è¡Œã†ç·´ç¿’ã‚’è¡Œã„ã€ã„ãã¤ã‹ã®é«˜åº¦ãªè¨­å®šã‚·ãƒŠãƒªã‚ªã‚’ä½“é¨“ã—ã¾ã™ã€‚</div></div><div class=card-image><img src=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/2-advanced-collector/images/welldone.png></div></article></li></ul></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>OpenTelemetry Collector ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-ã§ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã«>OpenTelemetry ã§ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã«</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>1 hour</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><h2 id=æ¦‚è¦>æ¦‚è¦</h2><p>OpenTelemetry ã‚’å§‹ã‚ãŸã°ã‹ã‚Šã®çµ„ç¹”ã§ã¯ã€ã¾ãšã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ãŒå¤šã„ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯åˆæœŸãƒ†ã‚¹ãƒˆã«ã¯æœ‰åŠ¹ã§ã™ãŒã€OpenTelemetry Collector ã‚’ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¸€éƒ¨ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã§å¤šãã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã€æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¯æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€OpenTelemetry Collector ã®ä½¿ç”¨ã«ç„¦ç‚¹ã‚’å½“ã¦ã€Splunk Observability Cloud ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã® Receiverã€Processorã€Exporter ã®è¨­å®šã®åŸºæœ¬ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚å‚åŠ è€…ã¯åˆå¿ƒè€…ã‹ã‚‰ã€åˆ†æ•£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ã‚¸ãƒã‚¹ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ‹ãƒ¼ã‚ºã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã¾ã§åˆ°é”ã—ã¾ã™ã€‚</p><h3 id=ninja-ã‚»ã‚¯ã‚·ãƒ§ãƒ³>Ninja ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’é€šã˜ã¦ã€å±•é–‹å¯èƒ½ãª <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³</span></span> ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ã‚ˆã‚Šå®Ÿè·µçš„ã§ã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ä¸­ã¾ãŸã¯è‡ªåˆ†ã®æ™‚é–“ã«æ¢æ±‚ã§ãã‚‹è©³ç´°ãªæŠ€è¡“æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>OpenTelemetry ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é »ç¹ã«é–‹ç™ºãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ãŒå¤ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚è©³ç´°ãŒåŒæœŸã—ã¦ã„ãªã„å ´åˆã¯ãƒªãƒ³ã‚¯ãŒæä¾›ã•ã‚Œã¾ã™ã€‚æ›´æ–°ãŒå¿…è¦ãªç®‡æ‰€ã‚’è¦‹ã¤ã‘ãŸå ´åˆã¯ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã‚ˆã†ï¼</span></span></summary><div class=box-content><p><strong>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’å®Œäº†ã™ã‚‹ã¨ã€æ­£å¼ã« OpenTelemetry Collector Ninja ã«ãªã‚Œã¾ã™ï¼</strong></p></div></details><hr><h2 id=å¯¾è±¡è€…>å¯¾è±¡è€…</h2><p>ã“ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¯ã€OpenTelemetry Collector ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¤ã„ã¦è©³ã—ãå­¦ã³ãŸã„é–‹ç™ºè€…ãŠã‚ˆã³ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚</p><h2 id=å‰ææ¡ä»¶>å‰ææ¡ä»¶</h2><ul><li>ãƒ‡ãƒ¼ã‚¿åé›†ã®åŸºæœ¬çš„ãªç†è§£ãŒã‚ã‚‹ã“ã¨</li><li>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ vim/vi ã®çµŒé¨“ãŒã‚ã‚‹ã“ã¨</li><li>Ubuntu 20.04 LTS ã¾ãŸã¯ 22.04 LTS ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹/ãƒ›ã‚¹ãƒˆ/VM ãŒã‚ã‚‹ã“ã¨<ul><li>æœ€å°è¦ä»¶ã¯ AWS/EC2 t2.microï¼ˆ1 CPUã€1GB RAMã€8GB ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰ã§ã™</li></ul></li></ul><h2 id=å­¦ç¿’ç›®æ¨™>å­¦ç¿’ç›®æ¨™</h2><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’çµ‚ãˆã‚‹ã¨ã€å‚åŠ è€…ã¯ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™</p><ul><li>OpenTelemetry ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç†è§£ã™ã‚‹</li><li>Receiverã€Processorã€Exporter ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ãƒ»åˆ†æã™ã‚‹</li><li>OpenTelemetry ã‚’ä½¿ç”¨ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã‚’ç†è§£ã™ã‚‹</li><li>ãƒ“ã‚¸ãƒã‚¹ãƒ‹ãƒ¼ã‚ºã‚’è§£æ±ºã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹</li></ul><h2 id=opentelemetry-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£>OpenTelemetry ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>OpenTelemetry Collector ã®åŸºæœ¬æ¦‚å¿µã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-contrib-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>OpenTelemetry Collector Contrib ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1><h2 id=opentelemetry-collector-contrib-ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰>OpenTelemetry Collector Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2><p>OpenTelemetry Collector ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ã™ã€‚ã“ã®ãƒ©ãƒœã§ã¯ã€<code>wget</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ OpenTelemetry ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p><p>ãŠä½¿ã„ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã® <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ <a href=https://github.com/open-telemetry/opentelemetry-collector-releases/releases rel=external><strong>OpenTelemetry Collector Contrib ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸</strong></a> ã‹ã‚‰å–å¾—ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.111.0/otelcol-contrib_0.111.0_linux_amd64.deb</span></span></code></pre></div><h2 id=opentelemetry-collector-contrib-ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>OpenTelemetry Collector Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p><code>dpkg</code> ã‚’ä½¿ç”¨ã—ã¦ <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒæˆåŠŸã—ãŸå ´åˆã®å‡ºåŠ›ä¾‹ã¯ã€ä¸‹ã® <strong>dpkg Output</strong> ã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„</p><div class=tab-panel data-tab-group=R-tabs-6ac006aa60c17fc2db59eea330b69521><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a235413b02f481cbba0ece413e676853 aria-expanded=true data-tab-item=R-tab-14b7d76f2abce310837a677aad65c1ad class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6ac006aa60c17fc2db59eea330b69521","R-tab-14b7d76f2abce310837a677aad65c1ad")'>
<span class=tab-nav-text>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
</button>
<button aria-controls=R-tab-id-afd33e8fd524ec1ab7d587b378695bea aria-expanded=false data-tab-item=R-tab-d3493584dcb14c60dcd3149a9642bb6f class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-6ac006aa60c17fc2db59eea330b69521","R-tab-d3493584dcb14c60dcd3149a9642bb6f")'>
<span class=tab-nav-text>dpkg å‡ºåŠ›</span></button></div><div class=tab-content-container><div id=R-tab-id-a235413b02f481cbba0ece413e676853 data-tab-item=R-tab-14b7d76f2abce310837a677aad65c1ad class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo dpkg -i otelcol-contrib_0.111.0_linux_amd64.deb</span></span></code></pre></div></div></div><div id=R-tab-id-afd33e8fd524ec1ab7d587b378695bea data-tab-item=R-tab-d3493584dcb14c60dcd3149a9642bb6f class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Selecting previously unselected package otelcol-contrib.
</span></span><span class=line><span class=cl>(Reading database ... 89232 files and directories currently installed.)
</span></span><span class=line><span class=cl>Preparing to unpack otelcol-contrib_0.111.0_linux_amd64.deb ...
</span></span><span class=line><span class=cl>Unpacking otelcol-contrib (0.111.0) ...
</span></span><span class=line><span class=cl>Setting up otelcol-contrib (0.111.0) ...
</span></span><span class=line><span class=cl>Created symlink /etc/systemd/system/multi-user.target.wants/otelcol-contrib.service â†’ /lib/systemd/system/otelcol-contrib.service.</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-contrib-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>OpenTelemetry Collector Contrib ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1><h2 id=collector-ãŒå‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹>Collector ãŒå‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹</h2><p>Collector ãŒå‹•ä½œã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚<code>systemctl</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ root ã¨ã—ã¦ç¢ºèªã—ã¾ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’çµ‚äº†ã™ã‚‹ã«ã¯ <code>q</code> ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p><div class=tab-panel data-tab-group=R-tabs-68c62ab582bafdf13ca2760915e7a5a8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4c918863578e2ffd6983c5e2d08980c7 aria-expanded=true data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-68c62ab582bafdf13ca2760915e7a5a8","R-tab-4c2ea9b6feee78084d69f1a6877eb09c")'>
<span class=tab-nav-text>ã‚³ãƒãƒ³ãƒ‰</span>
</button>
<button aria-controls=R-tab-id-7d2095957d85ee2bf99dd3a1c4406997 aria-expanded=false data-tab-item=R-tab-161e52648ec172424c85f660dc71e964 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-68c62ab582bafdf13ca2760915e7a5a8","R-tab-161e52648ec172424c85f660dc71e964")'>
<span class=tab-nav-text>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å‡ºåŠ›</span></button></div><div class=tab-content-container><div id=R-tab-id-4c918863578e2ffd6983c5e2d08980c7 data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl status otelcol-contrib</span></span></code></pre></div></div></div><div id=R-tab-id-7d2095957d85ee2bf99dd3a1c4406997 data-tab-item=R-tab-161e52648ec172424c85f660dc71e964 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â— otelcol-contrib.service - OpenTelemetry Collector Contrib
</span></span><span class=line><span class=cl>     Loaded: loaded (/lib/systemd/system/otelcol-contrib.service; enabled; vendor preset: enabled)
</span></span><span class=line><span class=cl>     Active: active (running) since Mon 2024-10-07 10:27:49 BST; 52s ago
</span></span><span class=line><span class=cl>   Main PID: 17113 (otelcol-contrib)
</span></span><span class=line><span class=cl>      Tasks: 13 (limit: 19238)
</span></span><span class=line><span class=cl>     Memory: 34.8M
</span></span><span class=line><span class=cl>        CPU: 155ms
</span></span><span class=line><span class=cl>     CGroup: /system.slice/otelcol-contrib.service
</span></span><span class=line><span class=cl>             â””â”€17113 /usr/bin/otelcol-contrib --config=/etc/otelcol-contrib/config.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Descriptor:
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Name: up
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Description: The scraping was successful
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; Unit:
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:      -&gt; DataType: Gauge
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: NumberDataPoints #0
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: StartTimestamp: 1970-01-01 00:00:00 +0000 UTC
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Timestamp: 2024-10-07 09:28:36.942 +0000 UTC
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]: Value: 1.000000
</span></span><span class=line><span class=cl>Oct 07 10:28:36 petclinic-rum-testing otelcol-contrib[17113]:         {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;metrics&#34;, &#34;name&#34;: &#34;debug&#34;}</span></span></code></pre></div></div></div></div></div><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã€ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã€Collector ã®å†èµ·å‹•ã‚’è¤‡æ•°å›è¡Œã†ãŸã‚ã€Collector ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã—ã€èµ·å‹•æ™‚ã®è‡ªå‹•èµ·å‹•ã‚’ç„¡åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-361aa71c920c9d1aab1cbc07072e721c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0c41f1eb9611596617fb3bdeceacb487 aria-expanded=true data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-361aa71c920c9d1aab1cbc07072e721c","R-tab-4c2ea9b6feee78084d69f1a6877eb09c")'>
<span class=tab-nav-text>ã‚³ãƒãƒ³ãƒ‰</span></button></div><div class=tab-content-container><div id=R-tab-id-0c41f1eb9611596617fb3bdeceacb487 data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl stop otelcol-contrib <span class=o>&amp;&amp;</span> sudo systemctl disable otelcol-contrib</span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Open Telemetry Collector Builder (ocb) ã‚’ä½¿ç”¨ã—ã¦ç‹¬è‡ªã® Collector ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹</span></span></summary><div class=box-content><p>ã“ã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã«ä»¥ä¸‹ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</p><ul><li><p>Golangï¼ˆæœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /tmp
</span></span><span class=line><span class=cl>wget https://golang.org/dl/go1.20.linux-amd64.tar.gz
</span></span><span class=line><span class=cl>sudo tar -C /usr/local -xzf go1.20.linux-amd64.tar.gz</span></span></code></pre></div><p><code>.profile</code> ã‚’ç·¨é›†ã—ã¦ã€ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOROOT</span><span class=o>=</span>/usr/local/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOPATH</span><span class=o>=</span><span class=nv>$HOME</span>/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$GOPATH</span>/bin:<span class=nv>$GOROOT</span>/bin:<span class=nv>$PATH</span></span></span></code></pre></div><p>ã‚·ã‚§ãƒ«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> ~/.profile</span></span></code></pre></div><p>Go ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go version</span></span></code></pre></div></li><li><p>ocb ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</p><ul><li><p><a href=https://github.com/open-telemetry/opentelemetry-collector/releases/tag/cmd%2Fbuilder%2Fv0.80.0 rel=external>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒªãƒ¼ã‚¹</a>ã‹ã‚‰ ocb ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mv ocb_0.80.0_darwin_arm64 /usr/bin/ocb
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> /usr/bin/ocb</span></span></code></pre></div><p>åˆ¥ã®æ–¹æ³•ã¨ã—ã¦ã€golang ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒã‚¤ãƒŠãƒªã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go install go.opentelemetry.io/collector/cmd/builder@v0.80.0
</span></span><span class=line><span class=cl>mv <span class=k>$(</span>go env GOPATH<span class=k>)</span>/bin/builder /usr/bin/ocb</span></span></code></pre></div></li></ul></li><li><p>ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰Docker</p></li></ul><h2 id=ãªãœç‹¬è‡ªã®-collector-ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ã‹>ãªãœç‹¬è‡ªã® Collector ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ã‹ï¼Ÿ</h2><p>Collector ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆcore ã¨ contribï¼‰ã¯ã€æä¾›ã™ã‚‹æ©Ÿèƒ½ãŒå¤šã™ãã‚‹ã‹å°‘ãªã™ãã‚‹ã‹ã®ã©ã¡ã‚‰ã‹ã§ã™ã€‚</p><p>ã¾ãŸã€contrib Collector ã‚’æœ¬ç•ªç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é‡ãŒå¤šãã€ãã®ã»ã¨ã‚“ã©ãŒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«å¿…è¦ãªã„ãŸã‚ã§ã™ã€‚</p><h2 id=ç‹¬è‡ªã®-collector-ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯>ç‹¬è‡ªã® Collector ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ</h2><p>ç‹¬è‡ªã® Collector ãƒã‚¤ãƒŠãƒªï¼ˆä¸€èˆ¬çš„ã«ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨å‘¼ã°ã‚Œã‚‹ï¼‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ã€å¿…è¦ãªã‚‚ã®ã ã‘ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p><p>ã“ã‚Œã«ã¯ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™</p><ol><li>ã‚ˆã‚Šå°ã•ãªã‚µã‚¤ã‚ºã®ãƒã‚¤ãƒŠãƒª</li><li>è„†å¼±æ€§ã«å¯¾ã—ã¦æ—¢å­˜ã® Go ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ã‚’ä½¿ç”¨ã§ãã‚‹</li><li>çµ„ç¹”ã¨é€£æºã§ãã‚‹å†…éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹</li></ol><h2 id=collector-ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã®è€ƒæ…®äº‹é …ã¯>Collector ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã®è€ƒæ…®äº‹é …ã¯ï¼Ÿ</h2><p>ã•ã¦ã€ã„ãã¤ã‹ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãŒãªã‘ã‚Œã° ğŸ¥· Ninja ã‚¾ãƒ¼ãƒ³ã¨ã¯è¨€ãˆã¾ã›ã‚“</p><ol><li>Go ã®çµŒé¨“ãŒæ¨å¥¨ã•ã‚Œã‚‹ï¼ˆå¿…é ˆã§ã¯ãªã„ãŒï¼‰</li><li>Splunk ã‚µãƒãƒ¼ãƒˆ<strong>ãªã—</strong></li><li>ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã®è²¬ä»»</li></ol><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®‰å®šæ€§ã«å‘ã‘ã¦å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ãŒã€å¤‰æ›´ã«ã‚ˆã£ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå£Šã‚Œãªã„ã¨ã¯é™ã‚‰ãªã„ã“ã¨ã«æ³¨æ„ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚Splunk ã®ãƒãƒ¼ãƒ ã¯ã€ã‚ˆã‚Šé«˜ã„ã‚µãƒãƒ¼ãƒˆã¨å®‰å®šæ€§ã‚’æä¾›ã—ã¦ãŠã‚Šã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ãƒ‹ãƒ¼ã‚ºã«å¿œã˜ãŸã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚</p><h2 id=ninja-ã‚¾ãƒ¼ãƒ³>Ninja ã‚¾ãƒ¼ãƒ³</h2><p>å¿…è¦ãªãƒ„ãƒ¼ãƒ«ãŒã™ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚‰ã€<code>otelcol-builder.yaml</code> ã¨ã„ã†åå‰ã®æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«å¾“ã„ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â””â”€â”€ otelcol-builder.yaml</span></span></code></pre></div><p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãŸã‚‰ã€ã„ãã¤ã‹ã®è¿½åŠ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã¨ã‚‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒªã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ä¾‹ã§ã¯ã€å…¥é–€ç”¨ã®è¨­å®šã«å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ“ãƒ«ãƒ€ãƒ¼ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-ninja</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>A custom build of the Open Telemetry Collector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/ballastextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/zpagesextension  v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/httpforwarder v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/splunkhecexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/signalfxexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/memorylimiterprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/hostmetricsreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/zipkinreceiver v0.80.0</span></span></span></code></pre></div><p>yaml ãƒ•ã‚¡ã‚¤ãƒ«ãŒ <em>ocb</em> ç”¨ã«æ›´æ–°ã•ã‚ŒãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ocb --config<span class=o>=</span>otelcol-builder.yaml</span></span></code></pre></div><p>ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãŒä½œæˆã•ã‚Œã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â”œâ”€â”€ dist
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ components.go
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ components_test.go
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ go.mod
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ go.sum
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ main.go
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ main_others.go
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ main_windows.go
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ otelcol-ninja
</span></span><span class=line><span class=cl>â””â”€â”€ otelcol-builder.yaml</span></span></code></pre></div><h3 id=å‚è€ƒè³‡æ–™>å‚è€ƒè³‡æ–™</h3><ol><li><a href=https://opentelemetry.io/docs/collector/custom-collector/ rel=external>https://opentelemetry.io/docs/collector/custom-collector/</a></li></ol></div></details><hr><h2 id=ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š</h2><p>OpenTelemetry ã¯ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é€šã˜ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦å¤‰æ›´ã§ãã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒã‚ã‚Šã¾ã™ã€‚æä¾›ã•ã‚Œã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</p><div class=tab-panel data-tab-group=R-tabs-02a268f05d9b4d6b47674f99dbfb443f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0eee1c5d316d8292f85ac1969795982a aria-expanded=true data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-02a268f05d9b4d6b47674f99dbfb443f","R-tab-4c2ea9b6feee78084d69f1a6877eb09c")'>
<span class=tab-nav-text>ã‚³ãƒãƒ³ãƒ‰</span>
</button>
<button aria-controls=R-tab-id-09164b7e3e5d518b47bdeaa2a86f221c aria-expanded=false data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-02a268f05d9b4d6b47674f99dbfb443f","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-0eee1c5d316d8292f85ac1969795982a data-tab-item=R-tab-4c2ea9b6feee78084d69f1a6877eb09c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div><div id=R-tab-id-09164b7e3e5d518b47bdeaa2a86f221c data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div><p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼OpenTelemetry Collector ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«æˆåŠŸã—ã¾ã—ãŸã€‚OTel Ninja ã¸ã®é“ã‚’é †èª¿ã«æ­©ã‚“ã§ã„ã¾ã™ã€‚ã—ã‹ã—ã¾ãšã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ OpenTelemetry Collector ã®ç•°ãªã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunk ã¯ç‹¬è‡ªã®ã€å®Œå…¨ã«ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸ OpenTelemetry Collector ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€<a href=https://github.com/signalfx/splunk-otel-collector rel=external><strong>Splunk GitHub ãƒªãƒã‚¸ãƒˆãƒª</strong></a>ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€Splunk Observability Cloud ã®ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹ã ã‘ã®ç°¡å˜ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã€OpenTelemetry Collector Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯åˆ©ç”¨ã§ããªã„å¤šãã®è¿½åŠ æ©Ÿèƒ½ã¨æ‹¡å¼µãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>Splunk Distribution of the OpenTelemetry Collector ã¯æœ¬ç•ªç’°å¢ƒã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿ã§ã™ã€‚å¤§å¤šæ•°ã®ãŠå®¢æ§˜ãŒæœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</li><li>ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ãŠå®¢æ§˜ã¯ã€SLA å†…ã§ Splunk ã®å…¬å¼ã‚µãƒãƒ¼ãƒˆã‹ã‚‰ç›´æ¥ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li><li>ãŠå®¢æ§˜ã¯ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ãƒˆãƒ¬ãƒ¼ã‚¹åé›†ã®ã‚³ã‚¢è¨­å®šä½“é¨“ã«å¯¾ã™ã‚‹å°†æ¥ã®ç ´å£Šçš„å¤‰æ›´ã‚’å¿ƒé…ã™ã‚‹ã“ã¨ãªãã€Splunk Distribution of the OpenTelemetry Collector ã‚’ä½¿ç”¨ã¾ãŸã¯ç§»è¡Œã§ãã¾ã™ï¼ˆOpenTelemetry ãƒ­ã‚°åé›†ã®è¨­å®šã¯ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã™ï¼‰ã€‚Collector ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«ã¯ç ´å£Šçš„å¤‰æ›´ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</li></ul></div></details><p>ã“ã‚Œã‹ã‚‰è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’èª¬æ˜ã—ã€ãƒ›ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Splunk Observability Cloud ã«é€ä¿¡ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã„ãã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><p>OpenTelemetry Collector ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã®ã§ã€OpenTelemetry Collector ã®æ‹¡å¼µæ©Ÿèƒ½ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚æ‹¡å¼µæ©Ÿèƒ½ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€ä¸»ã«ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’ä¼´ã‚ãªã„ã‚¿ã‚¹ã‚¯ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚æ‹¡å¼µæ©Ÿèƒ½ã®ä¾‹ã¨ã—ã¦ã¯ã€ãƒ˜ãƒ«ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã€ãƒ‡ãƒ¼ã‚¿è»¢é€ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;: &#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style E fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>2. Extensionsã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=health-check>Health Check</h2><p>æ‹¡å¼µæ©Ÿèƒ½ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã§å‚ç…§ã—ãŸåŒã˜ <code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã—ã¾ã™ã€‚<code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦æ‹¡å¼µæ©Ÿèƒ½ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚<strong>pprof</strong> ã¨ <strong>zpages</strong> æ‹¡å¼µæ©Ÿèƒ½ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã«æ—¢ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€Collector ã®ãƒ˜ãƒ«ã‚¹çŠ¶æ…‹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã€ã™ã¹ã¦ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ãƒãƒ¼ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚ˆã†ã« <strong>health_check</strong> æ‹¡å¼µæ©Ÿèƒ½ã®ã¿ã‚’æ›´æ–°ã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-5f08b95e150975117470ccd6becf7ed2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e888d0b1e318ea0b3cf187b7f08e705e aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5f08b95e150975117470ccd6becf7ed2","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-e888d0b1e318ea0b3cf187b7f08e705e data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-a425338a6e7085c8984f8a720ac75131><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8b6737d05a383db60418f882189ceae3 aria-expanded=true data-tab-item=R-tab-152f0ce564aa5e1309a89e848db53185 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a425338a6e7085c8984f8a720ac75131","R-tab-152f0ce564aa5e1309a89e848db53185")'>
<span class=tab-nav-text>Extensions Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-8b6737d05a383db60418f882189ceae3 data-tab-item=R-tab-152f0ce564aa5e1309a89e848db53185 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span></span></span></code></pre></div></div></div></div></div><p>Collector ã‚’èµ·å‹•ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-d4fb9c10fdcbdbb70bc8dd2a2032c04a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b7466a599e7e7b38606cac0bdfbde946 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d4fb9c10fdcbdbb70bc8dd2a2032c04a","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-b7466a599e7e7b38606cac0bdfbde946 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><p>ã“ã®æ‹¡å¼µæ©Ÿèƒ½ã«ã‚ˆã‚Šã€OpenTelemetry Collector ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ãƒ—ãƒ­ãƒ¼ãƒ–ã§ãã‚‹ HTTP URL ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚ã“ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã€Kubernetes ã§ liveness ãƒ—ãƒ­ãƒ¼ãƒ–ã‚„ readiness ãƒ—ãƒ­ãƒ¼ãƒ–ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚<code>curl</code> ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦è©³ã—ãçŸ¥ã‚‹ã«ã¯ã€<a href=https://curl.se/docs/manpage.html rel=external>curl man page</a> ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><p>æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹ãã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã« SSH æ¥ç¶šã—ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-b4f5c6453e77a16963578e452590054c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-615bb1456001cc204d6c867560886fda aria-expanded=true data-tab-item=R-tab-e2d1c201ce0c8c47d452167742abc308 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b4f5c6453e77a16963578e452590054c","R-tab-e2d1c201ce0c8c47d452167742abc308")'>
<span class=tab-nav-text>curl Command</span>
</button>
<button aria-controls=R-tab-id-43c420ee03923962540c555985ed0653 aria-expanded=false data-tab-item=R-tab-6e431ae9119cd9664129d3c3aafa7ce3 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b4f5c6453e77a16963578e452590054c","R-tab-6e431ae9119cd9664129d3c3aafa7ce3")'>
<span class=tab-nav-text>curl Output</span></button></div><div class=tab-content-container><div id=R-tab-id-615bb1456001cc204d6c867560886fda data-tab-item=R-tab-e2d1c201ce0c8c47d452167742abc308 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:13133</span></span></code></pre></div></div></div><div id=R-tab-id-43c420ee03923962540c555985ed0653 data-tab-item=R-tab-6e431ae9119cd9664129d3c3aafa7ce3 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;status&#34;:&#34;Server available&#34;,&#34;upSince&#34;:&#34;2024-10-07T11:00:08.004685295+01:00&#34;,&#34;uptime&#34;:&#34;12.56420005s&#34;}</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=performance-profiler>Performance Profiler</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/extension/pprofextension/README.md rel=external><strong>Performance Profiler</strong></a> æ‹¡å¼µæ©Ÿèƒ½ã¯ã€golang ã® net/http/pprof ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€é–‹ç™ºè€…ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åé›†ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã®å•é¡Œã‚’èª¿æŸ»ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚<strong>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’æ‰±ã„ã¾ã›ã‚“</strong>ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-extensions>OpenTelemetry Collector Extensions</h1><h2 id=zpages>zPages</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/extension/zpagesextension/README.md rel=external><strong>zPages</strong></a> ã¯ã€å¤–éƒ¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®ä»£ã‚ã‚Šã«ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã§ä½¿ç”¨ã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚çµ„ã¿è¾¼ã¾ã‚Œã‚‹ã¨ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹æƒ…å ±ã‚’åé›†ãƒ»é›†ç´„ã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸã¨ãã«ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã§ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã—ã¾ã™ã€‚zPages ã¯ã€Collector ãŒæœŸå¾…ã©ãŠã‚Šã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®éå¸¸ã«ä¾¿åˆ©ãªè¨ºæ–­æ©Ÿèƒ½ã§ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-601b14538227c428d9e0bc058f25b7cc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-07da4be9dc5e80018bb7c878b82982b1 aria-expanded=true data-tab-item=R-tab-552e9e5a9146ffc544b495bfe6a66c36 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-601b14538227c428d9e0bc058f25b7cc","R-tab-552e9e5a9146ffc544b495bfe6a66c36")'>
<span class=tab-nav-text>ServiceZ</span>
</button>
<button aria-controls=R-tab-id-25ca113347ede8dcdf777be50fc49e4f aria-expanded=false data-tab-item=R-tab-41646adfc5c13ab129b70c2240c1db3d class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-601b14538227c428d9e0bc058f25b7cc","R-tab-41646adfc5c13ab129b70c2240c1db3d")'>
<span class=tab-nav-text>PipelineZ</span>
</button>
<button aria-controls=R-tab-id-9ab4dfb4df1c1ebfd1286ee15603947f aria-expanded=false data-tab-item=R-tab-3fbf781f7e065ca41160f534cc231df0 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-601b14538227c428d9e0bc058f25b7cc","R-tab-3fbf781f7e065ca41160f534cc231df0")'>
<span class=tab-nav-text>ExtensionZ</span></button></div><div class=tab-content-container><div id=R-tab-id-07da4be9dc5e80018bb7c878b82982b1 data-tab-item=R-tab-552e9e5a9146ffc544b495bfe6a66c36 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>ServiceZ</strong> ã¯ã€Collector ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã¨ã€pipelinezã€extensionzã€featurez ã®å„ zPages ã¸ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¸ã«ã¯ã€ãƒ“ãƒ«ãƒ‰æƒ…å ±ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æƒ…å ±ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><p>ã‚µãƒ³ãƒ—ãƒ« URL: <a href=http://localhost:55679/debug/servicez rel=external><strong>http://localhost:55679/debug/servicez</strong></a>ï¼ˆ<code>localhost</code> ã‚’ã”è‡ªèº«ã®ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰ã€‚</p><p><a href=#R-image-dd86427847db648fe6322e03bceb13d7 class=lightbox-link><img alt=ServiceZ class="lazy lightbox figure-image" loading=lazy src=../../images/servicez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-dd86427847db648fe6322e03bceb13d7><img alt=ServiceZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/servicez.png></a></p></div></div><div id=R-tab-id-25ca113347ede8dcdf777be50fc49e4f data-tab-item=R-tab-41646adfc5c13ab129b70c2240c1db3d class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>PipelineZ</strong> ã¯ã€Collector ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«é–¢ã™ã‚‹æ´å¯Ÿã‚’æä¾›ã—ã¾ã™ã€‚ã‚¿ã‚¤ãƒ—ã€ãƒ‡ãƒ¼ã‚¿ãŒå¤‰æ›´ã•ã‚Œã‚‹ã‹ã©ã†ã‹ã®æƒ…å ±ã‚’ç¢ºèªã§ãã€å„ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®æƒ…å ±ã‚‚ç¢ºèªã§ãã¾ã™ã€‚</p><p>ã‚µãƒ³ãƒ—ãƒ« URL: <a href=http://localhost:55679/debug/pipelinez rel=external><strong>http://localhost:55679/debug/pipelinez</strong></a>ï¼ˆ<code>localhost</code> ã‚’ã”è‡ªèº«ã®ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰ã€‚</p><p><a href=#R-image-4e4643bfbc5bc1d0313154b4c795ab3b class=lightbox-link><img alt=PipelineZ class="lazy lightbox figure-image" loading=lazy src=../../images/pipelinez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4e4643bfbc5bc1d0313154b4c795ab3b><img alt=PipelineZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/pipelinez.png></a></p></div></div><div id=R-tab-id-9ab4dfb4df1c1ebfd1286ee15603947f data-tab-item=R-tab-3fbf781f7e065ca41160f534cc231df0 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>ExtensionZ</strong> ã¯ã€Collector ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ‹¡å¼µæ©Ÿèƒ½ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p><p>ã‚µãƒ³ãƒ—ãƒ« URL: <a href=http://localhost:55679/debug/extensionz rel=external><strong>http://localhost:55679/debug/extensionz</strong></a>ï¼ˆ<code>localhost</code> ã‚’ã”è‡ªèº«ã®ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰ã€‚</p><p><a href=#R-image-fb007a4f94a04074905c23551cc99637 class=lightbox-link><img alt=ExtensionZ class="lazy lightbox figure-image" loading=lazy src=../../images/extensionz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fb007a4f94a04074905c23551cc99637><img alt=ExtensionZ class="lazy lightbox lightbox-image" loading=lazy src=../../images/extensionz.png></a></p></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> storage æ‹¡å¼µæ©Ÿèƒ½ã§ãƒ‡ãƒ¼ã‚¿ã®è€ä¹…æ€§ã‚’å‘ä¸Šã•ã›ã‚‹</span></span></summary><div class=box-content><p>ã“ã®ãŸã‚ã«ã¯ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã« <code>file_storage</code> æ‹¡å¼µæ©Ÿèƒ½ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€<code>otelcol-contrib components</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã€ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™</p><div class=tab-panel data-tab-group=R-tabs-c75e757b11f99b6fe353beb035885a6e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0a93bdf29e4455b60408b0fbf4039472 aria-expanded=true data-tab-item=R-tab-293717097f4a71a9db50f219169437b8 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c75e757b11f99b6fe353beb035885a6e","R-tab-293717097f4a71a9db50f219169437b8")'>
<span class=tab-nav-text>Truncated Output</span>
</button>
<button aria-controls=R-tab-id-a9a587bbc2f16835acfc9e78a4c8f393 aria-expanded=false data-tab-item=R-tab-6d20673ef09b9c1f8566526724ee50d7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c75e757b11f99b6fe353beb035885a6e","R-tab-6d20673ef09b9c1f8566526724ee50d7")'>
<span class=tab-nav-text>Full Output</span></button></div><div class=tab-content-container><div id=R-tab-id-0a93bdf29e4455b60408b0fbf4039472 data-tab-item=R-tab-293717097f4a71a9db50f219169437b8 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>file_storage</span></span></span></code></pre></div></div></div><div id=R-tab-id-a9a587bbc2f16835acfc9e78a4c8f393 data-tab-item=R-tab-6d20673ef09b9c1f8566526724ee50d7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>buildinfo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>OpenTelemetry Collector Contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus_simple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>receiver_creator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodbatlas</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>vcenter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>snmp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>expvar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jmx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>udplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafkametrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memcached</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowseventlog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsecscontainermetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>iis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nsxt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>aerospike</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>httpcheck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sobjects</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>hostmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>statsd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudfoundry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>collectd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>couchdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kubeletstats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>journald</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>riak</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>active_directory_ds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlquery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowsperfcounters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>flinkmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>podman_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>wavefront</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_events</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>rabbitmq</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlserver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>solace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tcplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscontainerinsightreceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsfirehose</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bigip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filelog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudspanner</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudflare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>docker_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azureeventhub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>fluentforward</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlpjsonfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>syslog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cumulativetodelta</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbyattrs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbytrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sattributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>experimental_metricsgeneration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>metricstransform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>routing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>deltatorate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>spanmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>span</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redaction</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>servicegraph</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>transform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>probabilistic_sampler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tail_sampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>f5cloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mezmo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>dynatrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logging</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuredataexplorer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuremonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>instana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loadbalancing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sentry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tanzuobservability</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>alibabacloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>clickhouse</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheusremotewrite</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatchlogs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger_thrift</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logzio</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sumologic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlemanagedprometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awskinesis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>coralogix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logicmonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tencentcloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsemf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zpages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bearertokenauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oidc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>host_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sigv4auth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file_storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_ballast</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>health_check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oauth2client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsproxy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>http_forwarder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaegerremotesampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pprof</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>asapclient</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>basicauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>headers_setter</span></span></span></code></pre></div></div></div></div></div><p>ã“ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ãŒè¨­å®šã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã§ããªã„å ´åˆã«ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ãŒãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>æ‹¡å¼µæ©Ÿèƒ½ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚ã‚‹ã‚ˆã†ã«è¨­å®šã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšã€/tmp/otel-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€èª­ã¿æ›¸ãæ¨©é™ã‚’ä»˜ä¸ã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file_storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>compaction</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_start</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_rebound</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_needed_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_trigger_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages, file_storage]</span></span></span></code></pre></div><h2 id=ãªãœãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹ã®ã‹>ãªãœãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹ã®ã‹ï¼Ÿ</h2><p>ã“ã‚Œã«ã‚ˆã‚Šã€Collector ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸­æ–­ï¼ˆã•ã‚‰ã«ã¯ Collector ã®å†èµ·å‹•ï¼‰ã‚’ä¹—ã‚Šè¶Šãˆã¦ã€ãƒ‡ãƒ¼ã‚¿ãŒã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«é€ä¿¡ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã§ãã¾ã™ã€‚</p><h2 id=ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹éš›ã®è€ƒæ…®äº‹é …>ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹éš›ã®è€ƒæ…®äº‹é …</h2><p>ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id=å‚è€ƒè³‡æ–™>å‚è€ƒè³‡æ–™</h3><ol><li><a href=https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583 rel=external>https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage rel=external>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage</a></li></ol></div></details><hr><h2 id=è¨­å®šã®ç¢ºèª>è¨­å®šã®ç¢ºèª</h2><p>æ‹¡å¼µæ©Ÿèƒ½ã«ã¤ã„ã¦å­¦ã‚“ã ã®ã§ã€è¨­å®šã®å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ç¢ºèªã™ã‚‹</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-d173ba7ceb142eeff74d5b91cbd8fe5f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-35f17988daffd1232ae3e8fd51f2f847 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d173ba7ceb142eeff74d5b91cbd8fe5f","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-35f17988daffd1232ae3e8fd51f2f847 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=hl><span class=lnt> 5
</span></span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>æ‹¡å¼µæ©Ÿèƒ½ã«ã¤ã„ã¦ç¢ºèªã—ãŸã®ã§ã€æ¬¡ã¯ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³éƒ¨åˆ†ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€Collector å†…ã§ãƒ‡ãƒ¼ã‚¿ãŒè¾¿ã‚‹çµŒè·¯ã‚’å®šç¾©ã—ã€å—ä¿¡ã‹ã‚‰å§‹ã¾ã‚Šã€ã•ã‚‰ãªã‚‹å‡¦ç†ã‚„å¤‰æ›´ã‚’çµŒã¦ã€æœ€çµ‚çš„ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’é€šã˜ã¦ Collector ã‚’å‡ºã¦ã„ãã¾ã™ã€‚</p><p>OpenTelemetry Collector ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€<strong>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</strong>ã€<strong>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</strong>ã€<strong>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</strong>ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãšã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã® Receiver ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¸ã‚ˆã†ã“ãï¼ã“ã“ã¯ OpenTelemetry Collector ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å‡ºç™ºç‚¹ã§ã™ã€‚æ—©é€Ÿå§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p><p>Receiver ã¯ã€ãƒ—ãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã¾ãŸã¯ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚’ Collector ã«å–ã‚Šè¾¼ã‚€æ–¹æ³•ã§ã™ã€‚Receiver ã¯1ã¤ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã§ãã¾ã™ã€‚ä¸€èˆ¬çš„ã«ã€Receiver ã¯æŒ‡å®šã•ã‚ŒãŸå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€å†…éƒ¨å½¢å¼ã«å¤‰æ›ã—ã¦ã‹ã‚‰ã€è©²å½“ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å®šç¾©ã•ã‚ŒãŸ Processor ã¨ Exporter ã«æ¸¡ã—ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style M fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>3. Receiversã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=host-metrics-receiver>Host Metrics Receiver</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/hostmetricsreceiver/README.md rel=external><strong>Host Metrics Receiver</strong></a> ã¯ã€ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ãŸãƒ›ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€Collector ãŒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹å ´åˆã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ãŠã‚Šã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã‚‚ãã®æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã™ã€‚</p><p><code>/etc/otel-contrib/config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã€<strong>hostmetrics</strong> Receiver ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã® YAML ã‚’ <strong>receivers</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«æŒ¿å…¥ã—ã¦ãã ã•ã„ã€‚ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯ã‚¹ãƒšãƒ¼ã‚¹2ã¤ã§è¡Œã„ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div><div class=tab-panel data-tab-group=R-tabs-d615e2e30f95faa44479173fadd06b54><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-0012a00ddc62207754c3f7305ef593e1 aria-expanded=true data-tab-item=R-tab-d4d9df34006b2c5d7545d2f1f4e741e2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d615e2e30f95faa44479173fadd06b54","R-tab-d4d9df34006b2c5d7545d2f1f4e741e2")'>
<span class=tab-nav-text>Host Metrics Receiver Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-0012a00ddc62207754c3f7305ef593e1 data-tab-item=R-tab-d4d9df34006b2c5d7545d2f1f4e741e2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=prometheus-receiver>Prometheus Receiver</h2><p><strong>prometheus</strong> ã¨ã„ã†åˆ¥ã® Receiver ãŒã‚ã‚‹ã“ã¨ã«ã‚‚æ°—ã¥ãã§ã—ã‚‡ã†ã€‚<a href=https://prometheus.io/docs/introduction/overview/ rel=external><strong>Prometheus</strong></a> ã¯ã€OpenTelemetry Collector ãŒä½¿ç”¨ã™ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚ã“ã® Receiver ã¯ã€OpenTelemetry Collector è‡ªä½“ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€Collector ã®å¥å…¨æ€§ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</p><p><code>prometheus</code> Receiver ã‚’å¤‰æ›´ã—ã¦ã€Collector è‡ªä½“ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¢ºã«ã—ã¾ã—ã‚‡ã†ã€‚Receiver ã®åå‰ã‚’ <code>prometheus</code> ã‹ã‚‰ <code>prometheus/internal</code> ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãã® Receiver ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹ãŒã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¦ãã ã•ã„</p><div class=tab-panel data-tab-group=R-tabs-dee47ecaef797cd6fba270c16297d44a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7f3a6999cb5051cb98d688c037c34213 aria-expanded=true data-tab-item=R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-dee47ecaef797cd6fba270c16297d44a","R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2")'>
<span class=tab-nav-text>Prometheus Receiver Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-7f3a6999cb5051cb98d688c037c34213 data-tab-item=R-tab-9f44d03ea283a5e0ba757b4cfcb8e9c2 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class="line hl"><span class=cl><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span></span></span></code></pre></div></div></div></div></div><h2 id=ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¾‹---prometheus-ãƒ¡ãƒˆãƒªã‚¯ã‚¹>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¾‹ - Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2><p>ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯ã€Prometheus internal Receiver ãŒ OpenTelemetry Collector ã‹ã‚‰åé›†ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ä¸€éƒ¨ã‚’è¡¨ç¤ºã™ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¾‹ã§ã™ã€‚ã“ã“ã§ã¯ã€å—ã‘å…¥ã‚Œã‚‰ã‚ŒãŸã‚¹ãƒ‘ãƒ³ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã¨é€ä¿¡ã•ã‚ŒãŸã‚‚ã®ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯ã€Splunk Observability Cloud ã®æ¨™æº–ï¼ˆOOTBï¼‰ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€Splunk OpenTelemetry Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ³ã‚’ç°¡å˜ã«ç›£è¦–ã§ãã¾ã™ã€‚</p></div></details><p><a href=#R-image-688376fdc2a1a6db1abf2ca20ac469f3 class=lightbox-link><img alt=otel-charts class="lazy lightbox figure-image" loading=lazy src=../../images/otel-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-688376fdc2a1a6db1abf2ca20ac469f3><img alt=otel-charts class="lazy lightbox lightbox-image" loading=lazy src=../../images/otel-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-receivers>OpenTelemetry Collector Receivers</h1><h2 id=ãã®ä»–ã®-receiver>ãã®ä»–ã® Receiver</h2><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã«ã¯ã€<strong>otlp</strong>ã€<strong>opencensus</strong>ã€<strong>jaeger</strong>ã€<strong>zipkin</strong> ãªã©ã®ä»–ã® Receiver ãŒã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã§ã—ã‚‡ã†ã€‚ã“ã‚Œã‚‰ã¯ä»–ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚‰ã® Receiver ã«ã¤ã„ã¦ã¯å–ã‚Šä¸Šã’ã¾ã›ã‚“ã®ã§ã€ãã®ã¾ã¾ã«ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Receiver ã‚’å‹•çš„ã«ä½œæˆã™ã‚‹</span></span></summary><div class=box-content><p>Docker ã‚³ãƒ³ãƒ†ãƒŠã€Kubernetes Podã€SSH ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã©ã®çŸ­æœŸé–“ã®ã‚¿ã‚¹ã‚¯ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã«ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator rel=external>receiver creator</a> ã¨ <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/observer rel=external>observer extensions</a> ã‚’ä½¿ç”¨ã—ã¦ã€ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã™ã‚‹ã¨ãã«æ–°ã—ã„ Receiver ã‚’ä½œæˆã§ãã¾ã™ã€‚</p><h2 id=ä½•ãŒå¿…è¦ã§ã™ã‹>ä½•ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</h2><p>receiver creator ã¨ãã‚Œã«é–¢é€£ã™ã‚‹ observer extension ã‚’ä½¿ã„å§‹ã‚ã‚‹ã«ã¯ã€ãã‚Œã‚‰ãŒ Collector ã®ãƒ“ãƒ«ãƒ‰ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>è©³ç´°ã¯ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/1-installation/index.html>installation</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><h2 id=è€ƒæ…®ã™ã¹ãäº‹é …>è€ƒæ…®ã™ã¹ãäº‹é …</h2><p>ä¸€éƒ¨ã®çŸ­æœŸé–“ã®ã‚¿ã‚¹ã‚¯ã§ã¯ã€<em>username</em> ã‚„ <em>password</em> ãªã©ã®è¿½åŠ è¨­å®šãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã®å€¤ã¯ <a href=https://opentelemetry.io/docs/collector/configuration/#configuration-environment-variables rel=external>ç’°å¢ƒå¤‰æ•°</a> ã§å‚ç…§ã™ã‚‹ã‹ã€
<code>${file:./path/to/database/password}</code> ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒ å±•é–‹æ§‹æ–‡ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
ã“ã®æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹å ´åˆã¯ã€çµ„ç¹”ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«å¾“ã£ã¦ãã ã•ã„ã€‚</p><h2 id=ninja-ã‚¾ãƒ¼ãƒ³>Ninja ã‚¾ãƒ¼ãƒ³</h2><p>ã“ã® Ninja ã‚¾ãƒ¼ãƒ³ã«å¿…è¦ãªã“ã¨ã¯2ã¤ã ã‘ã§ã™</p><ol><li>ãƒ“ãƒ«ãƒ€ãƒ¼ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã« receiver creator ã¨ observer extension ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</li><li>æ¤œå‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ãƒãƒƒãƒãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹è¨­å®šã‚’ä½œæˆã—ã¾ã™ã€‚</li></ol><p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã•ã‚ŒãŸè¨­å®šã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>host_observer]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;port&#34; &amp;&amp; port == 6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${env:HOST_REDIS_PASSWORD}</span></span></span></code></pre></div><p>ãã®ä»–ã®ä¾‹ã«ã¤ã„ã¦ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator#examples rel=external>receiver creator ã®ä¾‹</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p></div></details><hr><h2 id=è¨­å®šã®ç¢ºèª>è¨­å®šã®ç¢ºèª</h2><p>Receiver ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã®ã§ã€è¨­å®šã®å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ç¢ºèªã™ã‚‹</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-d94ed0141d08ba199c31e7788ac5ecda><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-20764bbb81d8674b8df2fbf71f4c371c aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d94ed0141d08ba199c31e7788ac5ecda","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-20764bbb81d8674b8df2fbf71f4c371c data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=hl><span class=lnt>13
</span></span><span class=hl><span class=lnt>14
</span></span><span class=hl><span class=lnt>15
</span></span><span class=hl><span class=lnt>16
</span></span><span class=hl><span class=lnt>17
</span></span><span class=hl><span class=lnt>18
</span></span><span class=hl><span class=lnt>19
</span></span><span class=hl><span class=lnt>20
</span></span><span class=hl><span class=lnt>21
</span></span><span class=hl><span class=lnt>22
</span></span><span class=hl><span class=lnt>23
</span></span><span class=hl><span class=lnt>24
</span></span><span class=hl><span class=lnt>25
</span></span><span class=hl><span class=lnt>26
</span></span><span class=hl><span class=lnt>27
</span></span><span class=hl><span class=lnt>28
</span></span><span class=hl><span class=lnt>29
</span></span><span class=hl><span class=lnt>30
</span></span><span class=hl><span class=lnt>31
</span></span><span class=hl><span class=lnt>32
</span></span><span class=hl><span class=lnt>33
</span></span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=hl><span class=lnt>45
</span></span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>Receiver ã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ãŒ OpenTelemetry Collector ã«ã©ã®ã‚ˆã†ã«å–ã‚Šè¾¼ã¾ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚æ¬¡ã¯ã€Collector ãŒå—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
è­¦å‘Š</summary><div class=box-content><p><code>/etc/otelcol-contrib/config.yaml</code> ã¯ã¾ã å®Œæˆã—ã¦ã„ãªã„ãŸã‚ã€ã“ã®æ™‚ç‚¹ã§ã¯ Collector ã‚’å†èµ·å‹•<strong>ã—ãªã„ã§ãã ã•ã„</strong>ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/README.md rel=external><strong>Processors</strong></a> ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã—ã¦ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã¾ã§ã®é–“ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚Processors ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ãŒã€ä¸€éƒ¨ã¯æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚OpenTelemetry contrib Collector ã«ã¯ <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor rel=external><strong>å¤šæ•°ã® Processors</strong></a> ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Processors fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>4. Processorsã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=batch-processor>Batch Processor</h2><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€<strong>batch</strong> processor ã®ã¿ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã® processor ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«ãƒãƒƒãƒå‡¦ç†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€exporter ã¸ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‘¼ã³å‡ºã—ã®å›æ•°ã‚’æ¸›ã‚‰ã™ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€Collector ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ä»¥ä¸‹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ç¶™æ‰¿ã—ã¾ã™</p><ul><li><code>send_batch_size</code>ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 8192ï¼‰ï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«é–¢ä¿‚ãªããƒãƒƒãƒãŒé€ä¿¡ã•ã‚Œã‚‹ã‚¹ãƒ‘ãƒ³ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã€ã¾ãŸã¯ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ•°ã€‚send_batch_size ã¯ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã—ã€ãƒãƒƒãƒã®ã‚µã‚¤ã‚ºã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ¬¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€ä¿¡ã•ã‚Œã‚‹ãƒãƒƒãƒã‚µã‚¤ã‚ºã®åˆ¶é™ã‚’å¼·åˆ¶ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€send_batch_max_size ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li><li><code>timeout</code>ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 200msï¼‰ï¼šã‚µã‚¤ã‚ºã«é–¢ä¿‚ãªããƒãƒƒãƒãŒé€ä¿¡ã•ã‚Œã‚‹ã¾ã§ã®æ™‚é–“ã€‚ã‚¼ãƒ­ã«è¨­å®šã™ã‚‹ã¨ã€send_batch_max_size ã®ã¿ã«å¾“ã£ã¦ãƒ‡ãƒ¼ã‚¿ãŒå³åº§ã«é€ä¿¡ã•ã‚Œã‚‹ãŸã‚ã€send_batch_size ã¯ç„¡è¦–ã•ã‚Œã¾ã™ã€‚</li><li><code>send_batch_max_size</code>ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 0ï¼‰ï¼šãƒãƒƒãƒã‚µã‚¤ã‚ºã®ä¸Šé™ã€‚0 ã¯ãƒãƒƒãƒã‚µã‚¤ã‚ºã«ä¸Šé™ãŒãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€å¤§ããªãƒãƒƒãƒã‚’å°ã•ãªå˜ä½ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚send_batch_size ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</li></ul><p>Batch processor ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/batchprocessor/README.md rel=external><strong>Batch Processor ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</strong></a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=resource-detection-processor>Resource Detection Processor</h2><p><strong>resourcedetection</strong> processor ã¯ã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹æƒ…å ±ã‚’æ¤œå‡ºã—ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹å€¤ã«ã“ã®æƒ…å ±ã‚’è¿½åŠ ã¾ãŸã¯ä¸Šæ›¸ãã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</p><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ›ã‚¹ãƒˆåã¯å¯èƒ½ã§ã‚ã‚Œã° FQDN ã«è¨­å®šã•ã‚Œã€ãã‚Œä»¥å¤–ã®å ´åˆã¯ OS ãŒæä¾›ã™ã‚‹ãƒ›ã‚¹ãƒˆåãŒãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ <code>hostname_sources</code> è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›´ã§ãã¾ã™ã€‚FQDN ã‚’å–å¾—ã›ãšã« OS ãŒæä¾›ã™ã‚‹ãƒ›ã‚¹ãƒˆåã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€<code>hostname_sources</code> ã‚’ <code>os</code> ã«è¨­å®šã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-b80c5744875d88f980a10efb8657564a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a6eb7bbde508bf6a0f71a47d0ac27680 aria-expanded=true data-tab-item=R-tab-b892811c417d9a038325e7378a05c132 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b80c5744875d88f980a10efb8657564a","R-tab-b892811c417d9a038325e7378a05c132")'>
<span class=tab-nav-text>System Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-a6eb7bbde508bf6a0f71a47d0ac27680 data-tab-item=R-tab-b892811c417d9a038325e7378a05c132 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span></span></span></code></pre></div></div></div></div></div><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ AWS/EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å ´åˆã€EC2 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ API ã‹ã‚‰ä»¥ä¸‹ã®ã‚¿ã‚°ã‚’åé›†ã§ãã¾ã™ï¼ˆã“ã‚Œã¯ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ï¼‰ã€‚</p><ul><li><code>cloud.provider ("aws")</code></li><li><code>cloud.platform ("aws_ec2")</code></li><li><code>cloud.account.id</code></li><li><code>cloud.region</code></li><li><code>cloud.availability_zone</code></li><li><code>host.id</code></li><li><code>host.image.id</code></li><li><code>host.name</code></li><li><code>host.type</code></li></ul><p>ã“ã‚Œã‚‰ã®ã‚¿ã‚°ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¿½åŠ ã™ã‚‹ãŸã‚ã«ã€åˆ¥ã® processor ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-13756b948403c79a25a1cf0acd913c2c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-79e2bd304ca55a19aad230dde06891d7 aria-expanded=true data-tab-item=R-tab-cfb68818ad6985dd73e8c42294095dee class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-13756b948403c79a25a1cf0acd913c2c","R-tab-cfb68818ad6985dd73e8c42294095dee")'>
<span class=tab-nav-text>EC2 Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-79e2bd304ca55a19aad230dde06891d7 data-tab-item=R-tab-cfb68818ad6985dd73e8c42294095dee class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-processors>OpenTelemetry Collector Processors</h1><h2 id=attributes-processor>Attributes Processor</h2><p>attributes processor ã¯ã€ã‚¹ãƒ‘ãƒ³ã€ãƒ­ã‚°ã€ã¾ãŸã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å±æ€§ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã“ã® processor ã¯ã€æŒ‡å®šã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å«ã‚ã‚‹ã‹é™¤å¤–ã™ã‚‹ã‹ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŠã‚ˆã³ãƒãƒƒãƒãƒ³ã‚°ã™ã‚‹æ©Ÿèƒ½ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p>è¨­å®šã§æŒ‡å®šã•ã‚ŒãŸé †åºã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ul><li><code>insert</code>ï¼šã‚­ãƒ¼ãŒã¾ã å­˜åœ¨ã—ãªã„å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«æ–°ã—ã„å±æ€§ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚</li><li><code>update</code>ï¼šã‚­ãƒ¼ãŒå­˜åœ¨ã™ã‚‹å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å±æ€§ã‚’æ›´æ–°ã—ã¾ã™ã€‚</li><li><code>upsert</code>ï¼šinsert ã¾ãŸã¯ update ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã‚­ãƒ¼ãŒã¾ã å­˜åœ¨ã—ãªã„å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«æ–°ã—ã„å±æ€§ã‚’æŒ¿å…¥ã—ã€ã‚­ãƒ¼ãŒå­˜åœ¨ã™ã‚‹å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å±æ€§ã‚’æ›´æ–°ã—ã¾ã™ã€‚</li><li><code>delete</code>ï¼šå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å±æ€§ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</li><li><code>hash</code>ï¼šæ—¢å­˜ã®å±æ€§å€¤ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆSHA1ï¼‰ã—ã¾ã™ã€‚</li><li><code>extract</code>ï¼šæ­£è¦è¡¨ç¾ãƒ«ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦å…¥åŠ›ã‚­ãƒ¼ã‹ã‚‰ãƒ«ãƒ¼ãƒ«ã§æŒ‡å®šã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚­ãƒ¼ã«å€¤ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚­ãƒ¼ãŒã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚</li></ul><p>ã™ã¹ã¦ã®ãƒ›ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã« <code>participant.name</code> ã¨ã„ã†æ–°ã—ã„å±æ€§ã‚’ <code>insert</code> ã™ã‚‹ attributes processor ã‚’ä½œæˆã—ã¾ã™ã€‚å€¤ã«ã¯ã‚ãªãŸã®åå‰ï¼ˆä¾‹ï¼š<code>marge_simpson</code>ï¼‰ã‚’è¨­å®šã—ã¾ã™ã€‚</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
è­¦å‘Š</summary><div class=box-content><p><code>INSERT_YOUR_NAME_HERE</code> ã‚’å¿…ãšã‚ãªãŸã®åå‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚ã¾ãŸã€åå‰ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’<strong>ä½¿ç”¨ã—ãªã„</strong>ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚</p></div></details><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å¾ŒåŠã§ã€Splunk Observability Cloud ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ã“ã®å±æ€§ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-532323a3da06ad5ae2467d7e42006403><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-462abfb9d1765d7c24d2ad924975f582 aria-expanded=true data-tab-item=R-tab-99b4d39895514cfa032ce15a26ea7099 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-532323a3da06ad5ae2467d7e42006403","R-tab-99b4d39895514cfa032ce15a26ea7099")'>
<span class=tab-nav-text>Attributes Processor Configuration</span></button></div><div class=tab-content-container><div id=R-tab-id-462abfb9d1765d7c24d2ad924975f582 data-tab-item=R-tab-99b4d39895514cfa032ce15a26ea7099 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span></span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> connector ã‚’ä½¿ç”¨ã—ã¦å†…éƒ¨ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’å–å¾—ã™ã‚‹</span></span></summary><div class=box-content><p>Collector ã¸ã®æœ€æ–°ã®è¿½åŠ æ©Ÿèƒ½ã®1ã¤ã¯ <a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external><strong>connector</strong></a> ã®æ¦‚å¿µã§ã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å‡ºåŠ›ã‚’åˆ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å…¥åŠ›ã«æ¥ç¶šã§ãã¾ã™ã€‚</p><p>ã“ã‚ŒãŒæœ‰ç›Šãªä¾‹ã¨ã—ã¦ã€ä¸€éƒ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã®é‡ã€ã‚¨ãƒ©ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å«ã‚€ãƒ­ã‚°ã®æ•°ã€ã¾ãŸã¯ç‰¹å®šã®ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã«åŸºã¥ã„ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚count connector ã¯ã“ã‚Œã‚’ã™ãã«ä½¿ãˆã‚‹å½¢ã§å¯¾å‡¦ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p><h2 id=processor-ã®ä»£ã‚ã‚Šã«-connector-ã‚’ä½¿ç”¨ã™ã‚‹ç†ç”±>processor ã®ä»£ã‚ã‚Šã« connector ã‚’ä½¿ç”¨ã™ã‚‹ç†ç”±</h2><p>processor ã¯å‡¦ç†ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€è¿½åŠ ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ç‚¹ã§åˆ¶é™ãŒã‚ã‚Šã€è¿½åŠ æƒ…å ±ã‚’å…¬é–‹ã™ã‚‹ã®ãŒå›°é›£ã§ã™ã€‚connector ã¯å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€æ±‚ã‚ã¦ã„ã‚‹ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’ä½œæˆã™ã‚‹æ©Ÿä¼šã‚’æä¾›ã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒå±æ€§ã‚’æŒãŸãªã„ãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã®æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ connector ã‚’ä½œæˆã§ãã¾ã™ã€‚</p><p>ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒåˆ¥ã«ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨é‡ã‚’åˆ†é¡ã§ãã‚‹éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã§ã™ã€‚</p><h2 id=connector-ã«é–¢ã™ã‚‹è€ƒæ…®äº‹é …>connector ã«é–¢ã™ã‚‹è€ƒæ…®äº‹é …</h2><p>connector ã¯ã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã€åˆ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å—ä¿¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€connector ã‚’æ´»ç”¨ã™ã‚‹ãŸã‚ã« Collector ã®è¨­å®šã‚’ã©ã®ã‚ˆã†ã«æ§‹æˆã™ã‚‹ã‹ã‚’æ¤œè¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p><h2 id=å‚è€ƒè³‡æ–™>å‚è€ƒè³‡æ–™</h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external><strong>https://opentelemetry.io/docs/collector/configuration/#connectors</strong></a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external><strong>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector</strong></a></li></ol></div></details><hr><h2 id=è¨­å®šã®ç¢ºèª>è¨­å®šã®ç¢ºèª</h2><p>processors ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚è¨­å®šã®å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ç¢ºèªã™ã‚‹</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-f2b45cd9151ef664209c543e722b4746><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-d047043ff66b7b107c7e3d7b6a1d1b27 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f2b45cd9151ef664209c543e722b4746","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-d047043ff66b7b107c7e3d7b6a1d1b27 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=hl><span class=lnt> 69
</span></span><span class=hl><span class=lnt> 70
</span></span><span class=hl><span class=lnt> 71
</span></span><span class=hl><span class=lnt> 72
</span></span><span class=hl><span class=lnt> 73
</span></span><span class=hl><span class=lnt> 74
</span></span><span class=hl><span class=lnt> 75
</span></span><span class=hl><span class=lnt> 76
</span></span><span class=hl><span class=lnt> 77
</span></span><span class=hl><span class=lnt> 78
</span></span><span class=hl><span class=lnt> 79
</span></span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-exporters>OpenTelemetry Collector Exporters</h1><p>Exporter ã¯ãƒ—ãƒƒã‚·ãƒ¥å‹ã¾ãŸã¯ãƒ—ãƒ«å‹ã§ã€1ã¤ä»¥ä¸Šã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰/å®›å…ˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã§ã™ã€‚Exporter ã¯1ã¤ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€<a href=https://opentelemetry.io/docs/specs/otel/protocol/exporter/ rel=external><strong>otlphttp</strong></a> exporter ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚OpenTelemetry Protocol (OTLP) ã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ™ãƒ³ãƒ€ãƒ¼ä¸­ç«‹ã§æ¨™æº–åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚OTLP exporter ã¯ã€OTLP ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™ã€‚OTLP exporter ã¯ <a href=https://grpc.io/ rel=external><strong>gRPC</strong></a> ã¨ <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview rel=external><strong>HTTP</strong></a>/<a href=https://www.json.org/json-en.html rel=external><strong>JSON</strong></a> ã®ä¸¡æ–¹ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Exporters fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Collector
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>5. Exportersã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-exporters>OpenTelemetry Collector Exporters</h1><h2 id=otlp-http-exporter>OTLP HTTP Exporter</h2><p>HTTP çµŒç”±ã§ Splunk Observability Cloud ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã€<strong>otlphttp</strong> exporter ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>/etc/otelcol-contrib/config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€<strong>otlphttp</strong> exporter ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã® YAML ã‚’ <strong>exporters</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«æŒ¿å…¥ã—ã¦ãã ã•ã„ã€‚ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯2ã‚¹ãƒšãƒ¼ã‚¹ã§è¡Œã£ã¦ãã ã•ã„ã€‚</p><p>ã¾ãŸã€ãƒ‡ã‚£ã‚¹ã‚¯ãŒã„ã£ã±ã„ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã€logging exporter ã®è©³ç´°åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>detailed</code> ã¯éå¸¸ã«å†—é•·ã§ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=l>otlphttp/splunk:</span></span></span></code></pre></div><p>æ¬¡ã«ã€<code>metrics_endpoint</code> ã‚’å®šç¾©ã—ã¦ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ URL ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunk ä¸»å‚¬ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å‚åŠ ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã™ã§ã« Realm ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ãã®ç’°å¢ƒå¤‰æ•°ã‚’å‚ç…§ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€æ–°ã—ã„ç’°å¢ƒå¤‰æ•°ã‚’ä½œæˆã—ã¦ Realm ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>REALM</span><span class=o>=</span><span class=s2>&#34;us1&#34;</span></span></span></code></pre></div></div></details><p>ä½¿ç”¨ã™ã‚‹ URL ã¯ <code>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</code> ã§ã™ã€‚ï¼ˆSplunk ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚·ãƒ¼ã®ãŸã‚ã«ä¸–ç•Œä¸­ã®ä¸»è¦ãªåœ°ç†çš„å ´æ‰€ã« Realm ã‚’æŒã£ã¦ã„ã¾ã™ï¼‰ã€‚</p><p><strong>otlphttp</strong> exporter ã¯ã€<code>traces_endpoint</code> ã¨ <code>logs_endpoint</code> ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ URL ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®è¨­å®šã¯ã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ç¯„å›²å¤–ã§ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span></span></span></code></pre></div><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ <code>gzip</code> åœ§ç¸®ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€exporter è¨­å®šã§ <code>compression: none</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ç„¡åŠ¹ã«ã§ãã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æœ€ã‚‚åŠ¹ç‡çš„ãªæ–¹æ³•ã§ã‚ã‚‹ãŸã‚ã€åœ§ç¸®ã‚’æœ‰åŠ¹ã®ã¾ã¾ã«ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><p>Splunk Observability Cloud ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€Splunk Observability Cloud UI ã§æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§è¡Œãˆã¾ã™ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆæ–¹æ³•ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href=https://docs.splunk.com/Observability/admin/authentication-tokens/org-tokens.html rel=external>Create a token</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã¯ <strong>INGEST</strong> ã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunk ä¸»å‚¬ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å‚åŠ ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã™ã§ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼ˆç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ãã®ç’°å¢ƒå¤‰æ•°ã‚’å‚ç…§ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã—ã¦ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ACCESS_TOKEN</span><span class=o>=</span>&lt;replace-with-your-token&gt;</span></span></code></pre></div></div></details><p>ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€<code>headers:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã« <code>X-SF-TOKEN: ${env:ACCESS_TOKEN}</code> ã‚’æŒ¿å…¥ã™ã‚‹ã“ã¨ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã•ã‚Œã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span></span></span></code></pre></div><h2 id=è¨­å®šã®ç¢ºèª>è¨­å®šã®ç¢ºèª</h2><p>Exporter ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã®ã§ã€è¨­å®šã®å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>Review your configuration</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-4c60d58ce78de84e23ab62636899ed68><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-d1e0ead4147fa070c5b9b98a7da5e284 aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4c60d58ce78de84e23ab62636899ed68","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-d1e0ead4147fa070c5b9b98a7da5e284 data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=hl><span class=lnt> 83
</span></span><span class=hl><span class=lnt> 84
</span></span><span class=hl><span class=lnt> 85
</span></span><span class=hl><span class=lnt> 86
</span></span><span class=hl><span class=lnt> 87
</span></span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-Token</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>ã‚‚ã¡ã‚ã‚“ã€<strong>OTLP</strong> ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡ã™ã‚ˆã†ã« <code>metrics_endpoint</code> ã‚’ç°¡å˜ã«è¨­å®šã§ãã¾ã™ã€‚</p><p>æ¬¡ã«ã€<code>config.yaml</code> ã® service ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€è¨­å®šã—ãŸ receiversã€processorsã€exporters ã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><p><strong>Service</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€receiversã€processorsã€exportersã€extensions ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å®šç¾©ã•ã‚ŒãŸè¨­å®šã«åŸºã¥ã„ã¦ã€Collector ã§ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
æƒ…å ±</summary><div class=box-content><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã¦ã‚‚ã€<strong>Service</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã§å®šç¾©ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯<strong>æœ‰åŠ¹ã«ãªã‚Šã¾ã›ã‚“</strong>ã€‚</p></div></details><p>service ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯3ã¤ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™</p><ul><li>extensions</li><li>pipelines</li><li>telemetry</li></ul><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯ã€extension ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ <code>health_check</code>ã€<code>pprof</code>ã€<code>zpages</code> ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‚ˆã†è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯å…ˆã»ã© Extensions ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¨­å®šã—ã¾ã—ãŸã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></div><p>ãã‚Œã§ã¯ã€Metric Pipeline ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ï¼</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>6. Serviceã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=hostmetrics-receiver>Hostmetrics Receiver</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã® Receivers ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã•ã‚Œã‚‹ãƒ›ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/3-receivers/index.html#host-metrics-receiver><strong>Host Metrics Receiver</strong></a> ã‚’å®šç¾©ã—ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚ã“ã® receiver ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€metrics ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã« <code>hostmetrics</code> receiver ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã€metrics ã® <code>receivers</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>hostmetrics</code> ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=prometheus-internal-receiver>Prometheus Internal Receiver</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å‰åŠã§ã€Collector å†…éƒ¨ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã¦ã„ã‚‹ã“ã¨ã‚’åæ˜ ã™ã‚‹ãŸã‚ã« <code>prometheus</code> receiver ã®åå‰ã‚’ <code>prometheus/internal</code> ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚</p><p>ã“ã“ã§ã€metrics ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ <code>prometheus/internal</code> receiver ã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>receivers</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>prometheus/internal</code> ã‚’å«ã‚ã‚‹ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=resource-detection-processor>Resource Detection Processor</h2><p>ã¾ãŸã€Collector ãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ›ã‚¹ãƒˆåã¨ AWS/EC2 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã§ãã‚‹ã‚ˆã†ã«ã€<code>resourcedetection/system</code> ã¨ <code>resourcedetection/ec2</code> processor ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã“ã§ã€metrics ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã“ã‚Œã‚‰2ã¤ã® processor ã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>processors</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>resourcedetection/system</code> ã¨ <code>resourcedetection/ec2</code> ã‚’å«ã‚ã‚‹ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=attributes-processor>Attributes Processor</h2><p>ã¾ãŸã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã® Processors ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Collector ãŒã™ã¹ã¦ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã« <code>participant.name</code> ã¨ã„ã†æ–°ã—ã„å±æ€§ã‚’æŒ¿å…¥ã™ã‚‹ã‚ˆã†ã« <code>attributes/conf</code> processor ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã“ã§ã€metrics ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã“ã‚Œã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>processors</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>attributes/conf</code> ã‚’å«ã‚ã‚‹ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-service>OpenTelemetry Collector Service</h1><h2 id=otlp-http-exporter>OTLP HTTP Exporter</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã® Exporters ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Splunk Observability Cloud ã«é€ä¿¡ã™ã‚‹ãŸã‚ã® <code>otlphttp</code> exporter ã‚’è¨­å®šã—ã¾ã—ãŸã€‚ã“ã“ã§ã€metrics ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã“ã‚Œã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>exporters</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>otlphttp/splunk</code> ã‚’å«ã‚ã‚‹ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug, otlphttp/splunk]</span></span></span></code></pre></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Collector ã®å†…éƒ¨ã‚’è¦³å¯Ÿã™ã‚‹</span></span></summary><div class=box-content><p>Collector ã¯ã€å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®è¿½åŠ ã‚·ã‚°ãƒŠãƒ«ã‚’å«ã‚€ã€è‡ªèº«ã®å‹•ä½œã«é–¢ã™ã‚‹å†…éƒ¨ã‚·ã‚°ãƒŠãƒ«ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚
ã“ã‚Œã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«é–¢ã™ã‚‹åˆ¤æ–­ã‚’è¡Œã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã€ãã®æƒ…å ±ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¾ãŸã¯ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ã—ã¦å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’å¿…è¦ã¨ã™ã‚‹ãŸã‚ã§ã™ã€‚</p><h2 id=ãªãœ-collector-ã‚’ç›£è¦–ã™ã‚‹ã®ã‹>ãªãœ Collector ã‚’ç›£è¦–ã™ã‚‹ã®ã‹ï¼Ÿ</h2><p>ã“ã‚Œã¯ã€Œç›£è¦–è€…ã‚’èª°ãŒç›£è¦–ã™ã‚‹ã®ã‹ï¼Ÿã€ã¨ã„ã†ã€é¶ã¨åµã®ã‚ˆã†ãªå•é¡Œã§ã™ãŒã€ã“ã®æƒ…å ±ã‚’å…¬é–‹ã§ãã‚‹ã“ã¨ã¯é‡è¦ã§ã™ã€‚Collector ã®æ­´å²ã«ãŠã„ã¦èˆˆå‘³æ·±ã„ç‚¹ã¯ã€Go ãƒ¡ãƒˆãƒªã‚¯ã‚¹ SDK ãŒå®‰å®šç‰ˆã¨è¦‹ãªã•ã‚Œã‚‹å‰ã‹ã‚‰å­˜åœ¨ã—ã¦ã„ãŸãŸã‚ã€å½“é¢ã®é–“ã€Collector ã¯ã“ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãŸã‚ã« Prometheus ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><h2 id=è€ƒæ…®äº‹é …>è€ƒæ…®äº‹é …</h2><p>çµ„ç¹”å†…ã§å®Ÿè¡Œä¸­ã®å„ Collector ã®å†…éƒ¨ä½¿ç”¨çŠ¶æ³ã‚’ç›£è¦–ã™ã‚‹ã¨ã€å¤§é‡ã®æ–°ã—ã„ Metric Time Series (MTS) ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚Splunk ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒå³é¸ã•ã‚Œã¦ãŠã‚Šã€äºˆæƒ³ã•ã‚Œã‚‹å¢—åŠ ã‚’äºˆæ¸¬ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p><h2 id=ninja-zone>Ninja Zone</h2><p>Collector ã®å†…éƒ¨ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã«ã€ã„ãã¤ã‹ã®è¿½åŠ è¨­å®šã‚’èª¿æ•´ã§ãã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-ad2a40ab96449f69bfc45b21a5ecd896><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2108f1439ab67d72ee6c9f62244a8f65 aria-expanded=true data-tab-item=R-tab-b7b7f11d9c9c56d1979ca775dec8b62b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ad2a40ab96449f69bfc45b21a5ecd896","R-tab-b7b7f11d9c9c56d1979ca775dec8b62b")'>
<span class=tab-nav-text>telemetry schema</span>
</button>
<button aria-controls=R-tab-id-a9790ceadeecaf717ab1b2da93ca2b69 aria-expanded=false data-tab-item=R-tab-55b005c9d9b0488c209e03663dcdc6fa class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-ad2a40ab96449f69bfc45b21a5ecd896","R-tab-55b005c9d9b0488c209e03663dcdc6fa")'>
<span class=tab-nav-text>example-config.yml</span></button></div><div class=tab-content-container><div id=R-tab-id-2108f1439ab67d72ee6c9f62244a8f65 data-tab-item=R-tab-b7b7f11d9c9c56d1979ca775dec8b62b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;info|warn|error&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>&lt;console|json&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_caller</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>error_output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;none|basic|normal|detailed&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Address binds the promethues endpoint to scrape</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;hostname:port&gt;</span></span></span></code></pre></div></div></div><div id=R-tab-id-a9790ceadeecaf717ab1b2da93ca2b69 data-tab-item=R-tab-55b005c9d9b0488c209e03663dcdc6fa class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>instance.name</span><span class=p>:</span><span class=w> </span><span class=l>${env:INSTANCE}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8888</span></span></span></code></pre></div></div></div></div></div><h2 id=å‚è€ƒè³‡æ–™>å‚è€ƒè³‡æ–™</h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#service rel=external>https://opentelemetry.io/docs/collector/configuration/#service</a></li></ol></div></details><hr><h2 id=æœ€çµ‚è¨­å®š>æœ€çµ‚è¨­å®š</h2><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>æœ€çµ‚è¨­å®šã‚’ç¢ºèªã™ã‚‹</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=R-tabs-10a184670f93202b615d57a4011c3909><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b2140676f9b737d3dfec2d3a183a761f aria-expanded=true data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-10a184670f93202b615d57a4011c3909","R-tab-259fe82e12a866f01123927480c7851b")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div id=R-tab-id-b2140676f9b737d3dfec2d3a183a761f data-tab-item=R-tab-259fe82e12a866f01123927480c7851b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4317</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>4318</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55678</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6832</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>6831</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>14268</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>9411</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>X-SF-Token</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug, otlphttp/splunk]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>debug]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
ãƒ’ãƒ³ãƒˆ</summary><div class=box-content><p>Collector ã‚’å†èµ·å‹•ã™ã‚‹å‰ã«ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚<code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ <strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã«è²¼ã‚Šä»˜ã‘ã‚‹ã“ã¨ã§æ¤œè¨¼ã§ãã¾ã™ã€‚</p><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><strong>Screenshot</strong></span><span class=badge-content style=background-color:green>OTelBin</span></span></summary><div class=box-content><p><a href=#R-image-107821e2d194d030ebe1addf548a0c33 class=lightbox-link><img alt=otelbin-validator class="lazy lightbox figure-image" loading=lazy src=../../images/otelbin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-107821e2d194d030ebe1addf548a0c33><img alt=otelbin-validator class="lazy lightbox lightbox-image" loading=lazy src=../../images/otelbin.png></a></p></div></details></div></details><p>ã“ã‚Œã§å‹•ä½œã™ã‚‹è¨­å®šãŒã§ããŸã®ã§ã€Collector ã‚’èµ·å‹•ã—ã¦ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/2-extensions/index.html#zpages>zPages</a> ãŒä½•ã‚’å ±å‘Šã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><div class=tab-panel data-tab-group=R-tabs-33e24387ce8cbcd025afd7dc8e2f9762><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4e4627febff8ed705b9c9d7a40eb5c87 aria-expanded=true data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-33e24387ce8cbcd025afd7dc8e2f9762","R-tab-ee97be03cb04119af45014d815621ce1")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div id=R-tab-id-4e4627febff8ed705b9c9d7a40eb5c87 data-tab-item=R-tab-ee97be03cb04119af45014d815621ce1 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><p>ãƒ–ãƒ©ã‚¦ã‚¶ã§ zPages ã‚’é–‹ãã¾ã™ï¼š<a href=http://localhost:55679/debug/pipelinez rel=external><strong>http://localhost:55679/debug/pipelinez</strong></a>ï¼ˆ<code>localhost</code> ã‚’è‡ªåˆ†ã®ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰ã€‚
<a href=#R-image-cb86254badf0739cfa0603c1f7541fbd class=lightbox-link><img alt=pipelinez-full-config class="lazy lightbox figure-image" loading=lazy src=../../images/pipelinez-full-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cb86254badf0739cfa0603c1f7541fbd><img alt=pipelinez-full-config class="lazy lightbox lightbox-image" loading=lazy src=../../images/pipelinez-full-config.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–>ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–</h1><h2 id=splunk-observability-cloud>Splunk Observability Cloud</h2><p>OpenTelemetry Collector ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Splunk Observability Cloud ã«é€ä¿¡ã™ã‚‹è¨­å®šãŒå®Œäº†ã—ãŸã®ã§ã€Splunk Observability Cloud ã§ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚Splunk Observability Cloud ã¸ã®æ‹›å¾…ã‚’å—ã‘å–ã£ã¦ã„ãªã„å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³è³‡æ ¼æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>ãã®å‰ã«ã€å°‘ã—é¢ç™½ãã™ã‚‹ãŸã‚ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒæ´»æ€§åŒ–ã•ã‚Œã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install stress
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span> stress -c <span class=m>2</span> -t 40<span class=p>;</span> stress -d <span class=m>5</span> -t 40<span class=p>;</span> stress -m <span class=m>20</span> -t 40<span class=p>;</span> <span class=k>done</span></span></span></code></pre></div><p>Splunk Observability Cloud ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚‰ã€å·¦å´ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ <strong>Dashboards</strong> ã«ç§»å‹•ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒãƒ¼ãƒ ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ“ãƒ¥ãƒ¼ã®ä¸Šéƒ¨ã«ã‚ã‚‹ <strong>All Dashboards</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™</p><p><a href=#R-image-4acac459e5337d191ee038a81f16317d class=lightbox-link><img alt=menu-dashboards class="lazy lightbox figure-image" loading=lazy src=../images/menu-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4acac459e5337d191ee038a81f16317d><img alt=menu-dashboards class="lazy lightbox lightbox-image" loading=lazy src=../images/menu-dashboards.png></a></p><p>æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã§ <strong>OTel Contrib</strong> ã‚’æ¤œç´¢ã—ã¾ã™</p><p><a href=#R-image-416ef4b2c7b2cb1b21815cab814b57c8 class=lightbox-link><img alt=search-dashboards class="lazy lightbox figure-image" loading=lazy src=../images/search-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-416ef4b2c7b2cb1b21815cab814b57c8><img alt=search-dashboards class="lazy lightbox lightbox-image" loading=lazy src=../images/search-dashboards.png></a></p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
æƒ…å ±</summary><div class=box-content><p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒã™ãã«è¿½åŠ ã§ãã¾ã™ã€‚Splunk ä¸»å‚¬ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆã¯ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ã“ã®ãƒšãƒ¼ã‚¸ã®ä¸‹éƒ¨ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p></div></details><p><strong>OTel Contrib Dashboard</strong> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ãã€æ¬¡ã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¸Šéƒ¨ã® <strong>Participant Name</strong> ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€<code>config.yaml</code> ã§ <code>participant.name</code> ã«è¨­å®šã—ãŸåå‰ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã‹ã‚‰é¸æŠã™ã‚‹ã‹ã€åå‰ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¾ã™</p><p><a href=#R-image-6ed951a167da99434f7a5186bc20b29e class=lightbox-link><img alt=select-conf-attendee-name class="lazy lightbox figure-image" loading=lazy src=../images/select-participant-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ed951a167da99434f7a5186bc20b29e><img alt=select-conf-attendee-name class="lazy lightbox lightbox-image" loading=lazy src=../images/select-participant-name.png></a></p><p>ã“ã‚Œã§ã€OpenTelemetry Collector ã‚’è¨­å®šã—ãŸãƒ›ã‚¹ãƒˆã®ãƒ›ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><p><a href=#R-image-bc528d5a2262c2e2791fe6b88659c097 class=lightbox-link><img alt=participant-dashboard class="lazy lightbox figure-image" loading=lazy src=../images/participant-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bc528d5a2262c2e2791fe6b88659c097><img alt=participant-dashboard class="lazy lightbox lightbox-image" loading=lazy src=../images/participant-dashboard.png></a></p><details open class="box cstyle attachments info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Download Dashboard Group JSON for importing</summary><div class=box-content><ul><li><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/7-visualisation/OpenTelemetry-Contrib-Dashboard-Group.json>OpenTelemetry-Contrib-Dashboard-Group.json</a> (40 KB)</li></ul></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h2 id=ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™º>ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™º</h2><p>OpenTelemetry Collector ç”¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã«ã¯ã€3ã¤ã®ä¸»è¦ãªéƒ¨åˆ†ãŒå¿…è¦ã§ã™</p><ol><li>Configuration - <em>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…¬é–‹ã•ã‚Œã‚‹è¨­å®šå€¤</em></li><li>Factory - <em>æä¾›ã•ã‚ŒãŸå€¤ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹</em></li><li>Business Logic - <em>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹å‡¦ç†</em></li></ol><p>ã“ã“ã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é‡è¦ãª DevOps ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¿½è·¡ã§ãã‚‹ã‚ˆã†ã«ã€Jenkins ã¨é€£æºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ä¾‹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><p>æ¸¬å®šã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ol><li>Lead time for changes - <em>&ldquo;ã‚³ãƒŸãƒƒãƒˆãŒæœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã¾ã§ã«ã‹ã‹ã‚‹æ™‚é–“&rdquo;</em></li><li>Change failure rate - <em>&ldquo;æœ¬ç•ªç’°å¢ƒã§éšœå®³ã‚’å¼•ãèµ·ã“ã™ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®å‰²åˆ&rdquo;</em></li><li>Deployment frequency - <em>"[ãƒãƒ¼ãƒ ]ãŒæœ¬ç•ªç’°å¢ƒã«æ­£å¸¸ã«ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹é »åº¦"</em></li><li>Mean time to recover - <em>"[ãƒãƒ¼ãƒ ]ãŒæœ¬ç•ªç’°å¢ƒã®éšœå®³ã‹ã‚‰å¾©æ—§ã™ã‚‹ã¾ã§ã«ã‹ã‹ã‚‹æ™‚é–“"</em></li></ol><p>ã“ã‚Œã‚‰ã®æŒ‡æ¨™ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºãƒãƒ¼ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¤ºã™ãŸã‚ã«ã€Google ã® DevOps Research and Assessmentï¼ˆDORAï¼‰[^1] ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ç‰¹å®šã•ã‚Œã¾ã—ãŸã€‚<em>Jenkins CI</em> ã‚’é¸æŠã—ãŸç†ç”±ã¯ã€åŒã˜ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å†…ã«ã¨ã©ã¾ã‚‹ã“ã¨ã§ã€å°†æ¥ãƒ™ãƒ³ãƒ€ãƒ¼ãŒç®¡ç†ã™ã‚‹ CI ãƒ„ãƒ¼ãƒ«ãŒæ¡ç”¨ã™ã‚‹ãŸã‚ã®ä¾‹ã¨ã—ã¦æ©Ÿèƒ½ã§ãã‚‹ã‹ã‚‰ã§ã™ã€‚</p><h2 id=è¨ˆè£…-vs-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ>è¨ˆè£… vs ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h2><p>çµ„ç¹”å†…ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã®ãƒ¬ãƒ™ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹éš›ã«è€ƒæ…®ã™ã¹ãã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã„ãã¤ã‹ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒç”Ÿã˜ã‚‹ãŸã‚ã§ã™ã€‚</p><table><thead><tr><th></th><th>ãƒ¡ãƒªãƒƒãƒˆ</th><th>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</th></tr></thead><tbody><tr><td><strong>ï¼ˆè‡ªå‹•ï¼‰è¨ˆè£…</strong></td><td>ã‚·ã‚¹ãƒ†ãƒ ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã«å¤–éƒ¨ API ã‚’ç›£è¦–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</td><td>è¨ˆè£…ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚</td></tr><tr><td></td><td>ã‚·ã‚¹ãƒ†ãƒ ã‚ªãƒ¼ãƒŠãƒ¼/é–‹ç™ºè€…ãŒã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹æ¨©é™ã‚’æŒã¦ã¾ã™ã€‚</td><td>è¿½åŠ ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¾å­˜é–¢ä¿‚ãŒå¿…è¦ã§ã™ã€‚</td></tr><tr><td></td><td>ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã—ã€ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ <em>Exemplars</em> ã¨é–¢é€£ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</td><td>ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</td></tr><tr><td><strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong></td><td>ãƒ‡ãƒ¼ã‚¿åã‚„ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¸ã®å¤‰æ›´ã‚’ã‚·ã‚¹ãƒ†ãƒ ã®ãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«ã¨ã¯ç‹¬ç«‹ã—ã¦å±•é–‹ã§ãã¾ã™ã€‚</td><td>API ã®ç ´å£Šçš„ãªå¤‰æ›´ã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã¨ Collector ã®é–“ã§èª¿æ•´ã•ã‚ŒãŸãƒªãƒªãƒ¼ã‚¹ãŒå¿…è¦ã§ã™ã€‚</td></tr><tr><td></td><td>åé›†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°/æ‹¡å¼µã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªå¤‰æ›´ã§ã™ã€‚</td><td>ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ãŒã€æ–°ã—ã„ã‚·ã‚¹ãƒ†ãƒ ãƒªãƒªãƒ¼ã‚¹ã¨ä¸€è‡´ã—ãªã„å½¢ã§äºˆæœŸã›ãšå£Šã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</td></tr><tr><td></td><td>ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ãƒ ãŒã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã®å®Ÿè·µã«ã¤ã„ã¦æ·±ã„ç†è§£ã‚’æŒã¤å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</td><td>ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å¤–éƒ¨ã«å…¬é–‹ã•ã‚ŒãŸæƒ…å ±ã®ã¿ã‚’è¡¨é¢åŒ–ã§ãã¾ã™ã€‚</td></tr></tbody></table><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>8. Developã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h2 id=ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—-hahahugoshortcode256s0hbhb>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong></span></span></h2><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Œäº†ã™ã‚‹ã¾ã§ã®æ™‚é–“ã¯ã€çµŒé¨“ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚</p><p>è¡Œãè©°ã¾ã£ãŸå ´åˆã‚„ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã«æ²¿ã£ã¦é€²ã‚ãŸã„å ´åˆã¯ã€<a href=https://github.com/splunk/collector-workshop-example rel=external><strong>ã“ã¡ã‚‰</strong></a>ã«å®Œå…¨ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</p></div></details><p>æ–°ã—ã„ <em>Jenkins CI</em> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é–‹ç™ºã‚’å§‹ã‚ã‚‹ã«ã¯ã€ã¾ãš Golang ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
æ–°ã—ã„ Golang ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹æ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ol><li><code>${HOME}/go/src/jenkinscireceiver</code> ã¨ã„ã†åå‰ã®æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™<ol><li>å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚„å ´æ‰€ã¯å³å¯†ã§ã¯ãªãã€ç‹¬è‡ªã®é–‹ç™ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é¸æŠã—ã¦ä½œæˆã§ãã¾ã™ã€‚</li></ol></li><li><code>go mod init splunk.conf/workshop/example/jenkinscireceiver</code> ã‚’å®Ÿè¡Œã—ã¦ golang ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–ã—ã¾ã™<ol><li>ã“ã‚Œã«ã‚ˆã‚Š <code>go.mod</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€ç›´æ¥çš„ãŠã‚ˆã³é–“æ¥çš„ãªä¾å­˜é–¢ä¿‚ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™</li><li>æœ€çµ‚çš„ã«ã¯ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ä¾å­˜é–¢ä¿‚ã®ãƒã‚§ãƒƒã‚¯ã‚µãƒ å€¤ã§ã‚ã‚‹ <code>go.sum</code> ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</li></ol></li></ol><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>go.mod ã‚’ç¢ºèªã™ã‚‹</span></span></summary><div class=box-content><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>module splunk.conf/workshop/example/jenkinscireceiver
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.20</span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h2 id=configuration-ã®æ§‹ç¯‰>Configuration ã®æ§‹ç¯‰</h2><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® Configuration éƒ¨åˆ†ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦å…¥åŠ›ã‚’è¡Œã†æ–¹æ³•ã§ã™ã€‚ãã®ãŸã‚ã€è¨­å®šã«ä½¿ç”¨ã•ã‚Œã‚‹å€¤ã¯ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™å¿…è¦ãŒã‚ã‚Šã¾ã™</p><ol><li>ãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒä½•ã‚’åˆ¶å¾¡ã™ã‚‹ã‹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹ã“ã¨</li><li>å¿…é ˆã¨ä»»æ„ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨</li><li>ä¸€èˆ¬çš„ãªåå‰ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å†åˆ©ç”¨ã™ã‚‹ã“ã¨</li><li>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤ã“ã¨</li></ol><div class=tab-panel data-tab-group=R-tabs-c2c2c3ca36d428c36e577a3bda213377><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-67693fd1a6270ffd05164d78994dcf25 aria-expanded=true data-tab-item=R-tab-ea614e7854d52692156e1a019727d7ea class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c2c2c3ca36d428c36e577a3bda213377","R-tab-ea614e7854d52692156e1a019727d7ea")'>
<span class=tab-nav-text>bad config</span>
</button>
<button aria-controls=R-tab-id-06c04325bf4aee24f8d5243d5a543526 aria-expanded=false data-tab-item=R-tab-c4230d82955d70d5d9d9c8cd4bb074a6 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c2c2c3ca36d428c36e577a3bda213377","R-tab-c4230d82955d70d5d9d9c8cd4bb074a6")'>
<span class=tab-nav-text>good config</span></button></div><div class=tab-content-container><div id=R-tab-id-67693fd1a6270ffd05164d78994dcf25 data-tab-item=R-tab-ea614e7854d52692156e1a019727d7ea class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_addr</span><span class=p>:</span><span class=w> </span><span class=l>hostname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_api_port</span><span class=p>:</span><span class=w> </span><span class=m>8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>filter_builds_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-awesome-build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=l>amber</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>track</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w> </span><span class=kc>no</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w> </span><span class=kc>no</span></span></span></code></pre></div></div></div><div id=R-tab-id-06c04325bf4aee24f8d5243d5a543526 data-tab-item=R-tab-c4230d82955d70d5d9d9c8cd4bb074a6 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Required Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=l>http://my-jenkins-server:8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>authenticator</span><span class=p>:</span><span class=w> </span><span class=l>basicauth/jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Optional Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></div></div></div></div><p>æ‚ªã„è¨­å®šä¾‹ã¯ã€è¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®é€†ã‚’è¡Œã†ã“ã¨ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ã„ã‚„ã™ã•ã«ã©ã®ã‚ˆã†ã«å½±éŸ¿ã™ã‚‹ã‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤ãŒä½•ã§ã‚ã‚‹ã¹ãã‹ãŒæ˜ç¢ºã§ã¯ãªãã€æ—¢å­˜ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã«ãƒ—ãƒƒã‚·ãƒ¥ã§ãã‚‹æ©Ÿèƒ½ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãŒ Collector ã«å­˜åœ¨ã™ã‚‹ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ä¸€è²«ã—ã¦ã„ã¾ã›ã‚“ã€‚</p><p>è‰¯ã„è¨­å®šä¾‹ã¯ã€å¿…é ˆã®å€¤ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¡ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’å†åˆ©ç”¨ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ Jenkins ã¨ Collector é–“ã®ç›¸äº’ä½œç”¨ã®ã¿ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã“ã¨ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒ¼ãƒ‰ã‚¿ãƒ–ã¯ã€ç§ãŸã¡ãŒè¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹é‡ã¨ã€Collector å†…ã®å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦ã™ã§ã«æä¾›ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«åˆ°é”ã—ãŸã¨ãã«ã‚ˆã‚Šè©³ç´°ã«èª¬æ˜ã—ã¾ã™ã€‚Configuration ã¯å°ã•ãå§‹ã¾ã‚Šã€è¿½åŠ æ©Ÿèƒ½ãŒå¿…è¦ã«ãªã‚‹ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨å¤‰æ›´ã•ã‚Œã¾ã™ã€‚</p><h2 id=ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã>ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã</h2><p>Configuration ã«å¿…è¦ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®å†…å®¹ã§ <code>config.go</code> ã¨ã„ã†æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule</span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h2 id=ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2><p>Jenkins ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¨®é¡ã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-f6d08959c5237f6b3e7c2528b9523b7a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-11c9abcb9a17656c39feb94bcfee184b aria-expanded=true data-tab-item=R-tab-63e4e92bb7d207ca577b11c07f827279 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f6d08959c5237f6b3e7c2528b9523b7a","R-tab-63e4e92bb7d207ca577b11c07f827279")'>
<span class=tab-nav-text>Extension</span>
</button>
<button aria-controls=R-tab-id-d51ce3fd36238a63a0d133145c4d8d07 aria-expanded=false data-tab-item=R-tab-a9d093d11bc6e98b0c8e586ffa545c85 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f6d08959c5237f6b3e7c2528b9523b7a","R-tab-a9d093d11bc6e98b0c8e586ffa545c85")'>
<span class=tab-nav-text>Receiver</span>
</button>
<button aria-controls=R-tab-id-dfd94fee47a833ab0a3dc5565acf82b8 aria-expanded=false data-tab-item=R-tab-e22b6495595f2c4ad67a830d1be05c6e class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f6d08959c5237f6b3e7c2528b9523b7a","R-tab-e22b6495595f2c4ad67a830d1be05c6e")'>
<span class=tab-nav-text>Processor</span>
</button>
<button aria-controls=R-tab-id-a823526b55c6f3c23af6e1c2ccd9f206 aria-expanded=false data-tab-item=R-tab-d353b8720fcbebe4385ef7a23a43aa22 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f6d08959c5237f6b3e7c2528b9523b7a","R-tab-d353b8720fcbebe4385ef7a23a43aa22")'>
<span class=tab-nav-text>Exporter</span>
</button>
<button aria-controls=R-tab-id-dee4ef122b89677eae12ec7ea52e2e96 aria-expanded=false data-tab-item=R-tab-654b8c5e6c23b010e809ba5bb38a47cf class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f6d08959c5237f6b3e7c2528b9523b7a","R-tab-654b8c5e6c23b010e809ba5bb38a47cf")'>
<span class=tab-nav-text><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Connectors</span></span></span></button></div><div class=tab-content-container><div id=R-tab-id-11c9abcb9a17656c39feb94bcfee184b data-tab-item=R-tab-63e4e92bb7d207ca577b11c07f827279 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>Extension ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ol><li>ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨­å®šãŒå¿…è¦ãªå…±æœ‰æ©Ÿèƒ½ã‚’æŒã¤ã“ã¨</li><li>Collector ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’è¦³æ¸¬ã™ã‚‹ã“ã¨ã‚’é–“æ¥çš„ã«æ”¯æ´ã™ã‚‹ã“ã¨</li></ol><p>è©³ç´°ã¯ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/2-extensions/index.html><strong>Extensions ã®æ¦‚è¦</strong></a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p></div></div><div id=R-tab-id-d51ce3fd36238a63a0d133145c4d8d07 data-tab-item=R-tab-a9d093d11bc6e98b0c8e586ffa545c85 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Receiver ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ul><li>ãƒªãƒ¢ãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã™ã‚‹</li><li>ãƒªãƒ¢ãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹</li></ul><p>ã“ã‚Œã¯ä¸€èˆ¬çš„ã« <em>pull</em> å‹ã¨ <em>push</em> å‹ã®ãƒ‡ãƒ¼ã‚¿åé›†ã¨å‘¼ã°ã‚Œã€è©³ç´°ã¯ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/3-receivers/index.html>Receiver ã®æ¦‚è¦</a> ã§èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p></div></div><div id=R-tab-id-dfd94fee47a833ab0a3dc5565acf82b8 data-tab-item=R-tab-e22b6495595f2c4ad67a830d1be05c6e class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Processor ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ul><li>ãƒ‡ãƒ¼ã‚¿ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ã¾ãŸã¯å€¤ã®è¿½åŠ ã‚„å‰Šé™¤</li><li>ãƒ‡ãƒ¼ã‚¿ã‚’è¦³æ¸¬ã—ã€æ„æ€æ±ºå®šã‚’è¡Œã†</li><li>ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã€ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã€ä¸¦ã³æ›¿ãˆ</li></ul><p>ç•™æ„ã™ã¹ãç‚¹ã¯ã€Processor ã‚’æµã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã¯ã€ä¸‹æµã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã‚’è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚è©³ç´°ã¯ <a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/4-processors/index.html>Processor ã®æ¦‚è¦</a> ã‚’ãŠèª­ã¿ãã ã•ã„ã€‚</p></div></div><div id=R-tab-id-a823526b55c6f3c23af6e1c2ccd9f206 data-tab-item=R-tab-d353b8720fcbebe4385ef7a23a43aa22 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>Exporter ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ul><li>ãƒ„ãƒ¼ãƒ«ã€ã‚µãƒ¼ãƒ“ã‚¹ã€ã¾ãŸã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹</li></ul><p>OpenTelemetry Collector ã¯ã€Œãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€ã€ã¤ã¾ã‚Šã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚¹ã‚¤ãƒ¼ãƒˆã«ãªã‚‹ã“ã¨ã‚’æœ›ã‚“ã§ãŠã‚‰ãšã€ã‚€ã—ã‚ OpenTelemetry ã‚’å‰µè¨­ã—ãŸåŸå‰‡ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã™ã¹ã¦ã®äººã®ãŸã‚ã®ãƒ™ãƒ³ãƒ€ãƒ¼ã«ä¾å­˜ã—ãªã„ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã§ã™ã€‚è©³ç´°ã‚’å†ç¢ºèªã™ã‚‹ã«ã¯ã€<a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/5-exporters/index.html><strong>Exporter ã®æ¦‚è¦</strong></a> ã‚’ãŠèª­ã¿ãã ã•ã„ã€‚</p></div></div><div id=R-tab-id-dee4ef122b89677eae12ec7ea52e2e96 data-tab-item=R-tab-654b8c5e6c23b010e809ba5bb38a47cf class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ã“ã‚Œã¯ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§è¦‹é€ƒã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã§ã™ã€‚æ¯”è¼ƒçš„æ–°ã—ã„ Collector ã¸ã®è¿½åŠ ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚Connector ã‚’è€ƒãˆã‚‹æœ€è‰¯ã®æ–¹æ³•ã¯ã€ç•°ãªã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚¿ã‚¤ãƒ—ã¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é–“ã§ä½¿ç”¨ã§ãã‚‹ Processor ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ã¤ã¾ã‚Šã€Connector ã¯ãƒ­ã‚°ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å…¥ã‚Œã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å‡ºåŠ›ã—ãŸã‚Šã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å—ã‘å…¥ã‚Œã€è¦³æ¸¬ã—ãŸãƒ‡ãƒ¼ã‚¿ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æä¾›ã—ãŸã‚Šã§ãã¾ã™ã€‚</p><p>Connector ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ul><li>ç•°ãªã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚¿ã‚¤ãƒ—é–“ã®å¤‰æ›<ul><li>ãƒ­ã‚°ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹</li><li>ãƒˆãƒ¬ãƒ¼ã‚¹ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹</li><li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‹ã‚‰ãƒ­ã‚°</li></ul></li><li>å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’è¦³æ¸¬ã—ã€ç‹¬è‡ªã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹<ul><li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å—ã‘å…¥ã‚Œã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†æãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚</li></ul></li></ul><p><a href=/observability-workshop/ja/ninja-workshops/3-opentelemetry-collector-workshops/1-opentelemetry-collector/4-processors/index.html>Processor ã®æ¦‚è¦</a> ã® <strong>Ninja</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç°¡å˜ãªæ¦‚è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚æ–°ã—ã„ Connector ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°ã«ã¤ã„ã¦ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p></div></div></div></div><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ¦‚è¦ã‹ã‚‰ã€Jenkins ç”¨ã®ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ãŒæ˜ç¢ºã§ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h3 id=ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¨­è¨ˆ>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¨­è¨ˆ</h3><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ãŠã‚ˆã³ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/cmd/mdatagen rel=external><strong>mdatagen</strong></a> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€YAML ã§å®šç¾©ã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã™ã‚‹ Collector ç”¨ã«é–‹ç™ºã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-1b431eafb7cc7f0e3f4d4bc4abb7913c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ec45615c3a1f2df86f15204c26d7d46a aria-expanded=true data-tab-item=R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1b431eafb7cc7f0e3f4d4bc4abb7913c","R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9")'>
<span class=tab-nav-text>metadata.yaml</span>
</button>
<button aria-controls=R-tab-id-0fd3e9b7380cad8390a5c8fce79d8be3 aria-expanded=false data-tab-item=R-tab-fa95711d3528c54a10a4bd5a3303bf8c class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1b431eafb7cc7f0e3f4d4bc4abb7913c","R-tab-fa95711d3528c54a10a4bd5a3303bf8c")'>
<span class=tab-nav-text>gen.go</span></button></div><div class=tab-content-container><div id=R-tab-id-ec45615c3a1f2df86f15204c26d7d46a data-tab-item=R-tab-b1d90847e9ac9d08a6205ad8f09fd5a9 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Type defines the name to reference the component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># in the configuration file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Status defines the component type and the stability level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class=l>receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>metrics]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Attributes are the expected fields reported</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># with the exported values.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The name of the associated Jenkins job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Shows if the job had passed, or failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>success</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>unknown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Metrics defines all the pontentially exported values from this receiver.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.jobs.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Provides a count of the total number of configured jobs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{Count}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.duration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Show the duration of the job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.commit_delta</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The calculation difference of the time job was finished minus commit timestamp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span></span></span></code></pre></div></div></div><div id=R-tab-id-0fd3e9b7380cad8390a5c8fce79d8be3 data-tab-item=R-tab-fa95711d3528c54a10a4bd5a3303bf8c class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// To generate the additional code needed to capture metrics,</span>
</span></span><span class=line><span class=cl><span class=c1>// the following command to be run from the shell:</span>
</span></span><span class=line><span class=cl><span class=c1>//  go generate -x ./...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//go:generate go run github.com/open-telemetry/opentelemetry-collector-contrib/cmd/mdatagen@v0.80.0 metadata.yaml</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// There is no code defined within this file.</span></span></span></code></pre></div></div></div></div></div><p>æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é€²ã‚€å‰ã«ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ãƒ¼å†…ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚</p><h2 id=factory-ã®æ§‹ç¯‰>Factory ã®æ§‹ç¯‰</h2><p>Factory ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆã“ã®å ´åˆã¯ <code>jenkinscireceiver</code>ï¼‰ã‚’æä¾›ã•ã‚ŒãŸè¨­å®šã§å‹•çš„ã«ä½œæˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚ã‚ˆã‚Šç¾å®Ÿä¸–ç•Œã®ä¾‹ã‚’ä½¿ã†ã¨ã€é›»è©±ã‚·ãƒ§ãƒƒãƒ—ã«è¡Œãã€è‡ªåˆ†ã®èª¬æ˜ã¨æ­£ç¢ºã«ä¸€è‡´ã™ã‚‹é›»è©±ã‚’æ±‚ã‚ã€ãã‚Œã‚’æä¾›ã—ã¦ã‚‚ã‚‰ã†ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</p><p><code>go generate -x ./...</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®šç¾©ã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ <code>jenkinscireceiver/internal/metadata</code> ãŒä½œæˆã•ã‚Œã¾ã™ã€‚å¿…è¦ãªã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><div class=tab-panel data-tab-group=R-tabs-4100013bb8545784a241e06a62a8110a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-18214364ecd59bec0f05f8163beee4e2 aria-expanded=true data-tab-item=R-tab-5aa589ba734396f6c25f293ea24fc1d0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4100013bb8545784a241e06a62a8110a","R-tab-5aa589ba734396f6c25f293ea24fc1d0")'>
<span class=tab-nav-text>factory.go</span>
</button>
<button aria-controls=R-tab-id-312171fb0f5213139d8a673afe7887a0 aria-expanded=false data-tab-item=R-tab-b4bda758a2aef091432646c354b4dc59 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4100013bb8545784a241e06a62a8110a","R-tab-b4bda758a2aef091432646c354b4dc59")'>
<span class=tab-nav-text>config.go</span>
</button>
<button aria-controls=R-tab-id-f98b6cbcac364cacba0d09961d925251 aria-expanded=false data-tab-item=R-tab-aafe740d5e6d08f015cd912160286b41 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4100013bb8545784a241e06a62a8110a","R-tab-aafe740d5e6d08f015cd912160286b41")'>
<span class=tab-nav-text>scraper.go</span>
</button>
<button aria-controls=R-tab-id-5191ae10973844cee3b4b330446bd96c aria-expanded=false data-tab-item=R-tab-6f5be00aa7a4344a722aa8fc34d13ab9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4100013bb8545784a241e06a62a8110a","R-tab-6f5be00aa7a4344a722aa8fc34d13ab9")'>
<span class=tab-nav-text>build-config.yaml</span>
</button>
<button aria-controls=R-tab-id-3f59f2aede5d2ecc70faf5b54e428aee aria-expanded=false data-tab-item=R-tab-5d31a174f263a0433738ed5261095688 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-4100013bb8545784a241e06a62a8110a","R-tab-5d31a174f263a0433738ed5261095688")'>
<span class=tab-nav-text>project layout</span></button></div><div class=tab-content-container><div id=R-tab-id-18214364ecd59bec0f05f8163beee4e2 data-tab-item=R-tab-5aa589ba734396f6c25f293ea24fc1d0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewFactory</span><span class=p>()</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>Factory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>receiver</span><span class=p>.</span><span class=nf>NewFactory</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>newDefaultConfig</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>receiver</span><span class=p>.</span><span class=nf>WithMetrics</span><span class=p>(</span><span class=nx>newMetricsReceiver</span><span class=p>,</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsStability</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newMetricsReceiver</span><span class=p>(</span><span class=nx>_</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>,</span> <span class=nx>cfg</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>consumer</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>)</span> <span class=p>(</span><span class=nx>receiver</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Convert the configuration into the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>conf</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.(</span><span class=o>*</span><span class=nx>Config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;can not convert config&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>sc</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>conf</span><span class=p>,</span> <span class=nx>set</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraperControllerReceiver</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&amp;</span><span class=nx>conf</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>set</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>consumer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>AddScraper</span><span class=p>(</span><span class=nx>sc</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-312171fb0f5213139d8a673afe7887a0 data-tab-item=R-tab-b4bda758a2aef091432646c354b4dc59 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule</span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newDefaultConfig</span><span class=p>()</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ScraperControllerSettings</span><span class=p>:</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewDefaultScraperControllerSettings</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>HTTPClientSettings</span><span class=p>:</span>        <span class=nx>confighttp</span><span class=p>.</span><span class=nf>NewDefaultHTTPClientSettings</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>MetricsBuilderConfig</span><span class=p>:</span>      <span class=nx>metadata</span><span class=p>.</span><span class=nf>DefaultMetricsBuilderConfig</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-f98b6cbcac364cacba0d09961d925251 data-tab-item=R-tab-aafe740d5e6d08f015cd912160286b41 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a our scraper with our values</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// To be filled in later</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span> <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetrics</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-5191ae10973844cee3b4b330446bd96c data-tab-item=R-tab-6f5be00aa7a4344a722aa8fc34d13ab9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Conf workshop collector&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v0.0.0-experimental</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/basicauthextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>splunk.conf/workshop/example/jenkinscireceiver v0.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./jenkinscireceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlphttpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># This replace is a go directive that allows for redefine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># where to fetch the code to use since the default would be from a remote project.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>replaces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=l>splunk.conf/workshop/example/jenkinscireceiver =&gt; ./jenkinscireceiver</span></span></span></code></pre></div></div></div><div id=R-tab-id-3f59f2aede5d2ecc70faf5b54e428aee data-tab-item=R-tab-5d31a174f263a0433738ed5261095688 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â”œâ”€â”€ build-config.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ jenkinscireceiver
</span></span><span class=line><span class=cl>    â”œâ”€â”€ go.mod
</span></span><span class=line><span class=cl>    â”œâ”€â”€ config.go
</span></span><span class=line><span class=cl>    â”œâ”€â”€ factory.go
</span></span><span class=line><span class=cl>    â”œâ”€â”€ scraper.go
</span></span><span class=line><span class=cl>    â””â”€â”€ internal
</span></span><span class=line><span class=cl>      â””â”€â”€ metadata</span></span></code></pre></div></div></div></div></div><p>ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æœŸå¾…ã•ã‚Œã‚‹å†…å®¹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ›¸ãè¾¼ã‚“ã ã‚‰ã€<code>go mod tidy</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®ãƒªãƒ¢ãƒ¼ãƒˆä¾å­˜é–¢ä¿‚ãŒãƒ•ã‚§ãƒƒãƒã•ã‚Œã€<code>go.mod</code> ãŒæ›´æ–°ã•ã‚Œã€<code>go.sum</code> ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-é–‹ç™º>OpenTelemetry Collector é–‹ç™º</h1><h2 id=ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ§‹ç¯‰>ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ§‹ç¯‰</h2><p>ã“ã®æ™‚ç‚¹ã§ã€ç¾åœ¨ä½•ã‚‚ã—ãªã„ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ãŸã‚ã€Jenkins ã‹ã‚‰ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ãŸã‚ã«å¿…è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã“ã‹ã‚‰ã€å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™</p><ol><li>Jenkins ã«æ¥ç¶šã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹</li><li>è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹</li><li>è¨­å®šã•ã‚ŒãŸã‚¸ãƒ§ãƒ–ã®æœ€å¾Œã®ãƒ“ãƒ«ãƒ‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å ±å‘Šã™ã‚‹</li><li>ã‚³ãƒŸãƒƒãƒˆã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨ã‚¸ãƒ§ãƒ–å®Œäº†ã®æ™‚é–“å·®ã‚’è¨ˆç®—ã™ã‚‹</li></ol><p>å¤‰æ›´ã¯ <code>scraper.go</code> ã«å¯¾ã—ã¦è¡Œã‚ã‚Œã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-3a6fb3411a2a0a7a764fbecdb129cfa2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-45838ed6d4e180eb12c1831f1a58085e aria-expanded=true data-tab-item=R-tab-e6caaeba69313021097a6d23f5219e15 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-3a6fb3411a2a0a7a764fbecdb129cfa2","R-tab-e6caaeba69313021097a6d23f5219e15")'>
<span class=tab-nav-text><ol><li>Add Jenkins client</li></ol></span></button>
<button aria-controls=R-tab-id-863b8d42d57e3c5d9033c35336dfc363 aria-expanded=false data-tab-item=R-tab-577ba80910e4dfcb4e3e9abe5506eace class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3a6fb3411a2a0a7a764fbecdb129cfa2","R-tab-577ba80910e4dfcb4e3e9abe5506eace")'>
<span class=tab-nav-text><ol start=2><li>Capture all configured jobs</li></ol></span></button>
<button aria-controls=R-tab-id-c293417e809aa01aca07c804003ce1ee aria-expanded=false data-tab-item=R-tab-244ea624a2547544c8f517690b672fd5 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3a6fb3411a2a0a7a764fbecdb129cfa2","R-tab-244ea624a2547544c8f517690b672fd5")'>
<span class=tab-nav-text><ol start=3><li>Report the status of each job</li></ol></span></button>
<button aria-controls=R-tab-id-4b968da2af2fd1f26742ef6cb4ccfe02 aria-expanded=false data-tab-item=R-tab-938c78fab74f4685403ec8d68561f6d1 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-3a6fb3411a2a0a7a764fbecdb129cfa2","R-tab-938c78fab74f4685403ec8d68561f6d1")'>
<span class=tab-nav-text><ol start=4><li>Report the delta</li></ol></span></button></div><div class=tab-content-container><div id=R-tab-id-45838ed6d4e180eb12c1831f1a58085e data-tab-item=R-tab-e6caaeba69313021097a6d23f5219e15 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>Jenkins ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€<a href=https://pkg.go.dev/github.com/yosida95/golang-jenkins rel=external>&ldquo;github.com/yosida95/golang-jenkins&rdquo;</a> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€Jenkins ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ãŸã‚ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>æ¬¡ã«ã€<a href=https://pkg.go.dev/go.opentelemetry.io/collector/receiver/scraperhelper rel=external>&ldquo;go.opentelemetry.io/collector/receiver/scraperhelper&rdquo;</a> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’åˆ©ç”¨ã—ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®èµ·å‹•ãŒå®Œäº†ã—ãŸå¾Œã« Jenkins ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã‚‹ã‚ˆã†ã« start é–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>jenkins</span> <span class=s>&#34;github.com/yosida95/golang-jenkins&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/pdata/pmetric&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mb</span>     <span class=o>*</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilder</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span> <span class=o>*</span><span class=nx>jenkins</span><span class=p>.</span><span class=nx>Jenkins</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>mb</span> <span class=p>:</span> <span class=nx>metadata</span><span class=p>.</span><span class=nf>NewMetricsBuilder</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span><span class=p>,</span> <span class=nx>set</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>WithStart</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>h</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Host</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>client</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.</span><span class=nf>ToClient</span><span class=p>(</span><span class=nx>h</span><span class=p>,</span> <span class=nx>set</span><span class=p>.</span><span class=nx>TelemetrySettings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>// The collector provides a means of injecting authentication</span>
</span></span><span class=line><span class=cl>            <span class=c1>// on our behalf, so this will ignore the libraries approach</span>
</span></span><span class=line><span class=cl>            <span class=c1>// and use the configured http client with authentication.</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span> <span class=p>=</span> <span class=nx>jenkins</span><span class=p>.</span><span class=nf>NewJenkins</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Endpoint</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>SetHTTPClient</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>ã“ã‚Œã§ Jenkins ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸã€‚</p></div></div><div id=R-tab-id-863b8d42d57e3c5d9033c35336dfc363 data-tab-item=R-tab-577ba80910e4dfcb4e3e9abe5506eace class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ã“ã“ã‹ã‚‰ã¯ã€å…¥åŠ›ã‚’å¾…ã£ã¦ã„ãŸ <code>scrape</code> ãƒ¡ã‚½ãƒƒãƒ‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€è¨­å®šã§æ§‹æˆã•ã‚ŒãŸé–“éš”ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æ¯åˆ†ï¼‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><p>è¨­å®šã•ã‚ŒãŸã‚¸ãƒ§ãƒ–ã®æ•°ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸã„ç†ç”±ã¯ã€Jenkins ã‚µãƒ¼ãƒãƒ¼ã®æˆé•·ã‚’ç¢ºèªã—ã€ã‚ªãƒ³ãƒœãƒ¼ãƒ‰ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ•°ã‚’æ¸¬å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã€Jenkins ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ãƒªã‚¹ãƒˆã—ã€ã‚¨ãƒ©ãƒ¼ãŒå ±å‘Šã•ã‚ŒãŸå ´åˆã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãªã—ã§ãã‚Œã‚’è¿”ã—ã€ãã†ã§ãªã‘ã‚Œã°ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ“ãƒ«ãƒ€ãƒ¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value.</span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-c293417e809aa01aca07c804003ce1ee data-tab-item=R-tab-244ea624a2547544c8f517690b672fd5 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€ã‚¸ãƒ§ãƒ–ã®æ•°ã‚’å ±å‘Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€å„ã‚¸ãƒ§ãƒ–ã‚’èª¿ã¹ã€å ±å‘Šã•ã‚ŒãŸå€¤ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value.</span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// This will check the result of the job, however,</span>
</span></span><span class=line><span class=cl>        <span class=c1>// since the only defined attributes are</span>
</span></span><span class=line><span class=cl>        <span class=c1>// `success`, `failure`, and `unknown`.</span>
</span></span><span class=line><span class=cl>        <span class=c1>// it is assume that anything did not finish</span>
</span></span><span class=line><span class=cl>        <span class=c1>// with a success or failure to be an unknown status.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>build</span><span class=p>.</span><span class=nx>Result</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;aborted&#34;</span><span class=p>,</span> <span class=s>&#34;not_built&#34;</span><span class=p>,</span> <span class=s>&#34;unstable&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;success&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusSuccess</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;failure&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusFailed</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobDurationDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span><span class=p>.</span><span class=nx>Duration</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div id=R-tab-id-4b968da2af2fd1f26742ef6cb4ccfe02 data-tab-item=R-tab-938c78fab74f4685403ec8d68561f6d1 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ã‚¸ãƒ§ãƒ–å®Œäº†ã¾ã§ã«ã‹ã‹ã£ãŸæ™‚é–“ã‚’è¨ˆç®—ã—ã€DORA ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ¨æ¸¬ã™ã‚‹ã®ã«å½¹ç«‹ã¦ã‚‹ã“ã¨ã§ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value.</span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Previous step here</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure that the `ChangeSet` has values</span>
</span></span><span class=line><span class=cl>        <span class=c1>// set so there is a valid value for us to reference</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Making the assumption that the first changeset</span>
</span></span><span class=line><span class=cl>        <span class=c1>// item is the most recent change.</span>
</span></span><span class=line><span class=cl>        <span class=nx>change</span> <span class=o>:=</span> <span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Record the difference from the build time</span>
</span></span><span class=line><span class=cl>        <span class=c1>// compared against the change timestamp.</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobCommitDeltaDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>Timestamp</span><span class=o>-</span><span class=nx>change</span><span class=p>.</span><span class=nx>Timestamp</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>ã“ã‚Œã‚‰ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã™ã¹ã¦å®Œäº†ã™ã‚‹ã¨ã€ã‚«ã‚¹ã‚¿ãƒ  Jenkins CI ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®æ§‹ç¯‰ãŒå®Œäº†ã§ã™ï¼</p><h2 id=æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰æ¬²ã—ã„æ©Ÿèƒ½ãŒãŠãã‚‰ãã‚‚ã£ã¨ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã°</p><ul><li>ã‚¸ãƒ§ãƒ–ãŒä½¿ç”¨ã—ãŸãƒ–ãƒ©ãƒ³ãƒåã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ</li><li>ã‚¸ãƒ§ãƒ–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ</li><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç´¯ç©ã‚¸ãƒ§ãƒ–æœŸé–“ã‚’ã©ã®ã‚ˆã†ã«è¨ˆç®—ã—ã¾ã™ã‹ï¼Ÿ</li><li>å¤‰æ›´ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ã©ã®ã‚ˆã†ã«æ¤œè¨¼ã—ã¾ã™ã‹ï¼Ÿ</li></ul><p>ã“ã®æ™‚é–“ã‚’ä½¿ã£ã¦ã€éŠã‚“ã§ã¿ãŸã‚Šã€å£Šã—ã¦ã¿ãŸã‚Šã€å¤‰æ›´ã—ãŸã‚Šã€ãƒ“ãƒ«ãƒ‰ã‹ã‚‰ãƒ­ã‚°ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã¿ãŸã‚Šã—ã¦ãã ã•ã„ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section></section><article class=default><header class=headline></header><h1 id=advanced-opentelemetry-collector>Advanced OpenTelemetry Collector</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>75 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Authors
</span><span class=badge-content>Robert Castley, Charity Anderson, Pieter Hagen, & Geoff Higginbottom</span></span><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ç›®çš„ã¯ã€OpenTelemetry Collector ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆãƒ»å¤‰æ›´ã™ã‚‹éš›ã®è‡ªä¿¡ã‚’æ·±ã‚ã‚‹ã“ã¨ã§ã™ã€‚æœ€å°é™ã® <code>agent.yaml</code> ã¨ <code>gateway.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å§‹ã‚ã€ã„ãã¤ã‹ã®é«˜åº¦ãªå®Ÿéš›ã®ã‚·ãƒŠãƒªã‚ªã«å¯¾å¿œã§ãã‚‹ã‚ˆã†æ®µéšçš„ã«æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ™ãƒ³ãƒ€ãƒ¼ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã™ã‚‹ã®ã§ã¯ãªãã€ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã™ã‚‹ã‚ˆã† OpenTelemetry Collector ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶ã“ã¨ã§ã™ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ãƒ‡ãƒãƒƒã‚°ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã ã‘ã§ãªãã€æœ¬ç•ªã‚·ã‚¹ãƒ†ãƒ ã¸ã®ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã‚’é¿ã‘ãŸã„ãƒ†ã‚¹ãƒˆã‚„é–‹ç™ºç’°å¢ƒã«ã‚‚æœ€é©ã§ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’æœ€å¤§é™ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®çŸ¥è­˜ãŒå¿…è¦ã§ã™</p><ul><li>OpenTelemetry Collector ã¨ãã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã®åŸºæœ¬çš„ãªç†è§£</li><li>YAML ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ã‚¹ã‚­ãƒ«</li></ul><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã™ã¹ã¦ã®å†…å®¹ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€å®Ÿè·µçš„ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ã„å­¦ç¿’ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚ãã‚Œã§ã¯ã€æ§‹ç¯‰ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</p><h2 id=ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®æ¦‚è¦>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®æ¦‚è¦</h2><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€ä»¥ä¸‹ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’å–ã‚Šä¸Šã’ã¾ã™</p><ul><li><strong>Agent ã¨ Gateway ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</strong>: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ãŒ Agent çµŒç”±ã§ Gateway ã«é€ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</li><li><strong>Agent ã®è€éšœå®³æ€§ã‚’å¼·åŒ–</strong>: ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ã‚¹ã®ãŸã‚ã®åŸºæœ¬è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</li><li><strong>Processor ã®è¨­å®š</strong>:<ul><li>ç‰¹å®šã®ã‚¹ãƒ‘ãƒ³ï¼ˆä¾‹ï¼šãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼‰ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ãƒã‚¤ã‚ºã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</li><li>ä¸è¦ãªã‚¿ã‚°ã‚’å‰Šé™¤ã—ã€æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¾ã™ã€‚</li><li>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‰ã«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ OTTLï¼ˆOpenTelemetry Transformation Languageï¼‰ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã—ã¾ã™ã€‚</li></ul></li><li><strong>Connector ã®è¨­å®š</strong>:<ul><li>å—ä¿¡ã—ãŸå€¤ã«åŸºã¥ã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’ç•°ãªã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚</li></ul></li></ul><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’çµ‚äº†ã™ã‚‹ã¨ã€ã•ã¾ã–ã¾ãªå®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹ OpenTelemetry Collector ã®è¨­å®šã«ç²¾é€šã—ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/28</span></span></footer></article><section><h1 class=a11y-only>Advanced OpenTelemetry Collectorã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=å‰ææ¡ä»¶>å‰ææ¡ä»¶</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<h3 id=å‰ææ¡ä»¶>å‰ææ¡ä»¶</h3><ul><li><code>vi</code>ã€<code>vim</code>ã€<code>nano</code>ã€ã¾ãŸã¯ãŠå¥½ã¿ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹ã‚¹ã‚­ãƒ«</li><li>ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ç’°å¢ƒ<ul><li>æä¾›ã•ã‚Œã‚‹ Splunk Workshop ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆæ¨å¥¨ï¼‰ã€‚<code>ssh</code> ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã«ãƒãƒ¼ãƒˆ <code>2222</code> ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã§ã™ã€‚</li><li>Apple Macï¼ˆApple Siliconï¼‰ã€‚<code>jq</code> ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ - <a href=https://jqlang.org/download/ rel=external><strong>https://jqlang.org/download/</strong></a></li></ul></li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ</strong>: ç’°å¢ƒå†…ã§æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir advanced-otel-workshop <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=nb>cd</span> advanced-otel-workshop</span></span></code></pre></div><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®æ®‹ã‚Šã®éƒ¨åˆ†ã§ã¯ã€ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ <code>[WORKSHOP]</code> ã¨å‘¼ã³ã¾ã™ã€‚</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
æ—¢å­˜ã® OpenTelemetry Collector ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„</summary><div class=box-content><p>Splunk IM ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’å®Œäº†ã—ã¦ã„ã‚‹å ´åˆã¯ã€ç¶šè¡Œã™ã‚‹å‰ã« Kubernetes ã§å®Ÿè¡Œä¸­ã® Collector ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å‰Šé™¤ã§ãã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div><p>ãã®å ´åˆã€EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¨å¹²æ¸‰ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯åœæ­¢ã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl delete ~/workshop/apm/deployment.yaml</span></span></code></pre></div></div></details><p><strong>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ãƒã‚¤ãƒŠãƒªã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</strong>: <code>[WORKSHOP]</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€OpenTelemetry Collectorã€Load Generator ãƒã‚¤ãƒŠãƒªã€ãŠã‚ˆã³ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-7104c3f405ca516c25d580803aba0ab9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4ce91cb3820080be9cfc1d034ea90e95 aria-expanded=true data-tab-item=R-tab-82857c7966640c0cfd614ba8cc6f34f0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-7104c3f405ca516c25d580803aba0ab9","R-tab-82857c7966640c0cfd614ba8cc6f34f0")'>
<span class=tab-nav-text>Splunk Workshop Instance</span>
</button>
<button aria-controls=R-tab-id-f422924f536b103dea84a946b813c59a aria-expanded=false data-tab-item=R-tab-720c44a46151d66d4db2d011603e7e1f class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-7104c3f405ca516c25d580803aba0ab9","R-tab-720c44a46151d66d4db2d011603e7e1f")'>
<span class=tab-nav-text>Apple Silicon</span></button></div><div class=tab-content-container><div id=R-tab-id-4ce91cb3820080be9cfc1d034ea90e95 data-tab-item=R-tab-82857c7966640c0cfd614ba8cc6f34f0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L https://github.com/signalfx/splunk-otel-collector/releases/download/v0.136.0/otelcol_linux_amd64 -o otelcol <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/loadgen/build/loadgen-linux-amd64 -o loadgen <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/setup-workshop.sh -o setup-workshop.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>chmod +x setup-workshop.sh</span></span></code></pre></div></div></div><div id=R-tab-id-f422924f536b103dea84a946b813c59a data-tab-item=R-tab-720c44a46151d66d4db2d011603e7e1f class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L https://github.com/signalfx/splunk-otel-collector/releases/download/v0.136.0/otelcol_darwin_arm64 -o otelcol <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/loadgen/build/loadgen-darwin-arm64 -o loadgen <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -L https://github.com/splunk/observability-workshop/raw/refs/heads/main/workshop/ninja/advanced-otel/setup-workshop.sh -o setup-workshop.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>chmod +x setup-workshop.sh</span></span></code></pre></div></div></div></div></div><p><code>setup-workshop.sh</code> ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ­£ã—ã„æ¨©é™ã‚’è¨­å®šã—ã€<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®åˆæœŸè¨­å®šã‚‚ä½œæˆã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-15e6f11148ebfdb55081d3d1502330ef><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-7e5ed51a00cb913d340898f6ae80c25d aria-expanded=true data-tab-item=R-tab-ed1ba283b4cfb63aa90843a7e81a1de7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-15e6f11148ebfdb55081d3d1502330ef","R-tab-ed1ba283b4cfb63aa90843a7e81a1de7")'>
<span class=tab-nav-text>Setup Workshop</span>
</button>
<button aria-controls=R-tab-id-4324767959b90a65b14bd27ddee89c40 aria-expanded=false data-tab-item=R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-15e6f11148ebfdb55081d3d1502330ef","R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24")'>
<span class=tab-nav-text>Verify Setup</span></button></div><div class=tab-content-container><div id=R-tab-id-7e5ed51a00cb913d340898f6ae80c25d data-tab-item=R-tab-ed1ba283b4cfb63aa90843a7e81a1de7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./setup-workshop.sh</span></span></code></pre></div></div></div><div id=R-tab-id-4324767959b90a65b14bd27ddee89c40 data-tab-item=R-tab-f3e2501fbfa01a9bf4df67b1c72e5d24 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—
</span></span><span class=line><span class=cl>â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•    â•šâ–ˆâ–ˆâ•—
</span></span><span class=line><span class=cl>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•      â•šâ–ˆâ–ˆâ•—
</span></span><span class=line><span class=cl>â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—      â–ˆâ–ˆâ•”â•
</span></span><span class=line><span class=cl>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•”â•
</span></span><span class=line><span class=cl>â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â•    â•šâ•â•
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Welcome to the Splunk Advanced OpenTelemetry Workshop!
</span></span><span class=line><span class=cl>======================================================
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>macOS detected. Removing quarantine attributes...
</span></span><span class=line><span class=cl>otelcol version v0.126.0
</span></span><span class=line><span class=cl>Usage: loadgen [OPTIONS]
</span></span><span class=line><span class=cl>Options:
</span></span><span class=line><span class=cl>  -base       Send base traces (enabled by default)
</span></span><span class=line><span class=cl>  -health     Send health traces
</span></span><span class=line><span class=cl>  -security   Send security traces
</span></span><span class=line><span class=cl>  -logs       Enable logging of random quotes to quotes.log
</span></span><span class=line><span class=cl>  -json       Output logs in JSON format (only applicable with -logs)
</span></span><span class=line><span class=cl>  -count      Number of traces or logs to send (default: infinite)
</span></span><span class=line><span class=cl>  -h, --help  Display this help message
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Example:
</span></span><span class=line><span class=cl>  loadgen -health -security -count 10   Send 10 health and security traces
</span></span><span class=line><span class=cl>  loadgen -logs -json -count 5          Write 5 random quotes in JSON format to quotes.log
</span></span><span class=line><span class=cl>Creating workshop directories...
</span></span><span class=line><span class=cl>âœ“ Created subdirectories:
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 1-agent-gateway
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 2-building-resilience
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 3-dropping-spans
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 4-sensitive-data
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 5-transform-data
</span></span><span class=line><span class=cl>  â”œâ”€â”€ 6-routing-data
</span></span><span class=line><span class=cl>  â””â”€â”€ 7-sum-count
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating configuration files for 1-agent-gateway...
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector agent configuration file: 1-agent-gateway/agent.yaml
</span></span><span class=line><span class=cl>âœ“ Configuration file created successfully: 1-agent-gateway/agent.yaml
</span></span><span class=line><span class=cl>âœ“ File size:     4355 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector gateway configuration file: 1-agent-gateway/gateway.yaml
</span></span><span class=line><span class=cl>âœ“ Configuration file created successfully: 1-agent-gateway/gateway.yaml
</span></span><span class=line><span class=cl>âœ“ File size:     3376 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>âœ“ Completed configuration files for 1-agent-gateway
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating configuration files for 2-building-resilience...
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector agent configuration file: 2-building-resilience/agent.yaml
</span></span><span class=line><span class=cl>âœ“ Configuration file created successfully: 2-building-resilience/agent.yaml
</span></span><span class=line><span class=cl>âœ“ File size:     4355 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating OpenTelemetry Collector gateway configuration file: 2-building-resilience/gateway.yaml
</span></span><span class=line><span class=cl>âœ“ Configuration file created successfully: 2-building-resilience/gateway.yaml
</span></span><span class=line><span class=cl>âœ“ File size:     3376 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>âœ“ Completed configuration files for 2-building-resilience
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Workshop environment setup complete!
</span></span><span class=line><span class=cl>Configuration files created in the following directories:
</span></span><span class=line><span class=cl>  1-agent-gateway/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>    â””â”€â”€ gateway.yaml
</span></span><span class=line><span class=cl>  2-building-resilience/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>    â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=R-tabs-db02d0320838d4d2d3e937d047c20bb9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a863c19d61ba5736dc961ed0079afe03 aria-expanded=true data-tab-item=R-tab-b40a1b49bd294b76ac2b8778c756092f class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-db02d0320838d4d2d3e937d047c20bb9","R-tab-b40a1b49bd294b76ac2b8778c756092f")'>
<span class=tab-nav-text>Initial Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-a863c19d61ba5736dc961ed0079afe03 data-tab-item=R-tab-b40a1b49bd294b76ac2b8778c756092f class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[WORKSHOP]
</span></span><span class=line><span class=cl>â”œâ”€â”€ 1-agent-gateway
</span></span><span class=line><span class=cl>â”œâ”€â”€ 2-building-resilience
</span></span><span class=line><span class=cl>â”œâ”€â”€ 3-dropping-spans
</span></span><span class=line><span class=cl>â”œâ”€â”€ 4-sensitive-data
</span></span><span class=line><span class=cl>â”œâ”€â”€ 5-transform-data
</span></span><span class=line><span class=cl>â”œâ”€â”€ 6-routing-data
</span></span><span class=line><span class=cl>â”œâ”€â”€ 7-sum-count
</span></span><span class=line><span class=cl>â”œâ”€â”€ loadgen
</span></span><span class=line><span class=cl>â”œâ”€â”€ otelcol
</span></span><span class=line><span class=cl>â””â”€â”€ setup-workshop.sh</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=1-agent-è¨­å®šã®ç¢ºèª>1. Agent è¨­å®šã®ç¢ºèª</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>15 minutes</span>
</span>&nbsp;<p>ã‚ˆã†ã“ãï¼ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã‚’å«ã‚€å®Œå…¨ã«æ©Ÿèƒ½ã™ã‚‹ OpenTelemetry ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚</p><p>ã¾ãšã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç°¡å˜ã«ç¢ºèªã—ã¦ã€å…¨ä½“çš„ãªæ§‹é€ ã«æ…£ã‚Œã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’åˆ¶å¾¡ã™ã‚‹é‡è¦ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’é€šã˜ã¦ã€è¤‡æ•°ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚æ•´ç†ã—ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€å„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å›ºæœ‰ã®åå‰ã¾ãŸã¯è‰²ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¼”ç¿’ä¸­ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ç°¡å˜ã«è­˜åˆ¥ã—ã¦åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ <strong>Agent</strong>ã€<strong>Gateway</strong>ã€<strong>Loadgen</strong>ã€<strong>Test</strong> ã¨å‘¼ã³ã¾ã™ã€‚</p></div></details><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ol><li><p>æœ€åˆã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆã—ã€<strong>Agent</strong> ã¨åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚æœ€åˆã®æ¼”ç¿’ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª <code>[WORKSHOP]/1-agent-gateway</code> ã«ç§»å‹•ã—ã€å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> 1-agent-gateway
</span></span><span class=line><span class=cl>ls -l</span></span></code></pre></div></li><li><p>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€<strong>å‰ææ¡ä»¶</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ <code>setup-workshop.sh</code> ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†å®Ÿè¡Œã—ã¦ãã ã•ã„</p><div class=tab-panel data-tab-group=R-tabs-1d567166c7c83a2e30bad9aacf167772><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-446e442c8aec4b19be3a329e8ab2e94d aria-expanded=true data-tab-item=R-tab-3ea4b283eb322e1c6373d63f91d032be class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1d567166c7c83a2e30bad9aacf167772","R-tab-3ea4b283eb322e1c6373d63f91d032be")'>
<span class=tab-nav-text>Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-446e442c8aec4b19be3a329e8ab2e94d data-tab-item=R-tab-3ea4b283eb322e1c6373d63f91d032be class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div></li></ol></div></details><h3 id=agent-è¨­å®šã®ç†è§£>Agent è¨­å®šã®ç†è§£</h3><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ä½¿ç”¨ã™ã‚‹ <code>agent.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸»è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«é‡è¦ãªè¿½åŠ ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚</p><h4 id=receiver>Receiver</h4><p><code>receivers</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€<strong>Agent</strong> ãŒãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã‚€æ–¹æ³•ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã¯ã€3ç¨®é¡ã® Receiver ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™</p><ul><li><p><strong>Host Metrics Receiver</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>                         </span><span class=c># Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>3600s        </span><span class=w> </span><span class=c># Collection Interval (1hr)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w>                             </span><span class=c># CPU Scraper</span></span></span></code></pre></div><p>ãƒ­ãƒ¼ã‚«ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰1æ™‚é–“ã”ã¨ã« CPU ä½¿ç”¨ç‡ã‚’åé›†ã—ã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ³ãƒ—ãƒ«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p></li><li><p><strong>OTLP Receiverï¼ˆHTTP ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼‰</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>otlp</span><span class=p>:</span><span class=w>                                </span><span class=c># OTLP Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>http</span><span class=p>:</span><span class=w>                            </span><span class=c># Configure HTTP protocol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.0.0.0:4318&#34;</span><span class=w>       </span><span class=c># Endpoint to bind to</span></span></span></code></pre></div><p>Agent ãŒãƒãƒ¼ãƒˆ <code>4318</code> ã§ HTTP çµŒç”±ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ã‚’å—ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ä»Šå¾Œã®æ¼”ç¿’ã§ Collector ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p></li><li><p><strong>FileLog Receiver</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>filelog/quotes</span><span class=p>:</span><span class=w>                      </span><span class=c># Receiver Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include</span><span class=p>:</span><span class=w> </span><span class=l>./quotes.log             </span><span class=w> </span><span class=c># The file to read log data from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include_file_path</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>            </span><span class=c># Include file path in the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>include_file_name</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>           </span><span class=c># Exclude file name from the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resource</span><span class=p>:</span><span class=w>                          </span><span class=c># Add custom resource attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>com.splunk.source</span><span class=p>:</span><span class=w> </span><span class=l>./quotes.log </span><span class=w> </span><span class=c># Source of the log data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>com.splunk.sourcetype</span><span class=p>:</span><span class=w> </span><span class=l>quotes   </span><span class=w> </span><span class=c># Source type of the log data</span></span></span></code></pre></div><p>Agent ãŒãƒ­ãƒ¼ã‚«ãƒ«ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<code>quotes.log</code>ï¼‰ã‚’ tail ã—ã€<code>source</code> ã‚„ <code>sourceType</code> ãªã©ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã§å¼·åŒ–ã•ã‚ŒãŸæ§‹é€ åŒ–ãƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆã«å¤‰æ›ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p></li></ul><h4 id=exporter>Exporter</h4><ul><li><p><strong>Debug Exporter</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>                               </span><span class=c># Exporter Type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed               </span><span class=w> </span><span class=c># Enabled detailed debug output</span></span></span></code></pre></div></li><li><p><strong>OTLPHTTP Exporter</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp</span><span class=p>:</span><span class=w>                            </span><span class=c># Exporter Type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://localhost:5318&#34;</span><span class=w>  </span><span class=c># Gateway OTLP endpoint</span></span></span></code></pre></div><p><code>debug</code> Exporter ã¯ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ä¸­ã®å¯è¦–æ€§ã¨ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«é€ä¿¡ã—ã€<code>otlphttp</code> Exporter ã¯ã™ã¹ã¦ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã® <strong>Gateway</strong> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«è»¢é€ã—ã¾ã™ã€‚</p><p><strong>ã“ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæˆ¦ç•¥ã«ã‚ˆã‚Šã€ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã—ãªãŒã‚‰ã€ã•ã‚‰ãªã‚‹å‡¦ç†ã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ãŸã‚ã«ãƒ€ã‚¦ãƒ³ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</strong></p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>1. Agent Configurationã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=11-gateway-è¨­å®šã®ç¢ºèª>1.1 Gateway è¨­å®šã®ç¢ºèª</h1><p><strong>OpenTelemetry Gateway</strong> ã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡ã€å‡¦ç†ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ãŸã‚ã®ä¸­å¤®ãƒãƒ–ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚½ãƒ¼ã‚¹ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚µãƒ¼ãƒ“ã‚¹ãªã©ï¼‰ã¨ Splunk Observability Cloud ã®ã‚ˆã†ãªã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–“ã«ä½ç½®ã—ã¾ã™ã€‚</p><p>ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’é›†ä¸­åŒ–ã™ã‚‹ã“ã¨ã§ã€Gateway ã¯ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚¨ãƒ³ãƒªãƒƒãƒãƒ¡ãƒ³ãƒˆã€å¤‰æ›ã€ãŠã‚ˆã³1ã¤ä»¥ä¸Šã®å®›å…ˆã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚’å®Ÿç¾ã—ã¾ã™ã€‚å€‹ã€…ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼å‡¦ç†ã‚’ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã§è² æ‹…ã‚’è»½æ¸›ã—ã€åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã§ä¸€è²«ã—ãŸæ¨™æº–åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºä¿ã—ã¾ã™ã€‚</p><p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ç®¡ç†ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€åˆ†æãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚ç‰¹ã«è¤‡é›‘ãªãƒãƒ«ãƒã‚µãƒ¼ãƒ“ã‚¹ç’°å¢ƒã§ã¯åŠ¹æœçš„ã§ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>2ã¤ç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã‹ä½œæˆã—ã€<strong>Gateway</strong> ã¨åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚æœ€åˆã®æ¼”ç¿’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª <code>[WORKSHOP]/1-agent-gateway</code> ã«ç§»å‹•ã—ã€<code>gateway.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><p>ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€<strong>Gateway</strong> ãƒ¢ãƒ¼ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸ OpenTelemetry Collector ã®ã‚³ã‚¢æ§‹é€ ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p></div></details><h3 id=gateway-è¨­å®šã®ç†è§£>Gateway è¨­å®šã®ç†è§£</h3><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ <strong>Gateway</strong> ãƒ¢ãƒ¼ãƒ‰ã® OpenTelemetry Collector ãŒã©ã®ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’å®šç¾©ã™ã‚‹ <code>gateway.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ã“ã® <strong>Gateway</strong> ã¯ã€<strong>Agent</strong> ã‹ã‚‰ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚’å—ä¿¡ã—ã€å‡¦ç†ã—ã¦ã‹ã‚‰æ¤œæŸ»ã¾ãŸã¯è»¢é€ã®ãŸã‚ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚</p><ul><li><p><strong>OTLP Receiverï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆï¼‰</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.0.0.0:5318&#34;</span></span></span></code></pre></div><p>ãƒãƒ¼ãƒˆ <code>5318</code> ã¯ <strong>Agent</strong> è¨­å®šã® <code>otlphttp</code> Exporter ã¨ä¸€è‡´ã—ã¦ãŠã‚Šã€<strong>Agent</strong> ãŒé€ä¿¡ã™ã‚‹ã™ã¹ã¦ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒ <strong>Gateway</strong> ã§å—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p></li></ul><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã®ãƒãƒ¼ãƒˆã®åˆ†é›¢ã«ã‚ˆã‚Šã€ç«¶åˆã‚’å›é¿ã—ã€Agent ã¨ Gateway ã®å½¹å‰²é–“ã®è²¬ä»»ã‚’æ˜ç¢ºã«ä¿ã¡ã¾ã™ã€‚</p></div></details><ul><li><p><strong>File Exporter</strong></p><p><strong>Gateway</strong> ã¯3ã¤ã® File Exporter ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã® Exporter ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>                        </span><span class=c># List of exporters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>debug</span><span class=p>:</span><span class=w>                          </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed          </span><span class=w> </span><span class=c># Enable detailed debug output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces</span><span class=p>:</span><span class=w>                    </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces.out&#34;</span><span class=w>  </span><span class=c># Path for OTLP JSON output for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/metrics</span><span class=p>:</span><span class=w>                   </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-metrics.out&#34;</span><span class=w> </span><span class=c># Path for OTLP JSON output for metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/logs</span><span class=p>:</span><span class=w>                      </span><span class=c># Exporter Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-logs.out&#34;</span><span class=w>    </span><span class=c># Path for OTLP JSON output for logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                 </span><span class=c># Overwrite the file each time</span></span></span></code></pre></div><p>å„ Exporter ã¯ã€ç‰¹å®šã®ã‚·ã‚°ãƒŠãƒ«ã‚¿ã‚¤ãƒ—ã‚’å¯¾å¿œã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ Gateway ãŒèµ·å‹•ã™ã‚‹ã¨ä½œæˆã•ã‚Œã€Agent ãŒãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã¨å®Ÿéš›ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãŒæ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’é€šéã™ã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã®æµã‚Œã‚’è¦³å¯Ÿã§ãã¾ã™ã€‚</p></li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=12-è¨­å®šã®æ¤œè¨¼ã¨ãƒ†ã‚¹ãƒˆ>1.2 è¨­å®šã®æ¤œè¨¼ã¨ãƒ†ã‚¹ãƒˆ</h1><p>æ¬¡ã«ã€<strong>Gateway</strong> ã¨ <strong>Agent</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚<strong>Agent</strong> ã¯èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã« <strong>Host Metrics</strong> ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒ <strong>Agent</strong> ã‹ã‚‰ <strong>Gateway</strong> ã«æ­£ã—ããƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway</strong>: <strong>Gateway ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ <strong>Gateway</strong> ã‚’èµ·å‹•ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-a9225bed981c137612dfaab131a06aed><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-e4a864fb027e6ece1321d7707630e17a aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-a9225bed981c137612dfaab131a06aed","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-e4a864fb027e6ece1321d7707630e17a data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p>ã™ã¹ã¦ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€Collector ãŒèµ·å‹•ã—ã€å‡ºåŠ›ã« <code>Everything is ready. Begin running and processing data.</code> ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-06-09T09:22:11.944+0100    info    service@v0.126.0/service.go:289 Everything is ready. Begin running and processing data. {&#34;resource&#34;: {}}</span></span></code></pre></div><p><strong>Gateway</strong> ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨ã€ãƒãƒ¼ãƒˆ <code>5318</code> ã§å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã€å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™</p><ul><li><code>gateway-traces.out</code></li><li><code>gateway-metrics.out</code></li><li><code>gateway-logs.out</code></li></ul><p><strong>Agent ã®èµ·å‹•</strong>: <strong>Agent ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€Agent è¨­å®šã‚’ä½¿ç”¨ã—ã¦ Agent ã‚’èµ·å‹•ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-94c1b04014d555521422f2fa6b249b97><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4865f4555d40eaae8a919581f4872b5d aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-94c1b04014d555521422f2fa6b249b97","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-4865f4555d40eaae8a919581f4872b5d data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>CPU ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ç¢ºèª</strong>:</p><ol><li><strong>Agent</strong> ãŒèµ·å‹•ã™ã‚‹ã¨ã€ã™ãã« <strong>CPU</strong> ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®é€ä¿¡ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</li><li><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã«ã“ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚å‡ºåŠ›ã¯ä»¥ä¸‹ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ã‚ˆã†ã«ãªã‚Šã¾ã™</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>NumberDataPoints #31
</span></span><span class=line><span class=cl>Data point attributes:
</span></span><span class=line><span class=cl>     -&gt; cpu: Str(cpu3)
</span></span><span class=line><span class=cl>     -&gt; state: Str(wait)
</span></span><span class=line><span class=cl>StartTimestamp: 2025-07-07 16:49:42 +0000 UTC
</span></span><span class=line><span class=cl>Timestamp: 2025-07-09 09:36:21.190226459 +0000 UTC
</span></span><span class=line><span class=cl>Value: 77.380000
</span></span><span class=line><span class=cl>        {&#34;resource&#34;: {}, &#34;otelcol.component.id&#34;: &#34;debug&#34;, &#34;otelcol.component.kind&#34;: &#34;exporter&#34;, &#34;otelcol.signal&#34;: &#34;metrics&#34;}</span></span></code></pre></div><p>ã“ã®æ®µéšã§ã€<strong>Agent</strong> ã¯1æ™‚é–“ã”ã¨ã¾ãŸã¯å†èµ·å‹•ã”ã¨ã« <strong>CPU</strong> ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã€Gateway ã«é€ä¿¡ã—ç¶šã‘ã¾ã™ã€‚<strong>Gateway</strong> ã¯ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å‡¦ç†ã—ã€<code>gateway-metrics.out</code> ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä¿å­˜ã—ã¾ã™ã€‚</p><p><strong>Gateway ã«ãƒ‡ãƒ¼ã‚¿ãŒåˆ°ç€ã—ãŸã“ã¨ã®ç¢ºèª</strong>: CPU ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆç‰¹ã« <code>cpu0</code>ï¼‰ãŒ Gateway ã«æ­£å¸¸ã«åˆ°é”ã—ãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€<code>jq</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ <code>gateway-metrics.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œæŸ»ã—ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€<code>system.cpu.time</code> ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦æŠ½å‡ºã—ã€<code>cpu0</code> ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®çŠ¶æ…‹ï¼ˆä¾‹ï¼š<code>user</code>ã€<code>system</code>ã€<code>idle</code>ã€<code>interrupt</code>ï¼‰ã¨å¯¾å¿œã™ã‚‹å€¤ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p><p>3ã¤ç›®ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã‹ä½œæˆã—ã€<strong>Tests</strong> ã¨åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚<strong>Tests ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ <code>system.cpu.time</code> ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-1f1742e3f4427c7eacbe15cf05cf2c1d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1e639278200dcece966400bab7cd3127 aria-expanded=true data-tab-item=R-tab-fe622e84764bc6f08467fa0eea9b5ec6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1f1742e3f4427c7eacbe15cf05cf2c1d","R-tab-fe622e84764bc6f08467fa0eea9b5ec6")'>
<span class=tab-nav-text>Check CPU Metrics</span>
</button>
<button aria-controls=R-tab-id-f0f7cf0393b2cd27287f5e01f34e7b0a aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1f1742e3f4427c7eacbe15cf05cf2c1d","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-1e639278200dcece966400bab7cd3127 data-tab-item=R-tab-fe622e84764bc6f08467fa0eea9b5ec6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[] | select(.name == &#34;system.cpu.time&#34;) | .sum.dataPoints[] | select(.attributes[0].value.stringValue == &#34;cpu0&#34;) | {cpu: .attributes[0].value.stringValue, state: .attributes[1].value.stringValue, value: .asDouble}&#39;</span> gateway-metrics.out</span></span></code></pre></div></div></div><div id=R-tab-id-f0f7cf0393b2cd27287f5e01f34e7b0a data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>123407.02</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;system&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>64866.6</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;idle&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mf>216427.87</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;cpu&#34;</span><span class=p>:</span> <span class=s2>&#34;cpu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span><span class=p>:</span> <span class=s2>&#34;interrupt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=2-è€éšœå®³æ€§ã®æ§‹ç¯‰>2. è€éšœå®³æ€§ã®æ§‹ç¯‰</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>OpenTelemetry Collector ã® <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/19bc7d6ee854c0c1b5c97d8d348e5b9d1199e8aa/extension/storage/filestorage/README.md rel=external><strong>FileStorage Extension</strong></a> ã¯ã€ã‚ˆã‚Šè€éšœå®³æ€§ã®é«˜ã„ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®é‡è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Collector ã¯å‡¦ç†ä¸­ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºå®Ÿã«ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã—ã€ãƒªãƒˆãƒ©ã‚¤ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã—ã€è²´é‡ãªãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚’å¤±ã†ã“ã¨ãªãä¸€æ™‚çš„ãªéšœå®³ã‚’é©åˆ‡ã«å‡¦ç†ã§ãã¾ã™ã€‚</p><p>FileStorage ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€Collector ã¯ä¸­é–“çŠ¶æ…‹ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ°¸ç¶šåŒ–ã§ãã‚‹ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸­æ–­ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åœæ­¢ã€ã¾ãŸã¯ Collector ã®å†èµ·å‹•æ™‚ã«ã‚‚ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ãŒå¤±ã‚ã‚Œãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒåˆ‡æ–­ã•ã‚ŒãŸã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒä¸€æ™‚çš„ã«åˆ©ç”¨ã§ããªããªã£ãŸã‚Šã—ã¦ã‚‚ã€Collector ã¯ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã®å—ä¿¡ã¨ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã‚’ç¶™ç¶šã—ã€æ¥ç¶šãŒå¾©æ—§ã™ã‚‹ã¨é…ä¿¡ã‚’ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«å†é–‹ã—ã¾ã™ã€‚</p><p>FileStorage Extension ã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«çµ±åˆã™ã‚‹ã“ã¨ã§ã€ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚¹ã‚¿ãƒƒã‚¯ã®è€ä¹…æ€§ã‚’å¼·åŒ–ã—ã€æ¥ç¶šãŒä¸å®‰å®šãªç’°å¢ƒã§ã‚‚é«˜å“è³ªãªãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼å–ã‚Šè¾¼ã¿ã‚’ç¶­æŒã§ãã¾ã™ã€‚<details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€æ¥ç¶šãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãŒçŸ­ã„å ´åˆï¼ˆæœ€å¤§15åˆ†ï¼‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¯¾ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãŒã“ã‚Œã‚’è¶…ãˆã‚‹ã¨ã€Splunk Observability Cloud ã¯ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã®é †åºãŒä¹±ã‚Œãªã„ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãƒ­ã‚°ã«ã¤ã„ã¦ã¯ã€ä»Šå¾Œã® Splunk OpenTelemetry Collector ãƒªãƒªãƒ¼ã‚¹ã§å®Œå…¨ãªã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå¯¾å¿œã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹è¨ˆç”»ãŒã‚ã‚Šã¾ã™ã€‚</p></div></details></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article><section><h1 class=a11y-only>2. Building Resilienceã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=21-file-storage-ã®è¨­å®š>2.1 File Storage ã®è¨­å®š</h1><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<code>agent.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã® <code>extensions:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ OpenTelemetry è¨­å®š YAML ã®ä¸€éƒ¨ã§ã‚ã‚Šã€OpenTelemetry Collector ã®å‹•ä½œã‚’æ‹¡å¼µã¾ãŸã¯å¤‰æ›´ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥å‡¦ç†ã—ã¾ã›ã‚“ãŒã€Collector ã®æ©Ÿèƒ½ã‚’å‘ä¸Šã•ã›ã‚‹è²´é‡ãªæ©Ÿèƒ½ã¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong><em>ã™ã¹ã¦ã®</em> ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>2-building-resilience</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-d540b56015c944f8518c9fbe9bcf22ed><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-25424705e24a8c145bad47fa74533082 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-d540b56015c944f8518c9fbe9bcf22ed","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-25424705e24a8c145bad47fa74533082 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong><code>agent.yaml</code> ã®æ›´æ–°</strong>: <strong>Agent ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€æ—¢å­˜ã® <code>health_check</code> Extension ã®ä¸‹ã« <code>file_storage</code> Extension ã‚’è¿½åŠ ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>file_storage/checkpoint</span><span class=p>:</span><span class=w>             </span><span class=c># Extension Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./checkpoint-dir&#34;</span><span class=w>      </span><span class=c># Define directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>create_directory</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>             </span><span class=c># Create directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>1s                       </span><span class=w> </span><span class=c># Timeout for file operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>compaction</span><span class=p>:</span><span class=w>                        </span><span class=c># Compaction settings</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_start</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                   </span><span class=c># Start compaction at Collector startup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Define compaction directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./checkpoint-dir/tmp&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>max_transaction_size</span><span class=p>:</span><span class=w> </span><span class=m>65536</span><span class=w>      </span><span class=c># Max. size limit before compaction occurs</span></span></span></code></pre></div><p><strong>Exporter ã¸ã® <code>file_storage</code> ã®è¿½åŠ </strong>: <code>otlphttp</code> Exporter ã‚’å¤‰æ›´ã—ã¦ã€ãƒªãƒˆãƒ©ã‚¤ã¨ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’è¨­å®šã—ã€éšœå®³ãŒç™ºç”Ÿã—ãŸå ´åˆã«ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œå†é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<code>endpoint: "http://localhost:5318"</code> ã®ä¸‹ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒ <code>endpoint</code> ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>retry_on_failure</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                    </span><span class=c># Enable retry on failure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>sending_queue</span><span class=p>:</span><span class=w>                     </span><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>                    </span><span class=c># Enable sending queue</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>num_consumers</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>                </span><span class=c># No. of consumers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>queue_size</span><span class=p>:</span><span class=w> </span><span class=m>10000</span><span class=w>                </span><span class=c># Max. queue size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>file_storage/checkpoint</span><span class=w> </span><span class=c># File storage extension</span></span></span></code></pre></div><p><strong><code>services</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ›´æ–°</strong>: æ—¢å­˜ã® <code>extensions:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>file_storage/checkpoint</code> Extension ã‚’è¿½åŠ ã—ã¾ã™ã€‚è¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>health_check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>file_storage/checkpoint           </span><span class=w> </span><span class=c># Enabled extensions for this collector</span></span></span></code></pre></div><p><strong><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ›´æ–°</strong>: ã“ã®æ¼”ç¿’ã§ã¯ã€ãƒ‡ãƒãƒƒã‚°ã¨ãƒ­ã‚°ã®ãƒã‚¤ã‚ºã‚’æ¸›ã‚‰ã™ãŸã‚ã«ã€Metric ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ <code>hostmetrics</code> Receiver ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚è¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># - hostmetrics                    # Hostmetric reciever (cpu only)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span></span></span></code></pre></div></div></details><p><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ <strong>Agent</strong> è¨­å®šã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚å‚è€ƒã¾ã§ã«ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>metrics:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO2(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      EXP1(&amp;ensp;debug&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(otlphttp&lt;br&gt;fa:fa-upload):::exporter
      EXP3(&amp;ensp;file&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    %% Links
    subID1:::sub-metrics
    subgraph &#34; &#34;
      subgraph subID1[**Metrics**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO2
      PRO2 --&gt; PRO3
      PRO3 --&gt; EXP1
      PRO3 --&gt; EXP3
      PRO3 --&gt; EXP2
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=22-è€éšœå®³æ€§ãƒ†ã‚¹ãƒˆç”¨ã®ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—>2.2 è€éšœå®³æ€§ãƒ†ã‚¹ãƒˆç”¨ã®ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1><p>æ¬¡ã«ã€<strong>File Storage</strong> è¨­å®šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æº–å‚™ã¨ã—ã¦ç’°å¢ƒã‚’è¨­å®šã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã®èµ·å‹•</strong>: <strong>Gateway ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-e35fd72545a1fc707e1a1cd17a6a721f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-4439c5b85b66ec6980a4e110e8a9aaa3 aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-e35fd72545a1fc707e1a1cd17a6a721f","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-4439c5b85b66ec6980a4e110e8a9aaa3 data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã®èµ·å‹•</strong>: <strong>Agent ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-025b9f01fa17aa5c679891c583c6432c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-abf40e4321be62ea84b1df2204263b34 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-025b9f01fa17aa5c679891c583c6432c","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-abf40e4321be62ea84b1df2204263b34 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>5ã¤ã®ãƒ†ã‚¹ãƒˆã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡</strong>: <strong>Loadgen ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-ebdcb53381b2857782b534f83a00df4e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8aa89f6625b33a78b6cbeaa61dc3317a aria-expanded=true data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-ebdcb53381b2857782b534f83a00df4e","R-tab-5386e98c2a18696103b86ab3f8520915")'>
<span class=tab-nav-text>Start Load Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-8aa89f6625b33a78b6cbeaa61dc3317a data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã€<strong>Gateway</strong> ãŒ <code>./gateway-traces.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã¯ãšã§ã™ã€‚</p><p>ã™ã¹ã¦ãŒæ­£å¸¸ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã®è€éšœå®³æ€§ã®ãƒ†ã‚¹ãƒˆã«é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=23-éšœå®³ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³>2.3 éšœå®³ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1><p><strong>Agent</strong> ã®è€éšœå®³æ€§ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€ä¸€æ™‚çš„ãª <strong>Gateway</strong> ã®åœæ­¢ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã€<strong>Agent</strong> ãŒãã‚Œã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹ã‚’è¦³å¯Ÿã—ã¾ã™</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯éšœå®³ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong>: <strong>Gateway ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã§ <code>Ctrl-C</code> ã‚’ä½¿ç”¨ã—ã¦ <strong>Gateway</strong> ã‚’åœæ­¢ã—ã€Gateway ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒåœæ­¢ã—ãŸã“ã¨ã‚’ç¤ºã™ã¾ã§å¾…ã¡ã¾ã™ã€‚<strong>Agent</strong> ã¯å¼•ãç¶šãå®Ÿè¡Œã•ã‚Œã¾ã™ãŒã€Gateway ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã€‚<strong>Gateway ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã®å‡ºåŠ›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-09T10:22:37.941Z        info    service@v0.126.0/service.go:345 Shutdown complete.      {&#34;resource&#34;: {}}</span></span></code></pre></div><p><strong>ãƒˆãƒ¬ãƒ¼ã‚¹ã®é€ä¿¡</strong>: <strong>Loadgen ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€<code>loadgen</code> ã‚’ä½¿ç”¨ã—ã¦ã•ã‚‰ã«5ã¤ã®ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-0d3760297fadf260add95bd21ece7831><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-692cec06a9c3539b36f7a7eb34982537 aria-expanded=true data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0d3760297fadf260add95bd21ece7831","R-tab-5386e98c2a18696103b86ab3f8520915")'>
<span class=tab-nav-text>Start Load Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-692cec06a9c3539b36f7a7eb34982537 data-tab-item=R-tab-5386e98c2a18696103b86ab3f8520915 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p>Agent ã®ãƒªãƒˆãƒ©ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒæœ‰åŠ¹ã«ãªã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚’å†é€ä¿¡ã—ã‚ˆã†ã¨ç¶™ç¶šçš„ã«è©¦ã¿ã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚Agent ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¹°ã‚Šè¿”ã—è¡¨ç¤ºã•ã‚Œã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-01-28T14:22:47.020+0100  info  internal/retry_sender.go:126  Exporting failed. Will retry the request after interval.  {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;traces&#34;, &#34;name&#34;: &#34;otlphttp&#34;, &#34;error&#34;: &#34;failed to make an HTTP request: Post \&#34;http://localhost:5318/v1/traces\&#34;: dial tcp 127.0.0.1:5318: connect: connection refused&#34;, &#34;interval&#34;: &#34;9.471474933s&#34;}</span></span></code></pre></div><p><strong>Agent ã®åœæ­¢</strong>: <strong>Agent ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€<code>Ctrl-C</code> ã‚’ä½¿ç”¨ã—ã¦ Agent ã‚’åœæ­¢ã—ã¾ã™ã€‚Agent ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒåœæ­¢ã‚’ç¢ºèªã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-09T10:25:59.344Z        info    service@v0.126.0/service.go:345 Shutdown complete.      {&#34;resource&#34;: {}}</span></span></code></pre></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>Agent ã‚’åœæ­¢ã™ã‚‹ã¨ã€ãƒªãƒˆãƒ©ã‚¤ç”¨ã«ãƒ¡ãƒ¢ãƒªã«ä¿æŒã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ã¯å¤±ã‚ã‚Œã¾ã™ã€‚ãŸã ã—ã€FileStorage Extension ã‚’è¨­å®šã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã¾ã å—ã‘å…¥ã‚Œã‚‰ã‚Œã¦ã„ãªã„ã™ã¹ã¦ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã¯ãƒ‡ã‚£ã‚¹ã‚¯ã«å®‰å…¨ã«ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>Agent ã®åœæ­¢ã¯ã€Agent ãŒå†èµ·å‹•ã•ã‚ŒãŸã¨ãã«ã‚·ã‚¹ãƒ†ãƒ ãŒã©ã®ã‚ˆã†ã«å¾©æ—§ã™ã‚‹ã‹ã‚’æ˜ç¢ºã«ç¤ºã™ãŸã‚ã®é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=24-å¾©æ—§>2.4 å¾©æ—§</h1><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<strong>Gateway</strong> Collector ã‚’å†èµ·å‹•ã™ã‚‹ã“ã¨ã§ã€<strong>OpenTelemetry Collector</strong> ãŒãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯éšœå®³ã‹ã‚‰ã©ã®ã‚ˆã†ã«å¾©æ—§ã™ã‚‹ã‹ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚<strong>Gateway</strong> ãŒå†ã³åˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã¨ã€<strong>Agent</strong> ã¯æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã•ã‚ŒãŸçŠ¶æ…‹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡ã‚’å†é–‹ã—ã€ãƒ‡ãƒ¼ã‚¿æå¤±ãŒãªã„ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã®å†èµ·å‹•</strong>: <strong>Gateway ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-648ab8bf0922746c98053ba92258a31a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2537574cb11c21781ad3bc492d678bce aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-648ab8bf0922746c98053ba92258a31a","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-2537574cb11c21781ad3bc492d678bce data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã®å†èµ·å‹•</strong>: <strong>Agent ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-4763da35365f6bc48ccb14b779135a25><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-a5ef5c35434857f51d2a74c44df69d16 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4763da35365f6bc48ccb14b779135a25","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-a5ef5c35434857f51d2a74c44df69d16 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><blockquote><p><strong>Agent</strong> ãŒèµ·å‹•ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã¨ã€<strong>File_Storage</strong> Extension ãŒãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€ãƒ¼å†…ã®ãƒãƒƒãƒ•ã‚¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¤œå‡ºã—ã¾ã™ã€‚æœ€å¾Œã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‹ã‚‰ä¿å­˜ã•ã‚ŒãŸã‚¹ãƒ‘ãƒ³ã‚’ãƒ‡ã‚­ãƒ¥ãƒ¼ã—å§‹ã‚ã€ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œãªã„ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p></blockquote><p><strong>Agent ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã®ç¢ºèª:</strong> <strong>Agent</strong> ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã¯å¤‰åŒ–<strong>ã›ãš</strong>ã€ä»¥ä¸‹ã®è¡Œã‚’è¡¨ç¤ºã—ç¶šã‘ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>2025-07-11T08:31:58.176Z        info    service@v0.126.0/service.go:289 Everything is ready. Begin running and processing data.   {&#34;resource&#34;: {}}</span></span></code></pre></div><p><strong>Gateway ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã®ç¢ºèª</strong>
<strong>Gateway</strong> ã®ãƒ‡ãƒãƒƒã‚°ç”»é¢ã‹ã‚‰ã€ä»¥å‰è¦‹é€ƒã•ã‚Œã¦ã„ãŸãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¿½åŠ ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—ã§å—ä¿¡ã—å§‹ã‚ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã¯ãšã§ã™ã€‚ä¾‹</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>   -&gt; user.name: Str(Luke Skywalker)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>   -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(75.75)
</span></span><span class=line><span class=cl>      {&#34;resource&#34;: {}, &#34;otelcol.component.id&#34;: &#34;debug&#34;, &#34;otelcol.component.kind&#34;: &#34;exporter&#34;, &#34;otelcol.signal&#34;: &#34;traces&#34;}</span></span></code></pre></div><p><strong><code>gateway-traces.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª:</strong> <code>jq</code> ã‚’ä½¿ç”¨ã—ã¦ã€å†ä½œæˆã•ã‚ŒãŸ <code>gateway-traces.out</code> å†…ã®ãƒˆãƒ¬ãƒ¼ã‚¹æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚<strong>Gateway</strong> ãŒãƒ€ã‚¦ãƒ³ã—ã¦ã„ãŸã¨ãã«é€ä¿¡ã—ãŸæ•°ã¨ä¸€è‡´ã™ã‚‹ã¯ãšã§ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-99077aafd5a46d2a7e5a69cd693e8c34><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-031cde44233f3476a422bfc7734c4a12 aria-expanded=true data-tab-item=R-tab-4e2ba08c3a1a44c321b4ef1ba3812149 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-99077aafd5a46d2a7e5a69cd693e8c34","R-tab-4e2ba08c3a1a44c321b4ef1ba3812149")'>
<span class=tab-nav-text>Check Gateway Traces Out File</span>
</button>
<button aria-controls=R-tab-id-a2dd2bad821960890a24963a2bbe827c aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-99077aafd5a46d2a7e5a69cd693e8c34","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-031cde44233f3476a422bfc7734c4a12 data-tab-item=R-tab-4e2ba08c3a1a44c321b4ef1ba3812149 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans | length | &#34;\(.) resourceSpans found&#34;&#39;</span> gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-a2dd2bad821960890a24963a2bbe827c data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;5 resourceSpans found&#34;</span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details><h3 id=ã¾ã¨ã‚>ã¾ã¨ã‚</h3><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<code>file_storage</code> Extension ã®è¨­å®šã€<code>otlp</code> Exporter ã®ãƒªãƒˆãƒ©ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®æœ‰åŠ¹åŒ–ã€ãŠã‚ˆã³ä¸€æ™‚çš„ãªãƒ‡ãƒ¼ã‚¿ä¿å­˜ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚­ãƒ¥ãƒ¼ã®ä½¿ç”¨ã«ã‚ˆã‚Šã€OpenTelemetry Collector ã®è€éšœå®³æ€§ã‚’å¼·åŒ–ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã—ãŸã€‚</p><p>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨ã‚­ãƒ¥ãƒ¼ã®æ°¸ç¶šåŒ–ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒä¸€æ™‚çš„ãªä¸­æ–­ã‹ã‚‰é©åˆ‡ã«å¾©æ—§ã§ãã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã€æœ¬ç•ªç’°å¢ƒã§ã‚ˆã‚Šå …ç‰¢ã§ä¿¡é ¼æ€§ã®é«˜ã„ã‚‚ã®ã«ã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=3-spanã®ãƒ‰ãƒ­ãƒƒãƒ—>3. Spanã®ãƒ‰ãƒ­ãƒƒãƒ—</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>5 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/filterprocessor/README.md rel=external><strong>Filter Processor</strong></a> ã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®æ¡ä»¶ã«åŸºã¥ã„ã¦Spanã‚’é¸æŠçš„ã«ãƒ‰ãƒ­ãƒƒãƒ—ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€Spanåã«åŸºã¥ã„ã¦ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚„å†…éƒ¨é€šä¿¡ãƒˆãƒ¬ãƒ¼ã‚¹ãªã©ã®ä¸è¦ãªSpanã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šãã€é€šå¸¸ã¯éå¸¸ã«ã€Œ<strong>ãƒã‚¤ã‚¸ãƒ¼</strong>ã€ãª <code>"/_healthz"</code> ã‚’å«ã‚€Spanã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>3-dropping-spans</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>2-building-resilience</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>3-dropping-spans</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-bcd93504a2869cbacd56b5485a750387><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-126b99bf546841efcec386a7f9c38695 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-bcd93504a2869cbacd56b5485a750387","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-126b99bf546841efcec386a7f9c38695 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><p>æ¬¡ã«ã€<strong>filter processor</strong> ã¨å¯¾å¿œã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>3. Spanã®ãƒ‰ãƒ­ãƒƒãƒ—ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=31-è¨­å®š>3.1 è¨­å®š</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€<code>gateway.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚ä»¥ä¸‹ã®è¨­å®šã§ <code>processors</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¾ã™</p><ol><li><p><strong><code>filter</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã™ã‚‹</strong>
<code>/_healthz</code> ã¨ã„ã†åå‰ã®Spanã‚’é™¤å¤–ã™ã‚‹ã‚ˆã†ã«Gatewayã‚’è¨­å®šã—ã¾ã™ã€‚<code>error_mode: ignore</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ä¸­ã«ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ä½œã—ç¶šã‘ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚<code>traces</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã€<code>/_healthz</code> ã¨ã„ã†åå‰ã®Spanã‚’é™¤å¤–å¯¾è±¡ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>filter/health</span><span class=p>:</span><span class=w>                       </span><span class=c># Defines a filter processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>error_mode</span><span class=p>:</span><span class=w> </span><span class=l>ignore                </span><span class=w> </span><span class=c># Ignore errors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>                            </span><span class=c># Filtering rules for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>span</span><span class=p>:</span><span class=w>                            </span><span class=c># Exclude spans named &#34;/_healthz&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span>- <span class=s1>&#39;name == &#34;/_healthz&#34;&#39;</span></span></span></code></pre></div></li><li><p><strong><code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã« <code>filter</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã™ã‚‹</strong>
<code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã« <code>filter/health</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã—ã¾ã™ã€‚æœ€é©ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¾—ã‚‹ãŸã‚ã«ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¯ã§ãã‚‹ã ã‘æ—©ã„æ®µéšã«é…ç½®ã—ã¾ã™ã€‚<code>memory_limiter</code> ã®ç›´å¾Œã€<code>batch</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã®å‰ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚è¨­å®šã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filter/health            </span><span class=w> </span><span class=c># Filters data based on rules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces</span></span></span></code></pre></div></li></ol><p>ã“ã®è¨­å®šã«ã‚ˆã‚Šã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯é–¢é€£ã®Spanï¼ˆ<code>/_healthz</code>ï¼‰ãŒãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ—©ã„æ®µéšã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¸è¦ãªãƒã‚¤ã‚ºãŒå‰Šæ¸›ã•ã‚Œã¾ã™ã€‚</p></div></details><p><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦Agentè¨­å®šã‚’æ¤œè¨¼ã—ã¾ã™ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>traces:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(filter&lt;br&gt;fa:fa-microchip&lt;br&gt;health):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(&amp;ensp;debug&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;ensp;&amp;ensp;file&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
    %% Links
    subID1:::sub-traces
    subgraph &#34; &#34;
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO4
      PRO4 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=32-filter-processorã®ãƒ†ã‚¹ãƒˆ>3.2 Filter Processorã®ãƒ†ã‚¹ãƒˆ</h1><p>è¨­å®šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€<code>"/_healthz"</code> ã¨ã„ã†åå‰ã®Spanã‚’å«ã‚€ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gatewayã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Gateway</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config ./gateway.yaml</span></span></code></pre></div><p><strong>Agentã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Agent</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config ./agent.yaml</span></span></code></pre></div><p><strong>Loadgenã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯Spanã‚’æœ‰åŠ¹ã«ã—ãŸçŠ¶æ…‹ã§ãƒ­ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’èµ·å‹•ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -health -count <span class=m>5</span></span></span></code></pre></div><p><strong>Agent terminal</strong> ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã« <code>_healthz</code> SpanãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>InstrumentationScope healthz 1.0.0
</span></span><span class=line><span class=cl>Span #0
</span></span><span class=line><span class=cl>   Trace ID       : 0cce8759b5921c8f40b346b2f6e2f4b6
</span></span><span class=line><span class=cl>   Parent ID      :
</span></span><span class=line><span class=cl>   ID             : bc32bd0e4ddcb174
</span></span><span class=line><span class=cl>   Name           : /_healthz
</span></span><span class=line><span class=cl>   Kind           : Server
</span></span><span class=line><span class=cl>   Start time     : 2025-07-11 08:47:50.938703979 +0000 UTC
</span></span><span class=line><span class=cl>   End time       : 2025-07-11 08:47:51.938704091 +0000 UTC
</span></span><span class=line><span class=cl>   Status code    : Ok
</span></span><span class=line><span class=cl>   Status message : Success</span></span></code></pre></div><p>ã“ã‚Œã‚‰ã¯ã€å…ˆã»ã©è¨­å®šã—ãŸFilter Processorã«ã‚ˆã£ã¦ãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚Œã‚‹ãŸã‚ã€<strong>Gateway</strong> ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p><p><strong><code>agent.out</code> ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<strong>Test terminal</strong> ã§ <code>jq</code> ã‚’ä½¿ç”¨ã—ã¦ã€<strong>Agent</strong> ãŒå—ä¿¡ã—ãŸSpanã®åå‰ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-0622cb0833dde0468302624cf6d300ca><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-dda39242f914f83c89de812db6a74a6a aria-expanded=true data-tab-item=R-tab-acf06dfba3409686305aa9022a3341eb class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-0622cb0833dde0468302624cf6d300ca","R-tab-acf06dfba3409686305aa9022a3341eb")'>
<span class=tab-nav-text>Check spans in agent.out</span>
</button>
<button aria-controls=R-tab-id-68cda0fc8a954ff1b213ea4283880121 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-0622cb0833dde0468302624cf6d300ca","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-dda39242f914f83c89de812db6a74a6a data-tab-item=R-tab-acf06dfba3409686305aa9022a3341eb class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[] | &#34;Span \(input_line_number) found with name \(.name)&#34;&#39;</span> ./agent.out</span></span></code></pre></div></div></div><div id=R-tab-id-68cda0fc8a954ff1b213ea4283880121 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;Span 1 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 2 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 3 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 4 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 5 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 6 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 7 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 8 found with name /_healthz&#34;
</span></span><span class=line><span class=cl>&#34;Span 9 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 10 found with name /_healthz&#34;</span></span></code></pre></div></div></div></div></div><p><strong>Gateway ã®ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<code>jq</code> ã‚’ä½¿ç”¨ã—ã¦ã€<strong>Gateway</strong> ãŒå—ä¿¡ã—ãŸSpanã®åå‰ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-5f1532e21897935aded820f2816387e7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-21a033ae0429a955b80d3e77e9d56705 aria-expanded=true data-tab-item=R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5f1532e21897935aded820f2816387e7","R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3")'>
<span class=tab-nav-text>Check spans in gateway-traces.out</span>
</button>
<button aria-controls=R-tab-id-7ae18d6223a79977bfc2ffe259bb1e85 aria-expanded=false data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-5f1532e21897935aded820f2816387e7","R-tab-587b796170a9abac4701cd8aa1bb38cb")'>
<span class=tab-nav-text>Example output</span></button></div><div class=tab-content-container><div id=R-tab-id-21a033ae0429a955b80d3e77e9d56705 data-tab-item=R-tab-a9bb81bd9bb8c45ad95832f29cf5b7e3 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[] | &#34;Span \(input_line_number) found with name \(.name)&#34;&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-7ae18d6223a79977bfc2ffe259bb1e85 data-tab-item=R-tab-587b796170a9abac4701cd8aa1bb38cb class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><code>gateway-metrics.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ <code>/_healthz</code> ã¨ã„ã†åå‰ã®Spanã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&#34;Span 1 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 2 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 3 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 4 found with name /movie-validator&#34;
</span></span><span class=line><span class=cl>&#34;Span 5 found with name /movie-validator&#34;</span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>Filter Processorã§æœ€é©ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¢ºä¿ã™ã‚‹ã«ã¯ã€å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚’ååˆ†ã«ç†è§£ã—ã€è¨­å®šã‚’å³å¯†ã«ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚<strong>ã§ãã‚‹ã ã‘å…·ä½“çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ã‚’ä½¿ç”¨</strong>ã—ã¦ã€é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’èª¤ã£ã¦ãƒ‰ãƒ­ãƒƒãƒ—ã™ã‚‹ãƒªã‚¹ã‚¯ã‚’æœ€å°é™ã«æŠ‘ãˆã¦ãã ã•ã„ã€‚</p><p>ã“ã®è¨­å®šã¯ã€ã•ã¾ã–ã¾ãªå±æ€§ã€ã‚¿ã‚°ã€ã¾ãŸã¯ã‚«ã‚¹ã‚¿ãƒ æ¡ä»¶ã«åŸºã¥ã„ã¦Spanã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«æ‹¡å¼µã§ãã€ç‰¹å®šã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£è¦ä»¶ã«åˆã‚ã›ã¦ OpenTelemetry Collector ã®æŸ”è»Ÿæ€§ã¨åŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=4-æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ç§˜åŒ¿åŒ–>4. æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ç§˜åŒ¿åŒ–</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€OpenTelemetry Collector ã‚’è¨­å®šã—ã¦ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼Spanã‹ã‚‰ç‰¹å®šã®ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã€æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’ç§˜åŒ¿åŒ–ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã€å€‹äººãƒ‡ãƒ¼ã‚¿ã€ãã®ä»–ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®è©³ç´°ãªã©ã€å‡¦ç†ã¾ãŸã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«åŒ¿ååŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹æ©Ÿå¯†æƒ…å ±ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ã€‚</p><p>OpenTelemetry Collector ã®ä¸»è¦ãªãƒ—ãƒ­ã‚»ãƒƒã‚µã®è¨­å®šã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™</p><ul><li><strong><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/attributesprocessor/README.md rel=external>Attributes Processor</a></strong>ï¼šç‰¹å®šã®Spanå±æ€§ã‚’å¤‰æ›´ã¾ãŸã¯å‰Šé™¤ã—ã¾ã™ã€‚</li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/redactionprocessor/README.md rel=external><strong>Redaction Processor</strong></a>ï¼šæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã¾ãŸã¯é€ä¿¡ã•ã‚Œã‚‹å‰ã«ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</li></ul><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>4-sensitive-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>3-dropping-spans</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>4-sensitive-data</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-10b02a8bd2eb44dddc33571cb447a45b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b66dc41b56ab6621d30efc8e882d18e1 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-10b02a8bd2eb44dddc33571cb447a45b","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-b66dc41b56ab6621d30efc8e882d18e1 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>4. æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=41-è¨­å®š>4.1 è¨­å®š</h1><p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€<code>agent.yaml</code> ã‚’ä¿®æ­£ã—ã¦ <code>attributes</code> ã¨ <code>redaction</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã¯ã€Spanå±æ€§å†…ã®æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãŒãƒ­ã‚°ã«è¨˜éŒ²ã¾ãŸã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹å‰ã«é©åˆ‡ã«å‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><p>ä»¥å‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚ŒãŸSpanå±æ€§ã®ä¸€éƒ¨ã«å€‹äººæƒ…å ±ã‚„æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã‹ã‚‰ã€ã“ã®æƒ…å ±ã‚’åŠ¹æœçš„ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŠã‚ˆã³ç§˜åŒ¿åŒ–ã™ã‚‹ãŸã‚ã«å¿…è¦ãªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¨­å®šã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>     -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>     -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>     -&gt; user.account_password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>     -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>     -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>     -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>  {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;traces&#34;, &#34;name&#34;: &#34;debug&#34;}</span></span></code></pre></div><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ã§ <code>agent.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å¼·åŒ–ã™ã‚‹ãŸã‚ã«ã€2ã¤ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><p><strong>1. <code>attributes</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã™ã‚‹</strong>ï¼š<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/attributesprocessor rel=external><strong>Attributes Processor</strong></a> ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Spanå±æ€§ï¼ˆã‚¿ã‚°ï¼‰ã®å€¤ã‚’æ›´æ–°ã€å‰Šé™¤ã€ã¾ãŸã¯ãƒãƒƒã‚·ãƒ¥åŒ–ã—ã¦å¤‰æ›´ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€æ©Ÿå¯†æƒ…å ±ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«é›£èª­åŒ–ã™ã‚‹å ´åˆã«ç‰¹ã«ä¾¿åˆ©ã§ã™ã€‚</p><p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯</p><ol><li><code>user.phone_number</code> å±æ€§ã‚’é™çš„ãªå€¤ï¼ˆ<code>"UNKNOWN NUMBER"</code>ï¼‰ã«<strong>æ›´æ–°</strong>ã—ã¾ã™ã€‚</li><li><code>user.email</code> å±æ€§ã‚’<strong>ãƒãƒƒã‚·ãƒ¥åŒ–</strong>ã—ã¦ã€å…ƒã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå…¬é–‹ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</li><li><code>user.password</code> å±æ€§ã‚’<strong>å‰Šé™¤</strong>ã—ã¦ã€Spanã‹ã‚‰å®Œå…¨ã«å–ã‚Šé™¤ãã¾ã™ã€‚</li></ol><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/update</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>                           </span><span class=c># Actions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.phone_number        </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update                </span><span class=w> </span><span class=c># Update action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;UNKNOWN NUMBER&#34;</span><span class=w>        </span><span class=c># New value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.email               </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>hash                  </span><span class=w> </span><span class=c># Hash the email value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.password            </span><span class=w> </span><span class=c># Target key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>delete                </span><span class=w> </span><span class=c># Delete the password</span></span></span></code></pre></div><p><strong>2. <code>redaction</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¿½åŠ ã™ã‚‹</strong>ï¼š<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/redactionprocessor rel=external><strong>Redaction Processor</strong></a> ã¯ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚„ãã®ä»–ã®å€‹äººè­˜åˆ¥æƒ…å ±ï¼ˆPIIï¼‰ãªã©ã®å®šç¾©æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ã„ã¦ã€Spanå±æ€§å†…ã®æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œå‡ºã—ã¦ç§˜åŒ¿åŒ–ã—ã¾ã™ã€‚</p><p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯</p><ul><li><p>ã™ã¹ã¦ã®å±æ€§ãŒå‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã« <code>allow_all_keys: true</code> ã‚’è¨­å®šã—ã¾ã™ï¼ˆ<code>false</code> ã«è¨­å®šã™ã‚‹ã¨ã€æ˜ç¤ºçš„ã«è¨±å¯ã•ã‚ŒãŸã‚­ãƒ¼ã®ã¿ãŒä¿æŒã•ã‚Œã¾ã™ï¼‰ã€‚</p></li><li><p><strong>Visa</strong> ã¨ <strong>MasterCard</strong> ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’æ¤œå‡ºã—ã¦ç§˜åŒ¿åŒ–ã™ã‚‹ãŸã‚ã®æ­£è¦è¡¨ç¾ã‚’ <code>blocked_values</code> ã§å®šç¾©ã—ã¾ã™ã€‚</p></li><li><p><code>summary: debug</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ‡ãƒãƒƒã‚°ç›®çš„ã§ç§˜åŒ¿åŒ–ãƒ—ãƒ­ã‚»ã‚¹ã«é–¢ã™ã‚‹è©³ç´°æƒ…å ±ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã¾ã™ã€‚</p></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>redaction/redact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>allow_all_keys</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>               </span><span class=c># If false, only allowed keys will be retained</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>blocked_values</span><span class=p>:</span><span class=w>                    </span><span class=c># List of regex patterns to block</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;\b4[0-9]{3}[\s-]?[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}\b&#39;</span><span class=w>       </span><span class=c># Visa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;\b5[1-5][0-9]{2}[\s-]?[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}\b&#39;</span><span class=w>  </span><span class=c># MasterCard</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=l>debug                    </span><span class=w> </span><span class=c># Show debug details about redaction</span></span></span></code></pre></div><p><strong><code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ›´æ–°ã™ã‚‹</strong>ï¼šä¸¡æ–¹ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’ <code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«çµ±åˆã—ã¾ã™ã€‚æœ€åˆã¯ redaction ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãŠã„ã¦ãã ã•ã„ï¼ˆå¾Œã®æ¼”ç¿’ã§æœ‰åŠ¹ã«ã—ã¾ã™ï¼‰ã€‚è¨­å®šã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- redaction/redact               # Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div></div></details><p><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦Agentè¨­å®šã‚’æ¤œè¨¼ã—ã¾ã™ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>traces:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRML(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRRD(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
      PRRS(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRUP(attributes&lt;br&gt;fa:fa-microchip&lt;br&gt;update):::processor
      EXP1(otlphttp&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;ensp;&amp;ensp;debug&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP3(file&lt;br&gt;fa:fa-upload):::exporter

    %% Links
    subID1:::sub-traces
    subgraph &#34; &#34;
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRML
      PRML --&gt; PRUP
      PRUP --&gt; PRRD
      PRRD --&gt; PRRS
      PRRS --&gt; EXP2
      PRRS --&gt; EXP3
      PRRS --&gt; EXP1
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=42-attribute-processorã®ãƒ†ã‚¹ãƒˆ>4.2 Attribute Processorã®ãƒ†ã‚¹ãƒˆ</h1><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<strong>Agent</strong> ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«ã€Spanãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ <code>user.account_password</code> ã‚’<strong>å‰Šé™¤</strong>ã—ã€<code>user.phone_number</code> <strong>å±æ€§</strong>ã‚’<strong>æ›´æ–°</strong>ã—ã€<code>user.email</code> ã‚’<strong>ãƒãƒƒã‚·ãƒ¥åŒ–</strong>ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gatewayã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Gateway</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div><p><strong>Agentã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Agent</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div><p><strong>Load Generatorã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <code>loadgen</code> ã‚’èµ·å‹•ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ã€<code>user.account_password</code> ãŒå‰Šé™¤ã•ã‚Œã€<code>user.phone_number</code> ã¨ <code>user.email</code> ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-48ccd45c8a65f5a6de09921c79123de9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-d17815696992ab37894b31948cc64393 aria-expanded=true data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-48ccd45c8a65f5a6de09921c79123de9","R-tab-544b1806b43b802fec2d6ad565a4b9ad")'>
<span class=tab-nav-text>New Debug Output</span>
</button>
<button aria-controls=R-tab-id-d69d92b8833b7bda590325e6d6da34df aria-expanded=false data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-48ccd45c8a65f5a6de09921c79123de9","R-tab-8269dab52767aefab4c11aaa5d8bb8c8")'>
<span class=tab-nav-text>Original Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-d17815696992ab37894b31948cc64393 data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>   -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(UNKNOWN NUMBER)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(51.71)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(5555 5555 5555 4444)</span></span></code></pre></div></div></div><div id=R-tab-id-d69d92b8833b7bda590325e6d6da34df data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>    -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>    -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>    -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>    -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>    -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>    -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>    -&gt; payment.amount: Double(95.22)</span></span></code></pre></div></div></div></div></div><p><strong>ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<code>jq</code> ã‚’ä½¿ç”¨ã—ã¦ã€<code>gateway-traces.out</code> ã§ <code>user.account_password</code> ãŒå‰Šé™¤ã•ã‚Œã€<code>user.phone_number</code> ã¨ <code>user.email</code> ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-afcebd937f5539bb0e7c75fd642f2a5e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-48c0ba17832ac0154eb5515c5e07aadf aria-expanded=true data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-afcebd937f5539bb0e7c75fd642f2a5e","R-tab-a1f23743b82743728073a9be5706f4e0")'>
<span class=tab-nav-text>Validate attribute changes</span>
</button>
<button aria-controls=R-tab-id-7120f2b718212dfa9a4e676a5500996a aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-afcebd937f5539bb0e7c75fd642f2a5e","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-48c0ba17832ac0154eb5515c5e07aadf data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[].attributes[] | select(.key == &#34;user.password&#34; or .key == &#34;user.phone_number&#34; or .key == &#34;user.email&#34;) | {key: .key, value: .value.stringValue}&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-7120f2b718212dfa9a4e676a5500996a data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><code>user.account_password</code> ãŒå‰Šé™¤ã•ã‚Œã€<code>user.phone_number</code> ã¨ <code>user.email</code> ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.phone_number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;UNKNOWN NUMBER&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.email&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=43-redaction-processorã®ãƒ†ã‚¹ãƒˆ>4.3 Redaction Processorã®ãƒ†ã‚¹ãƒˆ</h1><p><code>redaction</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã©ã®å±æ€§ã¨å€¤ã‚’<strong>è¨±å¯</strong>ã¾ãŸã¯<strong>å‰Šé™¤</strong>ã™ã‚‹ã‹ã‚’æ­£ç¢ºã«åˆ¶å¾¡ã§ãã¾ã™ã€‚</p><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<strong>Agent</strong> ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«ã€Spanãƒ‡ãƒ¼ã‚¿ã® <code>user.visa</code> ã¨ <code>user.mastercard</code> ã®å€¤ã‚’<strong>ç§˜åŒ¿åŒ–</strong>ã—ã¾ã™ã€‚<details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gatewayã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Gateway</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div><p><strong><code>redaction/redact</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’æœ‰åŠ¹ã«ã™ã‚‹</strong>ï¼š<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€<code>agent.yaml</code> ã‚’ç·¨é›†ã—ã¦å‰ã®æ¼”ç¿’ã§è¿½åŠ ã—ãŸ <code>#</code> ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div><p><strong>Agentã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Agent</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div><p><strong>Load Generatorã‚’èµ·å‹•ã™ã‚‹</strong>ï¼š<strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <code>loadgen</code> ã‚’èµ·å‹•ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ã€<code>user.visa</code> ã¨ <code>user.mastercard</code> ã®å€¤ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚<code>user.amex</code> å±æ€§ã®å€¤ã¯ã€<code>blocked_values</code> ã«ä¸€è‡´ã™ã‚‹æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ç§˜åŒ¿åŒ–ã•ã‚Œã¦<strong>ã„ãªã„</strong>ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><div class=tab-panel data-tab-group=R-tabs-89b9c1ab3c447387a7cdb6e1300d7f79><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ade4ee61330d6f8d79c057a874bf2d25 aria-expanded=true data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-89b9c1ab3c447387a7cdb6e1300d7f79","R-tab-544b1806b43b802fec2d6ad565a4b9ad")'>
<span class=tab-nav-text>New Debug Output</span>
</button>
<button aria-controls=R-tab-id-127e7e366997cdf9c61735fd76d43f51 aria-expanded=false data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-89b9c1ab3c447387a7cdb6e1300d7f79","R-tab-8269dab52767aefab4c11aaa5d8bb8c8")'>
<span class=tab-nav-text>Original Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-ade4ee61330d6f8d79c057a874bf2d25 data-tab-item=R-tab-544b1806b43b802fec2d6ad565a4b9ad class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>   -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>   -&gt; user.phone_number: Str(UNKNOWN NUMBER)
</span></span><span class=line><span class=cl>   -&gt; user.email: Str(62d5e03d8fd5808e77aee5ebbd90cf7627a470ae0be9ffd10e8025a4ad0e1287)
</span></span><span class=line><span class=cl>   -&gt; payment.amount: Double(69.71)
</span></span><span class=line><span class=cl>   -&gt; user.visa: Str(****)
</span></span><span class=line><span class=cl>   -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>   -&gt; user.mastercard: Str(****)
</span></span><span class=line><span class=cl>   -&gt; redaction.masked.keys: Str(user.mastercard,user.visa)
</span></span><span class=line><span class=cl>   -&gt; redaction.masked.count: Int(2)</span></span></code></pre></div></div></div><div id=R-tab-id-127e7e366997cdf9c61735fd76d43f51 data-tab-item=R-tab-8269dab52767aefab4c11aaa5d8bb8c8 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    -&gt; user.name: Str(George Lucas)
</span></span><span class=line><span class=cl>    -&gt; user.phone_number: Str(+1555-867-5309)
</span></span><span class=line><span class=cl>    -&gt; user.email: Str(george@deathstar.email)
</span></span><span class=line><span class=cl>    -&gt; user.password: Str(LOTR&gt;StarWars1-2-3)
</span></span><span class=line><span class=cl>    -&gt; user.visa: Str(4111 1111 1111 1111)
</span></span><span class=line><span class=cl>    -&gt; user.amex: Str(3782 822463 10005)
</span></span><span class=line><span class=cl>    -&gt; user.mastercard: Str(5555 5555 5555 4444)
</span></span><span class=line><span class=cl>    -&gt; payment.amount: Double(65.54)</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>redaction ãƒ—ãƒ­ã‚»ãƒƒã‚µã« <code>summary:debug</code> ã‚’å«ã‚ã‚‹ã¨ã€ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã«ã€ã©ã®ä¸€è‡´ã™ã‚‹ã‚­ãƒ¼å€¤ãŒç§˜åŒ¿åŒ–ã•ã‚ŒãŸã‹ã€ãŠã‚ˆã³ãƒã‚¹ã‚¯ã•ã‚ŒãŸå€¤ã®æ•°ã«é–¢ã™ã‚‹ã‚µãƒãƒªãƒ¼æƒ…å ±ãŒå«ã¾ã‚Œã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>     -&gt; redaction.masked.keys: Str(user.mastercard,user.visa)
</span></span><span class=line><span class=cl>     -&gt; redaction.masked.count: Int(2)</span></span></code></pre></div></div></details><p><strong>ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>ï¼š<code>jq</code> ã‚’ä½¿ç”¨ã—ã¦ã€<code>gateway-traces.out</code> ã§ <code>user.visa</code> ã¨ <code>user.mastercard</code> ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-c9cc14ddb605904c784103237c72dc73><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-857232e77ea66537ddd270cdca628625 aria-expanded=true data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-c9cc14ddb605904c784103237c72dc73","R-tab-a1f23743b82743728073a9be5706f4e0")'>
<span class=tab-nav-text>Validate attribute changes</span>
</button>
<button aria-controls=R-tab-id-fadb9eb2d8814ede6a6ddc1b9e4d4981 aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-c9cc14ddb605904c784103237c72dc73","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-857232e77ea66537ddd270cdca628625 data-tab-item=R-tab-a1f23743b82743728073a9be5706f4e0 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceSpans[].scopeSpans[].spans[].attributes[] | select(.key == &#34;user.visa&#34; or .key == &#34;user.mastercard&#34; or .key == &#34;user.amex&#34;) | {key: .key, value: .value.stringValue}&#39;</span> ./gateway-traces.out</span></span></code></pre></div></div></div><div id=R-tab-id-fadb9eb2d8814ede6a6ddc1b9e4d4981 data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><code>blocked_values</code> ã«ä¸€è‡´ã™ã‚‹æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€<code>user.amex</code> ã¯ç§˜åŒ¿åŒ–ã•ã‚Œã¦ã„ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.visa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;****&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.amex&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;3782 822463 10005&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;user.mastercard&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;****&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>ã“ã‚Œã‚‰ã¯ã€<code>attributes</code> ã¨ <code>redaction</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’è¨­å®šã—ã¦æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’ä¿è­·ã™ã‚‹æ–¹æ³•ã®ã»ã‚“ã®ä¸€ä¾‹ã§ã™ã€‚</p></div></details></p><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=5-transform-data>5. Transform Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/transformprocessor/README.md rel=external><strong>Transform Processor</strong></a> ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æµã‚Œã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚<strong>OpenTelemetry Transformation Language (OTTL)</strong> ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚¨ãƒ³ãƒªãƒƒãƒãƒ¡ãƒ³ãƒˆã€å¤‰æ›ã‚’ãã®å ´ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<code>gateway.yaml</code> ã‚’æ›´æ–°ã—ã¦ã€æ¬¡ã®å‡¦ç†ã‚’è¡Œã† <strong>Transform Processor</strong> ã‚’è¿½åŠ ã—ã¾ã™</p><ul><li>ãƒ­ã‚°ãƒªã‚½ãƒ¼ã‚¹å±æ€§ã® <strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</strong></li><li>JSONæ§‹é€ åŒ–ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®å±æ€§ã¸ã® <strong>ãƒ‘ãƒ¼ã‚¹</strong></li><li>ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡ã«åŸºã¥ããƒ­ã‚°é‡å¤§åº¦ãƒ¬ãƒ™ãƒ«ã® <strong>è¨­å®š</strong></li></ul><p>ä»¥å‰ã®ãƒ­ã‚°ã§ <code>SeverityText</code> ã‚„ <code>SeverityNumber</code> ãŒæœªå®šç¾©ã ã£ãŸã“ã¨ã«ãŠæ°—ã¥ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ <code>filelog</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®å…¸å‹çš„ãªå‹•ä½œã§ã™ã€‚ãŸã ã—ã€é‡å¤§åº¦ã¯ãƒ­ã‚°æœ¬æ–‡å†…ã«åŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>SeverityText:
</span></span><span class=line><span class=cl>SeverityNumber: Unspecified(0)
</span></span><span class=line><span class=cl>Body: Str(2025-01-31 15:49:29 [WARN] - Do or do not, there is no try.)</span></span></code></pre></div><p>ãƒ­ã‚°ã«ã¯ã€ãƒ­ã‚°æœ¬æ–‡å†…ã«JSONã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å±æ€§ã¨ã—ã¦æŠ½å‡ºã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚¯ã‚¨ãƒªã®åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚ä¸‹æµã®ã‚·ã‚¹ãƒ†ãƒ ã§æ‰‹å‹•ã§JSONã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ä»£ã‚ã‚Šã«ã€OTTLã‚’ä½¿ç”¨ã—ã¦ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ¬ãƒ™ãƒ«ã§è‡ªå‹•çš„ã«å¤‰æ›ã§ãã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>5-transform-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>4-sensitve-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>5-transform-data</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-055fceb9925dec6ccfecb2e50505d258><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-8ba4df231b0112e5fba2363f06660f52 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-055fceb9925dec6ccfecb2e50505d258","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-8ba4df231b0112e5fba2363f06660f52 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>5. Transform Dataã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=51-configuration>5.1 Configuration</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong><code>transform</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’è¿½åŠ ã™ã‚‹</strong>: <strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åˆ‡ã‚Šæ›¿ãˆã€<code>gateway.yaml</code> ã‚’ç·¨é›†ã—ã¦æ¬¡ã® <code>transform</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’è¿½åŠ ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>transform/logs</span><span class=p>:</span><span class=w>                      </span><span class=c># Processor Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>log_statements</span><span class=p>:</span><span class=w>                    </span><span class=c># Log Processing Statements</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>resource             </span><span class=w> </span><span class=c># Log Context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>statements</span><span class=p>:</span><span class=w>                    </span><span class=c># List of attribute keys to keep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>keep_keys(attributes, [&#34;com.splunk.sourcetype&#34;, &#34;host.name&#34;, &#34;otelcol.service.mode&#34;])</span></span></span></code></pre></div><p><code>-context: resource</code> ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ­ã‚°ã® <code>resourceLog</code> å±æ€§ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®è¨­å®šã«ã‚ˆã‚Šã€é–¢é€£ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹å±æ€§ï¼ˆ<code>com.splunk.sourcetype</code>ã€<code>host.name</code>ã€<code>otelcol.service.mode</code>ï¼‰ã®ã¿ãŒä¿æŒã•ã‚Œã€ãƒ­ã‚°ã®åŠ¹ç‡ãŒå‘ä¸Šã—ã€ä¸è¦ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒå‰Šæ¸›ã•ã‚Œã¾ã™ã€‚</p><p><strong>ãƒ­ã‚°é‡å¤§åº¦ãƒãƒƒãƒ”ãƒ³ã‚°ç”¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹</strong>: ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã® <code>severity_text</code> ã¨ <code>severity_number</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹ãŸã‚ã«ã€<code>log_statements</code> å†…ã« <code>log</code> ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã®è¨­å®šã§ã¯ã€ãƒ­ã‚°æœ¬æ–‡ã‹ã‚‰ <code>level</code> å€¤ã‚’æŠ½å‡ºã—ã€<code>severity_text</code> ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«åŸºã¥ã„ã¦å¯¾å¿œã™ã‚‹ <code>severity_number</code> ã‚’å‰²ã‚Šå½“ã¦ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span>- <span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>log                  </span><span class=w> </span><span class=c># Log Context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>statements</span><span class=p>:</span><span class=w>                    </span><span class=c># Transform Statements Array</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(cache, ParseJSON(body)) where IsMatch(body, &#34;^\\{&#34;) </span><span class=w> </span><span class=c># Parse JSON log body into a cache object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>flatten(cache, &#34;&#34;)                                       </span><span class=w> </span><span class=c># Flatten nested JSON structure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>merge_maps(attributes, cache, &#34;upsert&#34;)                  </span><span class=w> </span><span class=c># Merge cache into attributes, updating existing keys</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_text, attributes[&#34;level&#34;])                  </span><span class=w> </span><span class=c># Set severity_text from the &#34;level&#34; attribute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 1) where severity_text == &#34;TRACE&#34;   </span><span class=w> </span><span class=c># Map severity_text to severity_number</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 5) where severity_text == &#34;DEBUG&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 9) where severity_text == &#34;INFO&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 13) where severity_text == &#34;WARN&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 17) where severity_text == &#34;ERROR&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>set(severity_number, 21) where severity_text == &#34;FATAL&#34;</span></span></span></code></pre></div><p><code>merge_maps</code> é–¢æ•°ã¯ã€2ã¤ã®ãƒãƒƒãƒ—ï¼ˆè¾æ›¸ï¼‰ã‚’1ã¤ã«çµåˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã®å ´åˆã€<code>cache</code> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ­ã‚°æœ¬æ–‡ã‹ã‚‰ãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ï¼‰ã‚’ <code>attributes</code> ãƒãƒƒãƒ—ã«ãƒãƒ¼ã‚¸ã—ã¾ã™ã€‚</p><ul><li><strong>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong>:<ul><li><code>attributes</code>: ãƒ‡ãƒ¼ã‚¿ãŒãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒƒãƒ—</li><li><code>cache</code>: ãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—</li><li><code>"upsert"</code>: ã“ã®ãƒ¢ãƒ¼ãƒ‰ã¯ã€<code>attributes</code> ãƒãƒƒãƒ—ã«ã™ã§ã«ã‚­ãƒ¼ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã®å€¤ãŒ <code>cache</code> ã®å€¤ã§æ›´æ–°ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚ã‚­ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€æŒ¿å…¥ã•ã‚Œã¾ã™ã€‚</li></ul></li></ul><p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€ãƒ­ã‚°æœ¬æ–‡ã‹ã‚‰ã®ã™ã¹ã¦ã®é–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä¾‹ï¼š<code>level</code>ã€<code>message</code> ãªã©ï¼‰ãŒ <code>attributes</code> ãƒãƒƒãƒ—ã«è¿½åŠ ã•ã‚Œã€ã•ã‚‰ãªã‚‹å‡¦ç†ã‚„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§åˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã€éå¸¸ã«é‡è¦ã§ã™ã€‚</p><p><strong>ä¸»è¦ãªå¤‰æ›ã®æ¦‚è¦</strong>:</p><ul><li><strong>Parse JSON</strong>: ãƒ­ã‚°æœ¬æ–‡ã‹ã‚‰æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¾ã™ã€‚</li><li><strong>Flatten JSON</strong>: ãƒã‚¹ãƒˆã•ã‚ŒãŸJSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ•ãƒ©ãƒƒãƒˆãªæ§‹é€ ã«å¤‰æ›ã—ã¾ã™ã€‚</li><li><strong>Merge Attributes</strong>: æŠ½å‡ºã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ã‚°å±æ€§ã«çµ±åˆã—ã¾ã™ã€‚</li><li><strong>Map Severity Text</strong>: ãƒ­ã‚°ã® level å±æ€§ã‹ã‚‰ severity_text ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚</li><li><strong>Assign Severity Numbers</strong>: é‡å¤§åº¦ãƒ¬ãƒ™ãƒ«ã‚’æ¨™æº–åŒ–ã•ã‚ŒãŸæ•°å€¤ã«å¤‰æ›ã—ã¾ã™ã€‚</li></ul><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><code>resource</code> ç”¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã¨ <code>log</code> ç”¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã®2ã¤ã‚’å«ã‚€ <strong>å˜ä¸€ã®</strong> <code>transform</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ãŒå¿…è¦ã§ã™ã€‚</p></div></details><p>ã“ã®è¨­å®šã«ã‚ˆã‚Šã€ãƒ­ã‚°ã®é‡å¤§åº¦ãŒæ­£ã—ãæŠ½å‡ºã€æ¨™æº–åŒ–ã•ã‚Œã€åŠ¹ç‡çš„ãªå‡¦ç†ã®ãŸã‚ã«æ§‹é€ åŒ–ã•ã‚Œã¾ã™ã€‚</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>ã™ã¹ã¦ã®JSONãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®å±æ€§ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã®æ–¹æ³•ã¯ã€<strong>OTTLã®ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°</strong>ã®ã¿ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯é«˜ã„ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p></div></details><p><strong><code>logs</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ›´æ–°ã™ã‚‹</strong>: <code>logs:</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã« <code>transform/logs:</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’è¿½åŠ ã—ã€è¨­å®šãŒæ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>                         </span><span class=c># Logs pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp                     </span><span class=w> </span><span class=c># OTLP receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>                 </span><span class=c># Processors for logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                    </span><span class=w> </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/logs</span></span></span></code></pre></div></div></details><p><a href=https://otelbin.io/ rel=external><strong>https://otelbin.io</strong></a> ã‚’ä½¿ç”¨ã—ã¦ Agent ã®è¨­å®šã‚’æ¤œè¨¼ã—ã¾ã™ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>logs:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(transform&lt;br&gt;fa:fa-microchip&lt;br&gt;logs):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(file&lt;br&gt;fa:fa-upload&lt;br&gt;logs):::exporter
      EXP2(&amp;ensp;&amp;ensp;debug&amp;ensp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    %% Links
    subID1:::sub-logs
    subgraph &#34; &#34;
      subgraph subID1[**Logs**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PRO3
      PRO3 --&gt; PRO4
      PRO4 --&gt; PRO5
      PRO5 --&gt; EXP2
      PRO5 --&gt; EXP1
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=52-setup-environment>5.2 Setup Environment</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>: <strong>Gateway terminal</strong> ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-6e740902ffd95820be258ee1f371b4b1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6a98f5edd152abed00dde1124dd21aca aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-6e740902ffd95820be258ee1f371b4b1","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-6a98f5edd152abed00dde1124dd21aca data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>: <strong>Agent terminal</strong> ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-f3f11016d99d45b57ecd95c71c59efa6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ac7dabc4d8aa908cc06b0ccaed2d7f46 aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f3f11016d99d45b57ecd95c71c59efa6","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-ac7dabc4d8aa908cc06b0ccaed2d7f46 data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Load Generator ã‚’èµ·å‹•ã™ã‚‹</strong>: <strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ <strong>JSON ã‚’æœ‰åŠ¹</strong>ã«ã—ãŸ Load Generator ã‚’èµ·å‹•ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-570094c0035f4deaed496c02db2692cf><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1d4e8daaf2c046997ff26e4a9d64ec7c aria-expanded=true data-tab-item=R-tab-f39d270d077420f218253d70fb4d013a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-570094c0035f4deaed496c02db2692cf","R-tab-f39d270d077420f218253d70fb4d013a")'>
<span class=tab-nav-text>Log Generator</span></button></div><div class=tab-content-container><div id=R-tab-id-1d4e8daaf2c046997ff26e4a9d64ec7c data-tab-item=R-tab-f39d270d077420f218253d70fb4d013a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -logs -json -count <span class=m>5</span></span></span></code></pre></div></div></div></div></div><p><code>loadgen</code> ã¯ JSON å½¢å¼ã§ 5 è¡Œã®ãƒ­ã‚°ã‚’ <code>./quotes.log</code> ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=53-test-transform-processor>5.3 Test Transform Processor</h1><p>ã“ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€<strong>Agent</strong> ã«ã‚ˆã£ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹å‰ã«ã€<code>com.splunk/source</code> ã¨ <code>os.type</code> ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒãƒ­ã‚°ãƒªã‚½ãƒ¼ã‚¹å±æ€§ã‹ã‚‰ <strong>å‰Šé™¤</strong> ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ã•ã‚‰ã«ã€ã“ã®ãƒ†ã‚¹ãƒˆã§ã¯ä»¥ä¸‹ã‚’ç¢ºèªã—ã¾ã™</p><ol><li>é‡å¤§åº¦æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã«ãƒ­ã‚°æœ¬æ–‡ãŒãƒ‘ãƒ¼ã‚¹ã•ã‚Œã¦ã„ã‚‹ã“ã¨<ul><li><code>SeverityText</code> ã¨ <code>SeverityNumber</code> ãŒ <code>LogRecord</code> ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨</li></ul></li><li>ãƒ­ã‚°æœ¬æ–‡ã® JSON ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒ­ã‚° <code>attributes</code> ã«æ˜‡æ ¼ã—ã¦ã„ã‚‹ã“ã¨</li></ol><p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‰ã«é©åˆ‡ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€é‡å¤§åº¦ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãŠã‚ˆã³æ§‹é€ åŒ–ãƒ­ã‚°ã®ã‚¨ãƒ³ãƒªãƒƒãƒãƒ¡ãƒ³ãƒˆãŒè¡Œã‚ã‚Œã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>: <strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ã€<code>com.splunk/source</code> ã¨ <code>os.type</code> ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-643968e35e2bda3299b688390473dda1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-b95190fce29d2d9959c25fe3be168951 aria-expanded=true data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-643968e35e2bda3299b688390473dda1","R-tab-e35301d59bcd0f79d44c5c0a86f077c6")'>
<span class=tab-nav-text>Gateway Debug Output</span>
</button>
<button aria-controls=R-tab-id-bad66e4f3fcc239ba5e3a6a6c2b4060e aria-expanded=false data-tab-item=R-tab-42538fea3c4f3a8e2d3b752dbdb349e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-643968e35e2bda3299b688390473dda1","R-tab-42538fea3c4f3a8e2d3b752dbdb349e9")'>
<span class=tab-nav-text>Agent Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-b95190fce29d2d9959c25fe3be168951 data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Resource attributes:
</span></span><span class=line><span class=cl>   -&gt; com.splunk.sourcetype: Str(quotes)
</span></span><span class=line><span class=cl>   -&gt; host.name: Str(workshop-instance)
</span></span><span class=line><span class=cl>   -&gt; otelcol.service.mode: Str(agent)</span></span></code></pre></div></div></div><div id=R-tab-id-bad66e4f3fcc239ba5e3a6a6c2b4060e data-tab-item=R-tab-42538fea3c4f3a8e2d3b752dbdb349e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Resource attributes:
</span></span><span class=line><span class=cl>   -&gt; com.splunk.source: Str(./quotes.log)
</span></span><span class=line><span class=cl>   -&gt; com.splunk.sourcetype: Str(quotes)
</span></span><span class=line><span class=cl>   -&gt; host.name: Str(workshop-instance)
</span></span><span class=line><span class=cl>   -&gt; os.type: Str(linux)
</span></span><span class=line><span class=cl>   -&gt; otelcol.service.mode: Str(agent)</span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ã€<code>LogRecord</code> ã® <code>SeverityText</code> ã¨ <code>SeverityNumber</code> ãŒãƒ­ã‚°æœ¬æ–‡ã®é‡å¤§åº¦ <code>level</code> ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ã¾ãŸã€æœ¬æ–‡ã® JSON ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚° <code>Attributes</code> ã¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-9214776f8d04be83fc06ad08eecaf711><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-562273d2e1c3c5c0984280f1b7b38135 aria-expanded=true data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-9214776f8d04be83fc06ad08eecaf711","R-tab-e35301d59bcd0f79d44c5c0a86f077c6")'>
<span class=tab-nav-text>Gateway Debug Output</span>
</button>
<button aria-controls=R-tab-id-c7a68ed1c495398b922281e671e17e49 aria-expanded=false data-tab-item=R-tab-ead80b063f3a982e1fec2398ed5eb0e3 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-9214776f8d04be83fc06ad08eecaf711","R-tab-ead80b063f3a982e1fec2398ed5eb0e3")'>
<span class=tab-nav-text>Agemt Debug Output</span></button></div><div class=tab-content-container><div id=R-tab-id-562273d2e1c3c5c0984280f1b7b38135 data-tab-item=R-tab-e35301d59bcd0f79d44c5c0a86f077c6 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>SeverityText: WARN
</span></span><span class=line><span class=cl>SeverityNumber: Warn(13)
</span></span><span class=line><span class=cl>Body: Str({&#34;level&#34;:&#34;WARN&#34;,&#34;message&#34;:&#34;Your focus determines your reality.&#34;,&#34;movie&#34;:&#34;SW&#34;,&#34;timestamp&#34;:&#34;2025-03-07 11:17:26&#34;})
</span></span><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; log.file.path: Str(quotes.log)
</span></span><span class=line><span class=cl>     -&gt; level: Str(WARN)
</span></span><span class=line><span class=cl>     -&gt; message: Str(Your focus determines your reality.)
</span></span><span class=line><span class=cl>     -&gt; movie: Str(SW)
</span></span><span class=line><span class=cl>     -&gt; timestamp: Str(2025-03-07 11:17:26)
</span></span><span class=line><span class=cl>&lt;/snip&gt;</span></span></code></pre></div></div></div><div id=R-tab-id-c7a68ed1c495398b922281e671e17e49 data-tab-item=R-tab-ead80b063f3a982e1fec2398ed5eb0e3 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>&lt;snip&gt;
</span></span><span class=line><span class=cl>SeverityText:
</span></span><span class=line><span class=cl>SeverityNumber: Unspecified(0)
</span></span><span class=line><span class=cl>Body: Str({&#34;level&#34;:&#34;WARN&#34;,&#34;message&#34;:&#34;Your focus determines your reality.&#34;,&#34;movie&#34;:&#34;SW&#34;,&#34;timestamp&#34;:&#34;2025-03-07 11:17:26&#34;})
</span></span><span class=line><span class=cl>Attributes:
</span></span><span class=line><span class=cl>     -&gt; log.file.path: Str(quotes.log)
</span></span><span class=line><span class=cl>&lt;/snip&gt;</span></span></code></pre></div></div></div></div></div><p><strong>ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹</strong>: æ–°ã—ã„ <code>gateway-logs.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ‡ãƒ¼ã‚¿ãŒå¤‰æ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-b73650665b639add4cdffb53a2876d37><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-1501a9c9de128306d38dfa6fa9e24859 aria-expanded=true data-tab-item=R-tab-58659ac8bbb7a3ec80b7df1029812298 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b73650665b639add4cdffb53a2876d37","R-tab-58659ac8bbb7a3ec80b7df1029812298")'>
<span class=tab-nav-text>jq Query</span>
</button>
<button aria-controls=R-tab-id-79261367d962b02d73e79021b5c2a2e3 aria-expanded=false data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b73650665b639add4cdffb53a2876d37","R-tab-4c50e65a8a1f9aa989870396b5c0a12b")'>
<span class=tab-nav-text>Example Output</span></button></div><div class=tab-content-container><div id=R-tab-id-1501a9c9de128306d38dfa6fa9e24859 data-tab-item=R-tab-58659ac8bbb7a3ec80b7df1029812298 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;[.resourceLogs[].scopeLogs[].logRecords[] | {severityText, severityNumber, body: .body.stringValue}]&#39;</span> gateway-logs.out</span></span></code></pre></div></div></div><div id=R-tab-id-79261367d962b02d73e79021b5c2a2e3 data-tab-item=R-tab-4c50e65a8a1f9aa989870396b5c0a12b class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;DEBUG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;DEBUG\&#34;,\&#34;message\&#34;:\&#34;All we have to decide is what to do with the time that is given us.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;WARN&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;WARN\&#34;,\&#34;message\&#34;:\&#34;The Force will be with you. Always.\&#34;,\&#34;movie\&#34;:\&#34;SW\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;ERROR&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;ERROR\&#34;,\&#34;message\&#34;:\&#34;One does not simply walk into Mordor.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;DEBUG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;DEBUG\&#34;,\&#34;message\&#34;:\&#34;Do or do not, there is no try.\&#34;,\&#34;movie\&#34;:\&#34;SW\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityText&#34;</span><span class=p>:</span> <span class=s2>&#34;ERROR&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;severityNumber&#34;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;{\&#34;level\&#34;:\&#34;ERROR\&#34;,\&#34;message\&#34;:\&#34;There is some good in this world, and it&#39;s worth fighting for.\&#34;,\&#34;movie\&#34;:\&#34;LOTR\&#34;,\&#34;timestamp\&#34;:\&#34;2025-03-07 11:56:29\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div></div></div></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ã€<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=6-routing-data>6. Routing Data</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>OpenTelemetry ã® <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/routingconnector rel=external><strong>Routing Connector</strong></a> ã¯ã€ç‰¹å®šã®æ¡ä»¶ã«åŸºã¥ã„ã¦ãƒ‡ãƒ¼ã‚¿ï¼ˆ<code>traces</code>ã€<code>metrics</code>ã€ã¾ãŸã¯ <code>logs</code>ï¼‰ã‚’ç•°ãªã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³/å®›å…ˆã«æŒ¯ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹å¼·åŠ›ãªæ©Ÿèƒ½ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã«ç•°ãªã‚‹å‡¦ç†ã‚„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã‚’é©ç”¨ã—ãŸã„å ´åˆã«ç‰¹ã«æœ‰ç”¨ã§ã™ã€‚</p><p>ä¾‹ãˆã°ã€<em>æœ¬ç•ªç’°å¢ƒ</em> ã®ãƒ‡ãƒ¼ã‚¿ã‚’1ã¤ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã«é€ä¿¡ã—ã€<em>ãƒ†ã‚¹ãƒˆ</em> ã‚„ <em>é–‹ç™º</em> ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åŒæ§˜ã«ã€ã‚µãƒ¼ãƒ“ã‚¹åã€ç’°å¢ƒã€ã‚¹ãƒ‘ãƒ³åãªã©ã®å±æ€§ã«åŸºã¥ã„ã¦ç‰¹å®šã®ã‚¹ãƒ‘ãƒ³ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã€ã‚«ã‚¹ã‚¿ãƒ ã®å‡¦ç†ã‚„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>6-routing-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>5-transform-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>6-routing-data</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-2bc764f5d47ee78ffd305de5cf3ebdcc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-3ba980844057ed752474c360a432bafd aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-2bc764f5d47ee78ffd305de5cf3ebdcc","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-3ba980844057ed752474c360a432bafd data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div></div></details><p>æ¬¡ã«ã€Routing Connector ã¨ãã‚Œãã‚Œã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>6. Routing Dataã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=61-configure-the-routing-connector>6.1 Configure the Routing Connector</h1><p>ã“ã®æ¼”ç¿’ã§ã¯ã€<code>gateway.yaml</code> ã§ <strong>Routing Connector</strong> ã‚’è¨­å®šã—ã¾ã™ã€‚Routing Connector ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ã‚’ä»»æ„ã®å±æ€§ã«åŸºã¥ã„ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ãã¾ã™ãŒã€ã“ã“ã§ã¯ <code>deployment.environment</code> å±æ€§ã«åŸºã¥ããƒˆãƒ¬ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ï¼ˆãŸã ã—ã€ä»»æ„ã®ã‚¹ãƒ‘ãƒ³/ãƒ­ã‚°/ãƒ¡ãƒˆãƒªã‚¯ã‚¹å±æ€§ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼‰ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>æ–°ã—ã„ <code>file</code> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’è¿½åŠ ã™ã‚‹</strong>: <code>routing</code> ã‚³ãƒã‚¯ã‚¿ãƒ¼ã«ã¯ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç”¨ã«ç•°ãªã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå¿…è¦ã§ã™ã€‚<strong>Gateway terminal</strong> ã§ã€<code>gateway.yaml</code> ã® <code>exporters</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« 2 ã¤ã®æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ <code>file/traces/route1-regular</code> ã¨ <code>file/traces/route2-security</code> ã‚’ä½œæˆã—ã€ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãæŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces/route1-regular</span><span class=p>:</span><span class=w>                     </span><span class=c># Exporter for regular traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces-route1-regular.out&#34;</span><span class=w>   </span><span class=c># Path for saving trace data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                                 </span><span class=c># Overwrite the file each time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file/traces/route2-security</span><span class=p>:</span><span class=w>                    </span><span class=c># Exporter for security traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;./gateway-traces-route2-security.out&#34;</span><span class=w>  </span><span class=c># Path for saving trace data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>                                 </span><span class=c># Overwrite the file each time</span></span></span></code></pre></div><p><strong>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹</strong>: <code>routing</code> ã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚OpenTelemetry ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€<code>connectors</code> ã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚„ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¨åŒæ§˜ã«å°‚ç”¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</p><p><code>#connectors:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤ã—ã¾ã™ã€‚æ¬¡ã«ã€<code>connectors:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>routing</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>default_pipelines</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>traces/route1-regular] </span><span class=w> </span><span class=c># Default pipeline if no rule matches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>error_mode</span><span class=p>:</span><span class=w> </span><span class=l>ignore                         </span><span class=w> </span><span class=c># Ignore errors in routing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>table</span><span class=p>:</span><span class=w>                                      </span><span class=c># Define routing rules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Routes spans to a target pipeline if the resourceSpan attribute matches the rule</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>statement</span><span class=p>:</span><span class=w> </span><span class=l>route() where attributes[&#34;deployment.environment&#34;] == &#34;security-applications&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pipelines</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>traces/route2-security]    </span><span class=w> </span><span class=c># Security target pipeline</span></span></span></code></pre></div></div></details><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ«ãƒ¼ãƒ«ã«ä¸€è‡´ã—ãªã„ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆã“ã®å ´åˆã¯ã‚¹ãƒ‘ãƒ³ï¼‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…ˆã¨ãªã‚Šã¾ã™ã€‚ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã€<code>["deployment.environment"] == "security-applications"</code> ãƒ«ãƒ¼ãƒ«ã«ä¸€è‡´ã™ã‚‹ã‚¹ãƒ‘ãƒ³ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><code>routing</code> ã®è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ <code>pipelines</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=62-configuring-the-pipelines>6.2 Configuring the Pipelines</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>å…ƒã® <code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æ›´æ–°ã™ã‚‹</strong>:</p><ol><li><p><code>routing</code> ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€å…ƒã® <code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ›´æ–°ã—ã¦ã€<code>routing</code> ã®ã¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®ã‚¹ãƒ‘ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒ <strong>Routing Connector</strong> ã‚’çµŒç”±ã—ã¦è©•ä¾¡ã•ã‚Œã€æ¥ç¶šã•ã‚ŒãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«è»¢é€ã•ã‚Œã¾ã™ã€‚ã¾ãŸã€<strong>ã™ã¹ã¦ã®</strong> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’å‰Šé™¤ã—ã€ç©ºã®é…åˆ—ï¼ˆ<code>[]</code>ï¼‰ã«ç½®ãæ›ãˆã¾ã™ã€‚ã“ã‚Œã¯ã€<code>traces/route1-regular</code> ã¨ <code>traces/route2-security</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€å„ãƒ«ãƒ¼ãƒˆã«å¯¾ã—ã¦ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œãŒå¯èƒ½ã«ãªã‚‹ãŸã‚ã§ã™ã€‚<code>traces:</code> ã®è¨­å®šã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>traces</span><span class=p>:</span><span class=w>                       </span><span class=c># Traces pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>otlp                     </span><span class=w> </span><span class=c># OTLP receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>              </span><span class=c># Processors for traces</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>routing</span></span></span></code></pre></div></li></ol><p><strong>æ—¢å­˜ã® <code>traces</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã« <code>route1-regular</code> ã¨ <code>route2-security</code> ã®ä¸¡æ–¹ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¿½åŠ ã™ã‚‹</strong>:</p><ol><li><p><strong>Route1-regular ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹</strong>: ã“ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€ã‚³ãƒã‚¯ã‚¿ãƒ¼ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã«<strong>ä¸€è‡´ã—ãªã„</strong>ã™ã¹ã¦ã®ã‚¹ãƒ‘ãƒ³ã‚’å‡¦ç†ã—ã¾ã™ã€‚
ã“ã‚Œã¯å”¯ä¸€ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ã—ã¦ <code>routing</code> ã‚’ä½¿ç”¨ã—ã€å…ƒã® traces ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã® <code>connection</code> ã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces/route1-regular</span><span class=p>:</span><span class=w>         </span><span class=c># Default pipeline for unmatched spans</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>routing                   </span><span class=w> </span><span class=c># Receive data from the routing connector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter            </span><span class=w> </span><span class=c># Memory Limiter Processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode         </span><span class=w> </span><span class=c># Adds collector mode metadata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                     </span><span class=w> </span><span class=c># Debug Exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces/route1-regular</span><span class=w> </span><span class=c># File Exporter for unmatched spans</span></span></span></code></pre></div></li><li><p><strong>route2-security ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¿½åŠ ã™ã‚‹</strong>: ã“ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã® <code>"[deployment.environment"] == "security-applications"</code> ãƒ«ãƒ¼ãƒ«ã«ä¸€è‡´ã™ã‚‹ã™ã¹ã¦ã®ã‚¹ãƒ‘ãƒ³ã‚’å‡¦ç†ã—ã¾ã™ã€‚ã“ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ã—ã¦ <code>routing</code> ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ <code>traces/route1-regular</code> ã®ä¸‹ã«è¿½åŠ ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>traces/route2-security</span><span class=p>:</span><span class=w>         </span><span class=c># Default pipeline for unmatched spans</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>routing                    </span><span class=w> </span><span class=c># Receive data from the routing connector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter             </span><span class=w> </span><span class=c># Memory Limiter Processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode          </span><span class=w> </span><span class=c># Adds collector mode metadata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug                      </span><span class=w> </span><span class=c># Debug exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file/traces/route2-security</span><span class=w> </span><span class=c># File exporter for unmatched spans</span></span></span></code></pre></div></li></ol></div></details><p><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ Agent ã®è¨­å®šã‚’æ¤œè¨¼ã—ã¾ã™ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>traces:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
      REC1(&amp;nbsp;&amp;nbsp;&amp;nbsp;otlp&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;fa:fa-download):::receiver
      PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO2(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
      PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
      PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
      PRO6(batch&lt;br&gt;fa:fa-microchip):::processor
      EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP2(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
      EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
      EXP4(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt;traces):::exporter
      ROUTE1(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-export
      ROUTE2(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive
      ROUTE3(&amp;nbsp;routing&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive
    %% Links
    subID1:::sub-traces
    subID2:::sub-traces
    subID3:::sub-traces
    subgraph &#34; &#34;
    direction LR
      subgraph subID1[**Traces**]
      REC1 --&gt; ROUTE1
      end
      subgraph subID2[**Traces/route2-security**]
      ROUTE1 --&gt; ROUTE2
      ROUTE2 --&gt; PRO1
      PRO1 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end
      subgraph subID3[**Traces/route1-regular**]
      ROUTE1 --&gt; ROUTE3
      ROUTE3 --&gt; PRO2
      PRO2 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=63-test-routing-connector>6.3 Test Routing Connector</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<strong>Gateway</strong> ç”¨ã«è¨­å®šã—ãŸ <code>routing</code> ãƒ«ãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚æœŸå¾…ã•ã‚Œã‚‹çµæœã¯ã€<code>"[deployment.environment"] == "security-applications"</code> ãƒ«ãƒ¼ãƒ«ã«ä¸€è‡´ã™ã‚‹ <code>loadgen</code> ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸ <code>span</code> ãŒ <code>gateway-traces-route2-security.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã«é€ä¿¡ã•ã‚Œã‚‹ã“ã¨ã§ã™ã€‚</p><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>: <strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Gateway</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config gateway.yaml</span></span></code></pre></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>: <strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <strong>Agent</strong> ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config agent.yaml</span></span></code></pre></div><p><strong>é€šå¸¸ã®ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã™ã‚‹</strong>: <strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <code>loadgen</code> ã‚’ä½¿ç”¨ã—ã¦é€šå¸¸ã®ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>1</span></span></span></code></pre></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ãƒ‡ãƒãƒƒã‚°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚Gateway ã¯æ–°ã—ã„ <code>gateway-traces-route1-regular.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚ŒãŒé€šå¸¸ã®ã‚¹ãƒ‘ãƒ³ã®æŒ‡å®šã•ã‚ŒãŸå®›å…ˆã«ãªã‚Šã¾ã—ãŸã€‚</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p><code>gateway-traces-route1-regular.out</code> ã‚’ç¢ºèªã™ã‚‹ã¨ã€<code>loadgen</code> ã«ã‚ˆã£ã¦é€ä¿¡ã•ã‚ŒãŸ <code>span</code> ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€ç©ºã® <code>gateway-traces-route2-security..out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šãŒã€ä¸€è‡´ã™ã‚‹ã‚¹ãƒ‘ãƒ³ãŒã¾ã å‡¦ç†ã•ã‚Œã¦ã„ãªãã¦ã‚‚ã€ã™ãã«å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã§ã™ã€‚</p></div></details><p><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã™ã‚‹</strong>: <strong>Loadgen terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ <code>security</code> ãƒ•ãƒ©ã‚°ã‚’ä½¿ç”¨ã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -security -count <span class=m>1</span></span></span></code></pre></div><p>å†ã³ã€<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ã§ã€é€ä¿¡ã—ãŸã‚¹ãƒ‘ãƒ³ã‚’å«ã‚€ãƒ‡ãƒãƒƒã‚°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ä»Šå›ã¯ã€<strong>Gateway</strong> ãŒ <code>gateway-traces-route2-security.out</code> ãƒ•ã‚¡ã‚¤ãƒ«ã«è¡Œã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚ã“ã‚Œã¯ã€<code>deployment.environment</code> ãƒªã‚½ãƒ¼ã‚¹å±æ€§ãŒ <code>"security-applications"</code> ã«ä¸€è‡´ã™ã‚‹ã‚¹ãƒ‘ãƒ³ç”¨ã«æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-13f5f8ceaef43fb2b8bf70f0581e1692><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-6625940c3685b17e66ddbac06d642605 aria-expanded=true data-tab-item=R-tab-ad0c2b09920ec6396d478d255cb39b4d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-13f5f8ceaef43fb2b8bf70f0581e1692","R-tab-ad0c2b09920ec6396d478d255cb39b4d")'>
<span class=tab-nav-text>Validate resource attribute matches</span>
</button>
<button aria-controls=R-tab-id-9d06a734d8f5b1af443f7a4a90c5ddea aria-expanded=false data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-13f5f8ceaef43fb2b8bf70f0581e1692","R-tab-29c2c02a361c9d7028472e5d92cd4a54")'>
<span class=tab-nav-text>Output</span></button></div><div class=tab-content-container><div id=R-tab-id-6625940c3685b17e66ddbac06d642605 data-tab-item=R-tab-ad0c2b09920ec6396d478d255cb39b4d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -c <span class=s1>&#39;.resourceSpans[] as $resource | $resource.scopeSpans[].spans[] | {spanId: .spanId, deploymentEnvironment: ($resource.resource.attributes[] | select(.key == &#34;deployment.environment&#34;) | .value.stringValue)}&#39;</span> gateway-traces-route2-security.out</span></span></code></pre></div></div></div><div id=R-tab-id-9d06a734d8f5b1af443f7a4a90c5ddea data-tab-item=R-tab-29c2c02a361c9d7028472e5d92cd4a54 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;spanId&#34;</span><span class=p>:</span><span class=s2>&#34;cb799e92e26d5782&#34;</span><span class=p>,</span><span class=nt>&#34;deploymentEnvironment&#34;</span><span class=p>:</span><span class=s2>&#34;security-applications&#34;</span><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>ã“ã®ã‚·ãƒŠãƒªã‚ªã‚’è¤‡æ•°å›ç¹°ã‚Šè¿”ã™ã“ã¨ãŒã§ãã€å„ãƒˆãƒ¬ãƒ¼ã‚¹ã¯å¯¾å¿œã™ã‚‹å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ã€<strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details><h2 id=ã¾ã¨ã‚>ã¾ã¨ã‚</h2><p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ç•°ãªã‚‹ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã—ã€ãã®å®›å…ˆã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€Gateway ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚’æ­£å¸¸ã«ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚</p><ul><li><p><strong>é€šå¸¸ã®ã‚¹ãƒ‘ãƒ³</strong> ã¯ <code>gateway-traces-route1-regular.out</code> ã«æ­£ã—ããƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã€ä¸€è‡´ã™ã‚‹ <code>deployment.environment</code> å±æ€§ã‚’æŒãŸãªã„ã‚¹ãƒ‘ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«å¾“ã†ã“ã¨ãŒç¢ºèªã•ã‚Œã¾ã—ãŸã€‚</p></li><li><p><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®ã‚¹ãƒ‘ãƒ³</strong> ã¯ <code>gateway-traces-route2-security.out</code> ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã€<code>"deployment.environment": "security-applications"</code> ã«åŸºã¥ããƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ãŒæœŸå¾…ã©ãŠã‚Šã«æ©Ÿèƒ½ã™ã‚‹ã“ã¨ãŒå®Ÿè¨¼ã•ã‚Œã¾ã—ãŸã€‚</p></li></ul><p>å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œæŸ»ã™ã‚‹ã“ã¨ã§ã€OpenTelemetry Collector ãŒ <em>ã‚¹ãƒ‘ãƒ³å±æ€§ã‚’æ­£ã—ãè©•ä¾¡ã—ã€é©åˆ‡ãªå®›å…ˆã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹</em> ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ãŒç•°ãªã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å‘ã‘ã«ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹æœçš„ã«åˆ†é›¢ã—ã¦æŒ¯ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒæ¤œè¨¼ã•ã‚Œã¾ã—ãŸã€‚</p><p>è¿½åŠ ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã¦ã€ç•°ãªã‚‹å±æ€§ã«åŸºã¥ã„ã¦ã‚¹ãƒ‘ãƒ³ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ã‚’ã•ã‚‰ã«åˆ†é¡ã™ã‚‹ã“ã¨ã§ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ‹¡å¼µã§ãã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=7-count-connector-ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹>7. Count Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external><strong>Count Connector</strong></a> ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‹ã‚‰å±æ€§å€¤ã‚’æŠ½å‡ºã—ã€æ„å‘³ã®ã‚ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€Count Connector ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã«å‡ºç¾ã™ã‚‹ã€ŒStar Warsã€ã¨ã€ŒLord of the Ringsã€ã®åè¨€ã®æ•°ã‚’è¿½è·¡ã—ã€æ¸¬å®šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p><strong>ã™ã¹ã¦ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ <code>7-sum-count</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ã—ã€<code>clear</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong></p></div></details><p><code>6-routing-data</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ <code>*.yaml</code> ã‚’ <code>7-sum-count</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚æ›´æ–°å¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-12f34f7b05e27bc3d9ddaded024f39b1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-dd02930de43903cb8a0594b1145f3bc3 aria-expanded=true data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-12f34f7b05e27bc3d9ddaded024f39b1","R-tab-5a476a4994a778a4fb1b2011e6c9054c")'>
<span class=tab-nav-text>Updated Directory Structure</span></button></div><div class=tab-content-container><div id=R-tab-id-dd02930de43903cb8a0594b1145f3bc3 data-tab-item=R-tab-5a476a4994a778a4fb1b2011e6c9054c class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ agent.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ gateway.yaml</span></span></code></pre></div></div></div></div></div><ul><li><strong>agent.yaml ã‚’æ›´æ–°</strong>ã—ã¦ã€ãƒ­ã‚°ã‚’èª­ã¿å–ã‚‹é »åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
<code>agent.yaml</code> å†…ã® <code>filelog/quotes</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã€<code>poll_interval</code> å±æ€§ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>filelog/quotes</span><span class=p>:</span><span class=w>                      </span><span class=c># Receiver Type/Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>poll_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s                </span><span class=w> </span><span class=c># Only read every ten seconds</span></span></span></code></pre></div></div></details><p>é…å»¶ã‚’è¨­å®šã™ã‚‹ç†ç”±ã¯ã€OpenTelemetry Collector ã® Count Connector ãŒå„å‡¦ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å†…ã§ã®ã¿ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹ãŸã³ã«ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§ã‚«ã‚¦ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>Filelog receiver</code> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« 200ms ã§ã¯ã€loadgen ãŒæ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®è¡Œã‚’èª­ã¿å–ã‚Šã€ã‚«ã‚¦ãƒ³ãƒˆãŒ1ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚«ã‚¦ãƒ³ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€æ¡ä»¶ã‚’çœç•¥ã™ã‚‹ã“ã¨ã§ã€Collector ã¯å„èª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã®ç´¯è¨ˆã‚«ã‚¦ãƒ³ãƒˆã‚’ç¶­æŒã§ãã¾ã™ã€‚ãŸã ã—ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯é•·æœŸé–“ã«ã‚ãŸã£ã¦ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½è·¡ã§ãã‚‹ãŸã‚ã€ç´¯è¨ˆã‚«ã‚¦ãƒ³ãƒˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ä»»ã›ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>Count Connector ã‚’è¿½åŠ ã™ã‚‹</strong></li></ul><p>è¨­å®šã® connectors ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« Count Connector ã‚’è¿½åŠ ã—ã€ä½¿ç”¨ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¾ã™</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>connectors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.full.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Running count of all logs read in interval&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.sw.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;StarWarsCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;SW&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.lotr.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;LOTRCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;movie&#34;] == &#34;LOTR&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>logs.error.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;ErrorCount&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>attributes[&#34;level&#34;] == &#34;ERROR&#34;</span></span></span></code></pre></div><ul><li><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®èª¬æ˜</strong></p><ul><li><code>logs.full.count</code>ï¼šå„èª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§å‡¦ç†ã•ã‚ŒãŸãƒ­ã‚°ã®ç·æ•°ã‚’è¿½è·¡ã—ã¾ã™ã€‚
ã“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ãŒãªã„ãŸã‚ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’é€šéã™ã‚‹ã™ã¹ã¦ã®ãƒ­ã‚°ãŒã‚«ã‚¦ãƒ³ãƒˆã«å«ã¾ã‚Œã¾ã™ã€‚</li><li><code>logs.sw.count</code>ï¼šStar Wars æ˜ ç”»ã®åè¨€ã‚’å«ã‚€ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</li><li><code>logs.lotr.count</code>ï¼šLord of the Rings æ˜ ç”»ã®åè¨€ã‚’å«ã‚€ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</li><li><code>logs.error.count</code>ï¼šèª­ã¿å–ã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§é‡å¤§åº¦ãƒ¬ãƒ™ãƒ«ãŒ ERROR ã®ãƒ­ã‚°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã€å®Ÿéš›ã®ã‚·ãƒŠãƒªã‚ªã‚’è¡¨ã—ã¾ã™ã€‚</li></ul></li><li><p><strong>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ Count Connector ã‚’è¨­å®šã™ã‚‹</strong>
ä»¥ä¸‹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã§ã¯ã€connector exporter ãŒ <code>logs</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã€connector receiver ãŒ <code>metrics</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</p></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                          </span><span class=w> </span><span class=c># Count Connector that receives count metric from logs count exporter in logs pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                    # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div></div></details><p>ãƒ­ã‚°ã¯å±æ€§ã«åŸºã¥ã„ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ãŒå±æ€§ã§ã¯ãªããƒ­ã‚°ãƒœãƒ‡ã‚£ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ <code>Transform</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ã‚­ãƒ¼/ãƒãƒªãƒ¥ãƒ¼ã®ãƒšã‚¢ã‚’æŠ½å‡ºã—ã€å±æ€§ã¨ã—ã¦è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€<code>05-transform-data</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ—¢ã« <code>merge_maps(attributes, cache, "upsert")</code> ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‡¦ç†ç”¨ã®ãƒ­ã‚°å±æ€§ã«å«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>å±æ€§ã‚’ä½œæˆã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é¸æŠã™ã‚‹éš›ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç„¡å·®åˆ¥ã«è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã€æœ¬ç•ªç’°å¢ƒã§ã¯ä¸€èˆ¬çš„ã«ç†æƒ³çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã®ä¹±é›‘ã•ã‚’é¿ã‘ã‚‹ãŸã‚ã€æœ¬å½“ã«å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ agent è¨­å®šã‚’<strong>æ¤œè¨¼</strong>ã—ã¦ãã ã•ã„ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>logs</code> ã¨ <code>metrics:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</li></ul><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download):::receiver
    REC2(filelog&lt;br&gt;fa:fa-download&lt;br&gt;quotes):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip):::processor
    PRO9(transfrom&lt;br&gt;fa:fa-microchip&lt;br&gt;logs):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP2(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload):::exporter
    ROUTE1(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route):::con-receive

    %% Links
    subID1:::sub-logs
    subID2:::sub-metrics
    subgraph &#34; &#34;
      direction LR
      subgraph subID1[**Logs**]
      direction LR
      REC1 --&gt; PRO1
      REC2 --&gt; PRO1
      PRO1 --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO9
      PRO9 --&gt; PRO5
      PRO5 --&gt; ROUTE1
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      end

      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE2
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><section><h1 class=a11y-only>7. Count & Sum Connectorã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=71-count-connector-ã®ãƒ†ã‚¹ãƒˆ>7.1 Count Connector ã®ãƒ†ã‚¹ãƒˆ</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-901211917c65ac652d9c2359efe33797><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-90438ef54193327adbc1ae75ff692884 aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-901211917c65ac652d9c2359efe33797","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-90438ef54193327adbc1ae75ff692884 data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-18bb4d183ae924798611407cd5848164><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f866e4118a9d3d3355d8c909b1c8644c aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-18bb4d183ae924798611407cd5848164","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-f866e4118a9d3d3355d8c909b1c8644c data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Loadgen ã§12è¡Œã®ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹</strong>
<strong>Spans terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€12è¡Œã®ãƒ­ã‚°ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§èª­ã¿å–ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚ä»¥ä¸‹ã® <code>loadgen</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„</p><div class=tab-panel data-tab-group=R-tabs-cbe7cc34ba52c276f0e56a0e15f6e4ad><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-f29b6784b416d6f8ace217b4eeabbe80 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-cbe7cc34ba52c276f0e56a0e15f6e4ad","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-f29b6784b416d6f8ace217b4eeabbe80 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -logs -json -count <span class=m>12</span></span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚<code>loadgen</code> ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚</p><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹</strong>
ãƒ­ã‚°ãŒå‡¦ç†ã•ã‚Œã‚‹ã¨ã€<strong>Agent</strong> ãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ <strong>Gateway</strong> ã«è»¢é€ã—ã€Gateway ãŒãã‚Œã‚‰ã‚’ <code>gateway-metrics.out</code> ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p><p>å‡ºåŠ›ã« <code>logs.full.count</code>ã€<code>logs.sw.count</code>ã€<code>logs.lotr.count</code>ã€<code>logs.error.count</code> ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã® <strong>jq</strong> ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-b086d1f80b7a81f948e25248167e255c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2741d4b8c727b19fcea7f195ab0345cc aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-b086d1f80b7a81f948e25248167e255c","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-4ebb74aafc95e9ff4f6d3d0c7906ec83 aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-b086d1f80b7a81f948e25248167e255c","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-2741d4b8c727b19fcea7f195ab0345cc data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[]
</span></span></span><span class=line><span class=cl><span class=s1>    | select(.name == &#34;logs.full.count&#34; or .name == &#34;logs.sw.count&#34; or .name == &#34;logs.lotr.count&#34; or .name == &#34;logs.error.count&#34;)
</span></span></span><span class=line><span class=cl><span class=s1>    | {name: .name, value: (.sum.dataPoints[0].asInt // &#34;-&#34;)}&#39;</span> gateway-metrics.out</span></span></code></pre></div></div></div><div id=R-tab-id-4ebb74aafc95e9ff4f6d3d0c7906ec83 data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;4&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.error.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.sw.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.lotr.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;6&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;logs.full.count&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>æ³¨ï¼š<code>logs.full.count</code> ã¯é€šå¸¸ <code>logs.sw.count</code> + <code>logs.lotr.count</code> ã¨ç­‰ã—ããªã‚Šã¾ã™ãŒã€<code>logs.error.count</code> ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å€¤ã«ãªã‚Šã¾ã™ã€‚</p></div></details><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ <strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=72-sum-connector-ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹>7.2 Sum Connector ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/sumconnector rel=external><strong>Sum Connector</strong></a> ãŒã‚¹ãƒ‘ãƒ³ã‹ã‚‰å€¤ã‚’æŠ½å‡ºã—ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€ãƒ™ãƒ¼ã‚¹ã‚¹ãƒ‘ãƒ³ã‹ã‚‰ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®è«‹æ±‚é¡ã‚’å–å¾—ã—ã€Sum Connector ã‚’æ´»ç”¨ã—ã¦åˆè¨ˆè«‹æ±‚é¡ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã—ã¦å–å¾—ã—ã¾ã™ã€‚</p><p>ã“ã® connector ã¯ã€ã‚¹ãƒ‘ãƒ³ã€ã‚¹ãƒ‘ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã€ãŠã‚ˆã³ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å±æ€§å€¤ã‚’åé›†ï¼ˆ<strong>sum</strong>ï¼‰ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚å„å€‹åˆ¥ã®å€¤ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«å¤‰æ›ã—ã¦è»¢é€ã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨å±æ€§ã‚’ä½¿ç”¨ã—ã¦è¨ˆç®—ã‚„ã•ã‚‰ãªã‚‹å‡¦ç†ã‚’è¡Œã†ã®ã¯<strong>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</strong>ã®å½¹å‰²ã§ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ <code>agent.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚</p><ul><li><strong>Sum Connector ã‚’è¿½åŠ ã™ã‚‹</strong>
è¨­å®šã® connectors ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« Sum Connector ã‚’è¿½åŠ ã—ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¾ã™</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>sum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spans</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=nt>user.card-charge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>source_attribute</span><span class=p>:</span><span class=w> </span><span class=l>payment.amount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>attributes[&#34;payment.amount&#34;] != &#34;NULL&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user.name</span></span></span></code></pre></div></div></details><p>ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ã‚¹ãƒ‘ãƒ³å†…ã® <code>payment.amount</code> å±æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚æœ‰åŠ¹ãªå€¤ãŒã‚ã‚‹å ´åˆã€<strong>Sum</strong> connector ã¯ <code>user.card-charge</code> ã¨ã„ã†ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã€<code>user.name</code> ã‚’å±æ€§ã¨ã—ã¦å«ã‚ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯è«‹æ±‚ã‚µã‚¤ã‚¯ãƒ«ãªã©ã®é•·æœŸé–“ã«ã‚ãŸã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆè¨ˆè«‹æ±‚é¡ã‚’è¿½è·¡ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã§ã¯ã€connector exporter ãŒ traces ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã€connector receiver ãŒ metrics ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><ul><li><strong>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ Count Connector ã‚’è¨­å®šã™ã‚‹</strong></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>attributes/update             </span><span class=w> </span><span class=c># Update, hash, and remove attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>redaction/redact              </span><span class=w> </span><span class=c># Redact sensitive fields using regex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Sum connector which aggregates payment.amount from spans and sends to metrics pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sum                           </span><span class=w> </span><span class=c># Receives metrics from the sum exporter in the traces pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Receives count metric from logs count exporter in logs pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#- hostmetrics                   # Host Metrics Receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>filelog/quotes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>resource/add_mode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>transform/logs                </span><span class=w> </span><span class=c># Transform logs processor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>count                         </span><span class=w> </span><span class=c># Count Connector that exports count as a metric to metrics pipeline.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>debug</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>otlphttp</span></span></span></code></pre></div><ul><li><strong><a href=https://www.otelbin.io/ rel=external>otelbin.io</a></strong> ã‚’ä½¿ç”¨ã—ã¦ agent è¨­å®šã‚’<strong>æ¤œè¨¼</strong>ã—ã¦ãã ã•ã„ã€‚å‚è€ƒã¨ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã® <code>traces</code> ã¨ <code>metrics:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</li></ul><pre class="mermaid align-center">%%{init:{&#34;fontFamily&#34;:&#34;monospace&#34;}}%%
graph LR
    %% Nodes
    REC1(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    REC3(otlp&lt;br&gt;fa:fa-download&lt;br&gt; ):::receiver
    PRO1(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO2(memory_limiter&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO3(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO4(resource&lt;br&gt;fa:fa-microchip&lt;br&gt;add_mode):::processor
    PRO5(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO6(batch&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO7(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt; ):::processor
    PRO8(resourcedetection&lt;br&gt;fa:fa-microchip&lt;br&gt;):::processor

    PROA(attributes&lt;br&gt;fa:fa-microchip&lt;br&gt;redact):::processor
    PROB(redaction&lt;br&gt;fa:fa-microchip&lt;br&gt;update):::processor
    EXP1(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP2(&amp;emsp;&amp;emsp;file&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP3(&amp;nbsp;&amp;ensp;debug&amp;nbsp;&amp;ensp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP4(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    EXP5(&amp;emsp;&amp;emsp;otlphttp&amp;emsp;&amp;emsp;&lt;br&gt;fa:fa-upload&lt;br&gt; ):::exporter
    ROUTE1(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-export
    ROUTE2(&amp;nbsp;count&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive
    ROUTE3(&amp;nbsp;sum&amp;nbsp;&lt;br&gt;fa:fa-route&lt;br&gt; ):::con-receive

    %% Links
    subID1:::sub-traces
    subID2:::sub-metrics
    subgraph &#34; &#34;
      direction LR
      subgraph subID1[**Traces**]
      direction LR
      REC1 --&gt; PRO1
      PRO1 --&gt; PROA
      PROA --&gt; PROB
      PROB --&gt; PRO7
      PRO7 --&gt; PRO3
      PRO3 --&gt; PRO5
      PRO5 --&gt; EXP1
      PRO5 --&gt; EXP2
      PRO5 --&gt; EXP5
      PRO5 --&gt; ROUTE1
      end

      subgraph subID2[**Metrics**]
      direction LR
      ROUTE1 --&gt; ROUTE3
      ROUTE3 --&gt; PRO2
      ROUTE2 --&gt; PRO2
      REC3 --&gt; PRO2
      PRO2 --&gt; PRO8
      PRO8 --&gt; PRO4
      PRO4 --&gt; PRO6
      PRO6 --&gt; EXP3
      PRO6 --&gt; EXP4
      end
    end
classDef receiver,exporter fill:#8b5cf6,stroke:#333,stroke-width:1px,color:#fff;
classDef processor fill:#6366f1,stroke:#333,stroke-width:1px,color:#fff;
classDef con-receive,con-export fill:#45c175,stroke:#333,stroke-width:1px,color:#fff;
classDef sub-logs stroke:#34d399,stroke-width:1px, color:#34d399,stroke-dasharray: 3 3;
classDef sub-traces stroke:#fbbf24,stroke-width:1px, color:#fbbf24,stroke-dasharray: 3 3;
classDef sub-metrics stroke:#38bdf8,stroke-width:1px, color:#38bdf8,stroke-dasharray: 3 3;</pre></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article><article class=default><header class=headline></header><h1 id=73-sum-connector-ã®ãƒ†ã‚¹ãƒˆ>7.3 Sum Connector ã®ãƒ†ã‚¹ãƒˆ</h1><details open class="box cstyle notices green"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-running"></i>
Exercise</summary><div class=box-content><p><strong>Gateway ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Gateway terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-4769d8a104cbfd5dc2fcdcb269e8eef0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-2d08d8214ebb5c190df34481c660966d aria-expanded=true data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-4769d8a104cbfd5dc2fcdcb269e8eef0","R-tab-dc146ad677dc5dd9c26a2a6537f98eb7")'>
<span class=tab-nav-text>Start the Gateway</span></button></div><div class=tab-content-container><div id=R-tab-id-2d08d8214ebb5c190df34481c660966d data-tab-item=R-tab-dc146ad677dc5dd9c26a2a6537f98eb7 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>gateway.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Agent ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Agent terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-266dc0570bf7d0ea4e17b5d28f22e0fe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-29858fdcda27c9ea651e121f599e179d aria-expanded=true data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-266dc0570bf7d0ea4e17b5d28f22e0fe","R-tab-e2d8debf4ffe3bb6331201655f536d9d")'>
<span class=tab-nav-text>Start the Agent</span></button></div><div class=tab-content-container><div id=R-tab-id-29858fdcda27c9ea651e121f599e179d data-tab-item=R-tab-e2d8debf4ffe3bb6331201655f536d9d class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../otelcol --config<span class=o>=</span>agent.yaml</span></span></code></pre></div></div></div></div></div><p><strong>Loadgen ã‚’èµ·å‹•ã™ã‚‹</strong>
<strong>Spans terminal</strong> ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€ä»¥ä¸‹ã® <code>loadgen</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦8ã¤ã®ã‚¹ãƒ‘ãƒ³ã‚’é€ä¿¡ã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-f1fedcf9009903a969c14e00634b2261><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-21e5976be24ba2751a5b521387acbef1 aria-expanded=true data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f1fedcf9009903a969c14e00634b2261","R-tab-c04840259ee1732c29330a07b53ce556")'>
<span class=tab-nav-text>Loadgen</span></button></div><div class=tab-content-container><div id=R-tab-id-21e5976be24ba2751a5b521387acbef1 data-tab-item=R-tab-c04840259ee1732c29330a07b53ce556 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>../loadgen -count <span class=m>8</span></span></span></code></pre></div></div></div></div></div><p><strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ä¸¡æ–¹ãŒãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚loadgen ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚</p><p><strong>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã™ã‚‹</strong>
ã‚¹ãƒ‘ãƒ³ã‚’å‡¦ç†ã™ã‚‹éš›ã€<strong>Agent</strong> ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ <strong>Gateway</strong> ã«è»¢é€ã—ã¾ã™ã€‚<strong>Gateway</strong> ã¯ãã‚Œã‚‰ã‚’ <code>gateway-metrics.out</code> ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p><p>ãƒ¡ãƒˆãƒªã‚¯ã‚¹å‡ºåŠ›ã« <code>user.card-charge</code> ãŒå­˜åœ¨ã—ã€ãã‚Œãã‚Œã« <code>user.name</code> å±æ€§ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã® jq ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™</p><div class=tab-panel data-tab-group=R-tabs-23f9ad1e8772519395312167904de33a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-ba4e3e366627fefb725e5269803ec7bc aria-expanded=true data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-23f9ad1e8772519395312167904de33a","R-tab-5bcdc0d6fffb60ccb3e52026507edd53")'>
<span class=tab-nav-text>jq query command</span>
</button>
<button aria-controls=R-tab-id-a4e2e87d72adf9f9a2b6de9a39bd02cd aria-expanded=false data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-23f9ad1e8772519395312167904de33a","R-tab-845b9df504b40e63fe9060457ddcf4e9")'>
<span class=tab-nav-text>jq example output</span></button></div><div class=tab-content-container><div id=R-tab-id-ba4e3e366627fefb725e5269803ec7bc data-tab-item=R-tab-5bcdc0d6fffb60ccb3e52026507edd53 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jq -r <span class=s1>&#39;.resourceMetrics[].scopeMetrics[].metrics[] | select(.name == &#34;user.card-charge&#34;) | .sum.dataPoints[] | &#34;\(.attributes[] | select(.key == &#34;user.name&#34;).value.stringValue)\t\(.asDouble)&#34;&#39;</span> gateway-metrics.out <span class=p>|</span> <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span><span class=s1>$&#39;\t&#39;</span> <span class=nb>read</span> -r name charge<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>printf</span> <span class=s2>&#34;%-20s %s\n&#34;</span> <span class=s2>&#34;</span><span class=nv>$name</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$charge</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div></div></div><div id=R-tab-id-a4e2e87d72adf9f9a2b6de9a39bd02cd data-tab-item=R-tab-845b9df504b40e63fe9060457ddcf4e9 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>George Lucas         67.49
</span></span><span class=line><span class=cl>Frodo Baggins        87.14
</span></span><span class=line><span class=cl>Thorin Oakenshield   90.98
</span></span><span class=line><span class=cl>Luke Skywalker       51.37
</span></span><span class=line><span class=cl>Luke Skywalker       65.56
</span></span><span class=line><span class=cl>Thorin Oakenshield   67.5
</span></span><span class=line><span class=cl>Thorin Oakenshield   66.66
</span></span><span class=line><span class=cl>Peter Jackson        94.39</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices important"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-bolt"></i>
é‡è¦</summary><div class=box-content><p>ãã‚Œãã‚Œã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ <code>Ctrl-C</code> ã‚’æŠ¼ã—ã¦ <strong>Agent</strong> ã¨ <strong>Gateway</strong> ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p></div></details></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/23</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=8-ã¾ã¨ã‚>8. ã¾ã¨ã‚</h1><p><a href=#R-image-6dc361ac933c105e1a5d30fc4e2ba79d class=lightbox-link><img alt="Well done" class="lazy lightbox figure-image" loading=lazy src=../images/welldone.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6dc361ac933c105e1a5d30fc4e2ba79d><img alt="Well done" class="lazy lightbox lightbox-image" loading=lazy src=../images/welldone.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/09</span></span></footer></article></section></section></div></main></div><script src=/observability-workshop/js/js-yaml/js-yaml.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-color.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-dispatch.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-drag.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-ease.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-interpolate.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-selection.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-timer.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-transition.min.js?1769686396 defer></script><script src=/observability-workshop/js/d3/d3-zoom.min.js?1769686396 defer></script><script src=/observability-workshop/js/mermaid/mermaid.min.js?1769686396 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/js/clipboard/clipboard.min.js?1769686396 defer></script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1769686396 defer></script><script src=/observability-workshop/js/theme.min.js?1769686396 defer></script></body></html>