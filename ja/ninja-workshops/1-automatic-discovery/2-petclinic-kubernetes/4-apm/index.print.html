<!doctype html><html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 8.2.0+9cac649a184a2967957ef9bbececf9402192846c"><meta name=description content='ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Kubernetesä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry CollectorãŒPodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã€Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Splunk OpenTelemetry Javaã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ (trace)ã€ã‚¹ãƒ‘ãƒ³ (span)ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
è‡ªå‹•æ¤œå‡ºã¨è¨­å®š è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã¯ã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚„å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å¿…è¦ã¨ã›ãšã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚¹ãƒ‘ãƒ³ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
ã“ã‚Œã¯APMã‚’å§‹ã‚ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (manual instrumentation) ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ã€ã‚¿ã‚°ã€ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã€ãƒˆãƒ¬ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¤šãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è©³ç´°ã‚’æä¾›ã§ãã¾ã™ã€‚
Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€OpenTelemetry Collectorã¯instrumentation.opentelemetry.io/inject-javaã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚
ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã¯trueã«è¨­å®šã™ã‚‹ã‹ã€OpenTelemetry Collectorã®namespace/daemonsetï¼ˆä¾‹ï¼šdefault/splunk-otel-collectorï¼‰ã«è¨­å®šã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åå‰ç©ºé–“ã‚’ã¾ãŸã„ã§å‹•ä½œã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
deployment.yamlã®ä½¿ç”¨ PodãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«deployment.yamlã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Podã«å¯¾ã—ã¦ã“ã‚Œã‚’å®Ÿæ–½æ¸ˆã¿ã§ã™ï¼š
admin-server config-server discovery-server apiVersion: apps/v1 kind: Deployment metadata: name: admin-server labels: app.kubernetes.io/part-of: spring-petclinic spec: selector: matchLabels: app: admin-server template: metadata: labels: app: admin-server annotations: instrumentation.opentelemetry.io/inject-java: "default/splunk-otel-collector"'><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta name=twitter:description content='ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Kubernetesä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry CollectorãŒPodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã€Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Splunk OpenTelemetry Javaã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ (trace)ã€ã‚¹ãƒ‘ãƒ³ (span)ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
è‡ªå‹•æ¤œå‡ºã¨è¨­å®š è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã¯ã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚„å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å¿…è¦ã¨ã›ãšã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚¹ãƒ‘ãƒ³ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
ã“ã‚Œã¯APMã‚’å§‹ã‚ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (manual instrumentation) ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ã€ã‚¿ã‚°ã€ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã€ãƒˆãƒ¬ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¤šãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è©³ç´°ã‚’æä¾›ã§ãã¾ã™ã€‚
Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€OpenTelemetry Collectorã¯instrumentation.opentelemetry.io/inject-javaã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚
ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã¯trueã«è¨­å®šã™ã‚‹ã‹ã€OpenTelemetry Collectorã®namespace/daemonsetï¼ˆä¾‹ï¼šdefault/splunk-otel-collectorï¼‰ã«è¨­å®šã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åå‰ç©ºé–“ã‚’ã¾ãŸã„ã§å‹•ä½œã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
deployment.yamlã®ä½¿ç”¨ PodãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«deployment.yamlã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Podã«å¯¾ã—ã¦ã“ã‚Œã‚’å®Ÿæ–½æ¸ˆã¿ã§ã™ï¼š
admin-server config-server discovery-server apiVersion: apps/v1 kind: Deployment metadata: name: admin-server labels: app.kubernetes.io/part-of: spring-petclinic spec: selector: matchLabels: app: admin-server template: metadata: labels: app: admin-server annotations: instrumentation.opentelemetry.io/inject-java: "default/splunk-otel-collector"'><meta property="og:url" content="https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta property="og:description" content='ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Kubernetesä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry CollectorãŒPodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã€Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Splunk OpenTelemetry Javaã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ (trace)ã€ã‚¹ãƒ‘ãƒ³ (span)ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
è‡ªå‹•æ¤œå‡ºã¨è¨­å®š è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã¯ã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚„å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å¿…è¦ã¨ã›ãšã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚¹ãƒ‘ãƒ³ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
ã“ã‚Œã¯APMã‚’å§‹ã‚ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (manual instrumentation) ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ã€ã‚¿ã‚°ã€ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã€ãƒˆãƒ¬ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¤šãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è©³ç´°ã‚’æä¾›ã§ãã¾ã™ã€‚
Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€OpenTelemetry Collectorã¯instrumentation.opentelemetry.io/inject-javaã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚
ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã¯trueã«è¨­å®šã™ã‚‹ã‹ã€OpenTelemetry Collectorã®namespace/daemonsetï¼ˆä¾‹ï¼šdefault/splunk-otel-collectorï¼‰ã«è¨­å®šã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åå‰ç©ºé–“ã‚’ã¾ãŸã„ã§å‹•ä½œã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
deployment.yamlã®ä½¿ç”¨ PodãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«deployment.yamlã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Podã«å¯¾ã—ã¦ã“ã‚Œã‚’å®Ÿæ–½æ¸ˆã¿ã§ã™ï¼š
admin-server config-server discovery-server apiVersion: apps/v1 kind: Deployment metadata: name: admin-server labels: app.kubernetes.io/part-of: spring-petclinic spec: selector: matchLabels: app: admin-server template: metadata: labels: app: admin-server annotations: instrumentation.opentelemetry.io/inject-java: "default/splunk-otel-collector"'><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta itemprop=name content="APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta itemprop=description content='ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Kubernetesä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry CollectorãŒPodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã€Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Splunk OpenTelemetry Javaã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ (trace)ã€ã‚¹ãƒ‘ãƒ³ (span)ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
è‡ªå‹•æ¤œå‡ºã¨è¨­å®š è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã¯ã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚„å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å¿…è¦ã¨ã›ãšã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚¹ãƒ‘ãƒ³ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
ã“ã‚Œã¯APMã‚’å§‹ã‚ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (manual instrumentation) ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ã€ã‚¿ã‚°ã€ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã€ãƒˆãƒ¬ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¤šãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è©³ç´°ã‚’æä¾›ã§ãã¾ã™ã€‚
Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€OpenTelemetry Collectorã¯instrumentation.opentelemetry.io/inject-javaã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚
ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã¯trueã«è¨­å®šã™ã‚‹ã‹ã€OpenTelemetry Collectorã®namespace/daemonsetï¼ˆä¾‹ï¼šdefault/splunk-otel-collectorï¼‰ã«è¨­å®šã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åå‰ç©ºé–“ã‚’ã¾ãŸã„ã§å‹•ä½œã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
deployment.yamlã®ä½¿ç”¨ PodãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«deployment.yamlã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Podã«å¯¾ã—ã¦ã“ã‚Œã‚’å®Ÿæ–½æ¸ˆã¿ã§ã™ï¼š
admin-server config-server discovery-server apiVersion: apps/v1 kind: Deployment metadata: name: admin-server labels: app.kubernetes.io/part-of: spring-petclinic spec: selector: matchLabels: app: admin-server template: metadata: labels: app: admin-server annotations: instrumentation.opentelemetry.io/inject-java: "default/splunk-otel-collector"'><meta itemprop=dateModified content="2025-12-05T11:52:17+09:00"><meta itemprop=wordCount content="50"><title>APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html rel=canonical type=text/html title="APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1765303813 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1765303813 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1765303813 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1765303813 defer></script><script src=/observability-workshop/js/search.min.js?1765303813 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.ja.js?1765303813"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1765303813 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1765303813 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1765303813 defer></script><script src=/observability-workshop/js/lunr/tinyseg.js?1765303813 defer></script><script src=/observability-workshop/js/lunr/lunr.ja.min.js?1765303813 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["ja"]</script><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765303813 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765303813 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1765303813 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1765303813 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1765303813 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html",window.relearn.relBasePath="../../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Copied_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼!`,window.T_Copy_link_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Link_copied_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Reset_view=`ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ`,window.T_View_reset=`ãƒªã‚»ãƒƒãƒˆã‚’è¦‹ã‚‹`,window.T_No_results_found=`"{0}" ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,window.T_N_results_found=`"{0}" ã§ {1} ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-url=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleNav() type=button title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="ç›®æ¬¡ (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/index.html><span itemprop=name>è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ (Automatic Discovery) ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/index.html><span itemprop=name>PetClinic Kubernetes ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>4. è‡ªå‹•æ¤œå‡ºã¨è¨­å®š</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/index.print.html title="ç« å…¨ä½“ã‚’å°åˆ·ã™ã‚‹ (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/3-verify-setup/index.html title="Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ç¢ºèª (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/2-petclinic-kubernetes/4-apm/1-patching-deployment/index.html title="ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ãƒ‘ãƒƒãƒé©ç”¨ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=æ›´ã«><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=apmã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—>APMã®è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10åˆ†</span>
</span>&nbsp;<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Kubernetesä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦<strong>è‡ªå‹•æ¤œå‡ºã¨è¨­å®š</strong>ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry CollectorãŒPodã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã€Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Splunk OpenTelemetry Javaã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Javaã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ (trace)ã€ã‚¹ãƒ‘ãƒ³ (span)ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
è‡ªå‹•æ¤œå‡ºã¨è¨­å®š</summary><div class=box-content><p>è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã¯ã€<strong>ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚„å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å¿…è¦ã¨ã›ãš</strong>ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰<strong>ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚¹ãƒ‘ãƒ³ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°</strong>ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</p><p>ã“ã‚Œã¯APMã‚’å§‹ã‚ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (manual instrumentation) ã®<strong>ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“</strong>ã€‚æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ã€ã‚¿ã‚°ã€ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã€ãƒˆãƒ¬ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¤šãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è©³ç´°ã‚’æä¾›ã§ãã¾ã™ã€‚</p></div></details><p>Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€OpenTelemetry Collectorã¯<code>instrumentation.opentelemetry.io/inject-java</code>ã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™ã€‚</p><p>ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã¯<code>true</code>ã«è¨­å®šã™ã‚‹ã‹ã€OpenTelemetry Collectorã®<code>namespace/daemonset</code>ï¼ˆä¾‹ï¼š<code>default/splunk-otel-collector</code>ï¼‰ã«è¨­å®šã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åå‰ç©ºé–“ã‚’ã¾ãŸã„ã§å‹•ä½œã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
deployment.yamlã®ä½¿ç”¨</summary><div class=box-content><p>PodãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«<code>deployment.yaml</code>ã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆæœŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®Podã«å¯¾ã—ã¦ã“ã‚Œã‚’å®Ÿæ–½æ¸ˆã¿ã§ã™ï¼š</p><ul><li><strong>admin-server</strong></li><li><strong>config-server</strong></li><li><strong>discovery-server</strong></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/part-of</span><span class=p>:</span><span class=w> </span><span class=l>spring-petclinic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>admin-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>instrumentation.opentelemetry.io/inject-java</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;default/splunk-otel-collector&#34;</span></span></span></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><section><h1 class=a11y-only>4. è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ãƒ‘ãƒƒãƒé©ç”¨>ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ãƒ‘ãƒƒãƒé©ç”¨</h1><p><strong>è‡ªå‹•æ¤œå‡ºã¨è¨­å®š</strong>ã‚’æ§‹æˆã™ã‚‹ã«ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (deployment) ã«ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒãƒã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‘ãƒƒãƒãŒé©ç”¨ã•ã‚Œã‚‹ã¨ã€OpenTelemetry CollectorãŒè‡ªå‹•æ¤œå‡ºã¨è¨­å®šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ³¨å…¥ã—ã€PodãŒå†èµ·å‹•ã•ã‚Œã¦ãƒˆãƒ¬ãƒ¼ã‚¹ (trace) ã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° (profiling) ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚ã¾ãšã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦<code>api-gateway</code>ã«<code>splunk-otel-java</code>ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ï¼š</p><div class=tab-panel data-tab-group=R-tabs-814124da647a1e2631b8b4a6585aabae><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-59b200f1475524409a082d082f743363 aria-expanded=true data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-814124da647a1e2631b8b4a6585aabae","R-tab-147de2e4d489d131e220c244ab59800a")'>
<span class=tab-nav-text>Describe api-gateway</span>
</button>
<button aria-controls=R-tab-id-213a129c3e4d3819a4659fb2d7458204 aria-expanded=false data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-814124da647a1e2631b8b4a6585aabae","R-tab-397382ef4cd20471e3d9c9fecb6c01a7")'>
<span class=tab-nav-text>Describe Output</span></button></div><div class=tab-content-container><div id=R-tab-id-59b200f1475524409a082d082f743363 data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pods api-gateway <span class=p>|</span> grep Image:</span></span></code></pre></div></div></div><div id=R-tab-id-213a129c3e4d3819a4659fb2d7458204 data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Image:         quay.io/phagen/spring-petclinic-api-gateway:0.0.2</span></span></code></pre></div></div></div></div></div><p>æ¬¡ã«ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®Javaè‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ã™ã¹ã¦ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€OpenTelemetry OperatorãŒ<code>splunk-otel-java</code>ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Podã«æ³¨å…¥ã—ã¾ã™ï¼š</p><div class=tab-panel data-tab-group=R-tabs-f255a1f2ba4ab1503484aaad312bf060><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-436e2e69b2f67dc56cb9ef736da5904b aria-expanded=true data-tab-item=R-tab-095a030c413da2306699957e31df046b class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-f255a1f2ba4ab1503484aaad312bf060","R-tab-095a030c413da2306699957e31df046b")'>
<span class=tab-nav-text>Patch all PetClinic services</span>
</button>
<button aria-controls=R-tab-id-51ab998a3c6dc78fc1686d50f1976d7f aria-expanded=false data-tab-item=R-tab-c7f3c9adf1663130bcb611eae74c77dc class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-f255a1f2ba4ab1503484aaad312bf060","R-tab-c7f3c9adf1663130bcb611eae74c77dc")'>
<span class=tab-nav-text>Patch Output</span></button></div><div class=tab-content-container><div id=R-tab-id-436e2e69b2f67dc56cb9ef736da5904b data-tab-item=R-tab-095a030c413da2306699957e31df046b class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl get deployments -l app.kubernetes.io/part-of<span class=o>=</span>spring-petclinic -o name <span class=p>|</span> xargs -I % kubectl patch % -p <span class=s2>&#34;{\&#34;spec\&#34;: {\&#34;template\&#34;:{\&#34;metadata\&#34;:{\&#34;annotations\&#34;:{\&#34;instrumentation.opentelemetry.io/inject-java\&#34;:\&#34;default/splunk-otel-collector\&#34;}}}}}&#34;</span></span></span></code></pre></div></div></div><div id=R-tab-id-51ab998a3c6dc78fc1686d50f1976d7f data-tab-item=R-tab-c7f3c9adf1663130bcb611eae74c77dc class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>deployment.apps/config-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/admin-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/customers-service patched
</span></span><span class=line><span class=cl>deployment.apps/visits-service patched
</span></span><span class=line><span class=cl>deployment.apps/discovery-server patched (no change)
</span></span><span class=line><span class=cl>deployment.apps/vets-service patched
</span></span><span class=line><span class=cl>deployment.apps/api-gateway patched</span></span></code></pre></div></div></div></div></div><p><strong>config-server</strong>ã€<strong>discovery-server</strong>ã€<strong>admin-server</strong>ã«ã¤ã„ã¦ã¯ã€ã™ã§ã«ãƒ‘ãƒƒãƒãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ãŸã‚å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p><code>api-gateway</code> Podã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å†åº¦ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š</p><div class=tab-panel data-tab-group=R-tabs-1adce46f728d78db1c05a9df40fa9dec><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-645335a94c94a895ac3cf48905290d7d aria-expanded=true data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-1adce46f728d78db1c05a9df40fa9dec","R-tab-147de2e4d489d131e220c244ab59800a")'>
<span class=tab-nav-text>Describe api-gateway</span>
</button>
<button aria-controls=R-tab-id-2e9c98c6ebc06d06ba30da4e61df4d6a aria-expanded=false data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("R-tabs-1adce46f728d78db1c05a9df40fa9dec","R-tab-397382ef4cd20471e3d9c9fecb6c01a7")'>
<span class=tab-nav-text>Describe Output</span></button></div><div class=tab-content-container><div id=R-tab-id-645335a94c94a895ac3cf48905290d7d data-tab-item=R-tab-147de2e4d489d131e220c244ab59800a class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl describe pods api-gateway <span class=p>|</span> grep Image:</span></span></code></pre></div></div></div><div id=R-tab-id-2e9c98c6ebc06d06ba30da4e61df4d6a data-tab-item=R-tab-397382ef4cd20471e3d9c9fecb6c01a7 class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Image:         ghcr.io/signalfx/splunk-otel-java/splunk-otel-java:v1.30.0
</span></span><span class=line><span class=cl>Image:         quay.io/phagen/spring-petclinic-api-gateway:0.0.2</span></span></code></pre></div></div></div></div></div><p><code>api-gateway</code>ã«æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒè¿½åŠ ã•ã‚Œã€<code>ghcr.io</code>ã‹ã‚‰<code>splunk-otel-java</code>ãŒãƒ—ãƒ«ã•ã‚Œã¾ã™ï¼ˆæ³¨ï¼š2ã¤ã®<code>api-gateway</code>ã‚³ãƒ³ãƒ†ãƒŠãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã€å…ƒã®ã‚³ãƒ³ãƒ†ãƒŠãŒã¾ã çµ‚äº†å‡¦ç†ä¸­ã®å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ•°ç§’å¾…ã£ã¦ãã ã•ã„ï¼‰ã€‚</p><p><strong>Splunk Observability Cloud</strong>ã®Kubernetes Navigatorã«æˆ»ã‚Šã¾ã™ã€‚æ•°åˆ†å¾Œã€PodãŒã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã£ã¦å†èµ·å‹•ã•ã‚Œã€è‡ªå‹•æ¤œå‡ºã¨è¨­å®šã‚³ãƒ³ãƒ†ãƒŠãŒè¿½åŠ ã•ã‚Œã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ã‚ˆã†ãªè¡¨ç¤ºã«ãªã‚Šã¾ã™ï¼š</p><p><a href=#R-image-6dc8b7db3b175a4023b4d00d5fa48926 class=lightbox-link><img alt=restart class="lazy lightbox figure-image" loading=lazy src=../../images/k8s-navigator-restarted-pods.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6dc8b7db3b175a4023b4d00d5fa48926><img alt=restart class="lazy lightbox lightbox-image" loading=lazy src=../../images/k8s-navigator-restarted-pods.png></a></p><p>Kubernetes Navigatorã§PodãŒç·‘è‰²ã«ãªã‚‹ã¾ã§å¾…ã£ã¦ã‹ã‚‰ã€æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é€²ã‚“ã§ãã ã•ã„ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><article class=default><header class=headline></header><h1 id=splunk-apmã§ã®ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º>Splunk APMã§ã®ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º</h1><p>å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§<strong>APM</strong>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æ–°ã—ãã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (instrumentation) ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ãƒˆãƒ¬ãƒ¼ã‚¹ (trace) ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><p>ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒœãƒƒã‚¯ã‚¹ã§<strong>Environment</strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ <strong>(1)</strong> ã‚’ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®åå‰ã«å¤‰æ›´ã—ã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã‚Œã¯**<code>&lt;INSTANCE>-workshop</code><strong>ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§</strong><code>INSTANCE</code>**ã¯ã€å…ˆã»ã©å®Ÿè¡Œã—ãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å€¤ã§ã™ã€‚ã“ã‚Œã®ã¿ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p></div></details><p><a href=#R-image-1da133f870df998787871a3bbce399e4 class=lightbox-link><img alt=apm class="lazy lightbox figure-image" loading=lazy src=../../images/zero-config-first-services-overview.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1da133f870df998787871a3bbce399e4><img alt=apm class="lazy lightbox lightbox-image" loading=lazy src=../../images/zero-config-first-services-overview.png></a></p><p><strong>Service Map</strong> <strong>(2)</strong> ãƒšã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æº–å‚™ã‚’ã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/clipboard/clipboard.min.js?1765303813 defer></script><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1765303813 defer></script><script src=/observability-workshop/js/theme.min.js?1765303813 defer></script></body></html>