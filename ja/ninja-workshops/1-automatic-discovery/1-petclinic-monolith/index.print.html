<!doctype html><html id=R-html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 9.0.3+9bc97fdf9eaf3af61af9bcc11db2e010de83af95"><meta name=description content="Spring PetClinic ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã® Splunk Observability Cloud ã®è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®šæ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã™ã€‚"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="Spring PetClinic ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã® Splunk Observability Cloud ã®è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®šæ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã™ã€‚"><meta property="og:url" content="https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta property="og:description" content="Spring PetClinic ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã® Splunk Observability Cloud ã®è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®šæ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã™ã€‚"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta itemprop=name content="PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><meta itemprop=description content="Spring PetClinic ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã® Splunk Observability Cloud ã®è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®šæ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã™ã€‚"><meta itemprop=dateModified content="2026-01-05T13:54:40+09:00"><meta itemprop=wordCount content="71"><title>PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/en/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html rel=canonical type=text/html title="PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/images/favicon.ico?1770901822 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/css/auto-complete/auto-complete.min.css?1770901822 rel=stylesheet><script src=/observability-workshop/js/auto-complete/auto-complete.min.js?1770901822 defer></script><script src=/observability-workshop/js/search-lunr.min.js?1770901822 defer></script><script src=/observability-workshop/js/search.min.js?1770901822 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/observability-workshop/searchindex.ja.js?1770901822"</script><script src=/observability-workshop/js/lunr/lunr.min.js?1770901822 defer></script><script src=/observability-workshop/js/lunr/lunr.stemmer.support.min.js?1770901822 defer></script><script src=/observability-workshop/js/lunr/lunr.multi.min.js?1770901822 defer></script><script src=/observability-workshop/js/lunr/tinyseg.js?1770901822 defer></script><script src=/observability-workshop/js/lunr/lunr.ja.min.js?1770901822 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["ja"]</script><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770901822 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/fonts/fontawesome/css/all.min.css?1770901822 rel=stylesheet></noscript><link href=/observability-workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1770901822 rel=stylesheet><link href=/observability-workshop/css/theme.min.css?1770901822 rel=stylesheet><link href=/observability-workshop/css/format-print.min.css?1770901822 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html",window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.T_Copy_to_clipboard=`ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Copied_to_clipboard=`ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Link_copied_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Reset_view=`ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ`,window.T_View_reset=`ãƒªã‚»ãƒƒãƒˆã‚’è¦‹ã‚‹`,window.T_No_results_found=`"{0}" ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,window.T_N_results_found=`"{0}" ã§ {1} ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`,window.T_Browser_unsupported_feature=`ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã“ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“`,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantprefix="my-custom-",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";(!e||!e.startsWith(window.relearn.customvariantprefix)&&!window.relearn.themevariants.includes(e)||e.startsWith(window.relearn.customvariantprefix)&&!window.localStorage.getItem(window.relearn.absBaseUri+"/variantstylesheet-"+e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({appplicationName:"observability-workshop",realm:"us1",rumAccessToken:"h7q1NLX6lJz0h_5-OqQJkg",recorder:"splunk",features:{video:!0}})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print" data-origin=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar class=default-animation><div class="topbar-wrapper default-animation"><div class="topbar-sidebar-divider default-animation"></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar default-animation" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="ç›®æ¬¡ (CTRL+ALT+t)"><i class="fa-fw fas fa-table-list"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/index.html><span itemprop=name>Splunk4Ninjas Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/index.html><span itemprop=name>è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print default-animation" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/index.print.html title="ç« å…¨ä½“ã‚’å°åˆ·ã™ã‚‹ (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span></div><div class="topbar-button topbar-button-prev default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/index.html title="è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ— (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next default-animation" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/1-otel-collector/index.html title="OpenTelemetry Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more default-animation" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=æ›´ã«><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=petclinic-ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—>PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>30 minutes</span>
</span>&nbsp;
<span class="badge cstyle blue badge-with-title"><span class=badge-title class=text-muted>Author
</span><span class=badge-content>Robert Castley</span></span><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ç›®çš„ã¯ã€<strong>Splunk Observability Cloud</strong> ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨­å®šã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªæ‰‹é †ã‚’èª¬æ˜ã™ã‚‹ã“ã¨ã§ã™ï¼š</p><ul><li>Splunk Infrastructure Monitoring (IM)</li><li>Splunk Automatic Discovery for Java (APM)<ul><li>Database Query Performance</li><li>AlwaysOn Profiling</li></ul></li><li>Splunk Real User Monitoring (RUM)</li><li>RUM ã‹ã‚‰ APM ã¸ã®ç›¸é–¢</li><li>Splunk Log Observer (LO)</li></ul><p>ã¾ãŸã€ã‚µãƒ³ãƒ—ãƒ« Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆSpring PetClinicï¼‰ã®ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰æ–¹æ³•ã€ãŠã‚ˆã³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã€å®Ÿè¡Œæ–¹æ³•ã«ã¤ã„ã¦ã‚‚èª¬æ˜ã—ã¾ã™ã€‚</p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã¨ã€<strong>Splunk APM</strong> è£½å“ã§ä½¿ç”¨ã•ã‚Œã‚‹ Java 2.x å‘ã‘ã®<strong>è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®š</strong>æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ­ã‚°ãŒå³åº§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ãã®å¾Œã€<strong>Splunk OpenTelemetry Javascript Libraries (RUM)</strong> ã‚’ä½¿ç”¨ã—ã¦ PetClinic ã®ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ HTML ãƒšãƒ¼ã‚¸ï¼‰ã‚’è¨ˆè£…ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿè¡Œã™ã‚‹ã™ã¹ã¦ã®ã‚¯ãƒªãƒƒã‚¯ã‚„ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ã«å¯¾ã—ã¦ RUM ãƒˆãƒ¬ãƒ¼ã‚¹ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><p>æœ€å¾Œã«ã€PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã¸ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ­ã‚°ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><details open class="box cstyle notices primary"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info"></i>
å‰ææ¡ä»¶</summary><div class=box-content><ul><li>ãƒãƒ¼ãƒˆ <code>2222</code> ã¸ã®ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ SSH ã‚¢ã‚¯ã‚»ã‚¹</li><li>ãƒãƒ¼ãƒˆ <code>8083</code> ã¸ã®ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ HTTP ã‚¢ã‚¯ã‚»ã‚¹</li><li><code>bash</code> ã‚·ã‚§ãƒ«ãŠã‚ˆã³ <code>vi/vim</code> ã‚¨ãƒ‡ã‚£ã‚¿ã®åŸºæœ¬çš„ãªçŸ¥è­˜</li></ul></div></details><p><a href=#R-image-737dadafe3755e083af76d00d12fef5e class=lightbox-link><img alt="PetClinic Exercise" class="lazy lightbox figure-image" loading=lazy src=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/images/petclinic-exercise.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-737dadafe3755e083af76d00d12fef5e><img alt="PetClinic Exercise" class="lazy lightbox lightbox-image" loading=lazy src=/observability-workshop/ja/ninja-workshops/1-automatic-discovery/1-petclinic-monolith/images/petclinic-exercise.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2026/01/05</span></span></footer></article><section><h1 class=a11y-only>PetClinic ãƒ¢ãƒãƒªã‚¹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>OpenTelemetry Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1><p>Splunk OpenTelemetry Collector ã¯ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨ˆè£…ã«ãŠã‘ã‚‹ä¸­æ ¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚ãã®å½¹å‰²ã¯ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¦é€ä¿¡ã™ã‚‹ã“ã¨ã§ã™ï¼š</p><ul><li>ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆãƒ‡ã‚£ã‚¹ã‚¯ã€CPUã€ãƒ¡ãƒ¢ãƒªãªã©ï¼‰</li><li>Application Performance Monitoring (APM) ãƒˆãƒ¬ãƒ¼ã‚¹</li><li>ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿</li><li>ãƒ›ã‚¹ãƒˆãŠã‚ˆã³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚°</li></ul><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
æ—¢å­˜ã® OpenTelemetry Collector ã®å‰Šé™¤</summary><div class=box-content><p>Splunk IM ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’å®Œäº†ã—ã¦ã„ã‚‹å ´åˆã¯ã€ç¶šè¡Œã™ã‚‹å‰ã« Kubernetes ã§å®Ÿè¡Œä¸­ã® Collector ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å‰Šé™¤ã§ãã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm delete splunk-otel-collector</span></span></code></pre></div><p>EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã€å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Collector ãŒã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚Collector ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh
</span></span><span class=line><span class=cl>sudo sh /tmp/splunk-otel-collector.sh --uninstall</span></span></code></pre></div></div></details><p>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å¿…è¦ãªç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. ~/workshop/petclinic/scripts/check_env.sh</span></span></code></pre></div><p>å‡ºåŠ›ã§ã€ä»¥ä¸‹ã®ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ãŒå­˜åœ¨ã—ã€å€¤ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã«é€£çµ¡ã—ã¦ãã ã•ã„ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ACCESS_TOKEN
</span></span><span class=line><span class=cl>REALM
</span></span><span class=line><span class=cl>RUM_TOKEN
</span></span><span class=line><span class=cl>HEC_TOKEN
</span></span><span class=line><span class=cl>HEC_URL
</span></span><span class=line><span class=cl>INSTANCE</span></span></code></pre></div><p>ã“ã‚Œã§ Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¯ã€ã„ãã¤ã‹ã®è¿½åŠ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚Œã¾ã™ï¼š</p><ul><li><code>--with-instrumentation</code> - Splunk ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã® OpenTelemetry Java ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€PetClinic Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚è¨­å®šã¯ä¸è¦ã§ã™ï¼</li><li><code>--deployment-environment</code> - ãƒªã‚½ãƒ¼ã‚¹å±æ€§ <code>deployment.environment</code> ã‚’æŒ‡å®šã•ã‚ŒãŸå€¤ã«è¨­å®šã—ã¾ã™ã€‚ã“ã‚Œã¯ UI ã§ãƒ“ãƒ¥ãƒ¼ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</li><li><code>--enable-profiler</code> - Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ©ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® CPU ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</li><li><code>--enable-profiler-memory</code> - Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ©ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ãƒ¢ãƒªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</li><li><code>--enable-metrics</code> - Micrometer ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹ã«ã—ã¾ã™</li><li><code>--hec-token</code> - Collector ãŒä½¿ç”¨ã™ã‚‹ HEC ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¾ã™</li><li><code>--hec-url</code> - Collector ãŒä½¿ç”¨ã™ã‚‹ HEC URL ã‚’è¨­å®šã—ã¾ã™</li></ul><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -sSL https://dl.signalfx.com/splunk-otel-collector.sh &gt; /tmp/splunk-otel-collector.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>sudo sh /tmp/splunk-otel-collector.sh --realm <span class=nv>$REALM</span> -- <span class=nv>$ACCESS_TOKEN</span> --mode agent --without-fluentd --with-instrumentation --deployment-environment <span class=nv>$INSTANCE</span>-petclinic --enable-profiler --enable-profiler-memory --enable-metrics --hec-token <span class=nv>$HEC_TOKEN</span> --hec-url <span class=nv>$HEC_URL</span></span></span></code></pre></div><p>æ¬¡ã«ã€Collector ã«ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ã¦ã€AWS ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ ID ã§ã¯ãªãã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ›ã‚¹ãƒˆåã‚’å…¬é–‹ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€UI ã§ã®ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo sed -i <span class=s1>&#39;s/gcp, ecs, ec2, azure, system/system, gcp, ecs, ec2, azure/g&#39;</span> /etc/otel/collector/agent_config.yaml</span></span></code></pre></div><p><code>agent_config.yaml</code> ã«ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ãŸã‚‰ã€Collector ã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart splunk-otel-collector</span></span></code></pre></div><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€<strong>Hosts with agent installed</strong> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ç§»å‹•ã—ã¦ã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã§ãã¾ã™ã€‚<strong>Dashboards â†’ Hosts with agent installed</strong> ã®é †ã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚</p><p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ã‚’ä½¿ç”¨ã—ã¦ <code>host.name</code> ã‚’é¸æŠã—ã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ›ã‚¹ãƒˆåã‚’å…¥åŠ›ã¾ãŸã¯é¸æŠã—ã¦ãã ã•ã„ï¼ˆã“ã‚Œã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰å–å¾—ã§ãã¾ã™ï¼‰ã€‚ãƒ›ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãŒæµã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã‚‰ã€APM ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæ¥­ã‚’é–‹å§‹ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><article class=default><header class=headline></header><h1 id=spring-petclinic-ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰>Spring PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰</h1><p>APM ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã«æœ€åˆã«å¿…è¦ãªã®ã¯&mldr;ãã†ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã“ã®æ¼”ç¿’ã§ã¯ã€Spring PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€Spring ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆSpringbootï¼‰ã§æ§‹ç¯‰ã•ã‚ŒãŸéå¸¸ã«äººæ°—ã®ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ« Java ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p><p>ã¾ãšã€PetClinic ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã€ãã®å¾Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã€ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/spring-projects/spring-petclinic</span></span></code></pre></div><p><code>spring-petclinic</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> spring-petclinic
</span></span><span class=line><span class=cl>git checkout b26f235250627a235a2974a22f2317dbef27338d</span></span></code></pre></div><p>Docker ã‚’ä½¿ç”¨ã—ã¦ã€PetClinic ãŒä½¿ç”¨ã™ã‚‹ MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’èµ·å‹•ã—ã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -d -e <span class=nv>MYSQL_USER</span><span class=o>=</span>petclinic -e <span class=nv>MYSQL_PASSWORD</span><span class=o>=</span>petclinic -e <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span>root -e <span class=nv>MYSQL_DATABASE</span><span class=o>=</span>petclinic -p 3306:3306 docker.io/biarms/mysql:5.7</span></span></code></pre></div><p>æ¬¡ã«ã€PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚·ãƒ³ãƒ—ãƒ«ãªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ Locust ã‚’å®Ÿè¡Œã™ã‚‹åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚Locust ã¯ã€Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªè² è·ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run --network<span class=o>=</span><span class=s2>&#34;host&#34;</span> -d -p 8090:8090 -v ~/workshop/petclinic:/mnt/locust docker.io/locustio/locust -f /mnt/locust/locustfile.py --headless -u <span class=m>1</span> -r <span class=m>1</span> -H http://127.0.0.1:8083</span></span></code></pre></div><p>æ¬¡ã«ã€<code>maven</code> ã‚’ä½¿ç”¨ã—ã¦ PetClinic ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./mvnw package -Dmaven.test.skip<span class=o>=</span>true</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
æƒ…å ±</summary><div class=box-content><p>åˆå›å®Ÿè¡Œæ™‚ã¯æ•°åˆ†ã‹ã‹ã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹å‰ã«å¤šãã®ä¾å­˜é–¢ä¿‚ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ä»¥é™ã®ãƒ“ãƒ«ãƒ‰ã¯ã‚ˆã‚Šé«˜é€Ÿã«ãªã‚Šã¾ã™ã€‚</p></div></details><p>ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã—ãŸã‚‰ã€å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å–å¾—ã§ãã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://ifconfig.me</span></span></code></pre></div><p>IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿”ã•ã‚Œã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«å¿…è¦ã«ãªã‚‹ã®ã§ã€ã“ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><article class=default><header class=headline></header><h1 id=3-real-user-monitoring>3. Real User Monitoring</h1><p>Real User Monitoring (RUM) ã®è¨ˆè£…ã§ã¯ã€ãƒšãƒ¼ã‚¸ã« OpenTelemetry Javascript ã‚¹ãƒ‹ãƒšãƒƒãƒˆ <a href=https://github.com/signalfx/splunk-otel-js-web rel=external><strong>https://github.com/signalfx/splunk-otel-js-web</strong></a> ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ <strong>Data Management â†’ Add Integration â†’ RUM Instrumentation â†’ Browser Instrumentation</strong> ã®é †ã«é€²ã¿ã¾ã™ã€‚</p><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ä½¿ç”¨ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŒ‡ç¤ºã—ã¾ã™ã€‚<strong>Next</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®å½¢å¼ã§ <strong>App name</strong> ã¨ <strong>Environment</strong> ã‚’å…¥åŠ›ã—ã¾ã™ï¼š</p><ul><li><code>&lt;INSTANCE>-petclinic-service</code> - <code>&lt;INSTANCE></code> ã‚’å…ˆã»ã©ãƒ¡ãƒ¢ã—ãŸå€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚</li><li><code>&lt;INSTANCE>-petclinic-env</code> - <code>&lt;INSTANCE></code> ã‚’å…ˆã»ã©ãƒ¡ãƒ¢ã—ãŸå€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚</li></ul><p>ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã¯ã€ãƒšãƒ¼ã‚¸ã® <code>&lt;head></code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å…ˆé ­ã«é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ HTML ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ä¾‹ã§ã™ï¼ˆã“ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ä½¿ç”¨ã›ãšã€ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ãŒç”Ÿæˆã—ãŸã‚‚ã®ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼‰ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>IMPORTANT: Replace the <span class=p>&lt;</span><span class=nt>version</span><span class=p>&gt;</span> placeholder in the src URL with a
</span></span><span class=line><span class=cl>version from https://github.com/signalfx/splunk-otel-js-web/releases
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>*/
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>realm</span><span class=o>:</span> <span class=s2>&#34;eu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=s2>&#34;&lt;redacted&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>applicationName</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deploymentEnvironment</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-env&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>Spring PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã§å†åˆ©ç”¨ã•ã‚Œã‚‹å˜ä¸€ã® HTML ãƒšãƒ¼ã‚¸ã‚’ã€Œãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒšãƒ¼ã‚¸ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚Splunk RUM è¨ˆè£…ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æŒ¿å…¥ã™ã‚‹ã«ã¯ã€ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã§è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ãŸã‚ã€ã“ã®å ´æ‰€ãŒæœ€é©ã§ã™ã€‚</p><p>ãã‚Œã§ã¯ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒšãƒ¼ã‚¸ã‚’ç·¨é›†ã—ã¾ã—ã‚‡ã†ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi src/main/resources/templates/fragments/layout.html</span></span></code></pre></div><p>æ¬¡ã«ã€ä¸Šè¨˜ã§ç”Ÿæˆã—ãŸã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ãƒšãƒ¼ã‚¸ã® <code>&lt;head></code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«æŒ¿å…¥ã—ã¾ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã¯å«ã‚ãšã€ã‚½ãƒ¼ã‚¹ URL ã® <code>&lt;version></code> ã‚’ <code>latest</code> ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!doctype html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>th:fragment</span><span class=o>=</span><span class=s>&#34;layout (template, menu)&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>SplunkRum</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>realm</span><span class=o>:</span> <span class=s2>&#34;eu0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rumAccessToken</span><span class=o>:</span> <span class=s2>&#34;&lt;redacted&gt;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>applicationName</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deploymentEnvironment</span><span class=o>:</span> <span class=s2>&#34;petclinic-1be0-petclinic-env&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>...</span></span></code></pre></div><p>ã‚³ãƒ¼ãƒ‰å¤‰æ›´ãŒå®Œäº†ã—ãŸã‚‰ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ãƒ“ãƒ«ãƒ‰ã—ã¦å†åº¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<code>maven</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ PetClinic ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«/ãƒ“ãƒ«ãƒ‰/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./mvnw package -Dmaven.test.skip<span class=o>=</span>true</span></span></code></pre></div><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env,version<span class=o>=</span>0.314 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p>æ¬¡ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ <code>http://&lt;IP_ADDRESS>:8083</code> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><p>RUM ã§ã€ä¸Šè¨˜ã® RUM ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§å®šç¾©ã•ã‚ŒãŸç’°å¢ƒã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ãã¾ã™ã€‚</p><p>RUM ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ã™ã‚‹ã¨ã€ã‚¹ãƒ‘ãƒ³å†…ã« APM ã¸ã®ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒˆãƒ¬ãƒ¼ã‚¹ ID ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ç¾åœ¨ã® RUM ãƒˆãƒ¬ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹ APM ãƒˆãƒ¬ãƒ¼ã‚¹ã«ç§»å‹•ã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><article class=default><header class=headline></header><h1 id=java-å‘ã‘è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®š>Java å‘ã‘è‡ªå‹•ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãŠã‚ˆã³è¨­å®š</h1><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã§ãã¾ã™ã€‚<code>mysql</code> ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ¸¡ã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å…ˆã»ã©èµ·å‹•ã—ãŸ MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æŒ‡ç¤ºã—ã¾ã™ã€‚ã¾ãŸã€<code>otel.service.name</code> ã¨ <code>otel.resource.attributes</code> ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åã‚’ä½¿ç”¨ã—ãŸè«–ç†åã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ UI ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p><code>http://&lt;IP_ADDRESS>:8083</code>ï¼ˆ<code>&lt;IP_ADDRESS></code> ã‚’å…ˆã»ã©å–å¾—ã—ãŸ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><p>Collector ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéš›ã€<strong>AlwaysOn Profiling</strong> ã¨ <strong>Metrics</strong> ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Collector ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® CPU ãŠã‚ˆã³ãƒ¡ãƒ¢ãƒªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã—ã€Splunk Observability Cloud ã«é€ä¿¡ã—ã¾ã™ã€‚</p><p>PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã™ã‚‹ã¨ã€Collector ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•çš„ã«æ¤œå‡ºã—ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã®ãŸã‚ã«è¨ˆè£…ã™ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚</p><div class=tab-panel data-tab-group=R-tabs-5477d6a66de3fe0c805121c6d7204e4d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button aria-controls=R-tab-id-da8e7f606429979c197f146220cf4274 aria-expanded=true data-tab-item=R-tab-022e401a0cdb9f22931069a5fda6aa70 class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("R-tabs-5477d6a66de3fe0c805121c6d7204e4d","R-tab-022e401a0cdb9f22931069a5fda6aa70")'>
<span class=tab-nav-text>å‡ºåŠ›ä¾‹</span></button></div><div class=tab-content-container><div id=R-tab-id-da8e7f606429979c197f146220cf4274 data-tab-item=R-tab-022e401a0cdb9f22931069a5fda6aa70 class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight actionbar-wrapper" dir=auto><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/lib/splunk-instrumentation/splunk-otel-javaagent.jar
</span></span><span class=line><span class=cl>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:58:970 +0000] [main] INFO io.opentelemetry.javaagent.tooling.VersionLogger - opentelemetry-javaagent - version: splunk-2.6.0-otel-2.6.0
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - Profiler configuration:
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:730 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                  splunk.profiler.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -                splunk.profiler.directory : /tmp
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -       splunk.profiler.recording.duration : 20s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:731 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -               splunk.profiler.keep-files : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -            splunk.profiler.logs-endpoint : null
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -              otel.exporter.otlp.endpoint : null
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -           splunk.profiler.memory.enabled : true
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -        splunk.profiler.memory.event.rate : 150/s
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:732 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.call.stack.interval : PT10S
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -  splunk.profiler.include.internal.stacks : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger -      splunk.profiler.tracing.stacks.only : false
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.ConfigurationLogger - -----------------------
</span></span><span class=line><span class=cl>[otel.javaagent 2024-08-20 11:35:59:733 +0000] [main] INFO com.splunk.opentelemetry.profiler.JfrActivator - Profiler is active.</span></span></code></pre></div></div></div></div></div><p>Splunk APM UI ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã€DB Query ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ <strong>APM</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€<strong>Environment</strong> ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã”è‡ªèº«ã®ç’°å¢ƒï¼ˆä¾‹ï¼š<code>&lt;INSTANCE>-petclinic</code>ã€<code>&lt;INSTANCE></code> ã¯å…ˆã»ã©ãƒ¡ãƒ¢ã—ãŸå€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰ã‚’é¸æŠã—ã¾ã™ã€‚</p><p>æ¤œè¨¼ãŒå®Œäº†ã—ãŸã‚‰ã€<code>Ctrl-c</code> ã‚’æŠ¼ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã§ãã¾ã™ã€‚</p><p>ãƒªã‚½ãƒ¼ã‚¹å±æ€§ã¯ã€å ±å‘Šã•ã‚Œã‚‹ã™ã¹ã¦ã®ã‚¹ãƒ‘ãƒ³ã«è¿½åŠ ã§ãã¾ã™ã€‚ä¾‹ãˆã° <code>version=0.314</code> ã®ã‚ˆã†ã«æŒ‡å®šã—ã¾ã™ã€‚ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ãƒªã‚½ãƒ¼ã‚¹å±æ€§ãƒªã‚¹ãƒˆã‚‚å®šç¾©ã§ãã¾ã™ï¼ˆä¾‹ï¼š<code>key1=val1,key2=val2</code>ï¼‰ã€‚</p><p>æ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹å±æ€§ã‚’ä½¿ç”¨ã—ã¦ PetClinic ã‚’å†åº¦èµ·å‹•ã—ã¾ã—ã‚‡ã†ã€‚å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã«ãƒªã‚½ãƒ¼ã‚¹å±æ€§ã‚’è¿½åŠ ã™ã‚‹ã¨ã€Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«å®šç¾©ã•ã‚ŒãŸå†…å®¹ãŒä¸Šæ›¸ãã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚æ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹å±æ€§ <code>version=0.314</code> ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼š</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dserver.port<span class=o>=</span><span class=m>8083</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.service.name<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-service <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-Dotel.resource.attributes<span class=o>=</span>deployment.environment<span class=o>=</span><span class=nv>$INSTANCE</span>-petclinic-env,version<span class=o>=</span>0.314 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-jar target/spring-petclinic-*.jar --spring.profiles.active<span class=o>=</span>mysql</span></span></code></pre></div><p>Splunk APM UI ã«æˆ»ã‚Šã€æœ€è¿‘ã®ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ã™ã‚‹ã¨ã€ã‚¹ãƒ‘ãƒ³å†…ã«æ–°ã—ã„ <code>version</code> å±æ€§ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article><article class=default><header class=headline></header><h1 id=4-log-observer>4. Log Observer</h1><p>Splunk Log Observer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ã€Splunk OpenTelemetry Collector ãŒ Spring PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ­ã‚°ã‚’è‡ªå‹•çš„ã«åé›†ã—ã€OTLP ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ Splunk Observability Cloud ã«é€ä¿¡ã—ã¾ã™ã€‚ãã®éš›ã€ãƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆã« <code>trace_id</code>ã€<code>span_id</code>ã€ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ©ã‚°ã‚’ä»˜ä¸ã—ã¾ã™ã€‚</p><p>Log Observer ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‹ã‚‰ã®ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã—ã¾ã™ã€‚ãƒ­ã‚°ã®æ¤œç´¢ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€åˆ†æã‚’è¡Œã£ã¦ã€å•é¡Œã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„ç’°å¢ƒã®ç›£è¦–ãŒå¯èƒ½ã§ã™ã€‚</p><p>PetClinic Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æˆ»ã‚Šã€<strong>Error</strong> ãƒªãƒ³ã‚¯ã‚’æ•°å›ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã«ã„ãã¤ã‹ã®ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><p><a href=#R-image-8766f1da5f35a31ddfc92b02b05bf6a7 class=lightbox-link><img alt="PetClinic Error" class="lazy lightbox figure-image" loading=lazy src=../images/petclinic-error.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8766f1da5f35a31ddfc92b02b05bf6a7><img alt="PetClinic Error" class="lazy lightbox lightbox-image" loading=lazy src=../images/petclinic-error.png></a></p><p>å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ <strong>Log Observer</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€<strong>Index</strong> ãŒ <strong>splunk4rookies-workshop</strong> ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><p>æ¬¡ã«ã€<strong>Add Filter</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ <code>service.name</code> ã‚’æ¤œç´¢ã—ã¦ã€å€¤ <code>&lt;INSTANCE>-petclinic-service</code> ã‚’é¸æŠã—ã€<code>=</code>ï¼ˆincludeï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚ã“ã‚Œã§ã€PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p><p>PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® <strong>Error</strong> ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã®1ã¤ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã€ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸãƒˆãƒ¬ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã¾ãŸã€APM ã¨ Infrastructure ã® Related Content ãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã«ã‚‚æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚</p><p><a href=#R-image-2789f09a4b26132616f031f167e8da02 class=lightbox-link><img alt="Log Observer" class="lazy lightbox figure-image" loading=lazy src=../images/log-observer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2789f09a4b26132616f031f167e8da02><img alt="Log Observer" class="lazy lightbox lightbox-image" loading=lazy src=../images/log-observer.png></a></p><p>ã“ã‚Œã§ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¯çµ‚äº†ã§ã™ã€‚å¤šãã®å†…å®¹ã‚’ã‚«ãƒãƒ¼ã—ã¾ã—ãŸã€‚ã“ã®æ™‚ç‚¹ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆAPM ã¨ RUMï¼‰ã€ãƒ­ã‚°ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚³ãƒ¼ãƒ‰ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãŒ Splunk Observability Cloud ã«å ±å‘Šã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚ã—ã‹ã‚‚ã€PetClinic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãå®Ÿç¾ã§ãã¾ã—ãŸï¼ˆRUM ã‚’é™¤ãï¼‰ã€‚</p><p><strong>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</strong></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/12/05</span></span></footer></article></section></div></main></div><script src=/observability-workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1770901822 defer></script><script src=/observability-workshop/js/theme.min.js?1770901822 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>