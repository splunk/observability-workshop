<!doctype html><html lang=ja dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.145.0"><meta name=generator content="Relearn 7.2.1"><meta name=description content="OpenTelemetry Collectorã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å­¦ã³ã€Splunk Observability Cloudã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="OpenTelemetry Collectorã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å­¦ã³ã€Splunk Observability Cloudã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.90/ja/other/opentelemetry-collector/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta property="og:description" content="OpenTelemetry Collectorã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å­¦ã³ã€Splunk Observability Cloudã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta itemprop=name content="OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹ :: Splunk Observability Cloud Workshops"><meta itemprop=description content="OpenTelemetry Collectorã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å­¦ã³ã€Splunk Observability Cloudã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚"><meta itemprop=dateModified content="2023-12-19T12:19:15+09:00"><meta itemprop=wordCount content="109"><title>OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹ :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.90/ja/other/opentelemetry-collector/index.html rel=canonical type=text/html title="OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹ :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.90/images/favicon.ico?1746614790 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.90/css/fontawesome-all.min.css?1746614790 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.90/css/fontawesome-all.min.css?1746614790 rel=stylesheet></noscript><link href=/observability-workshop/v5.90/css/auto-complete.css?1746614790 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.90/css/auto-complete.css?1746614790 rel=stylesheet></noscript><link href=/observability-workshop/v5.90/css/perfect-scrollbar.min.css?1746614790 rel=stylesheet><link href=/observability-workshop/v5.90/css/theme.min.css?1746614790 rel=stylesheet><link href=/observability-workshop/v5.90/css/format-print.min.css?1746614790 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.90",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Copied_to_clipboard=`ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼!`,window.T_Copy_link_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼`,window.T_Link_copied_to_clipboard=`ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!`,window.T_Reset_view=`ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ`,window.T_View_reset=`ãƒªã‚»ãƒƒãƒˆã‚’è¦‹ã‚‹`,window.T_No_results_found=`"{0}" ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,window.T_N_results_found=`"{0}" ã§ {1} ä»¶ã®çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"Z8JjZ8iNiF4jSfNHvJIRJg",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"us1",rumAccessToken:"Z8JjZ8iNiF4jSfNHvJIRJg"})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}p{margin:.75rem 0}.highlight{max-height:500px;overflow-y:auto}pre:not(.mermaid){margin:0}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.90/ja/other/opentelemetry-collector/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="ç›®æ¬¡ (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#æ¦‚è¦>æ¦‚è¦</a><ul><li><a href=#ninja-ã‚»ã‚¯ã‚·ãƒ§ãƒ³>Ninja ã‚»ã‚¯ã‚·ãƒ§ãƒ³</a></li></ul></li><li><a href=#å¯¾è±¡è€…>å¯¾è±¡è€…</a></li><li><a href=#å‰ææ¡ä»¶>å‰ææ¡ä»¶</a></li><li><a href=#å­¦ç¿’ç›®æ¨™>å­¦ç¿’ç›®æ¨™</a></li><li><a href=#opentelemetry-ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼>OpenTelemetry ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.90/ja/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.90/ja/other/index.html><span itemprop=name>Ninja Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>OpenTelemetry Collector</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/index.print.html title="ç« å…¨ä½“ã‚’å°åˆ·ã™ã‚‹ (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.90/ja/other/pet-clinic/docs/logobserver/index.html title="Log Observer (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/1-installation/index.html title="OpenTelemetry Collector Contrib ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=æ›´ã«><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable other" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=opentelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹>OpenTelemetryã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã™ã‚‹</h1><h2 id=æ¦‚è¦>æ¦‚è¦</h2><p>OpenTelemetry ã‚’ä½¿ã„å§‹ã‚ã‚‹å ´åˆã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã¯ã‚ˆã„ã§ã™ãŒã€OpenTelemetry Collector ã‚’ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã®ã¯å¤šãã®åˆ©ç‚¹ãŒã‚ã‚Šã€æœ¬ç•ªç’°å¢ƒã§ã¯ Collector ã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€OpenTelemetry Collector ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ç„¦ç‚¹ã‚’å½“ã¦ã€Splunk Observability Cloud ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã€å®Ÿéš›ã«ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒã«åˆã‚ã›ã¦ Collector ã‚’æ´»ç”¨ã‚’å­¦ã³ã¾ã™ã€‚ã¾ãŸã€åˆ†æ•£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ãŸã‚ã®ã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¾ã§ã®é“ã®ã‚Šã‚’é€²ã‚€ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><h3 id=ninja-ã‚»ã‚¯ã‚·ãƒ§ãƒ³>Ninja ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®é€”ä¸­ã«ã¯ã€å±•é–‹ã§ãã‚‹ <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content>Ninja ã‚»ã‚¯ã‚·ãƒ§ãƒ³</span></span> ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ã‚ˆã‚Šå®Ÿè·µçš„ã§ã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ä¸­ã€ã‚‚ã—ãã¯è‡ªåˆ†ã®æ™‚é–“ã‚’ä½¿ã£ã¦ã€ã•ã‚‰ã«æŠ€è¡“çš„ãªè©³ç´°ã«å–ã‚Šçµ„ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>OpenTelemetry ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é »ç¹ã«é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Ninjaã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ãŒå¤ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå¤ã„å ´åˆã«ã¯æ›´æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã™ã“ã¨ã‚‚ã§ãã¾ã™ã®ã§ã€å¿…è¦ãªã‚‚ã®ã‚’è¦‹ã¤ã‘ãŸå ´åˆã¯ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ï¼</span></span></summary><div class=box-content><p><strong>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’å®Œäº†ã™ã‚‹ã¨ã€æ­£å¼ã« OpenTelemetry Collector ãƒ‹ãƒ³ã‚¸ãƒ£ã«ãªã‚Šã¾ã™ï¼</strong></p></div></details><hr><h2 id=å¯¾è±¡è€…>å¯¾è±¡è€…</h2><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¯ã€OpenTelemetry Collector ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦ã•ã‚‰ã«å­¦ã³ãŸã„ã¨è€ƒãˆã¦ã„ã‚‹é–‹ç™ºè€…ã‚„ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚</p><h2 id=å‰ææ¡ä»¶>å‰ææ¡ä»¶</h2><ul><li>ãƒ‡ãƒ¼ã‚¿åé›†ã«é–¢ã™ã‚‹åŸºæœ¬çš„ãªç†è§£</li><li>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨vim/viã®çµŒé¨“</li><li>Ubuntu 20.04 LTSã¾ãŸã¯22.04 LTSãŒç¨¼åƒã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹/ãƒ›ã‚¹ãƒˆ/VM<ul><li>æœ€å°è¦ä»¶ã¯AWS/EC2 t2.microï¼ˆ1 CPUã€1GB RAMã€8GBã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰</li></ul></li></ul><h2 id=å­¦ç¿’ç›®æ¨™>å­¦ç¿’ç›®æ¨™</h2><p>ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®çµ‚ã‚ã‚Šã¾ã§ã«ã€å‚åŠ è€…ã¯ä»¥ä¸‹ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</p><ul><li>OpenTelemetry ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç†è§£ã™ã‚‹</li><li>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ãƒ»åˆ†æã™ã‚‹</li><li>OpenTelemetry ã‚’ä½¿ç”¨ã™ã‚‹åˆ©ç‚¹ã‚’ç‰¹å®šã™ã‚‹</li><li>è‡ªåˆ†ãŸã¡ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹</li></ul><h2 id=opentelemetry-ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼>OpenTelemetry ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼</h2><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    subgraph Receivers
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><section><h1 class=a11y-only>OpenTelemetry Collectorã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-contrib-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹>OpenTelemetry Collector Contrib ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h1><h2 id=opentelemetry-collector-ã®-contrib-ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹>OpenTelemetry Collector ã® Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</h2><p>OpenTelemetry Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãŸã‚ã«ã€ã¾ãšã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ãŒæœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚ã“ã®ãƒ©ãƒœã§ã¯ã€ <code>wget</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ OpenTelemetry ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ãã¾ã™ã€‚</p><p><a href=https://github.com/open-telemetry/opentelemetry-collector-releases/releases rel=external target=_blank>OpenTelemetry Collector Contrib releases page</a>
ã‹ã‚‰ã€ã”åˆ©ç”¨ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã® <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥æ‰‹ã—ã¦ãã ã•ã„ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.80.0/otelcol-contrib_0.80.0_linux_amd64.deb</span></span></code></pre></div><h2 id=opentelemetry-collector-ã®-contrib-ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹>OpenTelemetry Collector ã® Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h2><p><code>dpkg</code> ã‚’ä½¿ã£ã¦ã€ <code>.deb</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ä¸‹è¨˜ã® <strong>dpkg Output</strong> ã®ã‚ˆã†ã«ãªã‚Œã°ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æˆåŠŸã§ã™ï¼</p><div class=tab-panel data-tab-group=8efabaab4dcbcd3f0dc465a0e5570d4b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=install class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8efabaab4dcbcd3f0dc465a0e5570d4b","install")'>
<span class=tab-nav-text>Install</span>
</button>
<button data-tab-item=dpkg-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("8efabaab4dcbcd3f0dc465a0e5570d4b","dpkg-output")'>
<span class=tab-nav-text>dpkg Output</span></button></div><div class=tab-content-container><div data-tab-item=install class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo dpkg -i otelcol-contrib_0.80.0_linux_amd64.deb</span></span></code></pre></div></div></div><div data-tab-item=dpkg-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Selecting previously unselected package otelcol-contrib.
</span></span><span class=line><span class=cl>(Reading database ... 64218 files and directories currently installed.)
</span></span><span class=line><span class=cl>Preparing to unpack otelcol-contrib_0.75.0_linux_amd64.deb ...
</span></span><span class=line><span class=cl>Unpacking otelcol-contrib (0.75.0) ...
</span></span><span class=line><span class=cl>Setting up otelcol-contrib (0.75.0) ...
</span></span><span class=line><span class=cl>Created symlink /etc/systemd/system/multi-user.target.wants/otelcol-contrib.service â†’ /lib/systemd/system/otelcol-contrib.service.</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/22</span></span></footer></article><section><h1 class=a11y-only>1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-contribã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹>OpenTelemetry Collector Contribã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h1><h2 id=collector-ãŒå‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹>Collector ãŒå‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹</h2><p>ã“ã‚Œã§ã€Collector ãŒå‹•ã„ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚rootæ¨©é™ã§ <code>systemctl</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã€ãã‚Œã‚’ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class=tab-panel data-tab-group=3f30f09d7a1a58632c07ae1325cc79d2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3f30f09d7a1a58632c07ae1325cc79d2","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=status-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("3f30f09d7a1a58632c07ae1325cc79d2","status-output")'>
<span class=tab-nav-text>Status Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl status otelcol-contrib</span></span></code></pre></div></div></div><div data-tab-item=status-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â— otelcol-contrib.service - OpenTelemetry Collector Contrib
</span></span><span class=line><span class=cl>     Loaded: loaded (/lib/systemd/system/otelcol-contrib.service; enabled; vendor preset: enabled)
</span></span><span class=line><span class=cl>     Active: active (running) since Tue 2023-05-16 08:23:23 UTC; 25s ago
</span></span><span class=line><span class=cl>   Main PID: 1415 (otelcol-contrib)
</span></span><span class=line><span class=cl>      Tasks: 5 (limit: 1141)
</span></span><span class=line><span class=cl>     Memory: 22.2M
</span></span><span class=line><span class=cl>        CPU: 125ms
</span></span><span class=line><span class=cl>     CGroup: /system.slice/otelcol-contrib.service
</span></span><span class=line><span class=cl>             â””â”€1415 /usr/bin/otelcol-contrib --config=/etc/otelcol-contrib/config.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]: NumberDataPoints #0
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]: Data point attributes:
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]:      -&gt; exporter: Str(logging)
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]:      -&gt; service_instance_id: Str(df8a57f4-abdc-46b9-a847-acd62db1001f)
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]:      -&gt; service_name: Str(otelcol-contrib)
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]:      -&gt; service_version: Str(0.75.0)
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]: StartTimestamp: 2023-05-16 08:23:39.006 +0000 UTC
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]: Timestamp: 2023-05-16 08:23:39.006 +0000 UTC
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]: Value: 0.000000
</span></span><span class=line><span class=cl>May 16 08:23:39 ip-10-0-9-125 otelcol-contrib[1415]:         {&#34;kind&#34;: &#34;exporter&#34;, &#34;data_type&#34;: &#34;metrics&#34;, &#34;name&#34;: &#34;logging&#34;}</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Tips: status è¡¨ç¤ºã‚’ä¸­æ­¢ã™ã‚‹ã«ã¯</summary><div class=box-content><p><code>systemctl status</code> ã‚³ãƒãƒ³ãƒ‰ã®è¡¨ç¤ºã‚’ä¸­æ­¢ã™ã‚‹ã¨ãã¯ <code>q</code> ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p></div></details><p>ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã™ã‚‹ã¨ãã¯ã€ <code>stop</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=12b099976449513d06297f6d1699e199><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("12b099976449513d06297f6d1699e199","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl stop otelcol-contrib</span></span></code></pre></div></div></div></div></div><p>æ›´æ–°ã—ãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ã¨ãã¯ã€ <code>restart</code> ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•ã‚’ã—ã¾ã—ã‚‡ã†ã€‚</p><div class=tab-panel data-tab-group=a6b460b4c11cd5f0b2e99487d192deab><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a6b460b4c11cd5f0b2e99487d192deab","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart otelcol-contrib</span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> Open Telemetry Collector Builder (ocb) ã‚’ä½¿ã£ã¦ã€ç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ä½œã‚‹</span></span></summary><div class=box-content><p>ã“ã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€ãŠä½¿ã„ã®ã‚·ã‚¹ãƒ†ãƒ ã«ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</p><ul><li><p>Go (latest version)</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /tmp
</span></span><span class=line><span class=cl>wget https://golang.org/dl/go1.20.linux-amd64.tar.gz
</span></span><span class=line><span class=cl>sudo tar -C /usr/local -xzf go1.20.linux-amd64.tar.gz</span></span></code></pre></div><p><code>.profile</code> ã‚’ç·¨é›†ã—ã¦ã€æ¬¡ã®ç’°å¢ƒå¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOROOT</span><span class=o>=</span>/usr/local/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>GOPATH</span><span class=o>=</span><span class=nv>$HOME</span>/go
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$GOPATH</span>/bin:<span class=nv>$GOROOT</span>/bin:<span class=nv>$PATH</span></span></span></code></pre></div><p>ãã—ã¦ã€ã‚·ã‚§ãƒ«ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> ~/.profile</span></span></code></pre></div><p>Go ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go version</span></span></code></pre></div></li><li><p>ocb ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</p><ul><li><p>ocb ãƒã‚¤ãƒŠãƒªãƒ¼ã‚’ <a href=https://github.com/open-telemetry/opentelemetry-collector/releases/tag/cmd%2Fbuilder%2Fv0.80.0 rel=external target=_blank>project releases</a>
ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mv ocb_0.80.0_darwin_arm64 /usr/bin/ocb
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> /usr/bin/ocb</span></span></code></pre></div><p>åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã€Go ã®ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦ãƒã‚¤ãƒŠãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go install go.opentelemetry.io/collector/cmd/builder@v0.80.0
</span></span><span class=line><span class=cl>mv <span class=k>$(</span>go env GOPATH<span class=k>)</span>/bin/builder /usr/bin/ocb</span></span></code></pre></div></li></ul></li><li><p>(Optional) Docker</p></li></ul><h2 id=ãªãœç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®>ãªãœç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ï¼Ÿ</h2><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆcore ãŠã‚ˆã³ contribï¼‰ã¯ã€å«ã¾ã‚Œã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå°‘ãªã™ããŸã‚Šã€ã‚‚ã—ãã¯å¤šã™ããŸã‚Šã—ã¾ã™ã€‚</p><p>æœ¬ç•ªç’°å¢ƒã§ contrib ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é‡ãŒå¤šãã€ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¿…è¦ã§ã¯ãªã„ã‚‚ã®ã‚‚å«ã¾ã‚Œã‚‹ãŸã‚ã€ä¸€èˆ¬çš„ã«ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚</p><h2 id=ç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹åˆ©ç‚¹ã¯>ç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹åˆ©ç‚¹ã¯ï¼Ÿ</h2><p>ç‹¬è‡ªã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãƒã‚¤ãƒŠãƒªãƒ¼ï¼ˆé€šå¸¸ã¯ã€Œãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã€ã¨å‘¼ã°ã‚Œã‚‹ï¼‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€å¿…è¦ãªã‚‚ã®ã ã‘ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ¡ãƒªãƒƒãƒˆã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™:</p><ol><li>ãƒã‚¤ãƒŠãƒªãƒ¼ã®ã‚µã‚¤ã‚ºãŒå°ã•ã„</li><li>ä¸€èˆ¬çš„ãª Go ã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ã‚’åˆ©ç”¨ã§ãã‚‹</li><li>çµ„ç¹”ç‹¬è‡ªã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹</li></ol><h2 id=ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã®æ³¨æ„äº‹é …ã¯>ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã®æ³¨æ„äº‹é …ã¯ï¼Ÿ</h2><p>ã•ã¦ã€ã“ã‚Œã¯ Ninja ã‚¾ãƒ¼ãƒ³ã®äººãŸã¡ã«ã‚ãˆã¦è¨€ã†ã“ã¨ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒ:</p><ol><li>Go ã®é–‹ç™ºçµŒé¨“ã‚’ã€å¿…é ˆã§ã¯ãªã„ãŒã€æ¨å¥¨ã•ã‚Œã‚‹</li><li>Splunk ã® <strong>ã‚µãƒãƒ¼ãƒˆãŒãªã„</strong></li><li>ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„</li></ol><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®‰å®šæ€§ã«å‘ã‘ã¦é€²ã‚“ã§ã„ã¾ã™ãŒã€è¡Œã‚ã‚ŒãŸå¤‰æ›´ãŒãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å£Šã™å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚Splunk ãƒãƒ¼ãƒ ã¯ã€ã‚ˆã‚Šé«˜ã„å®‰å®šæ€§ã¨ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ãŸã‚ã®ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸçµŒé¨“ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p><h2 id=ninja-ã‚¾ãƒ¼ãƒ³>Ninja ã‚¾ãƒ¼ãƒ³</h2><p>å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ã™ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«å¾“ã„ã€ <code>otelcol-builder.yaml</code> ã¨ã„ã†æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â””â”€â”€ otelcol-builder.yaml</span></span></code></pre></div><p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãŸã‚‰ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒªã‚¹ãƒˆã¨è¿½åŠ ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ä¾‹ã§ã¯ã€å°å…¥è¨­å®šã«å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ãƒ“ãƒ«ãƒ€ãƒ¼ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-ninja</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>A custom build of the Open Telemetry Collector</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/ballastextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/extension/zpagesextension  v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/httpforwarder v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/splunkhecexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/exporter/signalfxexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/memorylimiterprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/hostmetricsreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/zipkinreceiver v0.80.0</span></span></span></code></pre></div><p><em>ocb</em> ã®ãŸã‚ã®yamlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦æ›´æ–°ã—ãŸã‚‰ã€ æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ocb --config<span class=o>=</span>otelcol-builder.yaml</span></span></code></pre></div><p>ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãŒä½œæˆã•ã‚Œã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â”œâ”€â”€ dist
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ components.go
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ components_test.go
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ go.mod
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ go.sum
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ main.go
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ main_others.go
</span></span><span class=line><span class=cl>â”‚Â Â  â”œâ”€â”€ main_windows.go
</span></span><span class=line><span class=cl>â”‚Â Â  â””â”€â”€ otelcol-ninja
</span></span><span class=line><span class=cl>â””â”€â”€ otelcol-builder.yaml</span></span></code></pre></div><p>æœ€å¾Œã«ã€ <code>./dist/otelcol-ninja</code> ã‚’å®Ÿè¡Œã™ã‚Œã°ã€ç‹¬è‡ªãƒ“ãƒ«ãƒ‰ã®CollectorãŒå‹•ä½œã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ <code>otelcol-contrib</code> ã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>./dist/otelcol-ninja --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div><p><strong>ã“ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ“ãƒ«ãƒ‰ã«å«ã¾ã‚Œã¦ã„ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã‚’å«ã‚ã¦ã€ä½•ãŒèµ·ã“ã‚‹ã‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</strong> ã€‚</p><h3 id=ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹>ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3><ol><li><a href=https://opentelemetry.io/docs/collector/custom-collector/ rel=external target=_blank>https://opentelemetry.io/docs/collector/custom-collector/</a></li></ol></div></details><hr><h2 id=ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š</h2><p>OpenTelemetry Collector ã¯ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦è¨­å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ã§ãã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚æä¾›ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†:</p><div class=tab-panel data-tab-group=1a24721d2014347fde892b5e68cdaa24><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1a24721d2014347fde892b5e68cdaa24","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("1a24721d2014347fde892b5e68cdaa24","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code" linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div><p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼OpenTelemetry Collector ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«æˆåŠŸã—ã¾ã—ãŸã€‚ã‚ãªãŸã¯ OTel Ninja ã«ãªã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸã€‚ã—ã‹ã—ã¾ãšã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ OpenTelemetry Collector ã®ç•°ãªã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><details open class="box cstyle notices note"><summary class=box-label><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunk ã¯ã€è‡ªç¤¾ã§å®Œå…¨ã«ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸ OpenTelemetry Collector ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€<a href=https://github.com/signalfx/splunk-otel-collector rel=external target=_blank>Splunk GitHub Repository</a> ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€Splunk Observability Cloud ã®ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ç°¡å˜ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã€ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹ã“ã¨ã§åˆ©ç”¨ã§ãã¾ã™ã€‚ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã€OpenTelemetry Collector Contrib ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ãªã„è¿½åŠ æ©Ÿèƒ½ã‚„å¼·åŒ–ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>Splunk ã® OpenTelemetry Collector ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯æœ¬ç•ªç’°å¢ƒã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿ã§ã‚ã‚Šã€å¤šãã®é¡§å®¢ãŒæœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</li><li>ã“ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹é¡§å®¢ã¯ã€å…¬å¼ã® Splunk ã‚µãƒãƒ¼ãƒˆã‹ã‚‰ã€SLA ã®ç¯„å›²å†…ã§ç›´æ¥æ”¯æ´ã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li><li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ãƒˆãƒ¬ãƒ¼ã‚¹åé›†ã®ã‚³ã‚¢æ§‹æˆä½“é¨“ã«å°†æ¥çš„ãªç ´å£Šçš„å¤‰æ›´ãŒãªã„ã“ã¨ã‚’å¿ƒé…ã›ãšã«ã€Splunk ã® OpenTelemetry Collector ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã¾ãŸã¯ç§»è¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆOpenTelemetry ãƒ­ã‚°åé›†ã®è¨­å®šã¯ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã™ï¼‰ã€‚Collector è‡ªèº«ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«ç ´å£Šçš„å¤‰æ›´ãŒã‚ã‚‹å¯èƒ½æ€§ã¯ã‚ã‚Šã¾ã™ã€‚</li></ul></div></details><p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒ›ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Splunk Observability Cloud ã«é€ä¿¡ã™ã‚‹ãŸã‚ã«ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è©³ã—ãè¦‹ã¦ã„ãã€å¤‰æ›´ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/02/21</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h1><p>ã•ã¦ã€OpenTelemetry Collector ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã—ãŸã€‚æ¬¡ã¯ OpenTelemetry Collector ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ï¼ˆæ‹¡å¼µæ©Ÿèƒ½ï¼‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€ä¸»ã«ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’ä¼´ã‚ãªã„ã‚¿ã‚¹ã‚¯ã§ä½¿ç”¨ã§ãã¾ã™ã€‚ä¾‹ã¨ã—ã¦ã¯ã€ãƒ˜ãƒ«ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã€ãƒ‡ãƒ¼ã‚¿è»¢é€ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;: &#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style E fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Receivers
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><section><h1 class=a11y-only>2. ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h1><h2 id=health-check-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>Health Check ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h2><p>ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨åŒæ§˜ã«ã€ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ <code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã§ãã¾ã™ã€‚ã“ã“ã§ã¯å®Ÿéš›ã« <code>config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>config.yaml</code> ã§ã¯ã€ã™ã§ã« <strong>pprof</strong> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¨ <strong>zpages</strong> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ <strong>health_check</strong> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã€ãƒãƒ¼ãƒˆã‚’è§£æ”¾ã—ã€å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã¾ã™ã€‚</p><div class=tab-panel data-tab-group=e1e6317412dcef8f755ef3f8cd6a2f20><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e1e6317412dcef8f755ef3f8cd6a2f20","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=f41b2c2299e9cf9436887142b1eed902><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=extensions-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f41b2c2299e9cf9436887142b1eed902","extensions-configuration")'>
<span class=tab-nav-text>Extensions Configuration</span></button></div><div class=tab-content-container><div data-tab-item=extensions-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=3><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span></span></span></code></pre></div></div></div></div></div><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’èµ·å‹•ã—ã¾ã™:</p><div class=tab-panel data-tab-group=39020f86cb6d6f5ec913b1773a73268a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("39020f86cb6d6f5ec913b1773a73268a","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart otelcol-contrib</span></span></code></pre></div></div></div></div></div><p>ã“ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ HTTP ã® URL ã‚’å…¬é–‹ã—ã€OpenTelemetry Collector ã®ç¨¼åƒçŠ¶æ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ—ãƒ­ãƒ¼ãƒ–ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ Kubernetes ç’°å¢ƒã§ã® Liveness/Readiness ãƒ—ãƒ­ãƒ¼ãƒ–ã¨ã—ã¦ã‚‚ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ <code>curl</code> ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã¯ã€<a href=https://curl.se/docs/manpage.html rel=external target=_blank>curl man page</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p>æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™:</p><div class=tab-panel data-tab-group=6d760d8feb2d953b276fa03dd4f61547><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=curl-command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("6d760d8feb2d953b276fa03dd4f61547","curl-command")'>
<span class=tab-nav-text>curl Command</span>
</button>
<button data-tab-item=curl-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("6d760d8feb2d953b276fa03dd4f61547","curl-output")'>
<span class=tab-nav-text>curl Output</span></button></div><div class=tab-content-container><div data-tab-item=curl-command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:13133</span></span></code></pre></div></div></div><div data-tab-item=curl-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>{&#34;status&#34;:&#34;Server available&#34;,&#34;upSince&#34;:&#34;2023-04-27T10:11:22.153295874+01:00&#34;,&#34;uptime&#34;:&#34;16m24.684476004s&#34;}</span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2025/05/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h1><h2 id=performance-profiler-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>Performance Profiler ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/extension/pprofextension/README.md rel=external target=_blank><strong>Performance Profiler</strong></a> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ã€Go ã® net/http/pprof ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€é–‹ç™ºè€…ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åé›†ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã®å•é¡Œã‚’èª¿æŸ»ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚<strong>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯è©³ã—ãç´¹ä»‹ã¯ã—ã¾ã›ã‚“</strong>ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/22</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h1><h2 id=zpages-ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³>zPages ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/extension/zpagesextension/README.md rel=external target=_blank><strong>zPages</strong></a> ã¯ã€å¤–éƒ¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ã«ä»£ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹å†…éƒ¨ã®æ©Ÿèƒ½ã§ã™ã€‚æœ‰åŠ¹åŒ–ã™ã‚‹ã¨ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹æƒ…å ±ã‚’åé›†ã—ã€é›†è¨ˆã—ã€ã©ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã£ãŸã‹ã® Web ãƒšãƒ¼ã‚¸ã‚’å…¬é–‹ã—ã¾ã™ã€‚zpages ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒæœŸå¾…ã©ãŠã‚Šã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®éå¸¸ã«ä¾¿åˆ©ãªè¨ºæ–­æ©Ÿèƒ½ã§ã™ã€‚</p><div class=tab-panel data-tab-group=e299f3e0ab217fa76509b69f44f079fd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=servicez class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e299f3e0ab217fa76509b69f44f079fd","servicez")'>
<span class=tab-nav-text>ServiceZ</span>
</button>
<button data-tab-item=pipelinez class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e299f3e0ab217fa76509b69f44f079fd","pipelinez")'>
<span class=tab-nav-text>PipelineZ</span>
</button>
<button data-tab-item=extensionz class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("e299f3e0ab217fa76509b69f44f079fd","extensionz")'>
<span class=tab-nav-text>ExtensionZ</span></button></div><div class=tab-content-container><div data-tab-item=servicez class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><strong>ServiceZ</strong> ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã¨ã€pipelinezã€extensionzã€featurez zPages ã¸ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ãƒ“ãƒ«ãƒ‰ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®æƒ…å ±ã‚‚æä¾›ã—ã¾ã™ã€‚</p><p>URL: <a href=http://localhost:55679/debug/servicez rel=external target=_blank>http://localhost:55679/debug/servicez</a> (<code>localhost</code> ã¯ã€é©åˆ‡ãªãƒ›ã‚¹ãƒˆåã«åˆ‡ã‚Šæ›¿ãˆã¦ãã ã•ã„)</p><p><a href=#R-image-fc8a92932a631e336e814b142a4ef682 class=lightbox-link><img alt=ServiceZ class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/servicez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-fc8a92932a631e336e814b142a4ef682><img alt=ServiceZ class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/servicez.png></a></p></div></div><div data-tab-item=pipelinez class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>PipelineZ</strong> ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã§å®Ÿè¡Œä¸­ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«é–¢ã™ã‚‹æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚ã‚¿ã‚¤ãƒ—ã€ãƒ‡ãƒ¼ã‚¿ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ã€å„ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®æƒ…å ±ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>URL: <a href=http://localhost:55679/debug/pipelinez rel=external target=_blank>http://localhost:55679/debug/pipelinez</a> (<code>localhost</code> ã¯ã€é©åˆ‡ãªãƒ›ã‚¹ãƒˆåã«åˆ‡ã‚Šæ›¿ãˆã¦ãã ã•ã„)</p><p><a href=#R-image-2c431020ed8262d54e75bc8d9e367969 class=lightbox-link><img alt=PipelineZ class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/pipelinez.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2c431020ed8262d54e75bc8d9e367969><img alt=PipelineZ class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/pipelinez.png></a></p></div></div><div data-tab-item=extensionz class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p><strong>ExtensionZ</strong> ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã§æœ‰åŠ¹åŒ–ã•ã‚ŒãŸã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><p>Example URL: <a href=http://localhost:55679/debug/extensionz rel=external target=_blank>http://localhost:55679/debug/extensionz</a> (<code>localhost</code> ã¯ã€é©åˆ‡ãªãƒ›ã‚¹ãƒˆåã«åˆ‡ã‚Šæ›¿ãˆã¦ãã ã•ã„)</p><p><a href=#R-image-f0447e82445e7566cc492739ef336557 class=lightbox-link><img alt=ExtensionZ class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/extensionz.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f0447e82445e7566cc492739ef336557><img alt=ExtensionZ class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/extensionz.png></a></p></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> storage ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ã®è€ä¹…æ€§ã‚’å‘ä¸Šã•ã›ã‚‹</span></span></summary><div class=box-content><p>ã“ã‚Œã‚’ã“ãªã†ã«ã¯ã€ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã« <code>file_storage</code> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç¢ºèªã™ã‚‹ã«ã¯ã€<code>otelcol-contrib components</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™:</p><div class=tab-panel data-tab-group=ce554e5fd48c58d514aac177a04a5d6c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ce554e5fd48c58d514aac177a04a5d6c","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=truncated-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("ce554e5fd48c58d514aac177a04a5d6c","truncated-output")'>
<span class=tab-nav-text>Truncated Output</span>
</button>
<button data-tab-item=full-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("ce554e5fd48c58d514aac177a04a5d6c","full-output")'>
<span class=tab-nav-text>Full Output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib components</span></span></code></pre></div></div></div><div data-tab-item=truncated-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>file_storage</span></span></span></code></pre></div></div></div><div data-tab-item=full-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>buildinfo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>otelcol-contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>OpenTelemetry Collector Contrib</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus_simple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>purefb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>receiver_creator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodbatlas</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>vcenter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>snmp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>expvar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jmx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>udplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafkametrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memcached</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowseventlog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsecscontainermetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>iis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nsxt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>aerospike</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>httpcheck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sobjects</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>hostmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>statsd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudfoundry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>collectd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>couchdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kubeletstats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>journald</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>riak</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>active_directory_ds</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlquery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>windowsperfcounters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>flinkmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>podman_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>wavefront</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_events</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>rabbitmq</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sqlserver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>solace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tcplog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscontainerinsightreceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsfirehose</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bigip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filelog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudspanner</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cloudflare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>docker_stats</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azureeventhub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>fluentforward</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlpjsonfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>syslog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cumulativetodelta</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbyattrs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>groupbytrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8sattributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>experimental_metricsgeneration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>metricstransform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>routing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>attributes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>deltatorate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>spanmetrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>span</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_limiter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>redaction</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>resourcedetection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>servicegraph</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>transform</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>probabilistic_sampler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tail_sampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>carbon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>datadog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>f5cloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kafka</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mezmo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>skywalking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsxray</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>dynatrace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logging</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuredataexplorer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>azuremonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>instana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>loadbalancing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sentry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>splunk_hec</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tanzuobservability</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zipkin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>alibabacloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>clickhouse</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>prometheusremotewrite</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awscloudwatchlogs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlecloudpubsub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaeger_thrift</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logzio</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sapm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sumologic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>otlphttp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>googlemanagedprometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>opencensus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awskinesis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>coralogix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>influxdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>logicmonitor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>signalfx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>tencentcloud_logservice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsemf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pulsar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>zpages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>bearertokenauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oidc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>host_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>sigv4auth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>file_storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>memory_ballast</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>health_check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>oauth2client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>awsproxy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>http_forwarder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>jaegerremotesampling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>k8s_observer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>pprof</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>asapclient</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>basicauth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>headers_setter</span></span></span></code></pre></div></div></div></div></div><p>ã“ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ãŒè¨­å®šã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã§ããªã„äº‹è±¡ãŒç™ºç”Ÿã—ãŸã¨ãã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã™ã‚‹æ©Ÿèƒ½ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã«æä¾›ã—ã¾ã™ã€‚</p><p>ã“ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚€ã‚ˆã†ã«è¨­å®šã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšã€ /tmp/otel-data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€èª­ã¿å–ã‚Š/æ›¸ãè¾¼ã¿æ¨©é™ã‚’ä¸ãˆã¦ãã ã•ã„ï¼š</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>file_storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>compaction</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>directory</span><span class=p>:</span><span class=w> </span><span class=l>/tmp/otel-data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_start</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>on_rebound</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_needed_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rebound_trigger_threshold_mib</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ... truncated for clarity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages, file_storage]</span></span></span></code></pre></div><h2 id=ãªãœã‚­ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãã®>ãªãœã‚­ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãã®ï¼Ÿ</h2><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸èª¿ï¼ˆãŠã‚ˆã³ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å†èµ·å‹•ï¼‰ã‚’ä¹—ã‚Šåˆ‡ã£ã¦ã€ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ç¢ºå®Ÿã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><h2 id=ã‚­ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãæ™‚ã®æ³¨æ„äº‹é …ã¯>ã‚­ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãæ™‚ã®æ³¨æ„äº‹é …ã¯ï¼Ÿ</h2><p>ãƒ‡ã‚£ã‚¹ã‚¯ã®æ€§èƒ½ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®æ€§èƒ½ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</p><h3 id=å‚ç…§>å‚ç…§</h3><ol><li><a href=https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583 rel=external target=_blank>https://community.splunk.com/t5/Community-Blog/Data-Persistence-in-the-OpenTelemetry-Collector/ba-p/624583</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage rel=external target=_blank>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/storage/filestorage</a></li></ol></div></details><hr><h2 id=è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†>è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</h2><p>ã•ã¦ã€ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã®ã§ã€è¨­å®šã®å¤‰æ›´ç®‡æ‰€ã‚’ç¢ºèªã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=ffba071822d9a459dcf8ce0f666f8045><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ffba071822d9a459dcf8ce0f666f8045","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=3 linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=hl><span class=lnt> 3
</span></span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>ã•ã¦ã€ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦å¾©ç¿’ã—ãŸã¨ã“ã‚ã§ã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®éƒ¨åˆ†ã«é£›ã³è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å†…ã§ãƒ‡ãƒ¼ã‚¿ãŒãŸã©ã‚‹çµŒè·¯ã‚’å®šç¾©ã™ã‚‹ã‚‚ã®ã§ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‹ã‚‰å§‹ã¾ã‚Šã€è¿½åŠ ã®å‡¦ç†ã‚„å¤‰æ›´ã‚’ã—ã€æœ€çµ‚çš„ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’çµŒç”±ã—ã¦ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’å‡ºã¾ã™ã€‚</p><p>OpenTelemetry Collector ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãšã¯ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‹ã‚‰è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>OpenTelemetry Collector ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h1><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¸ã‚ˆã†ã“ãï¼OpenTelemetry Collectorã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã§ã™ã€‚ã•ã‚ã€å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯ãƒ‡ãƒ¼ã‚¿ã‚’Collectorã«å–ã‚Šè¾¼ã‚€æ–¹æ³•ã§ã€ãƒ—ãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã¨ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯1ã¤ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ä¸€èˆ¬çš„ã«ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å…¥ã‚Œã€å†…éƒ¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›ã—ã€è©²å½“ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å®šç¾©ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ãƒƒã‚µã‚„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¾ã™ã€‚</p><p>ãƒ—ãƒƒã‚·ãƒ¥ã¾ãŸã¯ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚·ãƒ¼ãƒã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’Collectorã«å–ã‚Šè¾¼ã‚€æ–¹æ³•ã§ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒã¯ 1 ã¤ã¾ãŸã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚é€šå¸¸ã€ãƒ¬ã‚·ãƒ¼ãƒã¯æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å…¥ã‚Œã€å†…éƒ¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›ã—ã€è©²å½“ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å®šç¾©ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚„ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style M fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Receivers
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><section><h1 class=a11y-only>3. ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>OpenTelemetry Collector ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h1><h2 id=host-metrics-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>Host Metrics ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h2><p><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/hostmetricsreceiver/README.md rel=external target=_blank><strong>Host Metrics ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</strong></a> ã¯ã€ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã•ã‚ŒãŸãƒ›ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã¨ãã«ä½¿ç”¨ã•ã¾ã™ã€‚</p><p><code>etc/otel-contrib/config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã€<strong>hostmetrics</strong> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã® YAML ã‚’ <strong>receivers</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«æŒ¿å…¥ã—ã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vi /etc/otelcol-contrib/config.yaml</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Tips: vi or nano</summary><div class=box-content><p>vi/vimã®æ“ä½œã«æ…£ã‚Œã¦ã„ãªã„å ´åˆã¯ã€<a href=https://www.nano-editor.org/ rel=external target=_blank>nano</a> ã‚‚ãŠè©¦ã—ã„ãŸã ãã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚nanoã¯Linuxç’°å¢ƒã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ã€ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¨ãƒ‡ã‚£ã‚¿ã®ä¸€ã¤ã§ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/otelcol-contrib/config.yaml</span></span></code></pre></div><ul><li><code>Alt-U</code> ã§ã€ã‚¢ãƒ³ãƒ‰ã‚¥ãŒã§ãã¾ã™ã€‚Macã®å ´åˆã¯ <code>Esc</code> ã‚­ãƒ¼ã‚’æŠ¼ã—ãŸã‚ã¨ã« <code>U</code> ã‚’æŠ¼ã—ã¦ãã ã•ã„ï¼</li><li><code>ctrl-_</code> ã®ã‚ã¨ã«æ•°å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æŒ‡å®šã—ãŸè¡Œæ•°ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã™ã€‚</li><li><code>ctrl-O</code> ã®ã‚ã¨ã« <code>Enter</code> ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã™ã€‚</li><li><code>ctrl-X</code> ã§ã€nanoã‚’çµ‚äº†ã—ã¾ã™ã€‚</li></ul></div></details><div class=tab-panel data-tab-group=2acb3b9a83b5f7f7874288877db40ab5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=host-metrics-receiver-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2acb3b9a83b5f7f7874288877db40ab5","host-metrics-receiver-configuration")'>
<span class=tab-nav-text>Host Metrics Receiver Configuration</span></button></div><div class=tab-content-container><div data-tab-item=host-metrics-receiver-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=2-22><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>OpenTelemetry Collector ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h1><h2 id=prometheus-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>Prometheus ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h2><p><strong>Prometheus</strong> ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚‚ã€ã‚‚ã¡ã‚ã‚“ã‚ã‚Šã¾ã™ã€‚<a href=https://prometheus.io/docs/introduction/overview/ rel=external target=_blank>Prometheus</a> ã¯ OpenTelemetry Collector ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚ã“ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯ã€OpenTelemetry Collector è‡ªèº«ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ã‚‚ä½¿ã‚ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€ã‚³ãƒ¬ã‚¯ã‚¿ã®å¥å…¨æ€§ã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ã€‚</p><p>ã“ã“ã§ã¯ã€<strong>prometheus</strong> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’å¤‰æ›´ã—ã¦ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼è‡ªèº«ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®åå‰ã‚’ <strong>prometheus</strong> ã‹ã‚‰ <strong>prometheus/internal</strong> ã«å¤‰æ›´ã—ã¦ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ã‚’ã‚ˆã‚Šæ˜ç¢ºã—ã¾ã—ã‚‡ã†ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¾ã™ï¼š</p><div class=tab-panel data-tab-group=ecd0959dd2f34bb01e12ba42d09e2bec><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=prometheus-receiver-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ecd0959dd2f34bb01e12ba42d09e2bec","prometheus-receiver-configuration")'>
<span class=tab-nav-text>Prometheus Receiver Configuration</span></button></div><div class=tab-content-container><div data-tab-item=prometheus-receiver-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=1><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class="line hl"><span class=cl><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span></span></span></code></pre></div></div></div></div></div><p>ä¸Šè¨˜ã®è¨­å®šã§ã¯ã€OpenTelemetry Collector è‡ªèº«ãŒå…¬é–‹ã—ã¦ã„ã‚‹ Prometheus ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã€<code>curl</code> ã‚³ãƒãƒ³ãƒ‰ã§è©¦ã™ã“ã¨ãŒã§ãã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8888/metrics</span></span></code></pre></div><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
Tips: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åå‰ã‚’ã¤ã‘ã‚‹</summary><div class=box-content><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãªã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ <code>otlp</code> ã‚„ <code>otlp/2</code> ã®ã‚ˆã†ã«ã€ <code>type[/name]</code> å½¢å¼ã«å¾“ã£ãŸè­˜åˆ¥å­ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã¾ã™ã€‚è­˜åˆ¥å­ãŒä¸€æ„ã§ã‚ã‚‹é™ã‚Šã€ä¸ãˆã‚‰ã‚ŒãŸã‚¿ã‚¤ãƒ—ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¤‡æ•°å›å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ã“ã“ã§ã¯ <code>prometheus/internal</code> ã¨ã„ã†è­˜åˆ¥å­ã§ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç‰¹å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸã®ã§ã€åˆ¥ã® <code>prometheus</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’è¿½åŠ ã—ã¦ã€ç›£è¦–å¯¾è±¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® Prometheus ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p></div></details><h2 id=ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¾‹---prometheus-ãƒ¡ãƒˆãƒªã‚¯ã‚¹>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¾‹ - Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2><p>ã“ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯ã€ <code>prometheus/internal</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒ OpenTelemetry Collector ã‹ã‚‰åé›†ã—ãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã€spmeã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä¾‹ã§ã™ã€‚ã“ã“ã§ã¯ã‚¹ãƒ‘ãƒ³ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒ­ã‚°ã®ã€ãã‚Œãã‚Œã®å—ä¿¡ãŠã‚ˆã³é€ä¿¡ã®æ§˜å­ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯Splunk Observability Cloud ã«ã‚ã‚‹çµ„ã¿è¾¼ã¿ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€Splunk OpenTelemetry Collector ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®çŠ¶æ³ã‚’ç°¡å˜ã«ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚</p></div></details><p><a href=#R-image-1eca94904e8865ab3042c2fc7ac7d5c3 class=lightbox-link><img alt=otel-charts class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/otel-charts.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1eca94904e8865ab3042c2fc7ac7d5c3><img alt=otel-charts class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/otel-charts.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>OpenTelemetry Collector ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h1><h2 id=ãã®ä»–ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>ãã®ä»–ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h2><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã«ã¯ã€ä»–ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã¯ãšã§ã™ã€‚ <strong><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/receiver/otlpreceiver rel=external target=_blank>otlp</a></strong>ã€<strong><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/opencensusreceiver rel=external target=_blank>opencensus</a></strong>ã€<strong><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/jaegerreceiver rel=external target=_blank>jaeger</a></strong>ã€<strong><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/zipkinreceiver rel=external target=_blank>zipkin</a></strong> ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ä»–ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«ã¤ã„ã¦ã¯å–ã‚Šä¸Šã’ã¾ã›ã‚“ã®ã§ã€ãã®ã¾ã¾ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’å‹•çš„ã«ç”Ÿæˆã™ã‚‹</span></span></summary><div class=box-content><p>dockerã‚³ãƒ³ãƒ†ãƒŠã€kubernetesãƒãƒƒãƒ‰ã€sshã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚ˆã†ãªçŸ­æ™‚é–“ã®ã‚¿ã‚¹ã‚¯ã‚’è¦³æ¸¬ã™ã‚‹ãŸã‚ã«ã€<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator rel=external target=_blank>receiver creator</a> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/observer rel=external target=_blank>observer</a> ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã€å¯¾è±¡ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ–°ã—ã„ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id=ä½•ãŒå¿…è¦ãªã®>ä½•ãŒå¿…è¦ãªã®ï¼Ÿ</h2><p>receiver creator ã¨ãã‚Œã«é–¢é€£ã™ã‚‹ observer ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€collector build manifest ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>è©³ç´°ã¯ <a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/1-installation/index.html>installation</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><h2 id=æ³¨æ„äº‹é …ã¯ã‚ã‚‹>æ³¨æ„äº‹é …ã¯ã‚ã‚‹ï¼Ÿ</h2><p>çŸ­å‘½ãªã‚¿ã‚¹ã‚¯ã®ä¸­ã«ã¯ã€<em>username</em> ã‚„ <em>password</em> ã®ã‚ˆã†ãªè¿½åŠ è¨­å®šã‚’å¿…è¦ã¨ã™ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚‰ã®å€¤ã¯<a href=https://opentelemetry.io/docs/collector/configuration/#configuration-environment-variables rel=external target=_blank>ç’°å¢ƒå¤‰æ•°</a> ã‚’å‚ç…§ã—ãŸã‚Šã€ <code>${file:./path/to/database/password}</code> ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒ å±•é–‹æ§‹æ–‡ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>çµ„ç¹”ã«ãŠã‘ã‚‹æ©Ÿå¯†æƒ…å ±ã®å–ã‚Šæ‰±ã„è¦å®šã«å¾“ã£ã¦ã€ã©ã®ã‚ˆã†ãªæ–¹æ³•ã‚’å–ã‚‹ã‹ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p><h2 id=ninja-ã‚¾ãƒ¼ãƒ³>Ninja ã‚¾ãƒ¼ãƒ³</h2><p>ã“ã® Ninja ã‚¾ãƒ¼ãƒ³ã«å¿…è¦ãªã‚‚ã®ã¯2ã¤ã ã‘ã§ã™:</p><ol><li>builder manifestã«ã€ receiver creator ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ observer ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹</li><li>æ¤œå‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æ¤œå‡ºã™ã‚‹ã‚ˆã†ã«ã€è¨­å®šã‚’ä½œæˆã™ã‚‹</li></ol><p>æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€è¨­å®šã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã§ãã¾ã™:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receiver_creator</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>watch_observers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>host_observer]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=l>type == &#34;port&#34; &amp;&amp; port == 6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${env:HOST_REDIS_PASSWORD}</span></span></span></code></pre></div><p>ä»–ã®ä¾‹ã¯ <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/receivercreator#examples rel=external target=_blank>receiver creator&rsquo;s examples</a> ã«ã‚ã‚Šã¾ã™ã€‚</p></div></details><hr><h2 id=è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†>è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</h2><p>ã“ã‚Œã§ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ã‚«ãƒãƒ¼ã§ãã¾ã—ãŸã€‚ã“ã“ã§ã€è¨­å®šã®ã®å¤‰æ›´å†…å®¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=d7bb589e6866267981bd0f3f8d2a76e9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d7bb589e6866267981bd0f3f8d2a76e9","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines="10-30 39" linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=hl><span class=lnt>10
</span></span><span class=hl><span class=lnt>11
</span></span><span class=hl><span class=lnt>12
</span></span><span class=hl><span class=lnt>13
</span></span><span class=hl><span class=lnt>14
</span></span><span class=hl><span class=lnt>15
</span></span><span class=hl><span class=lnt>16
</span></span><span class=hl><span class=lnt>17
</span></span><span class=hl><span class=lnt>18
</span></span><span class=hl><span class=lnt>19
</span></span><span class=hl><span class=lnt>20
</span></span><span class=hl><span class=lnt>21
</span></span><span class=hl><span class=lnt>22
</span></span><span class=hl><span class=lnt>23
</span></span><span class=hl><span class=lnt>24
</span></span><span class=hl><span class=lnt>25
</span></span><span class=hl><span class=lnt>26
</span></span><span class=hl><span class=lnt>27
</span></span><span class=hl><span class=lnt>28
</span></span><span class=hl><span class=lnt>29
</span></span><span class=hl><span class=lnt>30
</span></span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=hl><span class=lnt>39
</span></span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>ã“ã‚Œã§ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’é€šã—ã¦ OpenTelemetry Collector ã«ãƒ‡ãƒ¼ã‚¿ãŒã©ã®ã‚ˆã†ã«å–ã‚Šè¾¼ã¾ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚æ¬¡ã«ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒå—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><details open class="box cstyle notices warning"><summary class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i>
è­¦å‘Š</summary><div class=box-content><p><strong>ã“ã“ã§ã¯ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’å†èµ·å‹•ã—ãªã„ã§ãã ã•ã„</strong>ï¼ <code>/etc/otelcol-contrib/config.yaml</code> ã®å¤‰æ›´ã¯ã¾ã å®Œäº†ã—ã¦ã„ã¾ã›ã‚“ã€‚</p></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>OpenTelemetry Collector ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h1><p><a href=https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/README.md rel=external target=_blank><strong>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</strong></a>ã¯ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¨ã®é–“ã§ã€ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã§ã™ã€‚ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ãŒã€ã„ãã¤ã‹ã¯æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚OpenTelemetry Collector Contrib ã«ã¯<a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor rel=external target=_blank>å¤šæ•°ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</a>ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Processors fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Receivers
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><section><h1 class=a11y-only>4. ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>OpenTelemetry Collector ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h1><h2 id=batch-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>Batch ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h2><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€<strong>batch</strong> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã ã‘ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å‰ã«ãƒãƒƒãƒå‡¦ç†ã—ã¦ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¸ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ã‚³ãƒ¼ãƒ«ã®å›æ•°ã‚’æ¸›ã‚‰ã™ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã‚’ä½¿ç”¨ã—ã¾ã™ï¼š</p><ul><li><code>send_batch_size</code> (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 8192): ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«é–¢ä¿‚ãªãã€ãƒãƒƒãƒã‚’é€ä¿¡ã™ã‚‹ã‚¹ãƒ‘ãƒ³ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã€ã¾ãŸã¯ãƒ­ã‚°ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ•°ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ¬¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€ä¿¡ã•ã‚Œã‚‹ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’åˆ¶é™ã™ã‚‹å ´åˆã«ã¯ã€ <code>send_batch_max_size</code> ã‚’ä½¿ã„ã¾ã™ã€‚</li><li><code>timeout</code> (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 200ms): ã‚µã‚¤ã‚ºã«é–¢ä¿‚ãªãã€ãƒãƒƒãƒãŒé€ä¿¡ã•ã‚Œã‚‹ã¾ã§ã®æ™‚é–“ã€‚ã‚¼ãƒ­ã«è¨­å®šã™ã‚‹ã¨ã€<code>send_batch_size</code> ã®è¨­å®šã‚’ç„¡è¦–ã—ã¦ <code>send_batch_max_size</code> ã ã‘ãŒé©ç”¨ã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ã¯ç›´ã¡ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚</li><li><code>send_batch_max_size</code> (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ = 0): ãƒãƒƒãƒã‚µã‚¤ã‚ºã®ä¸Šé™ã€‚<code>0</code> ã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒãƒƒãƒã‚µã‚¤ã‚ºã®ä¸Šé™ãŒãªã„ã“ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚ã“ã®è¨­å®šã¯ã€å¤§ããªãƒãƒƒãƒãŒå°ã•ãªãƒ¦ãƒ‹ãƒƒãƒˆã«åˆ†å‰²ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚<code>send_batch_size</code> ä»¥ä¸Šã§ãªã‘ã‚Œã°ãªãªã‚Šã¾ã›ã‚“ã€‚</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>OpenTelemetry Collector ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h1><h2 id=resource-detection-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>Resource Detection ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h2><p><strong>resourcedetection</strong> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯ã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹æƒ…å ±ã‚’æ¤œå‡ºã—ã¦ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿å†…ã®ãƒªã‚½ãƒ¼ã‚¹å€¤ã‚’ã“ã®æƒ…å ±ã§è¿½åŠ ã¾ãŸã¯ä¸Šæ›¸ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€å¯èƒ½ã§ã‚ã‚Œã°ãƒ›ã‚¹ãƒˆåã‚’ FQDN ã«è¨­å®šã—ã€ãã†ã§ãªã‘ã‚Œã° OS ãŒæä¾›ã™ã‚‹ãƒ›ã‚¹ãƒˆåã«ãªã‚Šã¾ã™ã€‚ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ <code>hostname_sources</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦å¤‰æ›´ã§ãã¾ã™ã€‚FQDN ã‚’å–å¾—ã›ãšã€OSãŒæä¾›ã™ã‚‹ãƒ›ã‚¹ãƒˆåã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€<code>hostname_sources</code>ã‚’<code>os</code>ã«è¨­å®šã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=7dda097ea09543746c49a1c43ac04375><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=system-resource-detection-processor-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7dda097ea09543746c49a1c43ac04375","system-resource-detection-processor-configuration")'>
<span class=tab-nav-text>System Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div data-tab-item=system-resource-detection-processor-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=3-7><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span></span></span></code></pre></div></div></div></div></div><p>If the workshop instance is running on an AWS/EC2 instance we can gather the following tags from the EC2 metadata API (this is not available on other platforms).
ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ AWS/EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å ´åˆã€EC2 ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ API ã‹ã‚‰ä»¥ä¸‹ã®ã‚¿ã‚°ã‚’åé›†ã—ã¾ã™ï¼ˆã“ã‚Œã¯ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯åˆ©ç”¨ã§ããªã„ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ï¼‰ã€‚</p><ul><li><code>cloud.provider ("aws")</code></li><li><code>cloud.platform ("aws_ec2")</code></li><li><code>cloud.account.id</code></li><li><code>cloud.region</code></li><li><code>cloud.availability_zone</code></li><li><code>host.id</code></li><li><code>host.image.id</code></li><li><code>host.name</code></li><li><code>host.type</code></li></ul><p>ã“ã‚Œã‚‰ã®ã‚¿ã‚°ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¿½åŠ ã™ã‚‹ãŸã‚ã«ã€åˆ¥ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¨ã—ã¦å®šç¾©ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class=tab-panel data-tab-group=1258b3542213253beafa3ed11b4977f3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=ec2-resource-detection-processor-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1258b3542213253beafa3ed11b4977f3","ec2-resource-detection-processor-configuration")'>
<span class=tab-nav-text>EC2 Resource Detection Processor Configuration</span></button></div><div class=tab-content-container><div data-tab-item=ec2-resource-detection-processor-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=7-8><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span></span></span></code></pre></div></div></div></div></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>OpenTelemetry Collector ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h1><h2 id=attributes-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>Attributes ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h2><p>attribute ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã†ã¨ã€ã‚¹ãƒ‘ãƒ³ã€ãƒ­ã‚°ã€ã¾ãŸã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å±æ€§ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã¾ãŸã€ã“ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã€ãƒãƒƒãƒã•ã›ã€æŒ‡å®šã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å«ã‚ã‚‹ã¹ãã‹ã€é™¤å¤–ã™ã¹ãã‹ã‚’æ±ºå®šã™ã‚‹æ©Ÿèƒ½ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€æŒ‡å®šã•ã‚ŒãŸé †åºã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ãƒˆã‚’è¨˜è¿°ã—ã¾ã™ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ul><li><code>insert</code>: ãã®å±æ€§ãŒãªã„å ´åˆã«ã€æ–°ã—ã„å±æ€§å€¤ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚</li><li><code>update</code>: ãã®å±æ€§ãŒã‚ã‚‹å ´åˆã«ã€ãã®å±æ€§å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚</li><li><code>upsert</code>: insert ã¾ãŸã¯ update ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å±æ€§ãŒãªã„å ´åˆã«ã¯æ–°ã—ã„å±æ€§å€¤ã‚’æŒ¿å…¥ã—ã€å±æ€§ãŒã‚ã‚‹å ´åˆã«ã¯ãã®å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚</li><li><code>delete</code>: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å±æ€§å€¤ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</li><li><code>hash</code>: å±æ€§å€¤ã‚’ãƒãƒƒã‚·ãƒ¥åŒ– (SHA1) ã—ã¾ã™ã€‚</li><li><code>extract</code>: å…¥åŠ›ã‚­ãƒ¼ã®å€¤ã‚’æ­£è¦è¡¨ç¾ãƒ«ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦æŠ½å‡ºã—ã€å¯¾è±¡ã‚­ãƒ¼ã®å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚å¯¾è±¡ã‚­ãƒ¼ãŒã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€ãã®å€¤ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚</li></ul><p>æ¬¡ã®ä¾‹ã®ã‚ˆã†ã«ã€attribute ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã£ã¦ã€ã‚­ãƒ¼ã¯ <code>participant.name</code>ã€ã‚ãŸã„ã¯ã‚ãªãŸã®åå‰ï¼ˆä¾‹: <code>marge_simpson</code>ï¼‰ã¨ã„ã†æ–°ã—ã„å±æ€§ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><details open class="box cstyle notices warning"><summary class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i>
è­¦å‘Š</summary><div class=box-content><p><code>INSERT_YOUR_NAME_HERE</code> ã®ç®‡æ‰€ã¯ã€è‡ªåˆ†ã®åå‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚ã¾ãŸã€è‡ªåˆ†ã®åå‰ã« <strong>ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½¿ã‚ãªã„</strong> ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚</p></div></details><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å¾ŒåŠã§ã¯ã€ã“ã®å±æ€§ã‚’ä½¿ç”¨ã—ã¦ Splunk Observability Cloud ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</p><div class=tab-panel data-tab-group=c918f603edf1e47b52970d40a3acb6de><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=attributes-processor-configuration class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c918f603edf1e47b52970d40a3acb6de","attributes-processor-configuration")'>
<span class=tab-nav-text>Attributes Processor Configuration</span></button></div><div class=tab-content-container><div data-tab-item=attributes-processor-configuration class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=9-13><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span></span></span></code></pre></div></div></div></div></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã£ã¦å†…éƒ¨ã¸ã®æ´å¯Ÿã‚’åŠ é€Ÿã™ã‚‹</span></span></summary><div class=box-content><p>æœ€è¿‘è¿½åŠ ã•ã‚ŒãŸã‚‚ã®ã®ä¸€ã¤ã¨ã—ã¦ã€<a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external target=_blank>connector</a> ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ã†ã¨ã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å‡ºåŠ›ã‚’åˆ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å…¥åŠ›ã«çµåˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã¨ã—ã¦ã€é€ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã®é‡ã€ã‚¨ãƒ©ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å«ã‚€ãƒ­ã‚°ã®æ•°ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã«ã¯ã€ã‚ã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã«ã€count ã‚³ãƒã‚¯ã‚¿ãƒ¼ã§ã™ãã«å¯¾å¿œã§ãã¾ã™ã€‚</p><h2 id=ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã§ã¯ãªãã‚³ãƒã‚¯ã‚¿ãƒ¼ãªã®ã¯ãªãœ>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã§ã¯ãªãã‚³ãƒã‚¯ã‚¿ãƒ¼ãªã®ã¯ãªãœï¼Ÿ</h2><p>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯ã€å‡¦ç†ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¬¡ã«æ¸¡ã™ã‚‚ã®ã§ã‚ã‚Šã€è¿½åŠ ã®æƒ…å ±ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã‚³ãƒã‚¯ã‚¿ãƒ¼ã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã›ãšã«ã€ç§ãŸã¡ãŒæ±‚ã‚ã‚‹æ´å¯Ÿã‚’ä½œã‚Šå‡ºã™æ©Ÿä¼šã‚’æä¾›ã—ã¾ã™ã€‚</p><p>ãŸã¨ãˆã°ã€count ã‚³ãƒã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã†ã¨ã€ç’°å¢ƒå¤‰æ•° <code>deployment</code> ã‚’æŒãŸãªã„ãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã®æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã¨ã—ã¦ã€<code>deployment</code> åˆ¥ã«ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨é‡ã‚’åˆ†è§£ã—ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h2 id=ã‚³ãƒã‚¯ã‚¿ãƒ¼ã®æ³¨æ„äº‹é …>ã‚³ãƒã‚¯ã‚¿ãƒ¼ã®æ³¨æ„äº‹é …</h2><p>ã‚³ãƒã‚¯ã‚¿ãƒ¼ã¯ã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã€åˆ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã§å®šç¾©ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ã©ã†æ§‹ç¯‰ã—ã¦ã©ã†åˆ©ç”¨ã™ã‚‹ã‹ã€è¨­å®šã‚’æ¤œè¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id=å‚ç…§>å‚ç…§</h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#connectors rel=external target=_blank>https://opentelemetry.io/docs/collector/configuration/#connectors</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector rel=external target=_blank>https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/countconnector</a></li></ol></div></details><hr><h2 id=è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†>è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</h2><p>ã“ã‚Œã§ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ãŒã‚«ãƒãƒ¼ã§ãã¾ã—ãŸã€‚ã“ã“ã§ã€è¨­å®šã®ã®å¤‰æ›´å†…å®¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=fb94cb014a00280370998823c5d8e429><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fb94cb014a00280370998823c5d8e429","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=58-68 linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=hl><span class=lnt>58
</span></span><span class=hl><span class=lnt>59
</span></span><span class=hl><span class=lnt>60
</span></span><span class=hl><span class=lnt>61
</span></span><span class=hl><span class=lnt>62
</span></span><span class=hl><span class=lnt>63
</span></span><span class=hl><span class=lnt>64
</span></span><span class=hl><span class=lnt>65
</span></span><span class=hl><span class=lnt>66
</span></span><span class=hl><span class=lnt>67
</span></span><span class=hl><span class=lnt>68
</span></span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>detailed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</h1><p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ—ãƒƒã‚·ãƒ¥ã¾ãŸã¯ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚Šã€ä¸€ã¤ä»¥ä¸Šã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰/ãƒ‡ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯ã€ä¸€ã¤ã¾ãŸã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€<a href=https://opentelemetry.io/docs/specs/otel/protocol/exporter/ rel=external target=_blank><strong>otlphttp</strong></a> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚OpenTelemetry Protocol (OTLP) ã¯ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¼é€ã™ã‚‹ãŸã‚ã®ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã§æ¨™æº–åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚OTLP ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯ã€OTLP ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®Ÿè£…ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™ã€‚OTLP ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯ã€<a href=https://grpc.io/ rel=external target=_blank><strong>gRPC</strong></a> ãŠã‚ˆã³ <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview rel=external target=_blank><strong>HTTP</strong></a>/<a href=https://www.json.org/json-en.html rel=external target=_blank><strong>JSON</strong></a> ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p><pre class="mermaid align-center">
%%{
  init:{
    &#34;theme&#34;:&#34;base&#34;,
    &#34;themeVariables&#34;: {
      &#34;primaryColor&#34;: &#34;#ffffff&#34;,
      &#34;clusterBkg&#34;: &#34;#eff2fb&#34;,
      &#34;defaultLinkColor&#34;: &#34;#333333&#34;
    }
  }
}%%

flowchart LR;
    style Exporters fill:#e20082,stroke:#333,stroke-width:4px,color:#fff
    subgraph Receivers
    A[OTLP] --&gt; M(Receivers)
    B[JAEGER] --&gt; M(Receivers)
    C[Prometheus] --&gt; M(Receivers)
    end
    subgraph Processors
    M(Receivers) --&gt; H(Filters, Attributes, etc)
    E(Extensions)
    end
    subgraph Exporters
    H(Filters, Attributes, etc) --&gt; S(OTLP)
    H(Filters, Attributes, etc) --&gt; T(JAEGER)
    H(Filters, Attributes, etc) --&gt; U(Prometheus)
    end
</pre><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article><section><h1 class=a11y-only>5. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼>OpenTelemetry Collector ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</h1><h2 id=otlp-http-ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼>OTLP HTTP ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</h2><p>Splunk Observability Cloud ã¸ HTTP çµŒç”±ã§ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ã¯ã€<strong>otlphttp</strong> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>/etc/otelcol-contrib/config.yaml</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã€<strong>otlphttp</strong> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã® YAML ã‚’ <strong>exporters</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«æŒ¿å…¥ã—ã€ä¾‹ãˆã°2ã‚¹ãƒšãƒ¼ã‚¹ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚</p><p>ã¾ãŸã€ãƒ‡ã‚£ã‚¹ã‚¯ã®å®¹é‡ä¸è¶³ã‚’é˜²ããŸã‚ã«ã€ãƒ­ã‚®ãƒ³ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®è©³ç´°åº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>detailed</code> ã¯éå¸¸ã«è©³ç´°ã§ã™ã€‚</p><div class="highlight wrap-code" hl_lines=3-4><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=l>otlphttp/splunk:</span></span></span></code></pre></div><p>æ¬¡ã«ã€<code>metrics_endpoint</code> ã‚’å®šç¾©ã—ã¦ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆURLã‚’è¨­å®šã—ã¦ã„ãã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunk ä¸»å‚¬ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å‚åŠ è€…ã§ã‚ã‚‹å ´åˆã€ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã™ã§ã« Realm ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å‚ç…§ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€æ–°ã—ã„ç’°å¢ƒå¤‰æ•°ã‚’ä½œæˆã—ã¦ Realm ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ï¼š</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>REALM</span><span class=o>=</span><span class=s2>&#34;us1&#34;</span></span></span></code></pre></div></div></details><p>ä½¿ç”¨ã™ã‚‹URLã¯ <code>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</code> ã§ã™ã€‚ï¼ˆSplunkã¯ã€ãƒ‡ãƒ¼ã‚¿ã®å±…ä½åœ°ã«å¿œã˜ã¦ä¸–ç•Œä¸­ã®ä¸»è¦åœ°åŸŸã« Realm ã‚’æŒã£ã¦ã„ã¾ã™ï¼‰ã€‚</p><p><strong>otlphttp</strong> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯ã€<code>traces_endpoint</code> ã¨ <code>logs_endpoint</code> ãã‚Œãã‚Œã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆURLã‚’å®šç¾©ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã‚‚è¨­å®šã§ãã¾ã™ãŒã€ãã®ã‚ˆã†ãªè¨­å®šã¯ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ç¯„å›²å¤–ã¨ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" hl_lines=5><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span></span></span></code></pre></div><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ <code>gzip</code> åœ§ç¸®ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®è¨­å®šã§ <code>compression: none</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€åœ§ç¸®ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯åœ§ç¸®ã‚’æœ‰åŠ¹ã«ã—ãŸã¾ã¾ã«ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æœ€ã‚‚åŠ¹ç‡çš„ãªæ–¹æ³•ã¨ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ã£ã¦ã„ãã¾ã™ã€‚</p><p>Splunk Observability Cloud ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€Splunk Observability Cloud UI ã§æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šè¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦ã®è©³ç´°ã¯ã€<a href=https://docs.splunk.com/Observability/admin/authentication-tokens/org-tokens.html rel=external target=_blank>Create a token</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã¯ <strong>INGEST</strong> ã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><details open class="box cstyle notices note"><summary class=box-label><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>Splunkã€€ä¸»å‚¬ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å‚åŠ è€…ã§ã‚ã‚‹å ´åˆã€ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã™ã§ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼ˆç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼‰ã®ã§ã€ãã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å‚ç…§ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã—ã€ãã‚Œã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ï¼š</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>ACCESS_TOKEN</span><span class=o>=</span>&lt;replace-with-your-token&gt;</span></span></code></pre></div></div></details><p>ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ <code>headers:</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã« <code>X-SF-TOKEN: ${env:ACCESS_TOKEN}</code> ã‚’æŒ¿å…¥ã™ã‚‹ã“ã¨ã«ã§å®šç¾©ã—ã¾ã™ï¼š</p><div class="highlight wrap-code" hl_lines=6-8><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span></span></span></code></pre></div><h2 id=è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†>è¨­å®šã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</h2><p>ã“ã‚Œã§ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚‚ã‚«ãƒãƒ¼ã§ãã¾ã—ãŸã€‚è¨­å®šã‚’ç¢ºèªã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼š</p><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>è¨­å®šã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=7130eb2bc54cd8a865374b7b665f143e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7130eb2bc54cd8a865374b7b665f143e","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=72-76 linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=hl><span class=lnt>72
</span></span><span class=hl><span class=lnt>73
</span></span><span class=hl><span class=lnt>74
</span></span><span class=hl><span class=lnt>75
</span></span><span class=hl><span class=lnt>76
</span></span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>X-SF-TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><p>ã‚‚ã¡ã‚ã‚“ã€<strong>OTLP</strong> ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡ã™ã‚ˆã†ã« <code>metrics_endpoint</code> ã‚’ç°¡å˜ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>æ¬¡ã«ã€<code>config.yaml</code> ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ä»Šè¨­å®šã—ãŸãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ãã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><p><strong>Service</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã€ãŠã‚ˆã³ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹è¨­å®šã«åŸºã¥ã„ã¦ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã§æœ‰åŠ¹ã«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨­å®šã—ã¦ã„ãã¾ã™ã€‚</p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
æƒ…å ±</summary><div class=box-content><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã¦ã‚‚ã€<strong>Service</strong> ã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã§å®šç¾©ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯<strong>æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã›ã‚“</strong>ã€‚</p></div></details><p>ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ä»¥ä¸‹ã®3ã¤ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š</p><ul><li>extensionsï¼ˆæ‹¡å¼µæ©Ÿèƒ½ï¼‰</li><li>pipelinesï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼‰</li><li>telemetryï¼ˆãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ï¼‰</li></ul><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã€æ‹¡å¼µæ©Ÿèƒ½ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒ <code>health_check</code>ã€<code>pprof</code>ã€<code>zpages</code> ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã¯ä»¥å‰ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¨­å®šã—ã¾ã—ãŸã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></div><p>ãã‚Œã§ã¯ã€ãƒ¡ãƒˆãƒªãƒƒã‚¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­å®šã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><section><h1 class=a11y-only>6. ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><h2 id=hostmetrics-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>Hostmetrics ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼éƒ¨åˆ†ã§æŒ¯ã‚Šè¿”ã‚‹ã¨ã€ãƒ›ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã€æ§˜ã€…ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ <a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/3-receivers/index.html#host-metrics-receiver>Host Metrics</a> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚ã“ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã« <code>hostmetrics</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã® <code>receivers</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« <code>hostmetrics</code> ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><div class="highlight wrap-code" hl_lines=11><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><h2 id=prometheus-internal-ãƒ¬ã‚·ãƒ¼ãƒãƒ¼>Prometheus Internal ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®å‰åŠã§ã€<code>prometheus</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®åå‰ã‚’å¤‰æ›´ã—ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å†…éƒ¨ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã¦ã„ã‚‹ã“ã¨ã‚’åæ˜ ã—ã¦ã€<code>prometheus/internal</code> ã¨ã„ã†åå‰ã«ã—ã¾ã—ãŸã€‚</p><p>ç¾åœ¨ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã§ <code>prometheus/internal</code> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã® <code>receivers</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ã€<code>prometheus/internal</code> ã‚’å«ã‚ã¾ã™ï¼š</p><div class="highlight wrap-code" hl_lines=11><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><h2 id=resource-detection-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>Resource Detection ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h2><p>ã¾ãŸã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ›ã‚¹ãƒˆåã‚„AWS/EC2ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã€<code>resourcedetection/system</code> ãŠã‚ˆã³ <code>resourcedetection/ec2</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸‹ã§æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã® <code>processors</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ã€<code>resourcedetection/system</code> ãŠã‚ˆã³ <code>resourcedetection/ec2</code> ã‚’è¿½åŠ ã—ã¾ã™ï¼š</p><div class="highlight wrap-code" hl_lines=12><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><h2 id=attributes-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼>Attributes ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</h2><p>ã¾ãŸã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<code>attributes/conf</code> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’è¿½åŠ ã—ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒã™ã¹ã¦ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã« <code>participant.name</code> ã¨ã„ã†æ–°ã—ã„å±æ€§ã‚’æŒ¿å…¥ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸‹ã§æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã® <code>processors</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ã€<code>attributes/conf</code> ã‚’è¿½åŠ ã—ã¾ã™ï¼š</p><div class="highlight wrap-code" hl_lines=12><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/11/27</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚µãƒ¼ãƒ“ã‚¹>OpenTelemetry Collector ã‚µãƒ¼ãƒ“ã‚¹</h1><h2 id=otlp-http-ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼>OTLP HTTP ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</h2><p>ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€<code>otlphttp</code> ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã—ã¦ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Splunk Observability Cloud ã«é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸‹ã§æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><code>metrics</code> ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¸‹ã® <code>exporters</code> ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ã€<code>otlphttp/splunk</code> ã‚’è¿½åŠ ã—ã¾ã™ï¼š</p><div class="highlight wrap-code" hl_lines=13><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging, otlphttp/splunk]</span></span></span></code></pre></div><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å†…éƒ¨ã‚’è¦³æ¸¬ã™ã‚‹</span></span></summary><div class=box-content><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯ã€ãã®å‹•ä½œã«é–¢ã™ã‚‹å†…éƒ¨ã‚·ã‚°ãƒŠãƒ«ã‚’æ•æ‰ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã¯å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®è¿½åŠ ã•ã‚Œã‚‹ã‚·ã‚°ãƒŠãƒ«ã‚‚å«ã¾ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã«é–¢ã™ã‚‹æ±ºå®šã‚’è¡Œã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã€ãã®æƒ…å ±ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚„ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ã—ã¦è¡¨é¢åŒ–ã™ã‚‹æ–¹æ³•ã‚’å¿…è¦ã¨ã™ã‚‹ãŸã‚ã§ã™ã€‚</p><h2 id=ãªãœã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ç›£è¦–ã™ã‚‹ã®>ãªãœã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ç›£è¦–ã™ã‚‹ã®ï¼Ÿ</h2><p>ã“ã‚Œã¯ã€Œç›£è¦–è€…ã‚’ç›£è¦–ã™ã‚‹ã®ã¯èª°ã‹ï¼Ÿã€ã¨ã„ã†ç¨®é¡ã®å•é¡Œã§ã™ãŒã€ã“ã®ã‚ˆã†ãªæƒ…å ±ã‚’è¡¨é¢åŒ–ã§ãã‚‹ã“ã¨ã¯é‡è¦ã§ã™ã€‚ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®æ­´å²ã®èˆˆå‘³æ·±ã„éƒ¨åˆ†ã¯ã€Goãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®SDKãŒå®‰å®šã¨è€ƒãˆã‚‰ã‚Œã‚‹å‰ã«å­˜åœ¨ã—ã¦ã„ãŸã“ã¨ã§ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯å½“é¢ã®é–“ã€ã“ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãŸã‚ã« Prometheus ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p><h2 id=æ³¨æ„ç‚¹>æ³¨æ„ç‚¹</h2><p>çµ„ç¹”å†…ã§ç¨¼åƒã—ã¦ã„ã‚‹å„ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å†…éƒ¨ä½¿ç”¨çŠ¶æ³ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ã¯ã€æ–°ã—ã„ãƒ¡ãƒˆãƒªã‚¯ã‚¹é‡ï¼ˆMTSï¼‰ã‚’å¤§å¹…ãªå¢—åŠ ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚Splunkãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ãŠã‚Šã€å¢—åŠ ã‚’äºˆæ¸¬ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p><h2 id=ninja-ã‚¾ãƒ¼ãƒ³>Ninja ã‚¾ãƒ¼ãƒ³</h2><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å†…éƒ¨ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã«ã¯ã€ã„ãã¤ã‹ã®è¨­å®šã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼š</p><div class=tab-panel data-tab-group=1f9385b7276212f83b9a7d5ba866418a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=telemetry-schema class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1f9385b7276212f83b9a7d5ba866418a","telemetry-schema")'>
<span class=tab-nav-text>telemetry schema</span>
</button>
<button data-tab-item=example-configyml class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("1f9385b7276212f83b9a7d5ba866418a","example-configyml")'>
<span class=tab-nav-text>example-config.yml</span></button></div><div class=tab-content-container><div data-tab-item=telemetry-schema class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;info|warn|error&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>&lt;console|json&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_caller</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=l>&lt;true|false&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>error_output_paths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>&lt;stdout|stderr&gt;, paths...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>&lt;none|basic|normal|detailed&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Address binds the promethues endpoint to scrape</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;hostname:port&gt;</span></span></span></code></pre></div></div></div><div data-tab-item=example-configyml class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>logs</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class=l>info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disable_stacktrace</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initial_fields</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>instance.name</span><span class=p>:</span><span class=w> </span><span class=l>${env:INSTANCE}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=l>localhost:8888 </span></span></span></code></pre></div></div></div></div></div><h2 id=å‚ç…§>å‚ç…§</h2><ol><li><a href=https://opentelemetry.io/docs/collector/configuration/#service rel=external target=_blank>https://opentelemetry.io/docs/collector/configuration/#service</a></li></ol></div></details><hr><h2 id=å®Œæˆã—ãŸè¨­å®š>å®Œæˆã—ãŸè¨­å®š</h2><hr><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>å®Œæˆã—ãŸè¨­å®šã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„</span></span></summary><div class=box-content><div class=tab-panel data-tab-group=21aa6eedae54e7b0ee2106961088f825><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configyaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("21aa6eedae54e7b0ee2106961088f825","configyaml")'>
<span class=tab-nav-text>config.yaml</span></button></div><div class=tab-content-container><div data-tab-item=configyaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code" hl_lines=88-90 linenos=table><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=hl><span class=lnt>88
</span></span><span class=hl><span class=lnt>89
</span></span><span class=hl><span class=lnt>90
</span></span><span class=lnt>91
</span><span class=lnt>92
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>health_check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>13133</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pprof</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>1777</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zpages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=m>0.0.0.0</span><span class=p>:</span><span class=m>55679</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hostmetrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scrapers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Disk I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>disk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># File System utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Memory utilization metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network interface I/O metrics &amp; TCP connection metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CPU load metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>load</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Paging/Swap space utilization and I/O metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Process count metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Per process CPU, Memory and Disk I/O metrics. Disabled by default.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># process:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opencensus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Collect own metrics</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus/internal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;otel-collector&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;0.0.0.0:8888&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jaeger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocols</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>grpc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_binary</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_compact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>thrift_http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zipkin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>system]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>system</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostname_sources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>os]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resourcedetection/ec2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>detectors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>ec2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>attributes/conf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>participant.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;INSERT_YOUR_NAME_HERE&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>verbosity</span><span class=p>:</span><span class=w> </span><span class=l>normal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>otlphttp/splunk</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_endpoint</span><span class=p>:</span><span class=w> </span><span class=l>https://ingest.${env:REALM}.signalfx.com/v2/datapoint/otlp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>X-SF-TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${env:ACCESS_TOKEN}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp, opencensus, jaeger, zipkin]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>hostmetrics, otlp, opencensus, prometheus/internal]</span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>batch, resourcedetection/system, resourcedetection/ec2, attributes/conf] </span><span class=w>
</span></span></span><span class="line hl"><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>logging, otlphttp/splunk]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extensions</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>health_check, pprof, zpages]</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></details><hr><details open class="box cstyle notices tip"><summary class=box-label><i class="fa-fw fas fa-lightbulb"></i>
ãƒ’ãƒ³ãƒˆ</summary><div class=box-content><p>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’å†èµ·å‹•ã™ã‚‹å‰ã«ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€çµ„ã¿è¾¼ã¿ã® <code>validate</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼š</p><div class=tab-panel data-tab-group=fe5a5800cb6c1b0104e66f19b045b4e8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fe5a5800cb6c1b0104e66f19b045b4e8","command")'>
<span class=tab-nav-text>Command</span>
</button>
<button data-tab-item=example-error-output class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("fe5a5800cb6c1b0104e66f19b045b4e8","example-error-output")'>
<span class=tab-nav-text>Example error output</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol-contrib validate --config<span class=o>=</span>file:/etc/otelcol-contrib/config.yaml</span></span></code></pre></div></div></div><div data-tab-item=example-error-output class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Error: failed to get config: cannot unmarshal the configuration: 1 error(s) decoding:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>* error decoding &#39;processors&#39;: error reading configuration for &#34;attributes/conf&#34;: 1 error(s) decoding:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>* &#39;actions[0]&#39; has invalid keys: actions
</span></span><span class=line><span class=cl>2023/06/29 09:41:28 collector server run finished with error: failed to get config: cannot unmarshal the configuration: 1 error(s) decoding:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>* error decoding &#39;processors&#39;: error reading configuration for &#34;attributes/conf&#34;: 1 error(s) decoding:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>* &#39;actions[0]&#39; has invalid keys: actions</span></span></code></pre></div></div></div></div></div></div></details><p>å‹•ä½œã™ã‚‹è¨­å®šãŒã§ããŸã®ã§ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’èµ·å‹•ã—ã€ãã®å¾Œ <a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/2-extensions/index.html#zpages>zPages</a> ãŒå ±å‘Šã—ã¦ã„ã‚‹å†…å®¹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><div class=tab-panel data-tab-group=e197996abcc4addff6df582ddbdbc67b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=command class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e197996abcc4addff6df582ddbdbc67b","command")'>
<span class=tab-nav-text>Command</span></button></div><div class=tab-content-container><div data-tab-item=command class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart otelcol-contrib</span></span></code></pre></div></div></div></div></div><p><a href=#R-image-e0300372ecee501bec13bcf428903622 class=lightbox-link><img alt=pipelinez-full-config class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../../images/pipelinez-full-config.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e0300372ecee501bec13bcf428903622><img alt=pipelinez-full-config class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../../images/pipelinez-full-config.png></a></p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/19</span></span></footer></article></section><article class=default><header class=headline></header><h1 id=ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–>ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–</h1><h2 id=splunk-observability-cloud>Splunk Observability Cloud</h2><p>OpenTelemetry Collector ã‚’è¨­å®šã—ã¦ Splunk Observability Cloud ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã®ã§ã€Splunk Observability Cloud ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚Splunk Observability Cloudã€€ã¸ã®æ‹›å¾…ã‚’å—ã‘å–ã£ã¦ã„ãªã„å ´åˆã¯ã€è¬›å¸«ãŒãƒ­ã‚°ã‚¤ãƒ³è³‡æ ¼æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>ãã®å‰ã«ã€ã‚‚ã†å°‘ã—èˆˆå‘³æ·±ãã™ã‚‹ãŸã‚ã«ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒæ´»æ€§åŒ–ã•ã‚Œã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install stress
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span> stress -c <span class=m>2</span> -t 40<span class=p>;</span> stress -d <span class=m>5</span> -t 40<span class=p>;</span> stress -m <span class=m>20</span> -t 40<span class=p>;</span> <span class=k>done</span></span></span></code></pre></div><p>Splunk Observability Cloudã«ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚‰ã€å·¦å´ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ <strong>Dashboards</strong> ã«ç§»å‹•ã—ã¾ã™ï¼š</p><p><a href=#R-image-5e09ab03ba1e689c6bcea83cc09ee8d6 class=lightbox-link><img alt=menu-dashboards class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/menu-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5e09ab03ba1e689c6bcea83cc09ee8d6><img alt=menu-dashboards class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/menu-dashboards.png></a></p><p>æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã§ <strong>OTel Contrib</strong> ã‚’æ¤œç´¢ã—ã¾ã™ï¼š</p><p><a href=#R-image-1346c43a00624632376e5cb445ad2034 class=lightbox-link><img alt=search-dashboards class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/search-dashboards.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1346c43a00624632376e5cb445ad2034><img alt=search-dashboards class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/search-dashboards.png></a></p><details open class="box cstyle notices info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
æƒ…å ±</summary><div class=box-content><p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€è¬›å¸«ãŒè¿…é€Ÿã«è¿½åŠ ã—ã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã® Splunk ä¸»å‚¬ç‰ˆã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã“ã®ãƒšãƒ¼ã‚¸ã®ä¸‹éƒ¨ã«ã‚ã‚Šã¾ã™ã€‚</p></div></details><p><strong>OTel Contrib Dashboard</strong> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ãã¾ã™ï¼š</p><p><a href=#R-image-0a8fd3d7cb46463e63ec97e8180efa7a class=lightbox-link><img alt=otel-dashboard class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/otel-dashboard.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0a8fd3d7cb46463e63ec97e8180efa7a><img alt=otel-dashboard class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/otel-dashboard.png></a></p><p>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä¸Šéƒ¨ã«ã‚ã‚‹ <strong>Filter</strong> æ¬„ã«ã€Œparticipantã€ã®é€”ä¸­ã¾ã§å…¥åŠ›ã—ã€å€™è£œã«å‡ºã‚‹ <strong>participant.name</strong> ã‚’é¸æŠã—ã¾ã™ï¼š</p><p><a href=#R-image-0e488fb691ee410596f1f1f2e4bb28fb class=lightbox-link><img alt=search-filter class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/search-filter.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0e488fb691ee410596f1f1f2e4bb28fb><img alt=search-filter class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/search-filter.png></a></p><p><code>participant.name</code> ã§ã€<code>config.yaml</code> å†…ã§è¨­å®šã—ãŸã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã™ã‚‹ã‹ã€ãƒªã‚¹ãƒˆã‹ã‚‰é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</p><p><a href=#R-image-a5c1a214279469672b8c8ed44c927e35 class=lightbox-link><img alt=select-conf-attendee-name class="noborder lazy lightbox noshadow figure-image" loading=lazy src=../images/select-participant-name.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a5c1a214279469672b8c8ed44c927e35><img alt=select-conf-attendee-name class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=../images/select-participant-name.png></a></p><p>ã“ã‚Œã§ã€OpenTelemetry Collector ã‚’è¨­å®šã—ãŸãƒ›ã‚¹ãƒˆã®ã€ãƒ›ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details open class="box cstyle attachments info"><summary class=box-label><i class="fa-fw fas fa-info-circle"></i>
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰JSONã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹æ³•</summary><ul class="attachments-files box-content"><li><a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/7-visualisation/index.files/dashboard_OTel-Contrib-Dashboard.json>index.files/dashboard_OTel-Contrib-Dashboard.json</a> (40 KB)</li></ul></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2024/03/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h2 id=ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™º>ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™º</h2><p>Open Telemetry Collectorã®ãŸã‚ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®3ã¤ã®ä¸»è¦ãªéƒ¨åˆ†ãŒå¿…è¦ã§ã™ï¼š</p><ol><li>Configuration - <em>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šã§ãã‚‹å€¤ã¯ä½•ã‹</em></li><li>Factory - <em>æä¾›ã•ã‚ŒãŸå€¤ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹</em></li><li>Business Logic - <em>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨</em></li></ol><p>ã“ã‚Œã«ã¤ã„ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é‡è¦ãªDevOpsãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã«Jenkinsã¨é€£æºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ä¾‹ã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚</p><p>æ¸¬å®šã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ï¼š</p><ol><li>å¤‰æ›´ã«å¯¾ã™ã‚‹ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ  - <em>ã€Œã‚³ãƒŸãƒƒãƒˆãŒæœ¬ç•ªç’°å¢ƒã«å…¥ã‚‹ã¾ã§ã«ã‹ã‹ã‚‹æ™‚é–“ã€</em></li><li>å¤‰æ›´å¤±æ•—ç‡ - <em>ã€Œæœ¬ç•ªç’°å¢ƒã§ã®éšœå®³ã‚’å¼•ãèµ·ã“ã™ãƒ‡ãƒ—ãƒ­ã‚¤ã®å‰²åˆã€</em></li><li>ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦ - <em>ã€Œ[ãƒãƒ¼ãƒ ]ãŒæœ¬ç•ªç’°å¢ƒã«æˆåŠŸã—ã¦ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹é »åº¦ã€</em></li><li>å¹³å‡å¾©æ—§æ™‚é–“ - <em>ã€Œ[ãƒãƒ¼ãƒ ]ãŒæœ¬ç•ªç’°å¢ƒã®éšœå®³ã‹ã‚‰å¾©æ—§ã™ã‚‹ã®ã«ã‹ã‹ã‚‹æ™‚é–“ã€</em></li></ol><p>ã“ã‚Œã‚‰ã®æŒ‡æ¨™ã¯ Google ã® <a href=https://dora.dev/ rel=external target=_blank>DevOps Research and Assessment (DORA)</a> ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ç‰¹å®šã•ã‚ŒãŸã‚‚ã®ã§ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºãƒãƒ¼ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç¤ºã™ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚<em>Jenkins CI</em> ã‚’é¸æŠã—ãŸç†ç”±ã¯ã€ç§ãŸã¡ãŒåŒã˜ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã«ç•™ã¾ã‚Šã€å°†æ¥çš„ã«ãƒ™ãƒ³ãƒ€ãƒ¼ç®¡ç†ã®CIãƒ„ãƒ¼ãƒ«ãŒæ¡ç”¨ã™ã‚‹ä¾‹ã¨ãªã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã§ã™ã€‚</p><h2 id=è¨ˆè£…--ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ>è¨ˆè£… ğŸ†š ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h2><p>çµ„ç¹”å†…ã§ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹éš›ã«ã¯ã€ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€è€ƒæ…®ã™ã‚‹ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚</p><table><thead><tr><th></th><th>é•·æ‰€</th><th>çŸ­æ‰€</th></tr></thead><tbody><tr><td><strong>ï¼ˆè‡ªå‹•ï¼‰è¨ˆè£…</strong><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></td><td>ã‚·ã‚¹ãƒ†ãƒ ã‚’è¦³æ¸¬ã™ã‚‹ãŸã‚ã«å¤–éƒ¨APIãŒä¸è¦</td><td>è¨ˆè£…ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›´ãŒå¿…è¦</td></tr><tr><td></td><td>ã‚·ã‚¹ãƒ†ãƒ æ‰€æœ‰è€…/é–‹ç™ºè€…ã¯å¯è¦³æ¸¬æ€§ã®å¤‰æ›´ãŒå¯èƒ½</td><td>ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®è¿½åŠ ã®ä¾å­˜ãŒå¿…è¦</td></tr><tr><td></td><td>ã‚·ã‚¹ãƒ†ãƒ ã®æ–‡è„ˆã‚’ç†è§£ã—ã€<em>Exemplar</em> ã¨ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’é–¢é€£ä»˜ã‘ã‚‹ã“ã¨ãŒå¯èƒ½</td><td>ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</td></tr><tr><td><strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong></td><td>ãƒ‡ãƒ¼ã‚¿åã‚„æ„å‘³ã®å¤‰æ›´ã‚’ã‚·ã‚¹ãƒ†ãƒ ã®ãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«ã‹ã‚‰ç‹¬ç«‹ã—ãŸå±•é–‹ãŒå¯èƒ½</td><td>APIã®ç ´å£Šçš„ãªå¤‰æ›´ã®å¯èƒ½æ€§ãŒã‚ã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼é–“ã§ãƒªãƒªãƒ¼ã‚¹ã®èª¿æ•´ãŒå¿…è¦</td></tr><tr><td></td><td>ãã®å¾Œã®åˆ©ç”¨ã«åˆã‚ã›ã¦åé›†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°/æ‹¡å¼µãŒå®¹æ˜“</td><td>ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®æ„å‘³ãŒã‚·ã‚¹ãƒ†ãƒ ãƒªãƒªãƒ¼ã‚¹ã¨ä¸€è‡´ã›ãšã€äºˆæœŸã›ãšå£Šã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</td></tr></tbody></table><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>è¨ˆè£…ï¼ˆinstrument, ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ãƒˆï¼‰ã¨ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã‚„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ãªã©ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã•ã›ã‚‹å®Ÿè£…ã€‚è¨ˆè£…ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æœ€ä½é™ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã ã‘ã§ä¸€é€šã‚Šã®ãƒˆãƒ¬ãƒ¼ã‚¹ã‚„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãªã©ã‚’å‡ºåŠ›ã§ãã‚‹ã‚ˆã†ãªå¯¾å¿œã‚’ã€Œè‡ªå‹•è¨ˆè£…ã€ã¨å‘¼ã³ã¾ã™ã€‚&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article><section><h1 class=a11y-only>8. Developã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h1><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h2 id=ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—-hahahugoshortcode221s0hbhb>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— <span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong></span></span></h2><details open class="box cstyle notices note"><summary class=box-label><i class="fa-fw fas fa-exclamation-circle"></i>
ãƒ¡ãƒ¢</summary><div class=box-content><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Œäº†ã™ã‚‹æ™‚é–“ã¯çµŒé¨“ã«ã‚ˆã£ã¦ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>å®Œæˆã—ãŸã‚‚ã®ã¯<a href=https://github.com/splunk/collector-workshop-example rel=external target=_blank>ã“ã¡ã‚‰</a>ã«ã‚ã‚Šã¾ã™ã€‚è©°ã¾ã£ãŸå ´åˆã‚„è¬›å¸«ã¨ä¸€ç·’ã«é€²ã‚ãŸã„å ´åˆã«åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚</p></div></details><p>æ–°ã—ã„ <em>Jenkins CI</em> ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®é–‹ç™ºã‚’å§‹ã‚ã‚‹ãŸã‚ã€ã¾ãšã¯ Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰å§‹ã‚ã¦ã„ãã¾ã™ã€‚
æ–°ã—ã„ Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹æ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ol><li><code>${HOME}/go/src/jenkinscireceiver</code> ã¨ã„ã†åå‰ã®æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚<ol><li>å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚„å ´æ‰€ã¯å³å¯†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è‡ªåˆ†ã®é–‹ç™ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è‡ªç”±ã«é¸ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚</li></ol></li><li><code>go mod init splunk.conf/workshop/example/jenkinscireceiver</code> ã‚’å®Ÿè¡Œã—ã¦ã€Go ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚<ol><li>ä¾å­˜é–¢ä¿‚ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ <code>go.mod</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</li><li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ä¾å­˜é–¢ä¿‚ã®ãƒã‚§ãƒƒã‚¯ã‚µãƒ å€¤ãŒ <code>go.sum</code> ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚</li></ol></li></ol><details class="box cstyle notices transparent expand"><summary class=box-label><i class="expander-icon fa-fw fas fa-chevron-right"></i>
<span class="badge cstyle default badge-with-title"><span class=badge-title><i class="fa-fw fas fa-check"></i> <strong>Check-in</strong></span><span class=badge-content style=background-color:green>go.modã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹</span></span></summary><div class=box-content><p>`` text
module splunk.conf/workshop/example/jenkinscireceiver</p><p>go 1.20</p><div class="highlight wrap-code"><pre tabindex=0><code></code></pre></div></div></details><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h2 id=configuration-ã®æ§‹ç¯‰>Configuration ã®æ§‹ç¯‰</h2><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® Configuration éƒ¨åˆ†ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã™ã‚‹å…¥åŠ›ã‚’è¡Œã†æ–¹æ³•ã§ã‚ã‚Šã€è¨­å®šã«ä½¿ç”¨ã•ã‚Œã‚‹å€¤ã¯ä»¥ä¸‹ã®ã‚ˆã†ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</p><ol><li>ãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒä½•ã‚’åˆ¶å¾¡ã™ã‚‹ã®ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹</li><li>å¿…é ˆé …ç›®ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ãŒæ˜ç¢ºã§ã‚ã‚‹</li><li>å…±é€šã®åå‰ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å†åˆ©ç”¨ã™ã‚‹</li><li>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¤</li></ol><div class=tab-panel data-tab-group=5cc877d37cfbdf7419507b6ada3b52e7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=è‰¯ã„-config class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("5cc877d37cfbdf7419507b6ada3b52e7","è‰¯ã„-config")'>
<span class=tab-nav-text>è‰¯ã„ config</span>
</button>
<button data-tab-item=æ‚ªã„-config class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("5cc877d37cfbdf7419507b6ada3b52e7","æ‚ªã„-config")'>
<span class=tab-nav-text>æ‚ªã„ config</span></button></div><div class=tab-content-container><div data-tab-item=è‰¯ã„-config class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Required Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class=l>http://my-jenkins-server:8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>auth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>authenticator</span><span class=p>:</span><span class=w> </span><span class=l>basicauth/jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Optional Values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>collection_interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></div></div><div data-tab-item=æ‚ªã„-config class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_addr</span><span class=p>:</span><span class=w> </span><span class=l>hostname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jenkins_server_api_port</span><span class=p>:</span><span class=w> </span><span class=m>8089</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>filter_builds_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-awesome-build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=l>amber</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>track</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.1</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.2</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.3</span><span class=p>:</span><span class=w> </span><span class=kc>no</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>example.metric.4</span><span class=p>:</span><span class=w> </span><span class=kc>no</span></span></span></code></pre></div></div></div></div></div><p>æ‚ªã„ä¾‹ã§ã¯ã€Configuration ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«åã™ã‚‹ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½¿ã„ã«ãããªã£ã¦ã—ã¾ã†ã“ã¨ãŒç†è§£ã§ãã‚‹ã¯ãšã§ã™ã€‚
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ãŒä½•ã§ã‚ã‚‹ã¹ãã‹ã‚’æ˜ç¢ºã§ã¯ãªãã€æ—¢å­˜ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã«ç§»è­²ã§ãã‚‹æ©Ÿèƒ½ã‚’å«ã¿ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å†…ã®ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨æ¯”è¼ƒã—ã¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‘½åã«ä¸€è²«æ€§ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>è‰¯ã„ä¾‹ã§ã¯ã€å¿…è¦ãªå€¤ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¡ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’å†åˆ©ç”¨ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ Jenkins ã¨ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼é–“ã®ç›¸äº’ä½œç”¨ã«ã®ã¿ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚</p><p>è¨­å®šå€¤ã®ä¸­ã«ã¯ã€ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç‹¬è‡ªã«è¿½åŠ ã™ã‚‹ã‚‚ã®ã¨ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼å†…éƒ¨ã®å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«å–ã‚Šçµ„ã‚€éš›ã«ã•ã‚‰ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚Configuration ã¯å°ã•ãå§‹ã‚ã‚‹ã¹ãã§ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«è¿½åŠ ã®æ©Ÿèƒ½ãŒå¿…è¦ã«ãªã£ãŸã‚‰ã€è¨­å®šã‚‚è¿½åŠ ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h2 id=ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã>ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã</h2><p>Configuration ã«å¿…è¦ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã€<code>config.go</code> ã¨ã„ã†åå‰ã®æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆã—ã¾ã™ï¼š</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule </span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h2 id=ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ¤œè¨ã™ã‚‹>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ¤œè¨ã™ã‚‹</h2><p>Jenkinsã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¨®é¡ã‚’ãŠã•ã‚‰ã„ã—ã¾ã—ã‚‡ã†ï¼š</p><div class=tab-panel data-tab-group=505f3de6d2066acccf01b8690ef02c6b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("505f3de6d2066acccf01b8690ef02c6b","ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³")'>
<span class=tab-nav-text>ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³</span>
</button>
<button data-tab-item=ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("505f3de6d2066acccf01b8690ef02c6b","ãƒ¬ã‚·ãƒ¼ãƒãƒ¼")'>
<span class=tab-nav-text>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼</span>
</button>
<button data-tab-item=ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("505f3de6d2066acccf01b8690ef02c6b","ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼")'>
<span class=tab-nav-text>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</span>
</button>
<button data-tab-item=ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("505f3de6d2066acccf01b8690ef02c6b","ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼")'>
<span class=tab-nav-text>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼</span>
</button>
<button data-tab-item=ninja-ã‚³ãƒã‚¯ã‚¿ãƒ¼ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("505f3de6d2066acccf01b8690ef02c6b","ninja-ã‚³ãƒã‚¯ã‚¿ãƒ¼")'>
<span class=tab-nav-text><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja:</strong> ã‚³ãƒã‚¯ã‚¿ãƒ¼</span></span></span></button></div><div class=tab-content-container><div data-tab-item=ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ol><li>å®Ÿè¡Œæ™‚ã®è¨­å®šãŒå¿…è¦ãªå…±æœ‰æ©Ÿèƒ½ã‚’æŒã¤</li><li>ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å®Ÿè¡Œæ™‚é–“ã®è¦³å¯Ÿã«é–“æ¥çš„ã«å½¹ç«‹ã¤</li></ol><p>è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/2-extensions/index.html>ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®æ¦‚è¦</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p></div></div><div data-tab-item=ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ul><li>ãƒªãƒ¢ãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—</li><li>ãƒªãƒ¢ãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡</li></ul><p>ã“ã‚Œã‚‰ã¯ä¸€èˆ¬çš„ã« <em>pull</em> å¯¾ <em>push</em> ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿åé›†ã¨å‘¼ã°ã‚Œã€è©³ç´°ã«ã¤ã„ã¦ã¯<a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/3-receivers/index.html>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã®æ¦‚è¦</a>ã§èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</p></div></div><div data-tab-item=ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ul><li>ãƒ‡ãƒ¼ã‚¿ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ã¾ãŸã¯å€¤ã®è¿½åŠ ã¾ãŸã¯å‰Šé™¤</li><li>ãƒ‡ãƒ¼ã‚¿ã®è¦³å¯Ÿã¨æ„æ€æ±ºå®š</li><li>ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã€ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã€ãŠã‚ˆã³ä¸¦ã¹æ›¿ãˆ</li></ul><p>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’é€šéã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã¯ã€ä¸‹æµã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã‚’è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚
è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/4-processors/index.html>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã®æ¦‚è¦</a>ã‚’ã”è¦§ãã ã•ã„ã€‚</p></div></div><div data-tab-item=ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ul><li>ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ„ãƒ¼ãƒ«ã€ã‚µãƒ¼ãƒ“ã‚¹ã€ã¾ãŸã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«é€ä¿¡ã™ã‚‹</li></ul><p>OpenTelemetryã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯ã€Œãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€ã€ã™ã¹ã¦ã‚’ä¸€å…ƒåŒ–ã—ãŸè¦³æ¸¬å¯èƒ½æ€§ã‚¹ã‚¤ãƒ¼ãƒˆã‚’ç›®æŒ‡ã™ã®ã§ã¯ãªãã€OpenTelemetryã®å‰µè¨­åŸå‰‡ã«å¿ å®Ÿã§ã‚ã‚Šç¶šã‘ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ™ãƒ³ãƒ€ãƒ¼ã«ä¾å­˜ã—ãªã„å…¨ã¦ã®äººã®ãŸã‚ã®è¦³æ¸¬å¯èƒ½æ€§ã§ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/5-exporters/index.html>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®æ¦‚è¦</a>ã‚’ãŠèª­ã¿ãã ã•ã„ã€‚</p></div></div><div data-tab-item=ninja-ã‚³ãƒã‚¯ã‚¿ãƒ¼ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ã‚³ãƒã‚¯ã‚¿ãƒ¼ã¯æ¯”è¼ƒçš„æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã€ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã‚ã¾ã‚Šè§¦ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ã‚³ãƒã‚¯ã‚¿ãƒ¼ã¯ã€ç•°ãªã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚¿ã‚¤ãƒ—ã‚„ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã¾ãŸã„ã§ä½¿ç”¨ã§ãã‚‹ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã ã¨ã„ãˆã¾ã™ã€‚ãŸã¨ãˆã°ã€ã‚³ãƒã‚¯ã‚¿ãƒ¼ã¯ãƒ­ã‚°ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã—ã¦å‡ºåŠ›ã—ãŸã‚Šã€ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å—ã‘å–ã‚Šã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æä¾›ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã‚³ãƒã‚¯ã‚¿ãƒ¼ãŒè§£æ±ºã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ul><li>ç•°ãªã‚‹ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚¿ã‚¤ãƒ—é–“ã®å¤‰æ›<ul><li>ãƒ­ã‚°ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¸</li><li>ãƒˆãƒ¬ãƒ¼ã‚¹ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¸</li><li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‹ã‚‰ãƒ­ã‚°ã¸</li></ul></li><li>å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¦³å¯Ÿã—ã€è‡ªèº«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹<ul><li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å—ã‘å–ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†æãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã€‚</li></ul></li></ul><p><strong>Ninja</strong>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸€éƒ¨ã¨ã—ã¦<a href=/observability-workshop/v5.90/ja/other/opentelemetry-collector/4-processors/index.html>ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã®æ¦‚è¦</a>å†…ã§ç°¡å˜ã«æ¦‚è¦ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p></div></div></div></div><p>ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦è€ƒãˆã‚‹ã¨ã€Jenkins ã«å¯¾å¿œã™ã‚‹å ´åˆã¯ãƒ—ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’é–‹ç™ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h3 id=ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¨­è¨ˆã™ã‚‹>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¨­è¨ˆã™ã‚‹</h3><p>ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãŸã‚ã«é–‹ç™ºã•ã‚ŒãŸ <a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/cmd/mdatagen rel=external target=_blank>mdatagen</a> ã‚’ä½¿ã£ã¦ã€yaml ã§å®šç¾©ã—ãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã—ã¦ã„ãã¾ã™ã€‚</p><div class=tab-panel data-tab-group=32426500c512b9c0d6c5864b6264e2e5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=metadatayaml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("32426500c512b9c0d6c5864b6264e2e5","metadatayaml")'>
<span class=tab-nav-text>metadata.yaml</span>
</button>
<button data-tab-item=gengo class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("32426500c512b9c0d6c5864b6264e2e5","gengo")'>
<span class=tab-nav-text>gen.go</span></button></div><div class=tab-content-container><div data-tab-item=metadatayaml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Type defines the name to reference the component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># in the configuration file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Status defines the component type and the stability level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class=l>receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stability</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>development</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>metrics]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Attributes are the expected fields reported</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># with the exported values.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The name of the associated Jenkins job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>job.status</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Shows if the job had passed, or failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enum</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>failed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>success</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>unknown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Metrics defines all the pontentially exported values from this receiver. </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.jobs.count</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Provides a count of the total number of configured jobs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{Count}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.duration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Show the duration of the job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jenkins.job.commit_delta</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>The calculation difference of the time job was finished minus commit timestamp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gauge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value_type</span><span class=p>:</span><span class=w> </span><span class=l>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>attributes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>job.status</span></span></span></code></pre></div></div></div><div data-tab-item=gengo class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// To generate the additional code needed to capture metrics, </span>
</span></span><span class=line><span class=cl><span class=c1>// the following command to be run from the shell:</span>
</span></span><span class=line><span class=cl><span class=c1>//  go generate -x ./...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//go:generate go run github.com/open-telemetry/opentelemetry-collector-contrib/cmd/mdatagen@v0.80.0 metadata.yaml</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// There is no code defined within this file.</span></span></span></code></pre></div></div></div></div></div><p>æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é€²ã‚€å‰ã«ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€å†…ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚</p><h2 id=factory-ã®æ§‹ç¯‰>Factory ã®æ§‹ç¯‰</h2><p>Factory ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€ç¨®ã§ã€æä¾›ã•ã‚ŒãŸ Configuration ã‚’ä½¿ã£ã¦ã€å‹•çš„ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆã“ã®å ´åˆã¯ <code>jenkinscireceiver</code>ï¼‰ã‚’ä½œæˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚ç¾å®Ÿçš„ãªä¾‹ã§ã¯ã€æºå¸¯é›»è©±åº—ã«è¡Œã£ã¦ã€ã‚ãªãŸã®æ­£ç¢ºãªèª¬æ˜ã«åˆã£ãŸæºå¸¯é›»è©±ã‚’æ±‚ã‚ã€ãã‚Œã‚’æä¾›ã•ã‚Œã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</p><p>ã‚³ãƒãƒ³ãƒ‰ <code>go generate -x ./...</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®šç¾©ã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ <code>jenkinscireceiver/internal/metadata</code> ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><div class=tab-panel data-tab-group=85179bc947b725aa15e9e4641fb18ae3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=factorygo class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("85179bc947b725aa15e9e4641fb18ae3","factorygo")'>
<span class=tab-nav-text>factory.go</span>
</button>
<button data-tab-item=configgo class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("85179bc947b725aa15e9e4641fb18ae3","configgo")'>
<span class=tab-nav-text>config.go</span>
</button>
<button data-tab-item=scrapergo class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("85179bc947b725aa15e9e4641fb18ae3","scrapergo")'>
<span class=tab-nav-text>scraper.go</span>
</button>
<button data-tab-item=build-configyaml class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("85179bc947b725aa15e9e4641fb18ae3","build-configyaml")'>
<span class=tab-nav-text>build-config.yaml</span>
</button>
<button data-tab-item=project-layout class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("85179bc947b725aa15e9e4641fb18ae3","project-layout")'>
<span class=tab-nav-text>project layout</span></button></div><div class=tab-content-container><div data-tab-item=factorygo class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewFactory</span><span class=p>()</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>Factory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>receiver</span><span class=p>.</span><span class=nf>NewFactory</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>newDefaultConfig</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>receiver</span><span class=p>.</span><span class=nf>WithMetrics</span><span class=p>(</span><span class=nx>newMetricsReceiver</span><span class=p>,</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsStability</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newMetricsReceiver</span><span class=p>(</span><span class=nx>_</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>,</span> <span class=nx>cfg</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>consumer</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>)</span> <span class=p>(</span><span class=nx>receiver</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Convert the configuration into the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>conf</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.(</span><span class=o>*</span><span class=nx>Config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;can not convert config&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>sc</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>conf</span><span class=p>,</span> <span class=nx>set</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraperControllerReceiver</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&amp;</span><span class=nx>conf</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>set</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>consumer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>AddScraper</span><span class=p>(</span><span class=nx>sc</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=configgo class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/config/confighttp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Config</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// HTTPClientSettings contains all the values</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that are commonly shared across all HTTP interactions</span>
</span></span><span class=line><span class=cl>    <span class=c1>// performed by the collector.</span>
</span></span><span class=line><span class=cl>    <span class=nx>confighttp</span><span class=p>.</span><span class=nx>HTTPClientSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ScraperControllerSettings will allow us to schedule </span>
</span></span><span class=line><span class=cl>    <span class=c1>// how often to check for updates to builds.</span>
</span></span><span class=line><span class=cl>    <span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>ScraperControllerSettings</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=c1>// MetricsBuilderConfig contains all the metrics</span>
</span></span><span class=line><span class=cl>    <span class=c1>// that can be configured.</span>
</span></span><span class=line><span class=cl>    <span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span> <span class=s>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newDefaultConfig</span><span class=p>()</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Config</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ScraperControllerSettings</span><span class=p>:</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewDefaultScraperControllerSettings</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>HTTPClientSettings</span><span class=p>:</span>        <span class=nx>confighttp</span><span class=p>.</span><span class=nf>NewDefaultHTTPClientSettings</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>MetricsBuilderConfig</span><span class=p>:</span>      <span class=nx>metadata</span><span class=p>.</span><span class=nf>DefaultMetricsBuilderConfig</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=scrapergo class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a our scraper with our values </span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// To be filled in later</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span> <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetrics</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=build-configyaml class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>dist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>otelcol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Conf workshop collector&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>output_path</span><span class=p>:</span><span class=w> </span><span class=l>./dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v0.0.0-experimental</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/basicauthextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/receiver/otlpreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/jaegerreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>github.com/open-telemetry/opentelemetry-collector-contrib/receiver/prometheusreceiver v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>splunk.conf/workshop/example/jenkinscireceiver v0.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./jenkinscireceiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/processor/batchprocessor v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>exporters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/loggingexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>gomod</span><span class=p>:</span><span class=w> </span><span class=l>go.opentelemetry.io/collector/exporter/otlphttpexporter v0.80.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># This replace is a go directive that allows for redefine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># where to fetch the code to use since the default would be from a remote project.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>replaces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=l>splunk.conf/workshop/example/jenkinscireceiver =&gt; ./jenkinscireceiver</span></span></span></code></pre></div></div></div><div data-tab-item=project-layout class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>â”œâ”€â”€ build-config.yaml
</span></span><span class=line><span class=cl>â””â”€â”€ jenkinscireceiver
</span></span><span class=line><span class=cl>    â”œâ”€â”€ go.mod
</span></span><span class=line><span class=cl>    â”œâ”€â”€ config.go
</span></span><span class=line><span class=cl>    â”œâ”€â”€ factory.go
</span></span><span class=line><span class=cl>    â”œâ”€â”€ scraper.go
</span></span><span class=line><span class=cl>    â””â”€â”€ internal
</span></span><span class=line><span class=cl>      â””â”€â”€ metadata</span></span></code></pre></div></div></div></div></div><p>ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ä½œæˆã•ã‚ŒãŸã‚‰ã€<code>go mod tidy</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå–å¾—ã•ã‚Œã€<code>go.mod</code> ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/01</span></span></footer></article><article class=default><header class=headline></header><h1 id=opentelemetry-collector-ã‚’é–‹ç™ºã™ã‚‹>OpenTelemetry Collector ã‚’é–‹ç™ºã™ã‚‹</h1><h2 id=ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œã‚‹>ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œã‚‹</h2><p>ã“ã®æ™‚ç‚¹ã§ã¯ã€ä½•ã‚‚è¡Œã£ã¦ã„ãªã„ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã‹ã‚‰ã€Jenkins ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®å¿…è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><p>ã“ã“ã‹ã‚‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p><ol><li>Jenkinsã«æ¥ç¶šã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹</li><li>è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹</li><li>è¨­å®šã•ã‚ŒãŸã‚¸ãƒ§ãƒ–ã®æœ€å¾Œã®ãƒ“ãƒ«ãƒ‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å ±å‘Šã™ã‚‹</li><li>ã‚³ãƒŸãƒƒãƒˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨ã‚¸ãƒ§ãƒ–å®Œäº†ã®æ™‚é–“å·®ã‚’è¨ˆç®—ã™ã‚‹</li></ol><p>å¤‰æ›´ã‚’ <code>scraper.go</code> ã«åŠ ãˆã¦ã„ãã¾ã™ã€‚</p><div class=tab-panel data-tab-group=5fddd5733ae48e89d3dc4674706ca518><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=jenkins-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("5fddd5733ae48e89d3dc4674706ca518","jenkins-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹")'>
<span class=tab-nav-text><ol><li>Jenkins ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹</li></ol></span></button>
<button data-tab-item=ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("5fddd5733ae48e89d3dc4674706ca518","ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹")'>
<span class=tab-nav-text><ol start=2><li>ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹</li></ol></span></button>
<button data-tab-item=ã‚¸ãƒ§ãƒ–ã®çŠ¶æ…‹ã‚’å ±å‘Šã™ã‚‹ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("5fddd5733ae48e89d3dc4674706ca518","ã‚¸ãƒ§ãƒ–ã®çŠ¶æ…‹ã‚’å ±å‘Šã™ã‚‹")'>
<span class=tab-nav-text><ol start=3><li>ã‚¸ãƒ§ãƒ–ã®çŠ¶æ…‹ã‚’å ±å‘Šã™ã‚‹</li></ol></span></button>
<button data-tab-item=å·®åˆ†ã‚’å ±å‘Šã™ã‚‹ class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("5fddd5733ae48e89d3dc4674706ca518","å·®åˆ†ã‚’å ±å‘Šã™ã‚‹")'>
<span class=tab-nav-text><ol start=4><li>å·®åˆ†ã‚’å ±å‘Šã™ã‚‹</li></ol></span></button></div><div class=tab-content-container><div data-tab-item=jenkins-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p>Jenkinsã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã™ã‚‹ãŸã‚ã«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ <a href=https://pkg.go.dev/github.com/yosida95/golang-jenkins rel=external target=_blank>&ldquo;github.com/yosida95/golang-jenkins&rdquo;</a> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã¯ã€Jenkinsã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ãŸã‚ã«å¿…è¦ãªæ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>æ¬¡ã«ã€<a href=https://pkg.go.dev/go.opentelemetry.io/collector/receiver/scraperhelper rel=external target=_blank>&ldquo;go.opentelemetry.io/collector/receiver/scraperhelper&rdquo;</a> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã„ãã¤ã‹ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’åˆ©ç”¨ã—ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®èµ·å‹•ãŒå®Œäº†ã—ãŸã‚‰Jenkinsã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚¹ã‚¿ãƒ¼ãƒˆé–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>jenkinscireceiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>jenkins</span> <span class=s>&#34;github.com/yosida95/golang-jenkins&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/component&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/pdata/pmetric&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.opentelemetry.io/collector/receiver/scraperhelper&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;splunk.conf/workshop/example/jenkinscireceiver/internal/metadata&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>scraper</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mb</span>     <span class=o>*</span><span class=nx>metadata</span><span class=p>.</span><span class=nx>MetricsBuilder</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span> <span class=o>*</span><span class=nx>jenkins</span><span class=p>.</span><span class=nx>Jenkins</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>newScraper</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>Config</span><span class=p>,</span> <span class=nx>set</span> <span class=nx>receiver</span><span class=p>.</span><span class=nx>CreateSettings</span><span class=p>)</span> <span class=p>(</span><span class=nx>scraperhelper</span><span class=p>.</span><span class=nx>Scraper</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>scraper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>mb</span> <span class=p>:</span> <span class=nx>metadata</span><span class=p>.</span><span class=nf>NewMetricsBuilder</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>MetricsBuilderConfig</span><span class=p>,</span> <span class=nx>set</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>NewScraper</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>metadata</span><span class=p>.</span><span class=nx>Type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>scrape</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>scraperhelper</span><span class=p>.</span><span class=nf>WithStart</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>h</span> <span class=nx>component</span><span class=p>.</span><span class=nx>Host</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>client</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>cfg</span><span class=p>.</span><span class=nf>ToClient</span><span class=p>(</span><span class=nx>h</span><span class=p>,</span> <span class=nx>set</span><span class=p>.</span><span class=nx>TelemetrySettings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>// The collector provides a means of injecting authentication</span>
</span></span><span class=line><span class=cl>            <span class=c1>// on our behalf, so this will ignore the libraries approach</span>
</span></span><span class=line><span class=cl>            <span class=c1>// and use the configured http client with authentication.</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span> <span class=p>=</span> <span class=nx>jenkins</span><span class=p>.</span><span class=nf>NewJenkins</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Endpoint</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>SetHTTPClient</span><span class=p>(</span><span class=nx>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nf>NewMetrics</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>ã“ã‚Œã§ã€Jenkinsãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆã—ã¾ã—ãŸã€‚</p></div></div><div data-tab-item=ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>ã“ã“ã‹ã‚‰å…ˆã¯ã€å®Ÿè£…ãŒå¿…è¦ãª <code>scrape</code> ãƒ¡ã‚½ãƒƒãƒ‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€è¨­å®šã•ã‚ŒãŸé–“éš”ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯1åˆ†ï¼‰ã”ã¨ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><p>Jenkins ã‚µãƒ¼ãƒãƒ¼ã®è² è·çŠ¶æ³ã‚„ã€ã©ã®ç¨‹åº¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã«ã€Jenkins ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚¸ãƒ§ãƒ–ã®æ•°ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã€Jenkins ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ãƒªã‚¹ãƒˆåŒ–ã—ã€ã‚¨ãƒ©ãƒ¼ãŒå ±å‘Šã•ã‚ŒãŸå ´åˆã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãªã—ã§ãã‚Œã‚’è¿”ã—ã€ãã†ã§ãªã‘ã‚Œã°ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ“ãƒ«ãƒ€ãƒ¼ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç™ºè¡Œã—ã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// To be filled in</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=ã‚¸ãƒ§ãƒ–ã®çŠ¶æ…‹ã‚’å ±å‘Šã™ã‚‹ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã‚¸ãƒ§ãƒ–ã®æ•°ã‚’ãƒ¬ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ãã‚Œãã‚Œã®ã‚¸ãƒ§ãƒ–ã‚’èª¿æŸ»ã—ã€ãƒ¬ãƒãƒ¼ãƒˆã•ã‚ŒãŸå€¤ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã„ãã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// This will check the result of the job, however,</span>
</span></span><span class=line><span class=cl>        <span class=c1>// since the only defined attributes are </span>
</span></span><span class=line><span class=cl>        <span class=c1>// `success`, `failure`, and `unknown`. </span>
</span></span><span class=line><span class=cl>        <span class=c1>// it is assume that anything did not finish </span>
</span></span><span class=line><span class=cl>        <span class=c1>// with a success or failure to be an unknown status.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>build</span><span class=p>.</span><span class=nx>Result</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;aborted&#34;</span><span class=p>,</span> <span class=s>&#34;not_built&#34;</span><span class=p>,</span> <span class=s>&#34;unstable&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;success&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusSuccess</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;failure&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusFailed</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobDurationDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span><span class=p>.</span><span class=nx>Duration</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=å·®åˆ†ã‚’å ±å‘Šã™ã‚‹ class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ã‚¸ãƒ§ãƒ–å®Œäº†ã¾ã§ã«ã‹ã‹ã£ãŸæ™‚é–“ã‚’è¨ˆç®—ã—ã¦ã€<a href=https://cloud.google.com/blog/products/devops-sre/using-the-four-keys-to-measure-your-devops-performance rel=external target=_blank>DORA ãƒ¡ãƒˆãƒªã‚¯ã‚¹</a> ã‚’æ¨æ¸¬ã™ã‚‹ã®ã«å½¹ç«‹ã¦ã¦ã„ãã¾ã™ã€‚</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>scraper</span><span class=p>)</span> <span class=nf>scrape</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>(</span><span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jobs</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nf>GetJobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>pmetric</span><span class=p>.</span><span class=nx>Metrics</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Recording the timestamp to ensure</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all captured data points within this scrape have the same value. </span>
</span></span><span class=line><span class=cl>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>pcommon</span><span class=p>.</span><span class=nf>NewTimestampFromTime</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Casting to an int64 to match the expected type</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobsCountDataPoint</span><span class=p>(</span><span class=nx>now</span><span class=p>,</span> <span class=nb>int64</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>jobs</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>job</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>jobs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure we have valid results to start off with</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>build</span>  <span class=p>=</span> <span class=nx>job</span><span class=p>.</span><span class=nx>LastCompletedBuild</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span> <span class=p>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>AttributeJobStatusUnknown</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Previous step here</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Ensure that the `ChangeSet` has values</span>
</span></span><span class=line><span class=cl>        <span class=c1>// set so there is a valid value for us to reference</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Making the assumption that the first changeset</span>
</span></span><span class=line><span class=cl>        <span class=c1>// item is the most recent change.</span>
</span></span><span class=line><span class=cl>        <span class=nx>change</span> <span class=o>:=</span> <span class=nx>build</span><span class=p>.</span><span class=nx>ChangeSet</span><span class=p>.</span><span class=nx>Items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Record the difference from the build time</span>
</span></span><span class=line><span class=cl>        <span class=c1>// compared against the change timestamp.</span>
</span></span><span class=line><span class=cl>        <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>RecordJenkinsJobCommitDeltaDataPoint</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>now</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>int64</span><span class=p>(</span><span class=nx>build</span><span class=p>.</span><span class=nx>Timestamp</span><span class=o>-</span><span class=nx>change</span><span class=p>.</span><span class=nx>Timestamp</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>job</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nx>mb</span><span class=p>.</span><span class=nf>Emit</span><span class=p>(),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>ã“ã‚Œã‚‰ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã™ã¹ã¦å®Œäº†ã™ã‚‹ã¨ã€Jenkins CI ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒå®Œæˆã—ã¾ã™ï¼</p><h2 id=æ¬¡ã¯ä½•ã‚’ã™ã‚‹ã®>æ¬¡ã¯ä½•ã‚’ã™ã‚‹ã®ï¼Ÿ</h2><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¿…è¦ãªæ©Ÿèƒ½ã¯ã€ãŠãã‚‰ãä»–ã«ã‚‚ãŸãã•ã‚“æ€ã„ã¤ãã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã°ï¼š</p><ul><li>ã‚¸ãƒ§ãƒ–ã§ä½¿ç”¨ã•ã‚ŒãŸãƒ–ãƒ©ãƒ³ãƒåã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ</li><li>ã‚¸ãƒ§ãƒ–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ</li><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¸ãƒ§ãƒ–ã®ç·æŒç¶šæ™‚é–“ã‚’ã©ã®ã‚ˆã†ã«è¨ˆç®—ã—ã¾ã™ã‹ï¼Ÿ</li><li>å¤‰æ›´ãŒæ©Ÿèƒ½ã™ã‚‹ã‹ã©ã†ã‹ã‚’ã©ã®ã‚ˆã†ã«æ¤œè¨¼ã—ã¾ã™ã‹ï¼Ÿ</li></ul><p>ã“ã®æ™‚é–“ã‚’ä½¿ã£ã¦éŠã‚“ã§ã¿ãŸã‚Šã€å£Šã—ã¦ã¿ãŸã‚Šã€å¤‰æ›´ã—ã¦ã¿ãŸã‚Šã€ãƒ“ãƒ«ãƒ‰ã‹ã‚‰ã®ãƒ­ã‚°ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã¿ã‚‹ãªã©ã—ã¦ãã ã•ã„ã€‚</p><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>2023/12/08</span></span></footer></article></section></section></div></main></div><script src=/observability-workshop/v5.90/js/clipboard.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/perfect-scrollbar.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-color.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-dispatch.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-drag.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-ease.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-interpolate.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-selection.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-timer.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-transition.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/d3/d3-zoom.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/js-yaml.min.js?1746614790 defer></script><script src=/observability-workshop/v5.90/js/mermaid.min.js?1746614790 defer></script><script>window.themeUseMermaid=JSON.parse("{}")</script><script src=/observability-workshop/v5.90/js/theme.js?1746614790 defer></script></body></html>